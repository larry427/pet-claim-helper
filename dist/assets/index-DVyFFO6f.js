(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var nw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function G1(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var jh={exports:{}},au={},Ah={exports:{}},ar={};var J0;function Y1(){if(J0)return ar;J0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function L(V,j,q){this.props=V,this.context=j,this.refs=C,this.updater=q||y}L.prototype.isReactComponent={},L.prototype.setState=function(V,j){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,j,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function A(){}A.prototype=L.prototype;function J(V,j,q){this.props=V,this.context=j,this.refs=C,this.updater=q||y}var B=J.prototype=new A;B.constructor=J,E(B,L.prototype),B.isPureReactComponent=!0;var $=Array.isArray,oe=Object.prototype.hasOwnProperty,de={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function Y(V,j,q){var X,ae={},ue=null,ye=null;if(j!=null)for(X in j.ref!==void 0&&(ye=j.ref),j.key!==void 0&&(ue=""+j.key),j)oe.call(j,X)&&!H.hasOwnProperty(X)&&(ae[X]=j[X]);var he=arguments.length-2;if(he===1)ae.children=q;else if(1<he){for(var Se=Array(he),Ce=0;Ce<he;Ce++)Se[Ce]=arguments[Ce+2];ae.children=Se}if(V&&V.defaultProps)for(X in he=V.defaultProps,he)ae[X]===void 0&&(ae[X]=he[X]);return{$$typeof:n,type:V,key:ue,ref:ye,props:ae,_owner:de.current}}function D(V,j){return{$$typeof:n,type:V.type,key:j,ref:V.ref,props:V.props,_owner:V._owner}}function se(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function I(V){var j={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(q){return j[q]})}var R=/\/+/g;function re(V,j){return typeof V=="object"&&V!==null&&V.key!=null?I(""+V.key):j.toString(36)}function W(V,j,q,X,ae){var ue=typeof V;(ue==="undefined"||ue==="boolean")&&(V=null);var ye=!1;if(V===null)ye=!0;else switch(ue){case"string":case"number":ye=!0;break;case"object":switch(V.$$typeof){case n:case e:ye=!0}}if(ye)return ye=V,ae=ae(ye),V=X===""?"."+re(ye,0):X,$(ae)?(q="",V!=null&&(q=V.replace(R,"$&/")+"/"),W(ae,j,q,"",function(Ce){return Ce})):ae!=null&&(se(ae)&&(ae=D(ae,q+(!ae.key||ye&&ye.key===ae.key?"":(""+ae.key).replace(R,"$&/")+"/")+V)),j.push(ae)),1;if(ye=0,X=X===""?".":X+":",$(V))for(var he=0;he<V.length;he++){ue=V[he];var Se=X+re(ue,he);ye+=W(ue,j,q,Se,ae)}else if(Se=S(V),typeof Se=="function")for(V=Se.call(V),he=0;!(ue=V.next()).done;)ue=ue.value,Se=X+re(ue,he++),ye+=W(ue,j,q,Se,ae);else if(ue==="object")throw j=String(V),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return ye}function ie(V,j,q){if(V==null)return V;var X=[],ae=0;return W(V,X,"","",function(ue){return j.call(q,ue,ae++)}),X}function fe(V){if(V._status===-1){var j=V._result;j=j(),j.then(function(q){(V._status===0||V._status===-1)&&(V._status=1,V._result=q)},function(q){(V._status===0||V._status===-1)&&(V._status=2,V._result=q)}),V._status===-1&&(V._status=0,V._result=j)}if(V._status===1)return V._result.default;throw V._result}var ee={current:null},z={transition:null},le={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:z,ReactCurrentOwner:de};function be(){throw Error("act(...) is not supported in production builds of React.")}return ar.Children={map:ie,forEach:function(V,j,q){ie(V,function(){j.apply(this,arguments)},q)},count:function(V){var j=0;return ie(V,function(){j++}),j},toArray:function(V){return ie(V,function(j){return j})||[]},only:function(V){if(!se(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},ar.Component=L,ar.Fragment=t,ar.Profiler=a,ar.PureComponent=J,ar.StrictMode=s,ar.Suspense=f,ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,ar.act=be,ar.cloneElement=function(V,j,q){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var X=E({},V.props),ae=V.key,ue=V.ref,ye=V._owner;if(j!=null){if(j.ref!==void 0&&(ue=j.ref,ye=de.current),j.key!==void 0&&(ae=""+j.key),V.type&&V.type.defaultProps)var he=V.type.defaultProps;for(Se in j)oe.call(j,Se)&&!H.hasOwnProperty(Se)&&(X[Se]=j[Se]===void 0&&he!==void 0?he[Se]:j[Se])}var Se=arguments.length-2;if(Se===1)X.children=q;else if(1<Se){he=Array(Se);for(var Ce=0;Ce<Se;Ce++)he[Ce]=arguments[Ce+2];X.children=he}return{$$typeof:n,type:V.type,key:ae,ref:ue,props:X,_owner:ye}},ar.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:o,_context:V},V.Consumer=V},ar.createElement=Y,ar.createFactory=function(V){var j=Y.bind(null,V);return j.type=V,j},ar.createRef=function(){return{current:null}},ar.forwardRef=function(V){return{$$typeof:d,render:V}},ar.isValidElement=se,ar.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:fe}},ar.memo=function(V,j){return{$$typeof:p,type:V,compare:j===void 0?null:j}},ar.startTransition=function(V){var j=z.transition;z.transition={};try{V()}finally{z.transition=j}},ar.unstable_act=be,ar.useCallback=function(V,j){return ee.current.useCallback(V,j)},ar.useContext=function(V){return ee.current.useContext(V)},ar.useDebugValue=function(){},ar.useDeferredValue=function(V){return ee.current.useDeferredValue(V)},ar.useEffect=function(V,j){return ee.current.useEffect(V,j)},ar.useId=function(){return ee.current.useId()},ar.useImperativeHandle=function(V,j,q){return ee.current.useImperativeHandle(V,j,q)},ar.useInsertionEffect=function(V,j){return ee.current.useInsertionEffect(V,j)},ar.useLayoutEffect=function(V,j){return ee.current.useLayoutEffect(V,j)},ar.useMemo=function(V,j){return ee.current.useMemo(V,j)},ar.useReducer=function(V,j,q){return ee.current.useReducer(V,j,q)},ar.useRef=function(V){return ee.current.useRef(V)},ar.useState=function(V){return ee.current.useState(V)},ar.useSyncExternalStore=function(V,j,q){return ee.current.useSyncExternalStore(V,j,q)},ar.useTransition=function(){return ee.current.useTransition()},ar.version="18.3.1",ar}var X0;function Rf(){return X0||(X0=1,Ah.exports=Y1()),Ah.exports}var Q0;function K1(){if(Q0)return au;Q0=1;var n=Rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,p){var v,_={},S=null,y=null;p!==void 0&&(S=""+p),f.key!==void 0&&(S=""+f.key),f.ref!==void 0&&(y=f.ref);for(v in f)s.call(f,v)&&!o.hasOwnProperty(v)&&(_[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)_[v]===void 0&&(_[v]=f[v]);return{$$typeof:e,type:d,key:S,ref:y,props:_,_owner:a.current}}return au.Fragment=t,au.jsx=u,au.jsxs=u,au}var Z0;function J1(){return Z0||(Z0=1,jh.exports=K1()),jh.exports}var l=J1(),me=Rf();const Ff=wu(me);var id={},Ch={exports:{}},Qs={},Ph={exports:{}},Eh={};var ep;function X1(){return ep||(ep=1,(function(n){function e(z,le){var be=z.length;z.push(le);e:for(;0<be;){var V=be-1>>>1,j=z[V];if(0<a(j,le))z[V]=le,z[be]=j,be=V;else break e}}function t(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var le=z[0],be=z.pop();if(be!==le){z[0]=be;e:for(var V=0,j=z.length,q=j>>>1;V<q;){var X=2*(V+1)-1,ae=z[X],ue=X+1,ye=z[ue];if(0>a(ae,be))ue<j&&0>a(ye,ae)?(z[V]=ye,z[ue]=be,V=ue):(z[V]=ae,z[X]=be,V=X);else if(ue<j&&0>a(ye,be))z[V]=ye,z[ue]=be,V=ue;else break e}}return le}function a(z,le){var be=z.sortIndex-le.sortIndex;return be!==0?be:z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],p=[],v=1,_=null,S=3,y=!1,E=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(z){for(var le=t(p);le!==null;){if(le.callback===null)s(p);else if(le.startTime<=z)s(p),le.sortIndex=le.expirationTime,e(f,le);else break;le=t(p)}}function $(z){if(C=!1,B(z),!E)if(t(f)!==null)E=!0,fe(oe);else{var le=t(p);le!==null&&ee($,le.startTime-z)}}function oe(z,le){E=!1,C&&(C=!1,A(Y),Y=-1),y=!0;var be=S;try{for(B(le),_=t(f);_!==null&&(!(_.expirationTime>le)||z&&!I());){var V=_.callback;if(typeof V=="function"){_.callback=null,S=_.priorityLevel;var j=V(_.expirationTime<=le);le=n.unstable_now(),typeof j=="function"?_.callback=j:_===t(f)&&s(f),B(le)}else s(f);_=t(f)}if(_!==null)var q=!0;else{var X=t(p);X!==null&&ee($,X.startTime-le),q=!1}return q}finally{_=null,S=be,y=!1}}var de=!1,H=null,Y=-1,D=5,se=-1;function I(){return!(n.unstable_now()-se<D)}function R(){if(H!==null){var z=n.unstable_now();se=z;var le=!0;try{le=H(!0,z)}finally{le?re():(de=!1,H=null)}}else de=!1}var re;if(typeof J=="function")re=function(){J(R)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ie=W.port2;W.port1.onmessage=R,re=function(){ie.postMessage(null)}}else re=function(){L(R,0)};function fe(z){H=z,de||(de=!0,re())}function ee(z,le){Y=L(function(){z(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,fe(oe))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(z){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var be=S;S=le;try{return z()}finally{S=be}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,le){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var be=S;S=z;try{return le()}finally{S=be}},n.unstable_scheduleCallback=function(z,le,be){var V=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?V+be:V):be=V,z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=be+j,z={id:v++,callback:le,priorityLevel:z,startTime:be,expirationTime:j,sortIndex:-1},be>V?(z.sortIndex=be,e(p,z),t(f)===null&&z===t(p)&&(C?(A(Y),Y=-1):C=!0,ee($,be-V))):(z.sortIndex=j,e(f,z),E||y||(E=!0,fe(oe))),z},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(z){var le=S;return function(){var be=S;S=le;try{return z.apply(this,arguments)}finally{S=be}}}})(Eh)),Eh}var tp;function Q1(){return tp||(tp=1,Ph.exports=X1()),Ph.exports}var rp;function Z1(){if(rp)return Qs;rp=1;var n=Rf(),e=Q1();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(a[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function S(r){return f.call(_,r)?!0:f.call(v,r)?!1:p.test(r)?_[r]=!0:(v[r]=!0,!1)}function y(r,i,c,m){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function E(r,i,c,m){if(i===null||typeof i>"u"||y(r,i,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(r,i,c,m,b,N,F){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=r,this.type=i,this.sanitizeURL=N,this.removeEmptyString=F}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new C(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function J(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(A,J);L[i]=new C(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(A,J);L[i]=new C(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(A,J);L[i]=new C(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function B(r,i,c,m){var b=L.hasOwnProperty(i)?L[i]:null;(b!==null?b.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(E(i,c,b,m)&&(c=null),m||b===null?S(i)&&(c===null?r.removeAttribute(i):r.setAttribute(i,""+c)):b.mustUseProperty?r[b.propertyName]=c===null?b.type===3?!1:"":c:(i=b.attributeName,m=b.attributeNamespace,c===null?r.removeAttribute(i):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,m?r.setAttributeNS(m,i,c):r.setAttribute(i,c))))}var $=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),de=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),z=Symbol.iterator;function le(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var be=Object.assign,V;function j(r){if(V===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+r}var q=!1;function X(r,i){if(!r||q)return"";q=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Oe){var m=Oe}Reflect.construct(r,[],i)}else{try{i.call()}catch(Oe){m=Oe}r.call(i.prototype)}else{try{throw Error()}catch(Oe){m=Oe}r()}}catch(Oe){if(Oe&&m&&typeof Oe.stack=="string"){for(var b=Oe.stack.split(`
`),N=m.stack.split(`
`),F=b.length-1,ce=N.length-1;1<=F&&0<=ce&&b[F]!==N[ce];)ce--;for(;1<=F&&0<=ce;F--,ce--)if(b[F]!==N[ce]){if(F!==1||ce!==1)do if(F--,ce--,0>ce||b[F]!==N[ce]){var xe=`
`+b[F].replace(" at new "," at ");return r.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",r.displayName)),xe}while(1<=F&&0<=ce);break}}}finally{q=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?j(r):""}function ae(r){switch(r.tag){case 5:return j(r.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return r=X(r.type,!1),r;case 11:return r=X(r.type.render,!1),r;case 1:return r=X(r.type,!0),r;default:return""}}function ue(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case H:return"Fragment";case de:return"Portal";case D:return"Profiler";case Y:return"StrictMode";case re:return"Suspense";case W:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case I:return(r.displayName||"Context")+".Consumer";case se:return(r._context.displayName||"Context")+".Provider";case R:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ie:return i=r.displayName||null,i!==null?i:ue(r.type)||"Memo";case fe:i=r._payload,r=r._init;try{return ue(r(i))}catch{}}return null}function ye(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(i);case 8:return i===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function he(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Se(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ce(r){var i=Se(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),m=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,N=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return b.call(this)},set:function(F){m=""+F,N.call(this,F)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(F){m=""+F},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ze(r){r._valueTracker||(r._valueTracker=Ce(r))}function Ie(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return r&&(m=Se(r)?r.checked?"true":"false":r.value),r=m,r!==c?(i.setValue(r),!0):!1}function Ge(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function st(r,i){var c=i.checked;return be({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Z(r,i){var c=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;c=he(i.value!=null?i.value:c),r._wrapperState={initialChecked:m,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Qe(r,i){i=i.checked,i!=null&&B(r,"checked",i,!1)}function It(r,i){Qe(r,i);var c=he(i.value),m=i.type;if(c!=null)m==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?We(r,i.type,c):i.hasOwnProperty("defaultValue")&&We(r,i.type,he(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function St(r,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,c||i===r.value||(r.value=i),r.defaultValue=i}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function We(r,i,c){(i!=="number"||Ge(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var _t=Array.isArray;function rt(r,i,c,m){if(r=r.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<r.length;c++)b=i.hasOwnProperty("$"+r[c].value),r[c].selected!==b&&(r[c].selected=b),b&&m&&(r[c].defaultSelected=!0)}else{for(c=""+he(c),i=null,b=0;b<r.length;b++){if(r[b].value===c){r[b].selected=!0,m&&(r[b].defaultSelected=!0);return}i!==null||r[b].disabled||(i=r[b])}i!==null&&(i.selected=!0)}}function ut(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return be({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function tt(r,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(t(92));if(_t(c)){if(1<c.length)throw Error(t(93));c=c[0]}i=c}i==null&&(i=""),c=i}r._wrapperState={initialValue:he(c)}}function ur(r,i){var c=he(i.value),m=he(i.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),i.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),m!=null&&(r.defaultValue=""+m)}function Qt(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Wt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Wt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Dt,mt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,m,b){MSApp.execUnsafeLocalFunction(function(){return r(i,c,m,b)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Dt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Ft(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Br=["Webkit","ms","Moz","O"];Object.keys(ct).forEach(function(r){Br.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),ct[i]=ct[r]})});function er(r,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||ct.hasOwnProperty(r)&&ct[r]?(""+i).trim():i+"px"}function Ct(r,i){r=r.style;for(var c in i)if(i.hasOwnProperty(c)){var m=c.indexOf("--")===0,b=er(c,i[c],m);c==="float"&&(c="cssFloat"),m?r.setProperty(c,b):r[c]=b}}var Gt=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(r,i){if(i){if(Gt[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function jt(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hr=null;function Lt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qt=null,dr=null,$t=null;function Tt(r){if(r=Io(r)){if(typeof qt!="function")throw Error(t(280));var i=r.stateNode;i&&(i=pl(i),qt(r.stateNode,r.type,i))}}function lr(r){dr?$t?$t.push(r):$t=[r]:dr=r}function ti(){if(dr){var r=dr,i=$t;if($t=dr=null,Tt(r),i)for(r=0;r<i.length;r++)Tt(i[r])}}function Ur(r,i){return r(i)}function $n(){}var In=!1;function Pt(r,i,c){if(In)return r(i,c);In=!0;try{return Ur(r,i,c)}finally{In=!1,(dr!==null||$t!==null)&&($n(),ti())}}function ss(r,i){var c=r.stateNode;if(c===null)return null;var m=pl(c);if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(t(231,i,typeof c));return c}var is=!1;if(d)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){is=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{is=!1}function Sn(r,i,c,m,b,N,F,ce,xe){var Oe=Array.prototype.slice.call(arguments,3);try{i.apply(c,Oe)}catch(Ve){this.onError(Ve)}}var xr=!1,Dr=null,qr=!1,Cs=null,wi={onError:function(r){xr=!0,Dr=r}};function as(r,i,c,m,b,N,F,ce,xe){xr=!1,Dr=null,Sn.apply(wi,arguments)}function ri(r,i,c,m,b,N,F,ce,xe){if(as.apply(this,arguments),xr){if(xr){var Oe=Dr;xr=!1,Dr=null}else throw Error(t(198));qr||(qr=!0,Cs=Oe)}}function dn(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function Gr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Dn(r){if(dn(r)!==r)throw Error(t(188))}function Ui(r){var i=r.alternate;if(!i){if(i=dn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var c=r,m=i;;){var b=c.return;if(b===null)break;var N=b.alternate;if(N===null){if(m=b.return,m!==null){c=m;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===c)return Dn(b),r;if(N===m)return Dn(b),i;N=N.sibling}throw Error(t(188))}if(c.return!==m.return)c=b,m=N;else{for(var F=!1,ce=b.child;ce;){if(ce===c){F=!0,c=b,m=N;break}if(ce===m){F=!0,m=b,c=N;break}ce=ce.sibling}if(!F){for(ce=N.child;ce;){if(ce===c){F=!0,c=N,m=b;break}if(ce===m){F=!0,m=N,c=b;break}ce=ce.sibling}if(!F)throw Error(t(189))}}if(c.alternate!==m)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?r:i}function Wn(r){return r=Ui(r),r!==null?_i(r):null}function _i(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=_i(r);if(i!==null)return i;r=r.sibling}return null}var ps=e.unstable_scheduleCallback,Ni=e.unstable_cancelCallback,ni=e.unstable_shouldYield,ki=e.unstable_requestPaint,wr=e.unstable_now,Bs=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,Hn=e.unstable_UserBlockingPriority,Ps=e.unstable_NormalPriority,Ua=e.unstable_LowPriority,ma=e.unstable_IdlePriority,Si=null,os=null;function qa(r){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(Si,r,void 0,(r.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:zr,ga=Math.log,Ul=Math.LN2;function zr(r){return r>>>=0,r===0?32:31-(ga(r)/Ul|0)|0}var si=64,Vn=4194304;function Es(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ii(r,i){var c=r.pendingLanes;if(c===0)return 0;var m=0,b=r.suspendedLanes,N=r.pingedLanes,F=c&268435455;if(F!==0){var ce=F&~b;ce!==0?m=Es(ce):(N&=F,N!==0&&(m=Es(N)))}else F=c&~b,F!==0?m=Es(F):N!==0&&(m=Es(N));if(m===0)return 0;if(i!==0&&i!==m&&(i&b)===0&&(b=m&-m,N=i&-i,b>=N||b===16&&(N&4194240)!==0))return i;if((m&4)!==0&&(m|=c&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)c=31-Yr(i),b=1<<c,m|=r[c],i&=~b;return m}function ls(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(r,i){for(var c=r.suspendedLanes,m=r.pingedLanes,b=r.expirationTimes,N=r.pendingLanes;0<N;){var F=31-Yr(N),ce=1<<F,xe=b[F];xe===-1?((ce&c)===0||(ce&m)!==0)&&(b[F]=ls(ce,i)):xe<=i&&(r.expiredLanes|=ce),N&=~ce}}function jn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function za(){var r=si;return si<<=1,(si&4194240)===0&&(si=64),r}function zi(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Us(r,i,c){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Yr(i),r[i]=c}function qs(r,i){var c=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<c;){var b=31-Yr(c),N=1<<b;i[b]=0,m[b]=-1,r[b]=-1,c&=~N}}function va(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var m=31-Yr(c),b=1<<m;b&i|r[m]&i&&(r[m]|=i),c&=~b}}var cr=0;function $i(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ji,$a,bo,wo,Wi,xa=!1,Gn=[],zs=null,Yn=null,ms=null,Hi=new Map,Rt=new Map,$s=[],Wa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ha(r,i){switch(r){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Hi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(i.pointerId)}}function Kn(r,i,c,m,b,N){return r===null||r.nativeEvent!==N?(r={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:N,targetContainers:[b]},i!==null&&(i=Io(i),i!==null&&$a(i)),r):(r.eventSystemFlags|=m,i=r.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),r)}function ai(r,i,c,m,b){switch(i){case"focusin":return zs=Kn(zs,r,i,c,m,b),!0;case"dragenter":return Yn=Kn(Yn,r,i,c,m,b),!0;case"mouseover":return ms=Kn(ms,r,i,c,m,b),!0;case"pointerover":var N=b.pointerId;return Hi.set(N,Kn(Hi.get(N)||null,r,i,c,m,b)),!0;case"gotpointercapture":return N=b.pointerId,Rt.set(N,Kn(Rt.get(N)||null,r,i,c,m,b)),!0}return!1}function _o(r){var i=Ea(r.target);if(i!==null){var c=dn(i);if(c!==null){if(i=c.tag,i===13){if(i=Gr(c),i!==null){r.blockedOn=i,Wi(r.priority,function(){bo(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Va(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=P(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var m=new c.constructor(c.type,c);hr=m,c.target.dispatchEvent(m),hr=null}else return i=Io(c),i!==null&&$a(i),r.blockedOn=c,!1;i.shift()}return!0}function ya(r,i,c){Va(r)&&c.delete(i)}function Ga(){xa=!1,zs!==null&&Va(zs)&&(zs=null),Yn!==null&&Va(Yn)&&(Yn=null),ms!==null&&Va(ms)&&(ms=null),Hi.forEach(ya),Rt.forEach(ya)}function Rn(r,i){r.blockedOn===i&&(r.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ga)))}function Ws(r){function i(b){return Rn(b,r)}if(0<Gn.length){Rn(Gn[0],r);for(var c=1;c<Gn.length;c++){var m=Gn[c];m.blockedOn===r&&(m.blockedOn=null)}}for(zs!==null&&Rn(zs,r),Yn!==null&&Rn(Yn,r),ms!==null&&Rn(ms,r),Hi.forEach(i),Rt.forEach(i),c=0;c<$s.length;c++)m=$s[c],m.blockedOn===r&&(m.blockedOn=null);for(;0<$s.length&&(c=$s[0],c.blockedOn===null);)_o(c),c.blockedOn===null&&$s.shift()}var An=$.ReactCurrentBatchConfig,ba=!0;function Ya(r,i,c,m){var b=cr,N=An.transition;An.transition=null;try{cr=1,Vi(r,i,c,m)}finally{cr=b,An.transition=N}}function Ls(r,i,c,m){var b=cr,N=An.transition;An.transition=null;try{cr=4,Vi(r,i,c,m)}finally{cr=b,An.transition=N}}function Vi(r,i,c,m){if(ba){var b=P(r,i,c,m);if(b===null)dl(r,i,m,xn,c),Ha(r,m);else if(ai(b,r,i,c,m))m.stopPropagation();else if(Ha(r,m),i&4&&-1<Wa.indexOf(r)){for(;b!==null;){var N=Io(b);if(N!==null&&ji(N),N=P(r,i,c,m),N===null&&dl(r,i,m,xn,c),N===b)break;b=N}b!==null&&m.stopPropagation()}else dl(r,i,m,null,c)}}var xn=null;function P(r,i,c,m){if(xn=null,r=Lt(m),r=Ea(r),r!==null)if(i=dn(r),i===null)r=null;else if(c=i.tag,c===13){if(r=Gr(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return xn=r,null}function ge(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bs()){case qi:return 1;case Hn:return 4;case Ps:case Ua:return 16;case ma:return 536870912;default:return 16}default:return 16}}var Ne=null,Le=null,qe=null;function et(){if(qe)return qe;var r,i=Le,c=i.length,m,b="value"in Ne?Ne.value:Ne.textContent,N=b.length;for(r=0;r<c&&i[r]===b[r];r++);var F=c-r;for(m=1;m<=F&&i[c-m]===b[N-m];m++);return qe=b.slice(r,1<m?1-m:void 0)}function at(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function nt(){return!0}function Xe(){return!1}function ot(r){function i(c,m,b,N,F){this._reactName=c,this._targetInst=b,this.type=m,this.nativeEvent=N,this.target=F,this.currentTarget=null;for(var ce in r)r.hasOwnProperty(ce)&&(c=r[ce],this[ce]=c?c(N):N[ce]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?nt:Xe,this.isPropagationStopped=Xe,this}return be(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=nt)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=nt)},persist:function(){},isPersistent:nt}),i}var vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=ot(vt),x=be({},vt,{view:0,detail:0}),T=ot(x),Q,pe,ke,Me=be({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ke&&(ke&&r.type==="mousemove"?(Q=r.screenX-ke.screenX,pe=r.screenY-ke.screenY):pe=Q=0,ke=r),Q)},movementY:function(r){return"movementY"in r?r.movementY:pe}}),$e=ot(Me),ft=be({},Me,{dataTransfer:0}),bt=ot(ft),it=be({},x,{relatedTarget:0}),Je=ot(it),Ot=be({},vt,{animationName:0,elapsedTime:0,pseudoElement:0}),tr=ot(Ot),_r=be({},vt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),nr=ot(_r),fr=be({},vt,{data:0}),Or=ot(fr),Fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yi(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=oi[r])?!!i[r]:!1}function Ka(){return Yi}var No=be({},x,{key:function(r){if(r.key){var i=Fn[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=at(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gi[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(r){return r.type==="keypress"?at(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?at(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),wa=ot(No),Ja=be({},Me,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_a=ot(Ja),Na=be({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),Mn=ot(Na),Xa=be({},vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qa=ot(Xa),nl=be({},Me,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),sl=ot(nl),cs=[9,13,27,32],li=d&&"CompositionEvent"in window,Ai=null;d&&"documentMode"in document&&(Ai=document.documentMode);var ql=d&&"TextEvent"in window&&!Ai,Ts=d&&(!li||Ai&&8<Ai&&11>=Ai),ka=" ",ko=!1;function So(r,i){switch(r){case"keyup":return cs.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ki(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Hs=!1;function Os(r,i){switch(r){case"compositionend":return Ki(i);case"keypress":return i.which!==32?null:(ko=!0,ka);case"textInput":return r=i.data,r===ka&&ko?null:r;default:return null}}function Is(r,i){if(Hs)return r==="compositionend"||!li&&So(r,i)?(r=et(),qe=Le=Ne=null,Hs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ts&&i.locale!=="ko"?null:i.data;default:return null}}var Sa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ci(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Sa[r.type]:i==="textarea"}function Ji(r,i,c,m){lr(m),i=Vl(i,"onChange"),0<i.length&&(c=new rr("onChange","change",null,c,m),r.push({event:c,listeners:i}))}var Xi=null,Pi=null;function sn(r){cl(r,0)}function Za(r){var i=co(r);if(Ie(i))return r}function Ei(r,i){if(r==="change")return i}var ci=!1;if(d){var eo;if(d){var to="oninput"in document;if(!to){var jo=document.createElement("div");jo.setAttribute("oninput","return;"),to=typeof jo.oninput=="function"}eo=to}else eo=!1;ci=eo&&(!document.documentMode||9<document.documentMode)}function Ao(){Xi&&(Xi.detachEvent("onpropertychange",Qi),Pi=Xi=null)}function Qi(r){if(r.propertyName==="value"&&Za(Pi)){var i=[];Ji(i,Pi,r,Lt(r)),Pt(sn,i)}}function ja(r,i,c){r==="focusin"?(Ao(),Xi=i,Pi=c,Xi.attachEvent("onpropertychange",Qi)):r==="focusout"&&Ao()}function Aa(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Za(Pi)}function ro(r,i){if(r==="click")return Za(i)}function Ca(r,i){if(r==="input"||r==="change")return Za(i)}function no(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Qr=typeof Object.is=="function"?Object.is:no;function gs(r,i){if(Qr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var b=c[m];if(!f.call(i,b)||!Qr(r[b],i[b]))return!1}return!0}function pr(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function kr(r,i){var c=pr(r);r=0;for(var m;c;){if(c.nodeType===3){if(m=r+c.textContent.length,r<=i&&m>=i)return{node:c,offset:i-r};r=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pr(c)}}function Zr(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Zr(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function hn(){for(var r=window,i=Ge();i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=Ge(r.document)}return i}function ui(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function il(r){var i=hn(),c=r.focusedElem,m=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&Zr(c.ownerDocument.documentElement,c)){if(m!==null&&ui(c)){if(i=m.start,r=m.end,r===void 0&&(r=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(r,c.value.length);else if(r=(i=c.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var b=c.textContent.length,N=Math.min(m.start,b);m=m.end===void 0?N:Math.min(m.end,b),!r.extend&&N>m&&(b=m,m=N,N=b),b=kr(c,N);var F=kr(c,m);b&&F&&(r.rangeCount!==1||r.anchorNode!==b.node||r.anchorOffset!==b.offset||r.focusNode!==F.node||r.focusOffset!==F.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),r.removeAllRanges(),N>m?(r.addRange(i),r.extend(F.node,F.offset)):(i.setEnd(F.node,F.offset),r.addRange(i)))}}for(i=[],r=c;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)r=i[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Co=d&&"documentMode"in document&&11>=document.documentMode,Zi=null,zl=null,Po=null,$l=!1;function Rc(r,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$l||Zi==null||Zi!==Ge(m)||(m=Zi,"selectionStart"in m&&ui(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Po&&gs(Po,m)||(Po=m,m=Vl(zl,"onSelect"),0<m.length&&(i=new rr("onSelect","select",null,i,c),r.push({event:i,listeners:m}),i.target=Zi)))}function al(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var so={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},io={},Fc={};d&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ol(r){if(io[r])return io[r];if(!so[r])return r;var i=so[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Fc)return io[r]=i[c];return r}var Mc=ol("animationend"),Bc=ol("animationiteration"),Uc=ol("animationstart"),qc=ol("transitionend"),zc=new Map,$c="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(r,i){zc.set(r,i),o(i,[r])}for(var Eo=0;Eo<$c.length;Eo++){var us=$c[Eo],Vs=us.toLowerCase(),Wl=us[0].toUpperCase()+us.slice(1);Li(Vs,"on"+Wl)}Li(Mc,"onAnimationEnd"),Li(Bc,"onAnimationIteration"),Li(Uc,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(qc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Su=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function ll(r,i,c){var m=r.type||"unknown-event";r.currentTarget=c,ri(m,i,void 0,r),r.currentTarget=null}function cl(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var m=r[c],b=m.event;m=m.listeners;e:{var N=void 0;if(i)for(var F=m.length-1;0<=F;F--){var ce=m[F],xe=ce.instance,Oe=ce.currentTarget;if(ce=ce.listener,xe!==N&&b.isPropagationStopped())break e;ll(b,ce,Oe),N=xe}else for(F=0;F<m.length;F++){if(ce=m[F],xe=ce.instance,Oe=ce.currentTarget,ce=ce.listener,xe!==N&&b.isPropagationStopped())break e;ll(b,ce,Oe),N=xe}}}if(qr)throw r=Cs,qr=!1,Cs=null,r}function Cr(r,i){var c=i[xs];c===void 0&&(c=i[xs]=new Set);var m=r+"__bubble";c.has(m)||(ul(i,r,2,!1),c.add(m))}function Hl(r,i,c){var m=0;i&&(m|=4),ul(c,r,m,i)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function ao(r){if(!r[Lo]){r[Lo]=!0,s.forEach(function(c){c!=="selectionchange"&&(Su.has(c)||Hl(c,!1,r),Hl(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Lo]||(i[Lo]=!0,Hl("selectionchange",!1,i))}}function ul(r,i,c,m){switch(ge(i)){case 1:var b=Ya;break;case 4:b=Ls;break;default:b=Vi}c=b.bind(null,i,c,r),b=void 0,!is||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),m?b!==void 0?r.addEventListener(i,c,{capture:!0,passive:b}):r.addEventListener(i,c,!0):b!==void 0?r.addEventListener(i,c,{passive:b}):r.addEventListener(i,c,!1)}function dl(r,i,c,m,b){var N=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var F=m.tag;if(F===3||F===4){var ce=m.stateNode.containerInfo;if(ce===b||ce.nodeType===8&&ce.parentNode===b)break;if(F===4)for(F=m.return;F!==null;){var xe=F.tag;if((xe===3||xe===4)&&(xe=F.stateNode.containerInfo,xe===b||xe.nodeType===8&&xe.parentNode===b))return;F=F.return}for(;ce!==null;){if(F=Ea(ce),F===null)return;if(xe=F.tag,xe===5||xe===6){m=N=F;continue e}ce=ce.parentNode}}m=m.return}Pt(function(){var Oe=N,Ve=Lt(c),Ye=[];e:{var He=zc.get(r);if(He!==void 0){var lt=rr,xt=r;switch(r){case"keypress":if(at(c)===0)break e;case"keydown":case"keyup":lt=wa;break;case"focusin":xt="focus",lt=Je;break;case"focusout":xt="blur",lt=Je;break;case"beforeblur":case"afterblur":lt=Je;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=$e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=bt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Mn;break;case Mc:case Bc:case Uc:lt=tr;break;case qc:lt=Qa;break;case"scroll":lt=T;break;case"wheel":lt=sl;break;case"copy":case"cut":case"paste":lt=nr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=_a}var wt=(i&4)!==0,wn=!wt&&r==="scroll",Pe=wt?He!==null?He+"Capture":null:He;wt=[];for(var _e=Oe,Te;_e!==null;){Te=_e;var Ke=Te.stateNode;if(Te.tag===5&&Ke!==null&&(Te=Ke,Pe!==null&&(Ke=ss(_e,Pe),Ke!=null&&wt.push(hl(_e,Ke,Te)))),wn)break;_e=_e.return}0<wt.length&&(He=new lt(He,xt,null,c,Ve),Ye.push({event:He,listeners:wt}))}}if((i&7)===0){e:{if(He=r==="mouseover"||r==="pointerover",lt=r==="mouseout"||r==="pointerout",He&&c!==hr&&(xt=c.relatedTarget||c.fromElement)&&(Ea(xt)||xt[Jn]))break e;if((lt||He)&&(He=Ve.window===Ve?Ve:(He=Ve.ownerDocument)?He.defaultView||He.parentWindow:window,lt?(xt=c.relatedTarget||c.toElement,lt=Oe,xt=xt?Ea(xt):null,xt!==null&&(wn=dn(xt),xt!==wn||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(lt=null,xt=Oe),lt!==xt)){if(wt=$e,Ke="onMouseLeave",Pe="onMouseEnter",_e="mouse",(r==="pointerout"||r==="pointerover")&&(wt=_a,Ke="onPointerLeave",Pe="onPointerEnter",_e="pointer"),wn=lt==null?He:co(lt),Te=xt==null?He:co(xt),He=new wt(Ke,_e+"leave",lt,c,Ve),He.target=wn,He.relatedTarget=Te,Ke=null,Ea(Ve)===Oe&&(wt=new wt(Pe,_e+"enter",xt,c,Ve),wt.target=Te,wt.relatedTarget=wn,Ke=wt),wn=Ke,lt&&xt)t:{for(wt=lt,Pe=xt,_e=0,Te=wt;Te;Te=oo(Te))_e++;for(Te=0,Ke=Pe;Ke;Ke=oo(Ke))Te++;for(;0<_e-Te;)wt=oo(wt),_e--;for(;0<Te-_e;)Pe=oo(Pe),Te--;for(;_e--;){if(wt===Pe||Pe!==null&&wt===Pe.alternate)break t;wt=oo(wt),Pe=oo(Pe)}wt=null}else wt=null;lt!==null&&ju(Ye,He,lt,wt,!1),xt!==null&&wn!==null&&ju(Ye,wn,xt,wt,!0)}}e:{if(He=Oe?co(Oe):window,lt=He.nodeName&&He.nodeName.toLowerCase(),lt==="select"||lt==="input"&&He.type==="file")var At=Ei;else if(Ci(He))if(ci)At=Ca;else{At=Aa;var Mt=ja}else(lt=He.nodeName)&&lt.toLowerCase()==="input"&&(He.type==="checkbox"||He.type==="radio")&&(At=ro);if(At&&(At=At(r,Oe))){Ji(Ye,At,c,Ve);break e}Mt&&Mt(r,He,Oe),r==="focusout"&&(Mt=He._wrapperState)&&Mt.controlled&&He.type==="number"&&We(He,"number",He.value)}switch(Mt=Oe?co(Oe):window,r){case"focusin":(Ci(Mt)||Mt.contentEditable==="true")&&(Zi=Mt,zl=Oe,Po=null);break;case"focusout":Po=zl=Zi=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,Rc(Ye,c,Ve);break;case"selectionchange":if(Co)break;case"keydown":case"keyup":Rc(Ye,c,Ve)}var Bt;if(li)e:{switch(r){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else Hs?So(r,c)&&(Ht="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ht="onCompositionStart");Ht&&(Ts&&c.locale!=="ko"&&(Hs||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&Hs&&(Bt=et()):(Ne=Ve,Le="value"in Ne?Ne.value:Ne.textContent,Hs=!0)),Mt=Vl(Oe,Ht),0<Mt.length&&(Ht=new Or(Ht,r,null,c,Ve),Ye.push({event:Ht,listeners:Mt}),Bt?Ht.data=Bt:(Bt=Ki(c),Bt!==null&&(Ht.data=Bt)))),(Bt=ql?Os(r,c):Is(r,c))&&(Oe=Vl(Oe,"onBeforeInput"),0<Oe.length&&(Ve=new Or("onBeforeInput","beforeinput",null,c,Ve),Ye.push({event:Ve,listeners:Oe}),Ve.data=Bt))}cl(Ye,i)})}function hl(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Vl(r,i){for(var c=i+"Capture",m=[];r!==null;){var b=r,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=ss(r,c),N!=null&&m.unshift(hl(r,N,b)),N=ss(r,i),N!=null&&m.push(hl(r,N,b))),r=r.return}return m}function oo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function ju(r,i,c,m,b){for(var N=i._reactName,F=[];c!==null&&c!==m;){var ce=c,xe=ce.alternate,Oe=ce.stateNode;if(xe!==null&&xe===m)break;ce.tag===5&&Oe!==null&&(ce=Oe,b?(xe=ss(c,N),xe!=null&&F.unshift(hl(c,xe,ce))):b||(xe=ss(c,N),xe!=null&&F.push(hl(c,xe,ce)))),c=c.return}F.length!==0&&r.push({event:i,listeners:F})}var Ud=/\r\n?/g,qd=/\u0000|\uFFFD/g;function Au(r){return(typeof r=="string"?r:""+r).replace(Ud,`
`).replace(qd,"")}function Gl(r,i,c){if(i=Au(i),Au(r)!==i&&c)throw Error(t(425))}function To(){}var fl=null,lo=null;function Wc(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,Cu=typeof clearTimeout=="function"?clearTimeout:void 0,Pu=typeof Promise=="function"?Promise:void 0,zd=typeof queueMicrotask=="function"?queueMicrotask:typeof Pu<"u"?function(r){return Pu.resolve(null).then(r).catch($d)}:Hc;function $d(r){setTimeout(function(){throw r})}function Vc(r,i){var c=i,m=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(m===0){r.removeChild(b),Ws(i);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=b}while(c);Ws(i)}function ds(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Gs(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}var vs=Math.random().toString(36).slice(2),Ti="__reactFiber$"+vs,Oo="__reactProps$"+vs,Jn="__reactContainer$"+vs,xs="__reactEvents$"+vs,Wd="__reactListeners$"+vs,Hd="__reactHandles$"+vs;function Ea(r){var i=r[Ti];if(i)return i;for(var c=r.parentNode;c;){if(i=c[Jn]||c[Ti]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=Gs(r);r!==null;){if(c=r[Ti])return c;r=Gs(r)}return i}r=c,c=r.parentNode}return null}function Io(r){return r=r[Ti]||r[Jn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function co(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function pl(r){return r[Oo]||null}var Gc=[],ea=-1;function di(r){return{current:r}}function Nr(r){0>ea||(r.current=Gc[ea],Gc[ea]=null,ea--)}function Sr(r,i){ea++,Gc[ea]=r.current,r.current=i}var La={},Bn=di(La),ys=di(!1),uo=La;function Do(r,i){var c=r.type.contextTypes;if(!c)return La;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in c)b[N]=i[N];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=b),b}function bs(r){return r=r.childContextTypes,r!=null}function Yl(){Nr(ys),Nr(Bn)}function Eu(r,i,c){if(Bn.current!==La)throw Error(t(168));Sr(Bn,i),Sr(ys,c)}function Yc(r,i,c){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var b in m)if(!(b in i))throw Error(t(108,ye(r)||"Unknown",b));return be({},c,m)}function ho(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||La,uo=Bn.current,Sr(Bn,r),Sr(ys,ys.current),!0}function Lu(r,i,c){var m=r.stateNode;if(!m)throw Error(t(169));c?(r=Yc(r,i,uo),m.__reactInternalMemoizedMergedChildContext=r,Nr(ys),Nr(Bn),Sr(Bn,r)):Nr(ys),Sr(ys,c)}var ta=null,ml=!1,h=!1;function g(r){ta===null?ta=[r]:ta.push(r)}function w(r){ml=!0,g(r)}function k(){if(!h&&ta!==null){h=!0;var r=0,i=cr;try{var c=ta;for(cr=1;r<c.length;r++){var m=c[r];do m=m(!0);while(m!==null)}ta=null,ml=!1}catch(b){throw ta!==null&&(ta=ta.slice(r+1)),ps(qi,k),b}finally{cr=i,h=!1}}return null}var O=[],M=0,U=null,G=0,K=[],te=0,ve=null,Ae=1,ne="";function we(r,i){O[M++]=G,O[M++]=U,U=r,G=i}function je(r,i,c){K[te++]=Ae,K[te++]=ne,K[te++]=ve,ve=r;var m=Ae;r=ne;var b=32-Yr(m)-1;m&=~(1<<b),c+=1;var N=32-Yr(i)+b;if(30<N){var F=b-b%5;N=(m&(1<<F)-1).toString(32),m>>=F,b-=F,Ae=1<<32-Yr(i)+b|c<<b|m,ne=N+r}else Ae=1<<N|c<<b|m,ne=r}function Fe(r){r.return!==null&&(we(r,1),je(r,1,0))}function Ee(r){for(;r===U;)U=O[--M],O[M]=null,G=O[--M],O[M]=null;for(;r===ve;)ve=K[--te],K[te]=null,ne=K[--te],K[te]=null,Ae=K[--te],K[te]=null}var De=null,Re=null,Be=!1,Ue=null;function Nt(r,i){var c=Fi(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=r,i=r.deletions,i===null?(r.deletions=[c],r.flags|=16):i.push(c)}function dt(r,i){switch(r.tag){case 5:var c=r.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,De=r,Re=ds(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,De=r,Re=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=ve!==null?{id:Ae,overflow:ne}:null,r.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=Fi(18,null,null,0),c.stateNode=i,c.return=r,r.child=c,De=r,Re=null,!0):!1;default:return!1}}function Yt(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gt(r){if(Be){var i=Re;if(i){var c=i;if(!dt(r,i)){if(Yt(r))throw Error(t(418));i=ds(c.nextSibling);var m=De;i&&dt(r,i)?Nt(m,c):(r.flags=r.flags&-4097|2,Be=!1,De=r)}}else{if(Yt(r))throw Error(t(418));r.flags=r.flags&-4097|2,Be=!1,De=r}}}function ir(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;De=r}function en(r){if(r!==De)return!1;if(!Be)return ir(r),Be=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Wc(r.type,r.memoizedProps)),i&&(i=Re)){if(Yt(r))throw Kt(),Error(t(418));for(;i;)Nt(r,i),i=ds(i.nextSibling)}if(ir(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(i===0){Re=ds(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}r=r.nextSibling}Re=null}}else Re=De?ds(r.stateNode.nextSibling):null;return!0}function Kt(){for(var r=Re;r;)r=ds(r.nextSibling)}function ht(){Re=De=null,Be=!1}function Ze(r){Ue===null?Ue=[r]:Ue.push(r)}var an=$.ReactCurrentBatchConfig;function zt(r,i,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var m=c.stateNode}if(!m)throw Error(t(147,r));var b=m,N=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===N?i.ref:(i=function(F){var ce=b.refs;F===null?delete ce[N]:ce[N]=F},i._stringRef=N,i)}if(typeof r!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,r))}return r}function sr(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Ir(r){var i=r._init;return i(r._payload)}function Cn(r){function i(Pe,_e){if(r){var Te=Pe.deletions;Te===null?(Pe.deletions=[_e],Pe.flags|=16):Te.push(_e)}}function c(Pe,_e){if(!r)return null;for(;_e!==null;)i(Pe,_e),_e=_e.sibling;return null}function m(Pe,_e){for(Pe=new Map;_e!==null;)_e.key!==null?Pe.set(_e.key,_e):Pe.set(_e.index,_e),_e=_e.sibling;return Pe}function b(Pe,_e){return Pe=Ho(Pe,_e),Pe.index=0,Pe.sibling=null,Pe}function N(Pe,_e,Te){return Pe.index=Te,r?(Te=Pe.alternate,Te!==null?(Te=Te.index,Te<_e?(Pe.flags|=2,_e):Te):(Pe.flags|=2,_e)):(Pe.flags|=1048576,_e)}function F(Pe){return r&&Pe.alternate===null&&(Pe.flags|=2),Pe}function ce(Pe,_e,Te,Ke){return _e===null||_e.tag!==6?(_e=bh(Te,Pe.mode,Ke),_e.return=Pe,_e):(_e=b(_e,Te),_e.return=Pe,_e)}function xe(Pe,_e,Te,Ke){var At=Te.type;return At===H?Ve(Pe,_e,Te.props.children,Ke,Te.key):_e!==null&&(_e.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===fe&&Ir(At)===_e.type)?(Ke=b(_e,Te.props),Ke.ref=zt(Pe,_e,Te),Ke.return=Pe,Ke):(Ke=Xu(Te.type,Te.key,Te.props,null,Pe.mode,Ke),Ke.ref=zt(Pe,_e,Te),Ke.return=Pe,Ke)}function Oe(Pe,_e,Te,Ke){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Te.containerInfo||_e.stateNode.implementation!==Te.implementation?(_e=wh(Te,Pe.mode,Ke),_e.return=Pe,_e):(_e=b(_e,Te.children||[]),_e.return=Pe,_e)}function Ve(Pe,_e,Te,Ke,At){return _e===null||_e.tag!==7?(_e=Nl(Te,Pe.mode,Ke,At),_e.return=Pe,_e):(_e=b(_e,Te),_e.return=Pe,_e)}function Ye(Pe,_e,Te){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=bh(""+_e,Pe.mode,Te),_e.return=Pe,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case oe:return Te=Xu(_e.type,_e.key,_e.props,null,Pe.mode,Te),Te.ref=zt(Pe,null,_e),Te.return=Pe,Te;case de:return _e=wh(_e,Pe.mode,Te),_e.return=Pe,_e;case fe:var Ke=_e._init;return Ye(Pe,Ke(_e._payload),Te)}if(_t(_e)||le(_e))return _e=Nl(_e,Pe.mode,Te,null),_e.return=Pe,_e;sr(Pe,_e)}return null}function He(Pe,_e,Te,Ke){var At=_e!==null?_e.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return At!==null?null:ce(Pe,_e,""+Te,Ke);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case oe:return Te.key===At?xe(Pe,_e,Te,Ke):null;case de:return Te.key===At?Oe(Pe,_e,Te,Ke):null;case fe:return At=Te._init,He(Pe,_e,At(Te._payload),Ke)}if(_t(Te)||le(Te))return At!==null?null:Ve(Pe,_e,Te,Ke,null);sr(Pe,Te)}return null}function lt(Pe,_e,Te,Ke,At){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Pe=Pe.get(Te)||null,ce(_e,Pe,""+Ke,At);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case oe:return Pe=Pe.get(Ke.key===null?Te:Ke.key)||null,xe(_e,Pe,Ke,At);case de:return Pe=Pe.get(Ke.key===null?Te:Ke.key)||null,Oe(_e,Pe,Ke,At);case fe:var Mt=Ke._init;return lt(Pe,_e,Te,Mt(Ke._payload),At)}if(_t(Ke)||le(Ke))return Pe=Pe.get(Te)||null,Ve(_e,Pe,Ke,At,null);sr(_e,Ke)}return null}function xt(Pe,_e,Te,Ke){for(var At=null,Mt=null,Bt=_e,Ht=_e=0,ts=null;Bt!==null&&Ht<Te.length;Ht++){Bt.index>Ht?(ts=Bt,Bt=null):ts=Bt.sibling;var yr=He(Pe,Bt,Te[Ht],Ke);if(yr===null){Bt===null&&(Bt=ts);break}r&&Bt&&yr.alternate===null&&i(Pe,Bt),_e=N(yr,_e,Ht),Mt===null?At=yr:Mt.sibling=yr,Mt=yr,Bt=ts}if(Ht===Te.length)return c(Pe,Bt),Be&&we(Pe,Ht),At;if(Bt===null){for(;Ht<Te.length;Ht++)Bt=Ye(Pe,Te[Ht],Ke),Bt!==null&&(_e=N(Bt,_e,Ht),Mt===null?At=Bt:Mt.sibling=Bt,Mt=Bt);return Be&&we(Pe,Ht),At}for(Bt=m(Pe,Bt);Ht<Te.length;Ht++)ts=lt(Bt,Pe,Ht,Te[Ht],Ke),ts!==null&&(r&&ts.alternate!==null&&Bt.delete(ts.key===null?Ht:ts.key),_e=N(ts,_e,Ht),Mt===null?At=ts:Mt.sibling=ts,Mt=ts);return r&&Bt.forEach(function(Vo){return i(Pe,Vo)}),Be&&we(Pe,Ht),At}function wt(Pe,_e,Te,Ke){var At=le(Te);if(typeof At!="function")throw Error(t(150));if(Te=At.call(Te),Te==null)throw Error(t(151));for(var Mt=At=null,Bt=_e,Ht=_e=0,ts=null,yr=Te.next();Bt!==null&&!yr.done;Ht++,yr=Te.next()){Bt.index>Ht?(ts=Bt,Bt=null):ts=Bt.sibling;var Vo=He(Pe,Bt,yr.value,Ke);if(Vo===null){Bt===null&&(Bt=ts);break}r&&Bt&&Vo.alternate===null&&i(Pe,Bt),_e=N(Vo,_e,Ht),Mt===null?At=Vo:Mt.sibling=Vo,Mt=Vo,Bt=ts}if(yr.done)return c(Pe,Bt),Be&&we(Pe,Ht),At;if(Bt===null){for(;!yr.done;Ht++,yr=Te.next())yr=Ye(Pe,yr.value,Ke),yr!==null&&(_e=N(yr,_e,Ht),Mt===null?At=yr:Mt.sibling=yr,Mt=yr);return Be&&we(Pe,Ht),At}for(Bt=m(Pe,Bt);!yr.done;Ht++,yr=Te.next())yr=lt(Bt,Pe,Ht,yr.value,Ke),yr!==null&&(r&&yr.alternate!==null&&Bt.delete(yr.key===null?Ht:yr.key),_e=N(yr,_e,Ht),Mt===null?At=yr:Mt.sibling=yr,Mt=yr);return r&&Bt.forEach(function(V1){return i(Pe,V1)}),Be&&we(Pe,Ht),At}function wn(Pe,_e,Te,Ke){if(typeof Te=="object"&&Te!==null&&Te.type===H&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case oe:e:{for(var At=Te.key,Mt=_e;Mt!==null;){if(Mt.key===At){if(At=Te.type,At===H){if(Mt.tag===7){c(Pe,Mt.sibling),_e=b(Mt,Te.props.children),_e.return=Pe,Pe=_e;break e}}else if(Mt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===fe&&Ir(At)===Mt.type){c(Pe,Mt.sibling),_e=b(Mt,Te.props),_e.ref=zt(Pe,Mt,Te),_e.return=Pe,Pe=_e;break e}c(Pe,Mt);break}else i(Pe,Mt);Mt=Mt.sibling}Te.type===H?(_e=Nl(Te.props.children,Pe.mode,Ke,Te.key),_e.return=Pe,Pe=_e):(Ke=Xu(Te.type,Te.key,Te.props,null,Pe.mode,Ke),Ke.ref=zt(Pe,_e,Te),Ke.return=Pe,Pe=Ke)}return F(Pe);case de:e:{for(Mt=Te.key;_e!==null;){if(_e.key===Mt)if(_e.tag===4&&_e.stateNode.containerInfo===Te.containerInfo&&_e.stateNode.implementation===Te.implementation){c(Pe,_e.sibling),_e=b(_e,Te.children||[]),_e.return=Pe,Pe=_e;break e}else{c(Pe,_e);break}else i(Pe,_e);_e=_e.sibling}_e=wh(Te,Pe.mode,Ke),_e.return=Pe,Pe=_e}return F(Pe);case fe:return Mt=Te._init,wn(Pe,_e,Mt(Te._payload),Ke)}if(_t(Te))return xt(Pe,_e,Te,Ke);if(le(Te))return wt(Pe,_e,Te,Ke);sr(Pe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,_e!==null&&_e.tag===6?(c(Pe,_e.sibling),_e=b(_e,Te),_e.return=Pe,Pe=_e):(c(Pe,_e),_e=bh(Te,Pe.mode,Ke),_e.return=Pe,Pe=_e),F(Pe)):c(Pe,_e)}return wn}var fn=Cn(!0),Kr=Cn(!1),yn=di(null),Pn=null,$r=null,or=null;function mr(){or=$r=Pn=null}function Wr(r){var i=yn.current;Nr(yn),r._currentValue=i}function gr(r,i,c){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===c)break;r=r.return}}function tn(r,i){Pn=r,or=$r=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Ks=!0),r.firstContext=null)}function rn(r){var i=r._currentValue;if(or!==r)if(r={context:r,memoizedValue:i,next:null},$r===null){if(Pn===null)throw Error(t(308));$r=r,Pn.dependencies={lanes:0,firstContext:r}}else $r=$r.next=r;return i}var Pr=null;function Xn(r){Pr===null?Pr=[r]:Pr.push(r)}function jr(r,i,c,m){var b=i.interleaved;return b===null?(c.next=c,Xn(i)):(c.next=b.next,b.next=c),i.interleaved=c,Er(r,m)}function Er(r,i){r.lanes|=i;var c=r.alternate;for(c!==null&&(c.lanes|=i),c=r,r=r.return;r!==null;)r.childLanes|=i,c=r.alternate,c!==null&&(c.childLanes|=i),c=r,r=r.return;return c.tag===3?c.stateNode:null}var pn=!1;function Un(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ws(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function on(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ln(r,i,c){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(vr&2)!==0){var b=m.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),m.pending=i,Er(r,c)}return b=m.interleaved,b===null?(i.next=i,Xn(m)):(i.next=b.next,b.next=i),m.interleaved=i,Er(r,c)}function Qn(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,c|=m,i.lanes=c,va(r,c)}}function Lr(r,i){var c=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var b=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var F={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};N===null?b=N=F:N=N.next=F,c=c.next}while(c!==null);N===null?b=N=i:N=N.next=i}else b=N=i;c={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:m.shared,effects:m.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}function Zn(r,i,c,m){var b=r.updateQueue;pn=!1;var N=b.firstBaseUpdate,F=b.lastBaseUpdate,ce=b.shared.pending;if(ce!==null){b.shared.pending=null;var xe=ce,Oe=xe.next;xe.next=null,F===null?N=Oe:F.next=Oe,F=xe;var Ve=r.alternate;Ve!==null&&(Ve=Ve.updateQueue,ce=Ve.lastBaseUpdate,ce!==F&&(ce===null?Ve.firstBaseUpdate=Oe:ce.next=Oe,Ve.lastBaseUpdate=xe))}if(N!==null){var Ye=b.baseState;F=0,Ve=Oe=xe=null,ce=N;do{var He=ce.lane,lt=ce.eventTime;if((m&He)===He){Ve!==null&&(Ve=Ve.next={eventTime:lt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var xt=r,wt=ce;switch(He=i,lt=c,wt.tag){case 1:if(xt=wt.payload,typeof xt=="function"){Ye=xt.call(lt,Ye,He);break e}Ye=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=wt.payload,He=typeof xt=="function"?xt.call(lt,Ye,He):xt,He==null)break e;Ye=be({},Ye,He);break e;case 2:pn=!0}}ce.callback!==null&&ce.lane!==0&&(r.flags|=64,He=b.effects,He===null?b.effects=[ce]:He.push(ce))}else lt={eventTime:lt,lane:He,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ve===null?(Oe=Ve=lt,xe=Ye):Ve=Ve.next=lt,F|=He;if(ce=ce.next,ce===null){if(ce=b.shared.pending,ce===null)break;He=ce,ce=He.next,He.next=null,b.lastBaseUpdate=He,b.shared.pending=null}}while(!0);if(Ve===null&&(xe=Ye),b.baseState=xe,b.firstBaseUpdate=Oe,b.lastBaseUpdate=Ve,i=b.shared.interleaved,i!==null){b=i;do F|=b.lane,b=b.next;while(b!==i)}else N===null&&(b.shared.lanes=0);yl|=F,r.lanes=F,r.memoizedState=Ye}}function Ys(r,i,c){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],b=m.callback;if(b!==null){if(m.callback=null,m=c,typeof b!="function")throw Error(t(191,b));b.call(m)}}}var hi={},En=di(hi),cn=di(hi),Ta=di(hi);function ra(r){if(r===hi)throw Error(t(174));return r}function Ro(r,i){switch(Sr(Ta,i),Sr(cn,r),Sr(En,hi),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Zt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Zt(i,r)}Nr(En),Sr(En,i)}function Oi(){Nr(En),Nr(cn),Nr(Ta)}function Tu(r){ra(Ta.current);var i=ra(En.current),c=Zt(i,r.type);i!==c&&(Sr(cn,r),Sr(En,c))}function Kc(r){cn.current===r&&(Nr(En),Nr(cn))}var Rr=di(0);function fi(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Jc=[];function Xc(){for(var r=0;r<Jc.length;r++)Jc[r]._workInProgressVersionPrimary=null;Jc.length=0}var Kl=$.ReactCurrentDispatcher,Jl=$.ReactCurrentBatchConfig,Ii=0,Hr=null,mn=null,un=null,Fo=!1,na=!1,Mo=0,Vd=0;function bn(){throw Error(t(321))}function Xl(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Qr(r[c],i[c]))return!1;return!0}function gl(r,i,c,m,b,N){if(Ii=N,Hr=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Kl.current=r===null||r.memoizedState===null?x1:y1,r=c(m,b),na){N=0;do{if(na=!1,Mo=0,25<=N)throw Error(t(301));N+=1,un=mn=null,i.updateQueue=null,Kl.current=b1,r=c(m,b)}while(na)}if(Kl.current=Fu,i=mn!==null&&mn.next!==null,Ii=0,un=mn=Hr=null,Fo=!1,i)throw Error(t(300));return r}function Di(){var r=Mo!==0;return Mo=0,r}function pi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Hr.memoizedState=un=r:un=un.next=r,un}function Ds(){if(mn===null){var r=Hr.alternate;r=r!==null?r.memoizedState:null}else r=mn.next;var i=un===null?Hr.memoizedState:un.next;if(i!==null)un=i,mn=r;else{if(r===null)throw Error(t(310));mn=r,r={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},un===null?Hr.memoizedState=un=r:un=un.next=r}return un}function vl(r,i){return typeof i=="function"?i(r):i}function Ql(r){var i=Ds(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var m=mn,b=m.baseQueue,N=c.pending;if(N!==null){if(b!==null){var F=b.next;b.next=N.next,N.next=F}m.baseQueue=b=N,c.pending=null}if(b!==null){N=b.next,m=m.baseState;var ce=F=null,xe=null,Oe=N;do{var Ve=Oe.lane;if((Ii&Ve)===Ve)xe!==null&&(xe=xe.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),m=Oe.hasEagerState?Oe.eagerState:r(m,Oe.action);else{var Ye={lane:Ve,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};xe===null?(ce=xe=Ye,F=m):xe=xe.next=Ye,Hr.lanes|=Ve,yl|=Ve}Oe=Oe.next}while(Oe!==null&&Oe!==N);xe===null?F=m:xe.next=ce,Qr(m,i.memoizedState)||(Ks=!0),i.memoizedState=m,i.baseState=F,i.baseQueue=xe,c.lastRenderedState=m}if(r=c.interleaved,r!==null){b=r;do N=b.lane,Hr.lanes|=N,yl|=N,b=b.next;while(b!==r)}else b===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Oa(r){var i=Ds(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var m=c.dispatch,b=c.pending,N=i.memoizedState;if(b!==null){c.pending=null;var F=b=b.next;do N=r(N,F.action),F=F.next;while(F!==b);Qr(N,i.memoizedState)||(Ks=!0),i.memoizedState=N,i.baseQueue===null&&(i.baseState=N),c.lastRenderedState=N}return[N,m]}function Ou(){}function Qc(r,i){var c=Hr,m=Ds(),b=i(),N=!Qr(m.memoizedState,b);if(N&&(m.memoizedState=b,Ks=!0),m=m.queue,tc(Du.bind(null,c,m,r),[r]),m.getSnapshot!==i||N||un!==null&&un.memoizedState.tag&1){if(c.flags|=2048,Rs(9,Zc.bind(null,c,m,b,i),void 0,null),es===null)throw Error(t(349));(Ii&30)!==0||Iu(c,i,b)}return b}function Iu(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=Hr.updateQueue,i===null?(i={lastEffect:null,stores:null},Hr.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function Zc(r,i,c,m){i.value=c,i.getSnapshot=m,Bo(i)&&Zl(r)}function Du(r,i,c){return c(function(){Bo(i)&&Zl(r)})}function Bo(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Qr(r,c)}catch{return!0}}function Zl(r){var i=Er(r,1);i!==null&&la(i,r,1,-1)}function xl(r){var i=pi();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:r},i.queue=r,r=r.dispatch=v1.bind(null,Hr,r),[i.memoizedState,r]}function Rs(r,i,c,m){return r={tag:r,create:i,destroy:c,deps:m,next:null},i=Hr.updateQueue,i===null?(i={lastEffect:null,stores:null},Hr.updateQueue=i,i.lastEffect=r.next=r):(c=i.lastEffect,c===null?i.lastEffect=r.next=r:(m=c.next,c.next=r,r.next=m,i.lastEffect=r)),r}function sa(){return Ds().memoizedState}function mi(r,i,c,m){var b=pi();Hr.flags|=r,b.memoizedState=Rs(1|i,c,void 0,m===void 0?null:m)}function fo(r,i,c,m){var b=Ds();m=m===void 0?null:m;var N=void 0;if(mn!==null){var F=mn.memoizedState;if(N=F.destroy,m!==null&&Xl(m,F.deps)){b.memoizedState=Rs(i,c,N,m);return}}Hr.flags|=r,b.memoizedState=Rs(1|i,c,N,m)}function ec(r,i){return mi(8390656,8,r,i)}function tc(r,i){return fo(2048,8,r,i)}function Ru(r,i){return fo(4,2,r,i)}function rc(r,i){return fo(4,4,r,i)}function nc(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Yf(r,i,c){return c=c!=null?c.concat([r]):null,fo(4,4,nc.bind(null,i,r),c)}function Gd(){}function Kf(r,i){var c=Ds();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&Xl(i,m[1])?m[0]:(c.memoizedState=[r,i],r)}function Jf(r,i){var c=Ds();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&Xl(i,m[1])?m[0]:(r=r(),c.memoizedState=[r,i],r)}function Xf(r,i,c){return(Ii&21)===0?(r.baseState&&(r.baseState=!1,Ks=!0),r.memoizedState=c):(Qr(c,i)||(c=za(),Hr.lanes|=c,yl|=c,r.baseState=!0),i)}function m1(r,i){var c=cr;cr=c!==0&&4>c?c:4,r(!0);var m=Jl.transition;Jl.transition={};try{r(!1),i()}finally{cr=c,Jl.transition=m}}function Qf(){return Ds().memoizedState}function g1(r,i,c){var m=$o(r);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},Zf(r))e0(i,c);else if(c=jr(r,i,c,m),c!==null){var b=Ms();la(c,r,m,b),t0(c,i,m)}}function v1(r,i,c){var m=$o(r),b={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zf(r))e0(i,b);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=i.lastRenderedReducer,N!==null))try{var F=i.lastRenderedState,ce=N(F,c);if(b.hasEagerState=!0,b.eagerState=ce,Qr(ce,F)){var xe=i.interleaved;xe===null?(b.next=b,Xn(i)):(b.next=xe.next,xe.next=b),i.interleaved=b;return}}catch{}finally{}c=jr(r,i,b,m),c!==null&&(b=Ms(),la(c,r,m,b),t0(c,i,m))}}function Zf(r){var i=r.alternate;return r===Hr||i!==null&&i===Hr}function e0(r,i){na=Fo=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function t0(r,i,c){if((c&4194240)!==0){var m=i.lanes;m&=r.pendingLanes,c|=m,i.lanes=c,va(r,c)}}var Fu={readContext:rn,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},x1={readContext:rn,useCallback:function(r,i){return pi().memoizedState=[r,i===void 0?null:i],r},useContext:rn,useEffect:ec,useImperativeHandle:function(r,i,c){return c=c!=null?c.concat([r]):null,mi(4194308,4,nc.bind(null,i,r),c)},useLayoutEffect:function(r,i){return mi(4194308,4,r,i)},useInsertionEffect:function(r,i){return mi(4,2,r,i)},useMemo:function(r,i){var c=pi();return i=i===void 0?null:i,r=r(),c.memoizedState=[r,i],r},useReducer:function(r,i,c){var m=pi();return i=c!==void 0?c(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=g1.bind(null,Hr,r),[m.memoizedState,r]},useRef:function(r){var i=pi();return r={current:r},i.memoizedState=r},useState:xl,useDebugValue:Gd,useDeferredValue:function(r){return pi().memoizedState=r},useTransition:function(){var r=xl(!1),i=r[0];return r=m1.bind(null,r[1]),pi().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,c){var m=Hr,b=pi();if(Be){if(c===void 0)throw Error(t(407));c=c()}else{if(c=i(),es===null)throw Error(t(349));(Ii&30)!==0||Iu(m,i,c)}b.memoizedState=c;var N={value:c,getSnapshot:i};return b.queue=N,ec(Du.bind(null,m,N,r),[r]),m.flags|=2048,Rs(9,Zc.bind(null,m,N,c,i),void 0,null),c},useId:function(){var r=pi(),i=es.identifierPrefix;if(Be){var c=ne,m=Ae;c=(m&~(1<<32-Yr(m)-1)).toString(32)+c,i=":"+i+"R"+c,c=Mo++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=Vd++,i=":"+i+"r"+c.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},y1={readContext:rn,useCallback:Kf,useContext:rn,useEffect:tc,useImperativeHandle:Yf,useInsertionEffect:Ru,useLayoutEffect:rc,useMemo:Jf,useReducer:Ql,useRef:sa,useState:function(){return Ql(vl)},useDebugValue:Gd,useDeferredValue:function(r){var i=Ds();return Xf(i,mn.memoizedState,r)},useTransition:function(){var r=Ql(vl)[0],i=Ds().memoizedState;return[r,i]},useMutableSource:Ou,useSyncExternalStore:Qc,useId:Qf,unstable_isNewReconciler:!1},b1={readContext:rn,useCallback:Kf,useContext:rn,useEffect:tc,useImperativeHandle:Yf,useInsertionEffect:Ru,useLayoutEffect:rc,useMemo:Jf,useReducer:Oa,useRef:sa,useState:function(){return Oa(vl)},useDebugValue:Gd,useDeferredValue:function(r){var i=Ds();return mn===null?i.memoizedState=r:Xf(i,mn.memoizedState,r)},useTransition:function(){var r=Oa(vl)[0],i=Ds().memoizedState;return[r,i]},useMutableSource:Ou,useSyncExternalStore:Qc,useId:Qf,unstable_isNewReconciler:!1};function ia(r,i){if(r&&r.defaultProps){i=be({},i),r=r.defaultProps;for(var c in r)i[c]===void 0&&(i[c]=r[c]);return i}return i}function Yd(r,i,c,m){i=r.memoizedState,c=c(m,i),c=c==null?i:be({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Mu={isMounted:function(r){return(r=r._reactInternals)?dn(r)===r:!1},enqueueSetState:function(r,i,c){r=r._reactInternals;var m=Ms(),b=$o(r),N=on(m,b);N.payload=i,c!=null&&(N.callback=c),i=ln(r,N,b),i!==null&&(la(i,r,b,m),Qn(i,r,b))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var m=Ms(),b=$o(r),N=on(m,b);N.tag=1,N.payload=i,c!=null&&(N.callback=c),i=ln(r,N,b),i!==null&&(la(i,r,b,m),Qn(i,r,b))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=Ms(),m=$o(r),b=on(c,m);b.tag=2,i!=null&&(b.callback=i),i=ln(r,b,m),i!==null&&(la(i,r,m,c),Qn(i,r,m))}};function r0(r,i,c,m,b,N,F){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,N,F):i.prototype&&i.prototype.isPureReactComponent?!gs(c,m)||!gs(b,N):!0}function n0(r,i,c){var m=!1,b=La,N=i.contextType;return typeof N=="object"&&N!==null?N=rn(N):(b=bs(i)?uo:Bn.current,m=i.contextTypes,N=(m=m!=null)?Do(r,b):La),i=new i(c,N),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Mu,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=b,r.__reactInternalMemoizedMaskedChildContext=N),i}function s0(r,i,c,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==r&&Mu.enqueueReplaceState(i,i.state,null)}function Kd(r,i,c,m){var b=r.stateNode;b.props=c,b.state=r.memoizedState,b.refs={},Un(r);var N=i.contextType;typeof N=="object"&&N!==null?b.context=rn(N):(N=bs(i)?uo:Bn.current,b.context=Do(r,N)),b.state=r.memoizedState,N=i.getDerivedStateFromProps,typeof N=="function"&&(Yd(r,i,N,c),b.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(i=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),i!==b.state&&Mu.enqueueReplaceState(b,b.state,null),Zn(r,c,b,m),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308)}function sc(r,i){try{var c="",m=i;do c+=ae(m),m=m.return;while(m);var b=c}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:r,source:i,stack:b,digest:null}}function Jd(r,i,c){return{value:r,source:null,stack:c??null,digest:i??null}}function Xd(r,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var w1=typeof WeakMap=="function"?WeakMap:Map;function i0(r,i,c){c=on(-1,c),c.tag=3,c.payload={element:null};var m=i.value;return c.callback=function(){Hu||(Hu=!0,hh=m),Xd(r,i)},c}function a0(r,i,c){c=on(-1,c),c.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var b=i.value;c.payload=function(){return m(b)},c.callback=function(){Xd(r,i)}}var N=r.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(c.callback=function(){Xd(r,i),typeof m!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var F=i.stack;this.componentDidCatch(i.value,{componentStack:F!==null?F:""})}),c}function o0(r,i,c){var m=r.pingCache;if(m===null){m=r.pingCache=new w1;var b=new Set;m.set(i,b)}else b=m.get(i),b===void 0&&(b=new Set,m.set(i,b));b.has(c)||(b.add(c),r=D1.bind(null,r,i,c),i.then(r,r))}function l0(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function c0(r,i,c,m,b){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=on(-1,1),i.tag=2,ln(c,i,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=b,r)}var _1=$.ReactCurrentOwner,Ks=!1;function Fs(r,i,c,m){i.child=r===null?Kr(i,null,c,m):fn(i,r.child,c,m)}function u0(r,i,c,m,b){c=c.render;var N=i.ref;return tn(i,b),m=gl(r,i,c,m,N,b),c=Di(),r!==null&&!Ks?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,po(r,i,b)):(Be&&c&&Fe(i),i.flags|=1,Fs(r,i,m,b),i.child)}function d0(r,i,c,m,b){if(r===null){var N=c.type;return typeof N=="function"&&!yh(N)&&N.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=N,h0(r,i,N,m,b)):(r=Xu(c.type,null,m,i,i.mode,b),r.ref=i.ref,r.return=i,i.child=r)}if(N=r.child,(r.lanes&b)===0){var F=N.memoizedProps;if(c=c.compare,c=c!==null?c:gs,c(F,m)&&r.ref===i.ref)return po(r,i,b)}return i.flags|=1,r=Ho(N,m),r.ref=i.ref,r.return=i,i.child=r}function h0(r,i,c,m,b){if(r!==null){var N=r.memoizedProps;if(gs(N,m)&&r.ref===i.ref)if(Ks=!1,i.pendingProps=m=N,(r.lanes&b)!==0)(r.flags&131072)!==0&&(Ks=!0);else return i.lanes=r.lanes,po(r,i,b)}return Qd(r,i,c,m,b)}function f0(r,i,c){var m=i.pendingProps,b=m.children,N=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(ac,gi),gi|=c;else{if((c&1073741824)===0)return r=N!==null?N.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Sr(ac,gi),gi|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=N!==null?N.baseLanes:c,Sr(ac,gi),gi|=m}else N!==null?(m=N.baseLanes|c,i.memoizedState=null):m=c,Sr(ac,gi),gi|=m;return Fs(r,i,b,c),i.child}function p0(r,i){var c=i.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Qd(r,i,c,m,b){var N=bs(c)?uo:Bn.current;return N=Do(i,N),tn(i,b),c=gl(r,i,c,m,N,b),m=Di(),r!==null&&!Ks?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,po(r,i,b)):(Be&&m&&Fe(i),i.flags|=1,Fs(r,i,c,b),i.child)}function m0(r,i,c,m,b){if(bs(c)){var N=!0;ho(i)}else N=!1;if(tn(i,b),i.stateNode===null)Uu(r,i),n0(i,c,m),Kd(i,c,m,b),m=!0;else if(r===null){var F=i.stateNode,ce=i.memoizedProps;F.props=ce;var xe=F.context,Oe=c.contextType;typeof Oe=="object"&&Oe!==null?Oe=rn(Oe):(Oe=bs(c)?uo:Bn.current,Oe=Do(i,Oe));var Ve=c.getDerivedStateFromProps,Ye=typeof Ve=="function"||typeof F.getSnapshotBeforeUpdate=="function";Ye||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ce!==m||xe!==Oe)&&s0(i,F,m,Oe),pn=!1;var He=i.memoizedState;F.state=He,Zn(i,m,F,b),xe=i.memoizedState,ce!==m||He!==xe||ys.current||pn?(typeof Ve=="function"&&(Yd(i,c,Ve,m),xe=i.memoizedState),(ce=pn||r0(i,c,ce,m,He,xe,Oe))?(Ye||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(i.flags|=4194308)):(typeof F.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=xe),F.props=m,F.state=xe,F.context=Oe,m=ce):(typeof F.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{F=i.stateNode,ws(r,i),ce=i.memoizedProps,Oe=i.type===i.elementType?ce:ia(i.type,ce),F.props=Oe,Ye=i.pendingProps,He=F.context,xe=c.contextType,typeof xe=="object"&&xe!==null?xe=rn(xe):(xe=bs(c)?uo:Bn.current,xe=Do(i,xe));var lt=c.getDerivedStateFromProps;(Ve=typeof lt=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ce!==Ye||He!==xe)&&s0(i,F,m,xe),pn=!1,He=i.memoizedState,F.state=He,Zn(i,m,F,b);var xt=i.memoizedState;ce!==Ye||He!==xt||ys.current||pn?(typeof lt=="function"&&(Yd(i,c,lt,m),xt=i.memoizedState),(Oe=pn||r0(i,c,Oe,m,He,xt,xe)||!1)?(Ve||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(m,xt,xe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(m,xt,xe)),typeof F.componentDidUpdate=="function"&&(i.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof F.componentDidUpdate!="function"||ce===r.memoizedProps&&He===r.memoizedState||(i.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ce===r.memoizedProps&&He===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=xt),F.props=m,F.state=xt,F.context=xe,m=Oe):(typeof F.componentDidUpdate!="function"||ce===r.memoizedProps&&He===r.memoizedState||(i.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ce===r.memoizedProps&&He===r.memoizedState||(i.flags|=1024),m=!1)}return Zd(r,i,c,m,N,b)}function Zd(r,i,c,m,b,N){p0(r,i);var F=(i.flags&128)!==0;if(!m&&!F)return b&&Lu(i,c,!1),po(r,i,N);m=i.stateNode,_1.current=i;var ce=F&&typeof c.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&F?(i.child=fn(i,r.child,null,N),i.child=fn(i,null,ce,N)):Fs(r,i,ce,N),i.memoizedState=m.state,b&&Lu(i,c,!0),i.child}function g0(r){var i=r.stateNode;i.pendingContext?Eu(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Eu(r,i.context,!1),Ro(r,i.containerInfo)}function v0(r,i,c,m,b){return ht(),Ze(b),i.flags|=256,Fs(r,i,c,m),i.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(r){return{baseLanes:r,cachePool:null,transitions:null}}function x0(r,i,c){var m=i.pendingProps,b=Rr.current,N=!1,F=(i.flags&128)!==0,ce;if((ce=F)||(ce=r!==null&&r.memoizedState===null?!1:(b&2)!==0),ce?(N=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(b|=1),Sr(Rr,b&1),r===null)return gt(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(F=m.children,r=m.fallback,N?(m=i.mode,N=i.child,F={mode:"hidden",children:F},(m&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=F):N=Qu(F,m,0,null),r=Nl(r,m,c,null),N.return=i,r.return=i,N.sibling=r,i.child=N,i.child.memoizedState=th(c),i.memoizedState=eh,r):rh(i,F));if(b=r.memoizedState,b!==null&&(ce=b.dehydrated,ce!==null))return N1(r,i,F,m,ce,b,c);if(N){N=m.fallback,F=i.mode,b=r.child,ce=b.sibling;var xe={mode:"hidden",children:m.children};return(F&1)===0&&i.child!==b?(m=i.child,m.childLanes=0,m.pendingProps=xe,i.deletions=null):(m=Ho(b,xe),m.subtreeFlags=b.subtreeFlags&14680064),ce!==null?N=Ho(ce,N):(N=Nl(N,F,c,null),N.flags|=2),N.return=i,m.return=i,m.sibling=N,i.child=m,m=N,N=i.child,F=r.child.memoizedState,F=F===null?th(c):{baseLanes:F.baseLanes|c,cachePool:null,transitions:F.transitions},N.memoizedState=F,N.childLanes=r.childLanes&~c,i.memoizedState=eh,m}return N=r.child,r=N.sibling,m=Ho(N,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=c),m.return=i,m.sibling=null,r!==null&&(c=i.deletions,c===null?(i.deletions=[r],i.flags|=16):c.push(r)),i.child=m,i.memoizedState=null,m}function rh(r,i){return i=Qu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Bu(r,i,c,m){return m!==null&&Ze(m),fn(i,r.child,null,c),r=rh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function N1(r,i,c,m,b,N,F){if(c)return i.flags&256?(i.flags&=-257,m=Jd(Error(t(422))),Bu(r,i,F,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(N=m.fallback,b=i.mode,m=Qu({mode:"visible",children:m.children},b,0,null),N=Nl(N,b,F,null),N.flags|=2,m.return=i,N.return=i,m.sibling=N,i.child=m,(i.mode&1)!==0&&fn(i,r.child,null,F),i.child.memoizedState=th(F),i.memoizedState=eh,N);if((i.mode&1)===0)return Bu(r,i,F,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var ce=m.dgst;return m=ce,N=Error(t(419)),m=Jd(N,m,void 0),Bu(r,i,F,m)}if(ce=(F&r.childLanes)!==0,Ks||ce){if(m=es,m!==null){switch(F&-F){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(m.suspendedLanes|F))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Er(r,b),la(m,r,b,-1))}return xh(),m=Jd(Error(t(421))),Bu(r,i,F,m)}return b.data==="$?"?(i.flags|=128,i.child=r.child,i=R1.bind(null,r),b._reactRetry=i,null):(r=N.treeContext,Re=ds(b.nextSibling),De=i,Be=!0,Ue=null,r!==null&&(K[te++]=Ae,K[te++]=ne,K[te++]=ve,Ae=r.id,ne=r.overflow,ve=i),i=rh(i,m.children),i.flags|=4096,i)}function y0(r,i,c){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),gr(r.return,i,c)}function nh(r,i,c,m,b){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:b}:(N.isBackwards=i,N.rendering=null,N.renderingStartTime=0,N.last=m,N.tail=c,N.tailMode=b)}function b0(r,i,c){var m=i.pendingProps,b=m.revealOrder,N=m.tail;if(Fs(r,i,m.children,c),m=Rr.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&y0(r,c,i);else if(r.tag===19)y0(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(Sr(Rr,m),(i.mode&1)===0)i.memoizedState=null;else switch(b){case"forwards":for(c=i.child,b=null;c!==null;)r=c.alternate,r!==null&&fi(r)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),nh(i,!1,b,c,N);break;case"backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(r=b.alternate,r!==null&&fi(r)===null){i.child=b;break}r=b.sibling,b.sibling=c,c=b,b=r}nh(i,!0,c,null,N);break;case"together":nh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Uu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function po(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),yl|=i.lanes,(c&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,c=Ho(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Ho(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function k1(r,i,c){switch(i.tag){case 3:g0(i),ht();break;case 5:Tu(i);break;case 1:bs(i.type)&&ho(i);break;case 4:Ro(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,b=i.memoizedProps.value;Sr(yn,m._currentValue),m._currentValue=b;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(Sr(Rr,Rr.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?x0(r,i,c):(Sr(Rr,Rr.current&1),r=po(r,i,c),r!==null?r.sibling:null);Sr(Rr,Rr.current&1);break;case 19:if(m=(c&i.childLanes)!==0,(r.flags&128)!==0){if(m)return b0(r,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Sr(Rr,Rr.current),m)break;return null;case 22:case 23:return i.lanes=0,f0(r,i,c)}return po(r,i,c)}var w0,sh,_0,N0;w0=function(r,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},sh=function(){},_0=function(r,i,c,m){var b=r.memoizedProps;if(b!==m){r=i.stateNode,ra(En.current);var N=null;switch(c){case"input":b=st(r,b),m=st(r,m),N=[];break;case"select":b=be({},b,{value:void 0}),m=be({},m,{value:void 0}),N=[];break;case"textarea":b=ut(r,b),m=ut(r,m),N=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=To)}br(c,m);var F;c=null;for(Oe in b)if(!m.hasOwnProperty(Oe)&&b.hasOwnProperty(Oe)&&b[Oe]!=null)if(Oe==="style"){var ce=b[Oe];for(F in ce)ce.hasOwnProperty(F)&&(c||(c={}),c[F]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(a.hasOwnProperty(Oe)?N||(N=[]):(N=N||[]).push(Oe,null));for(Oe in m){var xe=m[Oe];if(ce=b?.[Oe],m.hasOwnProperty(Oe)&&xe!==ce&&(xe!=null||ce!=null))if(Oe==="style")if(ce){for(F in ce)!ce.hasOwnProperty(F)||xe&&xe.hasOwnProperty(F)||(c||(c={}),c[F]="");for(F in xe)xe.hasOwnProperty(F)&&ce[F]!==xe[F]&&(c||(c={}),c[F]=xe[F])}else c||(N||(N=[]),N.push(Oe,c)),c=xe;else Oe==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,ce=ce?ce.__html:void 0,xe!=null&&ce!==xe&&(N=N||[]).push(Oe,xe)):Oe==="children"?typeof xe!="string"&&typeof xe!="number"||(N=N||[]).push(Oe,""+xe):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(a.hasOwnProperty(Oe)?(xe!=null&&Oe==="onScroll"&&Cr("scroll",r),N||ce===xe||(N=[])):(N=N||[]).push(Oe,xe))}c&&(N=N||[]).push("style",c);var Oe=N;(i.updateQueue=Oe)&&(i.flags|=4)}},N0=function(r,i,c,m){c!==m&&(i.flags|=4)};function eu(r,i){if(!Be)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function _s(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,m=0;if(i)for(var b=r.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=m,r.childLanes=c,i}function S1(r,i,c){var m=i.pendingProps;switch(Ee(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(i),null;case 1:return bs(i.type)&&Yl(),_s(i),null;case 3:return m=i.stateNode,Oi(),Nr(ys),Nr(Bn),Xc(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(en(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ue!==null&&(mh(Ue),Ue=null))),sh(r,i),_s(i),null;case 5:Kc(i);var b=ra(Ta.current);if(c=i.type,r!==null&&i.stateNode!=null)_0(r,i,c,m,b),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(t(166));return _s(i),null}if(r=ra(En.current),en(i)){m=i.stateNode,c=i.type;var N=i.memoizedProps;switch(m[Ti]=i,m[Oo]=N,r=(i.mode&1)!==0,c){case"dialog":Cr("cancel",m),Cr("close",m);break;case"iframe":case"object":case"embed":Cr("load",m);break;case"video":case"audio":for(b=0;b<Pa.length;b++)Cr(Pa[b],m);break;case"source":Cr("error",m);break;case"img":case"image":case"link":Cr("error",m),Cr("load",m);break;case"details":Cr("toggle",m);break;case"input":Z(m,N),Cr("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!N.multiple},Cr("invalid",m);break;case"textarea":tt(m,N),Cr("invalid",m)}br(c,N),b=null;for(var F in N)if(N.hasOwnProperty(F)){var ce=N[F];F==="children"?typeof ce=="string"?m.textContent!==ce&&(N.suppressHydrationWarning!==!0&&Gl(m.textContent,ce,r),b=["children",ce]):typeof ce=="number"&&m.textContent!==""+ce&&(N.suppressHydrationWarning!==!0&&Gl(m.textContent,ce,r),b=["children",""+ce]):a.hasOwnProperty(F)&&ce!=null&&F==="onScroll"&&Cr("scroll",m)}switch(c){case"input":ze(m),St(m,N,!0);break;case"textarea":ze(m),Qt(m);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(m.onclick=To)}m=b,i.updateQueue=m,m!==null&&(i.flags|=4)}else{F=b.nodeType===9?b:b.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Wt(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=F.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=F.createElement(c,{is:m.is}):(r=F.createElement(c),c==="select"&&(F=r,m.multiple?F.multiple=!0:m.size&&(F.size=m.size))):r=F.createElementNS(r,c),r[Ti]=i,r[Oo]=m,w0(r,i,!1,!1),i.stateNode=r;e:{switch(F=jt(c,m),c){case"dialog":Cr("cancel",r),Cr("close",r),b=m;break;case"iframe":case"object":case"embed":Cr("load",r),b=m;break;case"video":case"audio":for(b=0;b<Pa.length;b++)Cr(Pa[b],r);b=m;break;case"source":Cr("error",r),b=m;break;case"img":case"image":case"link":Cr("error",r),Cr("load",r),b=m;break;case"details":Cr("toggle",r),b=m;break;case"input":Z(r,m),b=st(r,m),Cr("invalid",r);break;case"option":b=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},b=be({},m,{value:void 0}),Cr("invalid",r);break;case"textarea":tt(r,m),b=ut(r,m),Cr("invalid",r);break;default:b=m}br(c,b),ce=b;for(N in ce)if(ce.hasOwnProperty(N)){var xe=ce[N];N==="style"?Ct(r,xe):N==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,xe!=null&&mt(r,xe)):N==="children"?typeof xe=="string"?(c!=="textarea"||xe!=="")&&Ft(r,xe):typeof xe=="number"&&Ft(r,""+xe):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(a.hasOwnProperty(N)?xe!=null&&N==="onScroll"&&Cr("scroll",r):xe!=null&&B(r,N,xe,F))}switch(c){case"input":ze(r),St(r,m,!1);break;case"textarea":ze(r),Qt(r);break;case"option":m.value!=null&&r.setAttribute("value",""+he(m.value));break;case"select":r.multiple=!!m.multiple,N=m.value,N!=null?rt(r,!!m.multiple,N,!1):m.defaultValue!=null&&rt(r,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(r.onclick=To)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return _s(i),null;case 6:if(r&&i.stateNode!=null)N0(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(t(166));if(c=ra(Ta.current),ra(En.current),en(i)){if(m=i.stateNode,c=i.memoizedProps,m[Ti]=i,(N=m.nodeValue!==c)&&(r=De,r!==null))switch(r.tag){case 3:Gl(m.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gl(m.nodeValue,c,(r.mode&1)!==0)}N&&(i.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[Ti]=i,i.stateNode=m}return _s(i),null;case 13:if(Nr(Rr),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Be&&Re!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Kt(),ht(),i.flags|=98560,N=!1;else if(N=en(i),m!==null&&m.dehydrated!==null){if(r===null){if(!N)throw Error(t(318));if(N=i.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[Ti]=i}else ht(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_s(i),N=!1}else Ue!==null&&(mh(Ue),Ue=null),N=!0;if(!N)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Rr.current&1)!==0?qn===0&&(qn=3):xh())),i.updateQueue!==null&&(i.flags|=4),_s(i),null);case 4:return Oi(),sh(r,i),r===null&&ao(i.stateNode.containerInfo),_s(i),null;case 10:return Wr(i.type._context),_s(i),null;case 17:return bs(i.type)&&Yl(),_s(i),null;case 19:if(Nr(Rr),N=i.memoizedState,N===null)return _s(i),null;if(m=(i.flags&128)!==0,F=N.rendering,F===null)if(m)eu(N,!1);else{if(qn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(F=fi(r),F!==null){for(i.flags|=128,eu(N,!1),m=F.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=c,c=i.child;c!==null;)N=c,r=m,N.flags&=14680066,F=N.alternate,F===null?(N.childLanes=0,N.lanes=r,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=F.childLanes,N.lanes=F.lanes,N.child=F.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=F.memoizedProps,N.memoizedState=F.memoizedState,N.updateQueue=F.updateQueue,N.type=F.type,r=F.dependencies,N.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return Sr(Rr,Rr.current&1|2),i.child}r=r.sibling}N.tail!==null&&wr()>oc&&(i.flags|=128,m=!0,eu(N,!1),i.lanes=4194304)}else{if(!m)if(r=fi(F),r!==null){if(i.flags|=128,m=!0,c=r.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),eu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!F.alternate&&!Be)return _s(i),null}else 2*wr()-N.renderingStartTime>oc&&c!==1073741824&&(i.flags|=128,m=!0,eu(N,!1),i.lanes=4194304);N.isBackwards?(F.sibling=i.child,i.child=F):(c=N.last,c!==null?c.sibling=F:i.child=F,N.last=F)}return N.tail!==null?(i=N.tail,N.rendering=i,N.tail=i.sibling,N.renderingStartTime=wr(),i.sibling=null,c=Rr.current,Sr(Rr,m?c&1|2:c&1),i):(_s(i),null);case 22:case 23:return vh(),m=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(gi&1073741824)!==0&&(_s(i),i.subtreeFlags&6&&(i.flags|=8192)):_s(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function j1(r,i){switch(Ee(i),i.tag){case 1:return bs(i.type)&&Yl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Oi(),Nr(ys),Nr(Bn),Xc(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Kc(i),null;case 13:if(Nr(Rr),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ht()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Nr(Rr),null;case 4:return Oi(),null;case 10:return Wr(i.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var qu=!1,Ns=!1,A1=typeof WeakSet=="function"?WeakSet:Set,pt=null;function ic(r,i){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){gn(r,i,m)}else c.current=null}function ih(r,i,c){try{c()}catch(m){gn(r,i,m)}}var k0=!1;function C1(r,i){if(fl=ba,r=hn(),ui(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var b=m.anchorOffset,N=m.focusNode;m=m.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var F=0,ce=-1,xe=-1,Oe=0,Ve=0,Ye=r,He=null;t:for(;;){for(var lt;Ye!==c||b!==0&&Ye.nodeType!==3||(ce=F+b),Ye!==N||m!==0&&Ye.nodeType!==3||(xe=F+m),Ye.nodeType===3&&(F+=Ye.nodeValue.length),(lt=Ye.firstChild)!==null;)He=Ye,Ye=lt;for(;;){if(Ye===r)break t;if(He===c&&++Oe===b&&(ce=F),He===N&&++Ve===m&&(xe=F),(lt=Ye.nextSibling)!==null)break;Ye=He,He=Ye.parentNode}Ye=lt}c=ce===-1||xe===-1?null:{start:ce,end:xe}}else c=null}c=c||{start:0,end:0}}else c=null;for(lo={focusedElem:r,selectionRange:c},ba=!1,pt=i;pt!==null;)if(i=pt,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,pt=r;else for(;pt!==null;){i=pt;try{var xt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var wt=xt.memoizedProps,wn=xt.memoizedState,Pe=i.stateNode,_e=Pe.getSnapshotBeforeUpdate(i.elementType===i.type?wt:ia(i.type,wt),wn);Pe.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Te=i.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ke){gn(i,i.return,Ke)}if(r=i.sibling,r!==null){r.return=i.return,pt=r;break}pt=i.return}return xt=k0,k0=!1,xt}function tu(r,i,c){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&r)===r){var N=b.destroy;b.destroy=void 0,N!==void 0&&ih(i,c,N)}b=b.next}while(b!==m)}}function zu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&r)===r){var m=c.create;c.destroy=m()}c=c.next}while(c!==i)}}function ah(r){var i=r.ref;if(i!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof i=="function"?i(r):i.current=r}}function S0(r){var i=r.alternate;i!==null&&(r.alternate=null,S0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Ti],delete i[Oo],delete i[xs],delete i[Wd],delete i[Hd])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function j0(r){return r.tag===5||r.tag===3||r.tag===4}function A0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||j0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function oh(r,i,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(r,i):c.insertBefore(r,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(r,c)):(i=c,i.appendChild(r)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=To));else if(m!==4&&(r=r.child,r!==null))for(oh(r,i,c),r=r.sibling;r!==null;)oh(r,i,c),r=r.sibling}function lh(r,i,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(lh(r,i,c),r=r.sibling;r!==null;)lh(r,i,c),r=r.sibling}var hs=null,aa=!1;function Uo(r,i,c){for(c=c.child;c!==null;)C0(r,i,c),c=c.sibling}function C0(r,i,c){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(Si,c)}catch{}switch(c.tag){case 5:Ns||ic(c,i);case 6:var m=hs,b=aa;hs=null,Uo(r,i,c),hs=m,aa=b,hs!==null&&(aa?(r=hs,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):hs.removeChild(c.stateNode));break;case 18:hs!==null&&(aa?(r=hs,c=c.stateNode,r.nodeType===8?Vc(r.parentNode,c):r.nodeType===1&&Vc(r,c),Ws(r)):Vc(hs,c.stateNode));break;case 4:m=hs,b=aa,hs=c.stateNode.containerInfo,aa=!0,Uo(r,i,c),hs=m,aa=b;break;case 0:case 11:case 14:case 15:if(!Ns&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var N=b,F=N.destroy;N=N.tag,F!==void 0&&((N&2)!==0||(N&4)!==0)&&ih(c,i,F),b=b.next}while(b!==m)}Uo(r,i,c);break;case 1:if(!Ns&&(ic(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(ce){gn(c,i,ce)}Uo(r,i,c);break;case 21:Uo(r,i,c);break;case 22:c.mode&1?(Ns=(m=Ns)||c.memoizedState!==null,Uo(r,i,c),Ns=m):Uo(r,i,c);break;default:Uo(r,i,c)}}function P0(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new A1),i.forEach(function(m){var b=F1.bind(null,r,m);c.has(m)||(c.add(m),m.then(b,b))})}}function oa(r,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var b=c[m];try{var N=r,F=i,ce=F;e:for(;ce!==null;){switch(ce.tag){case 5:hs=ce.stateNode,aa=!1;break e;case 3:hs=ce.stateNode.containerInfo,aa=!0;break e;case 4:hs=ce.stateNode.containerInfo,aa=!0;break e}ce=ce.return}if(hs===null)throw Error(t(160));C0(N,F,b),hs=null,aa=!1;var xe=b.alternate;xe!==null&&(xe.return=null),b.return=null}catch(Oe){gn(b,i,Oe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)E0(i,r),i=i.sibling}function E0(r,i){var c=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(oa(i,r),Ia(r),m&4){try{tu(3,r,r.return),zu(3,r)}catch(wt){gn(r,r.return,wt)}try{tu(5,r,r.return)}catch(wt){gn(r,r.return,wt)}}break;case 1:oa(i,r),Ia(r),m&512&&c!==null&&ic(c,c.return);break;case 5:if(oa(i,r),Ia(r),m&512&&c!==null&&ic(c,c.return),r.flags&32){var b=r.stateNode;try{Ft(b,"")}catch(wt){gn(r,r.return,wt)}}if(m&4&&(b=r.stateNode,b!=null)){var N=r.memoizedProps,F=c!==null?c.memoizedProps:N,ce=r.type,xe=r.updateQueue;if(r.updateQueue=null,xe!==null)try{ce==="input"&&N.type==="radio"&&N.name!=null&&Qe(b,N),jt(ce,F);var Oe=jt(ce,N);for(F=0;F<xe.length;F+=2){var Ve=xe[F],Ye=xe[F+1];Ve==="style"?Ct(b,Ye):Ve==="dangerouslySetInnerHTML"?mt(b,Ye):Ve==="children"?Ft(b,Ye):B(b,Ve,Ye,Oe)}switch(ce){case"input":It(b,N);break;case"textarea":ur(b,N);break;case"select":var He=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var lt=N.value;lt!=null?rt(b,!!N.multiple,lt,!1):He!==!!N.multiple&&(N.defaultValue!=null?rt(b,!!N.multiple,N.defaultValue,!0):rt(b,!!N.multiple,N.multiple?[]:"",!1))}b[Oo]=N}catch(wt){gn(r,r.return,wt)}}break;case 6:if(oa(i,r),Ia(r),m&4){if(r.stateNode===null)throw Error(t(162));b=r.stateNode,N=r.memoizedProps;try{b.nodeValue=N}catch(wt){gn(r,r.return,wt)}}break;case 3:if(oa(i,r),Ia(r),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Ws(i.containerInfo)}catch(wt){gn(r,r.return,wt)}break;case 4:oa(i,r),Ia(r);break;case 13:oa(i,r),Ia(r),b=r.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(dh=wr())),m&4&&P0(r);break;case 22:if(Ve=c!==null&&c.memoizedState!==null,r.mode&1?(Ns=(Oe=Ns)||Ve,oa(i,r),Ns=Oe):oa(i,r),Ia(r),m&8192){if(Oe=r.memoizedState!==null,(r.stateNode.isHidden=Oe)&&!Ve&&(r.mode&1)!==0)for(pt=r,Ve=r.child;Ve!==null;){for(Ye=pt=Ve;pt!==null;){switch(He=pt,lt=He.child,He.tag){case 0:case 11:case 14:case 15:tu(4,He,He.return);break;case 1:ic(He,He.return);var xt=He.stateNode;if(typeof xt.componentWillUnmount=="function"){m=He,c=He.return;try{i=m,xt.props=i.memoizedProps,xt.state=i.memoizedState,xt.componentWillUnmount()}catch(wt){gn(m,c,wt)}}break;case 5:ic(He,He.return);break;case 22:if(He.memoizedState!==null){O0(Ye);continue}}lt!==null?(lt.return=He,pt=lt):O0(Ye)}Ve=Ve.sibling}e:for(Ve=null,Ye=r;;){if(Ye.tag===5){if(Ve===null){Ve=Ye;try{b=Ye.stateNode,Oe?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(ce=Ye.stateNode,xe=Ye.memoizedProps.style,F=xe!=null&&xe.hasOwnProperty("display")?xe.display:null,ce.style.display=er("display",F))}catch(wt){gn(r,r.return,wt)}}}else if(Ye.tag===6){if(Ve===null)try{Ye.stateNode.nodeValue=Oe?"":Ye.memoizedProps}catch(wt){gn(r,r.return,wt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===r)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===r)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===r)break e;Ve===Ye&&(Ve=null),Ye=Ye.return}Ve===Ye&&(Ve=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:oa(i,r),Ia(r),m&4&&P0(r);break;case 21:break;default:oa(i,r),Ia(r)}}function Ia(r){var i=r.flags;if(i&2){try{e:{for(var c=r.return;c!==null;){if(j0(c)){var m=c;break e}c=c.return}throw Error(t(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(Ft(b,""),m.flags&=-33);var N=A0(r);lh(r,N,b);break;case 3:case 4:var F=m.stateNode.containerInfo,ce=A0(r);oh(r,ce,F);break;default:throw Error(t(161))}}catch(xe){gn(r,r.return,xe)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function P1(r,i,c){pt=r,L0(r)}function L0(r,i,c){for(var m=(r.mode&1)!==0;pt!==null;){var b=pt,N=b.child;if(b.tag===22&&m){var F=b.memoizedState!==null||qu;if(!F){var ce=b.alternate,xe=ce!==null&&ce.memoizedState!==null||Ns;ce=qu;var Oe=Ns;if(qu=F,(Ns=xe)&&!Oe)for(pt=b;pt!==null;)F=pt,xe=F.child,F.tag===22&&F.memoizedState!==null?I0(b):xe!==null?(xe.return=F,pt=xe):I0(b);for(;N!==null;)pt=N,L0(N),N=N.sibling;pt=b,qu=ce,Ns=Oe}T0(r)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,pt=N):T0(r)}}function T0(r){for(;pt!==null;){var i=pt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ns||zu(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!Ns)if(c===null)m.componentDidMount();else{var b=i.elementType===i.type?c.memoizedProps:ia(i.type,c.memoizedProps);m.componentDidUpdate(b,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var N=i.updateQueue;N!==null&&Ys(i,N,m);break;case 3:var F=i.updateQueue;if(F!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}Ys(i,F,c)}break;case 5:var ce=i.stateNode;if(c===null&&i.flags&4){c=ce;var xe=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":xe.autoFocus&&c.focus();break;case"img":xe.src&&(c.src=xe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Oe=i.alternate;if(Oe!==null){var Ve=Oe.memoizedState;if(Ve!==null){var Ye=Ve.dehydrated;Ye!==null&&Ws(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ns||i.flags&512&&ah(i)}catch(He){gn(i,i.return,He)}}if(i===r){pt=null;break}if(c=i.sibling,c!==null){c.return=i.return,pt=c;break}pt=i.return}}function O0(r){for(;pt!==null;){var i=pt;if(i===r){pt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,pt=c;break}pt=i.return}}function I0(r){for(;pt!==null;){var i=pt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{zu(4,i)}catch(xe){gn(i,c,xe)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var b=i.return;try{m.componentDidMount()}catch(xe){gn(i,b,xe)}}var N=i.return;try{ah(i)}catch(xe){gn(i,N,xe)}break;case 5:var F=i.return;try{ah(i)}catch(xe){gn(i,F,xe)}}}catch(xe){gn(i,i.return,xe)}if(i===r){pt=null;break}var ce=i.sibling;if(ce!==null){ce.return=i.return,pt=ce;break}pt=i.return}}var E1=Math.ceil,$u=$.ReactCurrentDispatcher,ch=$.ReactCurrentOwner,Ri=$.ReactCurrentBatchConfig,vr=0,es=null,Ln=null,fs=0,gi=0,ac=di(0),qn=0,ru=null,yl=0,Wu=0,uh=0,nu=null,Js=null,dh=0,oc=1/0,mo=null,Hu=!1,hh=null,qo=null,Vu=!1,zo=null,Gu=0,su=0,fh=null,Yu=-1,Ku=0;function Ms(){return(vr&6)!==0?wr():Yu!==-1?Yu:Yu=wr()}function $o(r){return(r.mode&1)===0?1:(vr&2)!==0&&fs!==0?fs&-fs:an.transition!==null?(Ku===0&&(Ku=za()),Ku):(r=cr,r!==0||(r=window.event,r=r===void 0?16:ge(r.type)),r)}function la(r,i,c,m){if(50<su)throw su=0,fh=null,Error(t(185));Us(r,c,m),((vr&2)===0||r!==es)&&(r===es&&((vr&2)===0&&(Wu|=c),qn===4&&Wo(r,fs)),Xs(r,m),c===1&&vr===0&&(i.mode&1)===0&&(oc=wr()+500,ml&&k()))}function Xs(r,i){var c=r.callbackNode;Xr(r,i);var m=ii(r,r===es?fs:0);if(m===0)c!==null&&Ni(c),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(c!=null&&Ni(c),i===1)r.tag===0?w(R0.bind(null,r)):g(R0.bind(null,r)),zd(function(){(vr&6)===0&&k()}),c=null;else{switch($i(m)){case 1:c=qi;break;case 4:c=Hn;break;case 16:c=Ps;break;case 536870912:c=ma;break;default:c=Ps}c=W0(c,D0.bind(null,r))}r.callbackPriority=i,r.callbackNode=c}}function D0(r,i){if(Yu=-1,Ku=0,(vr&6)!==0)throw Error(t(327));var c=r.callbackNode;if(lc()&&r.callbackNode!==c)return null;var m=ii(r,r===es?fs:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||i)i=Ju(r,m);else{i=m;var b=vr;vr|=2;var N=M0();(es!==r||fs!==i)&&(mo=null,oc=wr()+500,wl(r,i));do try{O1();break}catch(ce){F0(r,ce)}while(!0);mr(),$u.current=N,vr=b,Ln!==null?i=0:(es=null,fs=0,i=qn)}if(i!==0){if(i===2&&(b=jn(r),b!==0&&(m=b,i=ph(r,b))),i===1)throw c=ru,wl(r,0),Wo(r,m),Xs(r,wr()),c;if(i===6)Wo(r,m);else{if(b=r.current.alternate,(m&30)===0&&!L1(b)&&(i=Ju(r,m),i===2&&(N=jn(r),N!==0&&(m=N,i=ph(r,N))),i===1))throw c=ru,wl(r,0),Wo(r,m),Xs(r,wr()),c;switch(r.finishedWork=b,r.finishedLanes=m,i){case 0:case 1:throw Error(t(345));case 2:_l(r,Js,mo);break;case 3:if(Wo(r,m),(m&130023424)===m&&(i=dh+500-wr(),10<i)){if(ii(r,0)!==0)break;if(b=r.suspendedLanes,(b&m)!==m){Ms(),r.pingedLanes|=r.suspendedLanes&b;break}r.timeoutHandle=Hc(_l.bind(null,r,Js,mo),i);break}_l(r,Js,mo);break;case 4:if(Wo(r,m),(m&4194240)===m)break;for(i=r.eventTimes,b=-1;0<m;){var F=31-Yr(m);N=1<<F,F=i[F],F>b&&(b=F),m&=~N}if(m=b,m=wr()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*E1(m/1960))-m,10<m){r.timeoutHandle=Hc(_l.bind(null,r,Js,mo),m);break}_l(r,Js,mo);break;case 5:_l(r,Js,mo);break;default:throw Error(t(329))}}}return Xs(r,wr()),r.callbackNode===c?D0.bind(null,r):null}function ph(r,i){var c=nu;return r.current.memoizedState.isDehydrated&&(wl(r,i).flags|=256),r=Ju(r,i),r!==2&&(i=Js,Js=c,i!==null&&mh(i)),r}function mh(r){Js===null?Js=r:Js.push.apply(Js,r)}function L1(r){for(var i=r;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var b=c[m],N=b.getSnapshot;b=b.value;try{if(!Qr(N(),b))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wo(r,i){for(i&=~uh,i&=~Wu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var c=31-Yr(i),m=1<<c;r[c]=-1,i&=~m}}function R0(r){if((vr&6)!==0)throw Error(t(327));lc();var i=ii(r,0);if((i&1)===0)return Xs(r,wr()),null;var c=Ju(r,i);if(r.tag!==0&&c===2){var m=jn(r);m!==0&&(i=m,c=ph(r,m))}if(c===1)throw c=ru,wl(r,0),Wo(r,i),Xs(r,wr()),c;if(c===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,_l(r,Js,mo),Xs(r,wr()),null}function gh(r,i){var c=vr;vr|=1;try{return r(i)}finally{vr=c,vr===0&&(oc=wr()+500,ml&&k())}}function bl(r){zo!==null&&zo.tag===0&&(vr&6)===0&&lc();var i=vr;vr|=1;var c=Ri.transition,m=cr;try{if(Ri.transition=null,cr=1,r)return r()}finally{cr=m,Ri.transition=c,vr=i,(vr&6)===0&&k()}}function vh(){gi=ac.current,Nr(ac)}function wl(r,i){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,Cu(c)),Ln!==null)for(c=Ln.return;c!==null;){var m=c;switch(Ee(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Yl();break;case 3:Oi(),Nr(ys),Nr(Bn),Xc();break;case 5:Kc(m);break;case 4:Oi();break;case 13:Nr(Rr);break;case 19:Nr(Rr);break;case 10:Wr(m.type._context);break;case 22:case 23:vh()}c=c.return}if(es=r,Ln=r=Ho(r.current,null),fs=gi=i,qn=0,ru=null,uh=Wu=yl=0,Js=nu=null,Pr!==null){for(i=0;i<Pr.length;i++)if(c=Pr[i],m=c.interleaved,m!==null){c.interleaved=null;var b=m.next,N=c.pending;if(N!==null){var F=N.next;N.next=b,m.next=F}c.pending=m}Pr=null}return r}function F0(r,i){do{var c=Ln;try{if(mr(),Kl.current=Fu,Fo){for(var m=Hr.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}Fo=!1}if(Ii=0,un=mn=Hr=null,na=!1,Mo=0,ch.current=null,c===null||c.return===null){qn=1,ru=i,Ln=null;break}e:{var N=r,F=c.return,ce=c,xe=i;if(i=fs,ce.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var Oe=xe,Ve=ce,Ye=Ve.tag;if((Ve.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var He=Ve.alternate;He?(Ve.updateQueue=He.updateQueue,Ve.memoizedState=He.memoizedState,Ve.lanes=He.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var lt=l0(F);if(lt!==null){lt.flags&=-257,c0(lt,F,ce,N,i),lt.mode&1&&o0(N,Oe,i),i=lt,xe=Oe;var xt=i.updateQueue;if(xt===null){var wt=new Set;wt.add(xe),i.updateQueue=wt}else xt.add(xe);break e}else{if((i&1)===0){o0(N,Oe,i),xh();break e}xe=Error(t(426))}}else if(Be&&ce.mode&1){var wn=l0(F);if(wn!==null){(wn.flags&65536)===0&&(wn.flags|=256),c0(wn,F,ce,N,i),Ze(sc(xe,ce));break e}}N=xe=sc(xe,ce),qn!==4&&(qn=2),nu===null?nu=[N]:nu.push(N),N=F;do{switch(N.tag){case 3:N.flags|=65536,i&=-i,N.lanes|=i;var Pe=i0(N,xe,i);Lr(N,Pe);break e;case 1:ce=xe;var _e=N.type,Te=N.stateNode;if((N.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(qo===null||!qo.has(Te)))){N.flags|=65536,i&=-i,N.lanes|=i;var Ke=a0(N,ce,i);Lr(N,Ke);break e}}N=N.return}while(N!==null)}U0(c)}catch(At){i=At,Ln===c&&c!==null&&(Ln=c=c.return);continue}break}while(!0)}function M0(){var r=$u.current;return $u.current=Fu,r===null?Fu:r}function xh(){(qn===0||qn===3||qn===2)&&(qn=4),es===null||(yl&268435455)===0&&(Wu&268435455)===0||Wo(es,fs)}function Ju(r,i){var c=vr;vr|=2;var m=M0();(es!==r||fs!==i)&&(mo=null,wl(r,i));do try{T1();break}catch(b){F0(r,b)}while(!0);if(mr(),vr=c,$u.current=m,Ln!==null)throw Error(t(261));return es=null,fs=0,qn}function T1(){for(;Ln!==null;)B0(Ln)}function O1(){for(;Ln!==null&&!ni();)B0(Ln)}function B0(r){var i=$0(r.alternate,r,gi);r.memoizedProps=r.pendingProps,i===null?U0(r):Ln=i,ch.current=null}function U0(r){var i=r;do{var c=i.alternate;if(r=i.return,(i.flags&32768)===0){if(c=S1(c,i,gi),c!==null){Ln=c;return}}else{if(c=j1(c,i),c!==null){c.flags&=32767,Ln=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{qn=6,Ln=null;return}}if(i=i.sibling,i!==null){Ln=i;return}Ln=i=r}while(i!==null);qn===0&&(qn=5)}function _l(r,i,c){var m=cr,b=Ri.transition;try{Ri.transition=null,cr=1,I1(r,i,c,m)}finally{Ri.transition=b,cr=m}return null}function I1(r,i,c,m){do lc();while(zo!==null);if((vr&6)!==0)throw Error(t(327));c=r.finishedWork;var b=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var N=c.lanes|c.childLanes;if(qs(r,N),r===es&&(Ln=es=null,fs=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Vu||(Vu=!0,W0(Ps,function(){return lc(),null})),N=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||N){N=Ri.transition,Ri.transition=null;var F=cr;cr=1;var ce=vr;vr|=4,ch.current=null,C1(r,c),E0(c,r),il(lo),ba=!!fl,lo=fl=null,r.current=c,P1(c),ki(),vr=ce,cr=F,Ri.transition=N}else r.current=c;if(Vu&&(Vu=!1,zo=r,Gu=b),N=r.pendingLanes,N===0&&(qo=null),qa(c.stateNode),Xs(r,wr()),i!==null)for(m=r.onRecoverableError,c=0;c<i.length;c++)b=i[c],m(b.value,{componentStack:b.stack,digest:b.digest});if(Hu)throw Hu=!1,r=hh,hh=null,r;return(Gu&1)!==0&&r.tag!==0&&lc(),N=r.pendingLanes,(N&1)!==0?r===fh?su++:(su=0,fh=r):su=0,k(),null}function lc(){if(zo!==null){var r=$i(Gu),i=Ri.transition,c=cr;try{if(Ri.transition=null,cr=16>r?16:r,zo===null)var m=!1;else{if(r=zo,zo=null,Gu=0,(vr&6)!==0)throw Error(t(331));var b=vr;for(vr|=4,pt=r.current;pt!==null;){var N=pt,F=N.child;if((pt.flags&16)!==0){var ce=N.deletions;if(ce!==null){for(var xe=0;xe<ce.length;xe++){var Oe=ce[xe];for(pt=Oe;pt!==null;){var Ve=pt;switch(Ve.tag){case 0:case 11:case 15:tu(8,Ve,N)}var Ye=Ve.child;if(Ye!==null)Ye.return=Ve,pt=Ye;else for(;pt!==null;){Ve=pt;var He=Ve.sibling,lt=Ve.return;if(S0(Ve),Ve===Oe){pt=null;break}if(He!==null){He.return=lt,pt=He;break}pt=lt}}}var xt=N.alternate;if(xt!==null){var wt=xt.child;if(wt!==null){xt.child=null;do{var wn=wt.sibling;wt.sibling=null,wt=wn}while(wt!==null)}}pt=N}}if((N.subtreeFlags&2064)!==0&&F!==null)F.return=N,pt=F;else e:for(;pt!==null;){if(N=pt,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:tu(9,N,N.return)}var Pe=N.sibling;if(Pe!==null){Pe.return=N.return,pt=Pe;break e}pt=N.return}}var _e=r.current;for(pt=_e;pt!==null;){F=pt;var Te=F.child;if((F.subtreeFlags&2064)!==0&&Te!==null)Te.return=F,pt=Te;else e:for(F=_e;pt!==null;){if(ce=pt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:zu(9,ce)}}catch(At){gn(ce,ce.return,At)}if(ce===F){pt=null;break e}var Ke=ce.sibling;if(Ke!==null){Ke.return=ce.return,pt=Ke;break e}pt=ce.return}}if(vr=b,k(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(Si,r)}catch{}m=!0}return m}finally{cr=c,Ri.transition=i}}return!1}function q0(r,i,c){i=sc(c,i),i=i0(r,i,1),r=ln(r,i,1),i=Ms(),r!==null&&(Us(r,1,i),Xs(r,i))}function gn(r,i,c){if(r.tag===3)q0(r,r,c);else for(;i!==null;){if(i.tag===3){q0(i,r,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(qo===null||!qo.has(m))){r=sc(c,r),r=a0(i,r,1),i=ln(i,r,1),r=Ms(),i!==null&&(Us(i,1,r),Xs(i,r));break}}i=i.return}}function D1(r,i,c){var m=r.pingCache;m!==null&&m.delete(i),i=Ms(),r.pingedLanes|=r.suspendedLanes&c,es===r&&(fs&c)===c&&(qn===4||qn===3&&(fs&130023424)===fs&&500>wr()-dh?wl(r,0):uh|=c),Xs(r,i)}function z0(r,i){i===0&&((r.mode&1)===0?i=1:(i=Vn,Vn<<=1,(Vn&130023424)===0&&(Vn=4194304)));var c=Ms();r=Er(r,i),r!==null&&(Us(r,i,c),Xs(r,c))}function R1(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),z0(r,c)}function F1(r,i){var c=0;switch(r.tag){case 13:var m=r.stateNode,b=r.memoizedState;b!==null&&(c=b.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(i),z0(r,c)}var $0;$0=function(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps||ys.current)Ks=!0;else{if((r.lanes&c)===0&&(i.flags&128)===0)return Ks=!1,k1(r,i,c);Ks=(r.flags&131072)!==0}else Ks=!1,Be&&(i.flags&1048576)!==0&&je(i,G,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;Uu(r,i),r=i.pendingProps;var b=Do(i,Bn.current);tn(i,c),b=gl(null,i,m,r,b,c);var N=Di();return i.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,bs(m)?(N=!0,ho(i)):N=!1,i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Un(i),b.updater=Mu,i.stateNode=b,b._reactInternals=i,Kd(i,m,r,c),i=Zd(null,i,m,!0,N,c)):(i.tag=0,Be&&N&&Fe(i),Fs(null,i,b,c),i=i.child),i;case 16:m=i.elementType;e:{switch(Uu(r,i),r=i.pendingProps,b=m._init,m=b(m._payload),i.type=m,b=i.tag=B1(m),r=ia(m,r),b){case 0:i=Qd(null,i,m,r,c);break e;case 1:i=m0(null,i,m,r,c);break e;case 11:i=u0(null,i,m,r,c);break e;case 14:i=d0(null,i,m,ia(m.type,r),c);break e}throw Error(t(306,m,""))}return i;case 0:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ia(m,b),Qd(r,i,m,b,c);case 1:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ia(m,b),m0(r,i,m,b,c);case 3:e:{if(g0(i),r===null)throw Error(t(387));m=i.pendingProps,N=i.memoizedState,b=N.element,ws(r,i),Zn(i,m,null,c);var F=i.memoizedState;if(m=F.element,N.isDehydrated)if(N={element:m,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},i.updateQueue.baseState=N,i.memoizedState=N,i.flags&256){b=sc(Error(t(423)),i),i=v0(r,i,m,c,b);break e}else if(m!==b){b=sc(Error(t(424)),i),i=v0(r,i,m,c,b);break e}else for(Re=ds(i.stateNode.containerInfo.firstChild),De=i,Be=!0,Ue=null,c=Kr(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ht(),m===b){i=po(r,i,c);break e}Fs(r,i,m,c)}i=i.child}return i;case 5:return Tu(i),r===null&&gt(i),m=i.type,b=i.pendingProps,N=r!==null?r.memoizedProps:null,F=b.children,Wc(m,b)?F=null:N!==null&&Wc(m,N)&&(i.flags|=32),p0(r,i),Fs(r,i,F,c),i.child;case 6:return r===null&&gt(i),null;case 13:return x0(r,i,c);case 4:return Ro(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=fn(i,null,m,c):Fs(r,i,m,c),i.child;case 11:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ia(m,b),u0(r,i,m,b,c);case 7:return Fs(r,i,i.pendingProps,c),i.child;case 8:return Fs(r,i,i.pendingProps.children,c),i.child;case 12:return Fs(r,i,i.pendingProps.children,c),i.child;case 10:e:{if(m=i.type._context,b=i.pendingProps,N=i.memoizedProps,F=b.value,Sr(yn,m._currentValue),m._currentValue=F,N!==null)if(Qr(N.value,F)){if(N.children===b.children&&!ys.current){i=po(r,i,c);break e}}else for(N=i.child,N!==null&&(N.return=i);N!==null;){var ce=N.dependencies;if(ce!==null){F=N.child;for(var xe=ce.firstContext;xe!==null;){if(xe.context===m){if(N.tag===1){xe=on(-1,c&-c),xe.tag=2;var Oe=N.updateQueue;if(Oe!==null){Oe=Oe.shared;var Ve=Oe.pending;Ve===null?xe.next=xe:(xe.next=Ve.next,Ve.next=xe),Oe.pending=xe}}N.lanes|=c,xe=N.alternate,xe!==null&&(xe.lanes|=c),gr(N.return,c,i),ce.lanes|=c;break}xe=xe.next}}else if(N.tag===10)F=N.type===i.type?null:N.child;else if(N.tag===18){if(F=N.return,F===null)throw Error(t(341));F.lanes|=c,ce=F.alternate,ce!==null&&(ce.lanes|=c),gr(F,c,i),F=N.sibling}else F=N.child;if(F!==null)F.return=N;else for(F=N;F!==null;){if(F===i){F=null;break}if(N=F.sibling,N!==null){N.return=F.return,F=N;break}F=F.return}N=F}Fs(r,i,b.children,c),i=i.child}return i;case 9:return b=i.type,m=i.pendingProps.children,tn(i,c),b=rn(b),m=m(b),i.flags|=1,Fs(r,i,m,c),i.child;case 14:return m=i.type,b=ia(m,i.pendingProps),b=ia(m.type,b),d0(r,i,m,b,c);case 15:return h0(r,i,i.type,i.pendingProps,c);case 17:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ia(m,b),Uu(r,i),i.tag=1,bs(m)?(r=!0,ho(i)):r=!1,tn(i,c),n0(i,m,b),Kd(i,m,b,c),Zd(null,i,m,!0,r,c);case 19:return b0(r,i,c);case 22:return f0(r,i,c)}throw Error(t(156,i.tag))};function W0(r,i){return ps(r,i)}function M1(r,i,c,m){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(r,i,c,m){return new M1(r,i,c,m)}function yh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function B1(r){if(typeof r=="function")return yh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===R)return 11;if(r===ie)return 14}return 2}function Ho(r,i){var c=r.alternate;return c===null?(c=Fi(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Xu(r,i,c,m,b,N){var F=2;if(m=r,typeof r=="function")yh(r)&&(F=1);else if(typeof r=="string")F=5;else e:switch(r){case H:return Nl(c.children,b,N,i);case Y:F=8,b|=8;break;case D:return r=Fi(12,c,i,b|2),r.elementType=D,r.lanes=N,r;case re:return r=Fi(13,c,i,b),r.elementType=re,r.lanes=N,r;case W:return r=Fi(19,c,i,b),r.elementType=W,r.lanes=N,r;case ee:return Qu(c,b,N,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case se:F=10;break e;case I:F=9;break e;case R:F=11;break e;case ie:F=14;break e;case fe:F=16,m=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Fi(F,c,i,b),i.elementType=r,i.type=m,i.lanes=N,i}function Nl(r,i,c,m){return r=Fi(7,r,m,i),r.lanes=c,r}function Qu(r,i,c,m){return r=Fi(22,r,m,i),r.elementType=ee,r.lanes=c,r.stateNode={isHidden:!1},r}function bh(r,i,c){return r=Fi(6,r,null,i),r.lanes=c,r}function wh(r,i,c){return i=Fi(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function U1(r,i,c,m,b){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zi(0),this.expirationTimes=zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function _h(r,i,c,m,b,N,F,ce,xe){return r=new U1(r,i,c,ce,xe),i===1?(i=1,N===!0&&(i|=8)):i=0,N=Fi(3,null,null,i),r.current=N,N.stateNode=r,N.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Un(N),r}function q1(r,i,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:m==null?null:""+m,children:r,containerInfo:i,implementation:c}}function H0(r){if(!r)return La;r=r._reactInternals;e:{if(dn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(bs(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var c=r.type;if(bs(c))return Yc(r,c,i)}return i}function V0(r,i,c,m,b,N,F,ce,xe){return r=_h(c,m,!0,r,b,N,F,ce,xe),r.context=H0(null),c=r.current,m=Ms(),b=$o(c),N=on(m,b),N.callback=i??null,ln(c,N,b),r.current.lanes=b,Us(r,b,m),Xs(r,m),r}function Zu(r,i,c,m){var b=i.current,N=Ms(),F=$o(b);return c=H0(c),i.context===null?i.context=c:i.pendingContext=c,i=on(N,F),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=ln(b,i,F),r!==null&&(la(r,b,F,N),Qn(r,b,F)),F}function ed(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function G0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function Nh(r,i){G0(r,i),(r=r.alternate)&&G0(r,i)}function z1(){return null}var Y0=typeof reportError=="function"?reportError:function(r){console.error(r)};function kh(r){this._internalRoot=r}td.prototype.render=kh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Zu(r,i,null,null)},td.prototype.unmount=kh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;bl(function(){Zu(null,r,null,null)}),i[Jn]=null}};function td(r){this._internalRoot=r}td.prototype.unstable_scheduleHydration=function(r){if(r){var i=wo();r={blockedOn:null,target:r,priority:i};for(var c=0;c<$s.length&&i!==0&&i<$s[c].priority;c++);$s.splice(c,0,r),c===0&&_o(r)}};function Sh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function rd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function K0(){}function $1(r,i,c,m,b){if(b){if(typeof m=="function"){var N=m;m=function(){var Oe=ed(F);N.call(Oe)}}var F=V0(i,m,r,0,null,!1,!1,"",K0);return r._reactRootContainer=F,r[Jn]=F.current,ao(r.nodeType===8?r.parentNode:r),bl(),F}for(;b=r.lastChild;)r.removeChild(b);if(typeof m=="function"){var ce=m;m=function(){var Oe=ed(xe);ce.call(Oe)}}var xe=_h(r,0,!1,null,null,!1,!1,"",K0);return r._reactRootContainer=xe,r[Jn]=xe.current,ao(r.nodeType===8?r.parentNode:r),bl(function(){Zu(i,xe,c,m)}),xe}function nd(r,i,c,m,b){var N=c._reactRootContainer;if(N){var F=N;if(typeof b=="function"){var ce=b;b=function(){var xe=ed(F);ce.call(xe)}}Zu(i,F,r,b)}else F=$1(c,i,r,b,m);return ed(F)}ji=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var c=Es(i.pendingLanes);c!==0&&(va(i,c|1),Xs(i,wr()),(vr&6)===0&&(oc=wr()+500,k()))}break;case 13:bl(function(){var m=Er(r,1);if(m!==null){var b=Ms();la(m,r,1,b)}}),Nh(r,1)}},$a=function(r){if(r.tag===13){var i=Er(r,134217728);if(i!==null){var c=Ms();la(i,r,134217728,c)}Nh(r,134217728)}},bo=function(r){if(r.tag===13){var i=$o(r),c=Er(r,i);if(c!==null){var m=Ms();la(c,r,i,m)}Nh(r,i)}},wo=function(){return cr},Wi=function(r,i){var c=cr;try{return cr=r,i()}finally{cr=c}},qt=function(r,i,c){switch(i){case"input":if(It(r,c),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==r&&m.form===r.form){var b=pl(m);if(!b)throw Error(t(90));Ie(m),It(m,b)}}}break;case"textarea":ur(r,c);break;case"select":i=c.value,i!=null&&rt(r,!!c.multiple,i,!1)}},Ur=gh,$n=bl;var W1={usingClientEntryPoint:!1,Events:[Io,co,pl,lr,ti,gh]},iu={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H1={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Wn(r),r===null?null:r.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||z1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{Si=sd.inject(H1),os=sd}catch{}}return Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W1,Qs.createPortal=function(r,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sh(i))throw Error(t(200));return q1(r,i,null,c)},Qs.createRoot=function(r,i){if(!Sh(r))throw Error(t(299));var c=!1,m="",b=Y0;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=_h(r,1,!1,null,null,c,!1,m,b),r[Jn]=i.current,ao(r.nodeType===8?r.parentNode:r),new kh(i)},Qs.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Wn(i),r=r===null?null:r.stateNode,r},Qs.flushSync=function(r){return bl(r)},Qs.hydrate=function(r,i,c){if(!rd(i))throw Error(t(200));return nd(null,r,i,!0,c)},Qs.hydrateRoot=function(r,i,c){if(!Sh(r))throw Error(t(405));var m=c!=null&&c.hydratedSources||null,b=!1,N="",F=Y0;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onRecoverableError!==void 0&&(F=c.onRecoverableError)),i=V0(i,null,r,1,c??null,b,!1,N,F),r[Jn]=i.current,ao(r),m)for(r=0;r<m.length;r++)c=m[r],b=c._getVersion,b=b(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,b]:i.mutableSourceEagerHydrationData.push(c,b);return new td(i)},Qs.render=function(r,i,c){if(!rd(i))throw Error(t(200));return nd(null,r,i,!1,c)},Qs.unmountComponentAtNode=function(r){if(!rd(r))throw Error(t(40));return r._reactRootContainer?(bl(function(){nd(null,null,r,!1,function(){r._reactRootContainer=null,r[Jn]=null})}),!0):!1},Qs.unstable_batchedUpdates=gh,Qs.unstable_renderSubtreeIntoContainer=function(r,i,c,m){if(!rd(c))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return nd(r,i,c,!1,m)},Qs.version="18.3.1-next-f1338f8080-20240426",Qs}var np;function e2(){if(np)return Ch.exports;np=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ch.exports=Z1(),Ch.exports}var sp;function t2(){if(sp)return id;sp=1;var n=e2();return id.createRoot=n.createRoot,id.hydrateRoot=n.hydrateRoot,id}var r2=t2();const n2=wu(r2),s2="modulepreload",i2=function(n){return"/"+n},ip={},el=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");a=f(t.map(p=>{if(p=i2(p),p in ip)return;ip[p]=!0;const v=p.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":s2,v||(S.as="script"),S.crossOrigin="",S.href=p,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((y,E)=>{S.addEventListener("load",y),S.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},a2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>el(async()=>{const{default:s}=await Promise.resolve().then(()=>Ic);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Mf extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ap extends Mf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class op extends Mf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lp extends Mf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var df;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(df||(df={}));var o2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};class l2{constructor(e,{headers:t={},customFetch:s,region:a=df.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=a2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return o2(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:o,method:u,body:d,signal:f}=s;let p={},{region:v}=s;v||(v=this.region);const _=new URL(`${this.url}/${t}`);v&&v!=="any"&&(p["x-region"]=v,_.searchParams.set("forceFunctionRegion",v));let S;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",S=d):typeof d=="string"?(p["Content-Type"]="text/plain",S=d):typeof FormData<"u"&&d instanceof FormData?S=d:(p["Content-Type"]="application/json",S=JSON.stringify(d)));const y=yield this.fetch(_.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:S,signal:f}).catch(A=>{throw A.name==="AbortError"?A:new ap(A)}),E=y.headers.get("x-relay-error");if(E&&E==="true")throw new op(y);if(!y.ok)throw new lp(y);let C=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),L;return C==="application/json"?L=yield y.json():C==="application/octet-stream"?L=yield y.blob():C==="text/event-stream"?L=y:C==="multipart/form-data"?L=yield y.formData():L=yield y.text(),{data:L,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ap(o)}:{data:null,error:o,response:o instanceof lp||o instanceof op?o.context:void 0}}})}}var rs={},cc={},uc={},dc={},hc={},fc={},c2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oc=c2();const u2=Oc.fetch,eg=Oc.fetch.bind(Oc),tg=Oc.Headers,d2=Oc.Request,h2=Oc.Response,Ic=Object.freeze(Object.defineProperty({__proto__:null,Headers:tg,Request:d2,Response:h2,default:eg,fetch:u2},Symbol.toStringTag,{value:"Module"})),f2=G1(Ic);var ad={},cp;function rg(){if(cp)return ad;cp=1,Object.defineProperty(ad,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return ad.default=n,ad}var up;function ng(){if(up)return fc;up=1;var n=fc&&fc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(fc,"__esModule",{value:!0});const e=n(f2),t=n(rg());class s{constructor(o){var u,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(u=o.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=new Headers(this.headers),this.headers.set(o,u),this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,_,S,y;let E=null,C=null,L=null,A=p.status,J=p.statusText;if(p.ok){if(this.method!=="HEAD"){const de=await p.text();de===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?C=de:C=JSON.parse(de))}const $=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),oe=(S=p.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");$&&oe&&oe.length>1&&(L=parseInt(oe[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,L=null,A=406,J="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const $=await p.text();try{E=JSON.parse($),Array.isArray(E)&&p.status===404&&(C=[],E=null,A=200,J="OK")}catch{p.status===404&&$===""?(A=204,J="No Content"):E={message:$}}if(E&&this.isMaybeSingle&&(!((y=E?.details)===null||y===void 0)&&y.includes("0 rows"))&&(E=null,A=200,J="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:C,count:L,status:A,statusText:J}});return this.shouldThrowOnError||(f=f.catch(p=>{var v,_,S;return{error:{message:`${(v=p?.name)!==null&&v!==void 0?v:"FetchError"}: ${p?.message}`,details:`${(_=p?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(S=p?.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,u)}returns(){return this}overrideTypes(){return this}}return fc.default=s,fc}var dp;function sg(){if(dp)return hc;dp=1;var n=hc&&hc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hc,"__esModule",{value:!0});const e=n(ng());class t extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:d,referencedTable:f=d}={}){const p=f?`${f}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:d=u}={}){const f=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(p,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:d=!1,wal:f=!1,format:p="text"}={}){var v;const _=[a?"analyze":null,o?"verbose":null,u?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return hc.default=t,hc}var hp;function Bf(){if(hp)return dc;hp=1;var n=dc&&dc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dc,"__esModule",{value:!0});const e=n(sg());class t extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${f}fts${p}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return dc.default=t,dc}var fp;function ig(){if(fp)return uc;fp=1;var n=uc&&uc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(uc,"__esModule",{value:!0});const e=n(Bf());class t{constructor(a,{headers:o={},schema:u,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=u,this.fetch=d}select(a,o){const{head:u=!1,count:d}=o??{},f=u?"HEAD":"GET";let p=!1;const v=(a??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:u=!0}={}){var d;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(p.length>0){const v=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:d,defaultToNull:f=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const _=a.reduce((S,y)=>S.concat(Object.keys(y)),[]);if(_.length>0){const S=[...new Set(_)].map(y=>`"${y}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:o}={}){var u;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var o;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return uc.default=t,uc}var pp;function p2(){if(pp)return cc;pp=1;var n=cc&&cc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(cc,"__esModule",{value:!0});const e=n(ig()),t=n(Bf());class s{constructor(o,{headers:u={},schema:d,fetch:f}={}){this.url=o,this.headers=new Headers(u),this.schemaName=d,this.fetch=f}from(o){const u=new URL(`${this.url}/${o}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,u={},{head:d=!1,get:f=!1,count:p}={}){var v;let _;const S=new URL(`${this.url}/rpc/${o}`);let y;d||f?(_=d?"HEAD":"GET",Object.entries(u).filter(([C,L])=>L!==void 0).map(([C,L])=>[C,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([C,L])=>{S.searchParams.append(C,L)})):(_="POST",y=u);const E=new Headers(this.headers);return p&&E.set("Prefer",`count=${p}`),new t.default({method:_,url:S,headers:E,schema:this.schemaName,body:y,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return cc.default=s,cc}var mp;function m2(){if(mp)return rs;mp=1;var n=rs&&rs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(rs,"__esModule",{value:!0}),rs.PostgrestError=rs.PostgrestBuilder=rs.PostgrestTransformBuilder=rs.PostgrestFilterBuilder=rs.PostgrestQueryBuilder=rs.PostgrestClient=void 0;const e=n(p2());rs.PostgrestClient=e.default;const t=n(ig());rs.PostgrestQueryBuilder=t.default;const s=n(Bf());rs.PostgrestFilterBuilder=s.default;const a=n(sg());rs.PostgrestTransformBuilder=a.default;const o=n(ng());rs.PostgrestBuilder=o.default;const u=n(rg());return rs.PostgrestError=u.default,rs.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},rs}var g2=m2();const v2=wu(g2),{PostgrestClient:x2,PostgrestQueryBuilder:sw,PostgrestFilterBuilder:iw,PostgrestTransformBuilder:aw,PostgrestBuilder:ow,PostgrestError:lw}=v2;class y2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const b2="2.75.0",w2=`realtime-js/${b2}`,_2="1.0.0",hf=1e4,N2=1e3,k2=100;var du;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(du||(du={}));var zn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(zn||(zn={}));var da;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(da||(da={}));var ff;(function(n){n.websocket="websocket"})(ff||(ff={}));var Pl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Pl||(Pl={}));class S2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2);let u=this.HEADER_LENGTH+2;const d=s.decode(e.slice(u,u+a));u=u+a;const f=s.decode(e.slice(u,u+o));u=u+o;const p=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:f,payload:p}}}class ag{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Vr||(Vr={}));const gp=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=j2(u,n,e,a),o),{}):{}},j2=(n,e,t,s)=>{const a=e.find(d=>d.name===n),o=a?.type,u=t[n];return o&&!s.includes(o)?og(o,u):pf(u)},og=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return E2(e,t)}switch(n){case Vr.bool:return A2(e);case Vr.float4:case Vr.float8:case Vr.int2:case Vr.int4:case Vr.int8:case Vr.numeric:case Vr.oid:return C2(e);case Vr.json:case Vr.jsonb:return P2(e);case Vr.timestamp:return L2(e);case Vr.abstime:case Vr.date:case Vr.daterange:case Vr.int4range:case Vr.int8range:case Vr.money:case Vr.reltime:case Vr.text:case Vr.time:case Vr.timestamptz:case Vr.timetz:case Vr.tsrange:case Vr.tstzrange:return pf(e);default:return pf(e)}},pf=n=>n,A2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},C2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},P2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},E2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let o;const u=n.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>og(e,d))}return n},L2=n=>typeof n=="string"?n.replace(" ","T"):n,lg=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Lh{constructor(e,t,s={},a=hf){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(vp||(vp={}));class hu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hu.syncState(this.state,a,o,u),this.pendingDiffs.forEach(f=>{this.state=hu.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=hu.syncDiff(this.state,a,o,u),d())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),u=this.transformState(t),d={},f={};return this.map(o,(p,v)=>{u[p]||(f[p]=v)}),this.map(u,(p,v)=>{const _=o[p];if(_){const S=v.map(L=>L.presence_ref),y=_.map(L=>L.presence_ref),E=v.filter(L=>y.indexOf(L.presence_ref)<0),C=_.filter(L=>S.indexOf(L.presence_ref)<0);E.length>0&&(d[p]=E),C.length>0&&(f[p]=C)}else d[p]=v}),this.syncDiff(o,{joins:d,leaves:f},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,f)=>{var p;const v=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(f),v.length>0){const _=e[d].map(y=>y.presence_ref),S=v.filter(y=>_.indexOf(y.presence_ref)<0);e[d].unshift(...S)}s(d,v,f)}),this.map(u,(d,f)=>{let p=e[d];if(!p)return;const v=f.map(_=>_.presence_ref);p=p.filter(_=>v.indexOf(_.presence_ref)<0),e[d]=p,a(d,p,f),p.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xp;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(xp||(xp={}));var fu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(fu||(fu={}));var xo;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(xo||(xo={}));class Uf{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Lh(this,da.join,this.params,this.timeout),this.rejoinTimer=new ag(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(da.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new hu(this),this.broadcastEndpointURL=lg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==zn.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[fu.PRESENCE]&&this.bindings[fu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},S={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(xo.CHANNEL_ERROR,y)),this._onClose(()=>e?.(xo.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var E;if(this.socket.setAuth(),y===void 0){e?.(xo.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,L=(E=C?.length)!==null&&E!==void 0?E:0,A=[];for(let J=0;J<L;J++){const B=C[J],{filter:{event:$,schema:oe,table:de,filter:H}}=B,Y=y&&y[J];if(Y&&Y.event===$&&Y.schema===oe&&Y.table===de&&Y.filter===H)A.push(Object.assign(Object.assign({},B),{id:Y.id}));else{this.unsubscribe(),this.state=zn.errored,e?.(xo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(xo.SUBSCRIBED);return}}).receive("error",y=>{this.state=zn.errored,e?.(xo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(xo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===zn.joined&&e===fu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(da.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Lh(this,da.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Lh(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>k2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const u=e.toLocaleLowerCase(),{close:d,error:f,leave:p,join:v}=da;if(s&&[d,f,p,v].indexOf(u)>=0&&s!==this._joinRef())return;let S=this._onMessage(u,t,s);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var E,C,L;return((E=y.filter)===null||E===void 0?void 0:E.event)==="*"||((L=(C=y.filter)===null||C===void 0?void 0:C.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===u}).map(y=>y.callback(S,s)):(o=this.bindings[u])===null||o===void 0||o.filter(y=>{var E,C,L,A,J,B;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const $=y.id,oe=(E=y.filter)===null||E===void 0?void 0:E.event;return $&&((C=t.ids)===null||C===void 0?void 0:C.includes($))&&(oe==="*"||oe?.toLocaleLowerCase()===((L=t.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const $=(J=(A=y?.filter)===null||A===void 0?void 0:A.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return $==="*"||$===((B=t?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:C,table:L,commit_timestamp:A,type:J,errors:B}=E;S=Object.assign(Object.assign({},{schema:C,table:L,commit_timestamp:A,eventType:J,new:{},old:{},errors:B}),this._getPayloadRecords(E))}y.callback(S,s)})}_isClosed(){return this.state===zn.closed}_isJoined(){return this.state===zn.joined}_isJoining(){return this.state===zn.joining}_isLeaving(){return this.state===zn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Uf.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(da.close,{},e)}_onError(e){this._on(da.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=gp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=gp(e.columns,e.old_record)),t}}const Th=()=>{},od={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},T2=[1e3,2e3,5e3,1e4],O2=1e4,I2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class D2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hf,this.transport=null,this.heartbeatIntervalMs=od.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Th,this.ref=0,this.reconnectTimer=null,this.logger=Th,this.conn=null,this.sendBuffer=[],this.serializer=new S2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...u)=>el(async()=>{const{default:d}=await Promise.resolve().then(()=>Ic);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...u)=>o(...u)},!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ff.websocket}`,this.httpEndpoint=lg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_2}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case du.connecting:return Pl.Connecting;case du.open:return Pl.Open;case du.closing:return Pl.Closing;default:return Pl.Closed}}isConnected(){return this.connectionState()===Pl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new Uf(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,u=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(N2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},od.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:u}=t,d=u?`(${u})`:"",f=o.status||"";this.log("receive",`${f} ${s} ${a} ${d}`.trim(),o),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(da.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([I2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:w2};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(da.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new ag(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},od.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,u,d,f,p,v;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:hf,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:od.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Th,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(_=>T2[_-1]||O2),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((_,S)=>S(JSON.stringify(_))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class qf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function On(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class R2 extends qf{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mf extends qf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var F2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};const cg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>el(async()=>{const{default:s}=await Promise.resolve().then(()=>Ic);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},M2=()=>F2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield el(()=>Promise.resolve().then(()=>Ic),void 0)).Response:Response}),gf=n=>{if(Array.isArray(n))return n.map(t=>gf(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=gf(s)}),e},B2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Fl=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};const Oh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),U2=(n,e,t)=>Fl(void 0,void 0,void 0,function*(){const s=yield M2();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{const o=n.status||500,u=a?.statusCode||o+"";e(new R2(Oh(a),o,u))}).catch(a=>{e(new mf(Oh(a),a))}):e(new mf(Oh(n),n))}),q2=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||!s?a:(B2(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function _u(n,e,t,s,a,o){return Fl(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(t,q2(e,s,a,o)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>U2(f,d,s))})})}function Cd(n,e,t,s){return Fl(this,void 0,void 0,function*(){return _u(n,"GET",e,t,s)})}function Fa(n,e,t,s,a){return Fl(this,void 0,void 0,function*(){return _u(n,"POST",e,s,a,t)})}function vf(n,e,t,s,a){return Fl(this,void 0,void 0,function*(){return _u(n,"PUT",e,s,a,t)})}function z2(n,e,t,s){return Fl(this,void 0,void 0,function*(){return _u(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function ug(n,e,t,s,a){return Fl(this,void 0,void 0,function*(){return _u(n,"DELETE",e,s,a,t)})}var $2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};class W2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return $2(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(On(e))return{data:null,error:e};throw e}})}}var H2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};class V2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new W2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return H2(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(On(e))return{data:null,error:e};throw e}})}}var Zs=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};const G2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Y2{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=cg(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return Zs(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},yp),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const p=this._removeEmptyFolders(t),v=this._getFinalPath(p),_=yield(e=="PUT"?vf:Fa)(this.fetch,`${this.url}/object/${v}`,o,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(On(o))return{data:null,error:o};throw o}})}upload(e,t,s){return Zs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return Zs(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let f;const p=Object.assign({upsert:yp.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",p.cacheControl)):(f=s,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const _=yield vf(this.fetch,d.toString(),f,{headers:v});return{data:{path:o,fullPath:_.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(On(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return Zs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield Fa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+o.url),d=u.searchParams.get("token");if(!d)throw new qf("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}})}update(e,t,s){return Zs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Zs(this,void 0,void 0,function*(){try{return{data:yield Fa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(On(a))return{data:null,error:a};throw a}})}copy(e,t,s){return Zs(this,void 0,void 0,function*(){try{return{data:{path:(yield Fa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(On(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return Zs(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Fa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(On(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return Zs(this,void 0,void 0,function*(){try{const a=yield Fa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(On(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),u=o?`?${o}`:"",d=this._getFinalPath(e),f=()=>Cd(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new V2(f,this.shouldThrowOnError)}info(e){return Zs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Cd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:gf(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}})}exists(e){return Zs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield z2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(On(s)&&s instanceof mf){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const d=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&a.push(f);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${p}`)}}}remove(e){return Zs(this,void 0,void 0,function*(){try{return{data:yield ug(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}list(e,t,s){return Zs(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},G2),t),{prefix:e||""});return{data:yield Fa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(On(a))return{data:null,error:a};throw a}})}listV2(e,t){return Zs(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Fa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const K2="2.75.0",J2={"X-Client-Info":`storage-js/${K2}`};var pc=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};class X2{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J2),t),this.fetch=cg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return pc(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(On(e))return{data:null,error:e};throw e}})}getBucket(e){return pc(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}createBucket(e){return pc(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Fa(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(On(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return pc(this,void 0,void 0,function*(){try{return{data:yield vf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(On(s))return{data:null,error:s};throw s}})}emptyBucket(e){return pc(this,void 0,void 0,function*(){try{return{data:yield Fa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pc(this,void 0,void 0,function*(){try{return{data:yield ug(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(On(t))return{data:null,error:t};throw t}})}}class Q2 extends X2{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new Y2(this.url,this.headers,e,this.fetch)}}const Z2="2.75.0";let uu="";typeof Deno<"u"?uu="deno":typeof document<"u"?uu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uu="react-native":uu="node";const ev={"X-Client-Info":`supabase-js-${uu}/${Z2}`},tv={headers:ev},rv={schema:"public"},nv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sv={};var iv=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};const av=n=>{let e;return n?e=n:typeof fetch>"u"?e=eg:e=fetch,(...t)=>e(...t)},ov=()=>typeof Headers>"u"?tg:Headers,lv=(n,e,t)=>{const s=av(t),a=ov();return(o,u)=>iv(void 0,void 0,void 0,function*(){var d;const f=(d=yield e())!==null&&d!==void 0?d:n;let p=new a(u?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},u),{headers:p}))})};var cv=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};function uv(n){return n.endsWith("/")?n:n+"/"}function dv(n,e){var t,s;const{db:a,auth:o,realtime:u,global:d}=n,{db:f,auth:p,realtime:v,global:_}=e,S={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},_),d),{headers:Object.assign(Object.assign({},(t=_?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>cv(this,void 0,void 0,function*(){return""})};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}function hv(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dg="2.75.0",Nc=30*1e3,xf=3,Ih=xf*Nc,fv="http://localhost:9999",pv="supabase.auth.token",mv={"X-Client-Info":`gotrue-js/${dg}`},yf="X-Supabase-Api-Version",hg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vv=600*1e3;class gu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ut(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class xv extends gu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function yv(n){return Ut(n)&&n.name==="AuthApiError"}class El extends gu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class rl extends gu{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Xo extends rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bv(n){return Ut(n)&&n.name==="AuthSessionMissingError"}class mc extends rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ld extends rl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cd extends rl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wv(n){return Ut(n)&&n.name==="AuthImplicitGrantRedirectError"}class bp extends rl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bf extends rl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Dh(n){return Ut(n)&&n.name==="AuthRetryableFetchError"}class wp extends rl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class wf extends rl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_p=` 	
\r=`.split(""),_v=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<_p.length;e+=1)n[_p[e].charCodeAt(0)]=-2;for(let e=0;e<Pd.length;e+=1)n[Pd[e].charCodeAt(0)]=e;return n})();function Np(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Pd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Pd[s]),e.queuedBits-=6}}function fg(n,e,t){const s=_v[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function kp(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{Sv(u,s,t)};for(let u=0;u<n.length;u+=1)fg(n.charCodeAt(u),a,o);return e.join("")}function Nv(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function kv(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Nv(s,e)}}function Sv(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Cc(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)fg(n.charCodeAt(a),t,s);return new Uint8Array(e)}function jv(n){const e=[];return kv(n,t=>e.push(t)),new Uint8Array(e)}function Tl(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>Np(a,t,s)),Np(null,t,s),e.join("")}function Av(n){return Math.round(Date.now()/1e3)+n}function Cv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const yi=()=>typeof window<"u"&&typeof document<"u",kl={tested:!1,writable:!1},pg=()=>{if(!yi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kl.tested)return kl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),kl.tested=!0,kl.writable=!0}catch{kl.tested=!0,kl.writable=!1}return kl.writable};function Pv(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const mg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>el(async()=>{const{default:s}=await Promise.resolve().then(()=>Ic);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ev=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",kc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Sl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Go=async(n,e)=>{await n.removeItem(e)};class Fd{constructor(){this.promise=new Fd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fd.promiseConstructor=Promise;function Rh(n){const e=n.split(".");if(e.length!==3)throw new wf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!gv.test(e[s]))throw new wf("JWT not in base64url format");return{header:JSON.parse(kp(e[0])),payload:JSON.parse(kp(e[1])),signature:Cc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Lv(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Tv(n,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await n(o);if(!e(o,null,u)){s(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function Ov(n){return("0"+n.toString(16)).substr(-2)}function Iv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Ov).join("")}async function Dv(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function Rv(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Dv(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gc(n,e,t=!1){const s=Iv();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await kc(n,`${e}-code-verifier`,a);const o=await Rv(s);return[o,s===o?"plain":"s256"]}const Fv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mv(n){const e=n.headers.get(yf);if(!e||!e.match(Fv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Bv(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Uv(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vc(n){if(!qv.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sp(n){return JSON.parse(JSON.stringify(n))}var zv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const jl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$v=[502,503,504];async function jp(n){var e;if(!Ev(n))throw new bf(jl(n),0);if($v.includes(n.status))throw new bf(jl(n),n.status);let t;try{t=await n.json()}catch(o){throw new El(jl(o),o)}let s;const a=Mv(n);if(a&&a.getTime()>=hg["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new wp(jl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Xo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new wp(jl(t),n.status,t.weak_password.reasons);throw new xv(jl(t),n.status||500,s)}const Wv=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Xt(n,e,t,s){var a;const o=Object.assign({},s?.headers);o[yf]||(o[yf]=hg["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await Hv(n,e,t+d,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function Hv(n,e,t,s,a,o){const u=Wv(e,s,a,o);let d;try{d=await n(t,Object.assign({},u))}catch(f){throw console.error(f),new bf(jl(f),0)}if(d.ok||await jp(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await jp(f)}}function ua(n){var e;let t=null;Yv(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Av(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Ap(n){const e=ua(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Qo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Vv(n){return{data:n,error:null}}function Gv(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=n,u=zv(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function Cp(n){return n}function Yv(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mh=["global","local","others"];var Kv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class Jv{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=mg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Mh[0]){if(Mh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mh.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Qo})}catch(s){if(Ut(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Kv(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Gv,redirectTo:t?.redirectTo})}catch(t){if(Ut(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qo})}catch(t){if(Ut(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,u,d,f;try{const p={nextPage:null,lastPage:0,total:0},v=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Cp});if(v.error)throw v.error;const _=await v.json(),S=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(f=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(E.split(";")[1].split("=")[1]);p[`${L}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(Ut(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){vc(e);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qo})}catch(t){if(Ut(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){vc(e);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Qo})}catch(s){if(Ut(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){vc(e);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Qo})}catch(s){if(Ut(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){vc(e.userId);try{const{data:t,error:s}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _deleteFactor(e){vc(e.userId),vc(e.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,u,d,f;try{const p={nextPage:null,lastPage:0,total:0},v=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Cp});if(v.error)throw v.error;const _=await v.json(),S=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(f=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(E.split(";")[1].split("=")[1]);p[`${L}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(Ut(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}}function Pp(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const xc={debug:!!(globalThis&&pg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Xv extends gg{}async function Qv(n,e,t){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),xc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Xv(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(xc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Zv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function ex(n){return parseInt(n,16)}function tx(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function rx(n){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:f,resources:p,scheme:v,uri:_,version:S}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=vg(n.address),E=v?`${v}://${s}`:s,C=n.statement?`${n.statement}
`:"",L=`${E} wants you to sign in with your Ethereum account:
${y}

${C}`;let A=`URI: ${_}
Version: ${S}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),f&&(A+=`
Request ID: ${f}`),p){let J=`
Resources:`;for(const B of p){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);J+=`
- ${B}`}A+=J}return`${L}
${A}`}class Tn extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Ed extends Tn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function nx({error:n,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Tn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Tn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Tn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Tn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Tn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Tn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Tn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(yg(u)){if(o.rp.id!==u)return new Tn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Tn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Tn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function sx({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Tn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(yg(s)){if(t.rpId!==s)return new Tn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Tn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var xg=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class ix{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ax=new ix;function ox(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,a=xg(n,["challenge","user","excludeCredentials"]),o=Cc(e).buffer,u=Object.assign(Object.assign({},t),{id:Cc(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const p=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:Cc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function lx(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=xg(n,["challenge","allowCredentials"]),a=Cc(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Cc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function cx(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Tl(new Uint8Array(n.response.attestationObject)),clientDataJSON:Tl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ux(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Tl(new Uint8Array(a.authenticatorData)),clientDataJSON:Tl(new Uint8Array(a.clientDataJSON)),signature:Tl(new Uint8Array(a.signature)),userHandle:a.userHandle?Tl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Ep(){var n,e;return!!(yi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function dx(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:nx({error:e,options:n})}}}async function hx(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:sx({error:e,options:n})}}}const fx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},px={userVerification:"preferred",hints:["security-key"]};function Ld(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of n)if(a)for(const o in a){const u=a[o];if(u!==void 0)if(Array.isArray(u))s[o]=u;else if(t(u))s[o]=u;else if(e(u)){const d=s[o];e(d)?s[o]=Ld(d,u):s[o]=Ld(u)}else s[o]=u}return s}function mx(n,e){return Ld(fx,n,e||{})}function gx(n,e){return Ld(px,n,e||{})}class vx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const f=a??ax.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=mx(u.webauthn.credential_options.publicKey,o?.create),{data:v,error:_}=await dx({publicKey:p,signal:f});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const p=gx(u.webauthn.credential_options.publicKey,o?.request),{data:v,error:_}=await hx(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:f}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(u){return Ut(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!t)return{data:null,error:new gu("rpId is required for WebAuthn authentication")};try{if(!Ep())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:s,credential_response:f.credential_response}})}catch(u){return Ut(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!t)return{data:null,error:new gu("rpId is required for WebAuthn registration")};try{if(!Ep())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:d};const{data:f,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(u){return Ut(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in register",u)}}}}Zv();const xx={url:fv,storageKey:pv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Lp(n,e,t){return await t()}const yc={};class vu{get jwks(){var e,t;return(t=(e=yc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=yc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vu.nextInstanceID,vu.nextInstanceID+=1,this.instanceID>0&&yi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},xx),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Jv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=mg(a.fetch),this.lock=a.lock||Lp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:yi()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Qv:this.lock=Lp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vx(this)},this.persistSession?(a.storage?this.storage=a.storage:pg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pp(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Pp(this.memoryStorage)),yi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Pv(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),yi()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),wv(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ut(t)?{error:t}:{error:new El("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ua}),{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(Ut(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:v,password:_,options:S}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await gc(this.storage,this.storageKey)),o=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:v,password:_,data:(t=S?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:y,code_challenge_method:E},xform:ua})}else if("phone"in e){const{phone:v,password:_,options:S}=e;o=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=S?.data)!==null&&s!==void 0?s:{},channel:(a=S?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:ua})}else throw new ld("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(Ut(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:d}=e;t=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ap})}else if("phone"in e){const{phone:o,password:u,options:d}=e;t=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ap})}else throw new ld("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new mc}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Ut(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,u,d,f,p,v,_,S;let y,E;if("message"in e)y=e.message,E=e.signature;else{const{chain:C,wallet:L,statement:A,options:J}=e;let B;if(yi())if(typeof L=="object")B=L;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")B=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!J?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=L}const $=new URL((t=J?.url)!==null&&t!==void 0?t:window.location.href),oe=await B.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!oe||oe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const de=vg(oe[0]);let H=(s=J?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!H){const D=await B.request({method:"eth_chainId"});H=ex(D)}const Y={domain:$.host,address:de,statement:A,uri:$.href,version:"1",chainId:H,nonce:(a=J?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(o=J?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=J?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=J?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=J?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=J?.signInWithEthereum)===null||v===void 0?void 0:v.resources};y=rx(Y),E=await B.request({method:"personal_sign",params:[tx(y),de]})}try{const{data:C,error:L}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:E},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ua});if(L)throw L;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new mc}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:L})}catch(C){if(Ut(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var t,s,a,o,u,d,f,p,v,_,S,y;let E,C;if("message"in e)E=e.message,C=e.signature;else{const{chain:L,wallet:A,statement:J,options:B}=e;let $;if(yi())if(typeof A=="object")$=A;else{const de=window;if("solana"in de&&typeof de.solana=="object"&&("signIn"in de.solana&&typeof de.solana.signIn=="function"||"signMessage"in de.solana&&typeof de.solana.signMessage=="function"))$=de.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=A}const oe=new URL((t=B?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in $&&$.signIn){const de=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:oe.host,uri:oe.href}),J?{statement:J}:null));let H;if(Array.isArray(de)&&de[0]&&typeof de[0]=="object")H=de[0];else if(de&&typeof de=="object"&&"signedMessage"in de&&"signature"in de)H=de;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)E=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),C=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${oe.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...J?["",J,""]:[""],"Version: 1",`URI: ${oe.href}`,`Issued At: ${(a=(s=B?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=B?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((u=B?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((d=B?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((f=B?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((p=B?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((_=(v=B?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...B.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const de=await $.signMessage(new TextEncoder().encode(E),"utf8");if(!de||!(de instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=de}}try{const{data:L,error:A}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Tl(C)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ua});if(A)throw A;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new mc}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:A})}catch(L){if(Ut(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:u}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ua});if(await Go(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new mc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(Ut(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:u}=e,d=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ua}),{data:f,error:p}=d;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new mc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(t){if(Ut(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,o,u;try{if("email"in e){const{email:d,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await gc(this.storage,this.storageKey));const{error:_}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:d,options:f}=e,{data:p,error:v}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:v}}throw new ld("You must provide either an email or phone number.")}catch(d){if(Ut(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ua});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(Ut(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await gc(this.storage,this.storageKey)),await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:Vv})}catch(o){if(Ut(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Xo;const{error:a}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Ut(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:u}=await Xt(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:u,error:d}=await Xt(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new ld("You must provide either an email or phone number and a type")}catch(t){if(Ut(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ih:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await Sl(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Fh()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,v)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,v))})}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qo}):await this._useSession(async t=>{var s,a,o;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xo}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Qo})})}catch(t){if(Ut(t))return bv(t)&&(await this._removeSession(),await Go(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Xo;const u=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await gc(this.storage,this.storageKey));const{data:p,error:v}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:Qo});if(v)throw v;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Ut(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xo;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:u}=Rh(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Ut(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Xo;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ut(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!yi())throw new cd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new bp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bp("No code detected.");const{data:J,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:J.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:d,expires_at:f,token_type:p}=e;if(!o||!d||!u||!p)throw new cd("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(d);let S=v+_;f&&(S=parseInt(f));const y=S-v;y*1e3<=Nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${_}s`);const E=S-_;v-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,v):v-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,v);const{data:C,error:L}=await this._getUser(o);if(L)throw L;const A={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:_,expires_at:S,refresh_token:u,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(s){if(Ut(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{error:o};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(yv(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Go(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Cv(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await gc(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Ut(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var u,d,f,p,v;const{data:_,error:S}=o;if(S)throw S;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",y,{headers:this.headers,jwt:(v=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return yi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Ut(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:u,provider:d,token:f,access_token:p,nonce:v}=e,_=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ua}),{data:S,error:y}=_;return y?{data:{user:null,session:null},error:y}:!S||!S.session||!S.user?{data:{user:null,session:null},error:new mc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),{data:S,error:y})}catch(a){if(Ut(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)throw u;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Tv(async a=>(a>0&&await Lv(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ua})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Dh(o)&&Date.now()+u-s<Nc})}catch(s){if(this._debug(t,"error",s),Ut(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),yi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Sl(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await kc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Fh()}else if(a&&!a.user&&!a.user){const u=await Sl(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Go(this.storage,this.storageKey+"-user"),await kc(this.storage,this.storageKey,a)):a.user=Fh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ih;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Ih}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Dh(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Xo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fd;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Xo;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),Ut(o)){const u={data:null,error:o};return Dh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await kc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=Sp(a);await kc(this.storage,this.storageKey,o)}else{const a=Sp(t);await kc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Go(this.storage,this.storageKey),await Go(this.storage,this.storageKey+"-code-verifier"),await Go(this.storage,this.storageKey+"-user"),this.userStorage&&await Go(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Nc}ms, refresh threshold is ${xf} ticks`),a<=xf&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await gc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?{data:null,error:o}:await Xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:p}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?cx(e.webauthn.credential_response):ux(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(t){if(Ut(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:ox(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:lx(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ut(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Rh(a.access_token);let d=null;u.aal&&(d=u.aal);let f=d;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const v=u.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+vv>a)return s;const{data:o,error:u}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:y,error:E}=await this.getSession();if(E||!y.session)return{data:null,error:E};s=y.session.access_token}const{header:a,payload:o,signature:u,raw:{header:d,payload:f}}=Rh(s);t?.allowExpired||Bv(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:o,header:a,signature:u},error:null}}const v=Uv(a.alg),_=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,u,jv(`${d}.${f}`)))throw new wf("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}}}vu.nextInstanceID=0;const yx=vu;class bx extends yx{constructor(e){super(e)}}var wx=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{p(s.next(v))}catch(_){u(_)}}function f(v){try{p(s.throw(v))}catch(_){u(_)}}function p(v){v.done?o(v.value):a(v.value).then(d,f)}p((s=s.apply(n,e||[])).next())})};class _x{constructor(e,t,s){var a,o,u;this.supabaseUrl=e,this.supabaseKey=t;const d=hv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:rv,realtime:sv,auth:Object.assign(Object.assign({},nv),{storageKey:f}),global:tv},v=dv(s??{},p);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(_,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=lv(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new x2(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Q2(this.storageUrl.href,this.headers,this.fetch,s?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new l2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return wx(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:u,flowType:d,lock:f,debug:p},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bx({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),v),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,flowType:d,lock:f,debug:p,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new D2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Nx=(n,e,t)=>new _x(n,e,t);function kx(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yd="https://hyrgqrgeshkgvsfwnzzu.supabase.co",Al="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5cmdxcmdlc2hrZ3ZzZnduenp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTU3NTEsImV4cCI6MjA3NjczMTc1MX0.PpQa22hWN7OAl8LP_h9mhxfogUaV1qmSuOiaBeaLDh4";try{console.log("[supabase] initializing client",{urlPresent:!!yd,keyPresent:!!Al,urlPreview:yd?`${yd.slice(0,20)}...`:null,keyLength:Al?.length||0,keyFirst50:Al?`${Al.slice(0,50)}...`:null,keyLast20:Al?`...${Al.slice(-20)}`:null})}catch{}const Sx=typeof window<"u"?window.localStorage:void 0,kt=Nx(yd,Al,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:Sx,storageKey:"pch.auth"}});async function Tp(n){try{const{data:e,error:t}=await kt.auth.getUser();if(t||!e?.user?.id)return{ok:!1,updated:!1,error:t?.message||"No authenticated user"};const s=e.user.id,{data:a,error:o}=await kt.from("profiles").select("timezone").eq("id",s).single();if(o)return{ok:!1,updated:!1,error:o.message};const u=String(a?.timezone||"").trim();if(u)return{ok:!0,updated:!1,timezone:u};const d=String(n||"").trim();if(!d)return{ok:!1,updated:!1,error:"Empty timezone provided"};const{error:f}=await kt.from("profiles").update({timezone:d}).eq("id",s);return f?{ok:!1,updated:!1,error:f.message}:{ok:!0,updated:!0,timezone:d}}catch(e){return{ok:!1,updated:!1,error:e?.message||String(e)}}}async function ou(n){try{console.log("[dbLoadPets] START - userId=",n);const{data:e,error:t}=await kt.from("pets").select("id, name, species, color, photo_url, insurance_company, policy_number, owner_name, owner_phone, filing_deadline_days, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit, healthy_paws_pet_id").eq("user_id",n).order("created_at",{ascending:!0});if(console.log("[dbLoadPets] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[dbLoadPets] ERROR:",t),t;const s=(e||[]).map(a=>({id:a.id,name:a.name,species:a.species,color:a.color||(a.species==="dog"?"#3B82F6":a.species==="cat"?"#F97316":"#6B7280"),photo_url:a.photo_url||null,insuranceCompany:a.insurance_company,policyNumber:a.policy_number,ownerName:a.owner_name,ownerPhone:a.owner_phone,filing_deadline_days:a.filing_deadline_days,monthly_premium:a.monthly_premium??null,deductible_per_claim:a.deductible_per_claim??null,coverage_start_date:a.coverage_start_date||null,insurance_pays_percentage:a.insurance_pays_percentage??null,annual_coverage_limit:a.annual_coverage_limit??null,healthy_paws_pet_id:a.healthy_paws_pet_id||null}));return console.log("[dbLoadPets] SUCCESS - count=",s.length,"pets:",s),s}catch(e){throw console.error("[dbLoadPets] EXCEPTION:",e),e}}async function Bh(n,e){const t=e.color||(e.species==="dog"?"#3B82F6":e.species==="cat"?"#F97316":"#6B7280"),s={id:e.id,user_id:n,name:e.name,species:e.species,color:t,photo_url:e.photo_url||null,insurance_company:e.insuranceCompany,policy_number:e.policyNumber,owner_name:e.ownerName||"",owner_phone:e.ownerPhone||"",filing_deadline_days:e.filing_deadline_days||e.filingDeadlineDays||null,monthly_premium:e.monthly_premium??null,deductible_per_claim:e.deductible_per_claim??null,coverage_start_date:e.coverage_start_date||null,insurance_pays_percentage:e.insurance_pays_percentage??null,annual_coverage_limit:e.annual_coverage_limit??null,healthy_paws_pet_id:e.healthy_paws_pet_id||null};console.log("[dbUpsertPet] userId=",n,"payload=",s);const{error:a}=await kt.from("pets").upsert(s,{onConflict:"id"}).select();if(a)throw a}async function jx(n,e){console.log("[dbDeletePet] userId=",n,"petId=",e);const{error:t}=await kt.from("pets").delete().eq("user_id",n).eq("id",e);if(t)throw t}async function Op(n,e){const t={id:n,email:e??null};console.log("[dbEnsureProfile] upserting profile",t);const{error:s}=await kt.from("profiles").upsert(t,{onConflict:"id"}).select();if(s)throw s}async function Ax(n){console.log("[createPet] received payload:",n);const{data:e,error:t}=await kt.from("pets").insert([{user_id:n.user_id,name:n.name,species:n.species,color:n.color??null,photo_url:n.photo_url??null,insurance_company:n.insurance_company??null,policy_number:n.policy_number??null,breed:n.breed??null,weight_lbs:n.weight_lbs??null,monthly_premium:n.monthly_premium??null,deductible_per_claim:n.deductible_per_claim??null,coverage_start_date:n.coverage_start_date??null,annual_coverage_limit:n.annual_coverage_limit??null,insurance_pays_percentage:n.insurance_pays_percentage??null}]).select("*").single();if(console.log("[createPet] insert result:",{data:e,error:t}),t)throw t;return e}function Ar(n){"@babel/helpers - typeof";return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(n)}var ha=Uint8Array,bi=Uint16Array,zf=Int32Array,$f=new ha([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wf=new ha([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ip=new ha([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bg=function(n,e){for(var t=new bi(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new zf(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},wg=bg($f,2),Cx=wg.b,_f=wg.r;Cx[28]=258,_f[258]=28;var Px=bg(Wf,0),Dp=Px.r,Nf=new bi(32768);for(var Jr=0;Jr<32768;++Jr){var Yo=(Jr&43690)>>1|(Jr&21845)<<1;Yo=(Yo&52428)>>2|(Yo&13107)<<2,Yo=(Yo&61680)>>4|(Yo&3855)<<4,Nf[Jr]=((Yo&65280)>>8|(Yo&255)<<8)>>1}var pu=(function(n,e,t){for(var s=n.length,a=0,o=new bi(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new bi(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var d;if(t){d=new bi(1<<e);var f=15-e;for(a=0;a<s;++a)if(n[a])for(var p=a<<4|n[a],v=e-n[a],_=u[n[a]-1]++<<v,S=_|(1<<v)-1;_<=S;++_)d[Nf[_]>>f]=p}else for(d=new bi(s),a=0;a<s;++a)n[a]&&(d[a]=Nf[u[n[a]-1]++]>>15-n[a]);return d}),Il=new ha(288);for(var Jr=0;Jr<144;++Jr)Il[Jr]=8;for(var Jr=144;Jr<256;++Jr)Il[Jr]=9;for(var Jr=256;Jr<280;++Jr)Il[Jr]=7;for(var Jr=280;Jr<288;++Jr)Il[Jr]=8;var Td=new ha(32);for(var Jr=0;Jr<32;++Jr)Td[Jr]=5;var Ex=pu(Il,9,0),Lx=pu(Td,5,0),_g=function(n){return(n+7)/8|0},Tx=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ha(n.subarray(e,t))},go=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},lu=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Uh=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:kg,l:0};if(a==1){var u=new ha(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(oe,de){return oe.f-de.f}),t.push({s:-1,f:25001});var d=t[0],f=t[1],p=0,v=1,_=2;for(t[0]={s:-1,f:d.f+f.f,l:d,r:f};v!=a-1;)d=t[t[p].f<t[_].f?p++:_++],f=t[p!=v&&t[p].f<t[_].f?p++:_++],t[v++]={s:-1,f:d.f+f.f,l:d,r:f};for(var S=o[0].s,s=1;s<a;++s)o[s].s>S&&(S=o[s].s);var y=new bi(S+1),E=kf(t[v-1],y,0);if(E>e){var s=0,C=0,L=E-e,A=1<<L;for(o.sort(function(de,H){return y[H.s]-y[de.s]||de.f-H.f});s<a;++s){var J=o[s].s;if(y[J]>e)C+=A-(1<<E-y[J]),y[J]=e;else break}for(C>>=L;C>0;){var B=o[s].s;y[B]<e?C-=1<<e-y[B]++-1:++s}for(;s>=0&&C;--s){var $=o[s].s;y[$]==e&&(--y[$],++C)}E=e}return{t:new ha(y),l:E}},kf=function(n,e,t){return n.s==-1?Math.max(kf(n.l,e,t+1),kf(n.r,e,t+1)):e[n.s]=t},Rp=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new bi(++e),s=0,a=n[0],o=1,u=function(f){t[s++]=f},d=1;d<=e;++d)if(n[d]==a&&d!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[d]}return{c:t.subarray(0,s),n:e}},cu=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},Ng=function(n,e,t){var s=t.length,a=_g(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},Fp=function(n,e,t,s,a,o,u,d,f,p,v){go(e,v++,t),++a[256];for(var _=Uh(a,15),S=_.t,y=_.l,E=Uh(o,15),C=E.t,L=E.l,A=Rp(S),J=A.c,B=A.n,$=Rp(C),oe=$.c,de=$.n,H=new bi(19),Y=0;Y<J.length;++Y)++H[J[Y]&31];for(var Y=0;Y<oe.length;++Y)++H[oe[Y]&31];for(var D=Uh(H,7),se=D.t,I=D.l,R=19;R>4&&!se[Ip[R-1]];--R);var re=p+5<<3,W=cu(a,Il)+cu(o,Td)+u,ie=cu(a,S)+cu(o,C)+u+14+3*R+cu(H,se)+2*H[16]+3*H[17]+7*H[18];if(f>=0&&re<=W&&re<=ie)return Ng(e,v,n.subarray(f,f+p));var fe,ee,z,le;if(go(e,v,1+(ie<W)),v+=2,ie<W){fe=pu(S,y,0),ee=S,z=pu(C,L,0),le=C;var be=pu(se,I,0);go(e,v,B-257),go(e,v+5,de-1),go(e,v+10,R-4),v+=14;for(var Y=0;Y<R;++Y)go(e,v+3*Y,se[Ip[Y]]);v+=3*R;for(var V=[J,oe],j=0;j<2;++j)for(var q=V[j],Y=0;Y<q.length;++Y){var X=q[Y]&31;go(e,v,be[X]),v+=se[X],X>15&&(go(e,v,q[Y]>>5&127),v+=q[Y]>>12)}}else fe=Ex,ee=Il,z=Lx,le=Td;for(var Y=0;Y<d;++Y){var ae=s[Y];if(ae>255){var X=ae>>18&31;lu(e,v,fe[X+257]),v+=ee[X+257],X>7&&(go(e,v,ae>>23&31),v+=$f[X]);var ue=ae&31;lu(e,v,z[ue]),v+=le[ue],ue>3&&(lu(e,v,ae>>5&8191),v+=Wf[ue])}else lu(e,v,fe[ae]),v+=ee[ae]}return lu(e,v,fe[256]),v+ee[256]},Ox=new zf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kg=new ha(0),Ix=function(n,e,t,s,a,o){var u=o.z||n.length,d=new ha(s+u+5*(1+Math.ceil(u/7e3))+a),f=d.subarray(s,d.length-a),p=o.l,v=(o.r||0)&7;if(e){v&&(f[0]=o.r>>3);for(var _=Ox[e-1],S=_>>13,y=_&8191,E=(1<<t)-1,C=o.p||new bi(32768),L=o.h||new bi(E+1),A=Math.ceil(t/3),J=2*A,B=function(st){return(n[st]^n[st+1]<<A^n[st+2]<<J)&E},$=new zf(25e3),oe=new bi(288),de=new bi(32),H=0,Y=0,D=o.i||0,se=0,I=o.w||0,R=0;D+2<u;++D){var re=B(D),W=D&32767,ie=L[re];if(C[W]=ie,L[re]=W,I<=D){var fe=u-D;if((H>7e3||se>24576)&&(fe>423||!p)){v=Fp(n,f,0,$,oe,de,Y,se,R,D-R,v),se=H=Y=0,R=D;for(var ee=0;ee<286;++ee)oe[ee]=0;for(var ee=0;ee<30;++ee)de[ee]=0}var z=2,le=0,be=y,V=W-ie&32767;if(fe>2&&re==B(D-V))for(var j=Math.min(S,fe)-1,q=Math.min(32767,D),X=Math.min(258,fe);V<=q&&--be&&W!=ie;){if(n[D+z]==n[D+z-V]){for(var ae=0;ae<X&&n[D+ae]==n[D+ae-V];++ae);if(ae>z){if(z=ae,le=V,ae>j)break;for(var ue=Math.min(V,ae-2),ye=0,ee=0;ee<ue;++ee){var he=D-V+ee&32767,Se=C[he],Ce=he-Se&32767;Ce>ye&&(ye=Ce,ie=he)}}}W=ie,ie=C[W],V+=W-ie&32767}if(le){$[se++]=268435456|_f[z]<<18|Dp[le];var ze=_f[z]&31,Ie=Dp[le]&31;Y+=$f[ze]+Wf[Ie],++oe[257+ze],++de[Ie],I=D+z,++H}else $[se++]=n[D],++oe[n[D]]}}for(D=Math.max(D,I);D<u;++D)$[se++]=n[D],++oe[n[D]];v=Fp(n,f,p,$,oe,de,Y,se,R,D-R,v),p||(o.r=v&7|f[v/8|0]<<3,v-=7,o.h=L,o.p=C,o.i=D,o.w=I)}else{for(var D=o.w||0;D<u+p;D+=65535){var Ge=D+65535;Ge>=u&&(f[v/8|0]=p,Ge=u),v=Ng(f,v+1,n.subarray(D,Ge))}o.i=u}return Tx(d,0,s+_g(v)+a)},Sg=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Dx=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new ha(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return Ix(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},jg=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Rx=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=Sg();a.p(e.dictionary),jg(n,2,a.d())}};function Sf(n,e){e||(e={});var t=Sg();t.p(n);var s=Dx(n,e,e.dictionary?6:2,4);return Rx(s,e),jg(s,s.length-4,t.d()),s}var Fx=typeof TextDecoder<"u"&&new TextDecoder,Mx=0;try{Fx.decode(kg,{stream:!0}),Mx=1}catch{}function Bx(n){if(Array.isArray(n))return n}function Ux(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,d=[],f=!0,p=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(f=(s=o.call(t)).done)&&(d.push(s.value),d.length!==e);f=!0);}catch(v){p=!0,a=v}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(p)throw a}}return d}}function Mp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function qx(n,e){if(n){if(typeof n=="string")return Mp(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Mp(n,e):void 0}}function zx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bp(n,e){return Bx(n)||Ux(n,e)||qx(n,e)||zx()}function Up(n,e="utf8"){return new TextDecoder(e).decode(n)}const $x=new TextEncoder;function Wx(n){return $x.encode(n)}const Hx=1024*8,Vx=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),qh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Hf{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Hx,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Hf)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=qh[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===Vx&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+s));d.reverse();const f=new qh[t](d.buffer);return this.offset+=s,f.reverse(),f}const u=new qh[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Up(this.readBytes(e))}decodeText(e=1,t="utf8"){return Up(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Wx(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Dc(n){let e=n.length;for(;--e>=0;)n[e]=0}const Gx=3,Yx=258,Ag=29,Kx=256,Jx=Kx+1+Ag,Cg=30,Xx=512,Qx=new Array((Jx+2)*2);Dc(Qx);const Zx=new Array(Cg*2);Dc(Zx);const ey=new Array(Xx);Dc(ey);const ty=new Array(Yx-Gx+1);Dc(ty);const ry=new Array(Ag);Dc(ry);const ny=new Array(Cg);Dc(ny);const sy=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var jf=sy;const iy=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},ay=new Uint32Array(iy()),oy=(n,e,t,s)=>{const a=ay,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var Da=oy,Af={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pg={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ly=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var cy=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)ly(t,s)&&(n[s]=t[s])}}return n},uy=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},Eg={assign:cy,flattenChunks:uy};let Lg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Lg=!1}const xu=new Uint8Array(256);for(let n=0;n<256;n++)xu[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;xu[254]=xu[254]=1;var dy=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,d=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,a=0;o<d;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const hy=(n,e)=>{if(e<65534&&n.subarray&&Lg)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var fy=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let d=xu[u];if(d>4){o[a++]=65533,s+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&s<t;)u=u<<6|n[s++]&63,d--;if(d>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return hy(o,a)},py=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+xu[n[t]]>e?t:e},Cf={string2buf:dy,buf2string:fy,utf8border:py};function my(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var gy=my;const ud=16209,vy=16191;var xy=function(e,t){let s,a,o,u,d,f,p,v,_,S,y,E,C,L,A,J,B,$,oe,de,H,Y,D,se;const I=e.state;s=e.next_in,D=e.input,a=s+(e.avail_in-5),o=e.next_out,se=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),f=I.dmax,p=I.wsize,v=I.whave,_=I.wnext,S=I.window,y=I.hold,E=I.bits,C=I.lencode,L=I.distcode,A=(1<<I.lenbits)-1,J=(1<<I.distbits)-1;e:do{E<15&&(y+=D[s++]<<E,E+=8,y+=D[s++]<<E,E+=8),B=C[y&A];t:for(;;){if($=B>>>24,y>>>=$,E-=$,$=B>>>16&255,$===0)se[o++]=B&65535;else if($&16){oe=B&65535,$&=15,$&&(E<$&&(y+=D[s++]<<E,E+=8),oe+=y&(1<<$)-1,y>>>=$,E-=$),E<15&&(y+=D[s++]<<E,E+=8,y+=D[s++]<<E,E+=8),B=L[y&J];r:for(;;){if($=B>>>24,y>>>=$,E-=$,$=B>>>16&255,$&16){if(de=B&65535,$&=15,E<$&&(y+=D[s++]<<E,E+=8,E<$&&(y+=D[s++]<<E,E+=8)),de+=y&(1<<$)-1,de>f){e.msg="invalid distance too far back",I.mode=ud;break e}if(y>>>=$,E-=$,$=o-u,de>$){if($=de-$,$>v&&I.sane){e.msg="invalid distance too far back",I.mode=ud;break e}if(H=0,Y=S,_===0){if(H+=p-$,$<oe){oe-=$;do se[o++]=S[H++];while(--$);H=o-de,Y=se}}else if(_<$){if(H+=p+_-$,$-=_,$<oe){oe-=$;do se[o++]=S[H++];while(--$);if(H=0,_<oe){$=_,oe-=$;do se[o++]=S[H++];while(--$);H=o-de,Y=se}}}else if(H+=_-$,$<oe){oe-=$;do se[o++]=S[H++];while(--$);H=o-de,Y=se}for(;oe>2;)se[o++]=Y[H++],se[o++]=Y[H++],se[o++]=Y[H++],oe-=3;oe&&(se[o++]=Y[H++],oe>1&&(se[o++]=Y[H++]))}else{H=o-de;do se[o++]=se[H++],se[o++]=se[H++],se[o++]=se[H++],oe-=3;while(oe>2);oe&&(se[o++]=se[H++],oe>1&&(se[o++]=se[H++]))}}else if(($&64)===0){B=L[(B&65535)+(y&(1<<$)-1)];continue r}else{e.msg="invalid distance code",I.mode=ud;break e}break}}else if(($&64)===0){B=C[(B&65535)+(y&(1<<$)-1)];continue t}else if($&32){I.mode=vy;break e}else{e.msg="invalid literal/length code",I.mode=ud;break e}break}}while(s<a&&o<d);oe=E>>3,s-=oe,E-=oe<<3,y&=(1<<E)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<d?257+(d-o):257-(o-d),I.hold=y,I.bits=E};const bc=15,qp=852,zp=592,$p=0,zh=1,Wp=2,yy=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),by=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wy=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_y=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ny=(n,e,t,s,a,o,u,d)=>{const f=d.bits;let p=0,v=0,_=0,S=0,y=0,E=0,C=0,L=0,A=0,J=0,B,$,oe,de,H,Y=null,D;const se=new Uint16Array(bc+1),I=new Uint16Array(bc+1);let R=null,re,W,ie;for(p=0;p<=bc;p++)se[p]=0;for(v=0;v<s;v++)se[e[t+v]]++;for(y=f,S=bc;S>=1&&se[S]===0;S--);if(y>S&&(y=S),S===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(_=1;_<S&&se[_]===0;_++);for(y<_&&(y=_),L=1,p=1;p<=bc;p++)if(L<<=1,L-=se[p],L<0)return-1;if(L>0&&(n===$p||S!==1))return-1;for(I[1]=0,p=1;p<bc;p++)I[p+1]=I[p]+se[p];for(v=0;v<s;v++)e[t+v]!==0&&(u[I[e[t+v]]++]=v);if(n===$p?(Y=R=u,D=20):n===zh?(Y=yy,R=by,D=257):(Y=wy,R=_y,D=0),J=0,v=0,p=_,H=o,E=y,C=0,oe=-1,A=1<<y,de=A-1,n===zh&&A>qp||n===Wp&&A>zp)return 1;for(;;){re=p-C,u[v]+1<D?(W=0,ie=u[v]):u[v]>=D?(W=R[u[v]-D],ie=Y[u[v]-D]):(W=96,ie=0),B=1<<p-C,$=1<<E,_=$;do $-=B,a[H+(J>>C)+$]=re<<24|W<<16|ie|0;while($!==0);for(B=1<<p-1;J&B;)B>>=1;if(B!==0?(J&=B-1,J+=B):J=0,v++,--se[p]===0){if(p===S)break;p=e[t+u[v]]}if(p>y&&(J&de)!==oe){for(C===0&&(C=y),H+=_,E=p-C,L=1<<E;E+C<S&&(L-=se[E+C],!(L<=0));)E++,L<<=1;if(A+=1<<E,n===zh&&A>qp||n===Wp&&A>zp)return 1;oe=J&de,a[oe]=y<<24|E<<16|H-o|0}}return J!==0&&(a[H+J]=p-C<<24|64<<16|0),d.bits=y,0};var mu=Ny;const ky=0,Tg=1,Og=2,{Z_FINISH:Hp,Z_BLOCK:Sy,Z_TREES:dd,Z_OK:Dl,Z_STREAM_END:jy,Z_NEED_DICT:Ay,Z_STREAM_ERROR:Bi,Z_DATA_ERROR:Ig,Z_MEM_ERROR:Dg,Z_BUF_ERROR:Cy,Z_DEFLATED:Vp}=Pg,Md=16180,Gp=16181,Yp=16182,Kp=16183,Jp=16184,Xp=16185,Qp=16186,Zp=16187,em=16188,tm=16189,Od=16190,vo=16191,$h=16192,rm=16193,Wh=16194,nm=16195,sm=16196,im=16197,am=16198,hd=16199,fd=16200,om=16201,lm=16202,cm=16203,um=16204,dm=16205,Hh=16206,hm=16207,fm=16208,nn=16209,Rg=16210,Fg=16211,Py=852,Ey=592,Ly=15,Ty=Ly,pm=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Oy(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ml=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Md||e.mode>Fg?1:0},Mg=n=>{if(Ml(n))return Bi;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Md,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Py),e.distcode=e.distdyn=new Int32Array(Ey),e.sane=1,e.back=-1,Dl},Bg=n=>{if(Ml(n))return Bi;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Mg(n)},Ug=(n,e)=>{let t;if(Ml(n))return Bi;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Bi:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Bg(n))},qg=(n,e)=>{if(!n)return Bi;const t=new Oy;n.state=t,t.strm=n,t.window=null,t.mode=Md;const s=Ug(n,e);return s!==Dl&&(n.state=null),s},Iy=n=>qg(n,Ty);let mm=!0,Vh,Gh;const Dy=n=>{if(mm){Vh=new Int32Array(512),Gh=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(mu(Tg,n.lens,0,288,Vh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;mu(Og,n.lens,0,32,Gh,0,n.work,{bits:5}),mm=!1}n.lencode=Vh,n.lenbits=9,n.distcode=Gh,n.distbits=5},zg=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},Ry=(n,e)=>{let t,s,a,o,u,d,f,p,v,_,S,y,E,C,L=0,A,J,B,$,oe,de,H,Y;const D=new Uint8Array(4);let se,I;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ml(n)||!n.output||!n.input&&n.avail_in!==0)return Bi;t=n.state,t.mode===vo&&(t.mode=$h),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,p=t.hold,v=t.bits,_=d,S=f,Y=Dl;e:for(;;)switch(t.mode){case Md:if(t.wrap===0){t.mode=$h;break}for(;v<16;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(t.wrap&2&&p===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=p&255,D[1]=p>>>8&255,t.check=Da(t.check,D,2,0),p=0,v=0,t.mode=Gp;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((p&255)<<8)+(p>>8))%31){n.msg="incorrect header check",t.mode=nn;break}if((p&15)!==Vp){n.msg="unknown compression method",t.mode=nn;break}if(p>>>=4,v-=4,H=(p&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=nn;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=p&512?tm:vo,p=0,v=0;break;case Gp:for(;v<16;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(t.flags=p,(t.flags&255)!==Vp){n.msg="unknown compression method",t.mode=nn;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=nn;break}t.head&&(t.head.text=p>>8&1),t.flags&512&&t.wrap&4&&(D[0]=p&255,D[1]=p>>>8&255,t.check=Da(t.check,D,2,0)),p=0,v=0,t.mode=Yp;case Yp:for(;v<32;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}t.head&&(t.head.time=p),t.flags&512&&t.wrap&4&&(D[0]=p&255,D[1]=p>>>8&255,D[2]=p>>>16&255,D[3]=p>>>24&255,t.check=Da(t.check,D,4,0)),p=0,v=0,t.mode=Kp;case Kp:for(;v<16;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}t.head&&(t.head.xflags=p&255,t.head.os=p>>8),t.flags&512&&t.wrap&4&&(D[0]=p&255,D[1]=p>>>8&255,t.check=Da(t.check,D,2,0)),p=0,v=0,t.mode=Jp;case Jp:if(t.flags&1024){for(;v<16;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}t.length=p,t.head&&(t.head.extra_len=p),t.flags&512&&t.wrap&4&&(D[0]=p&255,D[1]=p>>>8&255,t.check=Da(t.check,D,2,0)),p=0,v=0}else t.head&&(t.head.extra=null);t.mode=Xp;case Xp:if(t.flags&1024&&(y=t.length,y>d&&(y=d),y&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+y),H)),t.flags&512&&t.wrap&4&&(t.check=Da(t.check,s,y,o)),d-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=Qp;case Qp:if(t.flags&2048){if(d===0)break e;y=0;do H=s[o+y++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=Da(t.check,s,y,o)),d-=y,o+=y,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Zp;case Zp:if(t.flags&4096){if(d===0)break e;y=0;do H=s[o+y++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=Da(t.check,s,y,o)),d-=y,o+=y,H)break e}else t.head&&(t.head.comment=null);t.mode=em;case em:if(t.flags&512){for(;v<16;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(t.wrap&4&&p!==(t.check&65535)){n.msg="header crc mismatch",t.mode=nn;break}p=0,v=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=vo;break;case tm:for(;v<32;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}n.adler=t.check=pm(p),p=0,v=0,t.mode=Od;case Od:if(t.havedict===0)return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=v,Ay;n.adler=t.check=1,t.mode=vo;case vo:if(e===Sy||e===dd)break e;case $h:if(t.last){p>>>=v&7,v-=v&7,t.mode=Hh;break}for(;v<3;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}switch(t.last=p&1,p>>>=1,v-=1,p&3){case 0:t.mode=rm;break;case 1:if(Dy(t),t.mode=hd,e===dd){p>>>=2,v-=2;break e}break;case 2:t.mode=sm;break;case 3:n.msg="invalid block type",t.mode=nn}p>>>=2,v-=2;break;case rm:for(p>>>=v&7,v-=v&7;v<32;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if((p&65535)!==(p>>>16^65535)){n.msg="invalid stored block lengths",t.mode=nn;break}if(t.length=p&65535,p=0,v=0,t.mode=Wh,e===dd)break e;case Wh:t.mode=nm;case nm:if(y=t.length,y){if(y>d&&(y=d),y>f&&(y=f),y===0)break e;a.set(s.subarray(o,o+y),u),d-=y,o+=y,f-=y,u+=y,t.length-=y;break}t.mode=vo;break;case sm:for(;v<14;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(t.nlen=(p&31)+257,p>>>=5,v-=5,t.ndist=(p&31)+1,p>>>=5,v-=5,t.ncode=(p&15)+4,p>>>=4,v-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=nn;break}t.have=0,t.mode=im;case im:for(;t.have<t.ncode;){for(;v<3;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}t.lens[R[t.have++]]=p&7,p>>>=3,v-=3}for(;t.have<19;)t.lens[R[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,se={bits:t.lenbits},Y=mu(ky,t.lens,0,19,t.lencode,0,t.work,se),t.lenbits=se.bits,Y){n.msg="invalid code lengths set",t.mode=nn;break}t.have=0,t.mode=am;case am:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[p&(1<<t.lenbits)-1],A=L>>>24,J=L>>>16&255,B=L&65535,!(A<=v);){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(B<16)p>>>=A,v-=A,t.lens[t.have++]=B;else{if(B===16){for(I=A+2;v<I;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(p>>>=A,v-=A,t.have===0){n.msg="invalid bit length repeat",t.mode=nn;break}H=t.lens[t.have-1],y=3+(p&3),p>>>=2,v-=2}else if(B===17){for(I=A+3;v<I;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}p>>>=A,v-=A,H=0,y=3+(p&7),p>>>=3,v-=3}else{for(I=A+7;v<I;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}p>>>=A,v-=A,H=0,y=11+(p&127),p>>>=7,v-=7}if(t.have+y>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=nn;break}for(;y--;)t.lens[t.have++]=H}}if(t.mode===nn)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=nn;break}if(t.lenbits=9,se={bits:t.lenbits},Y=mu(Tg,t.lens,0,t.nlen,t.lencode,0,t.work,se),t.lenbits=se.bits,Y){n.msg="invalid literal/lengths set",t.mode=nn;break}if(t.distbits=6,t.distcode=t.distdyn,se={bits:t.distbits},Y=mu(Og,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,se),t.distbits=se.bits,Y){n.msg="invalid distances set",t.mode=nn;break}if(t.mode=hd,e===dd)break e;case hd:t.mode=fd;case fd:if(d>=6&&f>=258){n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=v,xy(n,S),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,p=t.hold,v=t.bits,t.mode===vo&&(t.back=-1);break}for(t.back=0;L=t.lencode[p&(1<<t.lenbits)-1],A=L>>>24,J=L>>>16&255,B=L&65535,!(A<=v);){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(J&&(J&240)===0){for($=A,oe=J,de=B;L=t.lencode[de+((p&(1<<$+oe)-1)>>$)],A=L>>>24,J=L>>>16&255,B=L&65535,!($+A<=v);){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}p>>>=$,v-=$,t.back+=$}if(p>>>=A,v-=A,t.back+=A,t.length=B,J===0){t.mode=dm;break}if(J&32){t.back=-1,t.mode=vo;break}if(J&64){n.msg="invalid literal/length code",t.mode=nn;break}t.extra=J&15,t.mode=om;case om:if(t.extra){for(I=t.extra;v<I;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}t.length+=p&(1<<t.extra)-1,p>>>=t.extra,v-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=lm;case lm:for(;L=t.distcode[p&(1<<t.distbits)-1],A=L>>>24,J=L>>>16&255,B=L&65535,!(A<=v);){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if((J&240)===0){for($=A,oe=J,de=B;L=t.distcode[de+((p&(1<<$+oe)-1)>>$)],A=L>>>24,J=L>>>16&255,B=L&65535,!($+A<=v);){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}p>>>=$,v-=$,t.back+=$}if(p>>>=A,v-=A,t.back+=A,J&64){n.msg="invalid distance code",t.mode=nn;break}t.offset=B,t.extra=J&15,t.mode=cm;case cm:if(t.extra){for(I=t.extra;v<I;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}t.offset+=p&(1<<t.extra)-1,p>>>=t.extra,v-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=nn;break}t.mode=um;case um:if(f===0)break e;if(y=S-f,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=nn;break}y>t.wnext?(y-=t.wnext,E=t.wsize-y):E=t.wnext-y,y>t.length&&(y=t.length),C=t.window}else C=a,E=u-t.offset,y=t.length;y>f&&(y=f),f-=y,t.length-=y;do a[u++]=C[E++];while(--y);t.length===0&&(t.mode=fd);break;case dm:if(f===0)break e;a[u++]=t.length,f--,t.mode=fd;break;case Hh:if(t.wrap){for(;v<32;){if(d===0)break e;d--,p|=s[o++]<<v,v+=8}if(S-=f,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?Da(t.check,a,S,u-S):jf(t.check,a,S,u-S)),S=f,t.wrap&4&&(t.flags?p:pm(p))!==t.check){n.msg="incorrect data check",t.mode=nn;break}p=0,v=0}t.mode=hm;case hm:if(t.wrap&&t.flags){for(;v<32;){if(d===0)break e;d--,p+=s[o++]<<v,v+=8}if(t.wrap&4&&p!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=nn;break}p=0,v=0}t.mode=fm;case fm:Y=jy;break e;case nn:Y=Ig;break e;case Rg:return Dg;case Fg:default:return Bi}return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=v,(t.wsize||S!==n.avail_out&&t.mode<nn&&(t.mode<Hh||e!==Hp))&&zg(n,n.output,n.next_out,S-n.avail_out),_-=n.avail_in,S-=n.avail_out,n.total_in+=_,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?Da(t.check,a,S,n.next_out-S):jf(t.check,a,S,n.next_out-S)),n.data_type=t.bits+(t.last?64:0)+(t.mode===vo?128:0)+(t.mode===hd||t.mode===Wh?256:0),(_===0&&S===0||e===Hp)&&Y===Dl&&(Y=Cy),Y},Fy=n=>{if(Ml(n))return Bi;let e=n.state;return e.window&&(e.window=null),n.state=null,Dl},My=(n,e)=>{if(Ml(n))return Bi;const t=n.state;return(t.wrap&2)===0?Bi:(t.head=e,e.done=!1,Dl)},By=(n,e)=>{const t=e.length;let s,a,o;return Ml(n)||(s=n.state,s.wrap!==0&&s.mode!==Od)?Bi:s.mode===Od&&(a=1,a=jf(a,e,t,0),a!==s.check)?Ig:(o=zg(n,e,t,t),o?(s.mode=Rg,Dg):(s.havedict=1,Dl))};var Uy=Bg,qy=Ug,zy=Mg,$y=Iy,Wy=qg,Hy=Ry,Vy=Fy,Gy=My,Yy=By,Ky="pako inflate (from Nodeca project)",yo={inflateReset:Uy,inflateReset2:qy,inflateResetKeep:zy,inflateInit:$y,inflateInit2:Wy,inflate:Hy,inflateEnd:Vy,inflateGetHeader:Gy,inflateSetDictionary:Yy,inflateInfo:Ky};function Jy(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Xy=Jy;const $g=Object.prototype.toString,{Z_NO_FLUSH:Qy,Z_FINISH:Zy,Z_OK:yu,Z_STREAM_END:Yh,Z_NEED_DICT:Kh,Z_STREAM_ERROR:e5,Z_DATA_ERROR:gm,Z_MEM_ERROR:t5}=Pg;function Nu(n){this.options=Eg.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gy,this.strm.avail_out=0;let t=yo.inflateInit2(this.strm,e.windowBits);if(t!==yu)throw new Error(Af[t]);if(this.header=new Xy,yo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Cf.string2buf(e.dictionary):$g.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=yo.inflateSetDictionary(this.strm,e.dictionary),t!==yu)))throw new Error(Af[t])}Nu.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?Zy:Qy,$g.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=yo.inflate(t,u),o===Kh&&a&&(o=yo.inflateSetDictionary(t,a),o===yu?o=yo.inflate(t,u):o===gm&&(o=Kh));t.avail_in>0&&o===Yh&&t.state.wrap>0&&n[t.next_in]!==0;)yo.inflateReset(t),o=yo.inflate(t,u);switch(o){case e5:case gm:case Kh:case t5:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===Yh))if(this.options.to==="string"){let f=Cf.utf8border(t.output,t.next_out),p=t.next_out-f,v=Cf.buf2string(t.output,f);t.next_out=p,t.avail_out=s-p,p&&t.output.set(t.output.subarray(f,f+p),0),this.onData(v)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===yu&&d===0)){if(o===Yh)return o=yo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Nu.prototype.onData=function(n){this.chunks.push(n)};Nu.prototype.onEnd=function(n){n===yu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Eg.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function r5(n,e){const t=new Nu(e);if(t.push(n),t.err)throw t.msg||Af[t.err];return t.result}var n5=Nu,s5=r5,i5={Inflate:n5,inflate:s5};const{Inflate:a5,inflate:o5}=i5;var vm=a5,l5=o5;const Wg=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Wg[n]=e}const xm=4294967295;function c5(n,e,t){let s=n;for(let a=0;a<t;a++)s=Wg[(s^e[a])&255]^s>>>8;return s}function u5(n,e){return(c5(xm,n,e)^xm)>>>0}function ym(n,e,t){const s=n.readUint32(),a=u5(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Hg(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function Vg(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function Gg(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function Yg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function Kg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+d5(e[o-a],t[o],t[o-a])&255}}function d5(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function h5(n,e,t,s,a,o){switch(n){case 0:Hg(e,t,a);break;case 1:Vg(e,t,a,o);break;case 2:Gg(e,t,s,a);break;case 3:Yg(e,t,s,a,o);break;case 4:Kg(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const f5=new Uint16Array([255]),p5=new Uint8Array(f5.buffer),m5=p5[0]===255;function g5(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*a,f=new Uint8Array(s*t*d);let p=0;for(let v=0;v<7;v++){const _=u[v],S=Math.ceil((t-_.x)/_.xStep),y=Math.ceil((s-_.y)/_.yStep);if(S<=0||y<=0)continue;const E=S*d,C=new Uint8Array(E);for(let L=0;L<y;L++){const A=e[p++],J=e.subarray(p,p+E);p+=E;const B=new Uint8Array(E);h5(A,J,B,C,E,d),C.set(B);for(let $=0;$<S;$++){const oe=_.x+$*_.xStep,de=_.y+L*_.yStep;if(!(oe>=t||de>=s))for(let H=0;H<d;H++)f[(de*t+oe)*d+H]=B[$*d+H]}}}if(o===16){const v=new Uint16Array(f.buffer);if(m5)for(let _=0;_<v.length;_++)v[_]=v5(v[_]);return v}else return f}function v5(n){return(n&255)<<8|n>>8&255}const x5=new Uint16Array([255]),y5=new Uint8Array(x5.buffer),b5=y5[0]===255,w5=new Uint8Array(0);function bm(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,d=Math.ceil(o/8*a*t),f=new Uint8Array(s*d);let p=w5,v=0,_,S;for(let y=0;y<s;y++){switch(_=e.subarray(v+1,v+1+d),S=f.subarray(y*d,(y+1)*d),e[v]){case 0:Hg(_,S,d);break;case 1:Vg(_,S,d,u);break;case 2:Gg(_,S,p,d);break;case 3:Yg(_,S,p,d,u);break;case 4:Kg(_,S,p,d,u);break;default:throw new Error(`Unsupported filter: ${e[v]}`)}p=S,v+=d+1}if(o===16){const y=new Uint16Array(f.buffer);if(b5)for(let E=0;E<y.length;E++)y[E]=_5(y[E]);return y}else return f}function _5(n){return(n&255)<<8|n>>8&255}const bd=Uint8Array.of(137,80,78,71,13,10,26,10);function wm(n){if(!N5(n.readBytes(bd.length)))throw new Error("wrong PNG signature")}function N5(n){if(n.length<bd.length)return!1;for(let e=0;e<bd.length;e++)if(n[e]!==bd[e])return!1;return!0}const k5="tEXt",S5=0,Jg=new TextDecoder("latin1");function j5(n){if(C5(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const A5=/^[\u0000-\u00FF]*$/;function C5(n){if(!A5.test(n))throw new Error("invalid latin1 text")}function P5(n,e,t){const s=Xg(e);n[s]=E5(e,t-s.length-1)}function Xg(n){for(n.mark();n.readByte()!==S5;);const e=n.offset;n.reset();const t=Jg.decode(n.readBytes(e-n.offset-1));return n.skip(1),j5(t),t}function E5(n,e){return Jg.decode(n.readBytes(e))}const vi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Jh={UNKNOWN:-1,DEFLATE:0},_m={UNKNOWN:-1,ADAPTIVE:0},Xh={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},pd={NONE:0,BACKGROUND:1,PREVIOUS:2},Qh={SOURCE:0,OVER:1};class L5 extends Hf{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new vm,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Jh.UNKNOWN,this._filterMethod=_m.UNKNOWN,this._interlaceMethod=Xh.UNKNOWN,this._colorType=vi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(wm(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(wm(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case k5:P5(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ym(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ym(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=T5(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case vi.GREYSCALE:s=1;break;case vi.TRUECOLOUR:s=3;break;case vi.INDEXED_COLOUR:s=1;break;case vi.GREYSCALE_ALPHA:s=2;break;case vi.TRUECOLOUR_ALPHA:s=4;break;case vi.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Jh.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case vi.GREYSCALE:case vi.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case vi.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case vi.UNKNOWN:case vi.GREYSCALE_ALPHA:case vi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=Xg(this),s=this.readUint8();if(s!==Jh.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:l5(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=bm({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case pd.NONE:break;case pd.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[u+d]=0}break;case pd.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:d,frameIndex:f}};switch(t.blendOp){case Qh.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++)e.data[d+p]=t.data[f+p]}break;case Qh.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=a(o,u);for(let p=0;p<this._png.channels;p++){const v=t.data[f+this._png.channels-1]/s,_=p%(this._png.channels-1)===0?1:t.data[f+p],S=Math.floor(v*_+(1-v)*e.data[d+p]);e.data[d+p]+=S}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==_m.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Xh.NO_INTERLACE)this._png.data=bm({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Xh.ADAM7)this._png.data=g5({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:pd.NONE,blendOp:Qh.SOURCE,data:e}),this._inflator=new vm,this._writingDataChunks=!1}}function T5(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Nm;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Nm||(Nm={}));function O5(n,e){return new L5(n,e).decode()}var Vt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Zh(){Vt.console&&typeof Vt.console.log=="function"&&Vt.console.log.apply(Vt.console,arguments)}var Fr={log:Zh,warn:function(n){Vt.console&&(typeof Vt.console.warn=="function"?Vt.console.warn.apply(Vt.console,arguments):Zh.call(null,arguments))},error:function(n){Vt.console&&(typeof Vt.console.error=="function"?Vt.console.error.apply(Vt.console,arguments):Zh(n))}};function ef(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){Cl(s.response,e,t)},s.onerror=function(){Fr.error("could not download file")},s.send()}function km(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function md(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Cl=Vt.saveAs||((typeof window>"u"?"undefined":Ar(window))!=="object"||window!==Vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=Vt.URL||Vt.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?km(a.href)?ef(n,e,t):md(a,a.target="_blank"):md(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){md(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(km(n))ef(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){md(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Ar(o)!=="object"&&(Fr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return ef(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(Vt.HTMLElement)||Vt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Ar(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var v=d.result;v=u?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=v:location=v,s=null},d.readAsDataURL(n)}else{var f=Vt.URL||Vt.webkitURL,p=f.createObjectURL(n);s?s.location=p:location.href=p,s=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});function Qg(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+d+f+p}}var wd=Vt.atob.bind(Vt),Sm=Vt.btoa.bind(Vt);function tf(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=ks(t,s,a,o,e[0],7,-680876936),o=ks(o,t,s,a,e[1],12,-389564586),a=ks(a,o,t,s,e[2],17,606105819),s=ks(s,a,o,t,e[3],22,-1044525330),t=ks(t,s,a,o,e[4],7,-176418897),o=ks(o,t,s,a,e[5],12,1200080426),a=ks(a,o,t,s,e[6],17,-1473231341),s=ks(s,a,o,t,e[7],22,-45705983),t=ks(t,s,a,o,e[8],7,1770035416),o=ks(o,t,s,a,e[9],12,-1958414417),a=ks(a,o,t,s,e[10],17,-42063),s=ks(s,a,o,t,e[11],22,-1990404162),t=ks(t,s,a,o,e[12],7,1804603682),o=ks(o,t,s,a,e[13],12,-40341101),a=ks(a,o,t,s,e[14],17,-1502002290),t=Ss(t,s=ks(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Ss(o,t,s,a,e[6],9,-1069501632),a=Ss(a,o,t,s,e[11],14,643717713),s=Ss(s,a,o,t,e[0],20,-373897302),t=Ss(t,s,a,o,e[5],5,-701558691),o=Ss(o,t,s,a,e[10],9,38016083),a=Ss(a,o,t,s,e[15],14,-660478335),s=Ss(s,a,o,t,e[4],20,-405537848),t=Ss(t,s,a,o,e[9],5,568446438),o=Ss(o,t,s,a,e[14],9,-1019803690),a=Ss(a,o,t,s,e[3],14,-187363961),s=Ss(s,a,o,t,e[8],20,1163531501),t=Ss(t,s,a,o,e[13],5,-1444681467),o=Ss(o,t,s,a,e[2],9,-51403784),a=Ss(a,o,t,s,e[7],14,1735328473),t=js(t,s=Ss(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=js(o,t,s,a,e[8],11,-2022574463),a=js(a,o,t,s,e[11],16,1839030562),s=js(s,a,o,t,e[14],23,-35309556),t=js(t,s,a,o,e[1],4,-1530992060),o=js(o,t,s,a,e[4],11,1272893353),a=js(a,o,t,s,e[7],16,-155497632),s=js(s,a,o,t,e[10],23,-1094730640),t=js(t,s,a,o,e[13],4,681279174),o=js(o,t,s,a,e[0],11,-358537222),a=js(a,o,t,s,e[3],16,-722521979),s=js(s,a,o,t,e[6],23,76029189),t=js(t,s,a,o,e[9],4,-640364487),o=js(o,t,s,a,e[12],11,-421815835),a=js(a,o,t,s,e[15],16,530742520),t=As(t,s=js(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=As(o,t,s,a,e[7],10,1126891415),a=As(a,o,t,s,e[14],15,-1416354905),s=As(s,a,o,t,e[5],21,-57434055),t=As(t,s,a,o,e[12],6,1700485571),o=As(o,t,s,a,e[3],10,-1894986606),a=As(a,o,t,s,e[10],15,-1051523),s=As(s,a,o,t,e[1],21,-2054922799),t=As(t,s,a,o,e[8],6,1873313359),o=As(o,t,s,a,e[15],10,-30611744),a=As(a,o,t,s,e[6],15,-1560198380),s=As(s,a,o,t,e[13],21,1309151649),t=As(t,s,a,o,e[4],6,-145523070),o=As(o,t,s,a,e[11],10,-1120210379),a=As(a,o,t,s,e[2],15,718787259),s=As(s,a,o,t,e[9],21,-343485551),n[0]=Zo(t,n[0]),n[1]=Zo(s,n[1]),n[2]=Zo(a,n[2]),n[3]=Zo(o,n[3])}function Bd(n,e,t,s,a,o){return e=Zo(Zo(e,n),Zo(s,o)),Zo(e<<a|e>>>32-a,t)}function ks(n,e,t,s,a,o,u){return Bd(e&t|~e&s,n,e,a,o,u)}function Ss(n,e,t,s,a,o,u){return Bd(e&s|t&~s,n,e,a,o,u)}function js(n,e,t,s,a,o,u){return Bd(e^t^s,n,e,a,o,u)}function As(n,e,t,s,a,o,u){return Bd(t^(e|~s),n,e,a,o,u)}function Zg(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)tf(s,I5(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(tf(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,tf(s,a),s}function I5(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var jm="0123456789abcdef".split("");function D5(n){for(var e="",t=0;t<4;t++)e+=jm[n>>8*t+4&15]+jm[n>>8*t&15];return e}function R5(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Pf(n){return Zg(n).map(R5).join("")}var F5=(function(n){for(var e=0;e<n.length;e++)n[e]=D5(n[e]);return n.join("")})(Zg("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zo(n,e){if(F5){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Ef(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),d=[],f=0;f<256;f++)d[f]=f;var p=0;for(f=0;f<256;f++){var v=d[f];p=(p+v+u.charCodeAt(f))%256,d[f]=d[p],d[p]=v}t=n,s=d}else d=s;var _=e.length,S=0,y=0,E="";for(f=0;f<_;f++)y=(y+(v=d[S=(S+1)%256]))%256,d[S]=d[y],d[y]=v,u=d[(d[S]+d[y])%256],E+=String.fromCharCode(e.charCodeAt(f)^u);return E}var Am={print:4,modify:8,copy:16,"annot-forms":32};function Sc(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(d){if(Am.perm!==void 0)throw new Error("Invalid permission: "+d);a+=Am[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Pf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Ef(this.encryptionKey,this.padding)}function jc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function Cm(n){if(Ar(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(d){Vt.console&&Fr.error("jsPDF PubSub Error",d.message,d)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Id(n){if(!(this instanceof Id))return new Id(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function e1(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ll(n,e,t,s,a){if(!(this instanceof Ll))return new Ll(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,e1.call(this,s,a)}function Ac(n,e,t,s,a){if(!(this instanceof Ac))return new Ac(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,e1.call(this,s,a)}function Et(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],d=1,f=16,p="S",v=null;Ar(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(v=n.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),p=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var _=n.putOnlyUsedFonts||!1,S={},y={internal:{},__private__:{}};y.__private__.PubSub=Cm;var E="1.3",C=y.__private__.getPdfVersion=function(){return E};y.__private__.setPdfVersion=function(x){E=x};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return L};var A=y.__private__.getPageFormat=function(x){return L[x]};a=a||"a4";var J="compat",B="advanced",$=J;function oe(){this.saveGraphicsState(),Z(new Pt(Ft,0,0,-Ft,0,vt()*Ft).toString()+" cm"),this.setFontSize(this.getFontSize()/Ft),p="n",$=B}function de(){this.restoreGraphicsState(),p="S",$=J}var H=y.__private__.combineFontStyleAndFontWeight=function(x,T){if(x=="bold"&&T=="normal"||x=="bold"&&T==400||x=="normal"&&T=="italic"||x=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(x=T==400||T==="normal"?x==="italic"?"italic":"normal":T!=700&&T!=="bold"||x!=="normal"?(T==700?"bold":T)+""+x:"bold"),x};y.advancedAPI=function(x){var T=$===J;return T&&oe.call(this),typeof x!="function"||(x(this),T&&de.call(this)),this},y.compatAPI=function(x){var T=$===B;return T&&de.call(this),typeof x!="function"||(x(this),T&&oe.call(this)),this},y.isAdvancedAPI=function(){return $===B};var Y,D=function(x){if($!==B)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},se=y.roundToPrecision=y.__private__.roundToPrecision=function(x,T){var Q=e||T;if(isNaN(x)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(Q).replace(/0+$/,"")};Y=y.hpf=y.__private__.hpf=typeof f=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return se(x,f)}:f==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return se(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return se(x,16)};var I=y.f2=y.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return se(x,2)},R=y.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return se(x,3)},re=y.scale=y.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return $===J?x*Ft:$===B?x:void 0},W=function(x){return re((function(T){return $===J?vt()-T:$===B?T:void 0})(x))};y.__private__.setPrecision=y.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ie,fe="00000000000000000000000000000000",ee=y.__private__.getFileId=function(){return fe},z=y.__private__.setFileId=function(x){return fe=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Xr=new Sc(v.userPermissions,v.userPassword,v.ownerPassword,fe)),fe};y.setFileId=function(x){return z(x),this},y.getFileId=function(){return ee()};var le=y.__private__.convertDateToPDFDate=function(x){var T=x.getTimezoneOffset(),Q=T<0?"+":"-",pe=Math.floor(Math.abs(T/60)),ke=Math.abs(T%60),Me=[Q,X(pe),"'",X(ke),"'"].join("");return["D:",x.getFullYear(),X(x.getMonth()+1),X(x.getDate()),X(x.getHours()),X(x.getMinutes()),X(x.getSeconds()),Me].join("")},be=y.__private__.convertPDFDateToDate=function(x){var T=parseInt(x.substr(2,4),10),Q=parseInt(x.substr(6,2),10)-1,pe=parseInt(x.substr(8,2),10),ke=parseInt(x.substr(10,2),10),Me=parseInt(x.substr(12,2),10),$e=parseInt(x.substr(14,2),10);return new Date(T,Q,pe,ke,Me,$e,0)},V=y.__private__.setCreationDate=function(x){var T;if(x===void 0&&(x=new Date),x instanceof Date)T=le(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=x}return ie=T},j=y.__private__.getCreationDate=function(x){var T=ie;return x==="jsDate"&&(T=be(ie)),T};y.setCreationDate=function(x){return V(x),this},y.getCreationDate=function(x){return j(x)};var q,X=y.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},ae=y.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ue=0,ye=[],he=[],Se=0,Ce=[],ze=[],Ie=!1,Ge=he;y.__private__.setCustomOutputDestination=function(x){Ie=!0,Ge=x};var st=function(x){Ie||(Ge=x)};y.__private__.resetCustomOutputDestination=function(){Ie=!1,Ge=he};var Z=y.__private__.out=function(x){return x=x.toString(),Se+=x.length+1,Ge.push(x),Ge},Qe=y.__private__.write=function(x){return Z(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},It=y.__private__.getArrayBuffer=function(x){for(var T=x.length,Q=new ArrayBuffer(T),pe=new Uint8Array(Q);T--;)pe[T]=x.charCodeAt(T);return Q},St=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return St};var We=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(x){return We=$===B?x/Ft:x,this};var _t,rt=y.__private__.getFontSize=y.getFontSize=function(){return $===J?We:We*Ft},ut=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(x){return ut=x,this},y.__private__.getR2L=y.getR2L=function(){return ut};var tt,ur=y.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))_t=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');_t=x}else _t=parseInt(x,10)};y.__private__.getZoomMode=function(){return _t};var Qt,Wt=y.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');tt=x};y.__private__.getPageMode=function(){return tt};var Zt=y.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');Qt=x};y.__private__.getLayoutMode=function(){return Qt},y.__private__.setDisplayMode=y.setDisplayMode=function(x,T,Q){return ur(x),Zt(T),Wt(Q),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(x){if(Object.keys(Dt).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[x]},y.__private__.getDocumentProperties=function(){return Dt},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(x){for(var T in Dt)Dt.hasOwnProperty(T)&&x[T]&&(Dt[T]=x[T]);return this},y.__private__.setDocumentProperty=function(x,T){if(Object.keys(Dt).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[x]=T};var mt,Ft,ct,Br,er,Ct={},Gt={},br=[],jt={},hr={},Lt={},qt={},dr=null,$t=0,Tt=[],lr=new Cm(y),ti=n.hotfixes||[],Ur={},$n={},In=[],Pt=function x(T,Q,pe,ke,Me,$e){if(!(this instanceof x))return new x(T,Q,pe,ke,Me,$e);isNaN(T)&&(T=1),isNaN(Q)&&(Q=0),isNaN(pe)&&(pe=0),isNaN(ke)&&(ke=1),isNaN(Me)&&(Me=0),isNaN($e)&&($e=0),this._matrix=[T,Q,pe,ke,Me,$e]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(x)},Pt.prototype.multiply=function(x){var T=x.sx*this.sx+x.shy*this.shx,Q=x.sx*this.shy+x.shy*this.sy,pe=x.shx*this.sx+x.sy*this.shx,ke=x.shx*this.shy+x.sy*this.sy,Me=x.tx*this.sx+x.ty*this.shx+this.tx,$e=x.tx*this.shy+x.ty*this.sy+this.ty;return new Pt(T,Q,pe,ke,Me,$e)},Pt.prototype.decompose=function(){var x=this.sx,T=this.shy,Q=this.shx,pe=this.sy,ke=this.tx,Me=this.ty,$e=Math.sqrt(x*x+T*T),ft=(x/=$e)*Q+(T/=$e)*pe;Q-=x*ft,pe-=T*ft;var bt=Math.sqrt(Q*Q+pe*pe);return ft/=bt,x*(pe/=bt)<T*(Q/=bt)&&(x=-x,T=-T,ft=-ft,$e=-$e),{scale:new Pt($e,0,0,bt,0,0),translate:new Pt(1,0,0,1,ke,Me),rotate:new Pt(x,T,-T,x,0,0),skew:new Pt(1,0,ft,1,0,0)}},Pt.prototype.toString=function(x){return this.join(" ")},Pt.prototype.inversed=function(){var x=this.sx,T=this.shy,Q=this.shx,pe=this.sy,ke=this.tx,Me=this.ty,$e=1/(x*pe-T*Q),ft=pe*$e,bt=-T*$e,it=-Q*$e,Je=x*$e;return new Pt(ft,bt,it,Je,-ft*ke-it*Me,-bt*ke-Je*Me)},Pt.prototype.applyToPoint=function(x){var T=x.x*this.sx+x.y*this.shx+this.tx,Q=x.x*this.shy+x.y*this.sy+this.ty;return new xn(T,Q)},Pt.prototype.applyToRectangle=function(x){var T=this.applyToPoint(x),Q=this.applyToPoint(new xn(x.x+x.w,x.y+x.h));return new P(T.x,T.y,Q.x-T.x,Q.y-T.y)},Pt.prototype.clone=function(){var x=this.sx,T=this.shy,Q=this.shx,pe=this.sy,ke=this.tx,Me=this.ty;return new Pt(x,T,Q,pe,ke,Me)},y.Matrix=Pt;var ss=y.matrixMult=function(x,T){return T.multiply(x)},is=new Pt(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=is;var Tr=function(x,T){if(!hr[x]){var Q=(T instanceof Ll?"Sh":"P")+(Object.keys(jt).length+1).toString(10);T.id=Q,hr[x]=Q,jt[Q]=T,lr.publish("addPattern",T)}};y.ShadingPattern=Ll,y.TilingPattern=Ac,y.addShadingPattern=function(x,T){return D("addShadingPattern()"),Tr(x,T),this},y.beginTilingPattern=function(x){D("beginTilingPattern()"),Ne(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},y.endTilingPattern=function(x,T){D("endTilingPattern()"),T.stream=ze[q].join(`
`),Tr(x,T),lr.publish("endTilingPattern",T),In.pop().restore()};var Sn,xr=y.__private__.newObject=function(){var x=Dr();return qr(x,!0),x},Dr=y.__private__.newObjectDeferred=function(){return ue++,ye[ue]=function(){return Se},ue},qr=function(x,T){return T=typeof T=="boolean"&&T,ye[x]=Se,T&&Z(x+" 0 obj"),x},Cs=y.__private__.newAdditionalObject=function(){var x={objId:Dr(),content:""};return Ce.push(x),x},wi=Dr(),as=Dr(),ri=y.__private__.decodeColorString=function(x){var T=x.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length!==5||T[4]!=="k"&&T[4]!=="K"||(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var Q=parseFloat(T[0]);T=[Q,Q,Q,"r"]}for(var pe="#",ke=0;ke<3;ke++)pe+=("0"+Math.floor(255*parseFloat(T[ke])).toString(16)).slice(-2);return pe},dn=y.__private__.encodeColorString=function(x){var T;typeof x=="string"&&(x={ch1:x});var Q=x.ch1,pe=x.ch2,ke=x.ch3,Me=x.ch4,$e=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var ft=new Qg(Q);if(ft.ok)Q=ft.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var bt=parseInt(Q.substr(1),16);Q=bt>>16&255,pe=bt>>8&255,ke=255&bt}if(pe===void 0||Me===void 0&&Q===pe&&pe===ke)T=typeof Q=="string"?Q+" "+$e[0]:x.precision===2?I(Q/255)+" "+$e[0]:R(Q/255)+" "+$e[0];else if(Me===void 0||Ar(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return["1.","1.","1.",$e[1]].join(" ");T=typeof Q=="string"?[Q,pe,ke,$e[1]].join(" "):x.precision===2?[I(Q/255),I(pe/255),I(ke/255),$e[1]].join(" "):[R(Q/255),R(pe/255),R(ke/255),$e[1]].join(" ")}else T=typeof Q=="string"?[Q,pe,ke,Me,$e[2]].join(" "):x.precision===2?[I(Q),I(pe),I(ke),I(Me),$e[2]].join(" "):[R(Q),R(pe),R(ke),R(Me),$e[2]].join(" ");return T},Gr=y.__private__.getFilters=function(){return u},Dn=y.__private__.putStream=function(x){var T=(x=x||{}).data||"",Q=x.filters||Gr(),pe=x.alreadyAppliedFilters||[],ke=x.addLength1||!1,Me=T.length,$e=x.objectId,ft=function(fr){return fr};if(v!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(ft=Xr.encryptor($e,0));var bt={};Q===!0&&(Q=["FlateEncode"]);var it=x.additionalKeyValues||[],Je=(bt=Et.API.processDataByFilters!==void 0?Et.API.processDataByFilters(T,Q):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(bt.data.length!==0&&(it.push({key:"Length",value:bt.data.length}),ke===!0&&it.push({key:"Length1",value:Me})),Je.length!=0)if(Je.split("/").length-1==1)it.push({key:"Filter",value:Je});else{it.push({key:"Filter",value:"["+Je+"]"});for(var Ot=0;Ot<it.length;Ot+=1)if(it[Ot].key==="DecodeParms"){for(var tr=[],_r=0;_r<bt.reverseChain.split("/").length-1;_r+=1)tr.push("null");tr.push(it[Ot].value),it[Ot].value="["+tr.join(" ")+"]"}}Z("<<");for(var nr=0;nr<it.length;nr++)Z("/"+it[nr].key+" "+it[nr].value);Z(">>"),bt.data.length!==0&&(Z("stream"),Z(ft(bt.data)),Z("endstream"))},Ui=y.__private__.putPage=function(x){var T=x.number,Q=x.data,pe=x.objId,ke=x.contentsObjId;qr(pe,!0),Z("<</Type /Page"),Z("/Parent "+x.rootDictionaryObjId+" 0 R"),Z("/Resources "+x.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(Y(x.mediaBox.bottomLeftX))+" "+parseFloat(Y(x.mediaBox.bottomLeftY))+" "+Y(x.mediaBox.topRightX)+" "+Y(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&Z("/CropBox ["+Y(x.cropBox.bottomLeftX)+" "+Y(x.cropBox.bottomLeftY)+" "+Y(x.cropBox.topRightX)+" "+Y(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&Z("/BleedBox ["+Y(x.bleedBox.bottomLeftX)+" "+Y(x.bleedBox.bottomLeftY)+" "+Y(x.bleedBox.topRightX)+" "+Y(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&Z("/TrimBox ["+Y(x.trimBox.bottomLeftX)+" "+Y(x.trimBox.bottomLeftY)+" "+Y(x.trimBox.topRightX)+" "+Y(x.trimBox.topRightY)+"]"),x.artBox!==null&&Z("/ArtBox ["+Y(x.artBox.bottomLeftX)+" "+Y(x.artBox.bottomLeftY)+" "+Y(x.artBox.topRightX)+" "+Y(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&Z("/UserUnit "+x.userUnit),lr.publish("putPage",{objId:pe,pageContext:Tt[T],pageNumber:T,page:Q}),Z("/Contents "+ke+" 0 R"),Z(">>"),Z("endobj");var Me=Q.join(`
`);return $===B&&(Me+=`
Q`),qr(ke,!0),Dn({data:Me,filters:Gr(),objectId:ke}),Z("endobj"),pe},Wn=y.__private__.putPages=function(){var x,T,Q=[];for(x=1;x<=$t;x++)Tt[x].objId=Dr(),Tt[x].contentsObjId=Dr();for(x=1;x<=$t;x++)Q.push(Ui({number:x,data:ze[x],objId:Tt[x].objId,contentsObjId:Tt[x].contentsObjId,mediaBox:Tt[x].mediaBox,cropBox:Tt[x].cropBox,bleedBox:Tt[x].bleedBox,trimBox:Tt[x].trimBox,artBox:Tt[x].artBox,userUnit:Tt[x].userUnit,rootDictionaryObjId:wi,resourceDictionaryObjId:as}));qr(wi,!0),Z("<</Type /Pages");var pe="/Kids [";for(T=0;T<$t;T++)pe+=Q[T]+" 0 R ";Z(pe+"]"),Z("/Count "+$t),Z(">>"),Z("endobj"),lr.publish("postPutPages")},_i=function(x){lr.publish("putFont",{font:x,out:Z,newObject:xr,putStream:Dn}),x.isAlreadyPutted!==!0&&(x.objectNumber=xr(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+jc(x.postScriptName)),Z("/Subtype /Type1"),typeof x.encoding=="string"&&Z("/Encoding /"+x.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},ps=function(x){x.objectNumber=xr();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[Y(x.x),Y(x.y),Y(x.x+x.width),Y(x.y+x.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var Q=x.pages[1].join(`
`);Dn({data:Q,additionalKeyValues:T,objectId:x.objectNumber}),Z("endobj")},Ni=function(x,T){T||(T=21);var Q=xr(),pe=(function($e,ft){var bt,it=[],Je=1/(ft-1);for(bt=0;bt<1;bt+=Je)it.push(bt);if(it.push(1),$e[0].offset!=0){var Ot={offset:0,color:$e[0].color};$e.unshift(Ot)}if($e[$e.length-1].offset!=1){var tr={offset:1,color:$e[$e.length-1].color};$e.push(tr)}for(var _r="",nr=0,fr=0;fr<it.length;fr++){for(bt=it[fr];bt>$e[nr+1].offset;)nr++;var Or=$e[nr].offset,Fn=(bt-Or)/($e[nr+1].offset-Or),Gi=$e[nr].color,oi=$e[nr+1].color;_r+=ae(Math.round((1-Fn)*Gi[0]+Fn*oi[0]).toString(16))+ae(Math.round((1-Fn)*Gi[1]+Fn*oi[1]).toString(16))+ae(Math.round((1-Fn)*Gi[2]+Fn*oi[2]).toString(16))}return _r.trim()})(x.colors,T),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+T+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Dn({data:pe,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),Z("endobj"),x.objectNumber=xr(),Z("<< /ShadingType "+x.type),Z("/ColorSpace /DeviceRGB");var Me="/Coords ["+Y(parseFloat(x.coords[0]))+" "+Y(parseFloat(x.coords[1]))+" ";x.type===2?Me+=Y(parseFloat(x.coords[2]))+" "+Y(parseFloat(x.coords[3])):Me+=Y(parseFloat(x.coords[2]))+" "+Y(parseFloat(x.coords[3]))+" "+Y(parseFloat(x.coords[4]))+" "+Y(parseFloat(x.coords[5])),Z(Me+="]"),x.matrix&&Z("/Matrix ["+x.matrix.toString()+"]"),Z("/Function "+Q+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},ni=function(x,T){var Q=Dr(),pe=xr();T.push({resourcesOid:Q,objectOid:pe}),x.objectNumber=pe;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+x.boundingBox.map(Y).join(" ")+"]"}),ke.push({key:"XStep",value:Y(x.xStep)}),ke.push({key:"YStep",value:Y(x.yStep)}),ke.push({key:"Resources",value:Q+" 0 R"}),x.matrix&&ke.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),Dn({data:x.stream,additionalKeyValues:ke,objectId:x.objectNumber}),Z("endobj")},ki=function(x){for(var T in x.objectNumber=xr(),Z("<<"),x)switch(T){case"opacity":Z("/ca "+I(x[T]));break;case"stroke-opacity":Z("/CA "+I(x[T]))}Z(">>"),Z("endobj")},wr=function(x){qr(x.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var T in Z("/Font <<"),Ct)Ct.hasOwnProperty(T)&&(_===!1||_===!0&&S.hasOwnProperty(T))&&Z("/"+T+" "+Ct[T].objectNumber+" 0 R");Z(">>")})(),(function(){if(Object.keys(jt).length>0){for(var T in Z("/Shading <<"),jt)jt.hasOwnProperty(T)&&jt[T]instanceof Ll&&jt[T].objectNumber>=0&&Z("/"+T+" "+jt[T].objectNumber+" 0 R");lr.publish("putShadingPatternDict"),Z(">>")}})(),(function(T){if(Object.keys(jt).length>0){for(var Q in Z("/Pattern <<"),jt)jt.hasOwnProperty(Q)&&jt[Q]instanceof y.TilingPattern&&jt[Q].objectNumber>=0&&jt[Q].objectNumber<T&&Z("/"+Q+" "+jt[Q].objectNumber+" 0 R");lr.publish("putTilingPatternDict"),Z(">>")}})(x.objectOid),(function(){if(Object.keys(Lt).length>0){var T;for(T in Z("/ExtGState <<"),Lt)Lt.hasOwnProperty(T)&&Lt[T].objectNumber>=0&&Z("/"+T+" "+Lt[T].objectNumber+" 0 R");lr.publish("putGStateDict"),Z(">>")}})(),(function(){for(var T in Z("/XObject <<"),Ur)Ur.hasOwnProperty(T)&&Ur[T].objectNumber>=0&&Z("/"+T+" "+Ur[T].objectNumber+" 0 R");lr.publish("putXobjectDict"),Z(">>")})(),Z(">>"),Z("endobj")},Bs=function(x){Gt[x.fontName]=Gt[x.fontName]||{},Gt[x.fontName][x.fontStyle]=x.id},qi=function(x,T,Q,pe,ke){var Me={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:x,fontName:T,fontStyle:Q,encoding:pe,isStandardFont:ke||!1,metadata:{}};return lr.publish("addFont",{font:Me,instance:this}),Ct[Me.id]=Me,Bs(Me),Me.id},Hn=y.__private__.pdfEscape=y.pdfEscape=function(x,T){return(function(Q,pe){var ke,Me,$e,ft,bt,it,Je,Ot,tr;if($e=(pe=pe||{}).sourceEncoding||"Unicode",bt=pe.outputEncoding,(pe.autoencode||bt)&&Ct[mt].metadata&&Ct[mt].metadata[$e]&&Ct[mt].metadata[$e].encoding&&(ft=Ct[mt].metadata[$e].encoding,!bt&&Ct[mt].encoding&&(bt=Ct[mt].encoding),!bt&&ft.codePages&&(bt=ft.codePages[0]),typeof bt=="string"&&(bt=ft[bt]),bt)){for(Je=!1,it=[],ke=0,Me=Q.length;ke<Me;ke++)(Ot=bt[Q.charCodeAt(ke)])?it.push(String.fromCharCode(Ot)):it.push(Q[ke]),it[ke].charCodeAt(0)>>8&&(Je=!0);Q=it.join("")}for(ke=Q.length;Je===void 0&&ke!==0;)Q.charCodeAt(ke-1)>>8&&(Je=!0),ke--;if(!Je)return Q;for(it=pe.noBOM?[]:[254,255],ke=0,Me=Q.length;ke<Me;ke++){if((tr=(Ot=Q.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");it.push(tr),it.push(Ot-(tr<<8))}return String.fromCharCode.apply(void 0,it)})(x,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ps=y.__private__.beginPage=function(x){ze[++$t]=[],Tt[$t]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},Si($t),st(ze[q])},Ua=function(x,T){var Q,pe,ke;switch(t=T||t,typeof x=="string"&&(Q=A(x.toLowerCase()),Array.isArray(Q)&&(pe=Q[0],ke=Q[1])),Array.isArray(x)&&(pe=x[0]*Ft,ke=x[1]*Ft),isNaN(pe)&&(pe=a[0],ke=a[1]),(pe>14400||ke>14400)&&(Fr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),ke=Math.min(14400,ke)),a=[pe,ke],t.substr(0,1)){case"l":ke>pe&&(a=[ke,pe]);break;case"p":pe>ke&&(a=[ke,pe])}Ps(a),Rt(ms),Z(ya),Ya!==0&&Z(Ya+" J"),Ls!==0&&Z(Ls+" j"),lr.publish("addPage",{pageNumber:$t})},ma=function(x){x>0&&x<=$t&&(ze.splice(x,1),Tt.splice(x,1),$t--,q>$t&&(q=$t),this.setPage(q))},Si=function(x){x>0&&x<=$t&&(q=x)},os=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return ze.length-1},qa=function(x,T,Q){var pe,ke=void 0;return Q=Q||{},x=x!==void 0?x:Ct[mt].fontName,T=T!==void 0?T:Ct[mt].fontStyle,pe=x.toLowerCase(),Gt[pe]!==void 0&&Gt[pe][T]!==void 0?ke=Gt[pe][T]:Gt[x]!==void 0&&Gt[x][T]!==void 0?ke=Gt[x][T]:Q.disableWarning===!1&&Fr.warn("Unable to look up font label for font '"+x+"', '"+T+"'. Refer to getFontList() for available fonts."),ke||Q.noFallback||(ke=Gt.times[T])==null&&(ke=Gt.times.normal),ke},Yr=y.__private__.putInfo=function(){var x=xr(),T=function(pe){return pe};for(var Q in v!==null&&(T=Xr.encryptor(x,0)),Z("<<"),Z("/Producer ("+Hn(T("jsPDF "+Et.version))+")"),Dt)Dt.hasOwnProperty(Q)&&Dt[Q]&&Z("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+Hn(T(Dt[Q]))+")");Z("/CreationDate ("+Hn(T(ie))+")"),Z(">>"),Z("endobj")},ga=y.__private__.putCatalog=function(x){var T=(x=x||{}).rootDictionaryObjId||wi;switch(xr(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+T+" 0 R"),_t||(_t="fullwidth"),_t){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+_t;Q.substr(Q.length-1)==="%"&&(_t=parseInt(_t)/100),typeof _t=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+I(_t)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}tt&&Z("/PageMode /"+tt),lr.publish("putCatalog"),Z(">>"),Z("endobj")},Ul=y.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(ue+1)),Z("/Root "+ue+" 0 R"),Z("/Info "+(ue-1)+" 0 R"),v!==null&&Z("/Encrypt "+Xr.oid+" 0 R"),Z("/ID [ <"+fe+"> <"+fe+"> ]"),Z(">>")},zr=y.__private__.putHeader=function(){Z("%PDF-"+E),Z("%")},si=y.__private__.putXRef=function(){var x="0000000000";Z("xref"),Z("0 "+(ue+1)),Z("0000000000 65535 f ");for(var T=1;T<=ue;T++)typeof ye[T]=="function"?Z((x+ye[T]()).slice(-10)+" 00000 n "):ye[T]!==void 0?Z((x+ye[T]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},Vn=y.__private__.buildDocument=function(){var x;ue=0,Se=0,he=[],ye=[],Ce=[],wi=Dr(),as=Dr(),st(he),lr.publish("buildDocument"),zr(),Wn(),(function(){lr.publish("putAdditionalObjects");for(var Q=0;Q<Ce.length;Q++){var pe=Ce[Q];qr(pe.objId,!0),Z(pe.content),Z("endobj")}lr.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var Q in Ct)Ct.hasOwnProperty(Q)&&(_===!1||_===!0&&S.hasOwnProperty(Q))&&_i(Ct[Q])})(),(function(){var Q;for(Q in Lt)Lt.hasOwnProperty(Q)&&ki(Lt[Q])})(),(function(){for(var Q in Ur)Ur.hasOwnProperty(Q)&&ps(Ur[Q])})(),(function(Q){var pe;for(pe in jt)jt.hasOwnProperty(pe)&&(jt[pe]instanceof Ll?Ni(jt[pe]):jt[pe]instanceof Ac&&ni(jt[pe],Q))})(x),lr.publish("putResources"),x.forEach(wr),wr({resourcesOid:as,objectOid:Number.MAX_SAFE_INTEGER}),lr.publish("postPutResources"),v!==null&&(Xr.oid=xr(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Xr.v),Z("/R "+Xr.r),Z("/U <"+Xr.toHexString(Xr.U)+">"),Z("/O <"+Xr.toHexString(Xr.O)+">"),Z("/P "+Xr.P),Z(">>"),Z("endobj")),Yr(),ga();var T=Se;return si(),Ul(),Z("startxref"),Z(""+T),Z("%%EOF"),st(ze[q]),he.join(`
`)},Es=y.__private__.getBlob=function(x){return new Blob([It(x)],{type:"application/pdf"})},ii=y.output=y.__private__.output=(Sn=function(x,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",x){case void 0:return Vn();case"save":y.save(T.filename);break;case"arraybuffer":return It(Vn());case"blob":return Es(Vn());case"bloburi":case"bloburl":if(Vt.URL!==void 0&&typeof Vt.URL.createObjectURL=="function")return Vt.URL&&Vt.URL.createObjectURL(Es(Vn()))||void 0;Fr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",pe=Vn();try{Q=Sm(pe)}catch{Q=Sm(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+T.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(ke=T.pdfObjectUrl,Me="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",ft=Vt.open();return ft!==null&&ft.document.write($e),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',it=Vt.open();if(it!==null){it.document.write(bt);var Je=this;it.document.documentElement.querySelector("#pdfViewer").onload=function(){it.document.title=T.filename,it.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Je.output("bloburl"))}}return it}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',tr=Vt.open();if(tr!==null&&(tr.document.write(Ot),tr.document.title=T.filename),tr||typeof safari>"u")return tr;break;case"datauri":case"dataurl":return Vt.document.location.href=this.output("datauristring",T);default:return null}},Sn.foo=function(){try{return Sn.apply(this,arguments)}catch(Q){var x=Q.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var T="Error in function "+x.split(`
`)[0].split("<")[0]+": "+Q.message;if(!Vt.console)throw new Error(T);Vt.console.error(T,Q),Vt.alert&&alert(T)}},Sn.foo.bar=Sn,Sn.foo),ls=function(x){return Array.isArray(ti)===!0&&ti.indexOf(x)>-1};switch(s){case"pt":Ft=1;break;case"mm":Ft=72/25.4;break;case"cm":Ft=72/2.54;break;case"in":Ft=72;break;case"px":Ft=ls("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ft=12;break;case"ex":Ft=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ft=s}var Xr=null;V(),z();var jn=y.__private__.getPageInfo=y.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[x].objId,pageNumber:x,pageContext:Tt[x]}},za=y.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in Tt)if(Tt[T].objId===x)break;return jn(T)},zi=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Tt[q].objId,pageNumber:q,pageContext:Tt[q]}};y.addPage=function(){return Ua.apply(this,arguments),this},y.setPage=function(){return Si.apply(this,arguments),st.call(this,ze[q]),this},y.insertPage=function(x){return this.addPage(),this.movePage(q,x),this},y.movePage=function(x,T){var Q,pe;if(x>T){Q=ze[x],pe=Tt[x];for(var ke=x;ke>T;ke--)ze[ke]=ze[ke-1],Tt[ke]=Tt[ke-1];ze[T]=Q,Tt[T]=pe,this.setPage(T)}else if(x<T){Q=ze[x],pe=Tt[x];for(var Me=x;Me<T;Me++)ze[Me]=ze[Me+1],Tt[Me]=Tt[Me+1];ze[T]=Q,Tt[T]=pe,this.setPage(T)}return this},y.deletePage=function(){return ma.apply(this,arguments),this},y.__private__.text=y.text=function(x,T,Q,pe,ke){var Me,$e,ft,bt,it,Je,Ot,tr,_r,nr=(pe=pe||{}).scope||this;if(typeof x=="number"&&typeof T=="number"&&(typeof Q=="string"||Array.isArray(Q))){var fr=Q;Q=T,T=x,x=fr}if(arguments[3]instanceof Pt==0?(ft=arguments[4],bt=arguments[5],Ar(Ot=arguments[3])==="object"&&Ot!==null||(typeof ft=="string"&&(bt=ft,ft=null),typeof Ot=="string"&&(bt=Ot,Ot=null),typeof Ot=="number"&&(ft=Ot,Ot=null),pe={flags:Ot,angle:ft,align:bt})):(D("The transform parameter of text() with a Matrix value"),_r=ke),isNaN(T)||isNaN(Q)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return nr;var Or,Fn="",Gi=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:Yn,oi=nr.internal.scaleFactor;function Yi(pr){return pr=pr.split("	").join(Array(pe.TabLen||9).join(" ")),Hn(pr,Ot)}function Ka(pr){for(var kr,Zr=pr.concat(),hn=[],ui=Zr.length;ui--;)typeof(kr=Zr.shift())=="string"?hn.push(kr):Array.isArray(pr)&&(kr.length===1||kr[1]===void 0&&kr[2]===void 0)?hn.push(kr[0]):hn.push([kr[0],kr[1],kr[2]]);return hn}function No(pr,kr){var Zr;if(typeof pr=="string")Zr=kr(pr)[0];else if(Array.isArray(pr)){for(var hn,ui,il=pr.concat(),Co=[],Zi=il.length;Zi--;)typeof(hn=il.shift())=="string"?Co.push(kr(hn)[0]):Array.isArray(hn)&&typeof hn[0]=="string"&&(ui=kr(hn[0],hn[1],hn[2]),Co.push([ui[0],ui[1],ui[2]]));Zr=Co}return Zr}var wa=!1,Ja=!0;if(typeof x=="string")wa=!0;else if(Array.isArray(x)){var _a=x.concat();$e=[];for(var Na,Mn=_a.length;Mn--;)(typeof(Na=_a.shift())!="string"||Array.isArray(Na)&&typeof Na[0]!="string")&&(Ja=!1);wa=Ja}if(wa===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Xa=We/nr.internal.scaleFactor,Qa=Xa*(Gi-1);switch(pe.baseline){case"bottom":Q-=Qa;break;case"top":Q+=Xa-Qa;break;case"hanging":Q+=Xa-2*Qa;break;case"middle":Q+=Xa/2-Qa}if((Je=pe.maxWidth||0)>0&&(typeof x=="string"?x=nr.splitTextToSize(x,Je):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(pr,kr){return pr.concat(nr.splitTextToSize(kr,Je))},[]))),Me={text:x,x:T,y:Q,options:pe,mutex:{pdfEscape:Hn,activeFontKey:mt,fonts:Ct,activeFontSize:We}},lr.publish("preProcessText",Me),x=Me.text,ft=(pe=Me.options).angle,_r instanceof Pt==0&&ft&&typeof ft=="number"){ft*=Math.PI/180,pe.rotationDirection===0&&(ft=-ft),$===B&&(ft=-ft);var nl=Math.cos(ft),sl=Math.sin(ft);_r=new Pt(nl,sl,-sl,nl,0,0)}else ft&&ft instanceof Pt&&(_r=ft);$!==B||_r||(_r=is),(it=pe.charSpace||An)!==void 0&&(Fn+=Y(re(it))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(tr=pe.horizontalScale)!==void 0&&(Fn+=Y(100*tr)+` Tz
`),pe.lang;var cs=-1,li=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Ai=nr.internal.getCurrentPageInfo().pageContext;switch(li){case 0:case!1:case"fill":cs=0;break;case 1:case!0:case"stroke":cs=1;break;case 2:case"fillThenStroke":cs=2;break;case 3:case"invisible":cs=3;break;case 4:case"fillAndAddForClipping":cs=4;break;case 5:case"strokeAndAddPathForClipping":cs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":cs=6;break;case 7:case"addToPathForClipping":cs=7}var ql=Ai.usedRenderingMode!==void 0?Ai.usedRenderingMode:-1;cs!==-1?Fn+=cs+` Tr
`:ql!==-1&&(Fn+=`0 Tr
`),cs!==-1&&(Ai.usedRenderingMode=cs),bt=pe.align||"left";var Ts,ka=We*Gi,ko=nr.internal.pageSize.getWidth(),So=Ct[mt];it=pe.charSpace||An,Je=pe.maxWidth||0,Ot=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Ki=[],Hs=function(pr){return nr.getStringUnitWidth(pr,{font:So,charSpace:it,fontSize:We,doKerning:!1})*We/oi};if(Object.prototype.toString.call(x)==="[object Array]"){var Os;$e=Ka(x),bt!=="left"&&(Ts=$e.map(Hs));var Is,Sa=0;if(bt==="right"){T-=Ts[0],x=[],Mn=$e.length;for(var Ci=0;Ci<Mn;Ci++)Ci===0?(Is=Kn(T),Os=ai(Q)):(Is=re(Sa-Ts[Ci]),Os=-ka),x.push([$e[Ci],Is,Os]),Sa=Ts[Ci]}else if(bt==="center"){T-=Ts[0]/2,x=[],Mn=$e.length;for(var Ji=0;Ji<Mn;Ji++)Ji===0?(Is=Kn(T),Os=ai(Q)):(Is=re((Sa-Ts[Ji])/2),Os=-ka),x.push([$e[Ji],Is,Os]),Sa=Ts[Ji]}else if(bt==="left"){x=[],Mn=$e.length;for(var Xi=0;Xi<Mn;Xi++)x.push($e[Xi])}else if(bt==="justify"&&So.encoding==="Identity-H"){x=[],Mn=$e.length,Je=Je!==0?Je:ko;for(var Pi=0,sn=0;sn<Mn;sn++)if(Os=sn===0?ai(Q):-ka,Is=sn===0?Kn(T):Pi,sn<Mn-1){var Za=re((Je-Ts[sn])/($e[sn].split(" ").length-1)),Ei=$e[sn].split(" ");x.push([Ei[0]+" ",Is,Os]),Pi=0;for(var ci=1;ci<Ei.length;ci++){var eo=(Hs(Ei[ci-1]+" "+Ei[ci])-Hs(Ei[ci]))*oi+Za;ci==Ei.length-1?x.push([Ei[ci],eo,0]):x.push([Ei[ci]+" ",eo,0]),Pi-=eo}}else x.push([$e[sn],Is,Os]);x.push(["",Pi,0])}else{if(bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Mn=$e.length,Je=Je!==0?Je:ko,sn=0;sn<Mn;sn++){Os=sn===0?ai(Q):-ka,Is=sn===0?Kn(T):0;var to=$e[sn].split(" ").length-1,jo=to>0?(Je-Ts[sn])/to:0;sn<Mn-1?Ki.push(Y(re(jo))):Ki.push(0),x.push([$e[sn],Is,Os])}}}(typeof pe.R2L=="boolean"?pe.R2L:ut)===!0&&(x=No(x,function(pr,kr,Zr){return[pr.split("").reverse().join(""),kr,Zr]})),Me={text:x,x:T,y:Q,options:pe,mutex:{pdfEscape:Hn,activeFontKey:mt,fonts:Ct,activeFontSize:We}},lr.publish("postProcessText",Me),x=Me.text,Or=Me.mutex.isHex||!1;var Ao=Ct[mt].encoding;Ao!=="WinAnsiEncoding"&&Ao!=="StandardEncoding"||(x=No(x,function(pr,kr,Zr){return[Yi(pr),kr,Zr]})),$e=Ka(x),x=[];for(var Qi,ja,Aa,ro=Array.isArray($e[0])?1:0,Ca="",no=function(pr,kr,Zr){var hn="";return Zr instanceof Pt?(Zr=typeof pe.angle=="number"?ss(Zr,new Pt(1,0,0,1,pr,kr)):ss(new Pt(1,0,0,1,pr,kr),Zr),$===B&&(Zr=ss(new Pt(1,0,0,-1,0,0),Zr)),hn=Zr.join(" ")+` Tm
`):hn=Y(pr)+" "+Y(kr)+` Td
`,hn},Qr=0;Qr<$e.length;Qr++){switch(Ca="",ro){case 1:Aa=(Or?"<":"(")+$e[Qr][0]+(Or?">":")"),Qi=parseFloat($e[Qr][1]),ja=parseFloat($e[Qr][2]);break;case 0:Aa=(Or?"<":"(")+$e[Qr]+(Or?">":")"),Qi=Kn(T),ja=ai(Q)}Ki!==void 0&&Ki[Qr]!==void 0&&(Ca=Ki[Qr]+` Tw
`),Qr===0?x.push(Ca+no(Qi,ja,_r)+Aa):ro===0?x.push(Ca+Aa):ro===1&&x.push(Ca+no(Qi,ja,_r)+Aa)}x=ro===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var gs=`BT
/`;return gs+=mt+" "+We+` Tf
`,gs+=Y(We*Gi)+` TL
`,gs+=Rn+`
`,gs+=Fn,gs+=x,Z(gs+="ET"),S[mt]=!0,nr};var Us=y.__private__.clip=y.clip=function(x){return Z(x==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Us("evenodd")},y.__private__.discardPath=y.discardPath=function(){return Z("n"),this};var qs=y.__private__.isValidStyle=function(x){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(T=!0),T};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(x){return qs(x)&&(p=x),this};var va=y.__private__.getStyle=y.getStyle=function(x){var T=p;switch(x){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=x}return T},cr=y.close=function(){return Z("h"),this};y.stroke=function(){return Z("S"),this},y.fill=function(x){return $i("f",x),this},y.fillEvenOdd=function(x){return $i("f*",x),this},y.fillStroke=function(x){return $i("B",x),this},y.fillStrokeEvenOdd=function(x){return $i("B*",x),this};var $i=function(x,T){Ar(T)==="object"?bo(T,x):Z(x)},ji=function(x){x===null||$===B&&x===void 0||(x=va(x),Z(x))};function $a(x,T,Q,pe,ke){var Me=new Ac(T||this.boundingBox,Q||this.xStep,pe||this.yStep,this.gState,ke||this.matrix);Me.stream=this.stream;var $e=x+"$$"+this.cloneIndex+++"$$";return Tr($e,Me),Me}var bo=function(x,T){var Q=hr[x.key],pe=jt[Q];if(pe instanceof Ll)Z("q"),Z(wo(T)),pe.gState&&y.setGState(pe.gState),Z(x.matrix.toString()+" cm"),Z("/"+Q+" sh"),Z("Q");else if(pe instanceof Ac){var ke=new Pt(1,0,0,-1,0,vt());x.matrix&&(ke=ke.multiply(x.matrix||is),Q=$a.call(pe,x.key,x.boundingBox,x.xStep,x.yStep,ke).id),Z("q"),Z("/Pattern cs"),Z("/"+Q+" scn"),pe.gState&&y.setGState(pe.gState),Z(T),Z("Q")}},wo=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Wi=y.moveTo=function(x,T){return Z(Y(re(x))+" "+Y(W(T))+" m"),this},xa=y.lineTo=function(x,T){return Z(Y(re(x))+" "+Y(W(T))+" l"),this},Gn=y.curveTo=function(x,T,Q,pe,ke,Me){return Z([Y(re(x)),Y(W(T)),Y(re(Q)),Y(W(pe)),Y(re(ke)),Y(W(Me)),"c"].join(" ")),this};y.__private__.line=y.line=function(x,T,Q,pe,ke){if(isNaN(x)||isNaN(T)||isNaN(Q)||isNaN(pe)||!qs(ke))throw new Error("Invalid arguments passed to jsPDF.line");return $===J?this.lines([[Q-x,pe-T]],x,T,[1,1],ke||"S"):this.lines([[Q-x,pe-T]],x,T,[1,1]).stroke()},y.__private__.lines=y.lines=function(x,T,Q,pe,ke,Me){var $e,ft,bt,it,Je,Ot,tr,_r,nr,fr,Or,Fn;if(typeof x=="number"&&(Fn=Q,Q=T,T=x,x=Fn),pe=pe||[1,1],Me=Me||!1,isNaN(T)||isNaN(Q)||!Array.isArray(x)||!Array.isArray(pe)||!qs(ke)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wi(T,Q),$e=pe[0],ft=pe[1],it=x.length,fr=T,Or=Q,bt=0;bt<it;bt++)(Je=x[bt]).length===2?(fr=Je[0]*$e+fr,Or=Je[1]*ft+Or,xa(fr,Or)):(Ot=Je[0]*$e+fr,tr=Je[1]*ft+Or,_r=Je[2]*$e+fr,nr=Je[3]*ft+Or,fr=Je[4]*$e+fr,Or=Je[5]*ft+Or,Gn(Ot,tr,_r,nr,fr,Or));return Me&&cr(),ji(ke),this},y.path=function(x){for(var T=0;T<x.length;T++){var Q=x[T],pe=Q.c;switch(Q.op){case"m":Wi(pe[0],pe[1]);break;case"l":xa(pe[0],pe[1]);break;case"c":Gn.apply(this,pe);break;case"h":cr()}}return this},y.__private__.rect=y.rect=function(x,T,Q,pe,ke){if(isNaN(x)||isNaN(T)||isNaN(Q)||isNaN(pe)||!qs(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return $===J&&(pe=-pe),Z([Y(re(x)),Y(W(T)),Y(re(Q)),Y(re(pe)),"re"].join(" ")),ji(ke),this},y.__private__.triangle=y.triangle=function(x,T,Q,pe,ke,Me,$e){if(isNaN(x)||isNaN(T)||isNaN(Q)||isNaN(pe)||isNaN(ke)||isNaN(Me)||!qs($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-x,pe-T],[ke-Q,Me-pe],[x-ke,T-Me]],x,T,[1,1],$e,!0),this},y.__private__.roundedRect=y.roundedRect=function(x,T,Q,pe,ke,Me,$e){if(isNaN(x)||isNaN(T)||isNaN(Q)||isNaN(pe)||isNaN(ke)||isNaN(Me)||!qs($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*Q),Me=Math.min(Me,.5*pe),this.lines([[Q-2*ke,0],[ke*ft,0,ke,Me-Me*ft,ke,Me],[0,pe-2*Me],[0,Me*ft,-ke*ft,Me,-ke,Me],[2*ke-Q,0],[-ke*ft,0,-ke,-Me*ft,-ke,-Me],[0,2*Me-pe],[0,-Me*ft,ke*ft,-Me,ke,-Me]],x+ke,T,[1,1],$e,!0),this},y.__private__.ellipse=y.ellipse=function(x,T,Q,pe,ke){if(isNaN(x)||isNaN(T)||isNaN(Q)||isNaN(pe)||!qs(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*Q,$e=4/3*(Math.SQRT2-1)*pe;return Wi(x+Q,T),Gn(x+Q,T-$e,x+Me,T-pe,x,T-pe),Gn(x-Me,T-pe,x-Q,T-$e,x-Q,T),Gn(x-Q,T+$e,x-Me,T+pe,x,T+pe),Gn(x+Me,T+pe,x+Q,T+$e,x+Q,T),ji(ke),this},y.__private__.circle=y.circle=function(x,T,Q,pe){if(isNaN(x)||isNaN(T)||isNaN(Q)||!qs(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,T,Q,Q,pe)},y.setFont=function(x,T,Q){return Q&&(T=H(T,Q)),mt=qa(x,T,{disableWarning:!1}),this};var zs=y.__private__.getFont=y.getFont=function(){return Ct[qa.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var x,T,Q={};for(x in Gt)if(Gt.hasOwnProperty(x))for(T in Q[x]=[],Gt[x])Gt[x].hasOwnProperty(T)&&Q[x].push(T);return Q},y.addFont=function(x,T,Q,pe,ke){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(Q=H(Q,pe)),qi.call(this,x,T,Q,ke=ke||"Identity-H")};var Yn,ms=n.lineWidth||.200025,Hi=y.__private__.getLineWidth=y.getLineWidth=function(){return ms},Rt=y.__private__.setLineWidth=y.setLineWidth=function(x){return ms=x,Z(Y(re(x))+" w"),this};y.__private__.setLineDash=Et.API.setLineDash=Et.API.setLineDashPattern=function(x,T){if(x=x||[],T=T||0,isNaN(T)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(Q){return Y(re(Q))}).join(" "),T=Y(re(T)),Z("["+x+"] "+T+" d"),this};var $s=y.__private__.getLineHeight=y.getLineHeight=function(){return We*Yn};y.__private__.getLineHeight=y.getLineHeight=function(){return We*Yn};var Wa=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Yn=x),this},Ha=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Yn};Wa(n.lineHeight);var Kn=y.__private__.getHorizontalCoordinate=function(x){return re(x)},ai=y.__private__.getVerticalCoordinate=function(x){return $===B?x:Tt[q].mediaBox.topRightY-Tt[q].mediaBox.bottomLeftY-re(x)},_o=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(x){return Y(Kn(x))},Va=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(x){return Y(ai(x))},ya=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return ri(ya)},y.__private__.setStrokeColor=y.setDrawColor=function(x,T,Q,pe){return ya=dn({ch1:x,ch2:T,ch3:Q,ch4:pe,pdfColorType:"draw",precision:2}),Z(ya),this};var Ga=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return ri(Ga)},y.__private__.setFillColor=y.setFillColor=function(x,T,Q,pe){return Ga=dn({ch1:x,ch2:T,ch3:Q,ch4:pe,pdfColorType:"fill",precision:2}),Z(Ga),this};var Rn=n.textColor||"0 g",Ws=y.__private__.getTextColor=y.getTextColor=function(){return ri(Rn)};y.__private__.setTextColor=y.setTextColor=function(x,T,Q,pe){return Rn=dn({ch1:x,ch2:T,ch3:Q,ch4:pe,pdfColorType:"text",precision:3}),this};var An=n.charSpace,ba=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(An||0)};y.__private__.setCharSpace=y.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return An=x,this};var Ya=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(x){var T=y.CapJoinStyles[x];if(T===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ya=T,Z(T+" J"),this};var Ls=0;y.__private__.setLineJoin=y.setLineJoin=function(x){var T=y.CapJoinStyles[x];if(T===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ls=T,Z(T+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(Y(re(x))+" M"),this},y.GState=Id,y.setGState=function(x){(x=typeof x=="string"?Lt[qt[x]]:Vi(null,x)).equals(dr)||(Z("/"+x.id+" gs"),dr=x)};var Vi=function(x,T){if(!x||!qt[x]){var Q=!1;for(var pe in Lt)if(Lt.hasOwnProperty(pe)&&Lt[pe].equals(T)){Q=!0;break}if(Q)T=Lt[pe];else{var ke="GS"+(Object.keys(Lt).length+1).toString(10);Lt[ke]=T,T.id=ke}return x&&(qt[x]=T.id),lr.publish("addGState",T),T}};y.addGState=function(x,T){return Vi(x,T),this},y.saveGraphicsState=function(){return Z("q"),br.push({key:mt,size:We,color:Rn}),this},y.restoreGraphicsState=function(){Z("Q");var x=br.pop();return mt=x.key,We=x.size,Rn=x.color,dr=null,this},y.setCurrentTransformationMatrix=function(x){return Z(x.toString()+" cm"),this},y.comment=function(x){return Z("#"+x),this};var xn=function(x,T){var Q=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(Me){isNaN(Me)||(Q=parseFloat(Me))}});var pe=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Me){isNaN(Me)||(pe=parseFloat(Me))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Me){ke=Me.toString()}}),this},P=function(x,T,Q,pe){xn.call(this,x,T),this.type="rect";var ke=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function($e){isNaN($e)||(ke=parseFloat($e))}});var Me=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function($e){isNaN($e)||(Me=parseFloat($e))}}),this},ge=function(){this.page=$t,this.currentPage=q,this.pages=ze.slice(0),this.pagesContext=Tt.slice(0),this.x=ct,this.y=Br,this.matrix=er,this.width=qe(q),this.height=at(q),this.outputDestination=Ge,this.id="",this.objectNumber=-1};ge.prototype.restore=function(){$t=this.page,q=this.currentPage,Tt=this.pagesContext,ze=this.pages,ct=this.x,Br=this.y,er=this.matrix,et(q,this.width),nt(q,this.height),Ge=this.outputDestination};var Ne=function(x,T,Q,pe,ke){In.push(new ge),$t=q=0,ze=[],ct=x,Br=T,er=ke,Ps([Q,pe])};for(var Le in y.beginFormObject=function(x,T,Q,pe,ke){return Ne(x,T,Q,pe,ke),this},y.endFormObject=function(x){return(function(T){if($n[T])In.pop().restore();else{var Q=new ge,pe="Xo"+(Object.keys(Ur).length+1).toString(10);Q.id=pe,$n[T]=pe,Ur[pe]=Q,lr.publish("addFormObject",Q),In.pop().restore()}})(x),this},y.doFormObject=function(x,T){var Q=Ur[$n[x]];return Z("q"),Z(T.toString()+" cm"),Z("/"+Q.id+" Do"),Z("Q"),this},y.getFormObject=function(x){var T=Ur[$n[x]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},y.save=function(x,T){return x=x||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(Cl(Es(Vn()),x),typeof Cl.unload=="function"&&Vt.setTimeout&&setTimeout(Cl.unload,911),this):new Promise(function(Q,pe){try{var ke=Cl(Es(Vn()),x);typeof Cl.unload=="function"&&Vt.setTimeout&&setTimeout(Cl.unload,911),Q(ke)}catch(Me){pe(Me.message)}})},Et.API)Et.API.hasOwnProperty(Le)&&(Le==="events"&&Et.API.events.length?(function(x,T){var Q,pe,ke;for(ke=T.length-1;ke!==-1;ke--)Q=T[ke][0],pe=T[ke][1],x.subscribe.apply(x,[Q].concat(typeof pe=="function"?[pe]:pe))})(lr,Et.API.events):y[Le]=Et.API[Le]);function qe(x){return Tt[x].mediaBox.topRightX-Tt[x].mediaBox.bottomLeftX}function et(x,T){Tt[x].mediaBox.topRightX=T+Tt[x].mediaBox.bottomLeftX}function at(x){return Tt[x].mediaBox.topRightY-Tt[x].mediaBox.bottomLeftY}function nt(x,T){Tt[x].mediaBox.topRightY=T+Tt[x].mediaBox.bottomLeftY}var Xe=y.getPageWidth=function(x){return qe(x=x||q)/Ft},ot=y.setPageWidth=function(x,T){et(x,T*Ft)},vt=y.getPageHeight=function(x){return at(x=x||q)/Ft},rr=y.setPageHeight=function(x,T){nt(x,T*Ft)};return y.internal={pdfEscape:Hn,getStyle:va,getFont:zs,getFontSize:rt,getCharSpace:ba,getTextColor:Ws,getLineHeight:$s,getLineHeightFactor:Ha,getLineWidth:Hi,write:Qe,getHorizontalCoordinate:Kn,getVerticalCoordinate:ai,getCoordinateString:_o,getVerticalCoordinateString:Va,collections:{},newObject:xr,newAdditionalObject:Cs,newObjectDeferred:Dr,newObjectDeferredBegin:qr,getFilters:Gr,putStream:Dn,events:lr,scaleFactor:Ft,pageSize:{getWidth:function(){return Xe(q)},setWidth:function(x){ot(q,x)},getHeight:function(){return vt(q)},setHeight:function(x){rr(q,x)}},encryptionOptions:v,encryption:Xr,getEncryptor:function(x){return v!==null?Xr.encryptor(x,0):function(T){return T}},output:ii,getNumberOfPages:os,get pages(){return ze},out:Z,f2:I,f3:R,getPageInfo:jn,getPageInfoByObjId:za,getCurrentPageInfo:zi,getPDFVersion:C,Point:xn,Rectangle:P,Matrix:Pt,hasHotfix:ls},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Xe(q)},set:function(x){ot(q,x)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return vt(q)},set:function(x){rr(q,x)},enumerable:!0,configurable:!0}),(function(x){for(var T=0,Q=St.length;T<Q;T++){var pe=qi.call(this,x[T][0],x[T][1],x[T][2],St[T][3],!0);_===!1&&(S[pe]=!0);var ke=x[T][0].split("-");Bs({id:pe,fontName:ke[0],fontStyle:ke[1]||""})}lr.publish("addFonts",{fonts:Ct,dictionary:Gt})}).call(y,St),mt="F1",Ua(a,t),lr.publish("initialized"),y}Sc.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Sc.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sc.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Sc.prototype.processOwnerPassword=function(n,e){return Ef(Pf(e).substr(0,5),n)},Sc.prototype.encryptor=function(n,e){var t=Pf(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Ef(t,s)}},Id.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Ar(n)!==Ar(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Et.API={events:[]},Et.version="3.0.4";var vn=Et.API,Vf=1,Bl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(n){return n.toFixed(2)},Ko=function(n){return n.toFixed(5)};vn.__acroform__={};var ei=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Pm=function(n){return n*Vf},Ra=function(n){var e=new r1,t=yt.internal.getHeight(n)||0,s=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Jt(s)),Number(Jt(t))],e},M5=vn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},B5=vn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},U5=vn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},_n=vn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return U5(n,e-1)},Nn=vn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return M5(n,e-1)},kn=vn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return B5(n,e-1)},q5=vn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],d=n[3],f={};return f.lowerLeft_X=t(a)||0,f.lowerLeft_Y=s(o+d)||0,f.upperRight_X=t(a+u)||0,f.upperRight_Y=s(o)||0,[Number(Jt(f.lowerLeft_X)),Number(Jt(f.lowerLeft_Y)),Number(Jt(f.upperRight_X)),Number(Jt(f.upperRight_Y))]},z5=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Lf(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+Jt(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Ra(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Lf=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(I){return I.split(`
`)}):a.map(function(I){return[I]});var o=t,u=yt.internal.getHeight(n)||0;u=u<0?-u:u;var d=yt.internal.getWidth(n)||0;d=d<0?-d:d;var f=function(I,R,re){if(I+1<a.length){var W=R+" "+a[I+1][0];return gd(W,n,re).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var p,v,_=gd("3",n,o).height,S=n.multiline?u-o:(u-_)/2,y=S+=2,E=0,C=0,L=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+gd(e,n,o=12).width+", FieldWidth:"+d+`
`;break}for(var A="",J=0,B=0;B<a.length;B++)if(a.hasOwnProperty(B)){var $=!1;if(a[B].length!==1&&L!==a[B].length-1){if((_+2)*(J+2)+2>u)continue e;A+=a[B][L],$=!0,C=B,B--}else{A=(A+=a[B][L]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var oe=parseInt(B),de=f(oe,A,o),H=B>=a.length-1;if(de&&!H){A+=" ",L=0;continue}if(de||H){if(H)C=oe;else if(n.multiline&&(_+2)*(J+2)+2>u)continue e}else{if(!n.multiline||(_+2)*(J+2)+2>u)continue e;C=oe}}for(var Y="",D=E;D<=C;D++){var se=a[D];if(n.multiline){if(D===C){Y+=se[L]+" ",L=(L+1)%se.length;continue}if(D===E){Y+=se[se.length-1]+" ";continue}}Y+=se[0]+" "}switch(Y=Y.substr(Y.length-1)==" "?Y.substr(0,Y.length-1):Y,v=gd(Y,n,o).width,n.textAlign){case"right":p=d-v-2;break;case"center":p=(d-v)/2;break;default:p=2}e+=Jt(p)+" "+Jt(y)+` Td
`,e+="("+Bl(Y)+`) Tj
`,e+=-Jt(p)+` 0 Td
`,y=-(o+2),v=0,E=$?C:C+1,J++,A=""}break}return s.text=e,s.fontSize=o,s},gd=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},$5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},W5=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},H5=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(fa.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify($5)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Vf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new n1,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&W5(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var d=s[u],f=[],p=d.Rect;if(d.Rect&&(d.Rect=q5(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=yt.createDefaultAppearanceStream(d),Ar(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(f=d.getKeyValueListForStream()),d.Rect=p,d.hasAppearanceStream&&!d.appearanceStreamContent){var v=z5(d);f.push({key:"AP",value:"<</N "+v+">>"}),a.internal.acroformPlugin.xForms.push(v)}if(d.appearanceStreamContent){var _="";for(var S in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(S)){var y=d.appearanceStreamContent[S];if(_+="/"+S+" ",_+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var E=y[u];typeof E=="function"&&(E=E.call(a,d)),_+="/"+u+" "+E+" ",a.internal.acroformPlugin.xForms.indexOf(E)>=0||a.internal.acroformPlugin.xForms.push(E)}}else typeof(E=y)=="function"&&(E=E.call(a,d)),_+="/"+u+" "+E,a.internal.acroformPlugin.xForms.indexOf(E)>=0||a.internal.acroformPlugin.xForms.push(E);_+=">>"}f.push({key:"AP",value:`<<
`+_+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:d.objId}),a.internal.out("endobj")}o&&(function(C,L){for(var A in C)if(C.hasOwnProperty(A)){var J=A,B=C[A];L.internal.newObjectDeferredBegin(B.objId,!0),Ar(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete C[J]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},t1=vn.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),Ar(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Bl(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rf=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Bl(s(n))+")"},Ma=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ma.prototype.toString=function(){return this.objId+" 0 R"},Ma.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ma.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:t1(a,this.objId,this.scope)}):a instanceof Ma?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var r1=function(){Ma.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ei(r1,Ma);var n1=function(){Ma.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Bl(t(n))+")"}},set:function(t){n=t}})};ei(n1,Ma);var fa=function n(){Ma.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_n(e,3)},set:function(A){A?this.F=Nn(e,3):this.F=kn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(A){s=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(A){s[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(A){s[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(A){s[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(A){s[3]=A}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Dd)return;o="FieldObject"+n.FieldNum++}var A=function(J){return J};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Bl(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(A){f=A}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/Vf:p},set:function(A){p=A}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(A){v=A}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof Dd||this instanceof Ol))return rf(_,this.objId,this.scope)},set:function(A){A=A.toString(),_=A}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof ns==0?rf(S,this.objId,this.scope):S},set:function(A){A=A.toString(),S=this instanceof ns==0?A.substr(0,1)==="("?wc(A.substr(1,A.length-2)):wc(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ns==1?wc(S.substr(1,S.length-1)):S},set:function(A){A=A.toString(),S=this instanceof ns==1?"/"+A:A}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof ns==0?rf(y,this.objId,this.scope):y},set:function(A){A=A.toString(),y=this instanceof ns==0?A.substr(0,1)==="("?wc(A.substr(1,A.length-2)):wc(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ns==1?wc(y.substr(1,y.length-1)):y},set:function(A){A=A.toString(),y=this instanceof ns==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(A){A=!!A,C=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(A){E=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,1)},set:function(A){A?this.Ff=Nn(this.Ff,1):this.Ff=kn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,2)},set:function(A){A?this.Ff=Nn(this.Ff,2):this.Ff=kn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,3)},set:function(A){A?this.Ff=Nn(this.Ff,3):this.Ff=kn(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');L=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(L){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};ei(fa,Ma);var Pc=function(){fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return t1(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,d){d||(d=1);for(var f,p=[];f=u.exec(o);)p.push(f[d]);return p})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,18)},set:function(t){t?this.Ff=Nn(this.Ff,18):this.Ff=kn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Nn(this.Ff,19):this.Ff=kn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,20)},set:function(t){t?(this.Ff=Nn(this.Ff,20),e.sort()):this.Ff=kn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,22)},set:function(t){t?this.Ff=Nn(this.Ff,22):this.Ff=kn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,23)},set:function(t){t?this.Ff=Nn(this.Ff,23):this.Ff=kn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,27)},set:function(t){t?this.Ff=Nn(this.Ff,27):this.Ff=kn(this.Ff,27)}}),this.hasAppearanceStream=!1};ei(Pc,fa);var Ec=function(){Pc.call(this),this.fontName="helvetica",this.combo=!1};ei(Ec,Pc);var Lc=function(){Ec.call(this),this.combo=!0};ei(Lc,Ec);var _d=function(){Lc.call(this),this.edit=!0};ei(_d,Lc);var ns=function(){fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,15)},set:function(t){t?this.Ff=Nn(this.Ff,15):this.Ff=kn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,16)},set:function(t){t?this.Ff=Nn(this.Ff,16):this.Ff=kn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,17)},set:function(t){t?this.Ff=Nn(this.Ff,17):this.Ff=kn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,26)},set:function(t){t?this.Ff=Nn(this.Ff,26):this.Ff=kn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Bl(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){Ar(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ei(ns,fa);var Nd=function(){ns.call(this),this.pushButton=!0};ei(Nd,ns);var Tc=function(){ns.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ei(Tc,ns);var Dd=function(){var n,e;fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Bl(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Ar(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ei(Dd,fa),Tc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Tc.prototype.createOption=function(n){var e=new Dd;return e.Parent=this,e.optionName=n,this.Kids.push(e),V5.call(this.scope,e),e};var kd=function(){ns.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};ei(kd,ns);var Ol=function(){fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,13)},set:function(e){e?this.Ff=Nn(this.Ff,13):this.Ff=kn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,21)},set:function(e){e?this.Ff=Nn(this.Ff,21):this.Ff=kn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,23)},set:function(e){e?this.Ff=Nn(this.Ff,23):this.Ff=kn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,24)},set:function(e){e?this.Ff=Nn(this.Ff,24):this.Ff=kn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,25)},set:function(e){e?this.Ff=Nn(this.Ff,25):this.Ff=kn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,26)},set:function(e){e?this.Ff=Nn(this.Ff,26):this.Ff=kn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ei(Ol,fa);var Sd=function(){Ol.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,14)},set:function(n){n?this.Ff=Nn(this.Ff,14):this.Ff=kn(this.Ff,14)}}),this.password=!0};ei(Sd,Ol);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ra(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Lf(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Jt(yt.internal.getWidth(n))+" "+Jt(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+Jt(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ra(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=yt.internal.getHeight(n),u=yt.internal.getWidth(n),d=Lf(n,n.caption);return a.push("1 g"),a.push("0 0 "+Jt(u)+" "+Jt(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jt(u-1)+" "+Jt(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+Jt(d.fontSize)+" Tf "+s),a.push(d.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Ra(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(yt.internal.getWidth(n))+" "+Jt(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ra(n);e.scope=n.scope;var t=[],s=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=yt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ko(yt.internal.getWidth(n)/2)+" "+Ko(yt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ra(n);e.scope=n.scope;var t=[],s=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*yt.internal.Bezier_C).toFixed(5)),u=Number((s*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(yt.internal.getWidth(n)/2)+" "+Ko(yt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ko(yt.internal.getWidth(n)/2)+" "+Ko(yt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ra(n);e.scope=n.scope;var t=[],s=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(yt.internal.getWidth(n)/2)+" "+Ko(yt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ra(n);e.scope=n.scope;var t=[],s=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Jt(yt.internal.getWidth(n)-2)+" "+Jt(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Jt(s.x1.x)+" "+Jt(s.x1.y)+" m"),t.push(Jt(s.x2.x)+" "+Jt(s.x2.y)+" l"),t.push(Jt(s.x4.x)+" "+Jt(s.x4.y)+" m"),t.push(Jt(s.x3.x)+" "+Jt(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ra(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Jt(yt.internal.getWidth(n))+" "+Jt(yt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Jt(yt.internal.getWidth(n)-2)+" "+Jt(yt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Jt(t.x1.x)+" "+Jt(t.x1.y)+" m"),s.push(Jt(t.x2.x)+" "+Jt(t.x2.y)+" l"),s.push(Jt(t.x4.x)+" "+Jt(t.x4.y)+" m"),s.push(Jt(t.x3.x)+" "+Jt(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Ra(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(yt.internal.getWidth(n))+" "+Jt(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},yt.internal.getWidth=function(n){var e=0;return Ar(n)==="object"&&(e=Pm(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return Ar(n)==="object"&&(e=Pm(n.Rect[3])),e};var V5=vn.addField=function(n){if(H5(this,n),!(n instanceof fa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};vn.AcroFormChoiceField=Pc,vn.AcroFormListBox=Ec,vn.AcroFormComboBox=Lc,vn.AcroFormEditBox=_d,vn.AcroFormButton=ns,vn.AcroFormPushButton=Nd,vn.AcroFormRadioButton=Tc,vn.AcroFormCheckBox=kd,vn.AcroFormTextField=Ol,vn.AcroFormPasswordField=Sd,vn.AcroFormAppearance=yt,vn.AcroForm={ChoiceField:Pc,ListBox:Ec,ComboBox:Lc,EditBox:_d,Button:ns,PushButton:Nd,RadioButton:Tc,CheckBox:kd,TextField:Ol,PasswordField:Sd,Appearance:yt},Et.AcroForm={ChoiceField:Pc,ListBox:Ec,ComboBox:Lc,EditBox:_d,Button:ns,PushButton:Nd,RadioButton:Tc,CheckBox:kd,TextField:Ol,PasswordField:Sd,Appearance:yt};Et.AcroForm;function s1(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(I,R){var re,W,ie,fe,ee,z=t;if((R=R||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(de(I))for(ee in s)for(ie=s[ee],re=0;re<ie.length;re+=1){for(fe=!0,W=0;W<ie[re].length;W+=1)if(ie[re][W]!==void 0&&ie[re][W]!==I[W]){fe=!1;break}if(fe===!0){z=ee;break}}else for(ee in s)for(ie=s[ee],re=0;re<ie.length;re+=1){for(fe=!0,W=0;W<ie[re].length;W+=1)if(ie[re][W]!==void 0&&ie[re][W]!==I.charCodeAt(W)){fe=!1;break}if(fe===!0){z=ee;break}}return z===t&&R!==t&&(z=R),z},o=function I(R){for(var re=this.internal.write,W=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var fe=[];if(fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Image"}),fe.push({key:"Width",value:R.width}),fe.push({key:"Height",value:R.height}),R.colorSpace===A.INDEXED?fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(fe.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===A.DEVICE_CMYK&&fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),fe.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&fe.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var ee="",z=0,le=R.transparency.length;z<le;z++)ee+=R.transparency[z]+" "+R.transparency[z]+" ";fe.push({key:"Mask",value:"["+ee+"]"})}R.sMask!==void 0&&fe.push({key:"SMask",value:R.objectId+1+" 0 R"});var be=R.filter!==void 0?["/"+R.filter]:void 0;if(W({data:R.data,additionalKeyValues:fe,alreadyAppliedFilters:be,objectId:R.objectId}),re("endobj"),"sMask"in R&&R.sMask!==void 0){var V,j=(V=R.sMaskBitsPerComponent)!==null&&V!==void 0?V:R.bitsPerComponent,q={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:R.sMask};"filter"in R&&(q.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(R.width),q.filter=R.filter),I.call(this,q)}if(R.colorSpace===A.INDEXED){var X=this.internal.newObject();W({data:Y(new Uint8Array(R.palette)),objectId:X}),re("endobj")}},u=function(){var I=this.internal.collections[e+"images"];for(var R in I)o.call(this,I[R])},d=function(){var I,R=this.internal.collections[e+"images"],re=this.internal.write;for(var W in R)re("/I"+(I=R[W]).index,I.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},p=function(){var I=this.internal.collections[e+"images"];return f.call(this),I},v=function(){return Object.keys(this.internal.collections[e+"images"]).length},_=function(I){return typeof n["process"+I.toUpperCase()]=="function"},S=function(I){return Ar(I)==="object"&&I.nodeType===1},y=function(I,R){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var re=""+I.getAttribute("src");if(re.indexOf("data:image/")===0)return wd(unescape(re).split("base64,").pop());var W=n.loadFile(re,!0);if(W!==void 0)return W}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var ie;switch(R){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return wd(I.toDataURL(ie,1).split("base64,").pop())}},E=function(I){var R=this.internal.collections[e+"images"];if(R){for(var re in R)if(I===R[re].alias)return R[re]}},C=function(I,R,re){return I||R||(I=-96,R=-96),I<0&&(I=-1*re.width*72/I/this.internal.scaleFactor),R<0&&(R=-1*re.height*72/R/this.internal.scaleFactor),I===0&&(I=R*re.width/re.height),R===0&&(R=I*re.height/re.width),[I,R]},L=function(I,R,re,W,ie,fe){var ee=C.call(this,re,W,ie),z=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,be=p.call(this);if(re=ee[0],W=ee[1],be[ie.index]=ie,fe){fe*=Math.PI/180;var V=Math.cos(fe),j=Math.sin(fe),q=function(ae){return ae.toFixed(4)},X=[q(V),q(j),q(-1*j),q(V),0,0,"cm"]}this.internal.write("q"),fe?(this.internal.write([1,"0","0",1,z(I),le(R+W),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([z(re),"0","0",z(W),"0","0","cm"].join(" "))):this.internal.write([z(re),"0","0",z(W),z(I),le(R+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},A=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var J=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=n.__addimage__.sHashCode=function(I){var R,re,W=0;if(typeof I=="string")for(re=I.length,R=0;R<re;R++)W=(W<<5)-W+I.charCodeAt(R),W|=0;else if(de(I))for(re=I.byteLength/2,R=0;R<re;R++)W=(W<<5)-W+I[R],W|=0;return W},$=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var R=!0;return I.length===0&&(R=!1),I.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(R=!1),R},oe=n.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var R=I.indexOf(",");return R<0?null:I.substring(0,R).trim().endsWith("base64")?I.substring(R+1):null};n.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var de=n.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(I){for(var R=I.length,re=new Uint8Array(R),W=0;W<R;W++)re[W]=I.charCodeAt(W);return re},Y=n.__addimage__.arrayBufferToBinaryString=function(I){for(var R="",re=de(I)?I:new Uint8Array(I),W=0;W<re.length;W+=8192)R+=String.fromCharCode.apply(null,re.subarray(W,W+8192));return R};n.addImage=function(){var I,R,re,W,ie,fe,ee,z,le;if(typeof arguments[1]=="number"?(R=t,re=arguments[1],W=arguments[2],ie=arguments[3],fe=arguments[4],ee=arguments[5],z=arguments[6],le=arguments[7]):(R=arguments[1],re=arguments[2],W=arguments[3],ie=arguments[4],fe=arguments[5],ee=arguments[6],z=arguments[7],le=arguments[8]),Ar(I=arguments[0])==="object"&&!S(I)&&"imageData"in I){var be=I;I=be.imageData,R=be.format||R||t,re=be.x||re||0,W=be.y||W||0,ie=be.w||be.width||ie,fe=be.h||be.height||fe,ee=be.alias||ee,z=be.compression||z,le=be.rotation||be.angle||le}var V=this.internal.getFilters();if(z===void 0&&V.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(re)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var j=D.call(this,I,R,ee,z);return L.call(this,re,W,ie,fe,j,le),this};var D=function(I,R,re,W){var ie,fe,ee;if(typeof I=="string"&&a(I)===t){I=unescape(I);var z=se(I,!1);(z!==""||(z=n.loadFile(I,!0))!==void 0)&&(I=z)}if(S(I)&&(I=y(I,R)),R=a(I,R),!_(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ee=re)==null||ee.length===0)&&(re=(function(le){return typeof le=="string"||de(le)?B(le):de(le.data)?B(le.data):null})(I)),(ie=E.call(this,re))||(I instanceof Uint8Array||R==="RGBA"||(fe=I,I=H(I)),ie=this["process"+R.toUpperCase()](I,v.call(this),re,(function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in n.image_compression?le:J.NONE})(W),fe)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},se=n.__addimage__.convertBase64ToBinaryString=function(I,R){R=typeof R!="boolean"||R;var re,W="";if(typeof I=="string"){var ie;re=(ie=oe(I))!==null&&ie!==void 0?ie:I;try{W=wd(re)}catch(fe){if(R)throw $(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};n.getImageProperties=function(I){var R,re,W="";if(S(I)&&(I=y(I)),typeof I=="string"&&a(I)===t&&((W=se(I,!1))===""&&(W=n.loadFile(I)||""),I=W),re=a(I),!_(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(I instanceof Uint8Array||(I=H(I)),!(R=this["process"+re.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=re,R}})(Et.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Et.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),p=t.pageContext.annotations,v=!1,_=0;_<p.length&&!v;_++)switch((s=p[_]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var S=0;S<p.length;S++){s=p[S];var y=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(C.objId),J=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(A(s.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(A(J))+") >>",C.content=o;var B=C.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+B,s.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(C.objId,"0 R",L.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var $=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(E(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var oe=this.annotations._nameMap[s.options.name];s.options.pageNumber=oe.page,s.options.top=oe.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(E(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var de=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+de+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var d=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:f(t),y:p(s),w:f(t+a),h:p(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,d,f=this.getTextWidth(t),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var v=this.splitTextToSize(t,d).length;u=Math.ceil(p*v)}else d=f,u=p;return this.text(t,s,a,o),a+=.2*p,o.align==="center"&&(s-=f/2),o.align==="right"&&(s-=f),this.link(s,a-p,d,u,o),f},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(Et.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},d=n.__arabicParser__.isArabicEndLetter=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(C){return u(C)&&a.indexOf(C.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length>=1};var p=n.__arabicParser__.arabicLetterHasFinalForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length>=3};var v=n.__arabicParser__.arabicLetterHasMedialForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length==4},_=n.__arabicParser__.resolveLigatures=function(C){var L=0,A=t,J="",B=0;for(L=0;L<C.length;L+=1)A[C.charCodeAt(L)]!==void 0?(B++,typeof(A=A[C.charCodeAt(L)])=="number"&&(J+=String.fromCharCode(A),A=t,B=0),L===C.length-1&&(A=t,J+=C.charAt(L-(B-1)),L-=B-1,B=0)):(A=t,J+=C.charAt(L-B),L-=B,B=0);return J};n.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&s[C.charCodeAt(0)]!==void 0};var S=n.__arabicParser__.getCorrectForm=function(C,L,A){return u(C)?o(C)===!1?-1:!p(C)||!u(L)&&!u(A)||!u(A)&&d(L)||d(C)&&!u(L)||d(C)&&f(L)||d(C)&&d(L)?0:v(C)&&u(L)&&!d(L)&&u(A)&&p(A)?3:d(C)||!u(A)?1:2:-1},y=function(C){var L=0,A=0,J=0,B="",$="",oe="",de=(C=C||"").split("\\s+"),H=[];for(L=0;L<de.length;L+=1){for(H.push(""),A=0;A<de[L].length;A+=1)B=de[L][A],$=de[L][A-1],oe=de[L][A+1],u(B)?(J=S(B,$,oe),H[L]+=J!==-1?String.fromCharCode(e[B.charCodeAt(0)][J]):B):H[L]+=B;H[L]=_(H[L])}return H.join(" ")},E=n.__arabicParser__.processArabic=n.processArabic=function(){var C,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(L)){var J=0;for(A=[],J=0;J<L.length;J+=1)Array.isArray(L[J])?A.push([y(L[J][0]),L[J][1],L[J][2]]):A.push([y(L[J])]);C=A}else C=y(L);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};n.events.push(["preProcessText",E])})(Et.API),Et.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Et.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(C){v=C}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(C){_=C}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(C){S=C}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(C){E=C}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,p){s.call(this);var v=(p=p||{}).fontSize||this.getFontSize(),_=p.font||this.getFont(),S=p.scaleFactor||this.internal.scaleFactor,y=0,E=0,C=0,L=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var A=p.maxWidth;A>0?typeof f=="string"?f=this.splitTextToSize(f,A):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(B,$){return B.concat(L.splitTextToSize($,A))},[])):f=Array.isArray(f)?f:[f];for(var J=0;J<f.length;J++)y<(C=this.getStringUnitWidth(f[J],{font:_})*v)&&(y=C);return y!==0&&(E=f.length),{w:y/=S,h:Math.max((E*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/S,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var p=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=_.top,y&&S&&(this.printHeaderRow(f.lineNumber,!0),f.y+=S[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-v,f.y+v,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+v,{align:"center",baseline:"top",maxWidth:f.width-v-v}):this.text(f.text,f.x+v,f.y+v,{align:"left",baseline:"top",maxWidth:f.width-v-v})),this.internal.__cell__.lastCell=f,this};n.table=function(f,p,v,_,S){if(s.call(this),!v)throw new Error("No data for PDF table.");var y,E,C,L,A=[],J=[],B=[],$={},oe={},de=[],H=[],Y=(S=S||{}).autoSize||!1,D=S.printHeaders!==!1,se=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,I=S.margins||Object.assign({width:this.getPageWidth()},e),R=typeof S.padding=="number"?S.padding:3,re=S.headerBackgroundColor||"#c8c8c8",W=S.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=se,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=W,this.setFontSize(se),_==null)J=A=Object.keys(v[0]),B=A.map(function(){return"left"});else if(Array.isArray(_)&&Ar(_[0])==="object")for(A=_.map(function(be){return be.name}),J=_.map(function(be){return be.prompt||be.name||""}),B=_.map(function(be){return be.align||"left"}),y=0;y<_.length;y+=1)oe[_[y].name]=.7499990551181103*_[y].width;else Array.isArray(_)&&typeof _[0]=="string"&&(J=A=_,B=A.map(function(){return"left"}));if(Y||Array.isArray(_)&&typeof _[0]=="string")for(y=0;y<A.length;y+=1){for($[L=A[y]]=v.map(function(be){return be[L]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(J[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=$[L],this.setFont(void 0,"normal"),C=0;C<E.length;C+=1)de.push(this.getTextDimensions(E[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[L]=Math.max.apply(null,de)+R+R,de=[]}if(D){var ie={};for(y=0;y<A.length;y+=1)ie[A[y]]={},ie[A[y]].text=J[y],ie[A[y]].align=B[y];var fe=d.call(this,ie,oe);H=A.map(function(be){return new o(f,p,oe[be],fe,ie[be].text,void 0,ie[be].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var ee=_.reduce(function(be,V){return be[V.name]=V.align,be},{});for(y=0;y<v.length;y+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:y,data:v[y]},this);var z=d.call(this,v[y],oe);for(C=0;C<A.length;C+=1){var le=v[y][A[C]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:y,col:C,data:le},this),u.call(this,new o(f,p,oe[A[C]],z,le,y+2,ee[A[C]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var d=function(f,p){var v=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(f).map(function(y){var E=f[y];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,p[y]-v-v)},this).map(function(y){return this.getLineHeightFactor()*y.length*_/S+v+v},this).reduce(function(y,E){return Math.max(y,E)},0)};n.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,p){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){v=this.internal.__cell__.tableHeaderRow[y].clone(),p&&(v.y=this.internal.__cell__.margins.top||0,S.push(v)),v.lineNumber=f;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,v),this.setTextColor(E)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}})(Et.API);var i1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tf=s1(a1),o1=[100,200,300,400,500,600,700,800,900],G5=s1(o1);function nf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return i1[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Tf[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function Em(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var Y5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Lm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tm(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Om(n){return n.trimLeft()}function K5(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function J5(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var vd,Im,Dm,_c,xd,Rm,Fm,Mm,sf=["times"];function Bm(n,e,t,s,a){var o=4,u=qm;switch(a){case Et.API.image_compression.FAST:o=1,u=Um;break;case Et.API.image_compression.MEDIUM:o=6,u=zm;break;case Et.API.image_compression.SLOW:o=9,u=$m}n=(function(f,p,v,_){for(var S,y=f.length/p,E=new Uint8Array(f.length+y),C=[X5,Um,qm,zm,$m],L=0;L<y;L+=1){var A=L*p,J=f.subarray(A,A+p);if(_)E.set(_(J,v,S),A+L);else{for(var B=C.length,$=[],oe=0;oe<B;oe+=1)$[oe]=C[oe](J,v,S);var de=Z5($.concat());E.set($[de],A+L)}S=J}return E})(n,e,Math.ceil(t*s/8),u);var d=Sf(n,{level:o});return Et.API.__addimage__.arrayBufferToBinaryString(d)}function X5(n){var e=Array.apply([],n);return e.unshift(0),e}function Um(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function qm(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function zm(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,d=t&&t[o]||0;a[o+1]=n[o]+256-(u+d>>>1)&255}return a}function $m(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=Q5(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function Q5(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function Z5(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function af(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return l1(n,a)>>o&u}function Wm(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),d=(1<<s)-1,f=(e&d)<<u;(function(p,v,_){if(v+1<p.byteLength)p.setUint16(v,_,!1);else{var S=_>>8&255;p.setUint8(v,S)}})(n,o,l1(n,o)&~(d<<u)&65535|f)}function l1(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function eb(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var d=null,f=null;o&&(d=e,f=u,e+=3*u);var p=!0,v=[],_=0,S=null,y=0,E=null;for(this.width=t,this.height=s;p&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,E=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=n[e++];_=n[e++]|n[e++]<<8,S=n[e++],1&C||(S=null),y=C>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,J=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,$=n[e++],oe=$>>6&1,de=1<<1+(7&$),H=d,Y=f,D=!1;$>>7&&(D=!0,H=e,Y=de,e+=3*de);var se=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}v.push({x:L,y:A,width:J,height:B,has_local_palette:D,palette_offset:H,palette_size:Y,data_offset:se,data_length:e-se,transparent_index:S,interlaced:!!oe,delay:_,disposal:y});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return E},this.frameInfo=function(R){if(R<0||R>=v.length)throw new Error("Frame index out of range.");return v[R]},this.decodeAndBlitFrameBGRA=function(R,re){var W=this.frameInfo(R),ie=W.width*W.height,fe=new Uint8Array(ie);Hm(n,W.data_offset,fe,ie);var ee=W.palette_offset,z=W.transparent_index;z===null&&(z=256);var le=W.width,be=t-le,V=le,j=4*(W.y*t+W.x),q=4*((W.y+W.height)*t+W.x),X=j,ae=4*be;W.interlaced===!0&&(ae+=4*t*7);for(var ue=8,ye=0,he=fe.length;ye<he;++ye){var Se=fe[ye];if(V===0&&(V=le,(X+=ae)>=q&&(ae=4*be+4*t*(ue-1),X=j+(le+be)*(ue<<1),ue>>=1)),Se===z)X+=4;else{var Ce=n[ee+3*Se],ze=n[ee+3*Se+1],Ie=n[ee+3*Se+2];re[X++]=Ie,re[X++]=ze,re[X++]=Ce,re[X++]=255}--V}},this.decodeAndBlitFrameRGBA=function(R,re){var W=this.frameInfo(R),ie=W.width*W.height,fe=new Uint8Array(ie);Hm(n,W.data_offset,fe,ie);var ee=W.palette_offset,z=W.transparent_index;z===null&&(z=256);var le=W.width,be=t-le,V=le,j=4*(W.y*t+W.x),q=4*((W.y+W.height)*t+W.x),X=j,ae=4*be;W.interlaced===!0&&(ae+=4*t*7);for(var ue=8,ye=0,he=fe.length;ye<he;++ye){var Se=fe[ye];if(V===0&&(V=le,(X+=ae)>=q&&(ae=4*be+4*t*(ue-1),X=j+(le+be)*(ue<<1),ue>>=1)),Se===z)X+=4;else{var Ce=n[ee+3*Se],ze=n[ee+3*Se+1],Ie=n[ee+3*Se+2];re[X++]=Ce,re[X++]=ze,re[X++]=Ie,re[X++]=255}--V}}}function Hm(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,d=u+1,f=a+1,p=(1<<f)-1,v=0,_=0,S=0,y=n[e++],E=new Int32Array(4096),C=null;;){for(;v<16&&y!==0;)_|=n[e++]<<v,v+=8,y===1?y=n[e++]:--y;if(v<f)break;var L=_&p;if(_>>=f,v-=f,L!==o){if(L===u)break;for(var A=L<d?L:C,J=0,B=A;B>o;)B=E[B]>>8,++J;var $=B;if(S+J+(A!==L?1:0)>s)return void Fr.log("Warning, gif stream longer than expected.");t[S++]=$;var oe=S+=J;for(A!==L&&(t[S++]=$),B=A;J--;)B=E[B],t[--oe]=255&B,B>>=8;C!==null&&d<4096&&(E[d++]=C<<8|$,d>=p+1&&f<12&&(++f,p=p<<1|1)),C=L}else d=u+1,p=(1<<(f=a+1))-1,C=null}return S!==s&&Fr.log("Warning, gif stream shorter than expected."),t}function of(n){var e,t,s,a,o,u=Math.floor,d=new Array(64),f=new Array(64),p=new Array(64),v=new Array(64),_=new Array(65535),S=new Array(65535),y=new Array(64),E=new Array(64),C=[],L=0,A=7,J=new Array(64),B=new Array(64),$=new Array(64),oe=new Array(256),de=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(j,q){for(var X=0,ae=0,ue=new Array,ye=1;ye<=16;ye++){for(var he=1;he<=j[ye];he++)ue[q[ae]]=[],ue[q[ae]][0]=X,ue[q[ae]][1]=ye,ae++,X++;X*=2}return ue}function ee(j){for(var q=j[0],X=j[1]-1;X>=0;)q&1<<X&&(L|=1<<A),X--,--A<0&&(L==255?(z(255),z(0)):z(L),A=7,L=0)}function z(j){C.push(j)}function le(j){z(j>>8&255),z(255&j)}function be(j,q,X,ae,ue){for(var ye,he=ue[0],Se=ue[240],Ce=(function(We,_t){var rt,ut,tt,ur,Qt,Wt,Zt,Dt,mt,Ft,ct=0;for(mt=0;mt<8;++mt){rt=We[ct],ut=We[ct+1],tt=We[ct+2],ur=We[ct+3],Qt=We[ct+4],Wt=We[ct+5],Zt=We[ct+6];var Br=rt+(Dt=We[ct+7]),er=rt-Dt,Ct=ut+Zt,Gt=ut-Zt,br=tt+Wt,jt=tt-Wt,hr=ur+Qt,Lt=ur-Qt,qt=Br+hr,dr=Br-hr,$t=Ct+br,Tt=Ct-br;We[ct]=qt+$t,We[ct+4]=qt-$t;var lr=.707106781*(Tt+dr);We[ct+2]=dr+lr,We[ct+6]=dr-lr;var ti=.382683433*((qt=Lt+jt)-(Tt=Gt+er)),Ur=.5411961*qt+ti,$n=1.306562965*Tt+ti,In=.707106781*($t=jt+Gt),Pt=er+In,ss=er-In;We[ct+5]=ss+Ur,We[ct+3]=ss-Ur,We[ct+1]=Pt+$n,We[ct+7]=Pt-$n,ct+=8}for(ct=0,mt=0;mt<8;++mt){rt=We[ct],ut=We[ct+8],tt=We[ct+16],ur=We[ct+24],Qt=We[ct+32],Wt=We[ct+40],Zt=We[ct+48];var is=rt+(Dt=We[ct+56]),Tr=rt-Dt,Sn=ut+Zt,xr=ut-Zt,Dr=tt+Wt,qr=tt-Wt,Cs=ur+Qt,wi=ur-Qt,as=is+Cs,ri=is-Cs,dn=Sn+Dr,Gr=Sn-Dr;We[ct]=as+dn,We[ct+32]=as-dn;var Dn=.707106781*(Gr+ri);We[ct+16]=ri+Dn,We[ct+48]=ri-Dn;var Ui=.382683433*((as=wi+qr)-(Gr=xr+Tr)),Wn=.5411961*as+Ui,_i=1.306562965*Gr+Ui,ps=.707106781*(dn=qr+xr),Ni=Tr+ps,ni=Tr-ps;We[ct+40]=ni+Wn,We[ct+24]=ni-Wn,We[ct+8]=Ni+_i,We[ct+56]=Ni-_i,ct++}for(mt=0;mt<64;++mt)Ft=We[mt]*_t[mt],y[mt]=Ft>0?Ft+.5|0:Ft-.5|0;return y})(j,q),ze=0;ze<64;++ze)E[H[ze]]=Ce[ze];var Ie=E[0]-X;X=E[0],Ie==0?ee(ae[0]):(ee(ae[S[ye=32767+Ie]]),ee(_[ye]));for(var Ge=63;Ge>0&&E[Ge]==0;)Ge--;if(Ge==0)return ee(he),X;for(var st,Z=1;Z<=Ge;){for(var Qe=Z;E[Z]==0&&Z<=Ge;)++Z;var It=Z-Qe;if(It>=16){st=It>>4;for(var St=1;St<=st;++St)ee(Se);It&=15}ye=32767+E[Z],ee(ue[(It<<4)+S[ye]]),ee(_[ye]),Z++}return Ge!=63&&ee(he),X}function V(j){j=Math.min(Math.max(j,1),100),o!=j&&((function(q){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var ue=u((X[ae]*q+50)/100);ue=Math.min(Math.max(ue,1),255),d[H[ae]]=ue}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var Se=u((ye[he]*q+50)/100);Se=Math.min(Math.max(Se,1),255),f[H[he]]=Se}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,Ie=0;Ie<8;Ie++)for(var Ge=0;Ge<8;Ge++)p[ze]=1/(d[H[ze]]*Ce[Ie]*Ce[Ge]*8),v[ze]=1/(f[H[ze]]*Ce[Ie]*Ce[Ge]*8),ze++})(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),o=j)}this.encode=function(j,q){q&&V(q),C=new Array,L=0,A=7,le(65496),le(65504),le(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),le(1),le(1),z(0),z(0),(function(){le(65499),le(132),z(0);for(var ut=0;ut<64;ut++)z(d[ut]);z(1);for(var tt=0;tt<64;tt++)z(f[tt])})(),(function(ut,tt){le(65472),le(17),z(8),le(tt),le(ut),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)})(j.width,j.height),(function(){le(65476),le(418),z(0);for(var ut=0;ut<16;ut++)z(Y[ut+1]);for(var tt=0;tt<=11;tt++)z(D[tt]);z(16);for(var ur=0;ur<16;ur++)z(se[ur+1]);for(var Qt=0;Qt<=161;Qt++)z(I[Qt]);z(1);for(var Wt=0;Wt<16;Wt++)z(R[Wt+1]);for(var Zt=0;Zt<=11;Zt++)z(re[Zt]);z(17);for(var Dt=0;Dt<16;Dt++)z(W[Dt+1]);for(var mt=0;mt<=161;mt++)z(ie[mt])})(),le(65498),le(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var X=0,ae=0,ue=0;L=0,A=7,this.encode.displayName="_encode_";for(var ye,he,Se,Ce,ze,Ie,Ge,st,Z,Qe=j.data,It=j.width,St=j.height,We=4*It,_t=0;_t<St;){for(ye=0;ye<We;){for(ze=We*_t+ye,Ge=-1,st=0,Z=0;Z<64;Z++)Ie=ze+(st=Z>>3)*We+(Ge=4*(7&Z)),_t+st>=St&&(Ie-=We*(_t+1+st-St)),ye+Ge>=We&&(Ie-=ye+Ge-We+4),he=Qe[Ie++],Se=Qe[Ie++],Ce=Qe[Ie++],J[Z]=(de[he]+de[Se+256|0]+de[Ce+512|0]>>16)-128,B[Z]=(de[he+768|0]+de[Se+1024|0]+de[Ce+1280|0]>>16)-128,$[Z]=(de[he+1280|0]+de[Se+1536|0]+de[Ce+1792|0]>>16)-128;X=be(J,p,X,e,s),ae=be(B,v,ae,t,a),ue=be($,v,ue,t,a),ye+=32}_t+=8}if(A>=0){var rt=[];rt[1]=A+1,rt[0]=(1<<A+1)-1,ee(rt)}return le(65497),new Uint8Array(C)},n=n||50,(function(){for(var j=String.fromCharCode,q=0;q<256;q++)oe[q]=j(q)})(),e=fe(Y,D),t=fe(R,re),s=fe(se,I),a=fe(W,ie),(function(){for(var j=1,q=2,X=1;X<=15;X++){for(var ae=j;ae<q;ae++)S[32767+ae]=X,_[32767+ae]=[],_[32767+ae][1]=X,_[32767+ae][0]=ae;for(var ue=-(q-1);ue<=-j;ue++)S[32767+ue]=X,_[32767+ue]=[],_[32767+ue][1]=X,_[32767+ue][0]=q-1+ue;j<<=1,q<<=1}})(),(function(){for(var j=0;j<256;j++)de[j]=19595*j,de[j+256|0]=38470*j,de[j+512|0]=7471*j+32768,de[j+768|0]=-11059*j,de[j+1024|0]=-21709*j,de[j+1280|0]=32768*j+8421375,de[j+1536|0]=-27439*j,de[j+1792|0]=-5329*j})(),V(n)}function ca(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vm(n){function e(D){if(!D)throw Error("assert :P")}function t(D,se,I){for(var R=0;4>R;R++)if(D[se+R]!=I.charCodeAt(R))return!0;return!1}function s(D,se,I,R,re){for(var W=0;W<re;W++)D[se+W]=I[R+W]}function a(D,se,I,R){for(var re=0;re<R;re++)D[se+re]=I}function o(D){return new Int32Array(D)}function u(D,se){for(var I=[],R=0;R<D;R++)I.push(new se);return I}function d(D,se){var I=[];return(function R(re,W,ie){for(var fe=ie[W],ee=0;ee<fe&&(re.push(ie.length>W+1?[]:new se),!(ie.length<W+1));ee++)R(re[ee],W+1,ie)})(I,0,D),I}var f=function(){var D=this;function se(h,g){for(var w=1<<g-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function I(h,g,w,k,O){e(!(k%w));do h[g+(k-=w)]=O;while(0<k)}function R(h,g,w,k,O){if(e(2328>=O),512>=O)var M=o(512);else if((M=o(O))==null)return 0;return(function(U,G,K,te,ve,Ae){var ne,we,je=G,Fe=1<<K,Ee=o(16),De=o(16);for(e(ve!=0),e(te!=null),e(U!=null),e(0<K),we=0;we<ve;++we){if(15<te[we])return 0;++Ee[te[we]]}if(Ee[0]==ve)return 0;for(De[1]=0,ne=1;15>ne;++ne){if(Ee[ne]>1<<ne)return 0;De[ne+1]=De[ne]+Ee[ne]}for(we=0;we<ve;++we)ne=te[we],0<te[we]&&(Ae[De[ne]++]=we);if(De[15]==1)return(te=new re).g=0,te.value=Ae[0],I(U,je,1,Fe,te),Fe;var Re,Be=-1,Ue=Fe-1,Nt=0,dt=1,Yt=1,gt=1<<K;for(we=0,ne=1,ve=2;ne<=K;++ne,ve<<=1){if(dt+=Yt<<=1,0>(Yt-=Ee[ne]))return 0;for(;0<Ee[ne];--Ee[ne])(te=new re).g=ne,te.value=Ae[we++],I(U,je+Nt,ve,gt,te),Nt=se(Nt,ne)}for(ne=K+1,ve=2;15>=ne;++ne,ve<<=1){if(dt+=Yt<<=1,0>(Yt-=Ee[ne]))return 0;for(;0<Ee[ne];--Ee[ne]){if(te=new re,(Nt&Ue)!=Be){for(je+=gt,Re=1<<(Be=ne)-K;15>Be&&!(0>=(Re-=Ee[Be]));)++Be,Re<<=1;Fe+=gt=1<<(Re=Be-K),U[G+(Be=Nt&Ue)].g=Re+K,U[G+Be].value=je-G-Be}te.g=ne-K,te.value=Ae[we++],I(U,je+(Nt>>K),ve,gt,te),Nt=se(Nt,ne)}}return dt!=2*De[15]-1?0:Fe})(h,g,w,k,O,M)}function re(){this.value=this.g=0}function W(){this.value=this.g=0}function ie(){this.G=u(5,re),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Hs,W)}function fe(h,g,w,k){e(h!=null),e(g!=null),e(2147483648>k),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=w,h.Jd=g,h.Yc=w+k,h.Zc=4<=k?w+k-4+1:w,he(h)}function ee(h,g){for(var w=0;0<g--;)w|=Ce(h,128)<<g;return w}function z(h,g){var w=ee(h,g);return Se(h)?-w:w}function le(h,g,w,k){var O,M=0;for(e(h!=null),e(g!=null),e(4294967288>k),h.Sb=k,h.Ra=0,h.u=0,h.h=0,4<k&&(k=4),O=0;O<k;++O)M+=g[w+O]<<8*O;h.Ra=M,h.bb=k,h.oa=g,h.pa=w}function be(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Sa-8>>>0,++h.bb,h.u-=8;ae(h)&&(h.h=1,h.u=0)}function V(h,g){if(e(0<=g),!h.h&&g<=Is){var w=X(h)&Os[g];return h.u+=g,be(h),w}return h.h=1,h.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(h){return h.Ra>>>(h.u&Sa-1)>>>0}function ae(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Sa}function ue(h,g){h.u=g,h.h=ae(h)}function ye(h){h.u>=Ci&&(e(h.u>=Ci),be(h))}function he(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Se(h){return ee(h,1)}function Ce(h,g){var w=h.Ca;0>h.b&&he(h);var k=h.b,O=w*g>>>8,M=(h.I>>>k>O)+0;for(M?(w-=O,h.I-=O+1<<k>>>0):w=O+1,k=w,O=0;256<=k;)O+=8,k>>=8;return k=7^O+Ji[k],h.b-=k,h.Ca=(w<<k)-1,M}function ze(h,g,w){h[g+0]=w>>24&255,h[g+1]=w>>16&255,h[g+2]=w>>8&255,h[g+3]=255&w}function Ie(h,g){return h[g+0]|h[g+1]<<8}function Ge(h,g){return Ie(h,g)|h[g+2]<<16}function st(h,g){return Ie(h,g)|Ie(h,g+2)<<16}function Z(h,g){var w=1<<g;return e(h!=null),e(0<g),h.X=o(w),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function Qe(h,g){e(h!=null),e(g!=null),e(h.Xa==g.Xa),s(g.X,0,h.X,0,1<<g.Xa)}function It(){this.X=[],this.Xa=this.Mb=0}function St(h,g,w,k){e(w!=null),e(k!=null);var O=w[0],M=k[0];return O==0&&(O=(h*M+g/2)/g),M==0&&(M=(g*O+h/2)/h),0>=O||0>=M?0:(w[0]=O,k[0]=M,1)}function We(h,g){return h+(1<<g)-1>>>g}function _t(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function rt(h,g){D[g]=function(w,k,O,M,U,G,K){var te;for(te=0;te<U;++te){var ve=D[h](G[K+te-1],O,M+te);G[K+te]=_t(w[k+te],ve)}}}function ut(){this.ud=this.hd=this.jd=0}function tt(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function ur(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Qt(h,g){return ur(h+(h-g+.5>>1))}function Wt(h,g,w){return Math.abs(g-w)-Math.abs(h-w)}function Zt(h,g,w,k,O,M,U){for(k=M[U-1],w=0;w<O;++w)M[U+w]=k=_t(h[g+w],k)}function Dt(h,g,w,k,O){var M;for(M=0;M<w;++M){var U=h[g+M],G=U>>8&255,K=16711935&(K=(K=16711935&U)+((G<<16)+G));k[O+M]=(4278255360&U)+K>>>0}}function mt(h,g){g.jd=255&h,g.hd=h>>8&255,g.ud=h>>16&255}function Ft(h,g,w,k,O,M){var U;for(U=0;U<k;++U){var G=g[w+U],K=G>>>8,te=G,ve=255&(ve=(ve=G>>>16)+((h.jd<<24>>24)*(K<<24>>24)>>>5));te=255&(te=(te+=(h.hd<<24>>24)*(K<<24>>24)>>>5)+((h.ud<<24>>24)*(ve<<24>>24)>>>5)),O[M+U]=(4278255360&G)+(ve<<16)+te}}function ct(h,g,w,k,O){D[g]=function(M,U,G,K,te,ve,Ae,ne,we){for(K=Ae;K<ne;++K)for(Ae=0;Ae<we;++Ae)te[ve++]=O(G[k(M[U++])])},D[h]=function(M,U,G,K,te,ve,Ae){var ne=8>>M.b,we=M.Ea,je=M.K[0],Fe=M.w;if(8>ne)for(M=(1<<M.b)-1,Fe=(1<<ne)-1;U<G;++U){var Ee,De=0;for(Ee=0;Ee<we;++Ee)Ee&M||(De=k(K[te++])),ve[Ae++]=O(je[De&Fe]),De>>=ne}else D["VP8LMapColor"+w](K,te,je,Fe,ve,Ae,U,G,we)}}function Br(h,g,w,k,O){for(w=g+w;g<w;){var M=h[g++];k[O++]=M>>16&255,k[O++]=M>>8&255,k[O++]=255&M}}function er(h,g,w,k,O){for(w=g+w;g<w;){var M=h[g++];k[O++]=M>>16&255,k[O++]=M>>8&255,k[O++]=255&M,k[O++]=M>>24&255}}function Ct(h,g,w,k,O){for(w=g+w;g<w;){var M=(U=h[g++])>>16&240|U>>12&15,U=240&U|U>>28&15;k[O++]=M,k[O++]=U}}function Gt(h,g,w,k,O){for(w=g+w;g<w;){var M=(U=h[g++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;k[O++]=M,k[O++]=U}}function br(h,g,w,k,O){for(w=g+w;g<w;){var M=h[g++];k[O++]=255&M,k[O++]=M>>8&255,k[O++]=M>>16&255}}function jt(h,g,w,k,O,M){if(M==0)for(w=g+w;g<w;)ze(k,((M=h[g++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),O+=32;else s(k,O,h,g,w)}function hr(h,g){D[g][0]=D[h+"0"],D[g][1]=D[h+"1"],D[g][2]=D[h+"2"],D[g][3]=D[h+"3"],D[g][4]=D[h+"4"],D[g][5]=D[h+"5"],D[g][6]=D[h+"6"],D[g][7]=D[h+"7"],D[g][8]=D[h+"8"],D[g][9]=D[h+"9"],D[g][10]=D[h+"10"],D[g][11]=D[h+"11"],D[g][12]=D[h+"12"],D[g][13]=D[h+"13"],D[g][14]=D[h+"0"],D[g][15]=D[h+"0"]}function Lt(h){return h==Lo||h==ao||h==ul||h==dl}function qt(){this.eb=[],this.size=this.A=this.fb=0}function dr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qt,this.f.kb=new dr,this.sd=null}function Tt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ti(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Ur(h,g){var w=h.T,k=g.ba.f.RGBA,O=k.eb,M=k.fb+h.ka*k.A,U=xs[g.ba.S],G=h.y,K=h.O,te=h.f,ve=h.N,Ae=h.ea,ne=h.W,we=g.cc,je=g.dc,Fe=g.Mc,Ee=g.Nc,De=h.ka,Re=h.ka+h.T,Be=h.U,Ue=Be+1>>1;for(De==0?U(G,K,null,null,te,ve,Ae,ne,te,ve,Ae,ne,O,M,null,null,Be):(U(g.ec,g.fc,G,K,we,je,Fe,Ee,te,ve,Ae,ne,O,M-k.A,O,M,Be),++w);De+2<Re;De+=2)we=te,je=ve,Fe=Ae,Ee=ne,ve+=h.Rc,ne+=h.Rc,M+=2*k.A,U(G,(K+=2*h.fa)-h.fa,G,K,we,je,Fe,Ee,te,ve,Ae,ne,O,M-k.A,O,M,Be);return K+=h.fa,h.j+Re<h.o?(s(g.ec,g.fc,G,K,Be),s(g.cc,g.dc,te,ve,Ue),s(g.Mc,g.Nc,Ae,ne,Ue),w--):1&Re||U(G,K,null,null,te,ve,Ae,ne,te,ve,Ae,ne,O,M+k.A,null,null,Be),w}function $n(h,g,w){var k=h.F,O=[h.J];if(k!=null){var M=h.U,U=g.ba.S,G=U==cl||U==ul;g=g.ba.f.RGBA;var K=[0],te=h.ka;K[0]=h.T,h.Kb&&(te==0?--K[0]:(--te,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(K[0]=h.o-h.j-te));var ve=g.eb;te=g.fb+te*g.A,h=ol(k,O[0],h.width,M,K,ve,te+(G?0:3),g.A),e(w==K),h&&Lt(U)&&io(ve,te,G,M,K,g.A)}return 0}function In(h){var g=h.ma,w=g.ba.S,k=11>w,O=w==Pa||w==ll||w==cl||w==Cr||w==12||Lt(w);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!ko(g.Oa,h,O?11:12))return 0;if(O&&Lt(w)&&Ka(),h.da)alert("todo:use_scaling");else{if(k){if(g.Ib=ti,h.Kb){if(w=h.U+1>>1,g.memory=o(h.U+2*w),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+w,g.Ib=Ur,Ka()}}else alert("todo:EmitYUV");O&&(g.Jb=$n,k&&oi())}if(k&&!Bn){for(h=0;256>h;++h)ys[h]=89858*(h-128)+di>>ea,bs[h]=-22014*(h-128)+di,Do[h]=-45773*(h-128),uo[h]=113618*(h-128)+di>>ea;for(h=Nr;h<Sr;++h)g=76283*(h-16)+di>>ea,Yl[h-Nr]=Yr(g,255),Eu[h-Nr]=Yr(g+8>>4,15);Bn=1}return 1}function Pt(h){var g=h.ma,w=h.U,k=h.T;return e(!(1&h.ka)),0>=w||0>=k?0:(w=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,w),g.Dc+=w,1)}function ss(h){h.ma.memory=null}function is(h,g,w,k){return V(h,8)!=47?0:(g[0]=V(h,14)+1,w[0]=V(h,14)+1,k[0]=V(h,1),V(h,3)!=0?0:!h.h)}function Tr(h,g){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+V(g,w)+1}function Sn(h,g){return 120<g?g-120:1<=(w=((w=qd[g-1])>>4)*h+(8-(15&w)))?w:1;var w}function xr(h,g,w){var k=X(w),O=h[g+=255&k].g-8;return 0<O&&(ue(w,w.u+8),k=X(w),g+=h[g].value,g+=k&(1<<O)-1),ue(w,w.u+h[g].g),h[g].value}function Dr(h,g,w){return w.g+=h.g,w.value+=h.value<<g>>>0,e(8>=w.g),h.g}function qr(h,g,w){var k=h.xc;return e((g=k==0?0:h.vc[h.md*(w>>k)+(g>>k)])<h.Wb),h.Ya[g]}function Cs(h,g,w,k){var O=h.ab,M=h.c*g,U=h.C;g=U+g;var G=w,K=k;for(k=h.Ta,w=h.Ua;0<O--;){var te=h.gc[O],ve=U,Ae=g,ne=G,we=K,je=(K=k,G=w,te.Ea);switch(e(ve<Ae),e(Ae<=te.nc),te.hc){case 2:sn(ne,we,(Ae-ve)*je,K,G);break;case 0:var Fe=ve,Ee=Ae,De=K,Re=G,Be=(gt=te).Ea;Fe==0&&(Xi(ne,we,null,null,1,De,Re),Zt(ne,we+1,0,0,Be-1,De,Re+1),we+=Be,Re+=Be,++Fe);for(var Ue=1<<gt.b,Nt=Ue-1,dt=We(Be,gt.b),Yt=gt.K,gt=gt.w+(Fe>>gt.b)*dt;Fe<Ee;){var ir=Yt,en=gt,Kt=1;for(Pi(ne,we,De,Re-Be,1,De,Re);Kt<Be;){var ht=(Kt&~Nt)+Ue;ht>Be&&(ht=Be),(0,to[ir[en++]>>8&15])(ne,we+ +Kt,De,Re+Kt-Be,ht-Kt,De,Re+Kt),Kt=ht}we+=Be,Re+=Be,++Fe&Nt||(gt+=dt)}Ae!=te.nc&&s(K,G-je,K,G+(Ae-ve-1)*je,je);break;case 1:for(je=ne,Ee=we,Be=(ne=te.Ea)-(Re=ne&~(De=(we=1<<te.b)-1)),Fe=We(ne,te.b),Ue=te.K,te=te.w+(ve>>te.b)*Fe;ve<Ae;){for(Nt=Ue,dt=te,Yt=new ut,gt=Ee+Re,ir=Ee+ne;Ee<gt;)mt(Nt[dt++],Yt),jo(Yt,je,Ee,we,K,G),Ee+=we,G+=we;Ee<ir&&(mt(Nt[dt++],Yt),jo(Yt,je,Ee,Be,K,G),Ee+=Be,G+=Be),++ve&De||(te+=Fe)}break;case 3:if(ne==K&&we==G&&0<te.b){for(Ee=K,ne=je=G+(Ae-ve)*je-(Re=(Ae-ve)*We(te.Ea,te.b)),we=K,De=G,Fe=[],Re=(Be=Re)-1;0<=Re;--Re)Fe[Re]=we[De+Re];for(Re=Be-1;0<=Re;--Re)Ee[ne+Re]=Fe[Re];Za(te,ve,Ae,K,je,K,G)}else Za(te,ve,Ae,ne,we,K,G)}G=k,K=w}K!=w&&s(k,w,G,K,M)}function wi(h,g){var w=h.V,k=h.Ba+h.c*h.C,O=g-h.C;if(e(g<=h.l.o),e(16>=O),0<O){var M=h.l,U=h.Ta,G=h.Ua,K=M.width;if(Cs(h,O,w,k),O=G=[G],e((w=h.C)<(k=g)),e(M.v<M.va),k>M.o&&(k=M.o),w<M.j){var te=M.j-w;w=M.j,O[0]+=te*K}if(w>=k?w=0:(O[0]+=4*M.v,M.ka=w-M.j,M.U=M.va-M.v,M.T=k-w,w=1),w){if(G=G[0],11>(w=h.ca).S){var ve=w.f.RGBA,Ae=(k=w.S,O=M.U,M=M.T,te=ve.eb,ve.A),ne=M;for(ve=ve.fb+h.Ma*ve.A;0<ne--;){var we=U,je=G,Fe=O,Ee=te,De=ve;switch(k){case Wl:Ao(we,je,Fe,Ee,De);break;case Pa:Qi(we,je,Fe,Ee,De);break;case Lo:Qi(we,je,Fe,Ee,De),io(Ee,De,0,Fe,1,0);break;case Su:ro(we,je,Fe,Ee,De);break;case ll:jt(we,je,Fe,Ee,De,1);break;case ao:jt(we,je,Fe,Ee,De,1),io(Ee,De,0,Fe,1,0);break;case cl:jt(we,je,Fe,Ee,De,0);break;case ul:jt(we,je,Fe,Ee,De,0),io(Ee,De,1,Fe,1,0);break;case Cr:ja(we,je,Fe,Ee,De);break;case dl:ja(we,je,Fe,Ee,De),Fc(Ee,De,Fe,1,0);break;case Hl:Aa(we,je,Fe,Ee,De);break;default:e(0)}G+=K,ve+=Ae}h.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=g,e(h.C<=h.i)}function as(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var w=h.Ya[g].G,k=h.Ya[g].H;if(0<w[1][k[1]+0].g||0<w[2][k[2]+0].g||0<w[3][k[3]+0].g)return 0}return 1}function ri(h,g,w,k,O,M){if(h.Z!=0){var U=h.qd,G=h.rd;for(e(Jn[h.Z]!=null);g<w;++g)Jn[h.Z](U,G,k,O,k,O,M),U=k,G=O,O+=M;h.qd=U,h.rd=G}}function dn(h,g){var w=h.l.ma,k=w.Z==0||w.Z==1?h.l.j:h.C;if(k=h.C<k?k:h.C,e(g<=h.l.o),g>k){var O=h.l.width,M=w.ca,U=w.tb+O*k,G=h.V,K=h.Ba+h.c*k,te=h.gc;e(h.ab==1),e(te[0].hc==3),ci(te[0],k,g,G,K,M,U),ri(w,k,g,M,U,O)}h.C=h.Ma=g}function Gr(h,g,w,k,O,M,U){var G=h.$/k,K=h.$%k,te=h.m,ve=h.s,Ae=w+h.$,ne=Ae;O=w+k*O;var we=w+k*M,je=280+ve.ua,Fe=h.Pb?G:16777216,Ee=0<ve.ua?ve.Wa:null,De=ve.wc,Re=Ae<we?qr(ve,K,G):null;e(h.C<M),e(we<=O);var Be=!1;e:for(;;){for(;Be||Ae<we;){var Ue=0;if(G>=Fe){var Nt=Ae-w;e((Fe=h).Pb),Fe.wd=Fe.m,Fe.xd=Nt,0<Fe.s.ua&&Qe(Fe.s.Wa,Fe.s.vb),Fe=G+Gl}if(K&De||(Re=qr(ve,K,G)),e(Re!=null),Re.Qb&&(g[Ae]=Re.qb,Be=!0),!Be)if(ye(te),Re.jc){Ue=te,Nt=g;var dt=Ae,Yt=Re.pd[X(Ue)&Hs-1];e(Re.jc),256>Yt.g?(ue(Ue,Ue.u+Yt.g),Nt[dt]=Yt.value,Ue=0):(ue(Ue,Ue.u+Yt.g-256),e(256<=Yt.value),Ue=Yt.value),Ue==0&&(Be=!0)}else Ue=xr(Re.G[0],Re.H[0],te);if(te.h)break;if(Be||256>Ue){if(!Be)if(Re.nd)g[Ae]=(Re.qb|Ue<<8)>>>0;else{if(ye(te),Be=xr(Re.G[1],Re.H[1],te),ye(te),Nt=xr(Re.G[2],Re.H[2],te),dt=xr(Re.G[3],Re.H[3],te),te.h)break;g[Ae]=(dt<<24|Be<<16|Ue<<8|Nt)>>>0}if(Be=!1,++Ae,++K>=k&&(K=0,++G,U!=null&&G<=M&&!(G%16)&&U(h,G),Ee!=null))for(;ne<Ae;)Ue=g[ne++],Ee.X[(506832829*Ue&4294967295)>>>Ee.Mb]=Ue}else if(280>Ue){if(Ue=Tr(Ue-256,te),Nt=xr(Re.G[4],Re.H[4],te),ye(te),Nt=Sn(k,Nt=Tr(Nt,te)),te.h)break;if(Ae-w<Nt||O-Ae<Ue)break e;for(dt=0;dt<Ue;++dt)g[Ae+dt]=g[Ae+dt-Nt];for(Ae+=Ue,K+=Ue;K>=k;)K-=k,++G,U!=null&&G<=M&&!(G%16)&&U(h,G);if(e(Ae<=O),K&De&&(Re=qr(ve,K,G)),Ee!=null)for(;ne<Ae;)Ue=g[ne++],Ee.X[(506832829*Ue&4294967295)>>>Ee.Mb]=Ue}else{if(!(Ue<je))break e;for(Be=Ue-280,e(Ee!=null);ne<Ae;)Ue=g[ne++],Ee.X[(506832829*Ue&4294967295)>>>Ee.Mb]=Ue;Ue=Ae,e(!(Be>>>(Nt=Ee).Xa)),g[Ue]=Nt.X[Be],Be=!0}Be||e(te.h==ae(te))}if(h.Pb&&te.h&&Ae<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Qe(h.s.vb,h.s.Wa);else{if(te.h)break e;U?.(h,G>M?M:G),h.a=0,h.$=Ae-w}return 1}return h.a=3,0}function Dn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,e(h!=null)}function Ui(){var h=new it;return h==null?null:(h.a=0,h.xb=Oo,hr("Predictor","VP8LPredictors"),hr("Predictor","VP8LPredictors_C"),hr("PredictorAdd","VP8LPredictorsAdd"),hr("PredictorAdd","VP8LPredictorsAdd_C"),sn=Dt,jo=Ft,Ao=Br,Qi=er,ja=Ct,Aa=Gt,ro=br,D.VP8LMapColor32b=Ei,D.VP8LMapColor8b=eo,h)}function Wn(h,g,w,k,O){var M=1,U=[h],G=[g],K=k.m,te=k.s,ve=null,Ae=0;e:for(;;){if(w)for(;M&&V(K,1);){var ne=U,we=G,je=k,Fe=1,Ee=je.m,De=je.gc[je.ab],Re=V(Ee,2);if(je.Oc&1<<Re)M=0;else{switch(je.Oc|=1<<Re,De.hc=Re,De.Ea=ne[0],De.nc=we[0],De.K=[null],++je.ab,e(4>=je.ab),Re){case 0:case 1:De.b=V(Ee,3)+2,Fe=Wn(We(De.Ea,De.b),We(De.nc,De.b),0,je,De.K),De.K=De.K[0];break;case 3:var Be,Ue=V(Ee,8)+1,Nt=16<Ue?0:4<Ue?1:2<Ue?2:3;if(ne[0]=We(De.Ea,Nt),De.b=Nt,Be=Fe=Wn(Ue,1,0,je,De.K)){var dt,Yt=Ue,gt=De,ir=1<<(8>>gt.b),en=o(ir);if(en==null)Be=0;else{var Kt=gt.K[0],ht=gt.w;for(en[0]=gt.K[0][0],dt=1;dt<1*Yt;++dt)en[dt]=_t(Kt[ht+dt],en[dt-1]);for(;dt<4*ir;++dt)en[dt]=0;gt.K[0]=null,gt.K[0]=en,Be=1}}Fe=Be;break;case 2:break;default:e(0)}M=Fe}}if(U=U[0],G=G[0],M&&V(K,1)&&!(M=1<=(Ae=V(K,4))&&11>=Ae)){k.a=3;break e}var Ze;if(Ze=M)t:{var an,zt,sr,Ir=k,Cn=U,fn=G,Kr=Ae,yn=w,Pn=Ir.m,$r=Ir.s,or=[null],mr=1,Wr=0,gr=Au[Kr];r:for(;;){if(yn&&V(Pn,1)){var tn=V(Pn,3)+2,rn=We(Cn,tn),Pr=We(fn,tn),Xn=rn*Pr;if(!Wn(rn,Pr,0,Ir,or))break r;for(or=or[0],$r.xc=tn,an=0;an<Xn;++an){var jr=or[an]>>8&65535;or[an]=jr,jr>=mr&&(mr=jr+1)}}if(Pn.h)break r;for(zt=0;5>zt;++zt){var Er=oo[zt];!zt&&0<Kr&&(Er+=1<<Kr),Wr<Er&&(Wr=Er)}var pn=u(mr*gr,re),Un=mr,ws=u(Un,ie);if(ws==null)var on=null;else e(65536>=Un),on=ws;var ln=o(Wr);if(on==null||ln==null||pn==null){Ir.a=1;break r}var Qn=pn;for(an=sr=0;an<mr;++an){var Lr=on[an],Zn=Lr.G,Ys=Lr.H,hi=0,En=1,cn=0;for(zt=0;5>zt;++zt){Er=oo[zt],Zn[zt]=Qn,Ys[zt]=sr,!zt&&0<Kr&&(Er+=1<<Kr);s:{var Ta,ra=Er,Ro=Ir,Oi=ln,Tu=Qn,Kc=sr,Rr=0,fi=Ro.m,Jc=V(fi,1);if(a(Oi,0,0,ra),Jc){var Xc=V(fi,1)+1,Kl=V(fi,1),Jl=V(fi,Kl==0?1:8);Oi[Jl]=1,Xc==2&&(Oi[Jl=V(fi,8)]=1);var Ii=1}else{var Hr=o(19),mn=V(fi,4)+4;if(19<mn){Ro.a=3;var un=0;break s}for(Ta=0;Ta<mn;++Ta)Hr[Ud[Ta]]=V(fi,3);var Fo=void 0,na=void 0,Mo=Ro,Vd=Hr,bn=ra,Xl=Oi,gl=0,Di=Mo.m,pi=8,Ds=u(128,re);n:for(;R(Ds,0,7,Vd,19);){if(V(Di,1)){var vl=2+2*V(Di,3);if((Fo=2+V(Di,vl))>bn)break n}else Fo=bn;for(na=0;na<bn&&Fo--;){ye(Di);var Ql=Ds[0+(127&X(Di))];ue(Di,Di.u+Ql.g);var Oa=Ql.value;if(16>Oa)Xl[na++]=Oa,Oa!=0&&(pi=Oa);else{var Ou=Oa==16,Qc=Oa-16,Iu=Vl[Qc],Zc=V(Di,hl[Qc])+Iu;if(na+Zc>bn)break n;for(var Du=Ou?pi:0;0<Zc--;)Xl[na++]=Du}}gl=1;break n}gl||(Mo.a=3),Ii=gl}(Ii=Ii&&!fi.h)&&(Rr=R(Tu,Kc,8,Oi,ra)),Ii&&Rr!=0?un=Rr:(Ro.a=3,un=0)}if(un==0)break r;if(En&&ju[zt]==1&&(En=Qn[sr].g==0),hi+=Qn[sr].g,sr+=un,3>=zt){var Bo,Zl=ln[0];for(Bo=1;Bo<Er;++Bo)ln[Bo]>Zl&&(Zl=ln[Bo]);cn+=Zl}}if(Lr.nd=En,Lr.Qb=0,En&&(Lr.qb=(Zn[3][Ys[3]+0].value<<24|Zn[1][Ys[1]+0].value<<16|Zn[2][Ys[2]+0].value)>>>0,hi==0&&256>Zn[0][Ys[0]+0].value&&(Lr.Qb=1,Lr.qb+=Zn[0][Ys[0]+0].value<<8)),Lr.jc=!Lr.Qb&&6>cn,Lr.jc){var xl,Rs=Lr;for(xl=0;xl<Hs;++xl){var sa=xl,mi=Rs.pd[sa],fo=Rs.G[0][Rs.H[0]+sa];256<=fo.value?(mi.g=fo.g+256,mi.value=fo.value):(mi.g=0,mi.value=0,sa>>=Dr(fo,8,mi),sa>>=Dr(Rs.G[1][Rs.H[1]+sa],16,mi),sa>>=Dr(Rs.G[2][Rs.H[2]+sa],0,mi),Dr(Rs.G[3][Rs.H[3]+sa],24,mi))}}}$r.vc=or,$r.Wb=mr,$r.Ya=on,$r.yc=pn,Ze=1;break t}Ze=0}if(!(M=Ze)){k.a=3;break e}if(0<Ae){if(te.ua=1<<Ae,!Z(te.Wa,Ae)){k.a=1,M=0;break e}}else te.ua=0;var ec=k,tc=U,Ru=G,rc=ec.s,nc=rc.xc;if(ec.c=tc,ec.i=Ru,rc.md=We(tc,nc),rc.wc=nc==0?-1:(1<<nc)-1,w){k.xb=Ti;break e}if((ve=o(U*G))==null){k.a=1,M=0;break e}M=(M=Gr(k,ve,0,U,G,G,null))&&!K.h;break e}return M?(O!=null?O[0]=ve:(e(ve==null),e(w)),k.$=0,w||Dn(te)):Dn(te),M}function _i(h,g){var w=h.c*h.i,k=w+g+16*g;return e(h.c<=g),h.V=o(k),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+g,1)}function ps(h,g){var w=h.C,k=g-w,O=h.V,M=h.Ba+h.c*w;for(e(g<=h.l.o);0<k;){var U=16<k?16:k,G=h.l.ma,K=h.l.width,te=K*U,ve=G.ca,Ae=G.tb+K*w,ne=h.Ta,we=h.Ua;Cs(h,U,O,M),Mc(ne,we,ve,Ae,te),ri(G,w,w+U,ve,Ae,K),k-=U,O+=U*h.c,w+=U}e(w==g),h.C=h.Ma=g}function Ni(){this.ub=this.yd=this.td=this.Rb=0}function ni(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ki(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function wr(){this.Yb=(function(){var h=[];return(function g(w,k,O){for(var M=O[k],U=0;U<M&&(w.push(O.length>k+1?[]:0),!(O.length<k+1));U++)g(w[U],k+1,O)})(h,0,[3,11]),h})()}function Bs(){this.jb=o(3),this.Wc=d([4,8],wr),this.Xc=d([4,17],wr)}function qi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Hn(){this.ld=this.La=this.dd=this.tc=0}function Ps(){this.Na=this.la=0}function Ua(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ma(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Si(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hn),this.Y=0,this.ya=Array(new ma),this.aa=0,this.l=new ga}function os(){this.y=o(16),this.f=o(8),this.ea=o(8)}function qa(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new Ni,this.Kc=new ni,this.ed=new qi,this.Qa=new ki,this.Ic=this.$c=this.Aa=0,this.D=new Si,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,j),this.ia=0,this.pb=u(4,Ua),this.Pa=new Bs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new os),this.Hd=0,this.rb=Array(new Ps),this.sb=0,this.wa=Array(new Hn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ma),this.L=this.aa=0,this.gd=d([4,2],Hn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yr(h,g){return 0>h?0:h>g?g:h}function ga(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ul(){var h=new qa;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,lo||(lo=Es)),h}function zr(h,g,w){return h.a==0&&(h.a=g,h.sc=w,h.cb=0),0}function si(h,g,w){return 3<=w&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function Vn(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return zr(h,2,"null VP8Io passed to VP8GetHeaders()");var w=g.data,k=g.w,O=g.ha;if(4>O)return zr(h,7,"Truncated header.");var M=w[k+0]|w[k+1]<<8|w[k+2]<<16,U=h.Od;if(U.Rb=!(1&M),U.td=M>>1&7,U.yd=M>>4&1,U.ub=M>>5,3<U.td)return zr(h,3,"Incorrect keyframe parameters.");if(!U.yd)return zr(h,4,"Frame not displayable.");k+=3,O-=3;var G=h.Kc;if(U.Rb){if(7>O)return zr(h,7,"cannot parse picture header");if(!si(w,k,O))return zr(h,3,"Bad code word");G.c=16383&(w[k+4]<<8|w[k+3]),G.Td=w[k+4]>>6,G.i=16383&(w[k+6]<<8|w[k+5]),G.Ud=w[k+6]>>6,k+=7,O-=7,h.za=G.c+15>>4,h.Ub=G.i+15>>4,g.width=G.c,g.height=G.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,a((M=h.Pa).jb,0,255,M.jb.length),e((M=h.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,a(M.Zb,0,0,M.Zb.length),a(M.Lb,0,0,M.Lb)}if(U.ub>O)return zr(h,7,"bad partition length");fe(M=h.m,w,k,U.ub),k+=U.ub,O-=U.ub,U.Rb&&(G.Ld=Se(M),G.Kd=Se(M)),G=h.Qa;var K,te=h.Pa;if(e(M!=null),e(G!=null),G.Cb=Se(M),G.Cb){if(G.Bb=Se(M),Se(M)){for(G.Fb=Se(M),K=0;4>K;++K)G.Zb[K]=Se(M)?z(M,7):0;for(K=0;4>K;++K)G.Lb[K]=Se(M)?z(M,6):0}if(G.Bb)for(K=0;3>K;++K)te.jb[K]=Se(M)?ee(M,8):255}else G.Bb=0;if(M.Ka)return zr(h,3,"cannot parse segment header");if((G=h.ed).zd=Se(M),G.Tb=ee(M,6),G.wb=ee(M,3),G.Pc=Se(M),G.Pc&&Se(M)){for(te=0;4>te;++te)Se(M)&&(G.vd[te]=z(M,6));for(te=0;4>te;++te)Se(M)&&(G.od[te]=z(M,6))}if(h.L=G.Tb==0?0:G.zd?1:2,M.Ka)return zr(h,3,"cannot parse filter header");var ve=O;if(O=K=k,k=K+ve,G=ve,h.Xb=(1<<ee(h.m,2))-1,ve<3*(te=h.Xb))w=7;else{for(K+=3*te,G-=3*te,ve=0;ve<te;++ve){var Ae=w[O+0]|w[O+1]<<8|w[O+2]<<16;Ae>G&&(Ae=G),fe(h.Jc[+ve],w,K,Ae),K+=Ae,G-=Ae,O+=3}fe(h.Jc[+te],w,K,G),w=K<k?0:5}if(w!=0)return zr(h,w,"cannot parse partitions");for(w=ee(K=h.m,7),O=Se(K)?z(K,4):0,k=Se(K)?z(K,4):0,G=Se(K)?z(K,4):0,te=Se(K)?z(K,4):0,K=Se(K)?z(K,4):0,ve=h.Qa,Ae=0;4>Ae;++Ae){if(ve.Cb){var ne=ve.Zb[Ae];ve.Fb||(ne+=w)}else{if(0<Ae){h.pb[Ae]=h.pb[0];continue}ne=w}var we=h.pb[Ae];we.Sc[0]=To[Yr(ne+O,127)],we.Sc[1]=fl[Yr(ne+0,127)],we.Eb[0]=2*To[Yr(ne+k,127)],we.Eb[1]=101581*fl[Yr(ne+G,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=To[Yr(ne+te,117)],we.Qc[1]=fl[Yr(ne+K,127)],we.lc=ne+K}if(!U.Rb)return zr(h,4,"Not a key frame.");for(Se(M),U=h.Pa,w=0;4>w;++w){for(O=0;8>O;++O)for(k=0;3>k;++k)for(G=0;11>G;++G)te=Ce(M,$d[w][O][k][G])?ee(M,8):Pu[w][O][k][G],U.Wc[w][O].Yb[k][G]=te;for(O=0;17>O;++O)U.Xc[w][O]=U.Wc[w][Vc[O]]}return h.kc=Se(M),h.kc&&(h.Bd=ee(M,8)),h.cb=1}function Es(h,g,w,k,O,M,U){var G=g[O].Yb[w];for(w=0;16>O;++O){if(!Ce(h,G[w+0]))return O;for(;!Ce(h,G[w+1]);)if(G=g[++O].Yb[0],w=0,O==16)return 16;var K=g[O+1].Yb;if(Ce(h,G[w+2])){var te=h,ve=0;if(Ce(te,(ne=G)[(Ae=w)+3]))if(Ce(te,ne[Ae+6])){for(G=0,Ae=2*(ve=Ce(te,ne[Ae+8]))+(ne=Ce(te,ne[Ae+9+ve])),ve=0,ne=Wc[Ae];ne[G];++G)ve+=ve+Ce(te,ne[G]);ve+=3+(8<<Ae)}else Ce(te,ne[Ae+7])?(ve=7+2*Ce(te,165),ve+=Ce(te,145)):ve=5+Ce(te,159);else ve=Ce(te,ne[Ae+4])?3+Ce(te,ne[Ae+5]):2;G=K[2]}else ve=1,G=K[1];K=U+Hc[O],0>(te=h).b&&he(te);var Ae,ne=te.b,we=(Ae=te.Ca>>1)-(te.I>>ne)>>31;--te.b,te.Ca+=we,te.Ca|=1,te.I-=(Ae+1&we)<<ne,M[K]=((ve^we)-we)*k[(0<O)+0]}return 16}function ii(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function ls(h,g,w,k,O){O=h[g+w+32*k]+(O>>3),h[g+w+32*k]=-256&O?0>O?0:255:O}function Xr(h,g,w,k,O,M){ls(h,g,0,w,k+O),ls(h,g,1,w,k+M),ls(h,g,2,w,k-M),ls(h,g,3,w,k-O)}function jn(h){return(20091*h>>16)+h}function za(h,g,w,k){var O,M=0,U=o(16);for(O=0;4>O;++O){var G=h[g+0]+h[g+8],K=h[g+0]-h[g+8],te=(35468*h[g+4]>>16)-jn(h[g+12]),ve=jn(h[g+4])+(35468*h[g+12]>>16);U[M+0]=G+ve,U[M+1]=K+te,U[M+2]=K-te,U[M+3]=G-ve,M+=4,g++}for(O=M=0;4>O;++O)G=(h=U[M+0]+4)+U[M+8],K=h-U[M+8],te=(35468*U[M+4]>>16)-jn(U[M+12]),ls(w,k,0,0,G+(ve=jn(U[M+4])+(35468*U[M+12]>>16))),ls(w,k,1,0,K+te),ls(w,k,2,0,K-te),ls(w,k,3,0,G-ve),M++,k+=32}function zi(h,g,w,k){var O=h[g+0]+4,M=35468*h[g+4]>>16,U=jn(h[g+4]),G=35468*h[g+1]>>16;Xr(w,k,0,O+U,h=jn(h[g+1]),G),Xr(w,k,1,O+M,h,G),Xr(w,k,2,O-M,h,G),Xr(w,k,3,O-U,h,G)}function Us(h,g,w,k,O){za(h,g,w,k),O&&za(h,g+16,w,k+4)}function qs(h,g,w,k){no(h,g+0,w,k,1),no(h,g+32,w,k+128,1)}function va(h,g,w,k){var O;for(h=h[g+0]+4,O=0;4>O;++O)for(g=0;4>g;++g)ls(w,k,g,O,h)}function cr(h,g,w,k){h[g+0]&&pr(h,g+0,w,k),h[g+16]&&pr(h,g+16,w,k+4),h[g+32]&&pr(h,g+32,w,k+128),h[g+48]&&pr(h,g+48,w,k+128+4)}function $i(h,g,w,k){var O,M=o(16);for(O=0;4>O;++O){var U=h[g+0+O]+h[g+12+O],G=h[g+4+O]+h[g+8+O],K=h[g+4+O]-h[g+8+O],te=h[g+0+O]-h[g+12+O];M[0+O]=U+G,M[8+O]=U-G,M[4+O]=te+K,M[12+O]=te-K}for(O=0;4>O;++O)U=(h=M[0+4*O]+3)+M[3+4*O],G=M[1+4*O]+M[2+4*O],K=M[1+4*O]-M[2+4*O],te=h-M[3+4*O],w[k+0]=U+G>>3,w[k+16]=te+K>>3,w[k+32]=U-G>>3,w[k+48]=te-K>>3,k+=64}function ji(h,g,w){var k,O=g-32,M=us,U=255-h[O-1];for(k=0;k<w;++k){var G,K=M,te=U+h[g-1];for(G=0;G<w;++G)h[g+G]=K[te+h[O+G]];g+=32}}function $a(h,g){ji(h,g,4)}function bo(h,g){ji(h,g,8)}function wo(h,g){ji(h,g,16)}function Wi(h,g){var w;for(w=0;16>w;++w)s(h,g+32*w,h,g-32,16)}function xa(h,g){var w;for(w=16;0<w;--w)a(h,g,h[g-1],16),g+=32}function Gn(h,g,w){var k;for(k=0;16>k;++k)a(g,w+32*k,h,16)}function zs(h,g){var w,k=16;for(w=0;16>w;++w)k+=h[g-1+32*w]+h[g+w-32];Gn(k>>5,h,g)}function Yn(h,g){var w,k=8;for(w=0;16>w;++w)k+=h[g-1+32*w];Gn(k>>4,h,g)}function ms(h,g){var w,k=8;for(w=0;16>w;++w)k+=h[g+w-32];Gn(k>>4,h,g)}function Hi(h,g){Gn(128,h,g)}function Rt(h,g,w){return h+2*g+w+2>>2}function $s(h,g){var w,k=g-32;for(k=new Uint8Array([Rt(h[k-1],h[k+0],h[k+1]),Rt(h[k+0],h[k+1],h[k+2]),Rt(h[k+1],h[k+2],h[k+3]),Rt(h[k+2],h[k+3],h[k+4])]),w=0;4>w;++w)s(h,g+32*w,k,0,k.length)}function Wa(h,g){var w=h[g-1],k=h[g-1+32],O=h[g-1+64],M=h[g-1+96];ze(h,g+0,16843009*Rt(h[g-1-32],w,k)),ze(h,g+32,16843009*Rt(w,k,O)),ze(h,g+64,16843009*Rt(k,O,M)),ze(h,g+96,16843009*Rt(O,M,M))}function Ha(h,g){var w,k=4;for(w=0;4>w;++w)k+=h[g+w-32]+h[g-1+32*w];for(k>>=3,w=0;4>w;++w)a(h,g+32*w,k,4)}function Kn(h,g){var w=h[g-1+0],k=h[g-1+32],O=h[g-1+64],M=h[g-1-32],U=h[g+0-32],G=h[g+1-32],K=h[g+2-32],te=h[g+3-32];h[g+0+96]=Rt(k,O,h[g-1+96]),h[g+1+96]=h[g+0+64]=Rt(w,k,O),h[g+2+96]=h[g+1+64]=h[g+0+32]=Rt(M,w,k),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=Rt(U,M,w),h[g+3+64]=h[g+2+32]=h[g+1+0]=Rt(G,U,M),h[g+3+32]=h[g+2+0]=Rt(K,G,U),h[g+3+0]=Rt(te,K,G)}function ai(h,g){var w=h[g+1-32],k=h[g+2-32],O=h[g+3-32],M=h[g+4-32],U=h[g+5-32],G=h[g+6-32],K=h[g+7-32];h[g+0+0]=Rt(h[g+0-32],w,k),h[g+1+0]=h[g+0+32]=Rt(w,k,O),h[g+2+0]=h[g+1+32]=h[g+0+64]=Rt(k,O,M),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=Rt(O,M,U),h[g+3+32]=h[g+2+64]=h[g+1+96]=Rt(M,U,G),h[g+3+64]=h[g+2+96]=Rt(U,G,K),h[g+3+96]=Rt(G,K,K)}function _o(h,g){var w=h[g-1+0],k=h[g-1+32],O=h[g-1+64],M=h[g-1-32],U=h[g+0-32],G=h[g+1-32],K=h[g+2-32],te=h[g+3-32];h[g+0+0]=h[g+1+64]=M+U+1>>1,h[g+1+0]=h[g+2+64]=U+G+1>>1,h[g+2+0]=h[g+3+64]=G+K+1>>1,h[g+3+0]=K+te+1>>1,h[g+0+96]=Rt(O,k,w),h[g+0+64]=Rt(k,w,M),h[g+0+32]=h[g+1+96]=Rt(w,M,U),h[g+1+32]=h[g+2+96]=Rt(M,U,G),h[g+2+32]=h[g+3+96]=Rt(U,G,K),h[g+3+32]=Rt(G,K,te)}function Va(h,g){var w=h[g+0-32],k=h[g+1-32],O=h[g+2-32],M=h[g+3-32],U=h[g+4-32],G=h[g+5-32],K=h[g+6-32],te=h[g+7-32];h[g+0+0]=w+k+1>>1,h[g+1+0]=h[g+0+64]=k+O+1>>1,h[g+2+0]=h[g+1+64]=O+M+1>>1,h[g+3+0]=h[g+2+64]=M+U+1>>1,h[g+0+32]=Rt(w,k,O),h[g+1+32]=h[g+0+96]=Rt(k,O,M),h[g+2+32]=h[g+1+96]=Rt(O,M,U),h[g+3+32]=h[g+2+96]=Rt(M,U,G),h[g+3+64]=Rt(U,G,K),h[g+3+96]=Rt(G,K,te)}function ya(h,g){var w=h[g-1+0],k=h[g-1+32],O=h[g-1+64],M=h[g-1+96];h[g+0+0]=w+k+1>>1,h[g+2+0]=h[g+0+32]=k+O+1>>1,h[g+2+32]=h[g+0+64]=O+M+1>>1,h[g+1+0]=Rt(w,k,O),h[g+3+0]=h[g+1+32]=Rt(k,O,M),h[g+3+32]=h[g+1+64]=Rt(O,M,M),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=M}function Ga(h,g){var w=h[g-1+0],k=h[g-1+32],O=h[g-1+64],M=h[g-1+96],U=h[g-1-32],G=h[g+0-32],K=h[g+1-32],te=h[g+2-32];h[g+0+0]=h[g+2+32]=w+U+1>>1,h[g+0+32]=h[g+2+64]=k+w+1>>1,h[g+0+64]=h[g+2+96]=O+k+1>>1,h[g+0+96]=M+O+1>>1,h[g+3+0]=Rt(G,K,te),h[g+2+0]=Rt(U,G,K),h[g+1+0]=h[g+3+32]=Rt(w,U,G),h[g+1+32]=h[g+3+64]=Rt(k,w,U),h[g+1+64]=h[g+3+96]=Rt(O,k,w),h[g+1+96]=Rt(M,O,k)}function Rn(h,g){var w;for(w=0;8>w;++w)s(h,g+32*w,h,g-32,8)}function Ws(h,g){var w;for(w=0;8>w;++w)a(h,g,h[g-1],8),g+=32}function An(h,g,w){var k;for(k=0;8>k;++k)a(g,w+32*k,h,8)}function ba(h,g){var w,k=8;for(w=0;8>w;++w)k+=h[g+w-32]+h[g-1+32*w];An(k>>4,h,g)}function Ya(h,g){var w,k=4;for(w=0;8>w;++w)k+=h[g+w-32];An(k>>3,h,g)}function Ls(h,g){var w,k=4;for(w=0;8>w;++w)k+=h[g-1+32*w];An(k>>3,h,g)}function Vi(h,g){An(128,h,g)}function xn(h,g,w){var k=h[g-w],O=h[g+0],M=3*(O-k)+Li[1020+h[g-2*w]-h[g+w]],U=Eo[112+(M+4>>3)];h[g-w]=us[255+k+Eo[112+(M+3>>3)]],h[g+0]=us[255+O-U]}function P(h,g,w,k){var O=h[g+0],M=h[g+w];return Vs[255+h[g-2*w]-h[g-w]]>k||Vs[255+M-O]>k}function ge(h,g,w,k){return 4*Vs[255+h[g-w]-h[g+0]]+Vs[255+h[g-2*w]-h[g+w]]<=k}function Ne(h,g,w,k,O){var M=h[g-3*w],U=h[g-2*w],G=h[g-w],K=h[g+0],te=h[g+w],ve=h[g+2*w],Ae=h[g+3*w];return 4*Vs[255+G-K]+Vs[255+U-te]>k?0:Vs[255+h[g-4*w]-M]<=O&&Vs[255+M-U]<=O&&Vs[255+U-G]<=O&&Vs[255+Ae-ve]<=O&&Vs[255+ve-te]<=O&&Vs[255+te-K]<=O}function Le(h,g,w,k){var O=2*k+1;for(k=0;16>k;++k)ge(h,g+k,w,O)&&xn(h,g+k,w)}function qe(h,g,w,k){var O=2*k+1;for(k=0;16>k;++k)ge(h,g+k*w,1,O)&&xn(h,g+k*w,1)}function et(h,g,w,k){var O;for(O=3;0<O;--O)Le(h,g+=4*w,w,k)}function at(h,g,w,k){var O;for(O=3;0<O;--O)qe(h,g+=4,w,k)}function nt(h,g,w,k,O,M,U,G){for(M=2*M+1;0<O--;){if(Ne(h,g,w,M,U))if(P(h,g,w,G))xn(h,g,w);else{var K=h,te=g,ve=w,Ae=K[te-2*ve],ne=K[te-ve],we=K[te+0],je=K[te+ve],Fe=K[te+2*ve],Ee=27*(Re=Li[1020+3*(we-ne)+Li[1020+Ae-je]])+63>>7,De=18*Re+63>>7,Re=9*Re+63>>7;K[te-3*ve]=us[255+K[te-3*ve]+Re],K[te-2*ve]=us[255+Ae+De],K[te-ve]=us[255+ne+Ee],K[te+0]=us[255+we-Ee],K[te+ve]=us[255+je-De],K[te+2*ve]=us[255+Fe-Re]}g+=k}}function Xe(h,g,w,k,O,M,U,G){for(M=2*M+1;0<O--;){if(Ne(h,g,w,M,U))if(P(h,g,w,G))xn(h,g,w);else{var K=h,te=g,ve=w,Ae=K[te-ve],ne=K[te+0],we=K[te+ve],je=Eo[112+(4+(Fe=3*(ne-Ae))>>3)],Fe=Eo[112+(Fe+3>>3)],Ee=je+1>>1;K[te-2*ve]=us[255+K[te-2*ve]+Ee],K[te-ve]=us[255+Ae+Fe],K[te+0]=us[255+ne-je],K[te+ve]=us[255+we-Ee]}g+=k}}function ot(h,g,w,k,O,M){nt(h,g,w,1,16,k,O,M)}function vt(h,g,w,k,O,M){nt(h,g,1,w,16,k,O,M)}function rr(h,g,w,k,O,M){var U;for(U=3;0<U;--U)Xe(h,g+=4*w,w,1,16,k,O,M)}function x(h,g,w,k,O,M){var U;for(U=3;0<U;--U)Xe(h,g+=4,1,w,16,k,O,M)}function T(h,g,w,k,O,M,U,G){nt(h,g,O,1,8,M,U,G),nt(w,k,O,1,8,M,U,G)}function Q(h,g,w,k,O,M,U,G){nt(h,g,1,O,8,M,U,G),nt(w,k,1,O,8,M,U,G)}function pe(h,g,w,k,O,M,U,G){Xe(h,g+4*O,O,1,8,M,U,G),Xe(w,k+4*O,O,1,8,M,U,G)}function ke(h,g,w,k,O,M,U,G){Xe(h,g+4,1,O,8,M,U,G),Xe(w,k+4,1,O,8,M,U,G)}function Me(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bt(){this.ua=0,this.Wa=new It,this.vb=new It,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new re}function it(){this.xb=this.a=0,this.l=new ga,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bt,this.ab=0,this.gc=u(4,ft),this.Oc=0}function Je(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ga,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ot(h,g,w,k,O,M,U){for(h=h==null?0:h[g+0],g=0;g<U;++g)O[M+g]=h+w[k+g]&255,h=O[M+g]}function tr(h,g,w,k,O,M,U){var G;if(h==null)Ot(null,null,w,k,O,M,U);else for(G=0;G<U;++G)O[M+G]=h[g+G]+w[k+G]&255}function _r(h,g,w,k,O,M,U){if(h==null)Ot(null,null,w,k,O,M,U);else{var G,K=h[g+0],te=K,ve=K;for(G=0;G<U;++G)te=ve+(K=h[g+G])-te,ve=w[k+G]+(-256&te?0>te?0:255:te)&255,te=K,O[M+G]=ve}}function nr(h,g,w,k){var O=g.width,M=g.o;if(e(h!=null&&g!=null),0>w||0>=k||w+k>M)return null;if(!h.Cc){if(h.ga==null){var U;if(h.ga=new Je,(U=h.ga==null)||(U=g.width*g.o,e(h.Gb.length==0),h.Gb=o(U),h.Uc=0,h.Gb==null?U=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,U=1),U=!U),!U){U=h.ga;var G=h.Fa,K=h.P,te=h.qc,ve=h.mb,Ae=h.nb,ne=K+1,we=te-1,je=U.l;if(e(G!=null&&ve!=null&&g!=null),Jn[0]=null,Jn[1]=Ot,Jn[2]=tr,Jn[3]=_r,U.ca=ve,U.tb=Ae,U.c=g.width,U.i=g.height,e(0<U.c&&0<U.i),1>=te)g=0;else if(U.$a=3&G[K+0],U.Z=G[K+0]>>2&3,U.Lc=G[K+0]>>4&3,K=G[K+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||K)g=0;else if(je.put=Pt,je.ac=In,je.bc=ss,je.ma=U,je.width=g.width,je.height=g.height,je.Da=g.Da,je.v=g.v,je.va=g.va,je.j=g.j,je.o=g.o,U.$a)e:{e(U.$a==1),g=Ui();t:for(;;){if(g==null){g=0;break e}if(e(U!=null),U.mc=g,g.c=U.c,g.i=U.i,g.l=U.l,g.l.ma=U,g.l.width=U.c,g.l.height=U.i,g.a=0,le(g.m,G,ne,we),!Wn(U.c,U.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&as(g.s)?(U.ic=1,G=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(G),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(U.ic=0,g=_i(g,U.c)),!g))break t;g=1;break e}U.mc=null,g=0}else g=we>=U.c*U.i;U=!g}if(U)return null;h.ga.Lc!=1?h.Ga=0:k=M-w}e(h.ga!=null),e(w+k<=M);e:{if(g=(G=h.ga).c,M=G.l.o,G.$a==0){if(ne=h.rc,we=h.Vc,je=h.Fa,K=h.P+1+w*g,te=h.mb,ve=h.nb+w*g,e(K<=h.P+h.qc),G.Z!=0)for(e(Jn[G.Z]!=null),U=0;U<k;++U)Jn[G.Z](ne,we,je,K,te,ve,g),ne=te,we=ve,ve+=g,K+=g;else for(U=0;U<k;++U)s(te,ve,je,K,g),ne=te,we=ve,ve+=g,K+=g;h.rc=ne,h.Vc=we}else{if(e(G.mc!=null),g=w+k,e((U=G.mc)!=null),e(g<=U.i),U.C>=g)g=1;else if(G.ic||oi(),G.ic){G=U.V,ne=U.Ba,we=U.c;var Fe=U.i,Ee=(je=1,K=U.$/we,te=U.$%we,ve=U.m,Ae=U.s,U.$),De=we*Fe,Re=we*g,Be=Ae.wc,Ue=Ee<Re?qr(Ae,te,K):null;e(Ee<=De),e(g<=Fe),e(as(Ae));t:for(;;){for(;!ve.h&&Ee<Re;){if(te&Be||(Ue=qr(Ae,te,K)),e(Ue!=null),ye(ve),256>(Fe=xr(Ue.G[0],Ue.H[0],ve)))G[ne+Ee]=Fe,++Ee,++te>=we&&(te=0,++K<=g&&!(K%16)&&dn(U,K));else{if(!(280>Fe)){je=0;break t}Fe=Tr(Fe-256,ve);var Nt,dt=xr(Ue.G[4],Ue.H[4],ve);if(ye(ve),!(Ee>=(dt=Sn(we,dt=Tr(dt,ve)))&&De-Ee>=Fe)){je=0;break t}for(Nt=0;Nt<Fe;++Nt)G[ne+Ee+Nt]=G[ne+Ee+Nt-dt];for(Ee+=Fe,te+=Fe;te>=we;)te-=we,++K<=g&&!(K%16)&&dn(U,K);Ee<Re&&te&Be&&(Ue=qr(Ae,te,K))}e(ve.h==ae(ve))}dn(U,K>g?g:K);break t}!je||ve.h&&Ee<De?(je=0,U.a=ve.h?5:3):U.$=Ee,g=je}else g=Gr(U,U.V,U.Ba,U.c,U.i,g,ps);if(!g){k=0;break e}}w+k>=M&&(h.Cc=1),k=1}if(!k)return null;if(h.Cc&&((k=h.ga)!=null&&(k.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*O}function fr(h,g,w,k,O,M){for(;0<O--;){var U,G=h,K=g+(w?1:0),te=h,ve=g+(w?0:3);for(U=0;U<k;++U){var Ae=te[ve+4*U];Ae!=255&&(Ae*=32897,G[K+4*U+0]=G[K+4*U+0]*Ae>>23,G[K+4*U+1]=G[K+4*U+1]*Ae>>23,G[K+4*U+2]=G[K+4*U+2]*Ae>>23)}g+=M}}function Or(h,g,w,k,O){for(;0<k--;){var M;for(M=0;M<w;++M){var U=h[g+2*M+0],G=15&(te=h[g+2*M+1]),K=4369*G,te=(240&te|te>>4)*K>>16;h[g+2*M+0]=(240&U|U>>4)*K>>16&240|(15&U|U<<4)*K>>16>>4&15,h[g+2*M+1]=240&te|G}g+=O}}function Fn(h,g,w,k,O,M,U,G){var K,te,ve=255;for(te=0;te<O;++te){for(K=0;K<k;++K){var Ae=h[g+K];M[U+4*K]=Ae,ve&=Ae}g+=w,U+=G}return ve!=255}function Gi(h,g,w,k,O){var M;for(M=0;M<O;++M)w[k+M]=h[g+M]>>8}function oi(){io=fr,Fc=Or,ol=Fn,Mc=Gi}function Yi(h,g,w){D[h]=function(k,O,M,U,G,K,te,ve,Ae,ne,we,je,Fe,Ee,De,Re,Be){var Ue,Nt=Be-1>>1,dt=G[K+0]|te[ve+0]<<16,Yt=Ae[ne+0]|we[je+0]<<16;e(k!=null);var gt=3*dt+Yt+131074>>2;for(g(k[O+0],255&gt,gt>>16,Fe,Ee),M!=null&&(gt=3*Yt+dt+131074>>2,g(M[U+0],255&gt,gt>>16,De,Re)),Ue=1;Ue<=Nt;++Ue){var ir=G[K+Ue]|te[ve+Ue]<<16,en=Ae[ne+Ue]|we[je+Ue]<<16,Kt=dt+ir+Yt+en+524296,ht=Kt+2*(ir+Yt)>>3;gt=ht+dt>>1,dt=(Kt=Kt+2*(dt+en)>>3)+ir>>1,g(k[O+2*Ue-1],255&gt,gt>>16,Fe,Ee+(2*Ue-1)*w),g(k[O+2*Ue-0],255&dt,dt>>16,Fe,Ee+(2*Ue-0)*w),M!=null&&(gt=Kt+Yt>>1,dt=ht+en>>1,g(M[U+2*Ue-1],255&gt,gt>>16,De,Re+(2*Ue-1)*w),g(M[U+2*Ue+0],255&dt,dt>>16,De,Re+(2*Ue+0)*w)),dt=ir,Yt=en}1&Be||(gt=3*dt+Yt+131074>>2,g(k[O+Be-1],255&gt,gt>>16,Fe,Ee+(Be-1)*w),M!=null&&(gt=3*Yt+dt+131074>>2,g(M[U+Be-1],255&gt,gt>>16,De,Re+(Be-1)*w)))}}function Ka(){xs[Wl]=Wd,xs[Pa]=Ea,xs[Su]=Hd,xs[ll]=Io,xs[cl]=co,xs[Cr]=pl,xs[Hl]=Gc,xs[Lo]=Ea,xs[ao]=Io,xs[ul]=co,xs[dl]=pl}function No(h){return h&-16384?0>h?0:255:h>>La}function wa(h,g){return No((19077*h>>8)+(26149*g>>8)-14234)}function Ja(h,g,w){return No((19077*h>>8)-(6419*g>>8)-(13320*w>>8)+8708)}function _a(h,g){return No((19077*h>>8)+(33050*g>>8)-17685)}function Na(h,g,w,k,O){k[O+0]=wa(h,w),k[O+1]=Ja(h,g,w),k[O+2]=_a(h,g)}function Mn(h,g,w,k,O){k[O+0]=_a(h,g),k[O+1]=Ja(h,g,w),k[O+2]=wa(h,w)}function Xa(h,g,w,k,O){var M=Ja(h,g,w);g=M<<3&224|_a(h,g)>>3,k[O+0]=248&wa(h,w)|M>>5,k[O+1]=g}function Qa(h,g,w,k,O){var M=240&_a(h,g)|15;k[O+0]=240&wa(h,w)|Ja(h,g,w)>>4,k[O+1]=M}function nl(h,g,w,k,O){k[O+0]=255,Na(h,g,w,k,O+1)}function sl(h,g,w,k,O){Mn(h,g,w,k,O),k[O+3]=255}function cs(h,g,w,k,O){Na(h,g,w,k,O),k[O+3]=255}function li(h,g,w){D[h]=function(k,O,M,U,G,K,te,ve,Ae){for(var ne=ve+(-2&Ae)*w;ve!=ne;)g(k[O+0],M[U+0],G[K+0],te,ve),g(k[O+1],M[U+0],G[K+0],te,ve+w),O+=2,++U,++K,ve+=2*w;1&Ae&&g(k[O+0],M[U+0],G[K+0],te,ve)}}function Ai(h,g,w){return w==0?h==0?g==0?6:5:g==0?4:0:w}function ql(h,g,w,k,O){switch(h>>>30){case 3:no(g,w,k,O,0);break;case 2:Qr(g,w,k,O);break;case 1:pr(g,w,k,O)}}function Ts(h,g){var w,k,O=g.M,M=g.Nb,U=h.oc,G=h.pc+40,K=h.oc,te=h.pc+584,ve=h.oc,Ae=h.pc+600;for(w=0;16>w;++w)U[G+32*w-1]=129;for(w=0;8>w;++w)K[te+32*w-1]=129,ve[Ae+32*w-1]=129;for(0<O?U[G-1-32]=K[te-1-32]=ve[Ae-1-32]=129:(a(U,G-32-1,127,21),a(K,te-32-1,127,9),a(ve,Ae-32-1,127,9)),k=0;k<h.za;++k){var ne=g.ya[g.aa+k];if(0<k){for(w=-1;16>w;++w)s(U,G+32*w-4,U,G+32*w+12,4);for(w=-1;8>w;++w)s(K,te+32*w-4,K,te+32*w+4,4),s(ve,Ae+32*w-4,ve,Ae+32*w+4,4)}var we=h.Gd,je=h.Hd+k,Fe=ne.ad,Ee=ne.Hc;if(0<O&&(s(U,G-32,we[je].y,0,16),s(K,te-32,we[je].f,0,8),s(ve,Ae-32,we[je].ea,0,8)),ne.Za){var De=U,Re=G-32+16;for(0<O&&(k>=h.za-1?a(De,Re,we[je].y[15],4):s(De,Re,we[je+1].y,0,4)),w=0;4>w;w++)De[Re+128+w]=De[Re+256+w]=De[Re+384+w]=De[Re+0+w];for(w=0;16>w;++w,Ee<<=2)De=U,Re=G+Yc[w],Gs[ne.Ob[w]](De,Re),ql(Ee,Fe,16*+w,De,Re)}else if(De=Ai(k,O,ne.Ob[0]),ds[De](U,G),Ee!=0)for(w=0;16>w;++w,Ee<<=2)ql(Ee,Fe,16*+w,U,G+Yc[w]);for(w=ne.Gc,De=Ai(k,O,ne.Dd),vs[De](K,te),vs[De](ve,Ae),Ee=Fe,De=K,Re=te,255&(ne=0|w)&&(170&ne?gs(Ee,256,De,Re):kr(Ee,256,De,Re)),ne=ve,Ee=Ae,255&(w>>=8)&&(170&w?gs(Fe,320,ne,Ee):kr(Fe,320,ne,Ee)),O<h.Ub-1&&(s(we[je].y,0,U,G+480,16),s(we[je].f,0,K,te+224,8),s(we[je].ea,0,ve,Ae+224,8)),w=8*M*h.B,we=h.sa,je=h.ta+16*k+16*M*h.R,Fe=h.qa,ne=h.ra+8*k+w,Ee=h.Ha,De=h.Ia+8*k+w,w=0;16>w;++w)s(we,je+w*h.R,U,G+32*w,16);for(w=0;8>w;++w)s(Fe,ne+w*h.B,K,te+32*w,8),s(Ee,De+w*h.B,ve,Ae+32*w,8)}}function ka(h,g,w,k,O,M,U,G,K){var te=[0],ve=[0],Ae=0,ne=K!=null?K.kd:0,we=K??new $e;if(h==null||12>w)return 7;we.data=h,we.w=g,we.ha=w,g=[g],w=[w],we.gb=[we.gb];e:{var je=g,Fe=w,Ee=we.gb;if(e(h!=null),e(Fe!=null),e(Ee!=null),Ee[0]=0,12<=Fe[0]&&!t(h,je[0],"RIFF")){if(t(h,je[0]+8,"WEBP")){Ee=3;break e}var De=st(h,je[0]+4);if(12>De||4294967286<De){Ee=3;break e}if(ne&&De>Fe[0]-8){Ee=7;break e}Ee[0]=De,je[0]+=12,Fe[0]-=12}Ee=0}if(Ee!=0)return Ee;for(De=0<we.gb[0],w=w[0];;){e:{var Re=h;Fe=g,Ee=w;var Be=te,Ue=ve,Nt=je=[0];if((gt=Ae=[Ae])[0]=0,8>Ee[0])Ee=7;else{if(!t(Re,Fe[0],"VP8X")){if(st(Re,Fe[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var dt=st(Re,Fe[0]+8),Yt=1+Ge(Re,Fe[0]+12);if(2147483648<=Yt*(Re=1+Ge(Re,Fe[0]+15))){Ee=3;break e}Nt!=null&&(Nt[0]=dt),Be!=null&&(Be[0]=Yt),Ue!=null&&(Ue[0]=Re),Fe[0]+=18,Ee[0]-=18,gt[0]=1}Ee=0}}if(Ae=Ae[0],je=je[0],Ee!=0)return Ee;if(Fe=!!(2&je),!De&&Ae)return 3;if(M!=null&&(M[0]=!!(16&je)),U!=null&&(U[0]=Fe),G!=null&&(G[0]=0),U=te[0],je=ve[0],Ae&&Fe&&K==null){Ee=0;break}if(4>w){Ee=7;break}if(De&&Ae||!De&&!Ae&&!t(h,g[0],"ALPH")){w=[w],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{dt=h,Ee=g,De=w;var gt=we.gb;Be=we.na,Ue=we.P,Nt=we.Sa,Yt=22,e(dt!=null),e(De!=null),Re=Ee[0];var ir=De[0];for(e(Be!=null),e(Nt!=null),Be[0]=null,Ue[0]=null,Nt[0]=0;;){if(Ee[0]=Re,De[0]=ir,8>ir){Ee=7;break e}var en=st(dt,Re+4);if(4294967286<en){Ee=3;break e}var Kt=8+en+1&-2;if(Yt+=Kt,0<gt&&Yt>gt){Ee=3;break e}if(!t(dt,Re,"VP8 ")||!t(dt,Re,"VP8L")){Ee=0;break e}if(ir[0]<Kt){Ee=7;break e}t(dt,Re,"ALPH")||(Be[0]=dt,Ue[0]=Re+8,Nt[0]=en),Re+=Kt,ir-=Kt}}if(w=w[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],Ee!=0)break}w=[w],we.Ja=[we.Ja],we.xa=[we.xa];e:if(gt=h,Ee=g,De=w,Be=we.gb[0],Ue=we.Ja,Nt=we.xa,dt=Ee[0],Re=!t(gt,dt,"VP8 "),Yt=!t(gt,dt,"VP8L"),e(gt!=null),e(De!=null),e(Ue!=null),e(Nt!=null),8>De[0])Ee=7;else{if(Re||Yt){if(gt=st(gt,dt+4),12<=Be&&gt>Be-12){Ee=3;break e}if(ne&&gt>De[0]-8){Ee=7;break e}Ue[0]=gt,Ee[0]+=8,De[0]-=8,Nt[0]=Yt}else Nt[0]=5<=De[0]&&gt[dt+0]==47&&!(gt[dt+4]>>5),Ue[0]=De[0];Ee=0}if(w=w[0],we.Ja=we.Ja[0],we.xa=we.xa[0],g=g[0],Ee!=0)break;if(4294967286<we.Ja)return 3;if(G==null||Fe||(G[0]=we.xa?2:1),U=[U],je=[je],we.xa){if(5>w){Ee=7;break}G=U,ne=je,Fe=M,h==null||5>w?h=0:5<=w&&h[g+0]==47&&!(h[g+4]>>5)?(De=[0],gt=[0],Be=[0],le(Ue=new q,h,g,w),is(Ue,De,gt,Be)?(G!=null&&(G[0]=De[0]),ne!=null&&(ne[0]=gt[0]),Fe!=null&&(Fe[0]=Be[0]),h=1):h=0):h=0}else{if(10>w){Ee=7;break}G=je,h==null||10>w||!si(h,g+3,w-3)?h=0:(ne=h[g+0]|h[g+1]<<8|h[g+2]<<16,Fe=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=we.Ja||!Fe||!h?h=0:(U&&(U[0]=Fe),G&&(G[0]=h),h=1))}if(!h||(U=U[0],je=je[0],Ae&&(te[0]!=U||ve[0]!=je)))return 3;K!=null&&(K[0]=we,K.offset=g-K.w,e(4294967286>g-K.w),e(K.offset==K.ha-w));break}return Ee==0||Ee==7&&Ae&&K==null?(M!=null&&(M[0]|=we.na!=null&&0<we.na.length),k!=null&&(k[0]=U),O!=null&&(O[0]=je),0):Ee}function ko(h,g,w){var k=g.width,O=g.height,M=0,U=0,G=k,K=O;if(g.Da=h!=null&&0<h.Da,g.Da&&(G=h.cd,K=h.bd,M=h.v,U=h.j,11>w||(M&=-2,U&=-2),0>M||0>U||0>=G||0>=K||M+G>k||U+K>O))return 0;if(g.v=M,g.j=U,g.va=M+G,g.o=U+K,g.U=G,g.T=K,g.da=h!=null&&0<h.da,g.da){if(!St(G,K,w=[h.ib],M=[h.hb]))return 0;g.ib=w[0],g.hb=M[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*k/4&&g.hb<3*O/4,g.Kb=0),1}function So(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function Ki(h,g,w,k){if(k==null||0>=h||0>=g)return 2;if(w!=null){if(w.Da){var O=w.cd,M=w.bd,U=-2&w.v,G=-2&w.j;if(0>U||0>G||0>=O||0>=M||U+O>h||G+M>g)return 2;h=O,g=M}if(w.da){if(!St(h,g,O=[w.ib],M=[w.hb]))return 2;h=O[0],g=M[0]}}k.width=h,k.height=g;e:{var K=k.width,te=k.height;if(h=k.S,0>=K||0>=te||!(h>=Wl&&13>h))h=2;else{if(0>=k.Rd&&k.sd==null){U=M=O=g=0;var ve=(G=K*ml[h])*te;if(11>h||(M=(te+1)/2*(g=(K+1)/2),h==12&&(U=(O=K)*te)),(te=o(ve+2*M+U))==null){h=1;break e}k.sd=te,11>h?((K=k.f.RGBA).eb=te,K.fb=0,K.A=G,K.size=ve):((K=k.f.kb).y=te,K.O=0,K.fa=G,K.Fd=ve,K.f=te,K.N=0+ve,K.Ab=g,K.Cd=M,K.ea=te,K.W=0+ve+M,K.Db=g,K.Ed=M,h==12&&(K.F=te,K.J=0+ve+2*M),K.Tc=U,K.lb=O)}if(g=1,O=k.S,M=k.width,U=k.height,O>=Wl&&13>O)if(11>O)h=k.f.RGBA,g&=(G=Math.abs(h.A))*(U-1)+M<=h.size,g&=G>=M*ml[O],g&=h.eb!=null;else{h=k.f.kb,G=(M+1)/2,ve=(U+1)/2,K=Math.abs(h.fa),te=Math.abs(h.Ab);var Ae=Math.abs(h.Db),ne=Math.abs(h.lb),we=ne*(U-1)+M;g&=K*(U-1)+M<=h.Fd,g&=te*(ve-1)+G<=h.Cd,g=(g&=Ae*(ve-1)+G<=h.Ed)&K>=M&te>=G&Ae>=G,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,O==12&&(g&=ne>=M,g&=we<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||w!=null&&w.fd&&(h=So(k)),h}var Hs=64,Os=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Is=24,Sa=32,Ci=8,Ji=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(h){return h},D.Predictor2=function(h,g,w){return g[w+0]},D.Predictor3=function(h,g,w){return g[w+1]},D.Predictor4=function(h,g,w){return g[w-1]},D.Predictor5=function(h,g,w){return tt(tt(h,g[w+1]),g[w+0])},D.Predictor6=function(h,g,w){return tt(h,g[w-1])},D.Predictor7=function(h,g,w){return tt(h,g[w+0])},D.Predictor8=function(h,g,w){return tt(g[w-1],g[w+0])},D.Predictor9=function(h,g,w){return tt(g[w+0],g[w+1])},D.Predictor10=function(h,g,w){return tt(tt(h,g[w-1]),tt(g[w+0],g[w+1]))},D.Predictor11=function(h,g,w){var k=g[w+0];return 0>=Wt(k>>24&255,h>>24&255,(g=g[w-1])>>24&255)+Wt(k>>16&255,h>>16&255,g>>16&255)+Wt(k>>8&255,h>>8&255,g>>8&255)+Wt(255&k,255&h,255&g)?k:h},D.Predictor12=function(h,g,w){var k=g[w+0];return(ur((h>>24&255)+(k>>24&255)-((g=g[w-1])>>24&255))<<24|ur((h>>16&255)+(k>>16&255)-(g>>16&255))<<16|ur((h>>8&255)+(k>>8&255)-(g>>8&255))<<8|ur((255&h)+(255&k)-(255&g)))>>>0},D.Predictor13=function(h,g,w){var k=g[w-1];return(Qt((h=tt(h,g[w+0]))>>24&255,k>>24&255)<<24|Qt(h>>16&255,k>>16&255)<<16|Qt(h>>8&255,k>>8&255)<<8|Qt(255&h,255&k))>>>0};var Xi=D.PredictorAdd0;D.PredictorAdd1=Zt,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var Pi=D.PredictorAdd2;ct("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var sn,Za=D.ColorIndexInverseTransform,Ei=D.MapARGB,ci=D.VP8LColorIndexInverseTransformAlpha,eo=D.MapAlpha,to=D.VP8LPredictorsAdd=[];to.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var jo,Ao,Qi,ja,Aa,ro,Ca,no,Qr,gs,pr,kr,Zr,hn,ui,il,Co,Zi,zl,Po,$l,Rc,al,so,io,Fc,ol,Mc,Bc=o(511),Uc=o(2041),qc=o(225),zc=o(767),$c=0,Li=Uc,Eo=qc,us=zc,Vs=Bc,Wl=0,Pa=1,Su=2,ll=3,cl=4,Cr=5,Hl=6,Lo=7,ao=8,ul=9,dl=10,hl=[2,3,7],Vl=[3,3,11],oo=[280,256,256,256,40],ju=[0,1,1,1,0],Ud=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Au=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gl=8,To=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lo=null,Wc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Hc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Cu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$d=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Vc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ds=[],Gs=[],vs=[],Ti=1,Oo=2,Jn=[],xs=[];Yi("UpsampleRgbLinePair",Na,3),Yi("UpsampleBgrLinePair",Mn,3),Yi("UpsampleRgbaLinePair",cs,4),Yi("UpsampleBgraLinePair",sl,4),Yi("UpsampleArgbLinePair",nl,4),Yi("UpsampleRgba4444LinePair",Qa,2),Yi("UpsampleRgb565LinePair",Xa,2);var Wd=D.UpsampleRgbLinePair,Hd=D.UpsampleBgrLinePair,Ea=D.UpsampleRgbaLinePair,Io=D.UpsampleBgraLinePair,co=D.UpsampleArgbLinePair,pl=D.UpsampleRgba4444LinePair,Gc=D.UpsampleRgb565LinePair,ea=16,di=1<<ea-1,Nr=-227,Sr=482,La=6,Bn=0,ys=o(256),uo=o(256),Do=o(256),bs=o(256),Yl=o(Sr-Nr),Eu=o(Sr-Nr);li("YuvToRgbRow",Na,3),li("YuvToBgrRow",Mn,3),li("YuvToRgbaRow",cs,4),li("YuvToBgraRow",sl,4),li("YuvToArgbRow",nl,4),li("YuvToRgba4444Row",Qa,2),li("YuvToRgb565Row",Xa,2);var Yc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ho=[0,2,8],Lu=[8,7,6,4,4,2,2,2,1,1,1,1],ta=1;this.WebPDecodeRGBA=function(h,g,w,k,O){var M=Pa,U=new Me,G=new $t;U.ba=G,G.S=M,G.width=[G.width],G.height=[G.height];var K=G.width,te=G.height,ve=new Tt;if(ve==null||h==null)var Ae=2;else e(ve!=null),Ae=ka(h,g,w,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Ae!=0?K=0:(K!=null&&(K[0]=ve.width[0]),te!=null&&(te[0]=ve.height[0]),K=1),K){G.width=G.width[0],G.height=G.height[0],k!=null&&(k[0]=G.width),O!=null&&(O[0]=G.height);e:{if(k=new ga,(O=new $e).data=h,O.w=g,O.ha=w,O.kd=1,g=[0],e(O!=null),((h=ka(O.data,O.w,O.ha,null,null,null,g,null,O))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(e(U!=null),k.data=O.data,k.w=O.w+O.offset,k.ha=O.ha-O.offset,k.put=Pt,k.ac=In,k.bc=ss,k.ma=U,O.xa){if((h=Ui())==null){U=1;break e}if((function(ne,we){var je=[0],Fe=[0],Ee=[0];t:for(;;){if(ne==null)return 0;if(we==null)return ne.a=2,0;if(ne.l=we,ne.a=0,le(ne.m,we.data,we.w,we.ha),!is(ne.m,je,Fe,Ee)){ne.a=3;break t}if(ne.xb=Oo,we.width=je[0],we.height=Fe[0],!Wn(je[0],Fe[0],1,ne,null))break t;return 1}return e(ne.a!=0),0})(h,k)){if(k=(g=Ki(k.width,k.height,U.Oa,U.ba))==0){t:{k=h;r:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((w=k.l)!=null),e((O=w.ma)!=null),k.xb!=0){if(k.ca=O.ba,k.tb=O.tb,e(k.ca!=null),!ko(O.Oa,w,ll)){k.a=2;break r}if(!_i(k,w.width)||w.da)break r;if((w.da||Lt(k.ca.S))&&oi(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&oi()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Z(k.s.vb,k.s.Wa.Xa)){k.a=1;break r}k.xb=0}if(!Gr(k,k.V,k.Ba,k.c,k.i,w.o,wi))break r;O.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(g=h.a)}else g=h.a}else{if((h=new Ul)==null){U=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,Vn(h,k)){if((g=Ki(k.width,k.height,U.Oa,U.ba))==0){if(h.Aa=0,w=U.Oa,e((O=h)!=null),w!=null){if(0<(K=0>(K=w.Md)?0:100<K?255:255*K/100)){for(te=ve=0;4>te;++te)12>(Ae=O.pb[te]).lc&&(Ae.ia=K*Lu[0>Ae.lc?0:Ae.lc]>>3),ve|=Ae.ia;ve&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=w.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(ne,we){if(ne==null)return 0;if(we==null)return zr(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!Vn(ne,we))return 0;if(e(ne.cb),we.ac==null||we.ac(we)){we.ob&&(ne.L=0);var je=ho[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=we.v-je>>4,ne.zb=we.j-je>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=we.o+15+je>>4,ne.Hb=we.va+15+je>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var Fe=ne.ed;for(je=0;4>je;++je){var Ee;if(ne.Qa.Cb){var De=ne.Qa.Lb[je];ne.Qa.Fb||(De+=Fe.Tb)}else De=Fe.Tb;for(Ee=0;1>=Ee;++Ee){var Re=ne.gd[je][Ee],Be=De;if(Fe.Pc&&(Be+=Fe.vd[0],Ee&&(Be+=Fe.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var Ue=Be;0<Fe.wb&&(Ue=4<Fe.wb?Ue>>2:Ue>>1)>9-Fe.wb&&(Ue=9-Fe.wb),1>Ue&&(Ue=1),Re.dd=Ue,Re.tc=2*Be+Ue,Re.ld=40<=Be?2:15<=Be?1:0}else Re.tc=0;Re.La=Ee}}}je=0}else zr(ne,6,"Frame setup failed"),je=ne.a;if(je=je==0){if(je){ne.$c=0,0<ne.Aa||(ne.Ic=ta);t:{je=ne.Ic,Fe=4*(Ue=ne.za);var Nt=32*Ue,dt=Ue+1,Yt=0<ne.L?Ue*(0<ne.Aa?2:1):0,gt=(ne.Aa==2?2:1)*Ue;if((Re=Fe+832+(Ee=3*(16*je+ho[ne.L])/2*Nt)+(De=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=Re)je=0;else{if(Re>ne.Vb){if(ne.Vb=0,ne.Ec=o(Re),ne.Fc=0,ne.Ec==null){je=zr(ne,1,"no memory during frame initialization.");break t}ne.Vb=Re}Re=ne.Ec,Be=ne.Fc,ne.Ac=Re,ne.Bc=Be,Be+=Fe,ne.Gd=u(Nt,os),ne.Hd=0,ne.rb=u(dt+1,Ps),ne.sb=1,ne.wa=Yt?u(Yt,Hn):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=Ue),e(!0),ne.oc=Re,ne.pc=Be,Be+=832,ne.ya=u(gt,ma),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=Ue),ne.R=16*Ue,ne.B=8*Ue,Ue=(Nt=ho[ne.L])*ne.R,Nt=Nt/2*ne.B,ne.sa=Re,ne.ta=Be+Ue,ne.qa=ne.sa,ne.ra=ne.ta+16*je*ne.R+Nt,ne.Ha=ne.qa,ne.Ia=ne.ra+8*je*ne.B+Nt,ne.$c=0,Be+=Ee,ne.mb=De?Re:null,ne.nb=De?Be:null,e(Be+De<=ne.Fc+ne.Vb),ii(ne),a(ne.Ac,ne.Bc,0,Fe),je=1}}if(je){if(we.ka=0,we.y=ne.sa,we.O=ne.ta,we.f=ne.qa,we.N=ne.ra,we.ea=ne.Ha,we.Vd=ne.Ia,we.fa=ne.R,we.Rc=ne.B,we.F=null,we.J=0,!$c){for(je=-255;255>=je;++je)Bc[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)Uc[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)qc[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)zc[255+je]=0>je?0:255<je?255:je;$c=1}Ca=$i,no=Us,gs=qs,pr=va,kr=cr,Qr=zi,Zr=ot,hn=vt,ui=T,il=Q,Co=rr,Zi=x,zl=pe,Po=ke,$l=Le,Rc=qe,al=et,so=at,Gs[0]=Ha,Gs[1]=$a,Gs[2]=$s,Gs[3]=Wa,Gs[4]=Kn,Gs[5]=_o,Gs[6]=ai,Gs[7]=Va,Gs[8]=Ga,Gs[9]=ya,ds[0]=zs,ds[1]=wo,ds[2]=Wi,ds[3]=xa,ds[4]=Yn,ds[5]=ms,ds[6]=Hi,vs[0]=ba,vs[1]=bo,vs[2]=Rn,vs[3]=Ws,vs[4]=Ls,vs[5]=Ya,vs[6]=Vi,je=1}else je=0}je&&(je=(function(ir,en){for(ir.M=0;ir.M<ir.Va;++ir.M){var Kt,ht=ir.Jc[ir.M&ir.Xb],Ze=ir.m,an=ir;for(Kt=0;Kt<an.za;++Kt){var zt=Ze,sr=an,Ir=sr.Ac,Cn=sr.Bc+4*Kt,fn=sr.zc,Kr=sr.ya[sr.aa+Kt];if(sr.Qa.Bb?Kr.$b=Ce(zt,sr.Pa.jb[0])?2+Ce(zt,sr.Pa.jb[2]):Ce(zt,sr.Pa.jb[1]):Kr.$b=0,sr.kc&&(Kr.Ad=Ce(zt,sr.Bd)),Kr.Za=!Ce(zt,145)+0,Kr.Za){var yn=Kr.Ob,Pn=0;for(sr=0;4>sr;++sr){var $r,or=fn[0+sr];for($r=0;4>$r;++$r){or=zd[Ir[Cn+$r]][or];for(var mr=Cu[Ce(zt,or[0])];0<mr;)mr=Cu[2*mr+Ce(zt,or[mr])];or=-mr,Ir[Cn+$r]=or}s(yn,Pn,Ir,Cn,4),Pn+=4,fn[0+sr]=or}}else or=Ce(zt,156)?Ce(zt,128)?1:3:Ce(zt,163)?2:0,Kr.Ob[0]=or,a(Ir,Cn,or,4),a(fn,0,or,4);Kr.Dd=Ce(zt,142)?Ce(zt,114)?Ce(zt,183)?1:3:2:0}if(an.m.Ka)return zr(ir,7,"Premature end-of-partition0 encountered.");for(;ir.ja<ir.za;++ir.ja){if(an=ht,zt=(Ze=ir).rb[Ze.sb-1],Ir=Ze.rb[Ze.sb+Ze.ja],Kt=Ze.ya[Ze.aa+Ze.ja],Cn=Ze.kc?Kt.Ad:0)zt.la=Ir.la=0,Kt.Za||(zt.Na=Ir.Na=0),Kt.Hc=0,Kt.Gc=0,Kt.ia=0;else{var Wr,gr;if(zt=Ir,Ir=an,Cn=Ze.Pa.Xc,fn=Ze.ya[Ze.aa+Ze.ja],Kr=Ze.pb[fn.$b],sr=fn.ad,yn=0,Pn=Ze.rb[Ze.sb-1],or=$r=0,a(sr,yn,0,384),fn.Za)var tn=0,rn=Cn[3];else{mr=o(16);var Pr=zt.Na+Pn.Na;if(Pr=lo(Ir,Cn[1],Pr,Kr.Eb,0,mr,0),zt.Na=Pn.Na=(0<Pr)+0,1<Pr)Ca(mr,0,sr,yn);else{var Xn=mr[0]+3>>3;for(mr=0;256>mr;mr+=16)sr[yn+mr]=Xn}tn=1,rn=Cn[0]}var jr=15&zt.la,Er=15&Pn.la;for(mr=0;4>mr;++mr){var pn=1&Er;for(Xn=gr=0;4>Xn;++Xn)jr=jr>>1|(pn=(Pr=lo(Ir,rn,Pr=pn+(1&jr),Kr.Sc,tn,sr,yn))>tn)<<7,gr=gr<<2|(3<Pr?3:1<Pr?2:sr[yn+0]!=0),yn+=16;jr>>=4,Er=Er>>1|pn<<7,$r=($r<<8|gr)>>>0}for(rn=jr,tn=Er>>4,Wr=0;4>Wr;Wr+=2){for(gr=0,jr=zt.la>>4+Wr,Er=Pn.la>>4+Wr,mr=0;2>mr;++mr){for(pn=1&Er,Xn=0;2>Xn;++Xn)Pr=pn+(1&jr),jr=jr>>1|(pn=0<(Pr=lo(Ir,Cn[2],Pr,Kr.Qc,0,sr,yn)))<<3,gr=gr<<2|(3<Pr?3:1<Pr?2:sr[yn+0]!=0),yn+=16;jr>>=2,Er=Er>>1|pn<<5}or|=gr<<4*Wr,rn|=jr<<4<<Wr,tn|=(240&Er)<<Wr}zt.la=rn,Pn.la=tn,fn.Hc=$r,fn.Gc=or,fn.ia=43690&or?0:Kr.ia,Cn=!($r|or)}if(0<Ze.L&&(Ze.wa[Ze.Y+Ze.ja]=Ze.gd[Kt.$b][Kt.Za],Ze.wa[Ze.Y+Ze.ja].La|=!Cn),an.Ka)return zr(ir,7,"Premature end-of-file encountered.")}if(ii(ir),Ze=en,an=1,Kt=(ht=ir).D,zt=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)t:{if(Kt.M=ht.M,Kt.uc=zt,Ts(ht,Kt),an=1,Kt=(gr=ht.D).Nb,zt=(or=ho[ht.L])*ht.R,Ir=or/2*ht.B,mr=16*Kt*ht.R,Xn=8*Kt*ht.B,Cn=ht.sa,fn=ht.ta-zt+mr,Kr=ht.qa,sr=ht.ra-Ir+Xn,yn=ht.Ha,Pn=ht.Ia-Ir+Xn,Er=(jr=gr.M)==0,$r=jr>=ht.Va-1,ht.Aa==2&&Ts(ht,gr),gr.uc)for(pn=(Pr=ht).D.M,e(Pr.D.uc),gr=Pr.yb;gr<Pr.Hb;++gr){tn=gr,rn=pn;var Un=(ws=(cn=Pr).D).Nb;Wr=cn.R;var ws=ws.wa[ws.Y+tn],on=cn.sa,ln=cn.ta+16*Un*Wr+16*tn,Qn=ws.dd,Lr=ws.tc;if(Lr!=0)if(e(3<=Lr),cn.L==1)0<tn&&Rc(on,ln,Wr,Lr+4),ws.La&&so(on,ln,Wr,Lr),0<rn&&$l(on,ln,Wr,Lr+4),ws.La&&al(on,ln,Wr,Lr);else{var Zn=cn.B,Ys=cn.qa,hi=cn.ra+8*Un*Zn+8*tn,En=cn.Ha,cn=cn.Ia+8*Un*Zn+8*tn;Un=ws.ld,0<tn&&(hn(on,ln,Wr,Lr+4,Qn,Un),il(Ys,hi,En,cn,Zn,Lr+4,Qn,Un)),ws.La&&(Zi(on,ln,Wr,Lr,Qn,Un),Po(Ys,hi,En,cn,Zn,Lr,Qn,Un)),0<rn&&(Zr(on,ln,Wr,Lr+4,Qn,Un),ui(Ys,hi,En,cn,Zn,Lr+4,Qn,Un)),ws.La&&(Co(on,ln,Wr,Lr,Qn,Un),zl(Ys,hi,En,cn,Zn,Lr,Qn,Un))}}if(ht.ia&&alert("todo:DitherRow"),Ze.put!=null){if(gr=16*jr,jr=16*(jr+1),Er?(Ze.y=ht.sa,Ze.O=ht.ta+mr,Ze.f=ht.qa,Ze.N=ht.ra+Xn,Ze.ea=ht.Ha,Ze.W=ht.Ia+Xn):(gr-=or,Ze.y=Cn,Ze.O=fn,Ze.f=Kr,Ze.N=sr,Ze.ea=yn,Ze.W=Pn),$r||(jr-=or),jr>Ze.o&&(jr=Ze.o),Ze.F=null,Ze.J=null,ht.Fa!=null&&0<ht.Fa.length&&gr<jr&&(Ze.J=nr(ht,Ze,gr,jr-gr),Ze.F=ht.mb,Ze.F==null&&Ze.F.length==0)){an=zr(ht,3,"Could not decode alpha data.");break t}gr<Ze.j&&(or=Ze.j-gr,gr=Ze.j,e(!(1&or)),Ze.O+=ht.R*or,Ze.N+=ht.B*(or>>1),Ze.W+=ht.B*(or>>1),Ze.F!=null&&(Ze.J+=Ze.width*or)),gr<jr&&(Ze.O+=Ze.v,Ze.N+=Ze.v>>1,Ze.W+=Ze.v>>1,Ze.F!=null&&(Ze.J+=Ze.v),Ze.ka=gr-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=jr-gr,an=Ze.put(Ze))}Kt+1!=ht.Ic||$r||(s(ht.sa,ht.ta-zt,Cn,fn+16*ht.R,zt),s(ht.qa,ht.ra-Ir,Kr,sr+8*ht.B,Ir),s(ht.Ha,ht.Ia-Ir,yn,Pn+8*ht.B,Ir))}if(!an)return zr(ir,6,"Output aborted.")}return 1})(ne,we)),we.bc!=null&&we.bc(we),je&=1}return je?(ne.cb=0,je):0})(h,k)||(g=h.a)}}else g=h.a}g==0&&U.Oa!=null&&U.Oa.fd&&(g=So(U.ba))}U=g}M=U!=0?null:11>M?G.f.RGBA.eb:G.f.kb.y}else M=null;return M};var ml=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(D,se){for(var I="",R=0;R<4;R++)I+=String.fromCharCode(D[se++]);return I}function v(D,se){return D[se+0]|D[se+1]<<8}function _(D,se){return(D[se+0]|D[se+1]<<8|D[se+2]<<16)>>>0}function S(D,se){return(D[se+0]|D[se+1]<<8|D[se+2]<<16|D[se+3]<<24)>>>0}new f;var y=[0],E=[0],C=[],L=new f,A=n,J=(function(D,se){var I={},R=0,re=!1,W=0,ie=0;if(I.frames=[],!(function(j,q){for(var X=0;X<4;X++)if(j[q+X]!="RIFF".charCodeAt(X))return!0;return!1})(D,se)){for(S(D,se+=4),se+=8;se<D.length;){var fe=p(D,se),ee=S(D,se+=4);se+=4;var z=ee+(1&ee);switch(fe){case"VP8 ":case"VP8L":I.frames[R]===void 0&&(I.frames[R]={}),(V=I.frames[R]).src_off=re?ie:se-8,V.src_size=W+ee+8,R++,re&&(re=!1,W=0,ie=0);break;case"VP8X":(V=I.header={}).feature_flags=D[se];var le=se+4;V.canvas_width=1+_(D,le),le+=3,V.canvas_height=1+_(D,le),le+=3;break;case"ALPH":re=!0,W=z+8,ie=se-8;break;case"ANIM":(V=I.header).bgcolor=S(D,se),le=se+4,V.loop_count=v(D,le),le+=2;break;case"ANMF":var be,V;(V=I.frames[R]={}).offset_x=2*_(D,se),se+=3,V.offset_y=2*_(D,se),se+=3,V.width=1+_(D,se),se+=3,V.height=1+_(D,se),se+=3,V.duration=_(D,se),se+=3,be=D[se++],V.dispose=1&be,V.blend=be>>1&1}fe!="ANMF"&&(se+=z)}return I}})(A,0);J.response=A,J.rgbaoutput=!0,J.dataurl=!1;var B=J.header?J.header:null,$=J.frames?J.frames:null;if(B){B.loop_counter=B.loop_count,y=[B.canvas_height],E=[B.canvas_width];for(var oe=0;oe<$.length&&$[oe].blend!=0;oe++);}var de=$[0],H=L.WebPDecodeRGBA(A,de.src_off,de.src_size,E,y);de.rgba=H,de.imgwidth=E[0],de.imgheight=y[0];for(var Y=0;Y<E[0]*y[0]*4;Y++)C[Y]=H[Y];return this.width=E,this.height=y,this.data=C,this}(function(n){var e,t,s,a,o,u,d,f,p,v=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new f,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new u,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new u,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,f=this.internal.Matrix,p=new v}]);var _=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=j;Object.defineProperty(this,"pdf",{get:function(){return q}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Z){X=!!Z}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(Z){ae=!!Z}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(Z){isNaN(Z)||(ue=Z)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(Z){isNaN(Z)||(ye=Z)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Z){var Qe;typeof Z=="number"?Qe=[Z,Z,Z,Z]:((Qe=new Array(4))[0]=Z[0],Qe[1]=Z.length>=2?Z[1]:Qe[0],Qe[2]=Z.length>=3?Z[2]:Qe[0],Qe[3]=Z.length>=4?Z[3]:Qe[1]),p.margin=Qe}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Z){he=Z}});var Se=0;Object.defineProperty(this,"lastBreak",{get:function(){return Se},set:function(Z){Se=Z}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(Z){Ce=Z}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Z){Z instanceof v&&(p=Z)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Z){p.path=Z}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(Z){ze=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var Qe;Qe=S(Z),this.ctx.fillStyle=Qe.style,this.ctx.isFillTransparent=Qe.a===0,this.ctx.fillOpacity=Qe.a,this.pdf.setFillColor(Qe.r,Qe.g,Qe.b,{a:Qe.a}),this.pdf.setTextColor(Qe.r,Qe.g,Qe.b,{a:Qe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var Qe=S(Z);this.ctx.strokeStyle=Qe.style,this.ctx.isStrokeTransparent=Qe.a===0,this.ctx.strokeOpacity=Qe.a,Qe.a===0?this.pdf.setDrawColor(255,255,255):(Qe.a,this.pdf.setDrawColor(Qe.r,Qe.g,Qe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var Ie=null,Ge=null,st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(Z){Ie=null,Ge=null,st=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var Qe;if(this.ctx.font=Z,(Qe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Z))!==null){var It=Qe[1];Qe[2];var St=Qe[3],We=Qe[4];Qe[5];var _t=Qe[6],rt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(rt==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:rt==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var ut=(function(ct){var Br,er,Ct=[],Gt=ct.trim();if(Gt==="")return sf;if(Gt in Lm)return[Lm[Gt]];for(;Gt!=="";){switch(er=null,Br=(Gt=Om(Gt)).charAt(0)){case'"':case"'":er=K5(Gt.substring(1),Br);break;default:er=J5(Gt)}if(er===null||(Ct.push(er[0]),(Gt=Om(er[1]))!==""&&Gt.charAt(0)!==","))return sf;Gt=Gt.replace(/^,/,"")}return Ct})(_t);if(this.fontFaces){var tt=(function(ct,Br){var er=ct.getFontList(),Ct=JSON.stringify(er);if(Ie===null||Ge!==Ct){var Gt=(function(br){var jt=[];return Object.keys(br).forEach(function(hr){br[hr].forEach(function(Lt){var qt=null;switch(Lt){case"bold":qt={family:hr,weight:"bold"};break;case"italic":qt={family:hr,style:"italic"};break;case"bolditalic":qt={family:hr,weight:"bold",style:"italic"};break;case"":case"normal":qt={family:hr}}qt!==null&&(qt.ref={name:hr,style:Lt},jt.push(qt))})}),jt})(er);Ie=(function(br){for(var jt={},hr=0;hr<br.length;++hr){var Lt=nf(br[hr]),qt=Lt.family,dr=Lt.stretch,$t=Lt.style,Tt=Lt.weight;jt[qt]=jt[qt]||{},jt[qt][dr]=jt[qt][dr]||{},jt[qt][dr][$t]=jt[qt][dr][$t]||{},jt[qt][dr][$t][Tt]=Lt}return jt})(Gt.concat(Br)),Ge=Ct}return Ie})(this.pdf,this.fontFaces),ur=ut.map(function(ct){return{family:ct,stretch:"normal",weight:St,style:It}}),Qt=(function(ct,Br,er){for(var Ct=(er=er||{}).defaultFontFamily||"times",Gt=Object.assign({},Y5,er.genericFontFamilies||{}),br=null,jt=null,hr=0;hr<Br.length;++hr)if(Gt[(br=nf(Br[hr])).family]&&(br.family=Gt[br.family]),ct.hasOwnProperty(br.family)){jt=ct[br.family];break}if(!(jt=jt||ct[Ct]))throw new Error("Could not find a font-family for the rule '"+Tm(br)+"' and default family '"+Ct+"'.");if(jt=(function(Lt,qt){if(qt[Lt])return qt[Lt];var dr=Tf[Lt],$t=dr<=Tf.normal?-1:1,Tt=Em(qt,a1,dr,$t);if(!Tt)throw new Error("Could not find a matching font-stretch value for "+Lt);return Tt})(br.stretch,jt),jt=(function(Lt,qt){if(qt[Lt])return qt[Lt];for(var dr=i1[Lt],$t=0;$t<dr.length;++$t)if(qt[dr[$t]])return qt[dr[$t]];throw new Error("Could not find a matching font-style for "+Lt)})(br.style,jt),!(jt=(function(Lt,qt){if(qt[Lt])return qt[Lt];if(Lt===400&&qt[500])return qt[500];if(Lt===500&&qt[400])return qt[400];var dr=G5[Lt],$t=Em(qt,o1,dr,Lt<400?-1:1);if(!$t)throw new Error("Could not find a matching font-weight for value "+Lt);return $t})(br.weight,jt)))throw new Error("Failed to resolve a font for the rule '"+Tm(br)+"'.");return jt})(tt,ur);this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var Wt="";(St==="bold"||parseInt(St,10)>=700||It==="bold")&&(Wt="bold"),It==="italic"&&(Wt+="italic"),Wt.length===0&&(Wt="normal");for(var Zt="",Dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<ut.length;mt++){if(this.pdf.internal.getFont(ut[mt],Wt,{noFallback:!0,disableWarning:!0})!==void 0){Zt=ut[mt];break}if(Wt==="bolditalic"&&this.pdf.internal.getFont(ut[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=ut[mt],Wt="bold";else if(this.pdf.internal.getFont(ut[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=ut[mt],Wt="normal";break}}if(Zt===""){for(var Ft=0;Ft<ut.length;Ft++)if(Dt[ut[Ft]]){Zt=Dt[ut[Ft]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,Wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,V.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,V.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};_.prototype.setLineDash=function(j){this.lineDash=j},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){$.call(this,"fill",!1)},_.prototype.stroke=function(){$.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(j,q){if(isNaN(j)||isNaN(q))throw Fr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new u(j,q));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new u(j,q)},_.prototype.closePath=function(){var j=new u(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ar(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){j=new u(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(j.x,j.y)},_.prototype.lineTo=function(j,q){if(isNaN(j)||isNaN(q))throw Fr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new u(j,q));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new u(X.x,X.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},_.prototype.quadraticCurveTo=function(j,q,X,ae){if(isNaN(X)||isNaN(ae)||isNaN(j)||isNaN(q))throw Fr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new u(X,ae)),ye=this.ctx.transform.applyToPoint(new u(j,q));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new u(ue.x,ue.y)},_.prototype.bezierCurveTo=function(j,q,X,ae,ue,ye){if(isNaN(ue)||isNaN(ye)||isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae))throw Fr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new u(ue,ye)),Se=this.ctx.transform.applyToPoint(new u(j,q)),Ce=this.ctx.transform.applyToPoint(new u(X,ae));this.path.push({type:"bct",x1:Se.x,y1:Se.y,x2:Ce.x,y2:Ce.y,x:he.x,y:he.y}),this.ctx.lastPoint=new u(he.x,he.y)},_.prototype.arc=function(j,q,X,ae,ue,ye){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae)||isNaN(ue))throw Fr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new u(j,q));j=he.x,q=he.y;var Se=this.ctx.transform.applyToPoint(new u(0,X)),Ce=this.ctx.transform.applyToPoint(new u(0,0));X=Math.sqrt(Math.pow(Se.x-Ce.x,2)+Math.pow(Se.y-Ce.y,2))}Math.abs(ue-ae)>=2*Math.PI&&(ae=0,ue=2*Math.PI),this.path.push({type:"arc",x:j,y:q,radius:X,startAngle:ae,endAngle:ue,counterclockwise:ye})},_.prototype.arcTo=function(j,q,X,ae,ue){throw new Error("arcTo not implemented.")},_.prototype.rect=function(j,q,X,ae){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae))throw Fr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,q),this.lineTo(j+X,q),this.lineTo(j+X,q+ae),this.lineTo(j,q+ae),this.lineTo(j,q),this.lineTo(j+X,q),this.lineTo(j,q)},_.prototype.fillRect=function(j,q,X,ae){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae))throw Fr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,q,X,ae),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},_.prototype.strokeRect=function(j,q,X,ae){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae))throw Fr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(j,q,X,ae),this.stroke())},_.prototype.clearRect=function(j,q,X,ae){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae))throw Fr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,q,X,ae))},_.prototype.save=function(j){j=typeof j!="boolean"||j;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},_.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(q),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(j){var q,X,ae,ue;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))q=0,X=0,ae=0,ue=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(ye!==null)q=parseInt(ye[1]),X=parseInt(ye[2]),ae=parseInt(ye[3]),ue=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)q=parseInt(ye[1]),X=parseInt(ye[2]),ae=parseInt(ye[3]),ue=parseFloat(ye[4]);else{if(ue=1,typeof j=="string"&&j.charAt(0)!=="#"){var he=new Qg(j);j=he.ok?he.toHex():"#000000"}j.length===4?(q=j.substring(1,2),q+=q,X=j.substring(2,3),X+=X,ae=j.substring(3,4),ae+=ae):(q=j.substring(1,3),X=j.substring(3,5),ae=j.substring(5,7)),q=parseInt(q,16),X=parseInt(X,16),ae=parseInt(ae,16)}}return{r:q,g:X,b:ae,a:ue,style:j}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(j,q,X,ae){if(isNaN(q)||isNaN(X)||typeof j!="string")throw Fr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!y.call(this)){var ue=z(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;R.call(this,{text:j,x:q,y:X,scale:ye,angle:ue,align:this.textAlign,maxWidth:ae})}},_.prototype.strokeText=function(j,q,X,ae){if(isNaN(q)||isNaN(X)||typeof j!="string")throw Fr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){ae=isNaN(ae)?void 0:ae;var ue=z(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;R.call(this,{text:j,x:q,y:X,scale:ye,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:ae})}},_.prototype.measureText=function(j){if(typeof j!="string")throw Fr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,X=this.pdf.internal.scaleFactor,ae=q.internal.getFontSize(),ue=q.getStringUnitWidth(j)*ae/q.internal.scaleFactor;return new function(ye){var he=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:ue*=Math.round(96*X/72*1e4)/1e4})},_.prototype.scale=function(j,q){if(isNaN(j)||isNaN(q))throw Fr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new f(j,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},_.prototype.rotate=function(j){if(isNaN(j))throw Fr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new f(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},_.prototype.translate=function(j,q){if(isNaN(j)||isNaN(q))throw Fr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new f(1,0,0,1,j,q);this.ctx.transform=this.ctx.transform.multiply(X)},_.prototype.transform=function(j,q,X,ae,ue,ye){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(ae)||isNaN(ue)||isNaN(ye))throw Fr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new f(j,q,X,ae,ue,ye);this.ctx.transform=this.ctx.transform.multiply(he)},_.prototype.setTransform=function(j,q,X,ae,ue,ye){j=isNaN(j)?1:j,q=isNaN(q)?0:q,X=isNaN(X)?0:X,ae=isNaN(ae)?1:ae,ue=isNaN(ue)?0:ue,ye=isNaN(ye)?0:ye,this.ctx.transform=new f(j,q,X,ae,ue,ye)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(j,q,X,ae,ue,ye,he,Se,Ce){var ze=this.pdf.getImageProperties(j),Ie=1,Ge=1,st=1,Z=1;ae!==void 0&&Se!==void 0&&(st=Se/ae,Z=Ce/ue,Ie=ze.width/ae*Se/ae,Ge=ze.height/ue*Ce/ue),ye===void 0&&(ye=q,he=X,q=0,X=0),ae!==void 0&&Se===void 0&&(Se=ae,Ce=ue),ae===void 0&&Se===void 0&&(Se=ze.width,Ce=ze.height);var Qe=this.ctx.transform.decompose(),It=z(Qe.rotate.shx),St=new f,We=(St=(St=(St=St.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale)).applyToRectangle(new d(ye-q*st,he-X*Z,ae*Ie,ue*Ge));if(this.autoPaging){for(var _t,rt=L.call(this,We),ut=[],tt=0;tt<rt.length;tt+=1)ut.indexOf(rt[tt])===-1&&ut.push(rt[tt]);B(ut);for(var ur=ut[0],Qt=ut[ut.length-1],Wt=ur;Wt<Qt+1;Wt++){this.pdf.setPage(Wt);var Zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=Wt===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Wt===1?0:mt+(Wt-2)*Ft;if(this.ctx.clip_path.length!==0){var Br=this.path;_t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=J(_t,this.posX+this.margin[3],-ct+Dt+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=Br}var er=JSON.parse(JSON.stringify(We));er=J([er],this.posX+this.margin[3],-ct+Dt+this.ctx.prevPageLastElemOffset)[0];var Ct=(Wt>ur||Wt<Qt)&&C.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zt,Ft,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",er.x,er.y,er.w,er.h,null,null,It),Ct&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(j,"JPEG",We.x,We.y,We.w,We.h,null,null,It)};var L=function(j,q,X){var ae=[];q=q||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":ae.push(Math.floor((j.y+ue)/X)+1);break;case"arc":ae.push(Math.floor((j.y+ue-j.radius)/X)+1),ae.push(Math.floor((j.y+ue+j.radius)/X)+1);break;case"qct":var ye=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);ae.push(Math.floor((ye.y+ue)/X)+1),ae.push(Math.floor((ye.y+ye.h+ue)/X)+1);break;case"bct":var he=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);ae.push(Math.floor((he.y+ue)/X)+1),ae.push(Math.floor((he.y+he.h+ue)/X)+1);break;case"rect":ae.push(Math.floor((j.y+ue)/X)+1),ae.push(Math.floor((j.y+j.h+ue)/X)+1)}for(var Se=0;Se<ae.length;Se+=1)for(;this.pdf.internal.getNumberOfPages()<ae[Se];)A.call(this);return ae},A=function(){var j=this.fillStyle,q=this.strokeStyle,X=this.font,ae=this.lineCap,ue=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=q,this.font=X,this.lineCap=ae,this.lineWidth=ue,this.lineJoin=ye},J=function(j,q,X){for(var ae=0;ae<j.length;ae++)switch(j[ae].type){case"bct":j[ae].x2+=q,j[ae].y2+=X;case"qct":j[ae].x1+=q,j[ae].y1+=X;default:j[ae].x+=q,j[ae].y+=X}return j},B=function(j){return j.sort(function(q,X){return q-X})},$=function(j,q){var X=this.fillStyle,ae=this.strokeStyle,ue=this.lineCap,ye=this.lineWidth,he=Math.abs(ye*this.ctx.transform.scaleX),Se=this.lineJoin;if(this.autoPaging){for(var Ce,ze,Ie=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),st=[],Z=0;Z<Ge.length;Z++)if(Ge[Z].x!==void 0)for(var Qe=L.call(this,Ge[Z]),It=0;It<Qe.length;It+=1)st.indexOf(Qe[It])===-1&&st.push(Qe[It]);for(var St=0;St<st.length;St++)for(;this.pdf.internal.getNumberOfPages()<st[St];)A.call(this);B(st);for(var We=st[0],_t=st[st.length-1],rt=We;rt<_t+1;rt++){this.pdf.setPage(rt),this.fillStyle=X,this.strokeStyle=ae,this.lineCap=ue,this.lineWidth=he,this.lineJoin=Se;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=rt===1?this.posY+this.margin[0]:this.margin[0],ur=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=rt===1?0:ur+(rt-2)*Qt;if(this.ctx.clip_path.length!==0){var Zt=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=J(Ce,this.posX+this.margin[3],-Wt+tt+this.ctx.prevPageLastElemOffset),oe.call(this,j,!0),this.path=Zt}if(ze=JSON.parse(JSON.stringify(Ie)),this.path=J(ze,this.posX+this.margin[3],-Wt+tt+this.ctx.prevPageLastElemOffset),q===!1||rt===0){var Dt=(rt>We||rt<_t)&&C.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Qt,null).clip().discardPath()),oe.call(this,j,q),Dt&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}this.path=Ie}else this.lineWidth=he,oe.call(this,j,q),this.lineWidth=ye},oe=function(j,q){if((j!=="stroke"||q||!E.call(this))&&(j==="stroke"||q||!y.call(this))){for(var X,ae,ue=[],ye=this.path,he=0;he<ye.length;he++){var Se=ye[he];switch(Se.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:Se,deltas:[],abs:[]});break;case"lt":var Ce=ue.length;if(ye[he-1]&&!isNaN(ye[he-1].x)&&(X=[Se.x-ye[he-1].x,Se.y-ye[he-1].y],Ce>0)){for(;Ce>=0;Ce--)if(ue[Ce-1].close!==!0&&ue[Ce-1].begin!==!0){ue[Ce-1].deltas.push(X),ue[Ce-1].abs.push(Se);break}}break;case"bct":X=[Se.x1-ye[he-1].x,Se.y1-ye[he-1].y,Se.x2-ye[he-1].x,Se.y2-ye[he-1].y,Se.x-ye[he-1].x,Se.y-ye[he-1].y],ue[ue.length-1].deltas.push(X);break;case"qct":var ze=ye[he-1].x+2/3*(Se.x1-ye[he-1].x),Ie=ye[he-1].y+2/3*(Se.y1-ye[he-1].y),Ge=Se.x+2/3*(Se.x1-Se.x),st=Se.y+2/3*(Se.y1-Se.y),Z=Se.x,Qe=Se.y;X=[ze-ye[he-1].x,Ie-ye[he-1].y,Ge-ye[he-1].x,st-ye[he-1].y,Z-ye[he-1].x,Qe-ye[he-1].y],ue[ue.length-1].deltas.push(X);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(Se)}}ae=q?null:j==="stroke"?"stroke":"fill";for(var It=!1,St=0;St<ue.length;St++)if(ue[St].arc)for(var We=ue[St].abs,_t=0;_t<We.length;_t++){var rt=We[_t];rt.type==="arc"?Y.call(this,rt.x,rt.y,rt.radius,rt.startAngle,rt.endAngle,rt.counterclockwise,void 0,q,!It):re.call(this,rt.x,rt.y),It=!0}else if(ue[St].close===!0)this.pdf.internal.out("h"),It=!1;else if(ue[St].begin!==!0){var ut=ue[St].start.x,tt=ue[St].start.y;W.call(this,ue[St].deltas,ut,tt),It=!0}ae&&D.call(this,ae),q&&se.call(this)}},de=function(j){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-X;case"top":return j+q-X;case"hanging":return j+q-2*X;case"middle":return j+q/2-X;default:return j}},H=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(q,X){this.colorStops.push([q,X])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Y=function(j,q,X,ae,ue,ye,he,Se,Ce){for(var ze=fe.call(this,X,ae,ue,ye),Ie=0;Ie<ze.length;Ie++){var Ge=ze[Ie];Ie===0&&(Ce?I.call(this,Ge.x1+j,Ge.y1+q):re.call(this,Ge.x1+j,Ge.y1+q)),ie.call(this,j,q,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}Se?se.call(this):D.call(this,he)},D=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},se=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(j,q){this.pdf.internal.out(t(j)+" "+s(q)+" m")},R=function(j){var q;switch(j.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var X,ae,ue,ye=this.pdf.getTextDimensions(j.text),he=de.call(this,j.y),Se=H.call(this,he)-ye.h,Ce=this.ctx.transform.applyToPoint(new u(j.x,he));if(this.autoPaging){var ze=this.ctx.transform.decompose(),Ie=new f;Ie=(Ie=(Ie=Ie.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale);for(var Ge=this.ctx.transform.applyToRectangle(new d(j.x,he,ye.w,ye.h)),st=Ie.applyToRectangle(new d(j.x,Se,ye.w,ye.h)),Z=L.call(this,st),Qe=[],It=0;It<Z.length;It+=1)Qe.indexOf(Z[It])===-1&&Qe.push(Z[It]);B(Qe);for(var St=Qe[0],We=Qe[Qe.length-1],_t=St;_t<We+1;_t++){this.pdf.setPage(_t);var rt=_t===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],ur=tt-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],Wt=Qt-this.margin[3],Zt=_t===1?0:ut+(_t-2)*ur;if(this.ctx.clip_path.length!==0){var Dt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=J(X,this.posX+this.margin[3],-1*Zt+rt),oe.call(this,"fill",!0),this.path=Dt}var mt=J([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-Zt+rt+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*j.scale),ue=this.lineWidth,this.lineWidth=ue*j.scale);var Ft=this.autoPaging!=="text";if(Ft||mt.y+mt.h<=tt){if(Ft||mt.y>=rt&&mt.x<=Qt){var ct=Ft?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Qt-mt.x)[0],Br=J([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-Zt+rt+this.ctx.prevPageLastElemOffset)[0],er=Ft&&(_t>St||_t<We)&&C.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,ur,null).clip().discardPath()),this.pdf.text(ct,Br.x,Br.y,{angle:j.angle,align:q,renderingMode:j.renderingMode}),er&&this.pdf.restoreGraphicsState()}}else mt.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-mt.y);j.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=ue)}}else j.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*j.scale),ue=this.lineWidth,this.lineWidth=ue*j.scale),this.pdf.text(j.text,Ce.x+this.posX,Ce.y+this.posY,{angle:j.angle,align:q,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=ue)},re=function(j,q,X,ae){X=X||0,ae=ae||0,this.pdf.internal.out(t(j+X)+" "+s(q+ae)+" l")},W=function(j,q,X){return this.pdf.lines(j,q,X,null,null)},ie=function(j,q,X,ae,ue,ye,he,Se){this.pdf.internal.out([e(a(X+j)),e(o(ae+q)),e(a(ue+j)),e(o(ye+q)),e(a(he+j)),e(o(Se+q)),"c"].join(" "))},fe=function(j,q,X,ae){for(var ue=2*Math.PI,ye=Math.PI/2;q>X;)q-=ue;var he=Math.abs(X-q);he<ue&&ae&&(he=ue-he);for(var Se=[],Ce=ae?-1:1,ze=q;he>1e-5;){var Ie=ze+Ce*Math.min(he,ye);Se.push(ee.call(this,j,ze,Ie)),he-=Math.abs(Ie-ze),ze=Ie}return Se},ee=function(j,q,X){var ae=(X-q)/2,ue=j*Math.cos(ae),ye=j*Math.sin(ae),he=ue,Se=-ye,Ce=he*he+Se*Se,ze=Ce+he*ue+Se*ye,Ie=4/3*(Math.sqrt(2*Ce*ze)-ze)/(he*ye-Se*ue),Ge=he-Ie*Se,st=Se+Ie*he,Z=Ge,Qe=-st,It=ae+q,St=Math.cos(It),We=Math.sin(It);return{x1:j*Math.cos(q),y1:j*Math.sin(q),x2:Ge*St-st*We,y2:Ge*We+st*St,x3:Z*St-Qe*We,y3:Z*We+Qe*St,x4:j*Math.cos(X),y4:j*Math.sin(X)}},z=function(j){return 180*j/Math.PI},le=function(j,q,X,ae,ue,ye){var he=j+.5*(X-j),Se=q+.5*(ae-q),Ce=ue+.5*(X-ue),ze=ye+.5*(ae-ye),Ie=Math.min(j,ue,he,Ce),Ge=Math.max(j,ue,he,Ce),st=Math.min(q,ye,Se,ze),Z=Math.max(q,ye,Se,ze);return new d(Ie,st,Ge-Ie,Z-st)},be=function(j,q,X,ae,ue,ye,he,Se){var Ce,ze,Ie,Ge,st,Z,Qe,It,St,We,_t,rt,ut,tt,ur=X-j,Qt=ae-q,Wt=ue-X,Zt=ye-ae,Dt=he-ue,mt=Se-ye;for(ze=0;ze<41;ze++)St=(Qe=(Ie=j+(Ce=ze/40)*ur)+Ce*((st=X+Ce*Wt)-Ie))+Ce*(st+Ce*(ue+Ce*Dt-st)-Qe),We=(It=(Ge=q+Ce*Qt)+Ce*((Z=ae+Ce*Zt)-Ge))+Ce*(Z+Ce*(ye+Ce*mt-Z)-It),ze==0?(_t=St,rt=We,ut=St,tt=We):(_t=Math.min(_t,St),rt=Math.min(rt,We),ut=Math.max(ut,St),tt=Math.max(tt,We));return new d(Math.round(_t),Math.round(rt),Math.round(ut-_t),Math.round(tt-rt))},V=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,q,X=(j=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:q}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Et.API),(function(n){var e=function(u){var d,f,p,v,_,S,y,E,C,L;for(f=[],p=0,v=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;v>p;p+=4)(_=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(S=(_=((_=((_=((_=(_-(L=_%85))/85)-(C=_%85))/85)-(E=_%85))/85)-(y=_%85))/85)%85,f.push(S+33,y+33,E+33,C+33,L+33)):f.push(122);return(function(A,J){for(var B=J;B>0;B--)A.pop()})(f,d.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var d,f,p,v,_,S=String,y="length",E=255,C="charCodeAt",L="slice",A="replace";for(u[L](-2),u=u[L](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),p=[],v=0,_=(u+=d="uuuuu"[L](u[y]%5||5))[y];_>v;v+=5)f=52200625*(u[C](v)-33)+614125*(u[C](v+1)-33)+7225*(u[C](v+2)-33)+85*(u[C](v+3)-33)+(u[C](v+4)-33),p.push(E&f>>24,E&f>>16,E&f>>8,E&f);return(function(J,B){for(var $=B;$>0;$--)J.pop()})(p,d[y]),S.fromCharCode.apply(S,p)},s=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var d=new Uint8Array(u.length),f=u.length;f--;)d[f]=u.charCodeAt(f);return(d=Sf(d)).reduce(function(p,v){return p+String.fromCharCode(v)},"")};n.processDataByFilters=function(u,d){var f=0,p=u||"",v=[];for(typeof(d=d||[])=="string"&&(d=[d]),f=0;f<d.length;f+=1)switch(d[f]){case"ASCII85Decode":case"/ASCII85Decode":p=t(p),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=a(p),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=s(p),v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[f]+'" is not implemented')}return{data:p,reverseChain:v.reverse().join(" ")}}})(Et.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(f,p,v){var _=new XMLHttpRequest,S=0,y=function(E){var C=E.length,L=[],A=String.fromCharCode;for(S=0;S<C;S+=1)L.push(A(255&E.charCodeAt(S)));return L.join("")};if(_.open("GET",f,!p),_.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(_.onload=function(){_.status===200?v(y(this.responseText)):v(void 0)}),_.send(null),p&&_.status===200)return y(_.responseText)})(a,o,u)}catch{}return d})(e,t,s)},n.loadImageFile=n.loadFile})(Et.API),(function(n){function e(){return(Vt.html2canvas?Promise.resolve(Vt.html2canvas):el(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Vt.DOMPurify?Promise.resolve(Vt.DOMPurify):el(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var f=Ar(d);return f==="undefined"?"undefined":f==="string"||d instanceof String?"string":f==="number"||d instanceof Number?"number":f==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(d,f){var p=document.createElement(d);for(var v in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[v]=f.style[v];return p},o=function d(f,p){for(var v=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),_=f.firstChild;_;_=_.nextSibling)p!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||v.appendChild(d(_,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(v.width=f.width,v.height=f.height,v.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(v.value=f.value),v.addEventListener("load",function(){v.scrollTop=f.scrollTop,v.scrollLeft=f.scrollLeft},!0)),v},u=function d(f){var p=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),v=d.convert(Promise.resolve(),p);return(v=v.setProgress(1,d,1,[d])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,f){return d.__proto__=f||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,f){return this.then(function(){switch(f=f||(function(p){switch(s(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),f){case"string":return this.then(t).then(function(p){return this.set({src:a("div",{innerHTML:d,dompurify:p})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var p=this.opt.jsPDF,v=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=v,v)for(var y=0;y<v.length;++y){var E=v[y],C=E.src.find(function(L){return L.format==="truetype"});C&&p.addFont(C.url,E.ref.name,E.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,p.context2d.save(!0),f(this.prop.container,S)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(d,f):this.outputPdf(d,f)},u.prototype.outputPdf=function(d,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,f)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(s(d)!=="object")return this;var f=Object.keys(d||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=d[p]};switch(p){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[p]=d[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(d,f){return this.then(function(){var p=d in u.template.prop?this.prop[d]:this.opt[d];return f?f(p):p})},u.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function f(p,v){return Math.floor(p*v/72*96)}return this.then(function(){(d=d||Et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:f(d.inner.width,d.k),height:f(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,f,p,v){return d!=null&&(this.progress.val=d),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,f,p,v){return this.setProgress(d?this.progress.val+d:null,f||null,p?this.progress.n+p:null,v?this.progress.stack.concat(v):null)},u.prototype.then=function(d,f){var p=this;return this.thenCore(d,f,function(v,_){return p.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(S){return p.updateProgress(null,v),S}).then(v,_).then(function(S){return p.updateProgress(1),S})})},u.prototype.thenCore=function(d,f,p){p=p||Promise.prototype.then;var v=this;d&&(d=d.bind(v)),f&&(f=f.bind(v));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?v:u.convert(Object.assign({},v),Promise.prototype),S=p.call(_,d,f);return u.convert(S,v.__proto__)},u.prototype.thenExternal=function(d,f){return Promise.prototype.then.call(this,d,f)},u.prototype.thenList=function(d){var f=this;return d.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(d){d&&(d=d.bind(this));var f=Promise.prototype.catch.call(this,d);return u.convert(f,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Et.getPageSize=function(d,f,p){if(Ar(d)==="object"){var v=d;d=v.orientation,f=v.unit||f,p=v.format||p}f=f||"mm",p=p||"a4",d=(""+(d||"P")).toLowerCase();var _,S=(""+p).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+f}var E,C=0,L=0;if(y.hasOwnProperty(S))C=y[S][1]/_,L=y[S][0]/_;else try{C=p[1],L=p[0]}catch{throw new Error("Invalid format: "+p)}if(d==="p"||d==="portrait")d="p",L>C&&(E=L,L=C,C=E);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>L&&(E=L,L=C,C=E)}return{width:L,height:C,unit:f,k:_,orientation:d}},n.html=function(d,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(nf):null;var p=new u(f);return f.worker?p:p.from(d).doCallback()}})(Et.API),Et.API.addJS=function(n){return Dm=n,this.internal.events.subscribe("postPutResources",function(){vd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Im=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Dm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vd!==void 0&&Im!==void 0&&this.internal.out("/Names <</JavaScript "+vd+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],d=s.exec(u);if(d!=null){var f=d[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,v=[];for(o=0;o<p;o++){var _=t.internal.newObject();v.push(_);var S=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<v.length;o++)t.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var p=0;p<s.children.length;p++)this.renderItems(s.children[p])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(Et.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,d){var f,p=this.decode.DCT_DECODE,v=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(_){for(var S,y=256*_.charCodeAt(4)+_.charCodeAt(5),E=_.length,C={width:0,height:0,numcomponents:1},L=4;L<E;L+=2){if(L+=y,e.indexOf(_.charCodeAt(L+1))!==-1){S=256*_.charCodeAt(L+5)+_.charCodeAt(L+6),C={width:256*_.charCodeAt(L+7)+_.charCodeAt(L+8),height:S,numcomponents:_.charCodeAt(L+9)};break}y=256*_.charCodeAt(L+2)+_.charCodeAt(L+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}v={data:t,width:f.width,height:f.height,colorSpace:d,bitsPerComponent:8,filter:p,index:s,alias:a}}return v}})(Et.API),Et.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=O5(n,{checkCrc:!0}),u=o.width,d=o.height,f=o.channels,p=o.palette,v=o.depth;a=p&&f===1?(function(Y){for(var D=Y.width,se=Y.height,I=Y.data,R=Y.palette,re=Y.depth,W=!1,ie=[],fe=[],ee=void 0,z=!1,le=0,be=0;be<R.length;be++){var V=Bp(R[be],4),j=V[0],q=V[1],X=V[2],ae=V[3];ie.push(j,q,X),ae!=null&&(ae===0?(le++,fe.length<1&&fe.push(be)):ae<255&&(z=!0))}if(z||le>1){W=!0,fe=void 0;var ue=D*se;ee=new Uint8Array(ue);for(var ye=new DataView(I.buffer),he=0;he<ue;he++){var Se=af(ye,he,re),Ce=Bp(R[Se],4)[3];ee[he]=Ce}}else le===0&&(fe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:I,alphaBytes:ee,needSMask:W,palette:ie,mask:fe}})(o):f===2||f===4?(function(Y){for(var D=Y.data,se=Y.width,I=Y.height,R=Y.channels,re=Y.depth,W=R===2?"DeviceGray":"DeviceRGB",ie=R-1,fe=se*I,ee=ie,z=fe*ee,le=1*fe,be=Math.ceil(z*re/8),V=Math.ceil(le*re/8),j=new Uint8Array(be),q=new Uint8Array(V),X=new DataView(D.buffer),ae=new DataView(j.buffer),ue=new DataView(q.buffer),ye=!1,he=0;he<fe;he++){for(var Se=he*R,Ce=0;Ce<ee;Ce++)Wm(ae,af(X,Se+Ce,re),he*ee+Ce,re);var ze=af(X,Se+ee,re);ze<(1<<re)-1&&(ye=!0),Wm(ue,ze,1*he,re)}return{colorSpace:W,colorsPerPixel:ie,sMaskBitsPerComponent:ye?re:void 0,colorBytes:j,alphaBytes:q,needSMask:ye}})(o):(function(Y){var D=Y.data,se=Y.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:se,colorsPerPixel:se==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?(function(I){for(var R=I.length,re=new Uint8Array(2*R),W=new DataView(re.buffer,re.byteOffset,re.byteLength),ie=0;ie<R;ie++)W.setUint16(2*ie,I[ie],!1);return re})(D):D,needSMask:!1}})(o);var _,S,y,E=a,C=E.colorSpace,L=E.colorsPerPixel,A=E.sMaskBitsPerComponent,J=E.colorBytes,B=E.alphaBytes,$=E.needSMask,oe=E.palette,de=E.mask,H=null;return s!==Et.API.image_compression.NONE&&typeof Sf=="function"?(H=(function(Y){var D;switch(Y){case Et.API.image_compression.FAST:D=11;break;case Et.API.image_compression.MEDIUM:D=13;break;case Et.API.image_compression.SLOW:D=14;break;default:D=12}return D})(s),_=this.decode.FLATE_DECODE,S="/Predictor ".concat(H," /Colors ").concat(L," /BitsPerComponent ").concat(v," /Columns ").concat(u),n=Bm(J,Math.ceil(u*L*v/8),L,v,s),$&&(y=Bm(B,Math.ceil(u*A/8),1,A,s))):(_=void 0,S=void 0,n=J,$&&(y=B)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:n,index:e,filter:_,decodeParameters:S,transparency:de,palette:oe,sMask:y,predictor:H,width:u,height:d,bitsPerComponent:v,sMaskBitsPerComponent:A,colorSpace:C}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new eb(e),u=o.width,d=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:d},v=new of(100).encode(p,100);return n.processJPEG.call(this,v,t,s,a)},n.processGIF87A=n.processGIF89A})(Et.API),ca.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ca.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Fr.log("bit decode error:"+t)}},ca.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var f=this.palette[o>>7-d&1];this.data[u+4*d]=f.blue,this.data[u+4*d+1]=f.green,this.data[u+4*d+2]=f.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ca.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,d=o>>4,f=15&o,p=this.palette[d];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*a+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},ca.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ca.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,p=o>>15?255:0,v=s*this.width*4+4*a;this.data[v]=f,this.data[v+1]=d,this.data[v+2]=u,this.data[v+3]=p}this.pos+=n}},ca.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,p=(u>>11)/e*255|0,v=a*this.width*4+4*o;this.data[v]=p,this.data[v+1]=f,this.data[v+2]=d,this.data[v+3]=255}this.pos+=n}},ca.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},ca.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=u}},ca.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new ca(e,!1),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},p=new of(100).encode(f,100);return n.processJPEG.call(this,p,t,s,a)}})(Et.API),Vm.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Vm(e),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},p=new of(100).encode(f,100);return n.processJPEG.call(this,p,t,s,a)}})(Et.API),Et.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),d=0,f=0,p=0;p<a;p+=4){var v=s[p],_=s[p+1],S=s[p+2],y=s[p+3];o[d++]=v,o[d++]=_,o[d++]=S,u[f++]=y}var E=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Et.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_c=Et.API,xd=_c.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:a.metadata.Unicode.widths,f=d.fof?d.fof:1,p=e.kerning?e.kerning:a.metadata.Unicode.kerning,v=p.fof?p.fof:1,_=e.doKerning!==!1,S=0,y=n.length,E=0,C=d[0]||f,L=[];for(t=0;t<y;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?L.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(S=_&&Ar(p[s])==="object"&&!isNaN(parseInt(p[s][E],10))?p[s][E]/v:0,L.push((d[s]||C)/f+S)),E=s;return L},Rm=_c.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return _c.processArabic&&(n=_c.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:xd.apply(this,arguments).reduce(function(o,u){return o+u},0)},Fm=function(n,e,t,s){for(var a=[],o=0,u=n.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;a.push(n.slice(0,o));var f=o;for(d=0;o!==u;)d+e[o]>s&&(a.push(n.slice(f,o)),d=0,f=o),d+=e[o],o++;return f!==o&&a.push(n.slice(f,o)),a},Mm=function(n,e,t){t||(t={});var s,a,o,u,d,f,p,v=[],_=[v],S=t.textIndent||0,y=0,E=0,C=n.split(" "),L=xd.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var A=Array(f).join(" "),J=[];C.map(function($){($=$.split(/\s*\n/)).length>1?J=J.concat($.map(function(oe,de){return(de&&oe.length?`
`:"")+oe})):J.push($[0])}),C=J,f=Rm.apply(this,[A,t])}for(o=0,u=C.length;o<u;o++){var B=0;if(s=C[o],f&&s[0]==`
`&&(s=s.substr(1),B=1),S+y+(E=(a=xd.apply(this,[s,t])).reduce(function($,oe){return $+oe},0))>e||B){if(E>e){for(d=Fm.apply(this,[s,a,e-(S+y),e]),v.push(d.shift()),v=[d.pop()];d.length;)_.push([d.shift()]);E=a.slice(s.length-(v[0]?v[0].length:0)).reduce(function($,oe){return $+oe},0)}else v=[s];_.push(v),S=E+f,y=L}else v.push(s),S+=y+E,y=L}return p=f?function($,oe){return(oe?A:"")+$.join(" ")}:function($){return $.join(" ")},_.map(p)},_c.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var _=this.internal.getFont(v.fontName,v.fontStyle),S="Unicode";return _.metadata[S]?{widths:_.metadata[S].widths||{0:1},kerning:_.metadata[S].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var d,f,p=[];for(d=0,f=s.length;d<f;d++)p=p.concat(Mm.apply(this,[s[d],u,o]));return p},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(S){return"0x"+parseInt(S,10).toString(16)},d=n.__fontmetrics__.compress=function(S){var y,E,C,L,A=["{"];for(var J in S){if(y=S[J],isNaN(parseInt(J,10))?E="'"+J+"'":(J=parseInt(J,10),E=(E=u(J).slice(2)).slice(0,-1)+a[E.slice(-1)]),typeof y=="number")y<0?(C=u(y).slice(3),L="-"):(C=u(y).slice(2),L=""),C=L+C.slice(0,-1)+a[C.slice(-1)];else{if(Ar(y)!=="object")throw new Error("Don't know what to do with value type "+Ar(y)+".");C=d(y)}A.push(E+C)}return A.push("}"),A.join("")},f=n.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,E,C,L,A={},J=1,B=A,$=[],oe="",de="",H=S.length-1,Y=1;Y<H;Y+=1)(L=S[Y])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(L):L=="{"?($.push([B,C]),B={},C=void 0):L=="}"?((E=$.pop())[0][E[1]]=B,C=void 0,B=E[0]):L=="-"?J=-1:C===void 0?s.hasOwnProperty(L)?(oe+=s[L],C=parseInt(oe,16)*J,J=1,oe=""):oe+=L:s.hasOwnProperty(L)?(de+=s[L],B[C]=parseInt(de,16)*J,J=1,C=void 0,de=""):de+=L;return A},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},_={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(S){var y=S.font,E=_.Unicode[y.postScriptName];E&&(y.metadata.Unicode={},y.metadata.Unicode.widths=E.widths,y.metadata.Unicode.kerning=E.kerning);var C=v.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])})(Et.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(wd(d)),u.metadata=n.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(Et),Et.API.addSvgAsImage=function(n,e,t,s,a,o,u,d){if(isNaN(e)||isNaN(t))throw Fr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Fr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(Vt.canvg?Promise.resolve(Vt.canvg):el(()=>import("./index.es-H2ir0g_Q.js"),[])).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(v)}).then(function(){_.addImage(f.toDataURL("image/jpeg",1),e,t,s,a,u,d)})},Et.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},Et.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),f=[],p=0,v=0,_=0;function S(E,C){var L,A=!1;for(L=0;L<E.length;L+=1)E[L]===C&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var y=d.length;for(_=0;_<y;_+=1)t[d[_]].value=t[d[_]].defaultValue,t[d[_]].explicitSet=!1}if(Ar(n)==="object"){for(a in n)if(o=n[a],S(d,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&S(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(p=0;p<o.length;p+=1)if(s=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(v=0;v<o[p].length;v+=1)typeof o[p][v]!="number"&&(s=!1);s===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}t[a].value="["+f.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,C=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?C.push("/"+E+" /"+t[E].value):C.push("/"+E+" "+t[E].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+d.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+d+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Et.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var d,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],v=[""],_=0,S=o.length;_<S;++_){if(d=u.metadata.characterToGlyph(o.charCodeAt(_)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(_),f.indexOf(d)==-1&&(f.push(d),f.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return v.join("");d=d.toString(16),v.push(p[4-d.length],d)}return v.join("")},s=function(o){var u,d,f,p,v,_,S;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],_=0,S=(d=Object.keys(o).sort(function(y,E){return y-E})).length;_<S;_++)u=d[_],f.length>=100&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),v+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,p=u.newObject,v=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var _=d.metadata.Unicode.widths,S=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",E=0;E<S.length;E++)y+=String.fromCharCode(S[E]);var C=p();v({data:y,addLength1:!0,objectId:C}),f("endobj");var L=p();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:L}),f("endobj");var A=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+jc(d.fontName)),f("/FontFile2 "+C+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/Flags "+d.metadata.flags),f("/StemV "+d.metadata.stemV),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f(">>"),f("endobj");var J=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+jc(d.fontName)),f("/FontDescriptor "+A+" 0 R"),f("/W "+n.API.PDFObject.convert(_)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+d.encoding+")"),f(">>"),f(">>"),f("endobj"),d.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+L+" 0 R"),f("/BaseFont /"+jc(d.fontName)),f("/Encoding /"+d.encoding),f("/DescendantFonts ["+J+" 0 R]"),f(">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,p=u.newObject,v=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var _=d.metadata.rawData,S="",y=0;y<_.length;y++)S+=String.fromCharCode(_[y]);var E=p();v({data:S,addLength1:!0,objectId:E}),f("endobj");var C=p();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:C}),f("endobj");var L=p();f("<<"),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f("/StemV "+d.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+E+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/FontName /"+jc(d.fontName)),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f(">>"),f("endobj"),d.objectNumber=p();for(var A=0;A<d.metadata.hmtx.widths.length;A++)d.metadata.hmtx.widths[A]=parseInt(d.metadata.hmtx.widths[A]*(1e3/d.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+jc(d.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,d=o.text||"",f=o.x,p=o.y,v=o.options||{},_=o.mutex||{},S=_.pdfEscape,y=_.activeFontKey,E=_.fonts,C=y,L="",A=0,J="",B=E[C].encoding;if(E[C].encoding!=="Identity-H")return{text:d,x:f,y:p,options:v,mutex:_};for(J=d,C=y,Array.isArray(d)&&(J=d[0]),A=0;A<J.length;A+=1)E[C].metadata.hasOwnProperty("cmap")&&(u=E[C].metadata.cmap.unicode.codeMap[J[A].charCodeAt(0)]),u||J[A].charCodeAt(0)<256&&E[C].metadata.hasOwnProperty("Unicode")?L+=J[A]:L+="";var $="";return parseInt(C.slice(1))<14||B==="WinAnsiEncoding"?$=S(L,C).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&($=t(L,E[C])),_.isHex=!0,{text:$,x:f,y:p,options:v,mutex:_}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?d.push([a(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):d.push(a(Object.assign({},f,{text:u[p]})).text);o.text=d}else o.text=a(Object.assign({},f,{text:u})).text}])})(Et),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Et.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,d,f,p,v,_=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),J=!1,B=0;this.__bidiEngine__={};var $=function(I){var R=I.charCodeAt(),re=R>>8,W=C[re];return W!==void 0?_[256*W+(255&R)]:re===252||re===253?"AL":A.test(re)?"L":re===8?"R":"N"},oe=function(I){for(var R,re=0;re<I.length;re++){if((R=$(I.charAt(re)))==="L")return!1;if(R==="R")return!0}return!1},de=function(I,R,re,W){var ie,fe,ee,z,le=R[W];switch(le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":J=!1;break;case"N":case"AN":break;case"EN":J&&(le="AN");break;case"AL":J=!0,le="R";break;case"WS":case"BN":le="N";break;case"CS":W<1||W+1>=R.length||(ie=re[W-1])!=="EN"&&ie!=="AN"||(fe=R[W+1])!=="EN"&&fe!=="AN"?le="N":J&&(fe="AN"),le=fe===ie?fe:"N";break;case"ES":le=(ie=W>0?re[W-1]:"B")==="EN"&&W+1<R.length&&R[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&re[W-1]==="EN"){le="EN";break}if(J){le="N";break}for(ee=W+1,z=R.length;ee<z&&R[ee]==="ET";)ee++;le=ee<z&&R[ee]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(z=R.length,ee=W+1;ee<z&&R[ee]==="NSM";)ee++;if(ee<z){var be=I[W],V=be>=1425&&be<=2303||be===64286;if(ie=R[ee],V&&(ie==="R"||ie==="AL")){le="R";break}}}le=W<1||(ie=R[W-1])==="B"?"N":re[W-1];break;case"B":J=!1,a=!0,le=B;break;case"S":o=!0,le="N"}return le},H=function(I,R,re){var W=I.split("");return re&&Y(W,re,{hiLevel:B}),W.reverse(),R&&R.reverse(),W.join("")},Y=function(I,R,re){var W,ie,fe,ee,z,le=-1,be=I.length,V=0,j=[],q=B?y:S,X=[];for(J=!1,a=!1,o=!1,ie=0;ie<be;ie++)X[ie]=$(I[ie]);for(fe=0;fe<be;fe++){if(z=V,j[fe]=de(I,X,j,fe),W=240&(V=q[z][E[j[fe]]]),V&=15,R[fe]=ee=q[V][5],W>0)if(W===16){for(ie=le;ie<fe;ie++)R[ie]=1;le=-1}else le=-1;if(q[V][6])le===-1&&(le=fe);else if(le>-1){for(ie=le;ie<fe;ie++)R[ie]=ee;le=-1}X[fe]==="B"&&(R[fe]=0),re.hiLevel|=ee}o&&(function(ae,ue,ye){for(var he=0;he<ye;he++)if(ae[he]==="S"){ue[he]=B;for(var Se=he-1;Se>=0&&ae[Se]==="WS";Se--)ue[Se]=B}})(X,R,be)},D=function(I,R,re,W,ie){if(!(ie.hiLevel<I)){if(I===1&&B===1&&!a)return R.reverse(),void(re&&re.reverse());for(var fe,ee,z,le,be=R.length,V=0;V<be;){if(W[V]>=I){for(z=V+1;z<be&&W[z]>=I;)z++;for(le=V,ee=z-1;le<ee;le++,ee--)fe=R[le],R[le]=R[ee],R[ee]=fe,re&&(fe=re[le],re[le]=re[ee],re[ee]=fe);V=z}V++}}},se=function(I,R,re){var W=I.split(""),ie={hiLevel:B};return re||(re=[]),Y(W,re,ie),(function(fe,ee,z){if(z.hiLevel!==0&&v)for(var le,be=0;be<fe.length;be++)ee[be]===1&&(le=L.indexOf(fe[be]))>=0&&(fe[be]=L[le+1])})(W,re,ie),D(2,W,R,re,ie),D(1,W,R,re,ie),W.join("")};return this.__bidiEngine__.doBidiReorder=function(I,R,re){if((function(ie,fe){if(fe)for(var ee=0;ee<ie.length;ee++)fe[ee]=ee;d===void 0&&(d=oe(ie)),p===void 0&&(p=oe(ie))})(I,R),u||!f||p)if(u&&f&&d^p)B=d?1:0,I=H(I,R,re);else if(!u&&f&&p)B=d?1:0,I=se(I,R,re),I=H(I,R);else if(!u||d||f||p){if(u&&!f&&d^p)I=H(I,R),d?(B=0,I=se(I,R,re)):(B=1,I=se(I,R,re),I=H(I,R));else if(u&&d&&!f&&p)B=1,I=se(I,R,re),I=H(I,R);else if(!u&&!f&&d^p){var W=v;d?(B=1,I=se(I,R,re),B=0,v=!1,I=se(I,R,re),v=W):(B=0,I=se(I,R,re),I=H(I,R),B=1,v=!1,I=se(I,R,re),v=W,I=H(I,R))}}else B=0,I=se(I,R,re);else B=d?1:0,I=se(I,R,re);return I},this.__bidiEngine__.setOptions=function(I){I&&(u=I.isInputVisual,f=I.isOutputVisual,d=I.isInputRtl,p=I.isOutputRtl,v=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(u=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?u.push([t.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):u.push([t.doBidiReorder(a[d])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(Et),Et.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new tl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new mb(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new tb(this.contents),this.head=new nb(this),this.name=new lb(this),this.cmap=new c1(this),this.toUnicode={},this.hhea=new sb(this),this.maxp=new cb(this),this.hmtx=new ub(this),this.post=new ab(this),this.os2=new ib(this),this.loca=new pb(this),this.glyf=new db(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.bbox).length;u<d;u++)e=f[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var pa,tl=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,d,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*d+f},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),tb=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,d,f,p,v,_,S,y,E,C;for(C in y=Object.keys(t).length,f=Math.log(2),_=16*Math.floor(Math.log(y)/f),u=Math.floor(_/f),v=16*y-_,(a=new tl).writeInt(this.scalarType),a.writeShort(y),a.writeShort(_),a.writeShort(u),a.writeShort(v),o=16*y,p=a.pos+o,d=null,E=[],t)for(S=t[C],a.writeString(C),a.writeInt(n(S)),a.writeInt(p),a.writeInt(S.length),E=E.concat(S),C==="head"&&(d=p),p+=S.length;p%4;)E.push(0),p++;return a.write(E),s=2981146554-n(a.data),a.pos=d+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=u1.call(t);t.length%4;)t.push(0);for(o=new tl(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),rb={}.hasOwnProperty,Ba=function(n,e){for(var t in e)rb.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};pa=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var nb=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new tl).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Gm=(function(){function n(e,t){var s,a,o,u,d,f,p,v,_,S,y,E,C,L,A,J,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),S=y/2,e.pos+=6,o=(function(){var $,oe;for(oe=[],f=$=0;0<=S?$<S:$>S;f=0<=S?++$:--$)oe.push(e.readUInt16());return oe})(),e.pos+=2,C=(function(){var $,oe;for(oe=[],f=$=0;0<=S?$<S:$>S;f=0<=S?++$:--$)oe.push(e.readUInt16());return oe})(),p=(function(){var $,oe;for(oe=[],f=$=0;0<=S?$<S:$>S;f=0<=S?++$:--$)oe.push(e.readUInt16());return oe})(),v=(function(){var $,oe;for(oe=[],f=$=0;0<=S?$<S:$>S;f=0<=S?++$:--$)oe.push(e.readUInt16());return oe})(),a=(this.length-e.pos+this.offset)/2,d=(function(){var $,oe;for(oe=[],f=$=0;0<=a?$<a:$>a;f=0<=a?++$:--$)oe.push(e.readUInt16());return oe})(),f=A=0,B=o.length;A<B;f=++A)for(L=o[f],s=J=E=C[f];E<=L?J<=L:J>=L;s=E<=L?++J:--J)v[f]===0?u=s+p[f]:(u=d[v[f]/2+(s-E)-(S-f)]||0)!==0&&(u+=p[f]),this.codeMap[s]=65535&u}e.pos=_}return n.encode=function(e,t){var s,a,o,u,d,f,p,v,_,S,y,E,C,L,A,J,B,$,oe,de,H,Y,D,se,I,R,re,W,ie,fe,ee,z,le,be,V,j,q,X,ae,ue,ye,he,Se,Ce,ze,Ie;switch(W=new tl,u=Object.keys(e).sort(function(Ge,st){return Ge-st}),t){case"macroman":for(C=0,L=(function(){var Ge=[];for(E=0;E<256;++E)Ge.push(0);return Ge})(),J={0:0},o={},ie=0,le=u.length;ie<le;ie++)J[Se=e[a=u[ie]]]==null&&(J[Se]=++C),o[a]={old:e[a],new:J[e[a]]},L[a]=J[e[a]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(L),{charMap:o,subtable:W.data,maxGlyphID:C+1};case"unicode":for(R=[],_=[],B=0,J={},s={},A=p=null,fe=0,be=u.length;fe<be;fe++)J[oe=e[a=u[fe]]]==null&&(J[oe]=++B),s[a]={old:oe,new:J[oe]},d=J[oe]-a,A!=null&&d===p||(A&&_.push(A),R.push(a),p=d),A=a;for(A&&_.push(A),_.push(65535),R.push(65535),se=2*(D=R.length),Y=2*Math.pow(Math.log(D)/Math.LN2,2),S=Math.log(Y/2)/Math.LN2,H=2*D-Y,f=[],de=[],y=[],E=ee=0,V=R.length;ee<V;E=++ee){if(I=R[E],v=_[E],I===65535){f.push(0),de.push(0);break}if(I-(re=s[I].new)>=32768)for(f.push(0),de.push(2*(y.length+D-E)),a=z=I;I<=v?z<=v:z>=v;a=I<=v?++z:--z)y.push(s[a].new);else f.push(re-I),de.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*D+2*y.length),W.writeUInt16(0),W.writeUInt16(se),W.writeUInt16(Y),W.writeUInt16(S),W.writeUInt16(H),ye=0,j=_.length;ye<j;ye++)a=_[ye],W.writeUInt16(a);for(W.writeUInt16(0),he=0,q=R.length;he<q;he++)a=R[he],W.writeUInt16(a);for(Ce=0,X=f.length;Ce<X;Ce++)d=f[Ce],W.writeUInt16(d);for(ze=0,ae=de.length;ze<ae;ze++)$=de[ze],W.writeUInt16($);for(Ie=0,ue=y.length;Ie<ue;Ie++)C=y[Ie],W.writeUInt16(C);return{charMap:s,subtable:W.data,maxGlyphID:B+1}}},n})(),c1=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Gm(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Gm.encode(e,t),(a=new tl).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),sb=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),ib=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),ab=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,d,f;for(f=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)f.push(e.readUInt32());return f}).call(this)}},n})(),ob=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lb=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,d,f,p,v,_,S;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(f={},o=v=0,_=s.length;v<_;o=++v)a=s[o],e.pos=a.offset,p=e.readString(a.length),u=new ob(p,a),f[S=a.nameID]==null&&(f[S]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},n})(),cb=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),ub=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,d,f;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,v;for(v=[],t=p=0;0<=a?p<a:p>a;t=0<=a?++p:--p)v.push(e.readInt16());return v})(),this.widths=(function(){var p,v,_,S;for(S=[],p=0,v=(_=this.metrics).length;p<v;p++)o=_[p],S.push(o.advance);return S}).call(this),s=this.widths[this.widths.length-1],f=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)f.push(this.widths.push(s));return f},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),u1=[].slice,db=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,d,f,p,v,_;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(d=new tl(t.read(a))).readShort(),p=d.readShort(),_=d.readShort(),f=d.readShort(),v=d.readShort(),this.cache[e]=u===-1?new fb(d,p,_,f,v):new hb(d,u,p,_,f,v),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,d,f;for(u=[],o=[],d=0,f=t.length;d<f;d++)a=e[t[d]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),hb=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),fb=(function(){function n(e,t,s,a,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new tl(u1.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),pb=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ba(n,pa),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var d=this.offsets[u],f=this.offsets[u+1]-d;f>0&&(a+=f)}for(var p=new Array(4*s.length),v=0;v<s.length;++v)p[4*v+3]=255&s[v],p[4*v+2]=(65280&s[v])>>8,p[4*v+1]=(16711680&s[v])>>16,p[4*v]=(4278190080&s[v])>>24;return p},n})(),mb=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,d,f;for(a={},u=0,d=e.length;u<d;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))s=f[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,d,f,p,v,_,S,y,E,C,L,A;for(a in s=c1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},A=s.charMap)y[(f=A[a]).old]=f.new;for(E in S=s.maxGlyphID,u)E in y||(y[E]=S++);return v=(function(J){var B,$;for(B in $={},J)$[J[B]]=B;return $})(y),_=Object.keys(v).sort(function(J,B){return J-B}),C=(function(){var J,B,$;for($=[],J=0,B=_.length;J<B;J++)d=_[J],$.push(v[d]);return $})(),o=this.font.glyf.encode(u,C,y),p=this.font.loca.encode(o.offsets,C),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();Et.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var d,f,p;for(p=[],d=0,f=t.length;d<f;d++)s=t[d],p.push(e.convert(s));return p})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();function Ym(n){const e=new Date(n);return Number.isNaN(e.getTime())?new Date().toISOString().slice(0,10):e.toISOString().slice(0,10)}function gb(n){if(!n)return"N/A";const e=n.toLowerCase();return e==="dog"?"Dog":e==="cat"?"Cat":n}function d1(n){const e=parseFloat(String(n||"").replace(/[^0-9.\-]/g,""));return Number.isFinite(e)?e:0}function vb(n){return`$${d1(n).toFixed(2)}`}function xb(n){return`$${(Number.isFinite(n)?n:0).toFixed(2)}`}function yb(n,e){const t=new Et({unit:"pt",format:"letter"}),s=56,a=556,o=a-s;let u=64;const d=de=>{t.setFont("helvetica","bold"),t.setFontSize(18),t.text(de,s,u),u+=18,t.setDrawColor(64),t.setLineWidth(1),t.line(s,u+10,a,u+10),u+=24},f=(de,H)=>{t.setFont("helvetica","bold"),t.setFontSize(11),t.text(de,s,u),t.setFont("helvetica","normal"),t.setFontSize(11),t.text(H||"",s+160,u),u+=18},p=de=>{t.setFont("helvetica","bold"),t.setFontSize(13),t.text(de,s,u),u+=14};d("Pet Insurance Claim Form"),p("Insurance Information"),f("Company",e?.insuranceCompany||"N/A"),f("Policy Number",e?.policyNumber||"N/A"),f("Invoice Number",n.invoiceNumber||"N/A"),u+=8,p("Pet Owner Information"),f("Owner Name",e?.ownerName||"N/A"),f("Phone",e?.ownerPhone||"N/A"),u+=8,p("Pet Information"),f("Pet Name",n.petName||e?.name||"N/A"),f("Species",gb(e?.species)),u+=8,p("Veterinary Clinic"),f("Clinic Name",n.clinicName||"N/A"),f("Clinic Address",n.clinicAddress||"N/A"),u+=8,p("Service Details"),f("Date of Service",n.dateOfService||Ym(new Date().toISOString())),f("Diagnosis / Reason",n.diagnosis||"N/A"),u+=8,p("Itemized Charges");const v=Math.floor(o*.7),_=s,S=a,y=14;t.setFont("helvetica","bold"),t.text("Description",_,u),t.text("Amount",S,u,{align:"right"}),u+=14,t.setDrawColor(200),t.line(s,u,a,u),u+=10,n.lineItems.forEach(de=>{const H=de.description||"",Y=vb(de.amount);t.setFont("helvetica","normal"),t.setFontSize(11);const D=t.splitTextToSize(H,v);t.setFont("courier","normal"),t.text(Y,S,u,{align:"right"}),t.setFont("helvetica","normal"),D.forEach((se,I)=>{t.text(se,_,u+I*y)}),u+=Math.max(y,D.length*y),u+=2}),n.lineItems.length===0&&(t.setFont("helvetica","normal"),t.text("No items",_,u),u+=16),u+=6,t.setDrawColor(64),t.line(s,u,a,u),u+=14,t.setFont("helvetica","bold"),t.text("Total",_,u),t.setFont("courier","bold"),t.text(xb(d1(n.totalAmount)),S,u,{align:"right"}),u+=24,t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(120);const E=742;t.setTextColor(40),t.setFont("helvetica","bold"),t.text("Filing Deadline Reminder",s,E),t.setFont("helvetica","normal"),t.setTextColor(80),t.setFontSize(9);const L=t.splitTextToSize("Most pet insurance requires claims to be filed within 60180 days of service. This is a general reminder only. Always verify your specific deadline with your insurance provider.",a-s);t.text(L,s,E+14),t.setTextColor(120),t.text("Generated by Pet Claim Helper - petclaimhelper.com",s,760);const A=Ym(n.dateOfService||new Date().toISOString()),J=(n.petName||e?.name||"Pet").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),B=(e?.insuranceCompany||"Insurance").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),$=`${J}_${B}_claim_${A}.pdf`,oe=new Blob([t.output("arraybuffer")],{type:"application/pdf"});return{filename:$,blob:oe}}function bb(n,e){const t={clinicName:n.clinicName,clinicAddress:n.clinicAddress,petName:n.petName,dateOfService:n.dateOfService,totalAmount:n.subtotal,diagnosis:n.diagnosis,lineItems:n.lineItems,invoiceNumber:n.invoiceNumber};return yb(t,e)}function h1({open:n,onClose:e,onSaved:t,userId:s,pets:a,defaultPetId:o,medicationId:u,editMode:d=!1}){const[f,p]=me.useState(""),[v,_]=me.useState(""),[S,y]=me.useState(""),[E,C]=me.useState("1x daily"),[L,A]=me.useState(["07:00"]),[J,B]=me.useState("7"),[$,oe]=me.useState(7),[de,H]=me.useState(!1),[Y,D]=me.useState(null),[se,I]=me.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),R=me.useRef(!1);me.useEffect(()=>{if(n&&!R.current){d&&u?(H(!0),kt.from("medications").select("*").eq("id",u).single().then(({data:ee,error:z})=>{if(z||!ee){D("Failed to load medication data"),H(!1);return}if(p(ee.pet_id||""),_(ee.medication_name||""),y(ee.dosage||""),C(ee.frequency||"1x daily"),A(Array.isArray(ee.reminder_times)&&ee.reminder_times.length>0?ee.reminder_times:["07:00"]),ee.start_date&&ee.end_date){const le=new Date(ee.start_date),be=new Date(ee.end_date),V=Math.round((be.getTime()-le.getTime())/(1e3*60*60*24))+1;[7,10,14,30].includes(V)?B(String(V)):(B("custom"),oe(V))}H(!1),D(null)}).catch(()=>{D("Failed to load medication"),H(!1)})):(p(o||(a[0]?.id??"")),_(""),y(""),C("1x daily"),A(["07:00"]),B("7"),oe(7),H(!1),D(null));try{console.log("[AddMedicationForm] Form opened. Initial timezone (from Intl):",se)}catch{}s&&kt.from("profiles").select("timezone").eq("id",s).single().then(({data:ee})=>{const z=ee&&ee.timezone?String(ee.timezone):"";try{console.log("[AddMedicationForm] Profile timezone loaded:",z||"(empty)")}catch{}z&&I(z)}).catch(()=>{})}R.current=n},[n,o,a,s,se,d,u]),me.useEffect(()=>{if(!n)return;const ee=document.body.style.overflow;document.body.style.overflow="hidden";const z=le=>{le.key==="Escape"&&e()};return window.addEventListener("keydown",z),()=>{document.body.style.overflow=ee,window.removeEventListener("keydown",z)}},[n,e]),me.useEffect(()=>{E==="1x daily"&&A(["07:00"]),E==="2x daily"&&A(["07:00","19:00"]),E==="3x daily"&&A(["08:00","14:00","20:00"])},[E]);const re=me.useMemo(()=>E==="1x daily"?1:E==="2x daily"?2:3,[E]),W=(ee,z)=>{const le=(z||"").slice(0,5),be=[...L];be[ee]=le,A(be)},ie=()=>{const ee=new Date,z=ee.getFullYear(),le=String(ee.getMonth()+1).padStart(2,"0"),be=String(ee.getDate()).padStart(2,"0"),V=`${z}-${le}-${be}`;let j=J==="custom"?Math.max(1,Number($||1)):Number(J);(!Number.isFinite(j)||j<1)&&(j=1);const q=new Date(ee.getTime());q.setDate(q.getDate()+(j-1));const X=q.getFullYear(),ae=String(q.getMonth()+1).padStart(2,"0"),ue=String(q.getDate()).padStart(2,"0"),ye=`${X}-${ae}-${ue}`;return{start:V,end:ye}},fe=async ee=>{if(ee.preventDefault(),!s){D("You must be logged in.");return}if(!f){D("Please select a pet.");return}if(!v.trim()){D("Enter medication name.");return}if(L.some(z=>!/^\d{2}:\d{2}$/.test(z))){D("Please select valid reminder times.");return}if(L.length!==re){D("Reminder times do not match selected frequency.");return}H(!0),D(null);try{const{start:z,end:le}=ie(),be=se||Intl.DateTimeFormat().resolvedOptions().timeZone;try{console.log("[AddMedicationForm] Submitting. Detected timezone:",be),console.log("[AddMedicationForm] Times selected (will store as PST, no UTC conversion):",L)}catch{}const V=L.filter(Boolean);try{console.log("[AddMedicationForm] Times to store in PST:",V)}catch{}if(d&&u){const j={medication_name:v.trim(),dosage:S.trim()||null,frequency:E,reminder_times:V,end_date:le},{error:q}=await kt.from("medications").update(j).eq("id",u).eq("user_id",s);if(q)throw q;t&&t(u)}else{const j={user_id:s,pet_id:f,claim_id:null,medication_name:v.trim(),dosage:S.trim()||null,frequency:E,reminder_times:V,start_date:z,end_date:le};try{console.log("[AddMedicationForm] Payload.reminder_times (storing in PST):",j.reminder_times)}catch{}const{data:q,error:X}=await kt.from("medications").insert(j).select("id").single();try{console.log("[AddMedicationForm] Supabase insert completed. Error:",X||null)}catch{}if(X)throw X;const ae=q?.id;t&&t(ae)}e()}catch(z){D(z?.message||"Failed to save medication")}finally{H(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:d?"Edit Medication":"Add Medication"}),l.jsx("button",{type:"button",className:"text-sm",onClick:e,children:"Close"})]}),Y&&l.jsx("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:Y}),l.jsxs("form",{className:"mt-4 space-y-4",onSubmit:fe,children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet",d&&l.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(cannot be changed)"})]}),l.jsxs("select",{value:f,onChange:ee=>p(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",disabled:d,children:[l.jsx("option",{value:"",children:" Select "}),a.map(ee=>l.jsxs("option",{value:ee.id,children:[ee.name," (",ee.species,")"]},ee.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Medication name"}),l.jsx("input",{value:v,onChange:ee=>_(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"Amoxicillin"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Dosage"}),l.jsx("input",{value:S,onChange:ee=>y(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"1 pill"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Frequency"}),l.jsxs("select",{value:E,onChange:ee=>C(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{children:"1x daily"}),l.jsx("option",{children:"2x daily"}),l.jsx("option",{children:"3x daily"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Duration"}),l.jsxs("select",{value:J,onChange:ee=>B(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"10",children:"10 days"}),l.jsx("option",{value:"14",children:"14 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"custom",children:"Custom"})]})]})]}),J==="custom"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Custom days"}),l.jsx("input",{type:"number",min:1,value:$,onChange:ee=>oe(Number(ee.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Reminder times"}),l.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:Array.from({length:re}).map((ee,z)=>l.jsx("input",{type:"time",value:L[z]||"",onChange:le=>W(z,le.target.value),className:"w-full min-w-[140px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"},z))})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",onClick:e,className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:de,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:de?"Saving":d?"Update Medication":"Save Medication"})]})]})]})}):null}function wb(n){const e=n.replace(/\D/g,"");return e.length!==10?n:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}function Of(n){const e=n.replace(/\D/g,"");return e.length!==10?"":`+1${e}`}function f1(n,e=""){const s=n.replace(/\D/g,"").slice(0,10);return s.length===0?"":s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`}const bu=[{display:" Select ",value:""},{display:"Not Insured",value:""},{display:"Trupanion (90 days)",value:"Trupanion",deadlineDays:90},{display:"Nationwide (365 days)",value:"Nationwide",deadlineDays:365},{display:"Healthy Paws (90 days)",value:"Healthy Paws",deadlineDays:90},{display:"Pumpkin (270 days)",value:"Pumpkin",deadlineDays:270},{display:"Custom Insurance",value:"Other"}];function jd(n){const e=bu.find(t=>t.display===n);return e?e.value:n===" Select "||n==="Not Insured"?"":n==="Custom Insurance"?"Other":n.replace(/\s*\(\d+\s*days?\).*$/i,"").trim()}function _b(n){if(!n||n==="")return"Not Insured";const e=bu.find(t=>t.value===n);return e?e.display:n}function Nb({open:n,onClose:e,userId:t}){const[s,a]=me.useState(1),[o,u]=me.useState(!1),[d,f]=me.useState(null),[p,v]=me.useState(""),[_,S]=me.useState(""),[y,E]=me.useState(""),[C,L]=me.useState(""),[A,J]=me.useState(""),[B,$]=me.useState(""),[oe,de]=me.useState(""),[H,Y]=me.useState("Not Insured"),[D,se]=me.useState(""),[I,R]=me.useState(""),[re,W]=me.useState(""),[ie,fe]=me.useState(""),[ee,z]=me.useState(""),[le,be]=me.useState(""),[V,j]=me.useState(!1),[q,X]=me.useState(""),[ae,ue]=me.useState(!1);me.useEffect(()=>{n&&(a(1),u(!1),f(null),v(""),S(""),E(""),L(""),J(""),$(""),de(""),Y("Not Insured"),se(""),R(""),W(""),fe(""),z(""),be(""),j(!1),X(""),ue(!1))},[n]);const ye=me.useMemo(()=>p.trim().length>0&&_.trim().length>0&&y.trim().length>0&&C.trim().length>0&&A.trim().length>0,[p,_,y,C,A]),he=me.useMemo(()=>B.trim().length>0&&!!oe,[B,oe]),Se=me.useMemo(()=>V?q.trim().length>0&&ae:!0,[V,q,ae]);me.useEffect(()=>{if(!n)return;const Ie=document.body.style.overflow;document.body.style.overflow="hidden";const Ge=st=>{st.key==="Escape"&&s!==4&&e()};return window.addEventListener("keydown",Ge),()=>{document.body.style.overflow=Ie,window.removeEventListener("keydown",Ge)}},[n,s,e]);const Ce=async()=>{u(!0),f(null);try{let Ie=null;if(ee){const It=new Date(ee);if(Number.isNaN(It.getTime()))throw new Error("Please select a valid Coverage Start Date.");Ie=It.toISOString().slice(0,10)}const Ge={full_name:p.trim(),onboarding_complete:!0};if(V&&q.trim()){const It=Of(q);It&&(Ge.phone=It,Ge.sms_opt_in=!0)}_.trim()&&(Ge.address=_.trim()),y.trim()&&(Ge.city=y.trim()),C.trim()&&(Ge.state=C.trim()),A.trim()&&(Ge.zip=A.trim());const{error:st}=await kt.from("profiles").update(Ge).eq("id",t);if(st)throw st;if(V&&q.trim()&&ae){const It=Of(q);if(It){let St=null;try{St=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}const{error:We}=await kt.from("sms_consent").insert({user_id:t,phone_number:It,consented:!0,consent_text:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support.",ip_address:St});We&&console.error("[OnboardingModal] Failed to save SMS consent:",We)}}const Z=jd(H),Qe={user_id:t,name:B.trim(),species:oe||"other",insurance_company:Z||null,healthy_paws_pet_id:D.trim()||null,policy_number:I.trim()||null,monthly_premium:re===""?null:parseFloat(re),deductible_per_claim:ie===""?null:parseFloat(ie),coverage_start_date:Ie,insurance_pays_percentage:le===""?null:Math.max(50,Math.min(100,Number(le)))};await Ax(Qe),a(4)}catch(Ie){f(Ie?.message||"Failed to save your info. Please try again.")}finally{u(!1)}};if(!n)return null;const ze=s===1?"Step 1 of 3":s===2?"Step 2 of 3":s===3?"Step 3 of 3":"";return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-6 shadow-2xl max-h-[calc(100vh-40px)] overflow-y-auto",onClick:Ie=>Ie.stopPropagation(),children:[s!==4&&l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:ze}),d&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:d}),s===1&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Welcome to Pet Claim Helper! "}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Quick setup - then we'll handle the insurance headaches for you."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:p,onChange:Ie=>v(Ie.target.value),placeholder:"John Smith",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Street Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:_,onChange:Ie=>S(Ie.target.value),placeholder:"123 Main St",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:y,onChange:Ie=>E(Ie.target.value),placeholder:"San Francisco",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{className:"w-24",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["State ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:C,onChange:Ie=>L(Ie.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3 uppercase"})]}),l.jsxs("div",{className:"w-28",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["ZIP ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:A,onChange:Ie=>J(Ie.target.value),placeholder:"94105",maxLength:10,className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]}),l.jsx("p",{className:"text-xs text-slate-500",children:"Required for Auto-Submit claim forms"})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!ye,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>a(2),children:"Next"})]})]}),s===2&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Meet your new claim-filing sidekick"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Add your pet and insurance details. We'll use this to:"}),l.jsxs("div",{className:"mt-4 mb-6 bg-gradient-to-r from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:""}),l.jsx("span",{className:"font-medium",children:"Auto-submit claims in 2 minutes"}),l.jsx("span",{className:"text-xs text-slate-500",children:"(not 30-45)"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),l.jsx("span",{children:"Track every vet visit - insured or not"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:""}),l.jsx("span",{children:"See exactly what you spend on your pet"})]})]}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:B,onChange:Ie=>$(Ie.target.value),placeholder:"Max",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:oe,onChange:Ie=>de(Ie.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsx("select",{value:H,onChange:Ie=>Y(Ie.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:bu.map(Ie=>l.jsx("option",{value:Ie.display,children:Ie.display},Ie.display))})]}),H==="Healthy Paws (90 days)"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),l.jsx("input",{value:D,onChange:Ie=>se(Ie.target.value),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),H&&H!==" Select "&&H!=="Not Insured"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{value:I,onChange:Ie=>R(Ie.target.value),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),l.jsx("input",{type:"number",min:0,value:re,onChange:Ie=>W(Ie.target.value),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),l.jsx("input",{type:"number",min:0,value:ie,onChange:Ie=>fe(Ie.target.value),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),l.jsx("input",{type:"number",min:50,max:100,value:le,onChange:Ie=>be(Ie.target.value),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),l.jsx("input",{type:"date",value:ee,onChange:Ie=>z(Ie.target.value),onClick:Ie=>Ie.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>a(1),children:"Back"}),l.jsx("button",{type:"button",disabled:!he,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>a(3),children:"Next"})]})]}),s===3&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:" Never forget a dose!"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:["Get a friendly text when it's medication time. ",l.jsx("span",{className:"text-slate-500 italic",children:"(Optional - skip if you don't need reminders)"})]}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:l.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-200",children:[l.jsxs("div",{className:"font-semibold mb-1",children:["Stay on track with ",B||"your pet","'s meds"]}),l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"We'll text you at the right time - no more missed doses!"})]})}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:V,onChange:Ie=>j(Ie.target.checked),className:"mt-1 w-5 h-5 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Yes, text me when it's medication time"}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"We'll send you a quick reminder so you never miss a dose"})]})]}),V&&l.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-emerald-500",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"tel",value:q,onChange:Ie=>X(f1(Ie.target.value,q)),placeholder:"(555) 123-4567",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ae,onChange:Ie=>ue(Ie.target.checked),className:"mt-0.5 w-4 h-4 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsxs("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:["I agree to receive SMS medication reminders ",l.jsx("span",{className:"text-red-500",children:"*"})]})]}),ae&&l.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Reply STOP to opt out anytime, or HELP for support."})})]}),!V&&l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"You can always enable medication reminders later in your settings."})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>a(2),children:"Back"}),l.jsx("button",{type:"button",disabled:!Se||o,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:Ce,children:o?"Saving":"Finish Setup"})]})]}),s===4&&l.jsxs("div",{className:"text-center py-4 animate-fadeIn",children:[l.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),l.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"You're all set!"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-8",children:"Time to start saving money and never miss a deadline."}),l.jsxs("div",{className:"text-left bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 rounded-xl p-6 mb-6 border border-emerald-200 dark:border-emerald-800",children:[l.jsx("div",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Your quick wins:"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",children:[l.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-semibold",children:"Claims auto-submitted"})," to ",H&&H!=="None"?H:"your insurance"]})]}),l.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",style:{animationDelay:"100ms"},children:[l.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-semibold",children:"Deadline tracking active"})," - never miss a filing date"]})]}),l.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",style:{animationDelay:"200ms"},children:[l.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-semibold",children:"Financial dashboard ready"})," - see exactly what you spend"]})]})]})]}),l.jsx("button",{type:"button",className:"w-full h-14 rounded-lg bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 hover:scale-[1.02] hover:shadow-xl text-white font-bold text-lg transition-all duration-200",onClick:()=>{localStorage.setItem("justCompletedOnboarding","true"),e()},children:"Let's Go! "})]})]})})}function kb({userId:n,refreshToken:e,period:t}){const[s,a]=me.useState(!1),[o,u]=me.useState(null),[d,f]=me.useState([]),[p,v]=me.useState([]);me.useEffect(()=>{console.log("[FinancialSummary]  useEffect triggered | userId:",n,"| refreshToken:",e),n&&(a(!0),u(null),console.log("[FinancialSummary]  Fetching claims and pets from database..."),Promise.all([kt.from("claims").select("id, pet_id, total_amount, reimbursed_amount, filing_status, expense_category, service_date, created_at, deductible_applied, user_coinsurance_payment, insurance_reimbursement").eq("user_id",n),kt.from("pets").select("id, name, species, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",n)]).then(([L,A])=>{if(L.error)throw L.error;if(A.error)throw A.error;console.log("[FinancialSummary] claims fetched:",L.data),console.log("[FinancialSummary] pets fetched:",A.data),f(L.data||[]),v(A.data||[])}).catch(L=>u(L?.message||"Failed to load financial data")).finally(()=>a(!1)))},[n,e]);const _=me.useMemo(()=>{const L={};for(const A of p)L[A.id]=A;return L},[p]),S=L=>{if(!L)return null;const A=String(L).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!A)return null;const J=Number(A[1]),B=Number(A[2])-1,$=Number(A[3]),oe=new Date(J,B,$);return isNaN(oe.getTime())?null:oe},y=(L,A)=>{const J=Number(L.monthly_premium)||0;if(J===0)return{total:0,monthsCount:0,context:"No insurance"};const B=S(L.coverage_start_date||null);if(!B)return{total:0,monthsCount:0,context:"No coverage start date"};const $=new Date,oe=$.getFullYear(),de=$.getMonth(),H=A!==null?A:null;if(H!==null){if(B.getFullYear()>H)return{total:0,monthsCount:0,context:`coverage started ${B.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`};if(H>oe)return{total:0,monthsCount:0,context:"future year"};const ie=new Date(H,0,1),fe=new Date(H,11,31),ee=B>ie?B:ie,z=H===oe?new Date(oe,de,$.getDate()):fe,le=(z.getFullYear()-ee.getFullYear())*12+(z.getMonth()-ee.getMonth()),be=ee.getDate(),j=z.getDate()>=be?1:0,q=Math.max(0,le+j),X=J*q;let ae="";if(B.getFullYear()===H&&B.getMonth()>0){const ue=B.toLocaleDateString("en-US",{month:"short"}),ye=z.toLocaleDateString("en-US",{month:"short",year:"numeric"});ae=`${ue} - ${ye}`}else H===oe&&q<12?ae=`Jan - ${z.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`:ae=`${H}`;return{total:X,monthsCount:q,context:ae}}const Y=($.getFullYear()-B.getFullYear())*12+($.getMonth()-B.getMonth()),D=B.getDate(),I=$.getDate()>=D?1:0,R=Math.max(0,Y+I),re=J*R,W=`since ${B.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;return{total:re,monthsCount:R,context:W}},E=me.useMemo(()=>{const L=new Date().getFullYear(),A=(()=>{const se=String(t||"").toLowerCase();return se==="2024"||se==="2025"||se==="2026"?Number(se):se==="all"?null:L})(),J=new Date,B=p.reduce((se,I)=>{const R=y(I,A);return se+R.total},0);let $=0,oe=0,de=0,H=0,Y=0;for(const se of d){const I=se.service_date?S(se.service_date)||new Date(se.service_date):null;if(!I||isNaN(I.getTime())||A!==null&&I.getFullYear()!==A||I>J)continue;const R=String(se.expense_category||"").toLowerCase(),re=String(se.filing_status||"").toLowerCase(),W=Number(se.total_amount)||0,ie=Math.max(0,Number(se.reimbursed_amount)||0);R==="not_insured"||R==="not insured"?$+=W:R==="insured"&&re==="paid"?(oe+=ie,H+=W,de+=Math.max(0,W-ie)):R==="insured"&&(H+=W,de+=Math.max(0,W-ie)),re==="submitted"&&(Y+=W)}const D=B+$+de;return{premiumsYTD:B,nonInsuredTotal:$,insurancePaidBack:oe,userShareCoveredClaims:de,insuredBillsTotal:H,definiteTotal:D,pendingTotal:Y}},[d,p,t]),C=me.useMemo(()=>{const L=new Date().getFullYear(),A=(()=>{const oe=String(t||"").toLowerCase();return oe==="2024"||oe==="2025"||oe==="2026"?Number(oe):oe==="all"?null:L})(),J=new Date,B={};for(const oe of p){const de=y(oe,A);B[oe.id]={claimed:0,reimbursed:0,premiums:de.total,nonInsured:0,pendingBills:0,filedClaims:0}}const $=[...d].sort((oe,de)=>{const H=oe.service_date&&(S(oe.service_date)?.getTime()||new Date(oe.service_date).getTime())||0,Y=de.service_date&&(S(de.service_date)?.getTime()||new Date(de.service_date).getTime())||0;return H-Y});for(const oe of $){const de=String(oe.expense_category||"").toLowerCase(),H=oe.pet_id||"";if(!B[H])continue;const Y=Number(oe.total_amount)||0;if(Y<=0)continue;const D=oe.service_date?S(oe.service_date)||new Date(oe.service_date):null;if(!(!D||isNaN(D.getTime()))&&!(A!==null&&D.getFullYear()!==A)){if(de==="insured"){const se=String(oe.filing_status||"not_submitted").toLowerCase(),I=se==="filed"?"submitted":se;I==="not_submitted"||I==="not_filed"?B[H].pendingBills+=1:(I==="submitted"||I==="paid"||I==="denied"||I==="approved")&&(B[H].filedClaims+=1)}if(de==="not_insured"||de==="not insured")D<=J&&(B[H].nonInsured+=Y);else{B[H].claimed+=Y;const se=Math.max(0,Number(oe.reimbursed_amount)||0);B[H].reimbursed+=se}}}return console.log("[FinancialSummary] perPet calc (premiums + bills - reimbursed)",B),B},[d,p,_,t]);return n?l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Financial Summary"}),s&&l.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Loading"}),o&&l.jsx("div",{className:"mt-2 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&!o&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:` ${String(t||"").toLowerCase()==="all"?"ALL TIME":String(t||new Date().getFullYear())} TOTAL`}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Spent on all pets (including premiums)"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",(E.premiumsYTD+E.nonInsuredTotal+E.insuredBillsTotal).toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"- Insurance Reimbursed"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",E.insurancePaidBack.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"= Your Net Cost"}),l.jsxs("div",{className:"text-2xl font-bold",children:["$",E.definiteTotal.toFixed(2)]})]})]})]})})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:"YOUR OUT-OF-POCKET BREAKDOWN"}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Insurance Premiums ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Monthly insurance cost)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.premiumsYTD.toFixed(2)]})]}),(()=>{const L=new Date().getFullYear(),A=(()=>{const B=String(t||"").toLowerCase();return B==="2024"||B==="2025"||B==="2026"?Number(B):B==="all"?null:L})(),J=p.map(B=>{const $=y(B,A);return{pet:B,...$}}).filter(B=>B.total>0||Number(B.pet.monthly_premium)>0);return J.length===0?null:l.jsx("div",{className:"ml-4 mt-2 space-y-1 text-xs text-slate-500",children:J.map(({pet:B,total:$,monthsCount:oe,context:de})=>{const H=Number(B.monthly_premium)||0;return H===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",B.name,": No insurance"]}),l.jsx("div",{})]},B.id):$===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",B.name,": $0 (",de,")"]}),l.jsx("div",{})]},B.id):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",B.name,": $",H.toFixed(2),"/mo  ",oe," = $",$.toFixed(2)," (",de,")"]}),l.jsx("div",{})]},B.id)})})})()]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Non-Insured Vet Visits ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Not covered by insurance)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.nonInsuredTotal.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Amount You Paid (for covered claims)"}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.userShareCoveredClaims.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"Total You Paid"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold font-mono",children:["$",E.definiteTotal.toFixed(2)]})]})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:` PER-PET BREAKDOWN (${String(t||"").toLowerCase()==="all"?"All Time":String(t||new Date().getFullYear())})`}),p.length===0&&l.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No pets yet. Add a pet to see per-pet costs."}),l.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(L=>{const A=C[L.id]||{claimed:0,reimbursed:0,premiums:0,nonInsured:0,pendingBills:0,filedClaims:0};L.species==="cat"||L.species;const J=L.species==="cat"?"":L.species==="dog"?"":"",B=A.premiums+(A.nonInsured||0)+A.claimed-A.reimbursed,$=(A.nonInsured||0)+A.reimbursed+A.claimed>0;return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-100 min-w-0",children:[l.jsx("span",{children:J}),l.jsxs("span",{className:"font-semibold truncate",title:`${L.name} (${L.species})`,children:[L.name," (",L.species,")"]})]}),l.jsx("div",{className:"mt-3 text-sm",children:$?l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"YOUR COSTS"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Premiums (attributed)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.premiums.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Vet Bills (insured + non-insured)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Subtotal Paid"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.premiums+A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsx("div",{className:"pt-3 text-xs font-semibold text-slate-500",children:"INSURANCE COVERAGE"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Reimbursements Received"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.reimbursed.toFixed(2)]})]}),l.jsxs("div",{className:"pt-3 border-t-2 border-slate-300 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("span",{className:"font-mono font-bold text-lg",children:["$",B.toFixed(2)]})]}),l.jsx("div",{className:"text-xs text-slate-500",children:A.pendingBills>0?`(${A.pendingBills} bill${A.pendingBills===1?"":"s"} pending submission)`:A.filedClaims>0?`(${A.filedClaims} claim${A.filedClaims===1?"":"s"} filed)`:""})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("div",{className:"font-mono font-bold text-lg",children:["$",B.toFixed(2)]})]}),l.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"(No vet bills this year)"})]})})]},L.id)})})]})]}):null}function Sb({medicationId:n,userId:e,onClose:t,onDoseRecorded:s}){const[a,o]=me.useState(!0),[u,d]=me.useState(!1),[f,p]=me.useState(null),[v,_]=me.useState(null),[S,y]=me.useState(!1),[E,C]=me.useState(null),[L,A]=me.useState(""),[J,B]=me.useState(0),[$,oe]=me.useState(null),de=me.useMemo(()=>E?Array.isArray(E.reminder_times)&&E.reminder_times.length>0?E.reminder_times.length:E.frequency==="1x daily"?1:E.frequency==="2x daily"?2:3:0,[E]),H=me.useMemo(()=>{if(!E)return 0;const ie=new Date(E.start_date),fe=E.end_date?new Date(E.end_date):null,ee=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),z=fe?new Date(fe.getFullYear(),fe.getMonth(),fe.getDate()):null;return(z?Math.max(1,Math.round((z.getTime()-ee.getTime())/(1e3*60*60*24))+1):1)*de},[E,de]),Y=me.useMemo(()=>H>0?Math.round(J/H*100):0,[J,H]),D=me.useMemo(()=>{if(!E||!E.end_date)return 0;const ie=new Date,fe=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),[ee,z,le]=E.end_date.split("-").map(Number),be=new Date(ee,z-1,le);return Math.max(0,Math.round((be.getTime()-fe.getTime())/(1e3*60*60*24))+1)},[E]),se=me.useMemo(()=>!E||!E.end_date?"":E.end_date,[E]),I=async()=>{o(!0),p(null);try{const{data:ie,error:fe}=await kt.from("medications").select("*").eq("id",n).single();if(fe)throw fe;const ee={id:ie.id,user_id:ie.user_id,pet_id:ie.pet_id,medication_name:ie.medication_name,dosage:ie.dosage??null,frequency:ie.frequency,reminder_times:Array.isArray(ie.reminder_times)?ie.reminder_times:[],start_date:ie.start_date,end_date:ie.end_date??null};if(C(ee),ie.pet_id){const{data:j,error:q}=await kt.from("pets").select("name").eq("id",ie.pet_id).single();!q&&j?.name&&A(j.name)}const{count:z,error:le}=await kt.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",n).eq("status","given");if(le)throw le;B(z||0);const{data:be,error:V}=await kt.from("medication_doses").select("given_time").eq("medication_id",n).eq("status","given").order("given_time",{ascending:!1}).limit(1).single();!V&&be?.given_time?oe(be.given_time):oe(null)}catch(ie){p(ie?.message||"Failed to load medication")}finally{o(!1)}};me.useEffect(()=>{I()},[n]),me.useEffect(()=>{const ie=document.body.style.overflow;document.body.style.overflow="hidden";const fe=ee=>{ee.key==="Escape"&&t()};return window.addEventListener("keydown",fe),()=>{document.body.style.overflow=ie,window.removeEventListener("keydown",fe)}},[t]);const R=ie=>{const[fe,ee]=ie.split(":").map(be=>parseInt(be,10));if(!Number.isFinite(fe)||!Number.isFinite(ee))return ie;const z=fe===0?12:fe>12?fe-12:fe,le=fe>=12?"PM":"AM";return`${z}:${String(ee).padStart(2,"0")} ${le}`},re=ie=>{if(!ie)return"No doses recorded yet";const fe=new Date(ie),ee=new Date,z=new Date(ee);z.setDate(z.getDate()-1);const le=new Date(fe.getFullYear(),fe.getMonth(),fe.getDate()),be=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),V=new Date(z.getFullYear(),z.getMonth(),z.getDate());let j="";le.getTime()===be.getTime()?j="Today":le.getTime()===V.getTime()?j="Yesterday":j=fe.toLocaleDateString("en-US",{month:"short",day:"numeric"});const q=fe.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${j} ${q}`},W=async()=>{if(!e){p("You must be logged in to record a dose.");return}const ie=J+1>=H;d(!0),p(null);try{const ee=new Date().toISOString(),{error:z}=await kt.from("medication_doses").insert({medication_id:n,user_id:e,scheduled_time:ee,given_time:ee,status:"given"});if(z)throw z;B(le=>le+1),oe(ee),ie?y(!0):(_("Dose recorded "),setTimeout(()=>{t()},2e3)),s&&s()}catch(fe){p(fe?.message||"Failed to record dose")}finally{d(!1)}};return S&&E?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:()=>{},children:l.jsx("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900 p-8 shadow-2xl",onClick:ie=>ie.stopPropagation(),children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-200 mb-2",children:"Great job!"}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-1",children:["You've completed ",l.jsx("span",{className:"font-semibold",children:E.medication_name})]}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-4",children:["for ",l.jsx("span",{className:"font-semibold",children:L}),"!"]}),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 text-sm text-blue-800 dark:text-blue-200",children:" Consider following up with your vet if needed."}),l.jsx("button",{type:"button",onClick:()=>{y(!1),t()},className:"mt-6 w-full h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold",children:"Got it"})]})})}):l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:ie=>ie.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Track Dose"}),l.jsx("button",{type:"button",className:"text-sm",onClick:t,children:"Close"})]}),a&&l.jsx("div",{className:"mt-4 text-sm text-slate-600",children:"Loading"}),f&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:f}),!a&&E&&l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Pet: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:L||""})]}),l.jsx("div",{className:"text-lg font-semibold",children:E.medication_name}),E.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:E.dosage}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Frequency: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:E.frequency})]}),l.jsxs("div",{className:"mt-2 rounded-lg border border-slate-200 dark:border-slate-800 p-3 text-sm space-y-1.5",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${J}/${H} doses (${Y}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",D]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",se]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Last dose given:"})," ",re($)]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Reminder times:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(E.reminder_times)?E.reminder_times:[]).map((ie,fe)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:R(ie)},fe))})]})]}),v&&l.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:v}),J>=H?l.jsx("div",{className:"pt-2",children:l.jsxs("div",{className:"rounded-lg bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 p-4 text-center",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-emerald-800 dark:text-emerald-200",children:"All doses completed!"}),l.jsx("div",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"This medication course is finished."})]})}):l.jsx("div",{className:"pt-2 flex flex-col sm:flex-row gap-3 sm:justify-end",children:l.jsx("button",{type:"button",disabled:u||!e,onClick:W,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:u?"Saving":" MARK AS GIVEN"})})]})]})})}function jb({userId:n,pets:e,refreshKey:t}){const[s,a]=me.useState(!1),[o,u]=me.useState(null),[d,f]=me.useState([]),[p,v]=me.useState({}),[_,S]=me.useState(!1),[y,E]=me.useState(null),[C,L]=me.useState(null),[A,J]=me.useState(!1),[B,$]=me.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),oe=me.useMemo(()=>{const W={};for(const ie of e)W[ie.id]=ie;return W},[e]),de=async()=>{if(n){a(!0),u(null);try{try{const{data:z}=await kt.from("profiles").select("timezone").eq("id",n).single(),le=z&&z.timezone?String(z.timezone):"";le&&$(le)}catch{}const{data:W,error:ie}=await kt.from("medications").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(ie)throw ie;const fe=(W||[]).map(z=>({...z,reminder_times:Array.isArray(z.reminder_times)?z.reminder_times:[]}));f(fe);const ee=fe.map(z=>z.id);if(ee.length>0){const{data:z,error:le}=await kt.from("medication_doses").select("id, medication_id, user_id, scheduled_time, given_time, status").in("medication_id",ee).eq("user_id",n).eq("status","given");if(le)throw le;const be={};for(const V of z||[])be[V.medication_id]=(be[V.medication_id]||0)+1;v(be)}else v({})}catch(W){u(W?.message||"Failed to load medications")}finally{a(!1)}}};me.useEffect(()=>{de()},[n,t]);const H=W=>Array.isArray(W.reminder_times)&&W.reminder_times.length>0?W.reminder_times.length:W.frequency==="1x daily"?1:W.frequency==="2x daily"?2:3,Y=W=>{const[ie,fe]=W.split(":");let ee=Number(ie);const z=ee>=12?"PM":"AM";return ee=ee%12,ee===0&&(ee=12),`${ee}:${fe} ${z}`},D=(W,ie)=>{const fe=new Date(W.getFullYear(),W.getMonth(),W.getDate()),ee=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),z=Math.round((fe.getTime()-ee.getTime())/(1e3*60*60*24));let le;z===0?W.getTime()<=ie.getTime()?le="Tomorrow":le="Today":z===1?le="Tomorrow":le=W.toLocaleDateString("en-US",{month:"short",day:"numeric"});const be=W.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${le} ${be}`},se=W=>{const ie=new Date(W.start_date),fe=W.end_date?new Date(W.end_date):null,ee=new Date,z=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),le=fe?new Date(fe.getFullYear(),fe.getMonth(),fe.getDate()):null,be=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),V=le?Math.max(1,Math.round((le.getTime()-z.getTime())/(1e3*60*60*24))+1):1,j=H(W),q=V*j,X=p[W.id]||0,ae=q>0?Math.round(X/q*100):0,ue=le?Math.max(0,Math.round((le.getTime()-be.getTime())/(1e3*60*60*24))+1):0,ye=W.reminder_times&&W.reminder_times.length>0?W.reminder_times.filter(Boolean):W.frequency==="1x daily"?["07:00"]:W.frequency==="2x daily"?["07:00","19:00"]:["08:00","14:00","20:00"];let he=null;const Se=new Date;let Ce=new Date(Se.getFullYear(),Se.getMonth(),Se.getDate());for(let ze=0;ze<7;ze++){if(Ce<z){Ce.setDate(Ce.getDate()+1);continue}if(le&&Ce>le)break;for(const Ie of ye){const[Ge,st]=Ie.split(":").map(Qe=>Number(Qe)),Z=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate(),Ge,st,0);if(Z.getTime()>Se.getTime()){he=Z;break}}if(he)break;Ce.setDate(Ce.getDate()+1)}return{totalDoses:q,given:X,pct:ae,daysRemaining:ue,nextDoseLabel:he?D(he,Se):le&&be>le?"Completed":"",endLabel:le?le.toISOString().slice(0,10):""}},{active:I,completed:R}=me.useMemo(()=>{const W=new Date,ie=new Date(W.getFullYear(),W.getMonth(),W.getDate()),fe=[],ee=[];for(const z of d){const[le,be,V]=z.start_date.split("-").map(Number),j=new Date(le,be-1,V),q=z.end_date?(()=>{const[ye,he,Se]=z.end_date.split("-").map(Number);return new Date(ye,he-1,Se)})():null,X=se(z),ae=X.given>=X.totalDoses||q&&ie>q,ue=ie>=j&&!ae;ae?ee.push(z):ue&&fe.push(z)}return{active:fe,completed:ee}},[d,p]),re=me.useMemo(()=>{const W={};for(const ie of I)W[ie.pet_id]||(W[ie.pet_id]=[]),W[ie.pet_id].push(ie);return W},[I]);return l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Medications"}),l.jsx("button",{type:"button",onClick:()=>S(!0),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm",disabled:!n,children:"+ ADD MEDICATION"})]}),s&&l.jsx("div",{className:"mt-4 text-sm text-slate-500",children:"Loading medications"}),o&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&d.length===0&&l.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 text-sm text-slate-600",children:'No medications yet. Click "+ ADD MEDICATION" to create one.'}),l.jsx("div",{className:"mt-4 space-y-6",children:Object.entries(re).map(([W,ie])=>{const fe=oe[W];return l.jsxs("div",{children:[l.jsxs("div",{className:"text-base font-semibold mb-2 flex items-center gap-3 h-12 px-4",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:fe?.color||(fe?.species==="dog"?"#3B82F6":fe?.species==="cat"?"#F97316":"#6B7280")}}),l.jsx("span",{className:"font-semibold",children:fe?`${fe.name} (${fe.species})`:"Unknown Pet"})]}),ie.length===0?l.jsx("div",{className:"ml-4 text-sm text-slate-500 dark:text-slate-400",children:"No active medications"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ie.map(ee=>{const z=se(ee);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm cursor-pointer hover:shadow-md",onClick:()=>L(ee.id),children:[l.jsx("div",{className:"flex items-start justify-between gap-2",children:l.jsx("div",{className:"text-lg font-semibold",children:ee.medication_name})}),l.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-700 cursor-pointer",onClick:le=>{le.stopPropagation(),E(ee.id)},title:"Edit medication","aria-label":"Edit medication",children:"Edit"}),l.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-700 cursor-pointer",onClick:async le=>{if(le.stopPropagation(),!!confirm(`Are you sure you want to delete ${ee.medication_name}?`))try{let be=!1;try{be=(await fetch(`/api/medications/${ee.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}catch{}if(!be){const{error:V}=await kt.from("medications").delete().eq("id",ee.id).eq("user_id",n);if(V)throw V}f(V=>V.filter(j=>j.id!==ee.id));try{alert("Medication deleted successfully")}catch{}}catch(be){console.error("[medications] delete error",be);try{alert("Failed to delete medication")}catch{}}},title:"Delete medication","aria-label":"Delete medication",children:"Delete"})]}),ee.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:ee.dosage}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:ee.frequency}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Array.isArray(ee.reminder_times)?ee.reminder_times:[]).map((le,be)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:Y(le)},be))}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${z.given}/${z.totalDoses} doses (${z.pct}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Next dose:"})," ",z.nextDoseLabel]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",z.daysRemaining]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",z.endLabel]})]})]},ee.id)})})]},W)})}),R.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsxs("button",{type:"button",onClick:()=>J(!A),className:"flex items-center gap-2 text-base font-semibold hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:[l.jsx("svg",{className:`w-4 h-4 transition-transform ${A?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),l.jsxs("span",{children:["Completed Medications (",R.length,")"]})]}),A&&l.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(W=>{const ie=se(W),fe=oe[W.pet_id],ee=W.end_date||new Date().toISOString().slice(0,10);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 p-4 shadow-sm opacity-75",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"text-lg font-semibold",children:W.medication_name}),l.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:" Completed"})]}),W.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:W.dosage}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Pet:"})," ",fe?.name||"Unknown"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${ie.given}/${ie.totalDoses} doses`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Completed:"})," ",ee]})]})]},W.id)})})]}),l.jsx(h1,{open:_||!!y,onClose:()=>{S(!1),E(null)},onSaved:()=>{S(!1),E(null),de()},userId:n,pets:e,medicationId:y,editMode:!!y}),C&&l.jsx(Sb,{medicationId:C,userId:n,onClose:()=>L(null),onDoseRecorded:()=>de()})]})}function Ab({medicationId:n,userId:e,onClose:t}){const[s,a]=me.useState(null),[o,u]=me.useState(null),[d,f]=me.useState(!0),[p,v]=me.useState(!1),[_,S]=me.useState(!1),[y,E]=me.useState(null),[C,L]=me.useState(null),[A,J]=me.useState(null),[B,$]=me.useState(null),[oe,de]=me.useState(null);me.useEffect(()=>{if(console.log("[DoseMarkingPage] useEffect triggered",{medicationId:n,userId:e,success:_,loading:d,error:y}),_){console.log("[DoseMarkingPage] Already successful, skipping reload");return}const R=new URLSearchParams(window.location.search).get("token");R&&(L(R),console.log("[DoseMarkingPage] Magic link token detected:",R.slice(0,8)+"...")),console.log("[DoseMarkingPage] Calling loadMedicationDetails with token:",R?R.slice(0,8)+"...":"null"),H(R)},[n,e,_]);async function H(I=null){console.log("[DoseMarkingPage] loadMedicationDetails called",{tokenFromUrl:I,magicToken:C,medicationId:n,success:_,loading:d});try{const R=I||C,re=n.length===8&&!n.includes("-"),W=n.includes("-");if(console.log("[DoseMarkingPage] Detecting format",{isShortCode:re,isUUID:W,effectiveToken:R?R.slice(0,8)+"...":"null"}),re){console.log("[DoseMarkingPage] Loading via short code:",n);const{data:ee,error:z}=await kt.from("medication_doses").select("*, medications(*, pets(name, species))").eq("short_code",n).eq("status","pending").single();if(z||!ee){console.error("[DoseMarkingPage] Short code lookup failed:",z?.message,z?.code),E("This link is invalid or has expired. Please check for a newer SMS."),f(!1);return}console.log("[DoseMarkingPage]  Dose found via short code:",ee.id),a(ee.medications),u(ee.medications?.pets),J(ee.medication_id),$(n),f(!1);return}if(R){console.log("[DoseMarkingPage] Loading via legacy token:",R.slice(0,8)+"...");const{data:ee,error:z}=await kt.from("medication_doses").select("*, medications(*, pets(name, species))").eq("one_time_token",R).eq("status","pending").single();if(z||!ee){console.error("[DoseMarkingPage] Token validation failed:",z?.message,z?.code),console.error("[DoseMarkingPage] Full error:",JSON.stringify(z)),E("This link is invalid or has expired. Please check for a newer SMS."),f(!1);return}console.log("[DoseMarkingPage]  Dose found via token:",ee.id),console.log("[DoseMarkingPage] Full dose data:",JSON.stringify(ee,null,2)),console.log("[DoseMarkingPage] Medications object:",ee.medications),console.log("[DoseMarkingPage] Pets object:",ee.medications?.pets),a(ee.medications),u(ee.medications?.pets),f(!1),console.log("[DoseMarkingPage]  Medication name:",ee.medications?.medication_name||"MISSING"),console.log("[DoseMarkingPage]  Pet name:",ee.medications?.pets?.name||"MISSING");return}if(!e){E("Please log in to mark medication as given"),f(!1);return}const{data:ie,error:fe}=await kt.from("medications").select("*, pets(name, species)").eq("id",n).eq("user_id",e).single();if(fe||!ie){E("Medication not found"),f(!1);return}a(ie),u(ie.pets),f(!1)}catch(R){console.error("Error loading medication:",R),E("Failed to load medication details"),f(!1)}}async function Y(){try{const I=A||n,{data:R,error:re}=await kt.from("medication_doses").select("*").eq("medication_id",I).order("scheduled_time",{ascending:!0});if(re||!R){console.error("[DoseMarkingPage] Failed to fetch doses for stats:",re);return}let W=0;if(s?.start_date&&s?.end_date&&s?.reminder_times){const[j,q,X]=s.start_date.split("-").map(Number),ae=new Date(j,q-1,X),[ue,ye,he]=s.end_date.split("-").map(Number),Se=new Date(ue,ye-1,he),Ce=Math.floor((Se.getTime()-ae.getTime())/(1e3*60*60*24))+1,ze=s.reminder_times&&Array.isArray(s.reminder_times)?s.reminder_times.length:1;W=Ce*ze,console.log("[DoseMarkingPage] Progress calculation:",{startDate:s.start_date,endDate:s.end_date,totalDays:Ce,dosesPerDay:ze,totalExpectedDoses:W,dosesInDB:R.length})}else W=R.length,console.warn("[DoseMarkingPage] Missing medication dates, falling back to DB count");const ie=R.filter(j=>j.status==="given").length,fe=W-ie,ee=W>0?Math.round(ie/W*100):0,z=ie>=W&&W>0,le=R.find(j=>j.status==="pending");let be=null;if(le&&!z){const j=new Date(le.scheduled_time),q=new Date,X=new Date(q);X.setDate(X.getDate()+1);const ae=j.toDateString()===q.toDateString(),ue=j.toDateString()===X.toDateString(),ye=j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});ae?be=`Today ${ye}`:ue?be=`Tomorrow ${ye}`:be=`${j.toLocaleDateString("en-US",{weekday:"short"})} ${ye}`}let V=null;if(s?.end_date&&!z){const j=new Date(s.end_date),q=new Date;q.setHours(0,0,0,0),j.setHours(0,0,0,0);const X=j.getTime()-q.getTime(),ae=Math.ceil(X/(1e3*60*60*24));V=ae>=0?ae:0}de({givenCount:ie,totalCount:W,remainingCount:fe,percentage:ee,nextDoseTime:be,daysRemaining:V,isComplete:z})}catch(I){console.error("[DoseMarkingPage] Error calculating progress stats:",I)}}async function D(){if(!B&&!C&&!e){E("Please log in to mark medication as given");return}v(!0),E(null);try{const I=B?{shortCode:B}:C?{token:C}:{userId:e};console.log("[DoseMarkingPage] Marking as given with:",B?"short code":C?"magic link token":"session auth");const re=await fetch(`http://localhost:8787/api/medications/${A||n}/mark-given`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}),W=await re.json();if(!re.ok||!W.ok){E(W.error||"Failed to mark dose as given"),v(!1);return}console.log("[DoseMarkingPage]  Successfully marked as given"),e&&A&&await Y(),S(!0),v(!1)}catch(I){console.error("Error marking dose:",I),E("Failed to mark dose as given"),v(!1)}}function se(){t()}return d?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading medication details..."})]})})}):y&&!s?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:y}),l.jsx("button",{onClick:t,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})}):_?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:oe?.isComplete?"All doses complete!":`Dose ${oe?.givenCount||1} of ${oe?.totalCount||1} complete`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[o?.name||"Your pet","  ",s?.medication_name||"Medication"]}),oe&&l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6 text-left",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${oe.percentage}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[oe.percentage,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:oe.isComplete?" Treatment complete!":oe.remainingCount===1?"Just 1 more dose!":`${oe.remainingCount} doses to go`})]})]}),!oe.isComplete&&l.jsxs("div",{className:"space-y-3",children:[oe.nextDoseTime&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:oe.nextDoseTime})]}),oe.daysRemaining!==null&&oe.daysRemaining>=0&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Days remaining:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:oe.daysRemaining===0?"Last day":oe.daysRemaining===1?"1 day":`${oe.daysRemaining} days`})]})]})]}),(B||C)&&!e?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:oe?.nextDoseTime?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center mb-2",children:" All done! You can close this tab now."}),l.jsxs("p",{className:"text-blue-700 text-xs text-center",children:[" Next reminder: ",oe.nextDoseTime]})]}):oe?.isComplete?l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" Treatment complete! You can close this tab."}):l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" All done! You can close this tab now."})}):l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-800 text-sm",children:" Your pet's medication has been recorded. You're all set!"})}),l.jsx("button",{onClick:()=>{if((B||C)&&!e){window.close();return}t(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold",children:(B||C)&&!e?"Done":"View Dashboard"})]})})}):l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mark Medication as Given?"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pet:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:o?.name}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medication:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:s?.medication_name}),s?.dosage&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dosage:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.dosage})]})]}),y&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:y})}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:D,disabled:p,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Marking..."]}):l.jsx(l.Fragment,{children:" Yes, I gave it"})}),l.jsx("button",{onClick:se,disabled:p,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip this dose"})]})]})})})}function If(){return If=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},If.apply(null,arguments)}function Cb(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)!==-1)continue;t[s]=n[s]}return t}function Pb(n,e){if(n==null)return{};var t,s,a=Cb(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)t=o[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}function Eb(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function Lb(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Df(n,e){return Df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Df(n,e)}function Tb(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Df(n,e)}function Rd(n){return Rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rd(n)}function p1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p1=function(){return!!n})()}function Ob(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ib(n,e){if(e&&(Ar(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ob(n)}function Db(n){var e=p1();return function(){var t,s=Rd(n);if(e){var a=Rd(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return Ib(this,t)}}var lf={exports:{}},cf,Km;function Rb(){if(Km)return cf;Km=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cf=n,cf}var uf,Jm;function Fb(){if(Jm)return uf;Jm=1;var n=Rb();function e(){}function t(){}return t.resetWarningCache=e,uf=function(){function s(u,d,f,p,v,_){if(_!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}s.isRequired=s;function a(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},uf}var Xm;function Mb(){return Xm||(Xm=1,lf.exports=Fb()()),lf.exports}var Bb=Mb();const xi=wu(Bb);function Rl(n,e,t){this.x=n,this.y=e,this.time=t||new Date().getTime()}Rl.prototype.velocityFrom=function(n){return this.time!==n.time?this.distanceTo(n)/(this.time-n.time):1};Rl.prototype.distanceTo=function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))};Rl.prototype.equals=function(n){return this.x===n.x&&this.y===n.y&&this.time===n.time};function Gf(n,e,t,s){this.startPoint=n,this.control1=e,this.control2=t,this.endPoint=s}Gf.prototype.length=function(){for(var n=10,e=0,t=void 0,s=void 0,a=0;a<=n;a+=1){var o=a/n,u=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var f=u-t,p=d-s;e+=Math.sqrt(f*f+p*p)}t=u,s=d}return e};Gf.prototype._point=function(n,e,t,s,a){return e*(1-n)*(1-n)*(1-n)+3*t*(1-n)*(1-n)*n+3*s*(1-n)*n*n+a*n*n*n};function Ub(n,e,t){var s,a,o,u=null,d=0;t||(t={});var f=function(){d=t.leading===!1?0:Date.now(),u=null,o=n.apply(s,a),u||(s=a=null)};return function(){var p=Date.now();!d&&t.leading===!1&&(d=p);var v=e-(p-d);return s=this,a=arguments,v<=0||v>e?(u&&(clearTimeout(u),u=null),d=p,o=n.apply(s,a),u||(s=a=null)):!u&&t.trailing!==!1&&(u=setTimeout(f,v)),o}}function Mr(n,e){var t=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=Ub(Mr.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Mr.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=n,this._ctx=n.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(t._mouseButtonDown=!0,t._strokeBegin(a))},this._handleMouseMove=function(a){t._mouseButtonDown&&t._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var o=a.changedTouches[0];t._strokeBegin(o)}},this._handleTouchMove=function(a){a.preventDefault();var o=a.targetTouches[0];t._strokeMoveUpdate(o)},this._handleTouchEnd=function(a){var o=a.target===t._canvas;o&&(a.preventDefault(),t._strokeEnd(a))},this.on()}Mr.prototype.clear=function(){var n=this._ctx,e=this._canvas;n.fillStyle=this.backgroundColor,n.clearRect(0,0,e.width,e.height),n.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Mr.prototype.fromDataURL=function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=t.ratio||window.devicePixelRatio||1,o=t.width||this._canvas.width/a,u=t.height||this._canvas.height/a;this._reset(),s.src=n,s.onload=function(){e._ctx.drawImage(s,0,0,o,u)},this._isEmpty=!1};Mr.prototype.toDataURL=function(n){var e;switch(n){case"image/svg+xml":return this._toSVG();default:for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[n].concat(s))}};Mr.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Mr.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Mr.prototype.isEmpty=function(){return this._isEmpty};Mr.prototype._strokeBegin=function(n){this._data.push([]),this._reset(),this._strokeUpdate(n),typeof this.onBegin=="function"&&this.onBegin(n)};Mr.prototype._strokeUpdate=function(n){var e=n.clientX,t=n.clientY,s=this._createPoint(e,t),a=this._data[this._data.length-1],o=a&&a[a.length-1],u=o&&s.distanceTo(o)<this.minDistance;if(!(o&&u)){var d=this._addPoint(s),f=d.curve,p=d.widths;f&&p&&this._drawCurve(f,p.start,p.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};Mr.prototype._strokeEnd=function(n){var e=this.points.length>2,t=this.points[0];if(!e&&t&&this._drawDot(t),t){var s=this._data[this._data.length-1],a=s[s.length-1];t.equals(a)||s.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(n)};Mr.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Mr.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Mr.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Mr.prototype._createPoint=function(n,e,t){var s=this._canvas.getBoundingClientRect();return new Rl(n-s.left,e-s.top,t||new Date().getTime())};Mr.prototype._addPoint=function(n){var e=this.points,t=void 0;if(e.push(n),e.length>2){e.length===3&&e.unshift(e[0]),t=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=t.c2;t=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=t.c1,o=new Gf(e[1],s,a,e[2]),u=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:u}}return{}};Mr.prototype._calculateCurveControlPoints=function(n,e,t){var s=n.x-e.x,a=n.y-e.y,o=e.x-t.x,u=e.y-t.y,d={x:(n.x+e.x)/2,y:(n.y+e.y)/2},f={x:(e.x+t.x)/2,y:(e.y+t.y)/2},p=Math.sqrt(s*s+a*a),v=Math.sqrt(o*o+u*u),_=d.x-f.x,S=d.y-f.y,y=v/(p+v),E={x:f.x+_*y,y:f.y+S*y},C=e.x-E.x,L=e.y-E.y;return{c1:new Rl(d.x+C,d.y+L),c2:new Rl(f.x+C,f.y+L)}};Mr.prototype._calculateCurveWidths=function(n){var e=n.startPoint,t=n.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(a);return s.start=this._lastWidth,s.end=o,this._lastVelocity=a,this._lastWidth=o,s};Mr.prototype._strokeWidth=function(n){return Math.max(this.maxWidth/(n+1),this.minWidth)};Mr.prototype._drawPoint=function(n,e,t){var s=this._ctx;s.moveTo(n,e),s.arc(n,e,t,0,2*Math.PI,!1),this._isEmpty=!1};Mr.prototype._drawCurve=function(n,e,t){var s=this._ctx,a=t-e,o=Math.floor(n.length());s.beginPath();for(var u=0;u<o;u+=1){var d=u/o,f=d*d,p=f*d,v=1-d,_=v*v,S=_*v,y=S*n.startPoint.x;y+=3*_*d*n.control1.x,y+=3*v*f*n.control2.x,y+=p*n.endPoint.x;var E=S*n.startPoint.y;E+=3*_*d*n.control1.y,E+=3*v*f*n.control2.y,E+=p*n.endPoint.y;var C=e+p*a;this._drawPoint(y,E,C)}s.closePath(),s.fill()};Mr.prototype._drawDot=function(n){var e=this._ctx,t=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(n.x,n.y,t),e.closePath(),e.fill()};Mr.prototype._fromData=function(n,e,t){for(var s=0;s<n.length;s+=1){var a=n[s];if(a.length>1)for(var o=0;o<a.length;o+=1){var u=a[o],d=new Rl(u.x,u.y,u.time),f=u.color;if(o===0)this.penColor=f,this._reset(),this._addPoint(d);else if(o!==a.length-1){var p=this._addPoint(d),v=p.curve,_=p.widths;v&&_&&e(v,_,f)}}else{this._reset();var S=a[0];t(S)}}};Mr.prototype._toSVG=function(){var n=this,e=this._data,t=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,o=0,u=t.width/s,d=t.height/s,f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"width",t.width),f.setAttributeNS(null,"height",t.height),this._fromData(e,function(A,J,B){var $=document.createElement("path");if(!isNaN(A.control1.x)&&!isNaN(A.control1.y)&&!isNaN(A.control2.x)&&!isNaN(A.control2.y)){var oe="M "+A.startPoint.x.toFixed(3)+","+A.startPoint.y.toFixed(3)+" "+("C "+A.control1.x.toFixed(3)+","+A.control1.y.toFixed(3)+" ")+(A.control2.x.toFixed(3)+","+A.control2.y.toFixed(3)+" ")+(A.endPoint.x.toFixed(3)+","+A.endPoint.y.toFixed(3));$.setAttribute("d",oe),$.setAttribute("stroke-width",(J.end*2.25).toFixed(3)),$.setAttribute("stroke",B),$.setAttribute("fill","none"),$.setAttribute("stroke-linecap","round"),f.appendChild($)}},function(A){var J=document.createElement("circle"),B=typeof n.dotSize=="function"?n.dotSize():n.dotSize;J.setAttribute("r",B),J.setAttribute("cx",A.x),J.setAttribute("cy",A.y),J.setAttribute("fill",A.color),f.appendChild(J)});var p="data:image/svg+xml;base64,",v='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+o+" "+u+" "+d+'"')+(' width="'+u+'"')+(' height="'+d+'"')+">",_=f.innerHTML;if(_===void 0){var S=document.createElement("dummy"),y=f.childNodes;S.innerHTML="";for(var E=0;E<y.length;E+=1)S.appendChild(y[E].cloneNode(!0));_=S.innerHTML}var C="</svg>",L=v+_+C;return p+btoa(L)};Mr.prototype.fromData=function(n){var e=this;this.clear(),this._fromData(n,function(t,s){return e._drawCurve(t,s.start,s.end)},function(t){return e._drawDot(t)}),this._data=n};Mr.prototype.toData=function(){return this._data};var Ad={exports:{}},qb=Ad.exports,Qm;function zb(){return Qm||(Qm=1,(function(n,e){(function(t,s){n.exports=s()})(qb,function(){return(function(t){function s(o){if(a[o])return a[o].exports;var u=a[o]={exports:{},id:o,loaded:!1};return t[o].call(u.exports,u,u.exports,s),u.loaded=!0,u.exports}var a={};return s.m=t,s.c=a,s.p="",s(0)})([function(t,s){function a(p){var v=p.getContext("2d"),_=p.width,S=p.height,y=v.getImageData(0,0,_,S).data,E=d(!0,_,S,y),C=d(!1,_,S,y),L=f(!0,_,S,y),A=f(!1,_,S,y),J=A-L+1,B=C-E+1,$=v.getImageData(L,E,J,B);return p.width=J,p.height=B,v.clearRect(0,0,J,B),v.putImageData($,0,0),p}function o(p,v,_,S){return{red:S[4*(_*v+p)],green:S[4*(_*v+p)+1],blue:S[4*(_*v+p)+2],alpha:S[4*(_*v+p)+3]}}function u(p,v,_,S){return o(p,v,_,S).alpha}function d(p,v,_,S){for(var y=p?1:-1,E=p?0:_-1,C=E;p?C<_:C>-1;C+=y)for(var L=0;L<v;L++)if(u(L,C,v,S))return C;return null}function f(p,v,_,S){for(var y=p?1:-1,E=p?0:v-1,C=E;p?C<v:C>-1;C+=y)for(var L=0;L<_;L++)if(u(C,L,v,S))return C;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Ad)),Ad.exports}var $b=zb();const Wb=wu($b);var Hb=["canvasProps","clearOnResize"],ku=(function(n){Tb(t,n);var e=Db(t);function t(){var s;Lb(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=e.call.apply(e,[this].concat(o)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(d){s._canvas=d,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var d=s.props;d.canvasProps,d.clearOnResize;var f=Pb(d,Hb);return f},s.componentDidMount=function(){var d=s.getCanvas();s._sigPad=new Mr(d,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var d=s.getCanvas(),f=document.createElement("canvas");return f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0),Wb(f)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var d,f,p=(d=s.props.canvasProps)!==null&&d!==void 0?d:{},v=p.width,_=p.height;if(!(typeof v<"u"&&typeof _<"u")){var S=s.getCanvas(),y=Math.max((f=window.devicePixelRatio)!==null&&f!==void 0?f:1,1);typeof v>"u"&&(S.width=S.offsetWidth*y),typeof _>"u"&&(S.height=S.offsetHeight*y),S.getContext("2d").scale(y,y),s.clear()}},s.render=function(){var d=s.props.canvasProps;return Ff.createElement("canvas",If({ref:s.setRef},d))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(d,f){return s.getSignaturePad().fromDataURL(d,f)},s.toDataURL=function(d,f){return s.getSignaturePad().toDataURL(d,f)},s.fromData=function(d){return s.getSignaturePad().fromData(d)},s.toData=function(){return s.getSignaturePad().toData()},s}return Eb(t)})(me.Component);ku.propTypes={velocityFilterWeight:xi.number,minWidth:xi.number,maxWidth:xi.number,minDistance:xi.number,dotSize:xi.oneOfType([xi.number,xi.func]),penColor:xi.string,throttle:xi.number,onEnd:xi.func,onBegin:xi.func,canvasProps:xi.object,clearOnResize:xi.bool};ku.defaultProps={clearOnResize:!0};ku.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function Vb({open:n,onClose:e,insurerName:t,petId:s,petName:a,claimId:o,missingFields:u,existingData:d={},suggestedValues:f={},onComplete:p}){console.log("[MissingFieldsModal] Component rendered with petName:",a);const[v,_]=me.useState({}),[S,y]=me.useState(null),[E,C]=me.useState(!1),L=me.useRef({});me.useEffect(()=>{const H={};u.forEach(Y=>{f[Y.field]?H[Y.field]=f[Y.field]:d[Y.field]&&(H[Y.field]=d[Y.field])}),_(H)},[u,d,f]);const A=(H,Y)=>{_(D=>({...D,[H]:Y})),y(null)},J=H=>H.conditional?v[H.conditional.field]===H.conditional.value:!0,B=me.useMemo(()=>(console.log("[MissingFieldsModal] Filtering fields, formData:",v),u.filter(H=>{const Y=J(H);return console.log(`[MissingFieldsModal] Field ${H.field}: ${Y?"VISIBLE":"HIDDEN"}`,H.conditional?`(conditional: ${H.conditional.field} === "${H.conditional.value}")`:""),Y})),[u,v]),$=H=>{console.log("[MissingFieldsModal] replacePlaceholders called with:",H,"petName:",a);const Y=H.replace(/{petName}/g,a||"your pet");return console.log("[MissingFieldsModal] replacePlaceholders result:",Y),Y},oe=H=>H.type==="signature"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsxs("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!v[H.field]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(ku,{ref:Y=>{L.current[H.field]=Y},canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onEnd:()=>{const Y=L.current[H.field];Y&&!Y.isEmpty()&&A(H.field,Y.toDataURL("image/png"))}})]}),v[H.field]&&l.jsx("button",{type:"button",onClick:()=>{L.current[H.field]?.clear(),A(H.field,null)},className:"mt-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})]},H.field):H.type==="text"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("input",{type:"text",placeholder:H.placeholder,value:v[H.field]||"",onChange:Y=>A(H.field,Y.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"}),H.aiExtract&&f[H.field]&&l.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[" Suggested from diagnosis: ",f[H.field]]})]},H.field):H.type==="textarea"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("textarea",{rows:H.rows||3,placeholder:H.placeholder,value:v[H.field]||"",onChange:Y=>A(H.field,Y.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},H.field):H.type==="date"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("input",{type:"date",value:v[H.field]||"",onChange:Y=>A(H.field,Y.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},H.field):H.type==="phone"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("input",{type:"tel",placeholder:H.placeholder||"(555) 123-4567",value:v[H.field]||"",onChange:Y=>A(H.field,Y.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},H.field):H.type==="radio"&&H.options?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("div",{className:"space-y-2",children:H.options.map(Y=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[l.jsx("input",{type:"radio",name:H.field,value:Y,checked:v[H.field]===Y,onChange:D=>A(H.field,D.target.value),className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${v[H.field]===Y?"bg-emerald-500 border-emerald-500":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:v[H.field]===Y&&l.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:Y})]},Y))})]},H.field):null,de=async H=>{if(H.preventDefault(),y(null),!B.every(D=>{if(!D.required)return!0;const se=v[D.field];return!(!se||typeof se=="string"&&se.trim()==="")})){y("Please fill out all required fields");return}C(!0);try{await p(v)}catch{y("Failed to save data. Please try again."),C(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl max-h-[calc(100vh-80px)] overflow-y-auto",onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Quick Questions for ",t]}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:[" We need a few details to submit your claim. These fields are required by ",t,"."]})]}),S&&l.jsx("div",{className:"mb-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:S}),l.jsxs("form",{onSubmit:de,children:[B.map(H=>oe(H)),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" This information will be saved for future claims"})}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,disabled:E,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:E,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50",children:E?"Saving...":"Continue to Submit"})]})]})]})}):null}function Gb({claim:n,pet:e,userId:t,onClose:s,onSuccess:a}){const[o,u]=me.useState("validating"),[d,f]=me.useState(null),[p,v]=me.useState(null),[_,S]=me.useState(!1),[y,E]=me.useState(null),[C,L]=me.useState(null),A=e?.insurance_company||"Nationwide",J=n.total_amount?`$${parseFloat(n.total_amount).toFixed(2)}`:"$0.00";me.useEffect(()=>{async function H(){try{u("validating"),console.log("[ClaimSubmissionModal] Starting validation..."),console.log("[ClaimSubmissionModal] claim:",n),console.log("[ClaimSubmissionModal] pet:",e),console.log("[ClaimSubmissionModal] pet.insurance_company:",e?.insurance_company);const{data:Y,error:D}=await kt.from("profiles").select("*").eq("id",t).single();if(D)throw D;E(Y);const se=e?.insurance_company?.toLowerCase()||"";if(console.log("[ClaimSubmissionModal] insurerName:",se),!se||se==="not insured"||se==="none"){console.log("[ClaimSubmissionModal] No insurance company found"),v("Pet does not have an insurance company set. Please update pet information in Settings."),u("missing-data");return}const{data:{session:I}}=await kt.auth.getSession();if(!I?.access_token){v("Please log in to submit claims"),u("error");return}const R="http://localhost:8787";console.log("[ClaimSubmissionModal] Calling validation API:",`${R}/api/claims/validate-fields`),console.log("[ClaimSubmissionModal] Request body:",{claimId:n.id,userId:t,insurer:se});const re=await fetch(`${R}/api/claims/validate-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.access_token}`},body:JSON.stringify({claimId:n.id,userId:t,insurer:se})});console.log("[ClaimSubmissionModal] Response status:",re.status),console.log("[ClaimSubmissionModal] Response ok:",re.ok),console.log("[ClaimSubmissionModal] Response headers:",{"content-type":re.headers.get("content-type"),"content-length":re.headers.get("content-length")});const W=await re.text();console.log("[ClaimSubmissionModal] Response text (first 500 chars):",W.substring(0,500));let ie;try{ie=JSON.parse(W),console.log("[ClaimSubmissionModal] Validation response:",ie)}catch(fe){throw console.error("[ClaimSubmissionModal] Failed to parse JSON response:",fe),console.error("[ClaimSubmissionModal] Full response text:",W),new Error(`API returned non-JSON response (status ${re.status}): ${W.substring(0,200)}`)}if(!ie.ok){console.error("[ClaimSubmissionModal] Validation failed:",ie.error),v(`Error validating claim requirements: ${ie.error}`),u("error");return}if(console.log("[Validation] Result:",ie),ie.missingFields&&ie.missingFields.length>0){console.log("[ClaimSubmissionModal] Missing fields detected:",ie.missingFields),L({insurerName:e.insurance_company,missingFields:ie.missingFields,existingData:ie.existingData||{},suggestedValues:ie.suggestedValues||{}}),u("collect-missing-fields");return}console.log("[ClaimSubmissionModal] All fields present, proceeding to confirm"),u("confirm")}catch(Y){console.error("[Validation] Error:",Y),v(`Failed to validate claim: ${Y.message}`),u("error")}}H()},[t,e,n]);const B=[];async function $(){console.log("[Preview] ========== PREVIEW PDF CLICKED =========="),console.log("[Preview] User Agent:",navigator.userAgent),console.log("[Preview] Window width:",window.innerWidth);try{S(!0);const H="http://localhost:8787",{data:{session:Y}}=await kt.auth.getSession();if(!Y?.access_token)throw new Error("Not authenticated");const D=n.pdf_path?"?merged=true":"";console.log("[Preview] Fetching PDF from:",`${H}/api/claims/${n.id}/preview-pdf${D}`);const se=await fetch(`${H}/api/claims/${n.id}/preview-pdf${D}`,{headers:{Authorization:`Bearer ${Y.access_token}`}});if(console.log("[Preview] Response status:",se.status),!se.ok){const W=await se.json();throw new Error(W.error||"Failed to generate preview")}const I=await se.blob();console.log("[Preview] PDF blob size:",I.size);const R=URL.createObjectURL(I);console.log("[Preview] Blob URL created:",R),console.log("[Preview]  PDF fetched successfully, size:",I.size,"bytes");const re=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768;if(console.log("[Preview] Mobile detected:",re),re){console.log("[Preview] Using mobile-specific PDF handling");const W=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(console.log("[Preview] Is iOS:",W),W)console.log("[Preview] Opening PDF in same window (iOS)"),window.location.href=R;else{console.log("[Preview] Attempting download (Android)");const ie=document.createElement("a");ie.href=R,ie.download=`claim-${e.name}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),console.log("[Preview] Download triggered")}}else{console.log("[Preview] Opening PDF in new tab (desktop)");const W=window.open(R,"_blank","noopener,noreferrer");console.log("[Preview] New window opened:",!!W),n.pdf_path?console.log("[Preview] Opened merged PDF (claim form + vet invoice)"):console.log("[Preview] Opened claim form PDF (no vet invoice attached)")}}catch(H){console.error("[Preview PDF] ERROR:",H),console.error("[Preview PDF] Error stack:",H.stack),alert(`Could not generate preview: ${H.message}`)}finally{console.log("[Preview] Cleaning up, setting loading to false"),S(!1)}}async function oe(){u("submitting"),v(null);try{const{data:{session:H}}=await kt.auth.getSession();if(!H?.access_token){v("Please log in to submit claims"),u("error");return}const D=await fetch("http://localhost:8787/api/claims/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H.access_token}`},body:JSON.stringify({claimId:n.id,userId:t})}),se=await D.json();if(!D.ok||!se.ok)throw new Error(se.error||"Failed to submit claim");console.log("[ClaimSubmission] Success:",se),f(se.messageId),u("success")}catch(H){console.error("[ClaimSubmission] Error:",H),v(H.message||"Failed to submit claim"),u("error")}}async function de(H){try{u("validating");const{data:{session:Y}}=await kt.auth.getSession();if(!Y?.access_token){v("Please log in to save claim information"),u("error");return}const se=await fetch(`http://localhost:8787/api/claims/${n.id}/save-collected-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y.access_token}`},body:JSON.stringify({collectedData:H})}),I=await se.json();if(!se.ok||!I.ok){v("Failed to save claim information"),u("error");return}console.log("[Save Fields] Success:",I),u("confirm")}catch(Y){console.error("[Save Fields] Error:",Y),v("Failed to save claim information"),u("error")}}if(o==="validating")return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Validating Requirements..."}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Checking if all required information is complete"})]})});if(o==="collect-missing-fields"&&C)return l.jsx(Vb,{open:!0,onClose:s,insurerName:C.insurerName,petId:e.id,petName:e.name,claimId:n.id,missingFields:C.missingFields,existingData:C.existingData,suggestedValues:C.suggestedValues,onComplete:de});if(o==="missing-data"){const H=()=>{s(),window.location.hash="#settings"};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full",children:[l.jsx("div",{className:"text-orange-500 text-6xl mb-4 text-center",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Missing Required Information"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-center",children:"Please complete your profile and pet information before submitting claims."}),l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-3",children:"Missing:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 space-y-1.5",children:p?.split(`
`).slice(1).map((Y,D)=>l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),l.jsx("span",{children:Y.replace("- ","")})]},D))})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How to complete:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:"1. Go to Settings (click button below)"}),l.jsx("li",{children:"2. Fill in your signature, insurance info, and address"}),l.jsx("li",{children:"3. Update your pet's breed and date of birth"}),l.jsx("li",{children:"4. Return here and submit your claim"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:H,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Go to Settings"})]})]})})}return o==="submitting"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Submitting Claim..."}),l.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Generating PDF and sending to ",A]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Creating claim form PDF..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Sending email to insurance company..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Updating claim status..."})]})]})]})}):o==="success"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Claim Submitted!"}),l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Your claim for ",l.jsx("strong",{children:e?.name||"your pet"})," has been automatically submitted to ",l.jsx("strong",{children:A}),"."]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"What happens next:"}),l.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-400 space-y-1",children:[l.jsxs("li",{children:[" Claim form PDF sent to ",A]}),l.jsx("li",{children:" Copy sent to your email (BCC)"}),l.jsx("li",{children:' Claim status updated to "Submitted"'}),l.jsx("li",{children:" Insurance company will review (typically 5-10 business days)"})]})]}),d&&l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6",children:l.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 font-mono break-all",children:["Tracking ID: ",d.slice(0,20),"..."]})}),l.jsx("button",{onClick:()=>{a(d),s()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold w-full",children:"Done"})]})}):o==="error"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Submission Failed"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"We couldn't submit your claim automatically."}),l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:l.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[l.jsx("strong",{children:"Error:"})," ",p]})}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Next steps:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:" Try again in a few minutes"}),l.jsx("li",{children:" Or manually mark as submitted after filing yourself"}),l.jsx("li",{children:" Contact support if the problem persists"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>u("confirm"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Auto-Submit Claim to ",A,"?"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Review the claim details before submitting"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:"Claim Summary"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pet:"}),l.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e?.name||"Unknown"," (",e?.species||"Pet",")"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Clinic:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.clinic_name||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Service Date:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.service_date||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagnosis:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-right max-w-xs line-clamp-2",children:n.visit_title||n.diagnosis||"N/A"})]}),l.jsxs("div",{className:"pt-3 border-t border-blue-200 dark:border-blue-700 flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-semibold",children:"Total Amount:"}),l.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:J})]})]})]}),B.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-1",children:"Missing Information"}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"The following information is missing from your claim:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 list-disc list-inside",children:B.map((H,Y)=>l.jsx("li",{children:H},Y))}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-2",children:"You can still submit, but the insurance company may request additional information."})]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("button",{onClick:$,disabled:_,className:"w-full py-3 px-4 border-2 border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Generating Preview..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Preview Claim Form PDF"]})}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Review before submitting"})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"What will happen:"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"1."}),l.jsx("span",{children:"Generate professional claim form PDF with all details"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"2."}),l.jsxs("span",{children:["Email claim form to ",l.jsx("strong",{children:A})," at their claims processing address"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"3."}),l.jsx("span",{children:"Send you a copy (BCC) so you have a record"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"4."}),l.jsx("span",{children:'Update claim status to "Submitted" in your dashboard'})]})]})]}),l.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Test Mode Active"}),l.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["This submission will be sent to ",l.jsx("strong",{children:"larry@uglydogadventures.com"})," for testing, not to the actual insurance company. Perfect for testing!"]})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:oe,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all",children:[" Submit to ",A]}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})})}function Yb({userId:n,initialSignature:e,onSave:t}){const s=me.useRef(null),[a,o]=me.useState(e||null),[u,d]=me.useState(!1),[f,p]=me.useState(null),[v,_]=me.useState(!1);me.useEffect(()=>{e&&o(e)},[e]);const S=()=>{s.current?.clear(),_(!1),p(null)},y=async()=>{if(!s.current||s.current.isEmpty()){p({type:"error",text:"Please draw your signature first"});return}d(!0),p(null);try{const L=s.current.toDataURL("image/png"),{error:A}=await kt.from("profiles").update({signature:L}).eq("id",n);if(A)throw A;o(L),p({type:"success",text:"Signature saved successfully!"}),t&&t(L),setTimeout(()=>p(null),3e3)}catch(L){console.error("Error saving signature:",L),p({type:"error",text:"Failed to save signature. Please try again."})}finally{d(!1)}},E=()=>{o(null),_(!1),setTimeout(()=>{s.current?.clear()},0)},C=()=>{_(!0),p(null)};return l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Signature"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will be used on your insurance claim forms"})]}),a?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-green-800",children:"Signature Saved"}),l.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),l.jsx("div",{className:"bg-white rounded border border-green-300 p-4",children:l.jsx("img",{src:a,alt:"Your signature",className:"max-w-full h-auto",style:{maxHeight:"120px"}})})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[!v&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-gray-400 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(ku,{ref:s,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(249, 250, 251)",penColor:"rgb(0, 0, 0)",onBegin:C})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:S,disabled:!v||u,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear"}),l.jsx("button",{onClick:y,disabled:!v||u,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:u?"Saving...":"Save Signature"})]}),f&&l.jsx("div",{className:`p-3 rounded-lg text-sm ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:f.text})]}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-800",children:[l.jsx("strong",{children:"Note:"})," Your signature will be included on all insurance claim submissions. Make sure it matches the signature on file with your insurance company."]})})]})}function Kb(){const[n,e]=me.useState([]),[t,s]=me.useState([]),[a,o]=me.useState(!0),[u,d]=me.useState(null),[f,p]=me.useState("all"),[v,_]=me.useState("all"),[S,y]=me.useState("email"),[E,C]=me.useState("asc"),[L,A]=me.useState(null);me.useEffect(()=>{J()},[]);async function J(){try{o(!0),d(null);const{data:D,error:se}=await kt.from("profiles").select("*").order("created_at",{ascending:!1});if(se)throw se;const I=D.filter(V=>{const j=(V.email||"").toLowerCase();return!j.includes("larry")&&!j.includes("uglydogadventures")&&!j.includes("dogstrainedright")}),R=new Set(I.map(V=>V.id)),{data:re,error:W}=await kt.from("pets").select("*");if(W)throw W;const ie=re.filter(V=>R.has(V.user_id)),{data:fe,error:ee}=await kt.from("claims").select("*");if(ee)throw ee;const z=fe.filter(V=>R.has(V.user_id)),le=I.map(V=>{const j=ie.filter(ue=>ue.user_id===V.id),q=z.filter(ue=>ue.user_id===V.id),X=q.reduce((ue,ye)=>ue+(ye.total_amount||0),0);let ae="inactive";return q.length>0?ae="active":j.length>0&&(ae="pet-only"),{profile:V,pets:j,claims:q,petsCount:j.length,claimsCount:q.length,totalClaimAmount:X,lastActive:V.updated_at||V.created_at,status:ae}}),be=z.map(V=>{const j=I.find(X=>X.id===V.user_id),q=ie.find(X=>X.id===V.pet_id);return{...V,userEmail:j?.email||"Unknown",userName:j?.full_name||"Unknown",petName:q?.name||"Unknown",insuranceCompany:q?.insurance_company||"Unknown"}});e(le),s(be)}catch(D){console.error("Error loading admin data:",D),d(D.message)}finally{o(!1)}}const B=me.useMemo(()=>{const D=n.filter(z=>z.status==="active").length,se=n.filter(z=>z.status==="inactive").length,I=n.reduce((z,le)=>z+le.petsCount,0),R=t.length,re=t.reduce((z,le)=>z+(le.total_amount||0),0),W=t.filter(z=>z.filing_status==="draft").length,ie=t.filter(z=>z.filing_status==="submitted").length,fe=t.filter(z=>z.filing_status==="paid").length,ee={};return t.forEach(z=>{const le=z.insuranceCompany||"Unknown";ee[le]=(ee[le]||0)+1}),{totalUsers:n.length,activeUsers:D,inactiveUsers:se,totalPets:I,totalClaims:R,totalAmount:re,draftClaims:W,submittedClaims:ie,paidClaims:fe,insuranceBreakdown:ee}},[n,t]),$=me.useMemo(()=>[...n].sort((se,I)=>{let R,re;switch(S){case"email":R=se.profile.email,re=I.profile.email;break;case"name":R=se.profile.full_name||"",re=I.profile.full_name||"";break;case"petsCount":R=se.petsCount,re=I.petsCount;break;case"claimsCount":R=se.claimsCount,re=I.claimsCount;break;case"lastActive":R=new Date(se.lastActive).getTime(),re=new Date(I.lastActive).getTime();break;default:return 0}return R<re?E==="asc"?-1:1:R>re?E==="asc"?1:-1:0}),[n,S,E]),oe=me.useMemo(()=>t.filter(D=>!(f!=="all"&&D.filing_status!==f||v!=="all"&&D.insuranceCompany!==v)),[t,f,v]);function de(D){S===D?C(E==="asc"?"desc":"asc"):(y(D),C("asc"))}function H(D){switch(D){case"active":return"bg-green-100 text-green-800";case"pet-only":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function Y(D){switch(D){case"submitted":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800"}}return a?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):u?l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading admin data"}),l.jsx("p",{className:"text-red-600 mt-2",children:u})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"System overview and user management"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Users"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:B.totalUsers}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-green-600",children:["Active: ",B.activeUsers]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-red-600",children:["Inactive: ",B.inactiveUsers]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Pets"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:B.totalPets}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Across all users"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Claims"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:B.totalClaims}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Draft: ",B.draftClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-blue-600",children:["Submitted: ",B.submittedClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-green-600",children:["Paid: ",B.paidClaims]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Amount"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",B.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All claims combined"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims by Insurance Company"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(B.insuranceBreakdown).map(([D,se])=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:D}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:se})]},D))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Users"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>de("email"),children:["Email ",S==="email"&&(E==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>de("name"),children:["Name ",S==="name"&&(E==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>de("petsCount"),children:["Pets ",S==="petsCount"&&(E==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>de("claimsCount"),children:["Claims ",S==="claimsCount"&&(E==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>de("lastActive"),children:["Last Active ",S==="lastActive"&&(E==="asc"?"":"")]}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(D=>l.jsxs(Ff.Fragment,{children:[l.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>A(L===D.profile.id?null:D.profile.id),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.profile.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.profile.full_name||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:D.petsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:D.claimsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(D.lastActive).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${H(D.status)}`,children:D.status})})]}),L===D.profile.id&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"User Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",D.profile.phone_number||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Timezone:"})," ",D.profile.timezone||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"SMS Opt-in:"})," ",D.profile.sms_opt_in?"Yes":"No"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Email Reminders:"})," ",D.profile.email_reminders?"Yes":"No"]})]})]}),D.pets.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Pets (",D.pets.length,")"]}),l.jsx("div",{className:"space-y-2",children:D.pets.map(se=>l.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[l.jsxs("div",{className:"font-medium",children:[se.name," - ",se.species]}),l.jsxs("div",{className:"text-gray-600",children:[se.insurance_company,"  Policy: ",se.policy_number||"Not set"]})]},se.id))})]}),D.claims.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Recent Claims (",D.claims.length,") - Total: $",D.totalClaimAmount.toFixed(2)]}),l.jsxs("div",{className:"space-y-2",children:[D.claims.slice(0,5).map(se=>l.jsx("div",{className:"bg-white border rounded p-3 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:se.clinic_name||"Unknown Clinic"}),l.jsxs("div",{className:"text-gray-600",children:[se.service_date?new Date(se.service_date).toLocaleDateString():"No date","  $",se.total_amount?.toFixed(2)||"0.00"]})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Y(se.filing_status||"draft")}`,children:se.filing_status||"draft"})]})},se.id)),D.claims.length>5&&l.jsxs("div",{className:"text-sm text-gray-600",children:["+ ",D.claims.length-5," more claims"]})]})]})]})})})]},D.profile.id))})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Claims"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("select",{value:f,onChange:D=>p(D.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"paid",children:"Paid"})]}),l.jsxs("select",{value:v,onChange:D=>_(D.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Insurance"}),Object.keys(B.insuranceBreakdown).map(D=>l.jsx("option",{value:D,children:D},D))]})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Date"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insurance"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PDF"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map(D=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm text-gray-900",children:D.userName}),l.jsx("div",{className:"text-sm text-gray-500",children:D.userEmail})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.service_date?new Date(D.service_date).toLocaleDateString():"-"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",D.total_amount?.toFixed(2)||"0.00"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Y(D.filing_status||"draft")}`,children:D.filing_status||"draft"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.insuranceCompany}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:D.pdf_path?l.jsx("span",{className:"text-green-600",children:""}):l.jsx("span",{className:"text-gray-400",children:"-"})})]},D.id))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Showing ",oe.length," of ",t.length," claims"]}),l.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",oe.reduce((D,se)=>D+(se.total_amount||0),0).toFixed(2)]})]})})]})]})}async function Zm(n){console.log("[createClaim] inserting",n);const{data:e,error:t}=await kt.from("claims").insert(n).select("*").single();if(t)throw t;return e}async function Mi(n){try{console.log("[listClaims] START - userId=",n);const{data:e,error:t}=await kt.from("claims").select("*, pets(id, name, species, insurance_company)").eq("user_id",n).order("service_date",{ascending:!1});if(console.log("[listClaims] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[listClaims] ERROR:",t),t;return console.log("[listClaims] SUCCESS - count=",e?.length||0),e}catch(e){throw console.error("[listClaims] EXCEPTION:",e),e}}async function Jo(n,e){const{error:t}=await kt.from("claims").update(e).eq("id",n);if(t)throw t}async function Jb(n){const{error:e}=await kt.from("claims").delete().eq("id",n);if(e)throw e}const Xb=["test-automation@petclaimhelper.com","larry@uglydogadventures.com"];function Qb(){const n=window.location.pathname,e=n.match(/^\/dose\/([a-zA-Z0-9-]+)$/i);if(console.log("[App Router] Path:",n,"DoseMatch:",e),e){const t=e[1];return console.log("[App Router] Rendering standalone dose page for code:",t),l.jsx(Ab,{medicationId:t,userId:null,onClose:()=>{console.log("[App Router] Dose marking closed")}})}return console.log("[App Router] Rendering full app"),l.jsx(Zb,{})}function Zb(){const n=me.useRef(null),[e,t]=me.useState(null),[s,a]=me.useState(!1),[o,u]=me.useState(!1),[d,f]=me.useState(null),[p,v]=me.useState(null),[_,S]=me.useState([]),[y,E]=me.useState(null),C=me.useMemo(()=>_.find(P=>P.id===y)??null,[_,y]),[L,A]=me.useState(""),[J,B]=me.useState(""),[$,oe]=me.useState("insured"),[de,H]=me.useState(!1),[Y,D]=me.useState({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:""}),[se,I]=me.useState(null),[R,re]=me.useState(null),[W,ie]=me.useState(""),[fe,ee]=me.useState(""),[z,le]=me.useState(""),[be,V]=me.useState(""),[j,q]=me.useState(""),[X,ae]=me.useState(""),[ue,ye]=me.useState(null),[he,Se]=me.useState(null),[Ce,ze]=me.useState("signup"),[Ie,Ge]=me.useState(null),[st,Z]=me.useState([]),[Qe,It]=me.useState(!1),[St,We]=me.useState(null),_t=me.useRef(null),rt=me.useRef(null),[ut,tt]=me.useState([]),[ur,Qt]=me.useState(0),[Wt,Zt]=me.useState(!1),[Dt,mt]=me.useState("all"),[Ft,ct]=me.useState("app"),[Br,er]=me.useState(!1),[Ct,Gt]=me.useState(null),[br,jt]=me.useState(null),[hr,Lt]=me.useState(""),[qt,dr]=me.useState(""),[$t,Tt]=me.useState(""),[lr,ti]=me.useState(""),[Ur,$n]=me.useState([]),[In,Pt]=me.useState("insured"),[ss,is]=me.useState(!1),[Tr,Sn]=me.useState(null),[xr,Dr]=me.useState(""),[qr,Cs]=me.useState(Bs()),[wi,as]=me.useState(!1),[ri,dn]=me.useState(null),[Gr,Dn]=me.useState(null),[Ui,Wn]=me.useState(!1),[_i,ps]=me.useState(!1),[Ni,ni]=me.useState([]),[ki,wr]=me.useState([]);function Bs(){const P=new Date,ge=P.getFullYear(),Ne=String(P.getMonth()+1).padStart(2,"0"),Le=String(P.getDate()).padStart(2,"0");return`${ge}-${Ne}-${Le}`}const[qi,Hn]=me.useState(null),Ps=P=>{Hn({message:P}),setTimeout(()=>Hn(null),2500)},[Ua,ma]=me.useState(null),[Si,os]=me.useState(null),[qa,Yr]=me.useState(!1),[ga,Ul]=me.useState(0),[zr,si]=me.useState(null),[Vn,Es]=me.useState(null),[ii,ls]=me.useState(null),[Xr,jn]=me.useState(null);me.useEffect(()=>{p&&requestAnimationFrame(()=>{document.body.offsetHeight})},[p]),me.useEffect(()=>{if(console.log("[VISIT TITLE DEBUG] useEffect triggered",{extracted:p,diagnosis:p?.diagnosis,currentVisitTitle:J}),p){const P=p.diagnosis?.trim()||"Vet visit";console.log("[VISIT TITLE DEBUG] Setting visitTitle to:",P),B(P)}},[p]);const[za,zi]=me.useState(!1),Us=P=>P.trim().toLowerCase(),qs=(P,ge)=>{const Ne=Us(P),Le=Us(ge),qe=Ne.length,et=Le.length;if(qe===0)return et;if(et===0)return qe;const at=Array.from({length:qe+1},()=>Array(et+1).fill(0));for(let nt=0;nt<=qe;nt++)at[nt][0]=nt;for(let nt=0;nt<=et;nt++)at[0][nt]=nt;for(let nt=1;nt<=qe;nt++)for(let Xe=1;Xe<=et;Xe++){const ot=Ne[nt-1]===Le[Xe-1]?0:1;at[nt][Xe]=Math.min(at[nt-1][Xe]+1,at[nt][Xe-1]+1,at[nt-1][Xe-1]+ot)}return at[qe][et]},va=(P,ge)=>{const Ne=Us(P),Le=Us(ge);if(!Ne||!Le)return 0;if(Ne===Le)return 1;if(Ne.includes(Le)||Le.includes(Ne))return .92;const qe=qs(Ne,Le),et=Math.max(Ne.length,Le.length);return 1-qe/(et||1)},cr=(P,ge)=>{const Ne=Array(P.length).fill(null),Le=new Set;return P.forEach((qe,et)=>{const nt=ge.map(Xe=>({id:Xe.id,score:va(qe.petName||"",Xe.name||"")})).sort((Xe,ot)=>ot.score-Xe.score).find(Xe=>Xe.score>=.8&&!Le.has(Xe.id));nt&&(Ne[et]=nt.id,Le.add(nt.id))}),Ne};me.useEffect(()=>{try{console.log("[auth] calling getSession()")}catch{}kt.auth.getSession().then(async({data:ge})=>{try{console.log("[auth] getSession() result:",{hasSession:!!ge?.session,userId:ge?.session?.user?.id||null})}catch{}const Ne=ge.session;if(Ne?.user){ye(Ne.user.email??null),Se(Ne.user.id),ze("app"),Op(Ne.user.id,Ne.user.email??null).catch(()=>{});try{const Le=Intl.DateTimeFormat().resolvedOptions().timeZone;Tp(Le).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",Ne.user.id)}catch{}Promise.all([ou(Ne.user.id),kt.from("profiles").select("onboarding_complete").eq("id",Ne.user.id).single()]).then(([Le,qe])=>{S(Le);const et=qe.data?.onboarding_complete??!1;dn(et),(Le||[]).length===0&&!et&&as(!0)}).catch(Le=>{console.error("[auth] dbLoadPets failed:",Le),S([])}),Mi(Ne.user.id).then(tt).catch(Le=>{console.error("[auth] listClaims failed:",Le),tt([])})}else{try{console.log("[auth] getSession() no session found - showing signup")}catch{}ze("signup")}}).catch(ge=>{try{console.error("[auth] getSession() error:",ge)}catch{}ze("signup")});const{data:P}=kt.auth.onAuthStateChange(async(ge,Ne)=>{try{console.log("[auth] onAuthStateChange:",{event:ge,hasSession:!!Ne,userId:Ne?.user?.id||null})}catch{}if(Ne?.user){ye(Ne.user.email??null),Se(Ne.user.id),ze("app"),Op(Ne.user.id,Ne.user.email??null).catch(()=>{});try{const Le=localStorage.getItem("pending_sms_consent");if(Le){console.log("[auth] Found pending SMS consent, saving to database...");const qe=JSON.parse(Le);let et=null;try{et=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,console.log("[auth] IP address fetched:",et)}catch(ot){console.log("[auth] Could not fetch IP address:",ot)}const at={user_id:Ne.user.id,phone_number:qe.phone_number,consented:qe.consented,consent_text:qe.consent_text,ip_address:et};console.log("[auth] Inserting SMS consent data:",at);const{data:nt,error:Xe}=await kt.from("sms_consent").insert(at).select();Xe?(console.error("[auth] Failed to save SMS consent:",Xe),console.error("[auth] Consent error details:",JSON.stringify(Xe,null,2))):(console.log("[auth] SMS consent saved successfully!",nt),localStorage.removeItem("pending_sms_consent"),console.log("[auth] Cleared pending SMS consent from localStorage"))}}catch(Le){console.error("[auth] Error processing pending SMS consent:",Le)}try{const Le=Intl.DateTimeFormat().resolvedOptions().timeZone;Tp(Le).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",Ne.user.id)}catch{}Promise.all([ou(Ne.user.id),kt.from("profiles").select("onboarding_complete").eq("id",Ne.user.id).single()]).then(([Le,qe])=>{S(Le);const et=qe.data?.onboarding_complete??!1;dn(et),(Le||[]).length===0&&!et&&as(!0)}).catch(Le=>{console.error("[auth] dbLoadPets failed:",Le),S([])}),Mi(Ne.user.id).then(tt).catch(Le=>{console.error("[auth] listClaims failed:",Le),tt([])})}else{ye(null),Se(null),S([]);try{console.log("[auth] onAuthStateChange - signed out, clearing state")}catch{}ze("signup")}});return()=>{P.subscription.unsubscribe()}},[]),me.useEffect(()=>{if(!he){er(!1);return}kt.from("profiles").select("is_admin").eq("id",he).single().then(({data:P,error:ge})=>{if(ge){console.error("[admin] Failed to load admin status:",ge),er(!1);return}er(P?.is_admin===!0)}).catch(()=>er(!1))},[he]),me.useEffect(()=>{_&&_.length===1&&E(P=>P||_[0].id)},[_]),me.useEffect(()=>{if(localStorage.getItem("justCompletedOnboarding")==="true"&&_&&_.length>0)if(_.some(Ne=>!Ne.photo_url)){zi(!0);const Ne=setTimeout(()=>{zi(!1),localStorage.removeItem("justCompletedOnboarding")},5e3),Le=()=>{zi(!1),localStorage.removeItem("justCompletedOnboarding"),document.removeEventListener("click",Le)};return document.addEventListener("click",Le),()=>{clearTimeout(Ne),document.removeEventListener("click",Le)}}else localStorage.removeItem("justCompletedOnboarding")},[_]),me.useEffect(()=>{try{localStorage.removeItem("pch.finPeriod")}catch{}},[]),me.useEffect(()=>{Qt(P=>(console.log("[App]  Incrementing dataRefreshToken:",P,"",P+1,"| pets count:",_.length),P+1))},[ut,_,Dt]),me.useEffect(()=>{Ct&&(jt(Ct.pet_id||null),Lt(Ct.service_date||""),Tt(Ct.visit_title||""),dr(Ct.diagnosis||""),ti(Ct.visit_notes||""),$n(Array.isArray(Ct.line_items)?Ct.line_items:[]),Pt(Ct.expense_category||"insured"))},[Ct]);const $i=()=>{const P=Y.name.trim();if(!P)return;if(!W||W==="Not Insured"||W===" Select ")Y.insuranceCompany="",Y.filing_deadline_days="",Y.policyNumber="";else if(W==="Custom Insurance"){const qe=z.trim(),et=Number(be);if(!qe){alert("Enter custom insurance company name");return}if(!Number.isFinite(et)||et<1||et>365){alert("Deadline must be 1-365 days");return}Y.insuranceCompany=qe,Y.filing_deadline_days=et}else Y.insuranceCompany=W,Y.filing_deadline_days=90;const ge=globalThis.crypto?.randomUUID?.()??String(Date.now()),Ne={id:ge,name:P,species:Y.species,insuranceCompany:Y.insuranceCompany||"",policyNumber:(Y.policyNumber||"").trim(),ownerName:"",ownerPhone:"",filing_deadline_days:Y.filing_deadline_days,monthly_premium:Y.monthly_premium===""?null:Number(Y.monthly_premium),deductible_per_claim:Y.deductible_per_claim===""?null:Number(Y.deductible_per_claim),insurance_pays_percentage:Y.insurance_pays_percentage===""?null:Number(Y.insurance_pays_percentage)/100,annual_coverage_limit:null,coverage_start_date:Y.coverage_start_date||null},Le=[..._,Ne];if(S(Le),he&&Bh(he,Ne).catch(qe=>{console.error("[addPet] upsert error",qe)}),St!==null){const qe=[...st];qe[St]=ge,Z(qe),We(null)}else E(ge);H(!1),D({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:""}),ie(""),le(""),V("")},ji=P=>{I(P.id),re({name:P.name,species:P.species,insuranceCompany:P.insuranceCompany,filing_deadline_days:P.filing_deadline_days||"",monthly_premium:P.monthly_premium??"",deductible_per_claim:P.deductible_per_claim??"",coverage_start_date:P.coverage_start_date||"",insurance_pays_percentage:P.insurance_pays_percentage!=null?Math.round(Number(P.insurance_pays_percentage)*100):"",policyNumber:P.policyNumber||"",healthy_paws_pet_id:P.healthy_paws_pet_id||""});const ge=["Trupanion","Nationwide","Healthy Paws"];!P.insuranceCompany||P.insuranceCompany===""?(ee("Not Insured"),q(""),ae("")):ge.includes(P.insuranceCompany)?(ee(_b(P.insuranceCompany)),q(""),ae(String(P.filing_deadline_days||""))):(ee("Custom Insurance"),q(P.insuranceCompany),ae(String(P.filing_deadline_days||"")))},$a=async()=>{if(console.log("[saveEdit]  Save started",{editingPetId:se,editPet:R}),!se||!R)return;let P="",ge="";if(!fe||fe==="Not Insured"||fe===" Select ")P="",ge="";else if(fe==="Custom Insurance"){const qe=j.trim(),et=Number(X);if(!qe){alert("Enter custom insurance company name");return}if(!Number.isFinite(et)||et<1||et>365){alert("Deadline must be 1-365 days");return}P=qe,ge=et}else P=jd(fe),ge=Rn(P)||90;const Ne=_.map(qe=>qe.id===se?{...qe,name:R.name.trim(),species:R.species,insuranceCompany:P,policyNumber:(R.policyNumber||"").trim(),ownerName:qe.ownerName||"",ownerPhone:qe.ownerPhone||"",filing_deadline_days:ge,monthly_premium:R.monthly_premium===""?null:Number(R.monthly_premium),deductible_per_claim:R.deductible_per_claim===""?null:Number(R.deductible_per_claim),coverage_start_date:R.coverage_start_date||null,insurance_pays_percentage:R.insurance_pays_percentage===""?null:Number(R.insurance_pays_percentage)/100,annual_coverage_limit:qe.annual_coverage_limit??null,healthy_paws_pet_id:R.healthy_paws_pet_id||null}:qe),Le=Ne.find(qe=>qe.id===se);if(console.log("[saveEdit]  Pet data to save:",Le),he){const qe=Ne.find(et=>et.id===se);if(qe)try{console.log("[saveEdit]  Starting dbUpsertPet..."),await Bh(he,qe),console.log("[saveEdit]  dbUpsertPet complete"),console.log("[saveEdit]  Starting dbLoadPets...");const et=await ou(he);console.log("[saveEdit]  dbLoadPets complete, got",et.length,"pets"),console.log("[saveEdit]  Refreshed pet data:",et.find(at=>at.id===se)),S(et),console.log("[saveEdit]  State updated with fresh DB data"),Qt(at=>(console.log("[saveEdit]  Forcing dataRefreshToken increment:",at,"",at+1),at+1)),console.log("[saveEdit]  Financial Summary refresh triggered")}catch(et){console.error("[saveEdit]  Error:",et),S(Ne)}}else S(Ne);I(null),re(null),console.log("[saveEdit]  Save complete")},bo=()=>n.current?.click(),wo=async()=>{try{console.log("[auth] signOut() called")}catch{}const{error:P}=await kt.auth.signOut();try{console.log("[auth] signOut() result:",P||null)}catch{}try{const{data:ge}=await kt.auth.getSession();console.log("[auth] post-signOut getSession():",{hasSession:!!ge?.session})}catch{}},Wi=P=>{if(console.log("[MOBILE DEBUG] ========== processFile CALLED =========="),console.log("[MOBILE DEBUG] file:",P),console.log("[MOBILE DEBUG] file type:",P?.type),console.log("[MOBILE DEBUG] file size:",P?.size),!P){console.log("[MOBILE DEBUG] No file provided, setting selectedFile to null"),t(null);return}if(!(P.type.startsWith("image/")||P.type==="application/pdf")){console.log("[MOBILE DEBUG] File type not allowed:",P.type),t(null);return}const Ne=P.type.startsWith("image/"),Le=Ne?URL.createObjectURL(P):void 0;console.log("[MOBILE DEBUG] Setting selectedFile:",{fileName:P.name,fileType:P.type,isImage:Ne,objectUrl:Le}),t({file:P,objectUrl:Le}),v(null),f(null)},xa=P=>{console.log("[MOBILE DEBUG] ========== handleChange CALLED =========="),console.log("[MOBILE DEBUG] e.target.files:",P.target.files),console.log("[MOBILE DEBUG] e.target.files?.[0]:",P.target.files?.[0]),Wi(P.target.files?.[0])},Gn=P=>{P.preventDefault(),P.stopPropagation(),a(!0)},zs=P=>{P.preventDefault(),P.stopPropagation(),a(!0)},Yn=P=>{P.preventDefault(),P.stopPropagation(),a(!1)},ms=P=>{P.preventDefault(),P.stopPropagation(),a(!1);const ge=P.dataTransfer;if(!ge)return;const Ne=ge.files?.[0]??null;Wi(Ne)},Hi=me.useMemo(()=>{if(!e)return"";const{size:P}=e.file,ge=1024,Ne=ge*1024;return P<ge?`${P} B`:P<Ne?`${(P/ge).toFixed(1)} KB`:`${(P/Ne).toFixed(2)} MB`},[e]),Rt=P=>{const ge=typeof P?.clinicName=="string"?P.clinicName:typeof P?.clinic_name=="string"?P.clinic_name:"",Ne=typeof P?.clinicAddress=="string"?P.clinicAddress:typeof P?.clinic_address=="string"?P.clinic_address:"",Le=typeof P?.clinicPhone=="string"?P.clinicPhone:typeof P?.clinic_phone=="string"?P.clinic_phone:void 0,qe=typeof P?.petName=="string"?P.petName:typeof P?.pet_name=="string"?P.pet_name:"",et=typeof P?.dateOfService=="string"?P.dateOfService:typeof P?.service_date=="string"?P.service_date:"",at=typeof P?.totalAmount=="string"?P.totalAmount:P?.total_amount!=null?String(P.total_amount):"",nt=typeof P?.invoiceNumber=="string"?P.invoiceNumber:typeof P?.invoice_number=="string"?P.invoice_number:void 0,ot=(Array.isArray(P?.lineItems)?P.lineItems:Array.isArray(P?.line_items)?P.line_items:[]).map(vt=>({description:typeof vt?.description=="string"?vt.description:"",amount:typeof vt?.amount=="string"?vt.amount:vt?.amount!=null?String(vt.amount):""}));return{clinicName:ge,clinicAddress:Ne,clinicPhone:Le,petName:qe,dateOfService:et,totalAmount:at,diagnosis:typeof P?.diagnosis=="string"?P.diagnosis:"",lineItems:ot,invoiceNumber:nt}},$s=P=>{if(!P||!Array.isArray(P.pets))return null;const ge=P.pets.map(Ne=>({petName:typeof Ne?.petName=="string"?Ne.petName:"",petSpecies:typeof Ne?.petSpecies=="string"?Ne.petSpecies:void 0,lineItems:Array.isArray(Ne?.lineItems)?Ne.lineItems.map(Le=>({description:typeof Le?.description=="string"?Le.description:"",amount:typeof Le?.amount=="string"?Le.amount:String(Le?.amount??"")})):[],subtotal:typeof Ne?.subtotal=="string"?Ne.subtotal:void 0}));return{clinicName:typeof P?.clinicName=="string"?P.clinicName:"",clinicAddress:typeof P?.clinicAddress=="string"?P.clinicAddress:"",clinicPhone:typeof P?.clinicPhone=="string"?P.clinicPhone:typeof P?.clinic_phone=="string"?P.clinic_phone:void 0,dateOfService:typeof P?.dateOfService=="string"?P.dateOfService:"",diagnosis:typeof P?.diagnosis=="string"?P.diagnosis:"",pets:ge,invoiceNumber:typeof P?.invoiceNumber=="string"?P.invoiceNumber:void 0}},Wa=P=>{const ge=(P||"").replace(/[^0-9.\-]/g,""),Ne=parseFloat(ge);return Number.isFinite(Ne)?Ne:0},Ha=P=>`$${P.reduce((Ne,Le)=>Ne+Wa(Le.amount),0).toFixed(2)}`,Kn=async(P,ge,Ne)=>{try{console.log("[uploadClaimPdf] Starting upload...",{uid:P,claimId:ge,blobSize:Ne.size,blobType:Ne.type});const Le=`${P}/${ge}.pdf`,{error:qe}=await kt.storage.from("claim-pdfs").upload(Le,Ne,{upsert:!0,contentType:"application/pdf"});if(qe)throw qe;return console.log("[uploadClaimPdf]  Storage upload successful, updating claim record..."),await Jo(ge,{pdf_path:Le}),console.log("[uploadClaimPdf]  Claim record updated with pdf_path:",Le),Le}catch(Le){return console.error("[uploadClaimPdf]  ERROR:",Le),null}},ai=async(P,ge)=>{if(!he){jn("Please log in to upload photos");return}const Ne=5*1024*1024;if(ge.size>Ne){jn("Photo must be smaller than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(ge.type)){jn("Please upload a PNG or JPEG image");return}ls(P),jn(null);try{const qe=ge.name.split(".").pop()||"jpg",et=Date.now(),at=`${he}/${P}-${et}.${qe}`,{error:nt}=await kt.storage.from("pet-photos").upload(at,ge,{upsert:!0,contentType:ge.type});if(nt)throw nt;const{data:Xe}=kt.storage.from("pet-photos").getPublicUrl(at);if(!Xe?.publicUrl)throw new Error("Failed to get public URL");const ot=_.find(x=>x.id===P);if(!ot)throw new Error("Pet not found");const vt={...ot,photo_url:Xe.publicUrl};await Bh(he,vt);const rr=await ou(he);S(rr),Ps("Photo uploaded successfully!")}catch(qe){console.error("[uploadPetPhoto] error",qe),jn(qe?.message||"Failed to upload photo. Please try again.")}finally{ls(null)}},_o=async(P,ge)=>{const Ne=ge.target.files?.[0];Ne&&(await ai(P,Ne),ge.target.value="")},[Va,ya]=me.useState(!1),Ga=async()=>{if(console.log("[MOBILE DEBUG] ========== handleProcess CALLED =========="),console.log("[MOBILE DEBUG] selectedFile:",e),console.log("[MOBILE DEBUG] typeof selectedFile:",typeof e),console.log("[MOBILE DEBUG] selectedFile?.file:",e?.file),!e){console.log("[MOBILE DEBUG]  EARLY RETURN - No selectedFile!");return}u(!0),f(null);try{console.log("[extract] starting server-side extraction, file type:",e.file.type),console.log("[extract] file size:",e.file.size),console.log("[extract] file name:",e.file.name);const P="https://pet-claim-helper.onrender.com",ge=new FormData;ge.append("file",e.file);const Ne=new AbortController,qe=setTimeout(()=>{try{Ne.abort()}catch{}},9e4),et=await fetch(`${P}/api/extract-pdf`,{method:"POST",body:ge,signal:Ne.signal});if(clearTimeout(qe),!et.ok){const vt=await et.text().catch(()=>"");throw new Error(vt||`Server error (${et.status})`)}const at=await et.json();if(console.log("[MOBILE DEBUG] Full JSON response:",JSON.stringify(at,null,2)),!at||at.ok!==!0||!at.data)throw console.error("[extract] bad response shape",at),new Error("Invalid extraction response");const nt=at.data;if(console.log("[MOBILE DEBUG] Parsed data from server:",JSON.stringify(nt,null,2)),!nt)throw console.error("[extract] empty parsed data from server response"),new Error("Could not parse JSON from server response.");const Xe=$s(nt);if(Xe&&Xe.pets.length>1){console.log("[MOBILE DEBUG] Multi-pet extraction detected:",Xe),Ge(Xe),v(null);const vt=cr(Xe.pets,_);Z(vt);return}const ot=Rt(nt);console.log("[MOBILE DEBUG] Normalized extraction result:",JSON.stringify(ot,null,2)),console.log("[VISIT TITLE DEBUG] Extracted diagnosis value:",ot.diagnosis),C&&(ot.petName=C.name),console.log("[MOBILE DEBUG] Final extraction being set to state:",JSON.stringify(ot,null,2)),console.log("[VISIT TITLE DEBUG] About to call setExtracted with diagnosis:",ot.diagnosis),v(ot),Ge(null)}catch(P){const ge=String(P?.message||""),Le=String(P?.name||"")==="AbortError"||/aborted|timeout/i.test(ge),qe=/NetworkError|Failed to fetch|TypeError: Failed to fetch/i.test(ge),et=P?.error&&(P.error.message||P.error?.error?.message)||ge;f(Le?"Extraction timed out. Mobile networks can be slow  please try again. We now wait up to 90 seconds.":qe?"Network error during extraction. Please check your connection and try again.":et||"AI extraction failed. Please try again."),console.error("[extract] error:",{name:P?.name,message:P?.message,cause:P?.cause});const at={clinicName:"",clinicAddress:"",clinicPhone:"",petName:C?C.name:"",dateOfService:"",totalAmount:"",diagnosis:"",lineItems:[]};v(at),Ge(null)}finally{u(!1)}},Rn=P=>typeof P.filing_deadline_days=="number"&&P.filing_deadline_days>0?P.filing_deadline_days:90,Ws=P=>{if(!P.service_date)return null;const ge=new Date(P.service_date);return Number.isNaN(ge.getTime())?null:ge},An=P=>{const ge=Ws(P);if(!ge)return null;const Ne=new Date(ge.getTime());Ne.setDate(Ne.getDate()+Rn(P));const Le=new Date,qe=Ne.getTime()-Le.getTime();return Math.ceil(qe/(1e3*60*60*24))},ba=P=>{switch((P||"not_submitted").toLowerCase()){case"filed":case"submitted":return{text:"Claim - Filed",cls:"bg-emerald-50 text-emerald-700"};case"approved":return{text:"Approved",cls:"bg-emerald-50 text-emerald-700"};case"paid":return{text:"Paid",cls:"bg-emerald-50 text-emerald-700"};case"denied":return{text:"Denied",cls:"bg-rose-50 text-rose-700"};case"not_filed":default:return{text:"Bill - Pending Submission",cls:"bg-blue-50 text-blue-700"}}},Ya=P=>{const ge=An(P),Ne=(P.filing_status||"not_submitted").toLowerCase(),Le=Ne==="filed"?"submitted":Ne;return Le==="denied"?{text:" Claim Denied",cls:"bg-red-100 text-red-800 border border-red-300 font-semibold"}:Le==="approved"?{text:" Approved",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:Le==="paid"?{text:" Paid",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:Le==="submitted"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:ge===null?{text:"No date",cls:"bg-slate-100 text-slate-600"}:ge<0?{text:" DEADLINE PASSED - Submit now!",cls:"bg-red-100 text-red-800 border border-red-300 font-bold"}:ge<5?{text:` URGENT - ${ge} days`,cls:"bg-red-100 text-red-800 border border-red-300 font-bold animate-pulse"}:ge<=14?{text:` Due soon - ${ge} days`,cls:"bg-orange-100 text-orange-800 border border-orange-300 font-semibold"}:ge<=29?{text:` Due soon - ${ge} days`,cls:"bg-yellow-100 text-yellow-800 border border-yellow-300 font-semibold"}:{text:` Plenty of time - ${ge} days`,cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}},Ls=P=>`$${(typeof P=="number"&&Number.isFinite(P)?P:0).toFixed(2)}`,Vi=me.useMemo(()=>{const P=[...ut];return P.sort((ge,Ne)=>{const Le=Ws(ge)?.getTime()||0;return(Ws(Ne)?.getTime()||0)-Le}),P},[ut]),xn=me.useMemo(()=>{const P=ut.length,ge=ut.filter(at=>String(at.expense_category||"insured").toLowerCase()==="insured"),Ne=ge.filter(at=>["not_filed","not_submitted"].includes(String(at.filing_status||"not_submitted").toLowerCase())),Le=Ne.reduce((at,nt)=>at+(Number(nt.total_amount)||0),0),qe=ge.filter(at=>["filed","submitted"].includes(String(at.filing_status||"").toLowerCase())).length,et=Ne.filter(at=>{const nt=An(at);return nt!==null&&nt>=1&&nt<=14}).length;return{total:P,notFiledCount:Ne.length,notFiledSum:Le,filedPending:qe,expiringSoon:et}},[ut]);return me.useMemo(()=>{const P=it=>{if(!it)return null;const Je=String(it).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!Je)return null;const Ot=Number(Je[1]),tr=Number(Je[2])-1,_r=Number(Je[3]),nr=new Date(Ot,tr,_r);return Number.isNaN(nr.getTime())?null:nr},ge=it=>{const Je=P(it);if(!Je)return 0;const Ot=new Date;if(Dt==="2026"){if(Je.getFullYear()>2026)return 0;const fr=Je.getFullYear()<2026?0:Je.getMonth(),Or=Ot.getFullYear()===2026?Ot.getMonth():11;return Math.max(0,Or-fr+1)}if(Dt==="2025"){if(Je.getFullYear()>2025)return 0;const fr=Je.getFullYear()<2025?0:Je.getMonth(),Or=Ot.getFullYear()===2025?Ot.getMonth():11;return Math.max(0,Or-fr+1)}if(Dt==="2024"){if(Je.getFullYear()>2024)return 0;const fr=Je.getFullYear()<2024?0:Je.getMonth();return Math.max(0,11-fr+1)}const tr=Ot,_r=(tr.getFullYear()-Je.getFullYear())*12+(tr.getMonth()-Je.getMonth())+1;return Math.max(0,_r)},Ne=ut.filter(it=>{const Je=it.service_date?new Date(it.service_date):null;if(!Je||Number.isNaN(Je.getTime()))return!1;if(Dt==="all")return!0;if(Dt==="2026")return Je.getFullYear()===2026;if(Dt==="2025")return Je.getFullYear()===2025;if(Dt==="2024")return Je.getFullYear()===2024;if(Dt==="last12"){const Ot=new Date,tr=new Date(Ot.getTime());return tr.setDate(tr.getDate()-365),Je>=tr&&Je<=Ot}return!0}),Le={insured:{sum:0,count:0},not_insured:{sum:0,count:0},maybe_insured:{sum:0,count:0}};let qe=0,et=0,at=0,nt=0;const Xe={};let ot=0,vt=0;const rr=new Date;let x=0,T=0,Q=0,pe=0,ke=0,Me=0;for(const it of Ne){const Je=Number(it.total_amount||0),Ot=String(it.filing_status||"not_filed").toLowerCase(),tr=it.expense_category||"insured",_r=P(it.service_date);if(nt+=Je,Le[tr].sum+=Je,Le[tr].count+=1,Ot==="paid"){const fr=Number(it.reimbursed_amount||0);qe+=fr,tr==="insured"&&(Me+=Math.max(0,Je-fr))}else(Ot==="filed"||Ot==="approved")&&(et+=Je);if((Ot==="denied"||tr==="not_insured")&&(at+=Je),tr!=="insured"&&(pe+=Je),Ot==="approved"&&(ot+=Je),_r&&!Number.isNaN(_r.getTime())){if(_r<=rr&&(x+=Je,Ot==="paid")){const fr=Number(it.reimbursed_amount||0);vt+=fr,T+=fr}_r<=rr&&Ot==="submitted"&&tr==="insured"&&(ke+=Je)}const nr=it.pets?.name||"Unknown Pet";Xe[nr]||(Xe[nr]={sum:0,count:0}),Xe[nr].sum+=Je,Xe[nr].count+=1}for(const it of _){const Je=Number(it.monthly_premium||0);Je>0&&(Q+=Je*ge(it.coverage_start_date||null))}for(const it of Ne){const Je=String(it.filing_status||"").toLowerCase(),Ot=String(it.expense_category||"").toLowerCase();Je==="paid"&&Ot==="insured"&&(Number(it.total_amount||0),Math.max(0,Number(it.deductible_applied)||0),Math.max(0,Number(it.reimbursed_amount)||0))}const $e=Q+pe+Me,ft=Math.max(0,x-T);return{byCategory:Le,reimbursed:qe,awaiting:et,outOfPocket:at,grandTotal:nt,perPet:Xe,awaitingInsured:ot,periodSpent:$e,periodReimbursed:vt,periodNet:$e,definiteTotal:$e,pendingTotal:ke,spentOnAllPets:x,reimbursedPaidPeriod:T,netCostPeriod:ft}},[ut,Dt]),l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100",children:[qi&&l.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:l.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm shadow-lg border border-slate-700",children:qi.message})}),l.jsx("header",{className:"px-4 pt-2 pb-3 md:py-8 bg-gradient-to-b from-white/50 to-transparent dark:from-slate-900/50",children:l.jsxs("div",{className:"mx-auto max-w-6xl",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center mb-1 md:mb-6",children:[l.jsx("img",{src:"/pch-logo.png",alt:"Pet Claim Helper",className:"w-[70vw] max-w-[320px] md:w-[90vw] md:max-w-[500px] h-auto object-contain mt-1 mb-0 md:mt-0 md:mb-0"}),l.jsx("div",{className:"w-full px-4 mt-4 mb-3 md:mt-6 md:mb-4 animate-fade-in",children:l.jsx("div",{className:"max-w-3xl mx-auto",children:l.jsx("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-[2px] shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02]",children:l.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl px-6 py-4 md:px-8 md:py-5",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 md:gap-4",children:[l.jsx("span",{className:"text-3xl md:text-4xl animate-pulse",children:""}),l.jsxs("div",{className:"text-center md:text-left",children:[l.jsx("div",{className:"font-bold text-lg md:text-xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Coming Soon: Auto-Submit Claims"}),l.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mt-1",children:"One-click submission. Track payments. Never miss deadlines."})]})]})})})})}),l.jsxs("div",{className:"text-base md:text-lg font-bold text-gray-500 dark:text-gray-400 text-center max-w-xl px-4 leading-snug mt-1 mb-3 md:mt-0 md:mb-0",children:[l.jsx("div",{children:"Track Vet Bills. File Pet Insurance Instantly."}),l.jsx("div",{children:"Get Paid Faster."})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 flex-wrap mt-2 md:mt-0",children:[Ce==="app"&&l.jsxs("button",{type:"button",onClick:()=>rt.current?.scrollIntoView({behavior:"smooth"}),className:"relative inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:["Bills (",ut.length,")",xn.expiringSoon>0&&l.jsx("span",{className:"ml-2 inline-block h-2 w-2 rounded-full bg-rose-500","aria-hidden":!0})]}),Ce==="app"&&l.jsx("button",{type:"button",onClick:()=>ct(P=>P==="app"?"settings":"app"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Settings"}),Ce==="app"&&l.jsx("button",{type:"button",onClick:()=>ct(P=>P==="medications"?"app":"medications"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Medications"}),Ce==="app"&&Br&&l.jsx("button",{type:"button",onClick:()=>ct(P=>P==="admin"?"app":"admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Admin Dashboard"}),Ce==="app"&&l.jsx("a",{href:`mailto:support@petclaimhelper.com?subject=Pet Claim Helper Support Request&body=Hi Pet Claim Helper Team,%0D%0A%0D%0AI need help with:%0D%0A%0D%0A----%0D%0AUser: ${ue||"Not logged in"}%0D%0AUser ID: ${he||"N/A"}`,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",title:"Need help? Contact support",children:" Contact Support"}),ue&&l.jsxs("span",{className:"hidden sm:inline text-xs text-slate-600 dark:text-slate-300",children:["Logged in as: ",ue]}),ue&&l.jsx("button",{onClick:wo,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:"Logout"})]})]})}),l.jsxs("main",{className:"px-6",children:[Ce==="app"&&Ft==="settings"&&l.jsx(rw,{userId:he,userEmail:ue,onClose:()=>ct("app"),onDefaultExpenseChange:P=>oe(P),onDefaultPeriodChange:P=>mt(P)}),Ce==="app"&&Ft==="medications"&&l.jsx("section",{className:"mx-auto mt-8 max-w-6xl px-2",children:l.jsx(jb,{userId:he,pets:_,refreshKey:ga})}),Ce==="app"&&Ft==="admin"&&l.jsx(l.Fragment,{children:Br?l.jsx(Kb,{}):l.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[l.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),l.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),l.jsx("button",{onClick:()=>ct("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),Ce!=="app"&&l.jsx("section",{className:"mx-auto max-w-md mt-8",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm",children:[l.jsx("div",{className:"px-6 pt-4",children:l.jsxs("div",{className:"flex items-center gap-6 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("button",{type:"button",onClick:()=>ze("signup"),className:["pb-3 text-sm font-medium transition-colors",Ce==="signup"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"].join(" "),children:"Create Account"}),l.jsx("button",{type:"button",onClick:()=>ze("login"),className:["pb-3 text-sm font-medium transition-colors",Ce==="login"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"].join(" "),children:"Sign In"})]})}),l.jsx("div",{className:"p-6",children:l.jsx(ew,{mode:Ce,onSwitch:P=>ze(P)})})]})}),Ce==="app"&&l.jsxs("section",{className:"mx-auto max-w-4xl",ref:_t,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Your Pets"}),l.jsx("button",{type:"button",onClick:()=>H(P=>!P),className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-1.5 text-sm hover:shadow",children:"+ Add Pet"})]}),Xr&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-800 dark:text-red-200 flex items-start justify-between",children:[l.jsx("span",{children:Xr}),l.jsx("button",{onClick:()=>jn(null),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:""})]}),de&&l.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 p-4 max-w-2xl mx-auto",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{id:"pet-name",value:Y.name,onChange:P=>D({...Y,name:P.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-species",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{id:"pet-species",value:Y.species,onChange:P=>D({...Y,species:P.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsx("select",{id:"pet-insurance",value:W,onChange:P=>{const ge=P.target.value;ie(ge);const Ne=jd(ge),Le=Rn(Ne);ge==="Not Insured"||ge===" Select "?D({...Y,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):ge==="Custom Insurance"?D({...Y,insuranceCompany:"",filing_deadline_days:""}):Ne&&D({...Y,insuranceCompany:Ne,filing_deadline_days:Le||90})},className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:bu.map(P=>l.jsx("option",{value:P.display,children:P.display},P.display))})]}),W==="Healthy Paws (90 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-healthy-paws-id",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"pet-healthy-paws-id",value:Y.healthy_paws_pet_id||"",onChange:P=>D({...Y,healthy_paws_pet_id:P.target.value}),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),W&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{id:"pet-policy-number",value:Y.policyNumber||"",onChange:P=>D({...Y,policyNumber:P.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-premium",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"pet-premium",type:"number",min:0,value:String(Y.monthly_premium??""),onChange:P=>D({...Y,monthly_premium:P.target.value===""?"":Number(P.target.value)}),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-deductible",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"pet-deductible",type:"number",min:0,value:String(Y.deductible_per_claim??""),onChange:P=>D({...Y,deductible_per_claim:P.target.value===""?"":Number(P.target.value)}),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-pays",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),l.jsx("input",{id:"pet-insurance-pays",type:"number",min:50,max:100,value:String(Y.insurance_pays_percentage??""),onChange:P=>D({...Y,insurance_pays_percentage:P.target.value===""?"":Number(P.target.value)}),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-coverage-start",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),l.jsx("input",{id:"pet-coverage-start",type:"date",value:Y.coverage_start_date||"",onChange:P=>D({...Y,coverage_start_date:P.target.value}),onClick:P=>P.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:$i,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",children:"Save Pet"}),l.jsx("button",{type:"button",onClick:()=>H(!1),className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.length===0&&l.jsx("div",{className:"col-span-full text-sm text-slate-500 dark:text-slate-400",children:'No pets saved yet. Click "+ Add Pet" to create one.'}),_.map(P=>l.jsxs("div",{className:["rounded-xl border p-6 text-left bg-white dark:bg-slate-900/60 shadow-sm relative",y===P.id?"border-emerald-400":"border-slate-200 dark:border-slate-800"].join(" "),style:{border:`2px solid ${P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280")}`},children:[l.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[l.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:ge=>_o(P.id,ge),className:"sr-only",id:`photo-upload-${P.id}`,disabled:ii===P.id}),l.jsx("label",{htmlFor:`photo-upload-${P.id}`,className:["inline-flex items-center justify-center w-8 h-8 rounded-full cursor-pointer transition-all",P.species==="dog"?"bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",ii===P.id?"opacity-50 cursor-not-allowed":""].join(" "),title:P.photo_url?"Change Photo":"Add Photo",children:ii===P.id?l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),za&&!P.photo_url&&_.indexOf(P)===0&&l.jsxs("div",{className:"absolute -top-16 -right-2 pointer-events-none animate-bounce",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg shadow-xl whitespace-nowrap text-sm font-medium",children:["Upload the cutest picture of ",P.name,"! "]}),l.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-pink-500"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-center mb-4",children:P.photo_url?l.jsx("img",{src:P.photo_url,alt:`${P.name}'s photo`,className:"w-32 h-32 rounded-full object-cover border-4 shadow-lg transition-transform hover:scale-105",style:{borderColor:P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280")}}):l.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center text-6xl border-4 shadow-lg",style:{borderColor:P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280"),backgroundColor:P.species==="dog"?"#EFF6FF":P.species==="cat"?"#FFF7ED":"#F3F4F6"},children:P.species==="dog"?"":P.species==="cat"?"":""})}),l.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:l.jsxs("div",{className:"flex-1 text-center",children:[l.jsxs("div",{className:"text-base font-semibold flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280")}}),P.name]}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 capitalize",children:P.species})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-3",children:[l.jsx("button",{type:"button",onClick:()=>E(P.id),className:["inline-flex items-center justify-center rounded-lg px-3 py-1.5 h-12 text-sm hover:shadow w-full sm:w-auto whitespace-nowrap",y===P.id?P.species==="dog"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white":"border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900"].join(" "),children:y===P.id?"Selected":"Use This Pet"}),l.jsx("button",{type:"button",onClick:()=>ji(P),className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-sm text-slate-700 dark:text-slate-200 w-full sm:w-auto px-3 whitespace-nowrap",children:"Edit"})]})]}),l.jsx("div",{className:"mt-4 text-sm text-slate-700 dark:text-slate-300 space-y-1.5",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Insurance:"}),(()=>{const ge=P.insuranceCompany||"Not Insured",Ne=ge.toLowerCase().includes("nationwide"),Le=ge.toLowerCase().includes("healthy paws"),qe=ge.toLowerCase().includes("trupanion"),et=ge.toLowerCase().includes("not insured")||ge.toLowerCase().includes("none");let at="bg-slate-100 dark:bg-slate-800",nt="text-slate-700 dark:text-slate-300",Xe="border-slate-200 dark:border-slate-700";return Ne?(at="bg-blue-50 dark:bg-blue-950",nt="text-blue-700 dark:text-blue-300",Xe="border-blue-200 dark:border-blue-800"):Le?(at="bg-green-50 dark:bg-green-950",nt="text-green-700 dark:text-green-300",Xe="border-green-200 dark:border-green-800"):qe?(at="bg-purple-50 dark:bg-purple-950",nt="text-purple-700 dark:text-purple-300",Xe="border-purple-200 dark:border-purple-800"):et&&(at="bg-slate-100 dark:bg-slate-800",nt="text-slate-600 dark:text-slate-400",Xe="border-slate-300 dark:border-slate-700"),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${at} ${nt} ${Xe}`,children:[Ne&&"",Le&&"",qe&&"",et&&"",ge]})})()]})}),se===P.id&&R&&l.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-800 p-3 max-w-3xl mx-auto overflow-x-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-name",className:"block text-xs",children:"Pet Name"}),l.jsx("input",{id:"edit-pet-name",value:R.name,onChange:ge=>re({...R,name:ge.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-species",className:"block text-xs",children:"Species"}),l.jsxs("select",{id:"edit-pet-species",value:R.species,onChange:ge=>re({...R,species:ge.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("select",{id:"edit-pet-insurance",value:fe,onChange:ge=>{const Ne=ge.target.value;ee(Ne);const Le=jd(Ne),qe=Rn(Le);Ne==="Not Insured"||Ne===" Select "?re({...R,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):Ne==="Custom Insurance"?re({...R,insuranceCompany:"",filing_deadline_days:""}):Le&&re({...R,insuranceCompany:Le,filing_deadline_days:qe||90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:bu.map(ge=>l.jsx("option",{value:ge.display,children:ge.display},ge.display))})]}),fe==="Not Insured"?l.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:l.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}):fe==="Custom Insurance"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-custom-name",className:"block text-xs text-slate-500",children:"Insurance Company Name"}),l.jsx("input",{id:"edit-pet-insurance-custom-name",value:j,onChange:ge=>q(ge.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-custom-deadline",className:"block text-xs text-slate-500",children:"Filing Deadline (days)"}),l.jsx("input",{id:"edit-pet-insurance-custom-deadline",type:"number",min:1,max:365,value:X,onChange:ge=>ae(ge.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}):l.jsx("div",{className:"sm:col-span-1 flex items-end text-xs text-slate-600",children:fe?"Filing Deadline: 90 days":""}),fe==="Healthy Paws (90 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-healthy-paws-id",className:"block text-xs text-slate-500",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"edit-pet-healthy-paws-id",value:R.healthy_paws_pet_id||"",onChange:ge=>re({...R,healthy_paws_pet_id:ge.target.value}),placeholder:"e.g., 1400806-1",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),fe&&fe!=="Not Insured"&&fe!==" Select "&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"edit-pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),l.jsx("input",{id:"edit-pet-policy-number",value:R.policyNumber||"",onChange:ge=>re({...R,policyNumber:ge.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),fe!=="Not Insured"&&fe!==" Select "&&fe&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"edit-pet-premium",type:"number",step:"0.01",placeholder:"e.g., 38.00",value:String(R.monthly_premium??""),onChange:ge=>re({...R,monthly_premium:ge.target.value===""?"":Number(ge.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Monthly insurance premium cost"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"edit-pet-deductible",type:"number",step:"0.01",placeholder:"e.g., 250.00",value:String(R.deductible_per_claim??""),onChange:ge=>re({...R,deductible_per_claim:ge.target.value===""?"":Number(ge.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),l.jsx("input",{id:"edit-pet-insurance-pays",type:"number",min:0,max:100,placeholder:"80",value:String(R.insurance_pays_percentage??""),onChange:ge=>re({...R,insurance_pays_percentage:ge.target.value===""?"":Number(ge.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),l.jsx("input",{id:"edit-pet-coverage-start",type:"date",value:R.coverage_start_date||"",onChange:ge=>re({...R,coverage_start_date:ge.target.value}),className:"mt-1 w-full min-w-[220px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When did your coverage start?"})]})]})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:$a,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save"}),l.jsx("button",{type:"button",onClick:()=>{if(!se)return;const Ne=_.find(qe=>qe.id===se)?.name||"this pet";if(!confirm(` Delete ${Ne}?

This will NOT delete bills for this pet, but you won't be able to file new bills.

This cannot be undone!`))return;const Le=_.filter(qe=>qe.id!==se);S(Le),he&&jx(he,se).catch(qe=>{console.error("[deletePet] error",qe)}),I(null),re(null)},className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",children:"Delete"}),l.jsx("button",{type:"button",onClick:()=>{I(null),re(null)},className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]})]},P.id))]})]}),Ce==="app"&&l.jsxs("section",{className:"mx-auto max-w-3xl text-center mt-8 px-2",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Upload Vet Bill"}),l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:["rounded-2xl border bg-white dark:bg-slate-900/60 shadow-sm p-6 sm:p-8 transition-colors",s?"border-emerald-400 ring-2 ring-emerald-400/60 dark:ring-emerald-400/50 bg-emerald-50/40 dark:bg-emerald-900/10":"border-slate-200 dark:border-slate-800"].join(" "),onDragEnter:zs,onDragOver:Gn,onDragLeave:Yn,onDrop:ms,children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",onClick:bo,className:"group relative w-full sm:w-auto h-16 rounded-xl border border-slate-300/70 dark:border-slate-700 bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 hover:from-white hover:to-white px-5 text-base sm:text-sm text-slate-800 dark:text-slate-100 shadow hover:shadow-lg transition",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("svg",{className:"h-6 w-6 text-emerald-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),l.jsx("span",{className:"font-medium",children:"Upload Vet Bill (PDF or Photo)"})]})}),l.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"or drag & drop here"}),l.jsx("input",{ref:n,type:"file",accept:"image/*,application/pdf",onChange:xa,className:"sr-only"}),e&&l.jsxs("div",{className:"mt-6 w-full text-left",children:[l.jsx("div",{className:"flex items-start justify-between gap-4",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Hi})]})}),e.objectUrl&&l.jsx("div",{className:"mt-4",children:l.jsx("img",{src:e.objectUrl,alt:"Selected preview",className:"max-h-80 w-full object-contain rounded-lg border border-slate-200 dark:border-slate-800",onLoad:()=>{e.objectUrl&&URL.revokeObjectURL(e.objectUrl)}})}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("button",{type:"button",onClick:P=>{console.log("[MOBILE DEBUG] ========== PROCESS BILL BUTTON CLICKED =========="),console.log("[MOBILE DEBUG] Event:",P),console.log("[MOBILE DEBUG] isProcessing:",o),Ga()},disabled:o,className:"inline-flex items-center justify-center w-full h-14 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 text-base sm:text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[o&&l.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),"Process Bill"]}),o&&l.jsxs("div",{className:"mt-4 flex flex-col items-center text-sm text-slate-700 dark:text-slate-300",children:[l.jsxs("svg",{className:"h-6 w-6 animate-spin mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),l.jsx("div",{children:" Extracting bill data..."})]})]})]})]})})})]}),Ce==="app"&&Ie&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Multiple Pets Detected"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We found charges for multiple pets on this bill:"}),l.jsx("ul",{className:"mt-2 text-sm list-disc pl-6 text-slate-700 dark:text-slate-200",children:Ie.pets.map((P,ge)=>l.jsxs("li",{children:[P.petName||`Pet ${ge+1}`," (",P.petSpecies||"Pet",")  ",P.subtotal||Ha(P.lineItems)]},ge))}),l.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"We'll create a separate bill for each pet."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("p",{className:"text-sm font-medium",children:"Match each pet to your saved profiles (or add new ones):"}),Ie.pets.map((P,ge)=>l.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 justify-between",children:[l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-sm font-medium",children:P.petName||`Pet ${ge+1}`}),l.jsx("div",{className:"text-xs text-slate-500",children:P.petSpecies||"Pet"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",value:st[ge]||"",onChange:Ne=>{const Le=[...st];Le[ge]=Ne.target.value||null,Z(Le)},children:[l.jsx("option",{value:"",children:"Select saved pet"}),_.map(Ne=>l.jsxs("option",{value:Ne.id,children:[Ne.name," (",Ne.species,")"]},Ne.id))]}),!st[ge]&&l.jsx("button",{type:"button",className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-xs hover:shadow",onClick:()=>{We(ge),H(!0);const Ne=(P.petSpecies||"").toLowerCase(),Le=Ne.includes("cat")?"cat":Ne.includes("dog")?"dog":Y.species;D(qe=>({...qe,name:P.petName||"",species:Le})),_t.current?.scrollIntoView({behavior:"smooth"})},children:"+ Add New Pet"})]})]})},ge))]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",disabled:st.some(P=>!P),onClick:async()=>{const P=[];for(let ge=0;ge<Ie.pets.length;ge++){const Ne=Ie.pets[ge],Le=st[ge],qe=_.find(vt=>vt.id===Le)||null,et=Ne.subtotal||Ha(Ne.lineItems),{filename:at,blob:nt}=bb({clinicName:Ie.clinicName,clinicAddress:Ie.clinicAddress,dateOfService:Ie.dateOfService,diagnosis:Ie.diagnosis,petName:Ne.petName,lineItems:Ne.lineItems,subtotal:et,invoiceNumber:Ie.invoiceNumber},qe);if(he)try{const vt=parseFloat(String(et).replace(/[^0-9.\-]/g,""))||null,rr=Number(qe?.filing_deadline_days)||90,x=Ie.dateOfService?new Date(Ie.dateOfService):null,T=x?new Date(x.getTime()):null;T&&T.setDate(T.getDate()+rr);const Q=await Zm({user_id:he,pet_id:qe?qe.id:null,service_date:Ie.dateOfService||null,invoice_number:Ie.invoiceNumber||null,clinic_name:Ie.clinicName||null,clinic_address:Ie.clinicAddress||null,clinic_phone:Ie.clinicPhone||null,diagnosis:Ie.diagnosis||null,total_amount:vt,line_items:Ne.lineItems,filing_status:"not_filed",filing_deadline_days:rr});Q?.id&&await Kn(he,Q.id,nt)}catch(vt){console.error("[createClaim multi] error",vt)}const Xe=URL.createObjectURL(nt),ot=document.createElement("a");ot.href=Xe,ot.download=at,document.body.appendChild(ot),ot.click(),ot.remove(),URL.revokeObjectURL(Xe),P.push({name:at,amount:et})}he&&Mi(he).then(tt).catch(()=>{}),Zt(!0),alert(` ${P.length} bills generated and downloaded!
`+P.map(ge=>`- ${ge.name} (${ge.amount})`).join(`
`)+`

Email each bill to your insurance company.`)},children:"Generate Bills"})})]})}),p&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{v(null),Ge(null),t(null),f(null),A(""),B(""),oe("insured")},children:" Cancel"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Extracted Details"})]}),l.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"What was this visit for? (Visit Title)"}),l.jsx("input",{value:J,onChange:P=>B(P.target.value),placeholder:"e.g., Annual checkup, Emergency visit, Teeth cleaning",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Edit if needed"})]}),(()=>{if(!p||!Array.isArray(p.lineItems))return null;const P=p.lineItems.map(Le=>Wa(Le.amount));return p.lineItems.length>0&&P.every(Le=>!Number.isFinite(Le)||Le===0)?l.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:[l.jsx("div",{className:"font-semibold",children:" NO PRICES FOUND"}),l.jsx("div",{className:"mt-1",children:"This appears to be a vaccination certificate or record, not an invoice."}),l.jsx("div",{className:"mt-1",children:"Please upload the actual bill/receipt with itemized charges and prices."}),l.jsx("div",{className:"mt-1 text-amber-800/80",children:"Insurance companies require invoices showing what you paid."})]}):null})(),l.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Review and edit any field if needed."}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Name"}),l.jsx("input",{value:p.clinicName,onChange:P=>v({...p,clinicName:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Address"}),l.jsx("input",{value:p.clinicAddress,onChange:P=>v({...p,clinicAddress:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Phone"}),l.jsx("input",{value:p.clinicPhone||"",onChange:P=>v({...p,clinicPhone:P.target.value}),placeholder:"(XXX) XXX-XXXX",type:"tel",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),l.jsx("input",{value:p.petName,onChange:P=>v({...p,petName:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Date of Service"}),l.jsx("input",{type:"date",value:p.dateOfService,onChange:P=>v({...p,dateOfService:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Invoice Number"}),l.jsx("input",{value:p.invoiceNumber||"",onChange:P=>v({...p,invoiceNumber:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Total Amount"}),l.jsx("input",{value:p.totalAmount,onChange:P=>v({...p,totalAmount:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Diagnosis / Reason"}),l.jsx("textarea",{value:p.diagnosis,onChange:P=>v({...p,diagnosis:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",rows:3})]})]}),C&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Pet Insurance"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("input",{value:C.insuranceCompany,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Policy Number"}),l.jsx("input",{value:C.policyNumber,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-sm text-emerald-700 dark:text-emerald-300 hover:underline",onClick:()=>v({...p,lineItems:[...p.lineItems,{description:"",amount:""}]}),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-3 space-y-3",children:p.lineItems.map((P,ge)=>l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3",children:[l.jsx("div",{className:"sm:col-span-8",children:l.jsx("input",{placeholder:"Description",value:P.description,onChange:Ne=>{const Le=[...p.lineItems];Le[ge]={...Le[ge],description:Ne.target.value},v({...p,lineItems:Le})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-3",children:l.jsx("input",{placeholder:"Amount",value:P.amount,onChange:Ne=>{const Le=[...p.lineItems];Le[ge]={...Le[ge],amount:Ne.target.value},v({...p,lineItems:Le})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-1 flex items-center",children:l.jsx("button",{type:"button",className:"text-slate-500 hover:text-rose-600 text-sm",onClick:()=>{const Ne=p.lineItems.filter((Le,qe)=>qe!==ge);v({...p,lineItems:Ne})},"aria-label":"Remove item",children:""})})]},ge))})]}),l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-blue-50/60 dark:bg-blue-900/10 p-4",children:[l.jsxs("label",{htmlFor:"visit-notes",className:"block text-sm font-semibold mb-2",children:[" Visit Notes ",l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(Optional but recommended)"})]}),l.jsx("textarea",{id:"visit-notes",value:L,onChange:P=>A(P.target.value),placeholder:"What was discussed at this vet visit? (e.g., 'Annual checkup - vet noted minor eye redness from outdoor play, cleared up in 2 days')",rows:3,className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),l.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:[" ",l.jsx("strong",{children:"Why this matters:"})," Documenting what was discussed protects you from casual comments being misinterpreted later as pre-existing conditions."]})]}),C&&C.insuranceCompany&&C.insuranceCompany.trim()!==""&&C.insuranceCompany.toLowerCase()!=="not insured"&&$!=="not_insured"&&(()=>{const P=Number(C?.filing_deadline_days)||90,ge=p.dateOfService?new Date(p.dateOfService):null,Ne=ge?new Date(ge.getTime()):null;Ne&&Ne.setDate(Ne.getDate()+P);const Le=new Date,qe=Ne?Math.ceil((Ne.getTime()-Le.getTime())/(1e3*60*60*24)):null,et=qe===null?{wrap:"bg-slate-50 border-slate-200",title:"text-slate-900"}:qe>=60?{wrap:"bg-emerald-50 border-emerald-200",title:"text-emerald-900"}:qe>=30?{wrap:"bg-yellow-50 border-yellow-200",title:"text-yellow-900"}:qe>=15?{wrap:"bg-orange-50 border-orange-200",title:"text-orange-900"}:{wrap:"bg-rose-50 border-rose-200",title:"text-rose-900"};if(qe!==null&&qe<0){const at=ge?Math.floor((Le.getTime()-ge.getTime())/864e5):0,nt=Math.floor(at/365),Xe=Math.max(1,Math.floor(at%365/30)),ot=nt>=1?nt===1?"over 1 year ago":`over ${nt} years ago`:`over ${Xe} months ago`;return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm bg-rose-50 border-rose-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold text-rose-900",children:" DEADLINE PASSED"}),l.jsxs("div",{className:"mt-2 text-sm text-rose-900",children:["This bill is from ",p.dateOfService||""," (",ot,")."]}),l.jsx("div",{className:"mt-2 text-sm text-rose-900",children:"Most insurers won't accept bills this old."}),l.jsx("div",{className:"mt-1 text-xs text-rose-900/80",children:"Contact your insurance company to verify if you can still file."})]})}return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm",et.wrap].join(" "),children:[l.jsx("div",{className:["text-sm font-semibold flex items-center gap-2",et.title].join(" "),children:l.jsx("span",{children:" FILING DEADLINE REMINDER"})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Service Date"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:p.dateOfService?new Date(p.dateOfService).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Insurance"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:C?C.insuranceCompany:""})]})]}),l.jsx("div",{className:"mt-3 text-sm",children:l.jsx("div",{className:"text-slate-700",children:" Most insurers require filing within 60180 days of service."})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Estimated Deadline"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:Ne?Ne.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Days Remaining"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base",children:qe===null?"":`${qe} days`})]})]}),l.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"This is a general reminder. Always verify your specific policy deadline."})]})})(),C&&C.insuranceCompany&&C.insuranceCompany.trim()!==""&&C.insuranceCompany.toLowerCase()!=="not insured"&&l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expense Category"}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"insured",checked:$==="insured",onChange:()=>oe("insured")}),l.jsx("span",{children:"Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"not_insured",checked:$==="not_insured",onChange:()=>oe("not_insured")}),l.jsx("span",{children:"Not Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"maybe_insured",checked:$==="maybe_insured",onChange:()=>oe("maybe_insured")}),l.jsx("span",{children:"Maybe Insured"})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{v(null),Ge(null),t(null),f(null),A(""),B(""),oe("insured")},children:" Cancel"}),!o&&l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium",onClick:async()=>{if(!C){is(!0);return}const P=Number(C?.filing_deadline_days)||90,ge=p.dateOfService?new Date(p.dateOfService):null,Ne=ge?new Date(ge.getTime()):null;Ne&&Ne.setDate(Ne.getDate()+P);let Le=null;if(he)try{const et=parseFloat(String(p.totalAmount).replace(/[^0-9.\-]/g,""))||null;Le=await Zm({user_id:he,pet_id:C?C.id:null,service_date:p.dateOfService||null,invoice_number:p.invoiceNumber||null,clinic_name:p.clinicName||null,clinic_address:p.clinicAddress||null,clinic_phone:p.clinicPhone||null,visit_title:J||null,diagnosis:p.diagnosis||null,total_amount:et,line_items:p.lineItems,filing_status:"not_submitted",filing_deadline_days:P,visit_notes:L||null,expense_category:$}),console.log("[createClaim single] Checking for vet bill upload...",{hasClaimId:!!Le?.id,hasSelectedFile:!!e,hasFile:!!e?.file,selectedFileType:e?.file?.type}),Le?.id&&e?.file?(console.log("[createClaim single] Uploading vet bill PDF to storage..."),await Kn(he,Le.id,e.file),console.log("[createClaim single]  Uploaded vet bill PDF for claim:",Le.id)):console.warn("[createClaim single]   No vet bill PDF to upload - selectedFile or file is missing")}catch(et){console.error("[createClaim single] error",et)}const qe={claimId:Le?.id||null,petName:C?.name||"Unknown",species:C?.species||"",amount:Wa(String(p.totalAmount||"")),serviceDate:p.dateOfService||null,insurance:C?.insuranceCompany||"",deadlineDate:Ne?Ne.toISOString().slice(0,10):null,deadlineDays:P};os(qe),ma(Le?.id||null),console.log("[LOOKS GOOD CLICKED] About to show medication modal",{claimId:Le?.id}),v(null),Wn(!0)},children:"Looks Good"})]})]})},JSON.stringify(p)),Ce==="app"&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Financial Summary"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("label",{className:"mr-2 text-slate-600",children:"Show expenses for:"}),l.jsxs("select",{value:Dt,onChange:P=>mt(P.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[l.jsx("option",{value:"all",children:"All Time"}),l.jsx("option",{value:"2026",children:"2026"}),l.jsx("option",{value:"2025",children:"2025"}),l.jsx("option",{value:"2024",children:"2024"}),l.jsx("option",{value:"last12",children:"Last 12 Months"})]})]})]}),l.jsx(kb,{userId:he,refreshToken:ur,period:Dt})]}),Ce==="app"&&ut.length>0&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Vet Bills"})}),l.jsx("div",{className:"mt-4 mb-4 p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:l.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[l.jsx("span",{className:"text-3xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:"Auto-Submit Coming Soon!"}),l.jsx("p",{className:"text-sm text-blue-100",children:"Soon we'll file claims directly with your insurance company. No more manual work!"})]})]})}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Total bills"}),l.jsx("div",{className:"text-lg font-semibold",children:xn.total})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Bills pending submission"}),l.jsxs("div",{className:"text-lg font-semibold",children:[xn.notFiledCount," ",l.jsxs("span",{className:"text-sm text-slate-500",children:["(",Ls(xn.notFiledSum),")"]})]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims filed"}),l.jsx("div",{className:"text-lg font-semibold",children:xn.filedPending})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims expiring soon (< 15 days)"}),l.jsx("div",{className:"text-lg font-semibold",children:xn.expiringSoon})]})]}),l.jsx("div",{ref:rt,className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full overflow-x-hidden",style:{overscrollBehaviorX:"none"},children:Vi.map(P=>{const ge=P.pets||{},Ne=ge?.color||(ge?.species==="cat"?"#F97316":ge?.species==="dog"?"#3B82F6":"#6B7280");An(P);const Le=(()=>{const Xe=Ws(P);if(!Xe)return null;const ot=new Date(Xe.getTime());return ot.setDate(ot.getDate()+Rn(P)),ot})(),qe=Ya(P),et=ba(P.filing_status),at=String(P.expense_category||"insured")==="not_insured",nt=(()=>{const Xe=P.expense_category||"insured",ot=ge?.insurance_company||"";return Xe==="insured"?{text:ot?`Insured  ${ot}`:"Insured",cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}:Xe==="not_insured"?{text:"Not Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}:{text:ot?`Maybe Insured  ${ot}`:"Maybe Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}})();return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900 shadow-sm min-h-[180px] w-full",style:{border:`2px solid ${Ne}`,touchAction:"pan-y",overscrollBehaviorX:"none"},children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:Ne+"20"},children:l.jsx("span",{className:"text-slate-700",children:ge.species==="cat"?"":""})}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 break-words line-clamp-2",children:(()=>{const Xe=(P.visit_title&&String(P.visit_title)||P.diagnosis&&String(P.diagnosis)||"").trim();return Xe?`${ge.name||"Pet"}  ${Xe}`:ge.name||"Pet"})()})})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:[l.jsx("span",{className:"mr-1",children:""}),P.clinic_name||""]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${nt.cls}`,children:nt.text}),!at&&l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${et.cls}`,children:et.text})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Service Date"}),l.jsx("div",{className:"font-medium",children:P.service_date||""})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-500",children:"Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:Ls(P.total_amount)}),String(P.filing_status||"").toLowerCase()==="paid"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:(()=>{const Xe=Number(P.total_amount||0),ot=Number(P.reimbursed_amount||0),vt=Xe>0?Math.round(ot/Xe*100):0;return`Claimed: ${Ls(Xe)}  Received: ${Ls(ot)} (${vt}%)`})()})}),P.paid_date&&l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:`Date Paid: ${new Date(P.paid_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}`})})]})]}),(()=>{const Xe=String(P.filing_status||"").toLowerCase();if(!(!!P.filed_date&&(Xe==="filed"||Xe==="paid")))return null;const vt=(()=>{const x=String(P.filed_date||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);if(x)return new Date(Number(x[1]),Number(x[2])-1,Number(x[3])).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const T=P.filed_date?new Date(P.filed_date):null;return T?T.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})();return l.jsxs("div",{className:"col-span-2 mt-1 text-[11px] text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Filed: ",vt]})]})})(),at?l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Info"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:" Self-paid vet bill"})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Filing Deadline"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:Le?Le.toISOString().slice(0,10):""})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${qe.cls}`,children:qe.text})})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 flex flex-wrap items-start sm:items-center justify-between gap-2",children:[(()=>{const Xe=String(P.filing_status||"not_submitted").toLowerCase(),ot=Xe==="filed"?"submitted":Xe==="not_filed"?"not_submitted":Xe;if(at)return l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-600",children:" Not insured - No filing required"})});if(ot==="not_submitted"){const vt=ue&&Xb.includes(ue);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[vt&&l.jsx("button",{type:"button",className:`
                                      text-xs px-2 py-1 rounded font-semibold whitespace-nowrap flex items-center gap-1.5
                                      transition-all duration-200 ease-out
                                      ${Vn===P.id?"scale-95 bg-gradient-to-r from-teal-600 via-teal-500 to-teal-600 bg-[length:200%_100%] animate-[shimmer_1.5s_ease-in-out_infinite]":"bg-blue-600 hover:bg-blue-700 active:scale-95"}
                                      text-white
                                    `,onClick:async()=>{navigator.vibrate&&navigator.vibrate(10),Es(P.id),await new Promise(rr=>setTimeout(rr,1e3)),si(P),await new Promise(rr=>setTimeout(rr,200)),Es(null)},title:"Automatically generate PDF and email to insurance company",children:Vn===P.id?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"animate-pulse",children:"Preparing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Auto-Submit"]})}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",onClick:async()=>{try{const rr=Bs(),T=prompt("Enter filed date (YYYY-MM-DD):",rr)||rr;await Jo(P.id,{filing_status:"filed",filed_date:T}),tt(Q=>Q.map(pe=>pe.id===P.id?{...pe,filing_status:"filed",filed_date:T}:pe));try{alert(" Claim marked as submitted")}catch{}if(await new Promise(Q=>setTimeout(Q,500)),he){const Q=await Mi(he);tt(Q)}}catch(rr){console.error("[mark filed] error",rr)}},title:"Manually mark as submitted (if you filed yourself)",children:"Mark Submitted"})]}),["insured","maybe"].includes(String(P.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"not_submitted",onChange:async rr=>{try{const x=rr.target.value,T=x==="submitted"?"filed":x==="not_submitted"?"not_filed":x;await Jo(P.id,{filing_status:T}),tt(Q=>Q.map(pe=>pe.id===P.id?{...pe,filing_status:T}:pe));try{alert(" Status updated")}catch{}await new Promise(Q=>setTimeout(Q,400)),he&&Mi(he).then(tt)}catch(x){console.error("[edit status] error",x)}},children:[l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]}),l.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-950/30 border-l-4 border-blue-400 rounded",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"text-2xl mr-2",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Coming Soon: Auto-Submit"}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"We'll file claims directly with your insurance company - no more manual work!"})]})]})})]})}return ot==="submitted"?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"What happened with this claim?"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{Sn(P);const vt=P.total_amount&&Number.isFinite(Number(P.total_amount))?String(Number(P.total_amount).toFixed(2)):"";Dr(vt),Cs(Bs())},children:"Payment Received? Mark as Paid"}),l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800",onClick:async()=>{try{await Jo(P.id,{filing_status:"denied"}),tt(vt=>vt.map(rr=>rr.id===P.id?{...rr,filing_status:"denied"}:rr));try{alert(" Claim marked as denied")}catch{}he&&Mi(he).then(tt)}catch(vt){console.error("[deny claim] error",vt)}},children:"Deny Claim"})]}),["insured","maybe"].includes(String(P.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"submitted",onChange:async vt=>{try{const rr=vt.target.value,x=rr==="submitted"?"filed":rr==="not_submitted"?"not_filed":rr;await Jo(P.id,{filing_status:x}),tt(T=>T.map(Q=>Q.id===P.id?{...Q,filing_status:x}:Q));try{alert(" Status updated")}catch{}he&&Mi(he).then(tt)}catch(rr){console.error("[edit status] error",rr)}},children:[l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]})]}):null})(),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[P.pdf_path&&l.jsx("a",{href:"#",onClick:async Xe=>{Xe.preventDefault();try{const{data:ot}=await kt.storage.from("claim-pdfs").createSignedUrl(P.pdf_path,60);ot?.signedUrl&&window.open(ot.signedUrl,"_blank")}catch(ot){console.error("[view pdf] error",ot)}},className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",children:"View PDF"}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800 shrink-0 whitespace-nowrap",onClick:async()=>{if(confirm("Delete this bill?"))try{await Jb(P.id),he&&Mi(he).then(tt)}catch(Xe){console.error("[delete claim] error",Xe)}},children:"Delete"})]})]})]},P.id)})}),Vi.length===0&&l.jsx("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 p-6 text-center text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900",children:"No vet bills yet. Upload your first bill to get started!"})]}),Ce==="app"&&l.jsxs("footer",{className:"mx-auto max-w-3xl text-center py-10 text-xs text-slate-500 dark:text-slate-400",children:[" ",new Date().getFullYear()," Pet Claim Helper"]})]}),Qe&&l.jsx(tw,{userId:he,userEmail:ue,onClose:()=>It(!1)}),ss&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>is(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-rose-200 bg-white p-6",onClick:P=>P.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold text-rose-700",children:" Please Select a Pet"}),l.jsx("div",{className:"mt-2 text-sm text-rose-800",children:"You haven't selected a pet for this bill yet."}),l.jsx("div",{className:"mt-1 text-sm text-rose-800",children:"Please go back and click 'Use This Pet' for the pet you want to add this bill for."}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",onClick:()=>is(!1),children:"Go Back"})})]})}),Ct&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Gt(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-2xl rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 flex flex-col max-h-[85vh]",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Edit Bill"}),l.jsx("button",{className:"text-sm",onClick:()=>Gt(null),children:"Close"})]}),["filed","paid"].includes(String(Ct.filing_status||"").toLowerCase())&&l.jsx("div",{className:"mx-5 mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:" This claim has been filed. Changes may require resubmitting to insurance."}),l.jsx("div",{className:"p-5 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Pet"}),l.jsxs("select",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:br||"",onChange:P=>jt(P.target.value),children:[l.jsx("option",{value:"",children:""}),_.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Service Date"}),l.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:hr,onChange:P=>Lt(P.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Title"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:$t,onChange:P=>Tt(P.target.value),placeholder:"e.g., Annual checkup, Teeth cleaning"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Diagnosis / Reason"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:qt,onChange:P=>dr(P.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Notes"}),l.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:lr,onChange:P=>ti(P.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-xs text-emerald-700",onClick:()=>$n([...Ur,{description:"",amount:""}]),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-2 space-y-2",children:Ur.map((P,ge)=>l.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[l.jsx("input",{className:"col-span-8 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Description",value:P.description,onChange:Ne=>{const Le=[...Ur];Le[ge]={...Le[ge],description:Ne.target.value},$n(Le)}}),l.jsx("input",{className:"col-span-3 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Amount",value:P.amount,onChange:Ne=>{const Le=[...Ur];Le[ge]={...Le[ge],amount:Ne.target.value},$n(Le)}}),l.jsx("button",{className:"col-span-1 text-xs",onClick:()=>{const Ne=Ur.filter((Le,qe)=>qe!==ge);$n(Ne)},children:""})]},ge))})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Expense Category"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:In==="insured",onChange:()=>Pt("insured")})," Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:In==="not_insured",onChange:()=>Pt("not_insured")})," Not Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:In==="maybe_insured",onChange:()=>Pt("maybe_insured")})," Maybe"]})]})]})]})}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Gt(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{if(Ct)try{if(await Jo(Ct.id,{pet_id:br||Ct.pet_id,service_date:hr||null,visit_title:$t||null,diagnosis:qt||null,visit_notes:lr||null,line_items:Ur,expense_category:In}),he){const P=await Mi(he);tt(P)}Gt(null),alert("Bill updated")}catch(P){console.error("[update claim] error",P),alert("Error updating bill")}},children:"Save Changes"})]})]})}),Tr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Sn(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Mark as Paid"}),l.jsx("button",{className:"text-sm",onClick:()=>Sn(null),children:"Close"})]}),l.jsxs("div",{className:"p-5 text-sm space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Claimed Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:Ls(Tr.total_amount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Reimbursed Amount"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",placeholder:"0.00",value:xr,onChange:P=>Dr(P.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Date Received"}),l.jsx("input",{type:"date",value:qr,onChange:P=>Cs(P.target.value),max:Bs(),placeholder:"YYYY-MM-DD",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2"})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-500",children:"Difference"}),l.jsx("div",{className:"font-mono font-semibold",children:(()=>{const P=Number(Tr.total_amount||0),ge=Number(xr||0),Ne=P-ge;return Ls(Ne)})()})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Sn(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{try{const P=Number(xr);if(!Number.isFinite(P)||P<0){alert("Please enter a valid reimbursed amount");return}if(!qr){alert("Please select the date received");return}const ge=new Date(qr).toISOString().slice(0,10),Ne=Number(Tr.total_amount||0),Le=Tr.pet_id||null,qe=Tr.service_date?Number(String(Tr.service_date).slice(0,4)):null,et=qe&&Le?ut.some(vt=>vt.id!==Tr.id&&vt.pet_id===Le&&String(vt.expense_category||"").toLowerCase()==="insured"&&String(vt.filing_status||"").toLowerCase()==="paid"&&vt.service_date&&String(vt.service_date).slice(0,4)===String(qe)&&Number(vt.deductible_applied||0)>0):!1,at=Le?_.find(vt=>vt.id===Le):null,nt=Math.max(0,Number(at?.deductible_per_claim||0)),Xe=Math.min(Ne,et?0:nt),ot=Math.max(0,Ne-Xe-P);if(await Jo(Tr.id,{filing_status:"paid",reimbursed_amount:P,paid_date:ge,deductible_applied:Xe,user_coinsurance_payment:ot}),he){const vt=await Mi(he);tt(vt)}Sn(null),Dr(""),Cs(Bs()),alert("Claim marked as paid")}catch(P){console.error("[mark paid] error",P),alert("Error saving paid status")}},children:"Save"})]})]})}),Ui&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Wn(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:P=>P.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Medications Prescribed?"}),l.jsx("div",{className:"mt-2 text-sm text-slate-700 dark:text-slate-300",children:"Were any medications prescribed during this vet visit?"}),l.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>{Wn(!1),Si&&Dn(Si)},children:"No"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{if(Wn(!1),he&&C){const P=Bs(),{data:ge,error:Ne}=await kt.from("medications").select("*").eq("user_id",he).eq("pet_id",C.id).lte("start_date",P).or(`end_date.is.null,end_date.gte.${P}`);if(Ne)throw Ne;ni(Array.isArray(ge)?ge:[])}else ni([]);wr([]),ps(!0)}catch(P){console.error("[med question -> load meds] error",P),ni([]),ps(!0)}},children:"Yes"})]})]})}),_i&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>ps(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:P=>P.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Select Medications Prescribed"}),l.jsxs("div",{className:"mt-3 space-y-2 max-h-[50vh] overflow-y-auto",children:[Ni.length===0&&l.jsx("div",{className:"text-sm text-slate-600",children:"No active medications found"}),Ni.map(P=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors",children:[l.jsx("input",{type:"checkbox",checked:ki.includes(P.id),onChange:ge=>{const Ne=ge.target.checked;wr(Le=>Ne?[...Le,P.id]:Le.filter(qe=>qe!==P.id))},className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${ki.includes(P.id)?"bg-emerald-500 border-emerald-500":"bg-white border-gray-300"}`,children:ki.includes(P.id)&&l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:"text-sm font-medium",children:P.medication_name}),P.dosage&&l.jsx("div",{className:"text-xs text-slate-500",children:P.dosage})]})]},P.id))]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",className:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-700",onClick:()=>Yr(!0),children:"+ Add New Medication"})}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>ps(!1),children:"Cancel"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{Ua&&ki.length>0&&await Jo(Ua,{medication_ids:ki}),ps(!1),Ps("Medications saved ")}catch(P){console.error("[med select -> link meds] error",P),ps(!1),Ps("Medications saved ")}},children:"Confirm"})]})]})}),qa&&l.jsx(h1,{open:qa,onClose:()=>Yr(!1),onSaved:async P=>{try{if(he&&C){const ge=Bs(),{data:Ne}=await kt.from("medications").select("*").eq("user_id",he).eq("pet_id",C.id).lte("start_date",ge).or(`end_date.is.null,end_date.gte.${ge}`);ni(Array.isArray(Ne)?Ne:[]),P&&!ki.includes(P)&&wr(Le=>[...Le,P])}}catch{}},userId:he,pets:_,defaultPetId:C?.id||null}),zr&&he&&l.jsx(Gb,{claim:zr,pet:zr.pets||{},userId:he,onClose:()=>si(null),onSuccess:async P=>{if(console.log("[Auto-Submit] Success! Message ID:",P),si(null),he){const ge=await Mi(he);tt(ge)}Ps(" Claim submitted to insurance!")}}),l.jsx(Nb,{open:wi,onClose:()=>{as(!1),he&&ou(he).then(S).catch(()=>{})},userId:he||""}),Gr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Dn(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 bg-white p-0 overflow-hidden",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"p-6 bg-emerald-50 dark:bg-emerald-900/20 border-b border-emerald-200 dark:border-emerald-800 flex flex-col items-center text-center",children:[l.jsx("div",{className:"h-14 w-14 rounded-full bg-emerald-600 text-white flex items-center justify-center text-2xl shadow animate-pulse",children:""}),l.jsx("div",{className:"mt-3 text-lg font-semibold text-emerald-800 dark:text-emerald-200",children:"Vet Bill Saved Successfully!"}),l.jsx("div",{className:"mt-1 text-xs text-emerald-900/80 dark:text-emerald-300/80",children:"Your vet bill was saved. You can submit it to insurance when ready."})]}),l.jsxs("div",{className:"p-6 text-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Pet:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100 font-semibold",children:[Gr.petName," (",Gr.species,")"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Amount:"})," ",l.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-slate-100",children:Ls(Gr.amount||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Date:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Gr.serviceDate||""})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Insurance:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Gr.insurance||"Not Insured"})]}),Gr.insurance&&Gr.insurance.trim()!==""&&l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Filing Deadline:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[Gr.deadlineDate||""," (",Gr.deadlineDays," days)"]})]})]}),l.jsx("div",{className:"mt-5 flex justify-center",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 text-sm font-medium w-full sm:w-auto",onClick:async()=>{Dn(null),v(null),Ge(null),t(null),f(null),A(""),B(""),oe("insured");try{if(he){const P=await Mi(he);tt(P)}}catch{}Zt(!1)},children:"Done"})})]})]})})]})}function ew({mode:n,onSwitch:e}){const[t,s]=me.useState(""),[a,o]=me.useState(""),[u,d]=me.useState(!1),[f,p]=me.useState(null),[v,_]=me.useState(!1),[S,y]=me.useState(null),E=async C=>{C.preventDefault(),d(!0),p(null);try{try{console.log("[auth] handleSubmit start:",{mode:n,emailPreview:t.replace(/(.).+(@.+)/,"$1***$2")})}catch{}if(n==="signup"){const{data:L,error:A}=await kt.auth.signUp({email:t,password:a});try{console.log("[auth] signUp result:",{hasUser:!!L?.user,hasSession:!!L?.session,error:A||null})}catch{}if(A)throw A;y(t)}else{const{data:L,error:A}=await kt.auth.signInWithPassword({email:t,password:a});try{console.log("[auth] signInWithPassword result:",{hasUser:!!L?.user,hasSession:!!L?.session,error:A||null})}catch{}if(A)throw A;try{const{data:J}=await kt.auth.getSession();console.log("[auth] post-login getSession():",{hasSession:!!J?.session,userId:J?.session?.user?.id||null});const B=typeof window<"u"?window.localStorage?.getItem("pch.auth"):null;console.log("[auth] localStorage pch.auth present:",!!B)}catch{}}}catch(L){p(L?.message||"Authentication failed")}finally{d(!1)}};return l.jsxs("form",{onSubmit:E,className:"mt-2 space-y-3",children:[S&&l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:[l.jsx("div",{className:"font-medium",children:"Account created!"}),l.jsxs("div",{className:"text-[13px] mt-1",children:["Please check your email at ",l.jsx("span",{className:"font-mono",children:S})," to verify your account. You won't be able to log in until you confirm your email address."]})]}),n==="signup"?l.jsxs("div",{className:"text-center text-sm text-slate-700 dark:text-slate-200 mb-2",children:[l.jsx("div",{className:"font-medium",children:"Welcome! Create your account"}),l.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:" Save pets  Auto-fill bills  Access anywhere"})]}):l.jsx("div",{className:"text-center text-sm text-slate-700 dark:text-slate-200 mb-2",children:l.jsx("div",{className:"font-medium",children:"Welcome back!"})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-email",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Email"}),l.jsx("input",{id:"auth-email",type:"email",value:t,onChange:C=>s(C.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-password",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{id:"auth-password",type:v?"text":"password",value:a,onChange:C=>o(C.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 pr-10 text-sm",required:!0}),l.jsx("button",{type:"button",onClick:()=>_(C=>!C),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400","aria-label":v?"Hide password":"Show password",title:v?"Hide password":"Show password",children:v?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a21.87 21.87 0 0 1 5.06-7.94"}),l.jsx("path",{d:"M10.58 10.58a2 2 0 1 0 2.83 2.83"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 4.12A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8a21.87 21.87 0 0 1-2.16 3.19"})]}):l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),f&&l.jsx("p",{className:"text-xs text-rose-600",children:f}),l.jsx("button",{type:"submit",disabled:u,className:["w-full inline-flex items-center justify-center rounded-lg text-white px-4 py-2 text-sm font-medium disabled:opacity-60",n==="signup"?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-700 hover:bg-emerald-800"].join(" "),children:u?"Please wait":n==="login"?"Log In":"Sign Up"})]})}function tw({userId:n,userEmail:e,onClose:t}){const[s,a]=me.useState(e||"");return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:o=>o.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-userid",className:"block text-sm font-medium mb-1",children:"User ID"}),l.jsx("input",{id:"settings-userid",type:"text",value:n||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-email",className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{id:"settings-email",type:"email",value:s,onChange:o=>a(o.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]}),l.jsx("button",{onClick:t,className:"mt-6 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium",children:"Close"})]})})}function rw({userId:n,userEmail:e,onClose:t,onDefaultExpenseChange:s,onDefaultPeriodChange:a}){const[o,u]=me.useState(!1),[d,f]=me.useState(""),[p,v]=me.useState(""),[_,S]=me.useState(""),[y,E]=me.useState(""),[C,L]=me.useState(""),[A,J]=me.useState(""),[B,$]=me.useState(null);me.useEffect(()=>{n&&(async()=>{u(!0);try{const{data:de,error:H}=await kt.from("profiles").select("*").eq("id",n).single();if(H)throw H;de&&(f(de.full_name||""),v(de.phone?wb(de.phone):""),S(de.address||""),E(de.city||""),L(de.state||""),J(de.zip||""),$(de.signature||null))}catch(de){console.error("[settings load] error",de)}finally{u(!1)}})()},[n]);const oe=async()=>{if(n){u(!0);try{const de=Of(p),{error:H}=await kt.from("profiles").upsert({id:n,email:e||"",full_name:d,phone:de||null,address:_||null,city:y||null,state:C||null,zip:A||null});if(H)throw H;alert("Profile saved successfully!"),t()}catch(de){console.error("[save profile] error",de),alert("Error saving profile")}finally{u(!1)}}};return l.jsxs("section",{className:"mx-auto max-w-3xl mt-6 pb-12",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),l.jsx("button",{type:"button",onClick:t,className:"text-sm text-slate-600 dark:text-slate-300",children:"Close"})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Profile Information"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Manage your personal information"}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Email"}),l.jsx("input",{value:e||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:d,onChange:de=>f(de.target.value),placeholder:"John Smith",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Street Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:_,onChange:de=>S(de.target.value),placeholder:"123 Main St",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[l.jsxs("div",{className:"col-span-6",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:y,onChange:de=>E(de.target.value),placeholder:"San Francisco",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["State ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:C,onChange:de=>L(de.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm uppercase"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["ZIP ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:A,onChange:de=>J(de.target.value),placeholder:"94105",maxLength:10,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:p,onChange:de=>v(f1(de.target.value,p)),placeholder:"(123) 456-7890",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Yb,{userId:n,initialSignature:B,onSave:de=>$(de)})}),l.jsxs("div",{className:"mt-4 sticky bottom-4 bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-lg",children:[l.jsx("button",{type:"button",onClick:oe,disabled:o,className:"w-full inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 text-sm font-medium disabled:opacity-60 transition-colors",children:o?"Saving...":"Save Profile"}),l.jsxs("p",{className:"mt-2 text-xs text-center text-slate-500",children:[l.jsx("span",{className:"text-red-500",children:"*"})," Required fields for claim submission"]})]})]})}n2.createRoot(document.getElementById("root")).render(l.jsx(Ff.StrictMode,{children:l.jsx(Qb,{})}));export{Ar as _,nw as c,wu as g};
