(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var lw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _u(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function X1(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var Ah={exports:{}},lu={},Ph={exports:{}},lr={};var Z0;function Q1(){if(Z0)return lr;Z0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function k(K){return K===null||typeof K!="object"?null:(K=w&&K[w]||K["@@iterator"],typeof K=="function"?K:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,L={};function I(K,j,q){this.props=K,this.context=j,this.refs=L,this.updater=q||y}I.prototype.isReactComponent={},I.prototype.setState=function(K,j){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,j,"setState")},I.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function A(){}A.prototype=I.prototype;function G(K,j,q){this.props=K,this.context=j,this.refs=L,this.updater=q||y}var U=G.prototype=new A;U.constructor=G,P(U,I.prototype),U.isPureReactComponent=!0;var $=Array.isArray,le=Object.prototype.hasOwnProperty,he={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function re(K,j,q){var X,oe={},de=null,ve=null;if(j!=null)for(X in j.ref!==void 0&&(ve=j.ref),j.key!==void 0&&(de=""+j.key),j)le.call(j,X)&&!H.hasOwnProperty(X)&&(oe[X]=j[X]);var _e=arguments.length-2;if(_e===1)oe.children=q;else if(1<_e){for(var je=Array(_e),be=0;be<_e;be++)je[be]=arguments[be+2];oe.children=je}if(K&&K.defaultProps)for(X in _e=K.defaultProps,_e)oe[X]===void 0&&(oe[X]=_e[X]);return{$$typeof:n,type:K,key:de,ref:ve,props:oe,_owner:he.current}}function J(K,j){return{$$typeof:n,type:K.type,key:j,ref:K.ref,props:K.props,_owner:K._owner}}function W(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function T(K){var j={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(q){return j[q]})}var B=/\/+/g;function ie(K,j){return typeof K=="object"&&K!==null&&K.key!=null?T(""+K.key):j.toString(36)}function M(K,j,q,X,oe){var de=typeof K;(de==="undefined"||de==="boolean")&&(K=null);var ve=!1;if(K===null)ve=!0;else switch(de){case"string":case"number":ve=!0;break;case"object":switch(K.$$typeof){case n:case e:ve=!0}}if(ve)return ve=K,oe=oe(ve),K=X===""?"."+ie(ve,0):X,$(oe)?(q="",K!=null&&(q=K.replace(B,"$&/")+"/"),M(oe,j,q,"",function(be){return be})):oe!=null&&(W(oe)&&(oe=J(oe,q+(!oe.key||ve&&ve.key===oe.key?"":(""+oe.key).replace(B,"$&/")+"/")+K)),j.push(oe)),1;if(ve=0,X=X===""?".":X+":",$(K))for(var _e=0;_e<K.length;_e++){de=K[_e];var je=X+ie(de,_e);ve+=M(de,j,q,je,oe)}else if(je=k(K),typeof je=="function")for(K=je.call(K),_e=0;!(de=K.next()).done;)de=de.value,je=X+ie(de,_e++),ve+=M(de,j,q,je,oe);else if(de==="object")throw j=String(K),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return ve}function ee(K,j,q){if(K==null)return K;var X=[],oe=0;return M(K,X,"","",function(de){return j.call(q,de,oe++)}),X}function fe(K){if(K._status===-1){var j=K._result;j=j(),j.then(function(q){(K._status===0||K._status===-1)&&(K._status=1,K._result=q)},function(q){(K._status===0||K._status===-1)&&(K._status=2,K._result=q)}),K._status===-1&&(K._status=0,K._result=j)}if(K._status===1)return K._result.default;throw K._result}var ae={current:null},F={transition:null},se={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:F,ReactCurrentOwner:he};function ge(){throw Error("act(...) is not supported in production builds of React.")}return lr.Children={map:ee,forEach:function(K,j,q){ee(K,function(){j.apply(this,arguments)},q)},count:function(K){var j=0;return ee(K,function(){j++}),j},toArray:function(K){return ee(K,function(j){return j})||[]},only:function(K){if(!W(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},lr.Component=I,lr.Fragment=t,lr.Profiler=a,lr.PureComponent=G,lr.StrictMode=s,lr.Suspense=f,lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,lr.act=ge,lr.cloneElement=function(K,j,q){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var X=P({},K.props),oe=K.key,de=K.ref,ve=K._owner;if(j!=null){if(j.ref!==void 0&&(de=j.ref,ve=he.current),j.key!==void 0&&(oe=""+j.key),K.type&&K.type.defaultProps)var _e=K.type.defaultProps;for(je in j)le.call(j,je)&&!H.hasOwnProperty(je)&&(X[je]=j[je]===void 0&&_e!==void 0?_e[je]:j[je])}var je=arguments.length-2;if(je===1)X.children=q;else if(1<je){_e=Array(je);for(var be=0;be<je;be++)_e[be]=arguments[be+2];X.children=_e}return{$$typeof:n,type:K.type,key:oe,ref:de,props:X,_owner:ve}},lr.createContext=function(K){return K={$$typeof:u,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:o,_context:K},K.Consumer=K},lr.createElement=re,lr.createFactory=function(K){var j=re.bind(null,K);return j.type=K,j},lr.createRef=function(){return{current:null}},lr.forwardRef=function(K){return{$$typeof:d,render:K}},lr.isValidElement=W,lr.lazy=function(K){return{$$typeof:v,_payload:{_status:-1,_result:K},_init:fe}},lr.memo=function(K,j){return{$$typeof:m,type:K,compare:j===void 0?null:j}},lr.startTransition=function(K){var j=F.transition;F.transition={};try{K()}finally{F.transition=j}},lr.unstable_act=ge,lr.useCallback=function(K,j){return ae.current.useCallback(K,j)},lr.useContext=function(K){return ae.current.useContext(K)},lr.useDebugValue=function(){},lr.useDeferredValue=function(K){return ae.current.useDeferredValue(K)},lr.useEffect=function(K,j){return ae.current.useEffect(K,j)},lr.useId=function(){return ae.current.useId()},lr.useImperativeHandle=function(K,j,q){return ae.current.useImperativeHandle(K,j,q)},lr.useInsertionEffect=function(K,j){return ae.current.useInsertionEffect(K,j)},lr.useLayoutEffect=function(K,j){return ae.current.useLayoutEffect(K,j)},lr.useMemo=function(K,j){return ae.current.useMemo(K,j)},lr.useReducer=function(K,j,q){return ae.current.useReducer(K,j,q)},lr.useRef=function(K){return ae.current.useRef(K)},lr.useState=function(K){return ae.current.useState(K)},lr.useSyncExternalStore=function(K,j,q){return ae.current.useSyncExternalStore(K,j,q)},lr.useTransition=function(){return ae.current.useTransition()},lr.version="18.3.1",lr}var ep;function Mf(){return ep||(ep=1,Ph.exports=Q1()),Ph.exports}var tp;function Z1(){if(tp)return lu;tp=1;var n=Mf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},k=null,y=null;m!==void 0&&(k=""+m),f.key!==void 0&&(k=""+f.key),f.ref!==void 0&&(y=f.ref);for(v in f)s.call(f,v)&&!o.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:k,ref:y,props:w,_owner:a.current}}return lu.Fragment=t,lu.jsx=u,lu.jsxs=u,lu}var rp;function e2(){return rp||(rp=1,Ah.exports=Z1()),Ah.exports}var l=e2(),ue=Mf();const Uf=_u(ue);var ad={},Ch={exports:{}},ei={},Eh={exports:{}},Lh={};var np;function t2(){return np||(np=1,(function(n){function e(F,se){var ge=F.length;F.push(se);e:for(;0<ge;){var K=ge-1>>>1,j=F[K];if(0<a(j,se))F[K]=se,F[ge]=j,ge=K;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var se=F[0],ge=F.pop();if(ge!==se){F[0]=ge;e:for(var K=0,j=F.length,q=j>>>1;K<q;){var X=2*(K+1)-1,oe=F[X],de=X+1,ve=F[de];if(0>a(oe,ge))de<j&&0>a(ve,oe)?(F[K]=ve,F[de]=ge,K=de):(F[K]=oe,F[X]=ge,K=X);else if(de<j&&0>a(ve,ge))F[K]=ve,F[de]=ge,K=de;else break e}}return se}function a(F,se){var ge=F.sortIndex-se.sortIndex;return ge!==0?ge:F.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,k=3,y=!1,P=!1,L=!1,I=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(F){for(var se=t(m);se!==null;){if(se.callback===null)s(m);else if(se.startTime<=F)s(m),se.sortIndex=se.expirationTime,e(f,se);else break;se=t(m)}}function $(F){if(L=!1,U(F),!P)if(t(f)!==null)P=!0,fe(le);else{var se=t(m);se!==null&&ae($,se.startTime-F)}}function le(F,se){P=!1,L&&(L=!1,A(re),re=-1),y=!0;var ge=k;try{for(U(se),w=t(f);w!==null&&(!(w.expirationTime>se)||F&&!T());){var K=w.callback;if(typeof K=="function"){w.callback=null,k=w.priorityLevel;var j=K(w.expirationTime<=se);se=n.unstable_now(),typeof j=="function"?w.callback=j:w===t(f)&&s(f),U(se)}else s(f);w=t(f)}if(w!==null)var q=!0;else{var X=t(m);X!==null&&ae($,X.startTime-se),q=!1}return q}finally{w=null,k=ge,y=!1}}var he=!1,H=null,re=-1,J=5,W=-1;function T(){return!(n.unstable_now()-W<J)}function B(){if(H!==null){var F=n.unstable_now();W=F;var se=!0;try{se=H(!0,F)}finally{se?ie():(he=!1,H=null)}}else he=!1}var ie;if(typeof G=="function")ie=function(){G(B)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ee=M.port2;M.port1.onmessage=B,ie=function(){ee.postMessage(null)}}else ie=function(){I(B,0)};function fe(F){H=F,he||(he=!0,ie())}function ae(F,se){re=I(function(){F(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){P||y||(P=!0,fe(le))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return k},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(F){switch(k){case 1:case 2:case 3:var se=3;break;default:se=k}var ge=k;k=se;try{return F()}finally{k=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ge=k;k=F;try{return se()}finally{k=ge}},n.unstable_scheduleCallback=function(F,se,ge){var K=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?K+ge:K):ge=K,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ge+j,F={id:v++,callback:se,priorityLevel:F,startTime:ge,expirationTime:j,sortIndex:-1},ge>K?(F.sortIndex=ge,e(m,F),t(f)===null&&F===t(m)&&(L?(A(re),re=-1):L=!0,ae($,ge-K))):(F.sortIndex=j,e(f,F),P||y||(P=!0,fe(le))),F},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(F){var se=k;return function(){var ge=k;k=se;try{return F.apply(this,arguments)}finally{k=ge}}}})(Lh)),Lh}var sp;function r2(){return sp||(sp=1,Eh.exports=t2()),Eh.exports}var ip;function n2(){if(ip)return ei;ip=1;var n=Mf(),e=r2();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(a[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function k(r){return f.call(w,r)?!0:f.call(v,r)?!1:m.test(r)?w[r]=!0:(v[r]=!0,!1)}function y(r,i,c,p){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function P(r,i,c,p){if(i===null||typeof i>"u"||y(r,i,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function L(r,i,c,p,b,N,D){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=p,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=r,this.type=i,this.sanitizeURL=N,this.removeEmptyString=D}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){I[r]=new L(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];I[i]=new L(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){I[r]=new L(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){I[r]=new L(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){I[r]=new L(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){I[r]=new L(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){I[r]=new L(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){I[r]=new L(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){I[r]=new L(r,5,!1,r.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function G(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(A,G);I[i]=new L(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(A,G);I[i]=new L(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(A,G);I[i]=new L(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){I[r]=new L(r,1,!1,r.toLowerCase(),null,!1,!1)}),I.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){I[r]=new L(r,1,!1,r.toLowerCase(),null,!0,!0)});function U(r,i,c,p){var b=I.hasOwnProperty(i)?I[i]:null;(b!==null?b.type!==0:p||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,c,b,p)&&(c=null),p||b===null?k(i)&&(c===null?r.removeAttribute(i):r.setAttribute(i,""+c)):b.mustUseProperty?r[b.propertyName]=c===null?b.type===3?!1:"":c:(i=b.attributeName,p=b.attributeNamespace,c===null?r.removeAttribute(i):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,p?r.setAttributeNS(p,i,c):r.setAttribute(i,c))))}var $=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),he=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),T=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),F=Symbol.iterator;function se(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var ge=Object.assign,K;function j(r){if(K===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);K=i&&i[1]||""}return`
`+K+r}var q=!1;function X(r,i){if(!r||q)return"";q=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Ie){var p=Ie}Reflect.construct(r,[],i)}else{try{i.call()}catch(Ie){p=Ie}r.call(i.prototype)}else{try{throw Error()}catch(Ie){p=Ie}r()}}catch(Ie){if(Ie&&p&&typeof Ie.stack=="string"){for(var b=Ie.stack.split(`
`),N=p.stack.split(`
`),D=b.length-1,ce=N.length-1;1<=D&&0<=ce&&b[D]!==N[ce];)ce--;for(;1<=D&&0<=ce;D--,ce--)if(b[D]!==N[ce]){if(D!==1||ce!==1)do if(D--,ce--,0>ce||b[D]!==N[ce]){var ye=`
`+b[D].replace(" at new "," at ");return r.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",r.displayName)),ye}while(1<=D&&0<=ce);break}}}finally{q=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?j(r):""}function oe(r){switch(r.tag){case 5:return j(r.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return r=X(r.type,!1),r;case 11:return r=X(r.type.render,!1),r;case 1:return r=X(r.type,!0),r;default:return""}}function de(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case H:return"Fragment";case he:return"Portal";case J:return"Profiler";case re:return"StrictMode";case ie:return"Suspense";case M:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case T:return(r.displayName||"Context")+".Consumer";case W:return(r._context.displayName||"Context")+".Provider";case B:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ee:return i=r.displayName||null,i!==null?i:de(r.type)||"Memo";case fe:i=r._payload,r=r._init;try{return de(r(i))}catch{}}return null}function ve(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(i);case 8:return i===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function _e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function je(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function be(r){var i=je(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),p=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,N=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return b.call(this)},set:function(D){p=""+D,N.call(this,D)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function $e(r){r._valueTracker||(r._valueTracker=be(r))}function He(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),p="";return r&&(p=je(r)?r.checked?"true":"false":r.value),r=p,r!==c?(i.setValue(r),!0):!1}function Xe(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function rt(r,i){var c=i.checked;return ge({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Z(r,i){var c=i.defaultValue==null?"":i.defaultValue,p=i.checked!=null?i.checked:i.defaultChecked;c=_e(i.value!=null?i.value:c),r._wrapperState={initialChecked:p,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ze(r,i){i=i.checked,i!=null&&U(r,"checked",i,!1)}function Rt(r,i){Ze(r,i);var c=_e(i.value),p=i.type;if(c!=null)p==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(p==="submit"||p==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?We(r,i.type,c):i.hasOwnProperty("defaultValue")&&We(r,i.type,_e(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Tt(r,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var p=i.type;if(!(p!=="submit"&&p!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,c||i===r.value||(r.value=i),r.defaultValue=i}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function We(r,i,c){(i!=="number"||Xe(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var wt=Array.isArray;function st(r,i,c,p){if(r=r.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<r.length;c++)b=i.hasOwnProperty("$"+r[c].value),r[c].selected!==b&&(r[c].selected=b),b&&p&&(r[c].defaultSelected=!0)}else{for(c=""+_e(c),i=null,b=0;b<r.length;b++){if(r[b].value===c){r[b].selected=!0,p&&(r[b].defaultSelected=!0);return}i!==null||r[b].disabled||(i=r[b])}i!==null&&(i.selected=!0)}}function _t(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ge({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function xt(r,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(t(92));if(wt(c)){if(1<c.length)throw Error(t(93));c=c[0]}i=c}i==null&&(i=""),c=i}r._wrapperState={initialValue:_e(c)}}function Wt(r,i){var c=_e(i.value),p=_e(i.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),i.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),p!=null&&(r.defaultValue=""+p)}function St(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Mt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Mt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Zt,ft=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,p,b){MSApp.execUnsafeLocalFunction(function(){return r(i,c,p,b)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Zt=Zt||document.createElement("div"),Zt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Zt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Nt(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_r=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(r){_r.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),ut[i]=ut[r]})});function Jt(r,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||ut.hasOwnProperty(r)&&ut[r]?(""+i).trim():i+"px"}function Gt(r,i){r=r.style;for(var c in i)if(i.hasOwnProperty(c)){var p=c.indexOf("--")===0,b=Jt(c,i[c],p);c==="float"&&(c="cssFloat"),p?r.setProperty(c,b):r[c]=b}}var Me=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(r,i){if(i){if(Me[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ot(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function Et(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Pt=null,ur=null,$t=null;function Dt(r){if(r=Oo(r)){if(typeof Pt!="function")throw Error(t(280));var i=r.stateNode;i&&(i=ml(i),Pt(r.stateNode,r.type,i))}}function dr(r){ur?$t?$t.push(r):$t=[r]:ur=r}function ni(){if(ur){var r=ur,i=$t;if($t=ur=null,Dt(r),i)for(r=0;r<i.length;r++)Dt(i[r])}}function cn(r,i){return r(i)}function As(){}var vn=!1;function It(r,i,c){if(vn)return r(i,c);vn=!0;try{return cn(r,i,c)}finally{vn=!1,(ur!==null||$t!==null)&&(As(),ni())}}function Sn(r,i){var c=r.stateNode;if(c===null)return null;var p=ml(c);if(p===null)return null;c=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(t(231,i,typeof c));return c}var qn=!1;if(d)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){qn=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{qn=!1}function zn(r,i,c,p,b,N,D,ce,ye){var Ie=Array.prototype.slice.call(arguments,3);try{i.apply(c,Ie)}catch(Ge){this.onError(Ge)}}var ar=!1,Cr=null,Mr=!1,Ps=null,Ms={onError:function(r){ar=!0,Cr=r}};function ts(r,i,c,p,b,N,D,ce,ye){ar=!1,Cr=null,zn.apply(Ms,arguments)}function Us(r,i,c,p,b,N,D,ce,ye){if(ts.apply(this,arguments),ar){if(ar){var Ie=Cr;ar=!1,Cr=null}else throw Error(t(198));Mr||(Mr=!0,Ps=Ie)}}function Zr(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function Cs(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function $n(r){if(Zr(r)!==r)throw Error(t(188))}function xn(r){var i=r.alternate;if(!i){if(i=Zr(r),i===null)throw Error(t(188));return i!==r?null:r}for(var c=r,p=i;;){var b=c.return;if(b===null)break;var N=b.alternate;if(N===null){if(p=b.return,p!==null){c=p;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===c)return $n(b),r;if(N===p)return $n(b),i;N=N.sibling}throw Error(t(188))}if(c.return!==p.return)c=b,p=N;else{for(var D=!1,ce=b.child;ce;){if(ce===c){D=!0,c=b,p=N;break}if(ce===p){D=!0,p=b,c=N;break}ce=ce.sibling}if(!D){for(ce=N.child;ce;){if(ce===c){D=!0,c=N,p=b;break}if(ce===p){D=!0,p=N,c=b;break}ce=ce.sibling}if(!D)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?r:i}function rs(r){return r=xn(r),r!==null?bi(r):null}function bi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=bi(r);if(i!==null)return i;r=r.sibling}return null}var Bs=e.unstable_scheduleCallback,wi=e.unstable_cancelCallback,ma=e.unstable_shouldYield,_i=e.unstable_requestPaint,Nr=e.unstable_now,si=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,Wn=e.unstable_UserBlockingPriority,Es=e.unstable_NormalPriority,$a=e.unstable_LowPriority,ga=e.unstable_IdlePriority,Ni=null,Hn=null;function xo(r){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Ni,r,void 0,(r.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:$r,va=Math.log,xa=Math.LN2;function $r(r){return r>>>=0,r===0?32:31-(va(r)/xa|0)|0}var ki=64,In=4194304;function cs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Si(r,i){var c=r.pendingLanes;if(c===0)return 0;var p=0,b=r.suspendedLanes,N=r.pingedLanes,D=c&268435455;if(D!==0){var ce=D&~b;ce!==0?p=cs(ce):(N&=D,N!==0&&(p=cs(N)))}else D=c&~b,D!==0?p=cs(D):N!==0&&(p=cs(N));if(p===0)return 0;if(i!==0&&i!==p&&(i&b)===0&&(b=p&-p,N=i&-i,b>=N||b===16&&(N&4194240)!==0))return i;if((p&4)!==0&&(p|=c&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=p;0<i;)c=31-en(i),b=1<<c,p|=r[c],i&=~b;return p}function ns(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(r,i){for(var c=r.suspendedLanes,p=r.pingedLanes,b=r.expirationTimes,N=r.pendingLanes;0<N;){var D=31-en(N),ce=1<<D,ye=b[D];ye===-1?((ce&c)===0||(ce&p)!==0)&&(b[D]=ns(ce,i)):ye<=i&&(r.expiredLanes|=ce),N&=~ce}}function us(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ya(){var r=ki;return ki<<=1,(ki&4194240)===0&&(ki=64),r}function qs(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function zi(r,i,c){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-en(i),r[i]=c}function ds(r,i){var c=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var p=r.eventTimes;for(r=r.expirationTimes;0<c;){var b=31-en(c),N=1<<b;i[b]=0,p[b]=-1,r[b]=-1,c&=~N}}function ii(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var p=31-en(c),b=1<<p;b&i|r[p]&i&&(r[p]|=i),c&=~b}}var fr=0;function $i(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ji,Wa,yo,bo,ba,wa=!1,On=[],zs=null,Vn=null,hs=null,Wi=new Map,Ft=new Map,$s=[],nl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wo(r,i){switch(r){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":Wi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ft.delete(i.pointerId)}}function Dn(r,i,c,p,b,N){return r===null||r.nativeEvent!==N?(r={blockedOn:i,domEventName:c,eventSystemFlags:p,nativeEvent:N,targetContainers:[b]},i!==null&&(i=Oo(i),i!==null&&Wa(i)),r):(r.eventSystemFlags|=p,i=r.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),r)}function Ws(r,i,c,p,b){switch(i){case"focusin":return zs=Dn(zs,r,i,c,p,b),!0;case"dragenter":return Vn=Dn(Vn,r,i,c,p,b),!0;case"mouseover":return hs=Dn(hs,r,i,c,p,b),!0;case"pointerover":var N=b.pointerId;return Wi.set(N,Dn(Wi.get(N)||null,r,i,c,p,b)),!0;case"gotpointercapture":return N=b.pointerId,Ft.set(N,Dn(Ft.get(N)||null,r,i,c,p,b)),!0}return!1}function Ha(r){var i=Ia(r.target);if(i!==null){var c=Zr(i);if(c!==null){if(i=c.tag,i===13){if(i=Cs(c),i!==null){r.blockedOn=i,ba(r.priority,function(){yo(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function _a(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=Ai(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var p=new c.constructor(c.type,c);cr=p,c.target.dispatchEvent(p),cr=null}else return i=Oo(c),i!==null&&Wa(i),r.blockedOn=c,!1;i.shift()}return!0}function Hi(r,i,c){_a(r)&&c.delete(i)}function _o(){wa=!1,zs!==null&&_a(zs)&&(zs=null),Vn!==null&&_a(Vn)&&(Vn=null),hs!==null&&_a(hs)&&(hs=null),Wi.forEach(Hi),Ft.forEach(Hi)}function Hs(r,i){r.blockedOn===i&&(r.blockedOn=null,wa||(wa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_o)))}function Vi(r){function i(b){return Hs(b,r)}if(0<On.length){Hs(On[0],r);for(var c=1;c<On.length;c++){var p=On[c];p.blockedOn===r&&(p.blockedOn=null)}}for(zs!==null&&Hs(zs,r),Vn!==null&&Hs(Vn,r),hs!==null&&Hs(hs,r),Wi.forEach(i),Ft.forEach(i),c=0;c<$s.length;c++)p=$s[c],p.blockedOn===r&&(p.blockedOn=null);for(;0<$s.length&&(c=$s[0],c.blockedOn===null);)Ha(c),c.blockedOn===null&&$s.shift()}var tn=$.ReactCurrentBatchConfig,Vs=!0;function Gi(r,i,c,p){var b=fr,N=tn.transition;tn.transition=null;try{fr=1,Na(r,i,c,p)}finally{fr=b,tn.transition=N}}function Va(r,i,c,p){var b=fr,N=tn.transition;tn.transition=null;try{fr=4,Na(r,i,c,p)}finally{fr=b,tn.transition=N}}function Na(r,i,c,p){if(Vs){var b=Ai(r,i,c,p);if(b===null)hl(r,i,p,un,c),wo(r,p);else if(Ws(b,r,i,c,p))p.stopPropagation();else if(wo(r,p),i&4&&-1<nl.indexOf(r)){for(;b!==null;){var N=Oo(b);if(N!==null&&ji(N),N=Ai(r,i,c,p),N===null&&hl(r,i,p,un,c),N===b)break;b=N}b!==null&&p.stopPropagation()}else hl(r,i,p,null,c)}}var un=null;function Ai(r,i,c,p){if(un=null,r=Et(p),r=Ia(r),r!==null)if(i=Zr(r),i===null)r=null;else if(c=i.tag,c===13){if(r=Cs(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return un=r,null}function fs(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(si()){case qi:return 1;case Wn:return 4;case Es:case $a:return 16;case ga:return 536870912;default:return 16}default:return 16}}var C=null,me=null,Se=null;function Pe(){if(Se)return Se;var r,i=me,c=i.length,p,b="value"in C?C.value:C.textContent,N=b.length;for(r=0;r<c&&i[r]===b[r];r++);var D=c-r;for(p=1;p<=D&&i[c-p]===b[N-p];p++);return Se=b.slice(r,1<p?1-p:void 0)}function Ue(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ye(){return!0}function nt(){return!1}function Qe(r){function i(c,p,b,N,D){this._reactName=c,this._targetInst=b,this.type=p,this.nativeEvent=N,this.target=D,this.currentTarget=null;for(var ce in r)r.hasOwnProperty(ce)&&(c=r[ce],this[ce]=c?c(N):N[ce]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Ye:nt,this.isPropagationStopped=nt,this}return ge(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ye)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ye)},persist:function(){},isPersistent:Ye}),i}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},it=Qe(Ke),x=ge({},Ke,{view:0,detail:0}),E=Qe(x),Q,pe,we,Oe=ge({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==we&&(we&&r.type==="mousemove"?(Q=r.screenX-we.screenX,pe=r.screenY-we.screenY):pe=Q=0,we=r),Q)},movementY:function(r){return"movementY"in r?r.movementY:pe}}),ze=Qe(Oe),at=ge({},Oe,{dataTransfer:0}),pt=Qe(at),Ut=ge({},x,{relatedTarget:0}),Ht=Qe(Ut),kt=ge({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),mt=Qe(kt),sr=ge({},Ke,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),er=Qe(sr),kr=ge({},Ke,{data:0}),pr=Qe(kr),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ai={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yi(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=ai[r])?!!i[r]:!1}function Ga(){return Yi}var No=ge({},x,{key:function(r){if(r.key){var i=br[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ue(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ps[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(r){return r.type==="keypress"?Ue(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ue(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ka=Qe(No),Ya=ge({},Oe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sa=Qe(Ya),ja=ge({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),Rn=Qe(ja),Ka=ge({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ja=Qe(Ka),sl=ge({},Oe,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),il=Qe(sl),ss=[9,13,27,32],oi=d&&"CompositionEvent"in window,Pi=null;d&&"documentMode"in document&&(Pi=document.documentMode);var zl=d&&"TextEvent"in window&&!Pi,Ls=d&&(!oi||Pi&&8<Pi&&11>=Pi),Aa=" ",ko=!1;function So(r,i){switch(r){case"keyup":return ss.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ki(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Gs=!1;function Ts(r,i){switch(r){case"compositionend":return Ki(i);case"keypress":return i.which!==32?null:(ko=!0,Aa);case"textInput":return r=i.data,r===Aa&&ko?null:r;default:return null}}function Is(r,i){if(Gs)return r==="compositionend"||!oi&&So(r,i)?(r=Pe(),Se=me=C=null,Gs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ls&&i.locale!=="ko"?null:i.data;default:return null}}var Pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ci(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Pa[r.type]:i==="textarea"}function Ji(r,i,c,p){dr(p),i=Gl(i,"onChange"),0<i.length&&(c=new it("onChange","change",null,c,p),r.push({event:c,listeners:i}))}var Xi=null,Ei=null;function rn(r){ul(r,0)}function Xa(r){var i=oo(r);if(He(i))return r}function Li(r,i){if(r==="change")return i}var li=!1;if(d){var Qa;if(d){var Za="oninput"in document;if(!Za){var jo=document.createElement("div");jo.setAttribute("oninput","return;"),Za=typeof jo.oninput=="function"}Qa=Za}else Qa=!1;li=Qa&&(!document.documentMode||9<document.documentMode)}function Ao(){Xi&&(Xi.detachEvent("onpropertychange",Qi),Ei=Xi=null)}function Qi(r){if(r.propertyName==="value"&&Xa(Ei)){var i=[];Ji(i,Ei,r,Et(r)),It(rn,i)}}function Ca(r,i,c){r==="focusin"?(Ao(),Xi=i,Ei=c,Xi.attachEvent("onpropertychange",Qi)):r==="focusout"&&Ao()}function Ea(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Xa(Ei)}function eo(r,i){if(r==="click")return Xa(i)}function La(r,i){if(r==="input"||r==="change")return Xa(i)}function to(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Gr=typeof Object.is=="function"?Object.is:to;function ms(r,i){if(Gr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),p=Object.keys(i);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var b=c[p];if(!f.call(i,b)||!Gr(r[b],i[b]))return!1}return!0}function mr(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Sr(r,i){var c=mr(r);r=0;for(var p;c;){if(c.nodeType===3){if(p=r+c.textContent.length,r<=i&&p>=i)return{node:c,offset:i-r};r=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=mr(c)}}function Yr(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Yr(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function dn(){for(var r=window,i=Xe();i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=Xe(r.document)}return i}function ci(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function al(r){var i=dn(),c=r.focusedElem,p=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&Yr(c.ownerDocument.documentElement,c)){if(p!==null&&ci(c)){if(i=p.start,r=p.end,r===void 0&&(r=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(r,c.value.length);else if(r=(i=c.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var b=c.textContent.length,N=Math.min(p.start,b);p=p.end===void 0?N:Math.min(p.end,b),!r.extend&&N>p&&(b=p,p=N,N=b),b=Sr(c,N);var D=Sr(c,p);b&&D&&(r.rangeCount!==1||r.anchorNode!==b.node||r.anchorOffset!==b.offset||r.focusNode!==D.node||r.focusOffset!==D.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),r.removeAllRanges(),N>p?(r.addRange(i),r.extend(D.node,D.offset)):(i.setEnd(D.node,D.offset),r.addRange(i)))}}for(i=[],r=c;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)r=i[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Po=d&&"documentMode"in document&&11>=document.documentMode,Zi=null,$l=null,Co=null,Wl=!1;function Mc(r,i,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Wl||Zi==null||Zi!==Xe(p)||(p=Zi,"selectionStart"in p&&ci(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Co&&ms(Co,p)||(Co=p,p=Gl($l,"onSelect"),0<p.length&&(i=new it("onSelect","select",null,i,c),r.push({event:i,listeners:p}),i.target=Zi)))}function ol(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var ro={animationend:ol("Animation","AnimationEnd"),animationiteration:ol("Animation","AnimationIteration"),animationstart:ol("Animation","AnimationStart"),transitionend:ol("Transition","TransitionEnd")},no={},Uc={};d&&(Uc=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function ll(r){if(no[r])return no[r];if(!ro[r])return r;var i=ro[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Uc)return no[r]=i[c];return r}var Bc=ll("animationend"),qc=ll("animationiteration"),zc=ll("animationstart"),$c=ll("transitionend"),Wc=new Map,Hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(r,i){Wc.set(r,i),o(i,[r])}for(var Eo=0;Eo<Hc.length;Eo++){var is=Hc[Eo],Ys=is.toLowerCase(),Hl=is[0].toUpperCase()+is.slice(1);Ti(Ys,"on"+Hl)}Ti(Bc,"onAnimationEnd"),Ti(qc,"onAnimationIteration"),Ti(zc,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti($c,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ju=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function cl(r,i,c){var p=r.type||"unknown-event";r.currentTarget=c,Us(p,i,void 0,r),r.currentTarget=null}function ul(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var p=r[c],b=p.event;p=p.listeners;e:{var N=void 0;if(i)for(var D=p.length-1;0<=D;D--){var ce=p[D],ye=ce.instance,Ie=ce.currentTarget;if(ce=ce.listener,ye!==N&&b.isPropagationStopped())break e;cl(b,ce,Ie),N=ye}else for(D=0;D<p.length;D++){if(ce=p[D],ye=ce.instance,Ie=ce.currentTarget,ce=ce.listener,ye!==N&&b.isPropagationStopped())break e;cl(b,ce,Ie),N=ye}}}if(Mr)throw r=Ps,Mr=!1,Ps=null,r}function Er(r,i){var c=i[vs];c===void 0&&(c=i[vs]=new Set);var p=r+"__bubble";c.has(p)||(dl(i,r,2,!1),c.add(p))}function Vl(r,i,c){var p=0;i&&(p|=4),dl(c,r,p,i)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function so(r){if(!r[Lo]){r[Lo]=!0,s.forEach(function(c){c!=="selectionchange"&&(ju.has(c)||Vl(c,!1,r),Vl(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Lo]||(i[Lo]=!0,Vl("selectionchange",!1,i))}}function dl(r,i,c,p){switch(fs(i)){case 1:var b=Gi;break;case 4:b=Va;break;default:b=Na}c=b.bind(null,i,c,r),b=void 0,!qn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),p?b!==void 0?r.addEventListener(i,c,{capture:!0,passive:b}):r.addEventListener(i,c,!0):b!==void 0?r.addEventListener(i,c,{passive:b}):r.addEventListener(i,c,!1)}function hl(r,i,c,p,b){var N=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var ce=p.stateNode.containerInfo;if(ce===b||ce.nodeType===8&&ce.parentNode===b)break;if(D===4)for(D=p.return;D!==null;){var ye=D.tag;if((ye===3||ye===4)&&(ye=D.stateNode.containerInfo,ye===b||ye.nodeType===8&&ye.parentNode===b))return;D=D.return}for(;ce!==null;){if(D=Ia(ce),D===null)return;if(ye=D.tag,ye===5||ye===6){p=N=D;continue e}ce=ce.parentNode}}p=p.return}It(function(){var Ie=N,Ge=Et(c),Je=[];e:{var Ve=Wc.get(r);if(Ve!==void 0){var lt=it,yt=r;switch(r){case"keypress":if(Ue(c)===0)break e;case"keydown":case"keyup":lt=ka;break;case"focusin":yt="focus",lt=Ht;break;case"focusout":yt="blur",lt=Ht;break;case"beforeblur":case"afterblur":lt=Ht;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=ze;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=pt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Rn;break;case Bc:case qc:case zc:lt=mt;break;case $c:lt=Ja;break;case"scroll":lt=E;break;case"wheel":lt=il;break;case"copy":case"cut":case"paste":lt=er;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Sa}var At=(i&4)!==0,wn=!At&&r==="scroll",Ee=At?Ve!==null?Ve+"Capture":null:Ve;At=[];for(var ke=Ie,Te;ke!==null;){Te=ke;var et=Te.stateNode;if(Te.tag===5&&et!==null&&(Te=et,Ee!==null&&(et=Sn(ke,Ee),et!=null&&At.push(fl(ke,et,Te)))),wn)break;ke=ke.return}0<At.length&&(Ve=new lt(Ve,yt,null,c,Ge),Je.push({event:Ve,listeners:At}))}}if((i&7)===0){e:{if(Ve=r==="mouseover"||r==="pointerover",lt=r==="mouseout"||r==="pointerout",Ve&&c!==cr&&(yt=c.relatedTarget||c.fromElement)&&(Ia(yt)||yt[Gn]))break e;if((lt||Ve)&&(Ve=Ge.window===Ge?Ge:(Ve=Ge.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,lt?(yt=c.relatedTarget||c.toElement,lt=Ie,yt=yt?Ia(yt):null,yt!==null&&(wn=Zr(yt),yt!==wn||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(lt=null,yt=Ie),lt!==yt)){if(At=ze,et="onMouseLeave",Ee="onMouseEnter",ke="mouse",(r==="pointerout"||r==="pointerover")&&(At=Sa,et="onPointerLeave",Ee="onPointerEnter",ke="pointer"),wn=lt==null?Ve:oo(lt),Te=yt==null?Ve:oo(yt),Ve=new At(et,ke+"leave",lt,c,Ge),Ve.target=wn,Ve.relatedTarget=Te,et=null,Ia(Ge)===Ie&&(At=new At(Ee,ke+"enter",yt,c,Ge),At.target=Te,At.relatedTarget=wn,et=At),wn=et,lt&&yt)t:{for(At=lt,Ee=yt,ke=0,Te=At;Te;Te=io(Te))ke++;for(Te=0,et=Ee;et;et=io(et))Te++;for(;0<ke-Te;)At=io(At),ke--;for(;0<Te-ke;)Ee=io(Ee),Te--;for(;ke--;){if(At===Ee||Ee!==null&&At===Ee.alternate)break t;At=io(At),Ee=io(Ee)}At=null}else At=null;lt!==null&&Au(Je,Ve,lt,At,!1),yt!==null&&wn!==null&&Au(Je,wn,yt,At,!0)}}e:{if(Ve=Ie?oo(Ie):window,lt=Ve.nodeName&&Ve.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Ve.type==="file")var Lt=Li;else if(Ci(Ve))if(li)Lt=La;else{Lt=Ea;var Bt=Ca}else(lt=Ve.nodeName)&&lt.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(Lt=eo);if(Lt&&(Lt=Lt(r,Ie))){Ji(Je,Lt,c,Ge);break e}Bt&&Bt(r,Ve,Ie),r==="focusout"&&(Bt=Ve._wrapperState)&&Bt.controlled&&Ve.type==="number"&&We(Ve,"number",Ve.value)}switch(Bt=Ie?oo(Ie):window,r){case"focusin":(Ci(Bt)||Bt.contentEditable==="true")&&(Zi=Bt,$l=Ie,Co=null);break;case"focusout":Co=$l=Zi=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,Mc(Je,c,Ge);break;case"selectionchange":if(Po)break;case"keydown":case"keyup":Mc(Je,c,Ge)}var qt;if(oi)e:{switch(r){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Gs?So(r,c)&&(Yt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Yt="onCompositionStart");Yt&&(Ls&&c.locale!=="ko"&&(Gs||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Gs&&(qt=Pe()):(C=Ge,me="value"in C?C.value:C.textContent,Gs=!0)),Bt=Gl(Ie,Yt),0<Bt.length&&(Yt=new pr(Yt,r,null,c,Ge),Je.push({event:Yt,listeners:Bt}),qt?Yt.data=qt:(qt=Ki(c),qt!==null&&(Yt.data=qt)))),(qt=zl?Ts(r,c):Is(r,c))&&(Ie=Gl(Ie,"onBeforeInput"),0<Ie.length&&(Ge=new pr("onBeforeInput","beforeinput",null,c,Ge),Je.push({event:Ge,listeners:Ie}),Ge.data=qt))}ul(Je,i)})}function fl(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Gl(r,i){for(var c=i+"Capture",p=[];r!==null;){var b=r,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=Sn(r,c),N!=null&&p.unshift(fl(r,N,b)),N=Sn(r,i),N!=null&&p.push(fl(r,N,b))),r=r.return}return p}function io(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Au(r,i,c,p,b){for(var N=i._reactName,D=[];c!==null&&c!==p;){var ce=c,ye=ce.alternate,Ie=ce.stateNode;if(ye!==null&&ye===p)break;ce.tag===5&&Ie!==null&&(ce=Ie,b?(ye=Sn(c,N),ye!=null&&D.unshift(fl(c,ye,ce))):b||(ye=Sn(c,N),ye!=null&&D.push(fl(c,ye,ce)))),c=c.return}D.length!==0&&r.push({event:i,listeners:D})}var qd=/\r\n?/g,zd=/\u0000|\uFFFD/g;function Pu(r){return(typeof r=="string"?r:""+r).replace(qd,`
`).replace(zd,"")}function Yl(r,i,c){if(i=Pu(i),Pu(r)!==i&&c)throw Error(t(425))}function To(){}var pl=null,ao=null;function Vc(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gc=typeof setTimeout=="function"?setTimeout:void 0,Cu=typeof clearTimeout=="function"?clearTimeout:void 0,Eu=typeof Promise=="function"?Promise:void 0,$d=typeof queueMicrotask=="function"?queueMicrotask:typeof Eu<"u"?function(r){return Eu.resolve(null).then(r).catch(Wd)}:Gc;function Wd(r){setTimeout(function(){throw r})}function Yc(r,i){var c=i,p=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(p===0){r.removeChild(b),Vi(i);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=b}while(c);Vi(i)}function as(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Ks(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}var gs=Math.random().toString(36).slice(2),Ii="__reactFiber$"+gs,Io="__reactProps$"+gs,Gn="__reactContainer$"+gs,vs="__reactEvents$"+gs,Hd="__reactListeners$"+gs,Vd="__reactHandles$"+gs;function Ia(r){var i=r[Ii];if(i)return i;for(var c=r.parentNode;c;){if(i=c[Gn]||c[Ii]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=Ks(r);r!==null;){if(c=r[Ii])return c;r=Ks(r)}return i}r=c,c=r.parentNode}return null}function Oo(r){return r=r[Ii]||r[Gn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function oo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function ml(r){return r[Io]||null}var Kc=[],ea=-1;function ui(r){return{current:r}}function wr(r){0>ea||(r.current=Kc[ea],Kc[ea]=null,ea--)}function jr(r,i){ea++,Kc[ea]=r.current,r.current=i}var Oa={},Fn=ui(Oa),xs=ui(!1),lo=Oa;function Do(r,i){var c=r.type.contextTypes;if(!c)return Oa;var p=r.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===i)return p.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in c)b[N]=i[N];return p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=b),b}function ys(r){return r=r.childContextTypes,r!=null}function Kl(){wr(xs),wr(Fn)}function Lu(r,i,c){if(Fn.current!==Oa)throw Error(t(168));jr(Fn,i),jr(xs,c)}function Jc(r,i,c){var p=r.stateNode;if(i=i.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var b in p)if(!(b in i))throw Error(t(108,ve(r)||"Unknown",b));return ge({},c,p)}function co(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oa,lo=Fn.current,jr(Fn,r),jr(xs,xs.current),!0}function Tu(r,i,c){var p=r.stateNode;if(!p)throw Error(t(169));c?(r=Jc(r,i,lo),p.__reactInternalMemoizedMergedChildContext=r,wr(xs),wr(Fn),jr(Fn,r)):wr(xs),jr(xs,c)}var ta=null,gl=!1,h=!1;function g(r){ta===null?ta=[r]:ta.push(r)}function _(r){gl=!0,g(r)}function S(){if(!h&&ta!==null){h=!0;var r=0,i=fr;try{var c=ta;for(fr=1;r<c.length;r++){var p=c[r];do p=p(!0);while(p!==null)}ta=null,gl=!1}catch(b){throw ta!==null&&(ta=ta.slice(r+1)),Bs(qi,S),b}finally{fr=i,h=!1}}return null}var O=[],R=0,z=null,V=0,Y=[],te=0,xe=null,Ce=1,ne="";function Ne(r,i){O[R++]=V,O[R++]=z,z=r,V=i}function Ae(r,i,c){Y[te++]=Ce,Y[te++]=ne,Y[te++]=xe,xe=r;var p=Ce;r=ne;var b=32-en(p)-1;p&=~(1<<b),c+=1;var N=32-en(i)+b;if(30<N){var D=b-b%5;N=(p&(1<<D)-1).toString(32),p>>=D,b-=D,Ce=1<<32-en(i)+b|c<<b|p,ne=N+r}else Ce=1<<N|c<<b|p,ne=r}function Fe(r){r.return!==null&&(Ne(r,1),Ae(r,1,0))}function Le(r){for(;r===z;)z=O[--R],O[R]=null,V=O[--R],O[R]=null;for(;r===xe;)xe=Y[--te],Y[te]=null,ne=Y[--te],Y[te]=null,Ce=Y[--te],Y[te]=null}var De=null,Re=null,Be=!1,qe=null;function Ct(r,i){var c=Mi(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=r,i=r.deletions,i===null?(r.deletions=[c],r.flags|=16):i.push(c)}function dt(r,i){switch(r.tag){case 5:var c=r.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,De=r,Re=as(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,De=r,Re=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=xe!==null?{id:Ce,overflow:ne}:null,r.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=Mi(18,null,null,0),c.stateNode=i,c.return=r,r.child=c,De=r,Re=null,!0):!1;default:return!1}}function Xt(r){return(r.mode&1)!==0&&(r.flags&128)===0}function vt(r){if(Be){var i=Re;if(i){var c=i;if(!dt(r,i)){if(Xt(r))throw Error(t(418));i=as(c.nextSibling);var p=De;i&&dt(r,i)?Ct(p,c):(r.flags=r.flags&-4097|2,Be=!1,De=r)}}else{if(Xt(r))throw Error(t(418));r.flags=r.flags&-4097|2,Be=!1,De=r}}}function or(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;De=r}function Kr(r){if(r!==De)return!1;if(!Be)return or(r),Be=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Vc(r.type,r.memoizedProps)),i&&(i=Re)){if(Xt(r))throw tr(),Error(t(418));for(;i;)Ct(r,i),i=as(i.nextSibling)}if(or(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(i===0){Re=as(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}r=r.nextSibling}Re=null}}else Re=De?as(r.stateNode.nextSibling):null;return!0}function tr(){for(var r=Re;r;)r=as(r.nextSibling)}function ht(){Re=De=null,Be=!1}function tt(r){qe===null?qe=[r]:qe.push(r)}var nn=$.ReactCurrentBatchConfig;function Vt(r,i,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,r));var b=p,N=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===N?i.ref:(i=function(D){var ce=b.refs;D===null?delete ce[N]:ce[N]=D},i._stringRef=N,i)}if(typeof r!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,r))}return r}function ir(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Or(r){var i=r._init;return i(r._payload)}function An(r){function i(Ee,ke){if(r){var Te=Ee.deletions;Te===null?(Ee.deletions=[ke],Ee.flags|=16):Te.push(ke)}}function c(Ee,ke){if(!r)return null;for(;ke!==null;)i(Ee,ke),ke=ke.sibling;return null}function p(Ee,ke){for(Ee=new Map;ke!==null;)ke.key!==null?Ee.set(ke.key,ke):Ee.set(ke.index,ke),ke=ke.sibling;return Ee}function b(Ee,ke){return Ee=Ho(Ee,ke),Ee.index=0,Ee.sibling=null,Ee}function N(Ee,ke,Te){return Ee.index=Te,r?(Te=Ee.alternate,Te!==null?(Te=Te.index,Te<ke?(Ee.flags|=2,ke):Te):(Ee.flags|=2,ke)):(Ee.flags|=1048576,ke)}function D(Ee){return r&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ce(Ee,ke,Te,et){return ke===null||ke.tag!==6?(ke=wh(Te,Ee.mode,et),ke.return=Ee,ke):(ke=b(ke,Te),ke.return=Ee,ke)}function ye(Ee,ke,Te,et){var Lt=Te.type;return Lt===H?Ge(Ee,ke,Te.props.children,et,Te.key):ke!==null&&(ke.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===fe&&Or(Lt)===ke.type)?(et=b(ke,Te.props),et.ref=Vt(Ee,ke,Te),et.return=Ee,et):(et=Qu(Te.type,Te.key,Te.props,null,Ee.mode,et),et.ref=Vt(Ee,ke,Te),et.return=Ee,et)}function Ie(Ee,ke,Te,et){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Te.containerInfo||ke.stateNode.implementation!==Te.implementation?(ke=_h(Te,Ee.mode,et),ke.return=Ee,ke):(ke=b(ke,Te.children||[]),ke.return=Ee,ke)}function Ge(Ee,ke,Te,et,Lt){return ke===null||ke.tag!==7?(ke=kl(Te,Ee.mode,et,Lt),ke.return=Ee,ke):(ke=b(ke,Te),ke.return=Ee,ke)}function Je(Ee,ke,Te){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=wh(""+ke,Ee.mode,Te),ke.return=Ee,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case le:return Te=Qu(ke.type,ke.key,ke.props,null,Ee.mode,Te),Te.ref=Vt(Ee,null,ke),Te.return=Ee,Te;case he:return ke=_h(ke,Ee.mode,Te),ke.return=Ee,ke;case fe:var et=ke._init;return Je(Ee,et(ke._payload),Te)}if(wt(ke)||se(ke))return ke=kl(ke,Ee.mode,Te,null),ke.return=Ee,ke;ir(Ee,ke)}return null}function Ve(Ee,ke,Te,et){var Lt=ke!==null?ke.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Lt!==null?null:ce(Ee,ke,""+Te,et);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case le:return Te.key===Lt?ye(Ee,ke,Te,et):null;case he:return Te.key===Lt?Ie(Ee,ke,Te,et):null;case fe:return Lt=Te._init,Ve(Ee,ke,Lt(Te._payload),et)}if(wt(Te)||se(Te))return Lt!==null?null:Ge(Ee,ke,Te,et,null);ir(Ee,Te)}return null}function lt(Ee,ke,Te,et,Lt){if(typeof et=="string"&&et!==""||typeof et=="number")return Ee=Ee.get(Te)||null,ce(ke,Ee,""+et,Lt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case le:return Ee=Ee.get(et.key===null?Te:et.key)||null,ye(ke,Ee,et,Lt);case he:return Ee=Ee.get(et.key===null?Te:et.key)||null,Ie(ke,Ee,et,Lt);case fe:var Bt=et._init;return lt(Ee,ke,Te,Bt(et._payload),Lt)}if(wt(et)||se(et))return Ee=Ee.get(Te)||null,Ge(ke,Ee,et,Lt,null);ir(ke,et)}return null}function yt(Ee,ke,Te,et){for(var Lt=null,Bt=null,qt=ke,Yt=ke=0,Qn=null;qt!==null&&Yt<Te.length;Yt++){qt.index>Yt?(Qn=qt,qt=null):Qn=qt.sibling;var yr=Ve(Ee,qt,Te[Yt],et);if(yr===null){qt===null&&(qt=Qn);break}r&&qt&&yr.alternate===null&&i(Ee,qt),ke=N(yr,ke,Yt),Bt===null?Lt=yr:Bt.sibling=yr,Bt=yr,qt=Qn}if(Yt===Te.length)return c(Ee,qt),Be&&Ne(Ee,Yt),Lt;if(qt===null){for(;Yt<Te.length;Yt++)qt=Je(Ee,Te[Yt],et),qt!==null&&(ke=N(qt,ke,Yt),Bt===null?Lt=qt:Bt.sibling=qt,Bt=qt);return Be&&Ne(Ee,Yt),Lt}for(qt=p(Ee,qt);Yt<Te.length;Yt++)Qn=lt(qt,Ee,Yt,Te[Yt],et),Qn!==null&&(r&&Qn.alternate!==null&&qt.delete(Qn.key===null?Yt:Qn.key),ke=N(Qn,ke,Yt),Bt===null?Lt=Qn:Bt.sibling=Qn,Bt=Qn);return r&&qt.forEach(function(Vo){return i(Ee,Vo)}),Be&&Ne(Ee,Yt),Lt}function At(Ee,ke,Te,et){var Lt=se(Te);if(typeof Lt!="function")throw Error(t(150));if(Te=Lt.call(Te),Te==null)throw Error(t(151));for(var Bt=Lt=null,qt=ke,Yt=ke=0,Qn=null,yr=Te.next();qt!==null&&!yr.done;Yt++,yr=Te.next()){qt.index>Yt?(Qn=qt,qt=null):Qn=qt.sibling;var Vo=Ve(Ee,qt,yr.value,et);if(Vo===null){qt===null&&(qt=Qn);break}r&&qt&&Vo.alternate===null&&i(Ee,qt),ke=N(Vo,ke,Yt),Bt===null?Lt=Vo:Bt.sibling=Vo,Bt=Vo,qt=Qn}if(yr.done)return c(Ee,qt),Be&&Ne(Ee,Yt),Lt;if(qt===null){for(;!yr.done;Yt++,yr=Te.next())yr=Je(Ee,yr.value,et),yr!==null&&(ke=N(yr,ke,Yt),Bt===null?Lt=yr:Bt.sibling=yr,Bt=yr);return Be&&Ne(Ee,Yt),Lt}for(qt=p(Ee,qt);!yr.done;Yt++,yr=Te.next())yr=lt(qt,Ee,Yt,yr.value,et),yr!==null&&(r&&yr.alternate!==null&&qt.delete(yr.key===null?Yt:yr.key),ke=N(yr,ke,Yt),Bt===null?Lt=yr:Bt.sibling=yr,Bt=yr);return r&&qt.forEach(function(J1){return i(Ee,J1)}),Be&&Ne(Ee,Yt),Lt}function wn(Ee,ke,Te,et){if(typeof Te=="object"&&Te!==null&&Te.type===H&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case le:e:{for(var Lt=Te.key,Bt=ke;Bt!==null;){if(Bt.key===Lt){if(Lt=Te.type,Lt===H){if(Bt.tag===7){c(Ee,Bt.sibling),ke=b(Bt,Te.props.children),ke.return=Ee,Ee=ke;break e}}else if(Bt.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===fe&&Or(Lt)===Bt.type){c(Ee,Bt.sibling),ke=b(Bt,Te.props),ke.ref=Vt(Ee,Bt,Te),ke.return=Ee,Ee=ke;break e}c(Ee,Bt);break}else i(Ee,Bt);Bt=Bt.sibling}Te.type===H?(ke=kl(Te.props.children,Ee.mode,et,Te.key),ke.return=Ee,Ee=ke):(et=Qu(Te.type,Te.key,Te.props,null,Ee.mode,et),et.ref=Vt(Ee,ke,Te),et.return=Ee,Ee=et)}return D(Ee);case he:e:{for(Bt=Te.key;ke!==null;){if(ke.key===Bt)if(ke.tag===4&&ke.stateNode.containerInfo===Te.containerInfo&&ke.stateNode.implementation===Te.implementation){c(Ee,ke.sibling),ke=b(ke,Te.children||[]),ke.return=Ee,Ee=ke;break e}else{c(Ee,ke);break}else i(Ee,ke);ke=ke.sibling}ke=_h(Te,Ee.mode,et),ke.return=Ee,Ee=ke}return D(Ee);case fe:return Bt=Te._init,wn(Ee,ke,Bt(Te._payload),et)}if(wt(Te))return yt(Ee,ke,Te,et);if(se(Te))return At(Ee,ke,Te,et);ir(Ee,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ke!==null&&ke.tag===6?(c(Ee,ke.sibling),ke=b(ke,Te),ke.return=Ee,Ee=ke):(c(Ee,ke),ke=wh(Te,Ee.mode,et),ke.return=Ee,Ee=ke),D(Ee)):c(Ee,ke)}return wn}var hn=An(!0),Hr=An(!1),yn=ui(null),Pn=null,Ur=null,hr=null;function gr(){hr=Ur=Pn=null}function Br(r){var i=yn.current;wr(yn),r._currentValue=i}function vr(r,i,c){for(;r!==null;){var p=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),r===c)break;r=r.return}}function Jr(r,i){Pn=r,hr=Ur=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Xs=!0),r.firstContext=null)}function Xr(r){var i=r._currentValue;if(hr!==r)if(r={context:r,memoizedValue:i,next:null},Ur===null){if(Pn===null)throw Error(t(308));Ur=r,Pn.dependencies={lanes:0,firstContext:r}}else Ur=Ur.next=r;return i}var Lr=null;function Yn(r){Lr===null?Lr=[r]:Lr.push(r)}function Ar(r,i,c,p){var b=i.interleaved;return b===null?(c.next=c,Yn(i)):(c.next=b.next,b.next=c),i.interleaved=c,Tr(r,p)}function Tr(r,i){r.lanes|=i;var c=r.alternate;for(c!==null&&(c.lanes|=i),c=r,r=r.return;r!==null;)r.childLanes|=i,c=r.alternate,c!==null&&(c.childLanes|=i),c=r,r=r.return;return c.tag===3?c.stateNode:null}var fn=!1;function Mn(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bs(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function sn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function an(r,i,c){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(xr&2)!==0){var b=p.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),p.pending=i,Tr(r,c)}return b=p.interleaved,b===null?(i.next=i,Yn(p)):(i.next=b.next,b.next=i),p.interleaved=i,Tr(r,c)}function Kn(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var p=i.lanes;p&=r.pendingLanes,c|=p,i.lanes=c,ii(r,c)}}function Ir(r,i){var c=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var b=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var D={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};N===null?b=N=D:N=N.next=D,c=c.next}while(c!==null);N===null?b=N=i:N=N.next=i}else b=N=i;c={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:p.shared,effects:p.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}function Jn(r,i,c,p){var b=r.updateQueue;fn=!1;var N=b.firstBaseUpdate,D=b.lastBaseUpdate,ce=b.shared.pending;if(ce!==null){b.shared.pending=null;var ye=ce,Ie=ye.next;ye.next=null,D===null?N=Ie:D.next=Ie,D=ye;var Ge=r.alternate;Ge!==null&&(Ge=Ge.updateQueue,ce=Ge.lastBaseUpdate,ce!==D&&(ce===null?Ge.firstBaseUpdate=Ie:ce.next=Ie,Ge.lastBaseUpdate=ye))}if(N!==null){var Je=b.baseState;D=0,Ge=Ie=ye=null,ce=N;do{var Ve=ce.lane,lt=ce.eventTime;if((p&Ve)===Ve){Ge!==null&&(Ge=Ge.next={eventTime:lt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var yt=r,At=ce;switch(Ve=i,lt=c,At.tag){case 1:if(yt=At.payload,typeof yt=="function"){Je=yt.call(lt,Je,Ve);break e}Je=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=At.payload,Ve=typeof yt=="function"?yt.call(lt,Je,Ve):yt,Ve==null)break e;Je=ge({},Je,Ve);break e;case 2:fn=!0}}ce.callback!==null&&ce.lane!==0&&(r.flags|=64,Ve=b.effects,Ve===null?b.effects=[ce]:Ve.push(ce))}else lt={eventTime:lt,lane:Ve,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ge===null?(Ie=Ge=lt,ye=Je):Ge=Ge.next=lt,D|=Ve;if(ce=ce.next,ce===null){if(ce=b.shared.pending,ce===null)break;Ve=ce,ce=Ve.next,Ve.next=null,b.lastBaseUpdate=Ve,b.shared.pending=null}}while(!0);if(Ge===null&&(ye=Je),b.baseState=ye,b.firstBaseUpdate=Ie,b.lastBaseUpdate=Ge,i=b.shared.interleaved,i!==null){b=i;do D|=b.lane,b=b.next;while(b!==i)}else N===null&&(b.shared.lanes=0);bl|=D,r.lanes=D,r.memoizedState=Je}}function Js(r,i,c){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var p=r[i],b=p.callback;if(b!==null){if(p.callback=null,p=c,typeof b!="function")throw Error(t(191,b));b.call(p)}}}var di={},Cn=ui(di),on=ui(di),Da=ui(di);function ra(r){if(r===di)throw Error(t(174));return r}function Ro(r,i){switch(jr(Da,i),jr(on,r),jr(Cn,di),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Qt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Qt(i,r)}wr(Cn),jr(Cn,i)}function Oi(){wr(Cn),wr(on),wr(Da)}function Iu(r){ra(Da.current);var i=ra(Cn.current),c=Qt(i,r.type);i!==c&&(jr(on,r),jr(Cn,c))}function Xc(r){on.current===r&&(wr(Cn),wr(on))}var Dr=ui(0);function hi(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Qc=[];function Zc(){for(var r=0;r<Qc.length;r++)Qc[r]._workInProgressVersionPrimary=null;Qc.length=0}var Jl=$.ReactCurrentDispatcher,Xl=$.ReactCurrentBatchConfig,Di=0,qr=null,pn=null,ln=null,Fo=!1,na=!1,Mo=0,Gd=0;function bn(){throw Error(t(321))}function Ql(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Gr(r[c],i[c]))return!1;return!0}function vl(r,i,c,p,b,N){if(Di=N,qr=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Jl.current=r===null||r.memoizedState===null?_1:N1,r=c(p,b),na){N=0;do{if(na=!1,Mo=0,25<=N)throw Error(t(301));N+=1,ln=pn=null,i.updateQueue=null,Jl.current=k1,r=c(p,b)}while(na)}if(Jl.current=Mu,i=pn!==null&&pn.next!==null,Di=0,ln=pn=qr=null,Fo=!1,i)throw Error(t(300));return r}function Ri(){var r=Mo!==0;return Mo=0,r}function fi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?qr.memoizedState=ln=r:ln=ln.next=r,ln}function Os(){if(pn===null){var r=qr.alternate;r=r!==null?r.memoizedState:null}else r=pn.next;var i=ln===null?qr.memoizedState:ln.next;if(i!==null)ln=i,pn=r;else{if(r===null)throw Error(t(310));pn=r,r={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},ln===null?qr.memoizedState=ln=r:ln=ln.next=r}return ln}function xl(r,i){return typeof i=="function"?i(r):i}function Zl(r){var i=Os(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var p=pn,b=p.baseQueue,N=c.pending;if(N!==null){if(b!==null){var D=b.next;b.next=N.next,N.next=D}p.baseQueue=b=N,c.pending=null}if(b!==null){N=b.next,p=p.baseState;var ce=D=null,ye=null,Ie=N;do{var Ge=Ie.lane;if((Di&Ge)===Ge)ye!==null&&(ye=ye.next={lane:0,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),p=Ie.hasEagerState?Ie.eagerState:r(p,Ie.action);else{var Je={lane:Ge,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null};ye===null?(ce=ye=Je,D=p):ye=ye.next=Je,qr.lanes|=Ge,bl|=Ge}Ie=Ie.next}while(Ie!==null&&Ie!==N);ye===null?D=p:ye.next=ce,Gr(p,i.memoizedState)||(Xs=!0),i.memoizedState=p,i.baseState=D,i.baseQueue=ye,c.lastRenderedState=p}if(r=c.interleaved,r!==null){b=r;do N=b.lane,qr.lanes|=N,bl|=N,b=b.next;while(b!==r)}else b===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ra(r){var i=Os(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var p=c.dispatch,b=c.pending,N=i.memoizedState;if(b!==null){c.pending=null;var D=b=b.next;do N=r(N,D.action),D=D.next;while(D!==b);Gr(N,i.memoizedState)||(Xs=!0),i.memoizedState=N,i.baseQueue===null&&(i.baseState=N),c.lastRenderedState=N}return[N,p]}function Ou(){}function eu(r,i){var c=qr,p=Os(),b=i(),N=!Gr(p.memoizedState,b);if(N&&(p.memoizedState=b,Xs=!0),p=p.queue,rc(Ru.bind(null,c,p,r),[r]),p.getSnapshot!==i||N||ln!==null&&ln.memoizedState.tag&1){if(c.flags|=2048,Ds(9,tu.bind(null,c,p,b,i),void 0,null),Xn===null)throw Error(t(349));(Di&30)!==0||Du(c,i,b)}return b}function Du(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=qr.updateQueue,i===null?(i={lastEffect:null,stores:null},qr.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function tu(r,i,c,p){i.value=c,i.getSnapshot=p,Uo(i)&&ec(r)}function Ru(r,i,c){return c(function(){Uo(i)&&ec(r)})}function Uo(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Gr(r,c)}catch{return!0}}function ec(r){var i=Tr(r,1);i!==null&&la(i,r,1,-1)}function yl(r){var i=fi();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:r},i.queue=r,r=r.dispatch=w1.bind(null,qr,r),[i.memoizedState,r]}function Ds(r,i,c,p){return r={tag:r,create:i,destroy:c,deps:p,next:null},i=qr.updateQueue,i===null?(i={lastEffect:null,stores:null},qr.updateQueue=i,i.lastEffect=r.next=r):(c=i.lastEffect,c===null?i.lastEffect=r.next=r:(p=c.next,c.next=r,r.next=p,i.lastEffect=r)),r}function sa(){return Os().memoizedState}function pi(r,i,c,p){var b=fi();qr.flags|=r,b.memoizedState=Ds(1|i,c,void 0,p===void 0?null:p)}function uo(r,i,c,p){var b=Os();p=p===void 0?null:p;var N=void 0;if(pn!==null){var D=pn.memoizedState;if(N=D.destroy,p!==null&&Ql(p,D.deps)){b.memoizedState=Ds(i,c,N,p);return}}qr.flags|=r,b.memoizedState=Ds(1|i,c,N,p)}function tc(r,i){return pi(8390656,8,r,i)}function rc(r,i){return uo(2048,8,r,i)}function Fu(r,i){return uo(4,2,r,i)}function nc(r,i){return uo(4,4,r,i)}function sc(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Xf(r,i,c){return c=c!=null?c.concat([r]):null,uo(4,4,sc.bind(null,i,r),c)}function Yd(){}function Qf(r,i){var c=Os();i=i===void 0?null:i;var p=c.memoizedState;return p!==null&&i!==null&&Ql(i,p[1])?p[0]:(c.memoizedState=[r,i],r)}function Zf(r,i){var c=Os();i=i===void 0?null:i;var p=c.memoizedState;return p!==null&&i!==null&&Ql(i,p[1])?p[0]:(r=r(),c.memoizedState=[r,i],r)}function e0(r,i,c){return(Di&21)===0?(r.baseState&&(r.baseState=!1,Xs=!0),r.memoizedState=c):(Gr(c,i)||(c=ya(),qr.lanes|=c,bl|=c,r.baseState=!0),i)}function y1(r,i){var c=fr;fr=c!==0&&4>c?c:4,r(!0);var p=Xl.transition;Xl.transition={};try{r(!1),i()}finally{fr=c,Xl.transition=p}}function t0(){return Os().memoizedState}function b1(r,i,c){var p=$o(r);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},r0(r))n0(i,c);else if(c=Ar(r,i,c,p),c!==null){var b=Fs();la(c,r,p,b),s0(c,i,p)}}function w1(r,i,c){var p=$o(r),b={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(r0(r))n0(i,b);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=i.lastRenderedReducer,N!==null))try{var D=i.lastRenderedState,ce=N(D,c);if(b.hasEagerState=!0,b.eagerState=ce,Gr(ce,D)){var ye=i.interleaved;ye===null?(b.next=b,Yn(i)):(b.next=ye.next,ye.next=b),i.interleaved=b;return}}catch{}finally{}c=Ar(r,i,b,p),c!==null&&(b=Fs(),la(c,r,p,b),s0(c,i,p))}}function r0(r){var i=r.alternate;return r===qr||i!==null&&i===qr}function n0(r,i){na=Fo=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function s0(r,i,c){if((c&4194240)!==0){var p=i.lanes;p&=r.pendingLanes,c|=p,i.lanes=c,ii(r,c)}}var Mu={readContext:Xr,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},_1={readContext:Xr,useCallback:function(r,i){return fi().memoizedState=[r,i===void 0?null:i],r},useContext:Xr,useEffect:tc,useImperativeHandle:function(r,i,c){return c=c!=null?c.concat([r]):null,pi(4194308,4,sc.bind(null,i,r),c)},useLayoutEffect:function(r,i){return pi(4194308,4,r,i)},useInsertionEffect:function(r,i){return pi(4,2,r,i)},useMemo:function(r,i){var c=fi();return i=i===void 0?null:i,r=r(),c.memoizedState=[r,i],r},useReducer:function(r,i,c){var p=fi();return i=c!==void 0?c(i):i,p.memoizedState=p.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},p.queue=r,r=r.dispatch=b1.bind(null,qr,r),[p.memoizedState,r]},useRef:function(r){var i=fi();return r={current:r},i.memoizedState=r},useState:yl,useDebugValue:Yd,useDeferredValue:function(r){return fi().memoizedState=r},useTransition:function(){var r=yl(!1),i=r[0];return r=y1.bind(null,r[1]),fi().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,c){var p=qr,b=fi();if(Be){if(c===void 0)throw Error(t(407));c=c()}else{if(c=i(),Xn===null)throw Error(t(349));(Di&30)!==0||Du(p,i,c)}b.memoizedState=c;var N={value:c,getSnapshot:i};return b.queue=N,tc(Ru.bind(null,p,N,r),[r]),p.flags|=2048,Ds(9,tu.bind(null,p,N,c,i),void 0,null),c},useId:function(){var r=fi(),i=Xn.identifierPrefix;if(Be){var c=ne,p=Ce;c=(p&~(1<<32-en(p)-1)).toString(32)+c,i=":"+i+"R"+c,c=Mo++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=Gd++,i=":"+i+"r"+c.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},N1={readContext:Xr,useCallback:Qf,useContext:Xr,useEffect:rc,useImperativeHandle:Xf,useInsertionEffect:Fu,useLayoutEffect:nc,useMemo:Zf,useReducer:Zl,useRef:sa,useState:function(){return Zl(xl)},useDebugValue:Yd,useDeferredValue:function(r){var i=Os();return e0(i,pn.memoizedState,r)},useTransition:function(){var r=Zl(xl)[0],i=Os().memoizedState;return[r,i]},useMutableSource:Ou,useSyncExternalStore:eu,useId:t0,unstable_isNewReconciler:!1},k1={readContext:Xr,useCallback:Qf,useContext:Xr,useEffect:rc,useImperativeHandle:Xf,useInsertionEffect:Fu,useLayoutEffect:nc,useMemo:Zf,useReducer:Ra,useRef:sa,useState:function(){return Ra(xl)},useDebugValue:Yd,useDeferredValue:function(r){var i=Os();return pn===null?i.memoizedState=r:e0(i,pn.memoizedState,r)},useTransition:function(){var r=Ra(xl)[0],i=Os().memoizedState;return[r,i]},useMutableSource:Ou,useSyncExternalStore:eu,useId:t0,unstable_isNewReconciler:!1};function ia(r,i){if(r&&r.defaultProps){i=ge({},i),r=r.defaultProps;for(var c in r)i[c]===void 0&&(i[c]=r[c]);return i}return i}function Kd(r,i,c,p){i=r.memoizedState,c=c(p,i),c=c==null?i:ge({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Uu={isMounted:function(r){return(r=r._reactInternals)?Zr(r)===r:!1},enqueueSetState:function(r,i,c){r=r._reactInternals;var p=Fs(),b=$o(r),N=sn(p,b);N.payload=i,c!=null&&(N.callback=c),i=an(r,N,b),i!==null&&(la(i,r,b,p),Kn(i,r,b))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var p=Fs(),b=$o(r),N=sn(p,b);N.tag=1,N.payload=i,c!=null&&(N.callback=c),i=an(r,N,b),i!==null&&(la(i,r,b,p),Kn(i,r,b))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=Fs(),p=$o(r),b=sn(c,p);b.tag=2,i!=null&&(b.callback=i),i=an(r,b,p),i!==null&&(la(i,r,p,c),Kn(i,r,p))}};function i0(r,i,c,p,b,N,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,N,D):i.prototype&&i.prototype.isPureReactComponent?!ms(c,p)||!ms(b,N):!0}function a0(r,i,c){var p=!1,b=Oa,N=i.contextType;return typeof N=="object"&&N!==null?N=Xr(N):(b=ys(i)?lo:Fn.current,p=i.contextTypes,N=(p=p!=null)?Do(r,b):Oa),i=new i(c,N),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Uu,r.stateNode=i,i._reactInternals=r,p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=b,r.__reactInternalMemoizedMaskedChildContext=N),i}function o0(r,i,c,p){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,p),i.state!==r&&Uu.enqueueReplaceState(i,i.state,null)}function Jd(r,i,c,p){var b=r.stateNode;b.props=c,b.state=r.memoizedState,b.refs={},Mn(r);var N=i.contextType;typeof N=="object"&&N!==null?b.context=Xr(N):(N=ys(i)?lo:Fn.current,b.context=Do(r,N)),b.state=r.memoizedState,N=i.getDerivedStateFromProps,typeof N=="function"&&(Kd(r,i,N,c),b.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(i=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),i!==b.state&&Uu.enqueueReplaceState(b,b.state,null),Jn(r,c,b,p),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308)}function ic(r,i){try{var c="",p=i;do c+=oe(p),p=p.return;while(p);var b=c}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:r,source:i,stack:b,digest:null}}function Xd(r,i,c){return{value:r,source:null,stack:c??null,digest:i??null}}function Qd(r,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var S1=typeof WeakMap=="function"?WeakMap:Map;function l0(r,i,c){c=sn(-1,c),c.tag=3,c.payload={element:null};var p=i.value;return c.callback=function(){Vu||(Vu=!0,fh=p),Qd(r,i)},c}function c0(r,i,c){c=sn(-1,c),c.tag=3;var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var b=i.value;c.payload=function(){return p(b)},c.callback=function(){Qd(r,i)}}var N=r.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(c.callback=function(){Qd(r,i),typeof p!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var D=i.stack;this.componentDidCatch(i.value,{componentStack:D!==null?D:""})}),c}function u0(r,i,c){var p=r.pingCache;if(p===null){p=r.pingCache=new S1;var b=new Set;p.set(i,b)}else b=p.get(i),b===void 0&&(b=new Set,p.set(i,b));b.has(c)||(b.add(c),r=U1.bind(null,r,i,c),i.then(r,r))}function d0(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function h0(r,i,c,p,b){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=sn(-1,1),i.tag=2,an(c,i,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=b,r)}var j1=$.ReactCurrentOwner,Xs=!1;function Rs(r,i,c,p){i.child=r===null?Hr(i,null,c,p):hn(i,r.child,c,p)}function f0(r,i,c,p,b){c=c.render;var N=i.ref;return Jr(i,b),p=vl(r,i,c,p,N,b),c=Ri(),r!==null&&!Xs?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,ho(r,i,b)):(Be&&c&&Fe(i),i.flags|=1,Rs(r,i,p,b),i.child)}function p0(r,i,c,p,b){if(r===null){var N=c.type;return typeof N=="function"&&!bh(N)&&N.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=N,m0(r,i,N,p,b)):(r=Qu(c.type,null,p,i,i.mode,b),r.ref=i.ref,r.return=i,i.child=r)}if(N=r.child,(r.lanes&b)===0){var D=N.memoizedProps;if(c=c.compare,c=c!==null?c:ms,c(D,p)&&r.ref===i.ref)return ho(r,i,b)}return i.flags|=1,r=Ho(N,p),r.ref=i.ref,r.return=i,i.child=r}function m0(r,i,c,p,b){if(r!==null){var N=r.memoizedProps;if(ms(N,p)&&r.ref===i.ref)if(Xs=!1,i.pendingProps=p=N,(r.lanes&b)!==0)(r.flags&131072)!==0&&(Xs=!0);else return i.lanes=r.lanes,ho(r,i,b)}return Zd(r,i,c,p,b)}function g0(r,i,c){var p=i.pendingProps,b=p.children,N=r!==null?r.memoizedState:null;if(p.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(oc,mi),mi|=c;else{if((c&1073741824)===0)return r=N!==null?N.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,jr(oc,mi),mi|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=N!==null?N.baseLanes:c,jr(oc,mi),mi|=p}else N!==null?(p=N.baseLanes|c,i.memoizedState=null):p=c,jr(oc,mi),mi|=p;return Rs(r,i,b,c),i.child}function v0(r,i){var c=i.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Zd(r,i,c,p,b){var N=ys(c)?lo:Fn.current;return N=Do(i,N),Jr(i,b),c=vl(r,i,c,p,N,b),p=Ri(),r!==null&&!Xs?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,ho(r,i,b)):(Be&&p&&Fe(i),i.flags|=1,Rs(r,i,c,b),i.child)}function x0(r,i,c,p,b){if(ys(c)){var N=!0;co(i)}else N=!1;if(Jr(i,b),i.stateNode===null)qu(r,i),a0(i,c,p),Jd(i,c,p,b),p=!0;else if(r===null){var D=i.stateNode,ce=i.memoizedProps;D.props=ce;var ye=D.context,Ie=c.contextType;typeof Ie=="object"&&Ie!==null?Ie=Xr(Ie):(Ie=ys(c)?lo:Fn.current,Ie=Do(i,Ie));var Ge=c.getDerivedStateFromProps,Je=typeof Ge=="function"||typeof D.getSnapshotBeforeUpdate=="function";Je||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ce!==p||ye!==Ie)&&o0(i,D,p,Ie),fn=!1;var Ve=i.memoizedState;D.state=Ve,Jn(i,p,D,b),ye=i.memoizedState,ce!==p||Ve!==ye||xs.current||fn?(typeof Ge=="function"&&(Kd(i,c,Ge,p),ye=i.memoizedState),(ce=fn||i0(i,c,ce,p,Ve,ye,Ie))?(Je||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(i.flags|=4194308)):(typeof D.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=ye),D.props=p,D.state=ye,D.context=Ie,p=ce):(typeof D.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{D=i.stateNode,bs(r,i),ce=i.memoizedProps,Ie=i.type===i.elementType?ce:ia(i.type,ce),D.props=Ie,Je=i.pendingProps,Ve=D.context,ye=c.contextType,typeof ye=="object"&&ye!==null?ye=Xr(ye):(ye=ys(c)?lo:Fn.current,ye=Do(i,ye));var lt=c.getDerivedStateFromProps;(Ge=typeof lt=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ce!==Je||Ve!==ye)&&o0(i,D,p,ye),fn=!1,Ve=i.memoizedState,D.state=Ve,Jn(i,p,D,b);var yt=i.memoizedState;ce!==Je||Ve!==yt||xs.current||fn?(typeof lt=="function"&&(Kd(i,c,lt,p),yt=i.memoizedState),(Ie=fn||i0(i,c,Ie,p,Ve,yt,ye)||!1)?(Ge||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,yt,ye),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,yt,ye)),typeof D.componentDidUpdate=="function"&&(i.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof D.componentDidUpdate!="function"||ce===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||ce===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=yt),D.props=p,D.state=yt,D.context=ye,p=Ie):(typeof D.componentDidUpdate!="function"||ce===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||ce===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=1024),p=!1)}return eh(r,i,c,p,N,b)}function eh(r,i,c,p,b,N){v0(r,i);var D=(i.flags&128)!==0;if(!p&&!D)return b&&Tu(i,c,!1),ho(r,i,N);p=i.stateNode,j1.current=i;var ce=D&&typeof c.getDerivedStateFromError!="function"?null:p.render();return i.flags|=1,r!==null&&D?(i.child=hn(i,r.child,null,N),i.child=hn(i,null,ce,N)):Rs(r,i,ce,N),i.memoizedState=p.state,b&&Tu(i,c,!0),i.child}function y0(r){var i=r.stateNode;i.pendingContext?Lu(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Lu(r,i.context,!1),Ro(r,i.containerInfo)}function b0(r,i,c,p,b){return ht(),tt(b),i.flags|=256,Rs(r,i,c,p),i.child}var th={dehydrated:null,treeContext:null,retryLane:0};function rh(r){return{baseLanes:r,cachePool:null,transitions:null}}function w0(r,i,c){var p=i.pendingProps,b=Dr.current,N=!1,D=(i.flags&128)!==0,ce;if((ce=D)||(ce=r!==null&&r.memoizedState===null?!1:(b&2)!==0),ce?(N=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(b|=1),jr(Dr,b&1),r===null)return vt(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(D=p.children,r=p.fallback,N?(p=i.mode,N=i.child,D={mode:"hidden",children:D},(p&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=D):N=Zu(D,p,0,null),r=kl(r,p,c,null),N.return=i,r.return=i,N.sibling=r,i.child=N,i.child.memoizedState=rh(c),i.memoizedState=th,r):nh(i,D));if(b=r.memoizedState,b!==null&&(ce=b.dehydrated,ce!==null))return A1(r,i,D,p,ce,b,c);if(N){N=p.fallback,D=i.mode,b=r.child,ce=b.sibling;var ye={mode:"hidden",children:p.children};return(D&1)===0&&i.child!==b?(p=i.child,p.childLanes=0,p.pendingProps=ye,i.deletions=null):(p=Ho(b,ye),p.subtreeFlags=b.subtreeFlags&14680064),ce!==null?N=Ho(ce,N):(N=kl(N,D,c,null),N.flags|=2),N.return=i,p.return=i,p.sibling=N,i.child=p,p=N,N=i.child,D=r.child.memoizedState,D=D===null?rh(c):{baseLanes:D.baseLanes|c,cachePool:null,transitions:D.transitions},N.memoizedState=D,N.childLanes=r.childLanes&~c,i.memoizedState=th,p}return N=r.child,r=N.sibling,p=Ho(N,{mode:"visible",children:p.children}),(i.mode&1)===0&&(p.lanes=c),p.return=i,p.sibling=null,r!==null&&(c=i.deletions,c===null?(i.deletions=[r],i.flags|=16):c.push(r)),i.child=p,i.memoizedState=null,p}function nh(r,i){return i=Zu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Bu(r,i,c,p){return p!==null&&tt(p),hn(i,r.child,null,c),r=nh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function A1(r,i,c,p,b,N,D){if(c)return i.flags&256?(i.flags&=-257,p=Xd(Error(t(422))),Bu(r,i,D,p)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(N=p.fallback,b=i.mode,p=Zu({mode:"visible",children:p.children},b,0,null),N=kl(N,b,D,null),N.flags|=2,p.return=i,N.return=i,p.sibling=N,i.child=p,(i.mode&1)!==0&&hn(i,r.child,null,D),i.child.memoizedState=rh(D),i.memoizedState=th,N);if((i.mode&1)===0)return Bu(r,i,D,null);if(b.data==="$!"){if(p=b.nextSibling&&b.nextSibling.dataset,p)var ce=p.dgst;return p=ce,N=Error(t(419)),p=Xd(N,p,void 0),Bu(r,i,D,p)}if(ce=(D&r.childLanes)!==0,Xs||ce){if(p=Xn,p!==null){switch(D&-D){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(p.suspendedLanes|D))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Tr(r,b),la(p,r,b,-1))}return yh(),p=Xd(Error(t(421))),Bu(r,i,D,p)}return b.data==="$?"?(i.flags|=128,i.child=r.child,i=B1.bind(null,r),b._reactRetry=i,null):(r=N.treeContext,Re=as(b.nextSibling),De=i,Be=!0,qe=null,r!==null&&(Y[te++]=Ce,Y[te++]=ne,Y[te++]=xe,Ce=r.id,ne=r.overflow,xe=i),i=nh(i,p.children),i.flags|=4096,i)}function _0(r,i,c){r.lanes|=i;var p=r.alternate;p!==null&&(p.lanes|=i),vr(r.return,i,c)}function sh(r,i,c,p,b){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:b}:(N.isBackwards=i,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=c,N.tailMode=b)}function N0(r,i,c){var p=i.pendingProps,b=p.revealOrder,N=p.tail;if(Rs(r,i,p.children,c),p=Dr.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&_0(r,c,i);else if(r.tag===19)_0(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}if(jr(Dr,p),(i.mode&1)===0)i.memoizedState=null;else switch(b){case"forwards":for(c=i.child,b=null;c!==null;)r=c.alternate,r!==null&&hi(r)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),sh(i,!1,b,c,N);break;case"backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(r=b.alternate,r!==null&&hi(r)===null){i.child=b;break}r=b.sibling,b.sibling=c,c=b,b=r}sh(i,!0,c,null,N);break;case"together":sh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function ho(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),bl|=i.lanes,(c&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,c=Ho(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Ho(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function P1(r,i,c){switch(i.tag){case 3:y0(i),ht();break;case 5:Iu(i);break;case 1:ys(i.type)&&co(i);break;case 4:Ro(i,i.stateNode.containerInfo);break;case 10:var p=i.type._context,b=i.memoizedProps.value;jr(yn,p._currentValue),p._currentValue=b;break;case 13:if(p=i.memoizedState,p!==null)return p.dehydrated!==null?(jr(Dr,Dr.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?w0(r,i,c):(jr(Dr,Dr.current&1),r=ho(r,i,c),r!==null?r.sibling:null);jr(Dr,Dr.current&1);break;case 19:if(p=(c&i.childLanes)!==0,(r.flags&128)!==0){if(p)return N0(r,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),jr(Dr,Dr.current),p)break;return null;case 22:case 23:return i.lanes=0,g0(r,i,c)}return ho(r,i,c)}var k0,ih,S0,j0;k0=function(r,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},ih=function(){},S0=function(r,i,c,p){var b=r.memoizedProps;if(b!==p){r=i.stateNode,ra(Cn.current);var N=null;switch(c){case"input":b=rt(r,b),p=rt(r,p),N=[];break;case"select":b=ge({},b,{value:void 0}),p=ge({},p,{value:void 0}),N=[];break;case"textarea":b=_t(r,b),p=_t(r,p),N=[];break;default:typeof b.onClick!="function"&&typeof p.onClick=="function"&&(r.onclick=To)}jt(c,p);var D;c=null;for(Ie in b)if(!p.hasOwnProperty(Ie)&&b.hasOwnProperty(Ie)&&b[Ie]!=null)if(Ie==="style"){var ce=b[Ie];for(D in ce)ce.hasOwnProperty(D)&&(c||(c={}),c[D]="")}else Ie!=="dangerouslySetInnerHTML"&&Ie!=="children"&&Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&Ie!=="autoFocus"&&(a.hasOwnProperty(Ie)?N||(N=[]):(N=N||[]).push(Ie,null));for(Ie in p){var ye=p[Ie];if(ce=b?.[Ie],p.hasOwnProperty(Ie)&&ye!==ce&&(ye!=null||ce!=null))if(Ie==="style")if(ce){for(D in ce)!ce.hasOwnProperty(D)||ye&&ye.hasOwnProperty(D)||(c||(c={}),c[D]="");for(D in ye)ye.hasOwnProperty(D)&&ce[D]!==ye[D]&&(c||(c={}),c[D]=ye[D])}else c||(N||(N=[]),N.push(Ie,c)),c=ye;else Ie==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ce=ce?ce.__html:void 0,ye!=null&&ce!==ye&&(N=N||[]).push(Ie,ye)):Ie==="children"?typeof ye!="string"&&typeof ye!="number"||(N=N||[]).push(Ie,""+ye):Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ie)?(ye!=null&&Ie==="onScroll"&&Er("scroll",r),N||ce===ye||(N=[])):(N=N||[]).push(Ie,ye))}c&&(N=N||[]).push("style",c);var Ie=N;(i.updateQueue=Ie)&&(i.flags|=4)}},j0=function(r,i,c,p){c!==p&&(i.flags|=4)};function ru(r,i){if(!Be)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function ws(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,p=0;if(i)for(var b=r.child;b!==null;)c|=b.lanes|b.childLanes,p|=b.subtreeFlags&14680064,p|=b.flags&14680064,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)c|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=p,r.childLanes=c,i}function C1(r,i,c){var p=i.pendingProps;switch(Le(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ws(i),null;case 1:return ys(i.type)&&Kl(),ws(i),null;case 3:return p=i.stateNode,Oi(),wr(xs),wr(Fn),Zc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(Kr(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qe!==null&&(gh(qe),qe=null))),ih(r,i),ws(i),null;case 5:Xc(i);var b=ra(Da.current);if(c=i.type,r!==null&&i.stateNode!=null)S0(r,i,c,p,b),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(i.stateNode===null)throw Error(t(166));return ws(i),null}if(r=ra(Cn.current),Kr(i)){p=i.stateNode,c=i.type;var N=i.memoizedProps;switch(p[Ii]=i,p[Io]=N,r=(i.mode&1)!==0,c){case"dialog":Er("cancel",p),Er("close",p);break;case"iframe":case"object":case"embed":Er("load",p);break;case"video":case"audio":for(b=0;b<Ta.length;b++)Er(Ta[b],p);break;case"source":Er("error",p);break;case"img":case"image":case"link":Er("error",p),Er("load",p);break;case"details":Er("toggle",p);break;case"input":Z(p,N),Er("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!N.multiple},Er("invalid",p);break;case"textarea":xt(p,N),Er("invalid",p)}jt(c,N),b=null;for(var D in N)if(N.hasOwnProperty(D)){var ce=N[D];D==="children"?typeof ce=="string"?p.textContent!==ce&&(N.suppressHydrationWarning!==!0&&Yl(p.textContent,ce,r),b=["children",ce]):typeof ce=="number"&&p.textContent!==""+ce&&(N.suppressHydrationWarning!==!0&&Yl(p.textContent,ce,r),b=["children",""+ce]):a.hasOwnProperty(D)&&ce!=null&&D==="onScroll"&&Er("scroll",p)}switch(c){case"input":$e(p),Tt(p,N,!0);break;case"textarea":$e(p),St(p);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(p.onclick=To)}p=b,i.updateQueue=p,p!==null&&(i.flags|=4)}else{D=b.nodeType===9?b:b.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Mt(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=D.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof p.is=="string"?r=D.createElement(c,{is:p.is}):(r=D.createElement(c),c==="select"&&(D=r,p.multiple?D.multiple=!0:p.size&&(D.size=p.size))):r=D.createElementNS(r,c),r[Ii]=i,r[Io]=p,k0(r,i,!1,!1),i.stateNode=r;e:{switch(D=ot(c,p),c){case"dialog":Er("cancel",r),Er("close",r),b=p;break;case"iframe":case"object":case"embed":Er("load",r),b=p;break;case"video":case"audio":for(b=0;b<Ta.length;b++)Er(Ta[b],r);b=p;break;case"source":Er("error",r),b=p;break;case"img":case"image":case"link":Er("error",r),Er("load",r),b=p;break;case"details":Er("toggle",r),b=p;break;case"input":Z(r,p),b=rt(r,p),Er("invalid",r);break;case"option":b=p;break;case"select":r._wrapperState={wasMultiple:!!p.multiple},b=ge({},p,{value:void 0}),Er("invalid",r);break;case"textarea":xt(r,p),b=_t(r,p),Er("invalid",r);break;default:b=p}jt(c,b),ce=b;for(N in ce)if(ce.hasOwnProperty(N)){var ye=ce[N];N==="style"?Gt(r,ye):N==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&ft(r,ye)):N==="children"?typeof ye=="string"?(c!=="textarea"||ye!=="")&&Nt(r,ye):typeof ye=="number"&&Nt(r,""+ye):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(a.hasOwnProperty(N)?ye!=null&&N==="onScroll"&&Er("scroll",r):ye!=null&&U(r,N,ye,D))}switch(c){case"input":$e(r),Tt(r,p,!1);break;case"textarea":$e(r),St(r);break;case"option":p.value!=null&&r.setAttribute("value",""+_e(p.value));break;case"select":r.multiple=!!p.multiple,N=p.value,N!=null?st(r,!!p.multiple,N,!1):p.defaultValue!=null&&st(r,!!p.multiple,p.defaultValue,!0);break;default:typeof b.onClick=="function"&&(r.onclick=To)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ws(i),null;case 6:if(r&&i.stateNode!=null)j0(r,i,r.memoizedProps,p);else{if(typeof p!="string"&&i.stateNode===null)throw Error(t(166));if(c=ra(Da.current),ra(Cn.current),Kr(i)){if(p=i.stateNode,c=i.memoizedProps,p[Ii]=i,(N=p.nodeValue!==c)&&(r=De,r!==null))switch(r.tag){case 3:Yl(p.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Yl(p.nodeValue,c,(r.mode&1)!==0)}N&&(i.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Ii]=i,i.stateNode=p}return ws(i),null;case 13:if(wr(Dr),p=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Be&&Re!==null&&(i.mode&1)!==0&&(i.flags&128)===0)tr(),ht(),i.flags|=98560,N=!1;else if(N=Kr(i),p!==null&&p.dehydrated!==null){if(r===null){if(!N)throw Error(t(318));if(N=i.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[Ii]=i}else ht(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ws(i),N=!1}else qe!==null&&(gh(qe),qe=null),N=!0;if(!N)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(p=p!==null,p!==(r!==null&&r.memoizedState!==null)&&p&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Dr.current&1)!==0?Un===0&&(Un=3):yh())),i.updateQueue!==null&&(i.flags|=4),ws(i),null);case 4:return Oi(),ih(r,i),r===null&&so(i.stateNode.containerInfo),ws(i),null;case 10:return Br(i.type._context),ws(i),null;case 17:return ys(i.type)&&Kl(),ws(i),null;case 19:if(wr(Dr),N=i.memoizedState,N===null)return ws(i),null;if(p=(i.flags&128)!==0,D=N.rendering,D===null)if(p)ru(N,!1);else{if(Un!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(D=hi(r),D!==null){for(i.flags|=128,ru(N,!1),p=D.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),i.subtreeFlags=0,p=c,c=i.child;c!==null;)N=c,r=p,N.flags&=14680066,D=N.alternate,D===null?(N.childLanes=0,N.lanes=r,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=D.childLanes,N.lanes=D.lanes,N.child=D.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=D.memoizedProps,N.memoizedState=D.memoizedState,N.updateQueue=D.updateQueue,N.type=D.type,r=D.dependencies,N.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return jr(Dr,Dr.current&1|2),i.child}r=r.sibling}N.tail!==null&&Nr()>lc&&(i.flags|=128,p=!0,ru(N,!1),i.lanes=4194304)}else{if(!p)if(r=hi(D),r!==null){if(i.flags|=128,p=!0,c=r.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),ru(N,!0),N.tail===null&&N.tailMode==="hidden"&&!D.alternate&&!Be)return ws(i),null}else 2*Nr()-N.renderingStartTime>lc&&c!==1073741824&&(i.flags|=128,p=!0,ru(N,!1),i.lanes=4194304);N.isBackwards?(D.sibling=i.child,i.child=D):(c=N.last,c!==null?c.sibling=D:i.child=D,N.last=D)}return N.tail!==null?(i=N.tail,N.rendering=i,N.tail=i.sibling,N.renderingStartTime=Nr(),i.sibling=null,c=Dr.current,jr(Dr,p?c&1|2:c&1),i):(ws(i),null);case 22:case 23:return xh(),p=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==p&&(i.flags|=8192),p&&(i.mode&1)!==0?(mi&1073741824)!==0&&(ws(i),i.subtreeFlags&6&&(i.flags|=8192)):ws(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function E1(r,i){switch(Le(i),i.tag){case 1:return ys(i.type)&&Kl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Oi(),wr(xs),wr(Fn),Zc(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Xc(i),null;case 13:if(wr(Dr),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ht()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return wr(Dr),null;case 4:return Oi(),null;case 10:return Br(i.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var zu=!1,_s=!1,L1=typeof WeakSet=="function"?WeakSet:Set,gt=null;function ac(r,i){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){mn(r,i,p)}else c.current=null}function ah(r,i,c){try{c()}catch(p){mn(r,i,p)}}var A0=!1;function T1(r,i){if(pl=Vs,r=dn(),ci(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var b=p.anchorOffset,N=p.focusNode;p=p.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var D=0,ce=-1,ye=-1,Ie=0,Ge=0,Je=r,Ve=null;t:for(;;){for(var lt;Je!==c||b!==0&&Je.nodeType!==3||(ce=D+b),Je!==N||p!==0&&Je.nodeType!==3||(ye=D+p),Je.nodeType===3&&(D+=Je.nodeValue.length),(lt=Je.firstChild)!==null;)Ve=Je,Je=lt;for(;;){if(Je===r)break t;if(Ve===c&&++Ie===b&&(ce=D),Ve===N&&++Ge===p&&(ye=D),(lt=Je.nextSibling)!==null)break;Je=Ve,Ve=Je.parentNode}Je=lt}c=ce===-1||ye===-1?null:{start:ce,end:ye}}else c=null}c=c||{start:0,end:0}}else c=null;for(ao={focusedElem:r,selectionRange:c},Vs=!1,gt=i;gt!==null;)if(i=gt,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,gt=r;else for(;gt!==null;){i=gt;try{var yt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var At=yt.memoizedProps,wn=yt.memoizedState,Ee=i.stateNode,ke=Ee.getSnapshotBeforeUpdate(i.elementType===i.type?At:ia(i.type,At),wn);Ee.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Te=i.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(et){mn(i,i.return,et)}if(r=i.sibling,r!==null){r.return=i.return,gt=r;break}gt=i.return}return yt=A0,A0=!1,yt}function nu(r,i,c){var p=i.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&r)===r){var N=b.destroy;b.destroy=void 0,N!==void 0&&ah(i,c,N)}b=b.next}while(b!==p)}}function $u(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&r)===r){var p=c.create;c.destroy=p()}c=c.next}while(c!==i)}}function oh(r){var i=r.ref;if(i!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof i=="function"?i(r):i.current=r}}function P0(r){var i=r.alternate;i!==null&&(r.alternate=null,P0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Ii],delete i[Io],delete i[vs],delete i[Hd],delete i[Vd])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function C0(r){return r.tag===5||r.tag===3||r.tag===4}function E0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||C0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function lh(r,i,c){var p=r.tag;if(p===5||p===6)r=r.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(r,i):c.insertBefore(r,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(r,c)):(i=c,i.appendChild(r)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=To));else if(p!==4&&(r=r.child,r!==null))for(lh(r,i,c),r=r.sibling;r!==null;)lh(r,i,c),r=r.sibling}function ch(r,i,c){var p=r.tag;if(p===5||p===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(p!==4&&(r=r.child,r!==null))for(ch(r,i,c),r=r.sibling;r!==null;)ch(r,i,c),r=r.sibling}var os=null,aa=!1;function Bo(r,i,c){for(c=c.child;c!==null;)L0(r,i,c),c=c.sibling}function L0(r,i,c){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Ni,c)}catch{}switch(c.tag){case 5:_s||ac(c,i);case 6:var p=os,b=aa;os=null,Bo(r,i,c),os=p,aa=b,os!==null&&(aa?(r=os,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):os.removeChild(c.stateNode));break;case 18:os!==null&&(aa?(r=os,c=c.stateNode,r.nodeType===8?Yc(r.parentNode,c):r.nodeType===1&&Yc(r,c),Vi(r)):Yc(os,c.stateNode));break;case 4:p=os,b=aa,os=c.stateNode.containerInfo,aa=!0,Bo(r,i,c),os=p,aa=b;break;case 0:case 11:case 14:case 15:if(!_s&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){b=p=p.next;do{var N=b,D=N.destroy;N=N.tag,D!==void 0&&((N&2)!==0||(N&4)!==0)&&ah(c,i,D),b=b.next}while(b!==p)}Bo(r,i,c);break;case 1:if(!_s&&(ac(c,i),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(ce){mn(c,i,ce)}Bo(r,i,c);break;case 21:Bo(r,i,c);break;case 22:c.mode&1?(_s=(p=_s)||c.memoizedState!==null,Bo(r,i,c),_s=p):Bo(r,i,c);break;default:Bo(r,i,c)}}function T0(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new L1),i.forEach(function(p){var b=q1.bind(null,r,p);c.has(p)||(c.add(p),p.then(b,b))})}}function oa(r,i){var c=i.deletions;if(c!==null)for(var p=0;p<c.length;p++){var b=c[p];try{var N=r,D=i,ce=D;e:for(;ce!==null;){switch(ce.tag){case 5:os=ce.stateNode,aa=!1;break e;case 3:os=ce.stateNode.containerInfo,aa=!0;break e;case 4:os=ce.stateNode.containerInfo,aa=!0;break e}ce=ce.return}if(os===null)throw Error(t(160));L0(N,D,b),os=null,aa=!1;var ye=b.alternate;ye!==null&&(ye.return=null),b.return=null}catch(Ie){mn(b,i,Ie)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)I0(i,r),i=i.sibling}function I0(r,i){var c=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(oa(i,r),Fa(r),p&4){try{nu(3,r,r.return),$u(3,r)}catch(At){mn(r,r.return,At)}try{nu(5,r,r.return)}catch(At){mn(r,r.return,At)}}break;case 1:oa(i,r),Fa(r),p&512&&c!==null&&ac(c,c.return);break;case 5:if(oa(i,r),Fa(r),p&512&&c!==null&&ac(c,c.return),r.flags&32){var b=r.stateNode;try{Nt(b,"")}catch(At){mn(r,r.return,At)}}if(p&4&&(b=r.stateNode,b!=null)){var N=r.memoizedProps,D=c!==null?c.memoizedProps:N,ce=r.type,ye=r.updateQueue;if(r.updateQueue=null,ye!==null)try{ce==="input"&&N.type==="radio"&&N.name!=null&&Ze(b,N),ot(ce,D);var Ie=ot(ce,N);for(D=0;D<ye.length;D+=2){var Ge=ye[D],Je=ye[D+1];Ge==="style"?Gt(b,Je):Ge==="dangerouslySetInnerHTML"?ft(b,Je):Ge==="children"?Nt(b,Je):U(b,Ge,Je,Ie)}switch(ce){case"input":Rt(b,N);break;case"textarea":Wt(b,N);break;case"select":var Ve=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var lt=N.value;lt!=null?st(b,!!N.multiple,lt,!1):Ve!==!!N.multiple&&(N.defaultValue!=null?st(b,!!N.multiple,N.defaultValue,!0):st(b,!!N.multiple,N.multiple?[]:"",!1))}b[Io]=N}catch(At){mn(r,r.return,At)}}break;case 6:if(oa(i,r),Fa(r),p&4){if(r.stateNode===null)throw Error(t(162));b=r.stateNode,N=r.memoizedProps;try{b.nodeValue=N}catch(At){mn(r,r.return,At)}}break;case 3:if(oa(i,r),Fa(r),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Vi(i.containerInfo)}catch(At){mn(r,r.return,At)}break;case 4:oa(i,r),Fa(r);break;case 13:oa(i,r),Fa(r),b=r.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(hh=Nr())),p&4&&T0(r);break;case 22:if(Ge=c!==null&&c.memoizedState!==null,r.mode&1?(_s=(Ie=_s)||Ge,oa(i,r),_s=Ie):oa(i,r),Fa(r),p&8192){if(Ie=r.memoizedState!==null,(r.stateNode.isHidden=Ie)&&!Ge&&(r.mode&1)!==0)for(gt=r,Ge=r.child;Ge!==null;){for(Je=gt=Ge;gt!==null;){switch(Ve=gt,lt=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:nu(4,Ve,Ve.return);break;case 1:ac(Ve,Ve.return);var yt=Ve.stateNode;if(typeof yt.componentWillUnmount=="function"){p=Ve,c=Ve.return;try{i=p,yt.props=i.memoizedProps,yt.state=i.memoizedState,yt.componentWillUnmount()}catch(At){mn(p,c,At)}}break;case 5:ac(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){R0(Je);continue}}lt!==null?(lt.return=Ve,gt=lt):R0(Je)}Ge=Ge.sibling}e:for(Ge=null,Je=r;;){if(Je.tag===5){if(Ge===null){Ge=Je;try{b=Je.stateNode,Ie?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(ce=Je.stateNode,ye=Je.memoizedProps.style,D=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,ce.style.display=Jt("display",D))}catch(At){mn(r,r.return,At)}}}else if(Je.tag===6){if(Ge===null)try{Je.stateNode.nodeValue=Ie?"":Je.memoizedProps}catch(At){mn(r,r.return,At)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===r)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===r)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===r)break e;Ge===Je&&(Ge=null),Je=Je.return}Ge===Je&&(Ge=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:oa(i,r),Fa(r),p&4&&T0(r);break;case 21:break;default:oa(i,r),Fa(r)}}function Fa(r){var i=r.flags;if(i&2){try{e:{for(var c=r.return;c!==null;){if(C0(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var b=p.stateNode;p.flags&32&&(Nt(b,""),p.flags&=-33);var N=E0(r);ch(r,N,b);break;case 3:case 4:var D=p.stateNode.containerInfo,ce=E0(r);lh(r,ce,D);break;default:throw Error(t(161))}}catch(ye){mn(r,r.return,ye)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function I1(r,i,c){gt=r,O0(r)}function O0(r,i,c){for(var p=(r.mode&1)!==0;gt!==null;){var b=gt,N=b.child;if(b.tag===22&&p){var D=b.memoizedState!==null||zu;if(!D){var ce=b.alternate,ye=ce!==null&&ce.memoizedState!==null||_s;ce=zu;var Ie=_s;if(zu=D,(_s=ye)&&!Ie)for(gt=b;gt!==null;)D=gt,ye=D.child,D.tag===22&&D.memoizedState!==null?F0(b):ye!==null?(ye.return=D,gt=ye):F0(b);for(;N!==null;)gt=N,O0(N),N=N.sibling;gt=b,zu=ce,_s=Ie}D0(r)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,gt=N):D0(r)}}function D0(r){for(;gt!==null;){var i=gt;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:_s||$u(5,i);break;case 1:var p=i.stateNode;if(i.flags&4&&!_s)if(c===null)p.componentDidMount();else{var b=i.elementType===i.type?c.memoizedProps:ia(i.type,c.memoizedProps);p.componentDidUpdate(b,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var N=i.updateQueue;N!==null&&Js(i,N,p);break;case 3:var D=i.updateQueue;if(D!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}Js(i,D,c)}break;case 5:var ce=i.stateNode;if(c===null&&i.flags&4){c=ce;var ye=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&c.focus();break;case"img":ye.src&&(c.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Ie=i.alternate;if(Ie!==null){var Ge=Ie.memoizedState;if(Ge!==null){var Je=Ge.dehydrated;Je!==null&&Vi(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}_s||i.flags&512&&oh(i)}catch(Ve){mn(i,i.return,Ve)}}if(i===r){gt=null;break}if(c=i.sibling,c!==null){c.return=i.return,gt=c;break}gt=i.return}}function R0(r){for(;gt!==null;){var i=gt;if(i===r){gt=null;break}var c=i.sibling;if(c!==null){c.return=i.return,gt=c;break}gt=i.return}}function F0(r){for(;gt!==null;){var i=gt;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{$u(4,i)}catch(ye){mn(i,c,ye)}break;case 1:var p=i.stateNode;if(typeof p.componentDidMount=="function"){var b=i.return;try{p.componentDidMount()}catch(ye){mn(i,b,ye)}}var N=i.return;try{oh(i)}catch(ye){mn(i,N,ye)}break;case 5:var D=i.return;try{oh(i)}catch(ye){mn(i,D,ye)}}}catch(ye){mn(i,i.return,ye)}if(i===r){gt=null;break}var ce=i.sibling;if(ce!==null){ce.return=i.return,gt=ce;break}gt=i.return}}var O1=Math.ceil,Wu=$.ReactCurrentDispatcher,uh=$.ReactCurrentOwner,Fi=$.ReactCurrentBatchConfig,xr=0,Xn=null,En=null,ls=0,mi=0,oc=ui(0),Un=0,su=null,bl=0,Hu=0,dh=0,iu=null,Qs=null,hh=0,lc=1/0,fo=null,Vu=!1,fh=null,qo=null,Gu=!1,zo=null,Yu=0,au=0,ph=null,Ku=-1,Ju=0;function Fs(){return(xr&6)!==0?Nr():Ku!==-1?Ku:Ku=Nr()}function $o(r){return(r.mode&1)===0?1:(xr&2)!==0&&ls!==0?ls&-ls:nn.transition!==null?(Ju===0&&(Ju=ya()),Ju):(r=fr,r!==0||(r=window.event,r=r===void 0?16:fs(r.type)),r)}function la(r,i,c,p){if(50<au)throw au=0,ph=null,Error(t(185));zi(r,c,p),((xr&2)===0||r!==Xn)&&(r===Xn&&((xr&2)===0&&(Hu|=c),Un===4&&Wo(r,ls)),Zs(r,p),c===1&&xr===0&&(i.mode&1)===0&&(lc=Nr()+500,gl&&S()))}function Zs(r,i){var c=r.callbackNode;Wr(r,i);var p=Si(r,r===Xn?ls:0);if(p===0)c!==null&&wi(c),r.callbackNode=null,r.callbackPriority=0;else if(i=p&-p,r.callbackPriority!==i){if(c!=null&&wi(c),i===1)r.tag===0?_(U0.bind(null,r)):g(U0.bind(null,r)),$d(function(){(xr&6)===0&&S()}),c=null;else{switch($i(p)){case 1:c=qi;break;case 4:c=Wn;break;case 16:c=Es;break;case 536870912:c=ga;break;default:c=Es}c=G0(c,M0.bind(null,r))}r.callbackPriority=i,r.callbackNode=c}}function M0(r,i){if(Ku=-1,Ju=0,(xr&6)!==0)throw Error(t(327));var c=r.callbackNode;if(cc()&&r.callbackNode!==c)return null;var p=Si(r,r===Xn?ls:0);if(p===0)return null;if((p&30)!==0||(p&r.expiredLanes)!==0||i)i=Xu(r,p);else{i=p;var b=xr;xr|=2;var N=q0();(Xn!==r||ls!==i)&&(fo=null,lc=Nr()+500,_l(r,i));do try{F1();break}catch(ce){B0(r,ce)}while(!0);gr(),Wu.current=N,xr=b,En!==null?i=0:(Xn=null,ls=0,i=Un)}if(i!==0){if(i===2&&(b=us(r),b!==0&&(p=b,i=mh(r,b))),i===1)throw c=su,_l(r,0),Wo(r,p),Zs(r,Nr()),c;if(i===6)Wo(r,p);else{if(b=r.current.alternate,(p&30)===0&&!D1(b)&&(i=Xu(r,p),i===2&&(N=us(r),N!==0&&(p=N,i=mh(r,N))),i===1))throw c=su,_l(r,0),Wo(r,p),Zs(r,Nr()),c;switch(r.finishedWork=b,r.finishedLanes=p,i){case 0:case 1:throw Error(t(345));case 2:Nl(r,Qs,fo);break;case 3:if(Wo(r,p),(p&130023424)===p&&(i=hh+500-Nr(),10<i)){if(Si(r,0)!==0)break;if(b=r.suspendedLanes,(b&p)!==p){Fs(),r.pingedLanes|=r.suspendedLanes&b;break}r.timeoutHandle=Gc(Nl.bind(null,r,Qs,fo),i);break}Nl(r,Qs,fo);break;case 4:if(Wo(r,p),(p&4194240)===p)break;for(i=r.eventTimes,b=-1;0<p;){var D=31-en(p);N=1<<D,D=i[D],D>b&&(b=D),p&=~N}if(p=b,p=Nr()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*O1(p/1960))-p,10<p){r.timeoutHandle=Gc(Nl.bind(null,r,Qs,fo),p);break}Nl(r,Qs,fo);break;case 5:Nl(r,Qs,fo);break;default:throw Error(t(329))}}}return Zs(r,Nr()),r.callbackNode===c?M0.bind(null,r):null}function mh(r,i){var c=iu;return r.current.memoizedState.isDehydrated&&(_l(r,i).flags|=256),r=Xu(r,i),r!==2&&(i=Qs,Qs=c,i!==null&&gh(i)),r}function gh(r){Qs===null?Qs=r:Qs.push.apply(Qs,r)}function D1(r){for(var i=r;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var b=c[p],N=b.getSnapshot;b=b.value;try{if(!Gr(N(),b))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wo(r,i){for(i&=~dh,i&=~Hu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var c=31-en(i),p=1<<c;r[c]=-1,i&=~p}}function U0(r){if((xr&6)!==0)throw Error(t(327));cc();var i=Si(r,0);if((i&1)===0)return Zs(r,Nr()),null;var c=Xu(r,i);if(r.tag!==0&&c===2){var p=us(r);p!==0&&(i=p,c=mh(r,p))}if(c===1)throw c=su,_l(r,0),Wo(r,i),Zs(r,Nr()),c;if(c===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Nl(r,Qs,fo),Zs(r,Nr()),null}function vh(r,i){var c=xr;xr|=1;try{return r(i)}finally{xr=c,xr===0&&(lc=Nr()+500,gl&&S())}}function wl(r){zo!==null&&zo.tag===0&&(xr&6)===0&&cc();var i=xr;xr|=1;var c=Fi.transition,p=fr;try{if(Fi.transition=null,fr=1,r)return r()}finally{fr=p,Fi.transition=c,xr=i,(xr&6)===0&&S()}}function xh(){mi=oc.current,wr(oc)}function _l(r,i){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,Cu(c)),En!==null)for(c=En.return;c!==null;){var p=c;switch(Le(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Kl();break;case 3:Oi(),wr(xs),wr(Fn),Zc();break;case 5:Xc(p);break;case 4:Oi();break;case 13:wr(Dr);break;case 19:wr(Dr);break;case 10:Br(p.type._context);break;case 22:case 23:xh()}c=c.return}if(Xn=r,En=r=Ho(r.current,null),ls=mi=i,Un=0,su=null,dh=Hu=bl=0,Qs=iu=null,Lr!==null){for(i=0;i<Lr.length;i++)if(c=Lr[i],p=c.interleaved,p!==null){c.interleaved=null;var b=p.next,N=c.pending;if(N!==null){var D=N.next;N.next=b,p.next=D}c.pending=p}Lr=null}return r}function B0(r,i){do{var c=En;try{if(gr(),Jl.current=Mu,Fo){for(var p=qr.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}Fo=!1}if(Di=0,ln=pn=qr=null,na=!1,Mo=0,uh.current=null,c===null||c.return===null){Un=1,su=i,En=null;break}e:{var N=r,D=c.return,ce=c,ye=i;if(i=ls,ce.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ie=ye,Ge=ce,Je=Ge.tag;if((Ge.mode&1)===0&&(Je===0||Je===11||Je===15)){var Ve=Ge.alternate;Ve?(Ge.updateQueue=Ve.updateQueue,Ge.memoizedState=Ve.memoizedState,Ge.lanes=Ve.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var lt=d0(D);if(lt!==null){lt.flags&=-257,h0(lt,D,ce,N,i),lt.mode&1&&u0(N,Ie,i),i=lt,ye=Ie;var yt=i.updateQueue;if(yt===null){var At=new Set;At.add(ye),i.updateQueue=At}else yt.add(ye);break e}else{if((i&1)===0){u0(N,Ie,i),yh();break e}ye=Error(t(426))}}else if(Be&&ce.mode&1){var wn=d0(D);if(wn!==null){(wn.flags&65536)===0&&(wn.flags|=256),h0(wn,D,ce,N,i),tt(ic(ye,ce));break e}}N=ye=ic(ye,ce),Un!==4&&(Un=2),iu===null?iu=[N]:iu.push(N),N=D;do{switch(N.tag){case 3:N.flags|=65536,i&=-i,N.lanes|=i;var Ee=l0(N,ye,i);Ir(N,Ee);break e;case 1:ce=ye;var ke=N.type,Te=N.stateNode;if((N.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(qo===null||!qo.has(Te)))){N.flags|=65536,i&=-i,N.lanes|=i;var et=c0(N,ce,i);Ir(N,et);break e}}N=N.return}while(N!==null)}$0(c)}catch(Lt){i=Lt,En===c&&c!==null&&(En=c=c.return);continue}break}while(!0)}function q0(){var r=Wu.current;return Wu.current=Mu,r===null?Mu:r}function yh(){(Un===0||Un===3||Un===2)&&(Un=4),Xn===null||(bl&268435455)===0&&(Hu&268435455)===0||Wo(Xn,ls)}function Xu(r,i){var c=xr;xr|=2;var p=q0();(Xn!==r||ls!==i)&&(fo=null,_l(r,i));do try{R1();break}catch(b){B0(r,b)}while(!0);if(gr(),xr=c,Wu.current=p,En!==null)throw Error(t(261));return Xn=null,ls=0,Un}function R1(){for(;En!==null;)z0(En)}function F1(){for(;En!==null&&!ma();)z0(En)}function z0(r){var i=V0(r.alternate,r,mi);r.memoizedProps=r.pendingProps,i===null?$0(r):En=i,uh.current=null}function $0(r){var i=r;do{var c=i.alternate;if(r=i.return,(i.flags&32768)===0){if(c=C1(c,i,mi),c!==null){En=c;return}}else{if(c=E1(c,i),c!==null){c.flags&=32767,En=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Un=6,En=null;return}}if(i=i.sibling,i!==null){En=i;return}En=i=r}while(i!==null);Un===0&&(Un=5)}function Nl(r,i,c){var p=fr,b=Fi.transition;try{Fi.transition=null,fr=1,M1(r,i,c,p)}finally{Fi.transition=b,fr=p}return null}function M1(r,i,c,p){do cc();while(zo!==null);if((xr&6)!==0)throw Error(t(327));c=r.finishedWork;var b=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var N=c.lanes|c.childLanes;if(ds(r,N),r===Xn&&(En=Xn=null,ls=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Gu||(Gu=!0,G0(Es,function(){return cc(),null})),N=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||N){N=Fi.transition,Fi.transition=null;var D=fr;fr=1;var ce=xr;xr|=4,uh.current=null,T1(r,c),I0(c,r),al(ao),Vs=!!pl,ao=pl=null,r.current=c,I1(c),_i(),xr=ce,fr=D,Fi.transition=N}else r.current=c;if(Gu&&(Gu=!1,zo=r,Yu=b),N=r.pendingLanes,N===0&&(qo=null),xo(c.stateNode),Zs(r,Nr()),i!==null)for(p=r.onRecoverableError,c=0;c<i.length;c++)b=i[c],p(b.value,{componentStack:b.stack,digest:b.digest});if(Vu)throw Vu=!1,r=fh,fh=null,r;return(Yu&1)!==0&&r.tag!==0&&cc(),N=r.pendingLanes,(N&1)!==0?r===ph?au++:(au=0,ph=r):au=0,S(),null}function cc(){if(zo!==null){var r=$i(Yu),i=Fi.transition,c=fr;try{if(Fi.transition=null,fr=16>r?16:r,zo===null)var p=!1;else{if(r=zo,zo=null,Yu=0,(xr&6)!==0)throw Error(t(331));var b=xr;for(xr|=4,gt=r.current;gt!==null;){var N=gt,D=N.child;if((gt.flags&16)!==0){var ce=N.deletions;if(ce!==null){for(var ye=0;ye<ce.length;ye++){var Ie=ce[ye];for(gt=Ie;gt!==null;){var Ge=gt;switch(Ge.tag){case 0:case 11:case 15:nu(8,Ge,N)}var Je=Ge.child;if(Je!==null)Je.return=Ge,gt=Je;else for(;gt!==null;){Ge=gt;var Ve=Ge.sibling,lt=Ge.return;if(P0(Ge),Ge===Ie){gt=null;break}if(Ve!==null){Ve.return=lt,gt=Ve;break}gt=lt}}}var yt=N.alternate;if(yt!==null){var At=yt.child;if(At!==null){yt.child=null;do{var wn=At.sibling;At.sibling=null,At=wn}while(At!==null)}}gt=N}}if((N.subtreeFlags&2064)!==0&&D!==null)D.return=N,gt=D;else e:for(;gt!==null;){if(N=gt,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:nu(9,N,N.return)}var Ee=N.sibling;if(Ee!==null){Ee.return=N.return,gt=Ee;break e}gt=N.return}}var ke=r.current;for(gt=ke;gt!==null;){D=gt;var Te=D.child;if((D.subtreeFlags&2064)!==0&&Te!==null)Te.return=D,gt=Te;else e:for(D=ke;gt!==null;){if(ce=gt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:$u(9,ce)}}catch(Lt){mn(ce,ce.return,Lt)}if(ce===D){gt=null;break e}var et=ce.sibling;if(et!==null){et.return=ce.return,gt=et;break e}gt=ce.return}}if(xr=b,S(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Ni,r)}catch{}p=!0}return p}finally{fr=c,Fi.transition=i}}return!1}function W0(r,i,c){i=ic(c,i),i=l0(r,i,1),r=an(r,i,1),i=Fs(),r!==null&&(zi(r,1,i),Zs(r,i))}function mn(r,i,c){if(r.tag===3)W0(r,r,c);else for(;i!==null;){if(i.tag===3){W0(i,r,c);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(qo===null||!qo.has(p))){r=ic(c,r),r=c0(i,r,1),i=an(i,r,1),r=Fs(),i!==null&&(zi(i,1,r),Zs(i,r));break}}i=i.return}}function U1(r,i,c){var p=r.pingCache;p!==null&&p.delete(i),i=Fs(),r.pingedLanes|=r.suspendedLanes&c,Xn===r&&(ls&c)===c&&(Un===4||Un===3&&(ls&130023424)===ls&&500>Nr()-hh?_l(r,0):dh|=c),Zs(r,i)}function H0(r,i){i===0&&((r.mode&1)===0?i=1:(i=In,In<<=1,(In&130023424)===0&&(In=4194304)));var c=Fs();r=Tr(r,i),r!==null&&(zi(r,i,c),Zs(r,c))}function B1(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),H0(r,c)}function q1(r,i){var c=0;switch(r.tag){case 13:var p=r.stateNode,b=r.memoizedState;b!==null&&(c=b.retryLane);break;case 19:p=r.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(i),H0(r,c)}var V0;V0=function(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps||xs.current)Xs=!0;else{if((r.lanes&c)===0&&(i.flags&128)===0)return Xs=!1,P1(r,i,c);Xs=(r.flags&131072)!==0}else Xs=!1,Be&&(i.flags&1048576)!==0&&Ae(i,V,i.index);switch(i.lanes=0,i.tag){case 2:var p=i.type;qu(r,i),r=i.pendingProps;var b=Do(i,Fn.current);Jr(i,c),b=vl(null,i,p,r,b,c);var N=Ri();return i.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,ys(p)?(N=!0,co(i)):N=!1,i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Mn(i),b.updater=Uu,i.stateNode=b,b._reactInternals=i,Jd(i,p,r,c),i=eh(null,i,p,!0,N,c)):(i.tag=0,Be&&N&&Fe(i),Rs(null,i,b,c),i=i.child),i;case 16:p=i.elementType;e:{switch(qu(r,i),r=i.pendingProps,b=p._init,p=b(p._payload),i.type=p,b=i.tag=$1(p),r=ia(p,r),b){case 0:i=Zd(null,i,p,r,c);break e;case 1:i=x0(null,i,p,r,c);break e;case 11:i=f0(null,i,p,r,c);break e;case 14:i=p0(null,i,p,ia(p.type,r),c);break e}throw Error(t(306,p,""))}return i;case 0:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ia(p,b),Zd(r,i,p,b,c);case 1:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ia(p,b),x0(r,i,p,b,c);case 3:e:{if(y0(i),r===null)throw Error(t(387));p=i.pendingProps,N=i.memoizedState,b=N.element,bs(r,i),Jn(i,p,null,c);var D=i.memoizedState;if(p=D.element,N.isDehydrated)if(N={element:p,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},i.updateQueue.baseState=N,i.memoizedState=N,i.flags&256){b=ic(Error(t(423)),i),i=b0(r,i,p,c,b);break e}else if(p!==b){b=ic(Error(t(424)),i),i=b0(r,i,p,c,b);break e}else for(Re=as(i.stateNode.containerInfo.firstChild),De=i,Be=!0,qe=null,c=Hr(i,null,p,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ht(),p===b){i=ho(r,i,c);break e}Rs(r,i,p,c)}i=i.child}return i;case 5:return Iu(i),r===null&&vt(i),p=i.type,b=i.pendingProps,N=r!==null?r.memoizedProps:null,D=b.children,Vc(p,b)?D=null:N!==null&&Vc(p,N)&&(i.flags|=32),v0(r,i),Rs(r,i,D,c),i.child;case 6:return r===null&&vt(i),null;case 13:return w0(r,i,c);case 4:return Ro(i,i.stateNode.containerInfo),p=i.pendingProps,r===null?i.child=hn(i,null,p,c):Rs(r,i,p,c),i.child;case 11:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ia(p,b),f0(r,i,p,b,c);case 7:return Rs(r,i,i.pendingProps,c),i.child;case 8:return Rs(r,i,i.pendingProps.children,c),i.child;case 12:return Rs(r,i,i.pendingProps.children,c),i.child;case 10:e:{if(p=i.type._context,b=i.pendingProps,N=i.memoizedProps,D=b.value,jr(yn,p._currentValue),p._currentValue=D,N!==null)if(Gr(N.value,D)){if(N.children===b.children&&!xs.current){i=ho(r,i,c);break e}}else for(N=i.child,N!==null&&(N.return=i);N!==null;){var ce=N.dependencies;if(ce!==null){D=N.child;for(var ye=ce.firstContext;ye!==null;){if(ye.context===p){if(N.tag===1){ye=sn(-1,c&-c),ye.tag=2;var Ie=N.updateQueue;if(Ie!==null){Ie=Ie.shared;var Ge=Ie.pending;Ge===null?ye.next=ye:(ye.next=Ge.next,Ge.next=ye),Ie.pending=ye}}N.lanes|=c,ye=N.alternate,ye!==null&&(ye.lanes|=c),vr(N.return,c,i),ce.lanes|=c;break}ye=ye.next}}else if(N.tag===10)D=N.type===i.type?null:N.child;else if(N.tag===18){if(D=N.return,D===null)throw Error(t(341));D.lanes|=c,ce=D.alternate,ce!==null&&(ce.lanes|=c),vr(D,c,i),D=N.sibling}else D=N.child;if(D!==null)D.return=N;else for(D=N;D!==null;){if(D===i){D=null;break}if(N=D.sibling,N!==null){N.return=D.return,D=N;break}D=D.return}N=D}Rs(r,i,b.children,c),i=i.child}return i;case 9:return b=i.type,p=i.pendingProps.children,Jr(i,c),b=Xr(b),p=p(b),i.flags|=1,Rs(r,i,p,c),i.child;case 14:return p=i.type,b=ia(p,i.pendingProps),b=ia(p.type,b),p0(r,i,p,b,c);case 15:return m0(r,i,i.type,i.pendingProps,c);case 17:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ia(p,b),qu(r,i),i.tag=1,ys(p)?(r=!0,co(i)):r=!1,Jr(i,c),a0(i,p,b),Jd(i,p,b,c),eh(null,i,p,!0,r,c);case 19:return N0(r,i,c);case 22:return g0(r,i,c)}throw Error(t(156,i.tag))};function G0(r,i){return Bs(r,i)}function z1(r,i,c,p){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(r,i,c,p){return new z1(r,i,c,p)}function bh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $1(r){if(typeof r=="function")return bh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===B)return 11;if(r===ee)return 14}return 2}function Ho(r,i){var c=r.alternate;return c===null?(c=Mi(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Qu(r,i,c,p,b,N){var D=2;if(p=r,typeof r=="function")bh(r)&&(D=1);else if(typeof r=="string")D=5;else e:switch(r){case H:return kl(c.children,b,N,i);case re:D=8,b|=8;break;case J:return r=Mi(12,c,i,b|2),r.elementType=J,r.lanes=N,r;case ie:return r=Mi(13,c,i,b),r.elementType=ie,r.lanes=N,r;case M:return r=Mi(19,c,i,b),r.elementType=M,r.lanes=N,r;case ae:return Zu(c,b,N,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case W:D=10;break e;case T:D=9;break e;case B:D=11;break e;case ee:D=14;break e;case fe:D=16,p=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Mi(D,c,i,b),i.elementType=r,i.type=p,i.lanes=N,i}function kl(r,i,c,p){return r=Mi(7,r,p,i),r.lanes=c,r}function Zu(r,i,c,p){return r=Mi(22,r,p,i),r.elementType=ae,r.lanes=c,r.stateNode={isHidden:!1},r}function wh(r,i,c){return r=Mi(6,r,null,i),r.lanes=c,r}function _h(r,i,c){return i=Mi(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function W1(r,i,c,p,b){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qs(0),this.expirationTimes=qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qs(0),this.identifierPrefix=p,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Nh(r,i,c,p,b,N,D,ce,ye){return r=new W1(r,i,c,ce,ye),i===1?(i=1,N===!0&&(i|=8)):i=0,N=Mi(3,null,null,i),r.current=N,N.stateNode=r,N.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mn(N),r}function H1(r,i,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:p==null?null:""+p,children:r,containerInfo:i,implementation:c}}function Y0(r){if(!r)return Oa;r=r._reactInternals;e:{if(Zr(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(ys(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var c=r.type;if(ys(c))return Jc(r,c,i)}return i}function K0(r,i,c,p,b,N,D,ce,ye){return r=Nh(c,p,!0,r,b,N,D,ce,ye),r.context=Y0(null),c=r.current,p=Fs(),b=$o(c),N=sn(p,b),N.callback=i??null,an(c,N,b),r.current.lanes=b,zi(r,b,p),Zs(r,p),r}function ed(r,i,c,p){var b=i.current,N=Fs(),D=$o(b);return c=Y0(c),i.context===null?i.context=c:i.pendingContext=c,i=sn(N,D),i.payload={element:r},p=p===void 0?null:p,p!==null&&(i.callback=p),r=an(b,i,D),r!==null&&(la(r,b,D,N),Kn(r,b,D)),D}function td(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function J0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function kh(r,i){J0(r,i),(r=r.alternate)&&J0(r,i)}function V1(){return null}var X0=typeof reportError=="function"?reportError:function(r){console.error(r)};function Sh(r){this._internalRoot=r}rd.prototype.render=Sh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));ed(r,i,null,null)},rd.prototype.unmount=Sh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;wl(function(){ed(null,r,null,null)}),i[Gn]=null}};function rd(r){this._internalRoot=r}rd.prototype.unstable_scheduleHydration=function(r){if(r){var i=bo();r={blockedOn:null,target:r,priority:i};for(var c=0;c<$s.length&&i!==0&&i<$s[c].priority;c++);$s.splice(c,0,r),c===0&&Ha(r)}};function jh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function nd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Q0(){}function G1(r,i,c,p,b){if(b){if(typeof p=="function"){var N=p;p=function(){var Ie=td(D);N.call(Ie)}}var D=K0(i,p,r,0,null,!1,!1,"",Q0);return r._reactRootContainer=D,r[Gn]=D.current,so(r.nodeType===8?r.parentNode:r),wl(),D}for(;b=r.lastChild;)r.removeChild(b);if(typeof p=="function"){var ce=p;p=function(){var Ie=td(ye);ce.call(Ie)}}var ye=Nh(r,0,!1,null,null,!1,!1,"",Q0);return r._reactRootContainer=ye,r[Gn]=ye.current,so(r.nodeType===8?r.parentNode:r),wl(function(){ed(i,ye,c,p)}),ye}function sd(r,i,c,p,b){var N=c._reactRootContainer;if(N){var D=N;if(typeof b=="function"){var ce=b;b=function(){var ye=td(D);ce.call(ye)}}ed(i,D,r,b)}else D=G1(c,i,r,b,p);return td(D)}ji=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var c=cs(i.pendingLanes);c!==0&&(ii(i,c|1),Zs(i,Nr()),(xr&6)===0&&(lc=Nr()+500,S()))}break;case 13:wl(function(){var p=Tr(r,1);if(p!==null){var b=Fs();la(p,r,1,b)}}),kh(r,1)}},Wa=function(r){if(r.tag===13){var i=Tr(r,134217728);if(i!==null){var c=Fs();la(i,r,134217728,c)}kh(r,134217728)}},yo=function(r){if(r.tag===13){var i=$o(r),c=Tr(r,i);if(c!==null){var p=Fs();la(c,r,i,p)}kh(r,i)}},bo=function(){return fr},ba=function(r,i){var c=fr;try{return fr=r,i()}finally{fr=c}},Pt=function(r,i,c){switch(i){case"input":if(Rt(r,c),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var p=c[i];if(p!==r&&p.form===r.form){var b=ml(p);if(!b)throw Error(t(90));He(p),Rt(p,b)}}}break;case"textarea":Wt(r,c);break;case"select":i=c.value,i!=null&&st(r,!!c.multiple,i,!1)}},cn=vh,As=wl;var Y1={usingClientEntryPoint:!1,Events:[Oo,oo,ml,dr,ni,vh]},ou={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K1={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=rs(r),r===null?null:r.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||V1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{Ni=id.inject(K1),Hn=id}catch{}}return ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1,ei.createPortal=function(r,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jh(i))throw Error(t(200));return H1(r,i,null,c)},ei.createRoot=function(r,i){if(!jh(r))throw Error(t(299));var c=!1,p="",b=X0;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=Nh(r,1,!1,null,null,c,!1,p,b),r[Gn]=i.current,so(r.nodeType===8?r.parentNode:r),new Sh(i)},ei.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=rs(i),r=r===null?null:r.stateNode,r},ei.flushSync=function(r){return wl(r)},ei.hydrate=function(r,i,c){if(!nd(i))throw Error(t(200));return sd(null,r,i,!0,c)},ei.hydrateRoot=function(r,i,c){if(!jh(r))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,b=!1,N="",D=X0;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onRecoverableError!==void 0&&(D=c.onRecoverableError)),i=K0(i,null,r,1,c??null,b,!1,N,D),r[Gn]=i.current,so(r),p)for(r=0;r<p.length;r++)c=p[r],b=c._getVersion,b=b(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,b]:i.mutableSourceEagerHydrationData.push(c,b);return new rd(i)},ei.render=function(r,i,c){if(!nd(i))throw Error(t(200));return sd(null,r,i,!1,c)},ei.unmountComponentAtNode=function(r){if(!nd(r))throw Error(t(40));return r._reactRootContainer?(wl(function(){sd(null,null,r,!1,function(){r._reactRootContainer=null,r[Gn]=null})}),!0):!1},ei.unstable_batchedUpdates=vh,ei.unstable_renderSubtreeIntoContainer=function(r,i,c,p){if(!nd(c))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return sd(r,i,c,!1,p)},ei.version="18.3.1-next-f1338f8080-20240426",ei}var ap;function s2(){if(ap)return Ch.exports;ap=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ch.exports=n2(),Ch.exports}var op;function i2(){if(op)return ad;op=1;var n=s2();return ad.createRoot=n.createRoot,ad.hydrateRoot=n.hydrateRoot,ad}var a2=i2();const o2=_u(a2),l2="modulepreload",c2=function(n){return"/"+n},lp={},el=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");a=f(t.map(m=>{if(m=c2(m),m in lp)return;lp[m]=!0;const v=m.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":l2,v||(k.as="script"),k.crossOrigin="",k.href=m,d&&k.setAttribute("nonce",d),document.head.appendChild(k),v)return new Promise((y,P)=>{k.addEventListener("load",y),k.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},u2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>el(async()=>{const{default:s}=await Promise.resolve().then(()=>Rc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Bf extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class cp extends Bf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class up extends Bf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class dp extends Bf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pf;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(pf||(pf={}));var d2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class h2{constructor(e,{headers:t={},customFetch:s,region:a=pf.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=u2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return d2(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:o,method:u,body:d,signal:f}=s;let m={},{region:v}=s;v||(v=this.region);const w=new URL(`${this.url}/${t}`);v&&v!=="any"&&(m["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let k;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",k=d):typeof d=="string"?(m["Content-Type"]="text/plain",k=d):typeof FormData<"u"&&d instanceof FormData?k=d:(m["Content-Type"]="application/json",k=JSON.stringify(d)));const y=yield this.fetch(w.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:k,signal:f}).catch(A=>{throw A.name==="AbortError"?A:new cp(A)}),P=y.headers.get("x-relay-error");if(P&&P==="true")throw new up(y);if(!y.ok)throw new dp(y);let L=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),I;return L==="application/json"?I=yield y.json():L==="application/octet-stream"?I=yield y.blob():L==="text/event-stream"?I=y:L==="multipart/form-data"?I=yield y.formData():I=yield y.text(),{data:I,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new cp(o)}:{data:null,error:o,response:o instanceof dp||o instanceof up?o.context:void 0}}})}}var Zn={},uc={},dc={},hc={},fc={},pc={},f2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oc=f2();const p2=Oc.fetch,sg=Oc.fetch.bind(Oc),ig=Oc.Headers,m2=Oc.Request,g2=Oc.Response,Rc=Object.freeze(Object.defineProperty({__proto__:null,Headers:ig,Request:m2,Response:g2,default:sg,fetch:p2},Symbol.toStringTag,{value:"Module"})),v2=X1(Rc);var od={},hp;function ag(){if(hp)return od;hp=1,Object.defineProperty(od,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return od.default=n,od}var fp;function og(){if(fp)return pc;fp=1;var n=pc&&pc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(pc,"__esModule",{value:!0});const e=n(v2),t=n(ag());class s{constructor(o){var u,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(u=o.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=new Headers(this.headers),this.headers.set(o,u),this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,w,k,y;let P=null,L=null,I=null,A=m.status,G=m.statusText;if(m.ok){if(this.method!=="HEAD"){const he=await m.text();he===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?L=he:L=JSON.parse(he))}const $=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),le=(k=m.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");$&&le&&le.length>1&&(I=parseInt(le[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(L)&&(L.length>1?(P={code:"PGRST116",details:`Results contain ${L.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},L=null,I=null,A=406,G="Not Acceptable"):L.length===1?L=L[0]:L=null)}else{const $=await m.text();try{P=JSON.parse($),Array.isArray(P)&&m.status===404&&(L=[],P=null,A=200,G="OK")}catch{m.status===404&&$===""?(A=204,G="No Content"):P={message:$}}if(P&&this.isMaybeSingle&&(!((y=P?.details)===null||y===void 0)&&y.includes("0 rows"))&&(P=null,A=200,G="OK"),P&&this.shouldThrowOnError)throw new t.default(P)}return{error:P,data:L,count:I,status:A,statusText:G}});return this.shouldThrowOnError||(f=f.catch(m=>{var v,w,k;return{error:{message:`${(v=m?.name)!==null&&v!==void 0?v:"FetchError"}: ${m?.message}`,details:`${(w=m?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(k=m?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,u)}returns(){return this}overrideTypes(){return this}}return pc.default=s,pc}var pp;function lg(){if(pp)return fc;pp=1;var n=fc&&fc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fc,"__esModule",{value:!0});const e=n(og());class t extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:d,referencedTable:f=d}={}){const m=f?`${f}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:d=u}={}){const f=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:d=!1,wal:f=!1,format:m="text"}={}){var v;const w=[a?"analyze":null,o?"verbose":null,u?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),k=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${k}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return fc.default=t,fc}var mp;function qf(){if(mp)return hc;mp=1;var n=hc&&hc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hc,"__esModule",{value:!0});const e=n(lg());class t extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${f}fts${m}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return hc.default=t,hc}var gp;function cg(){if(gp)return dc;gp=1;var n=dc&&dc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dc,"__esModule",{value:!0});const e=n(qf());class t{constructor(a,{headers:o={},schema:u,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=u,this.fetch=d}select(a,o){const{head:u=!1,count:d}=o??{},f=u?"HEAD":"GET";let m=!1;const v=(a??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:u=!0}={}){var d;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(m.length>0){const v=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:d,defaultToNull:f=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((k,y)=>k.concat(Object.keys(y)),[]);if(w.length>0){const k=[...new Set(w)].map(y=>`"${y}"`);this.url.searchParams.set("columns",k.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:o}={}){var u;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var o;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return dc.default=t,dc}var vp;function x2(){if(vp)return uc;vp=1;var n=uc&&uc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(uc,"__esModule",{value:!0});const e=n(cg()),t=n(qf());class s{constructor(o,{headers:u={},schema:d,fetch:f}={}){this.url=o,this.headers=new Headers(u),this.schemaName=d,this.fetch=f}from(o){const u=new URL(`${this.url}/${o}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,u={},{head:d=!1,get:f=!1,count:m}={}){var v;let w;const k=new URL(`${this.url}/rpc/${o}`);let y;d||f?(w=d?"HEAD":"GET",Object.entries(u).filter(([L,I])=>I!==void 0).map(([L,I])=>[L,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([L,I])=>{k.searchParams.append(L,I)})):(w="POST",y=u);const P=new Headers(this.headers);return m&&P.set("Prefer",`count=${m}`),new t.default({method:w,url:k,headers:P,schema:this.schemaName,body:y,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return uc.default=s,uc}var xp;function y2(){if(xp)return Zn;xp=1;var n=Zn&&Zn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.PostgrestError=Zn.PostgrestBuilder=Zn.PostgrestTransformBuilder=Zn.PostgrestFilterBuilder=Zn.PostgrestQueryBuilder=Zn.PostgrestClient=void 0;const e=n(x2());Zn.PostgrestClient=e.default;const t=n(cg());Zn.PostgrestQueryBuilder=t.default;const s=n(qf());Zn.PostgrestFilterBuilder=s.default;const a=n(lg());Zn.PostgrestTransformBuilder=a.default;const o=n(og());Zn.PostgrestBuilder=o.default;const u=n(ag());return Zn.PostgrestError=u.default,Zn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},Zn}var b2=y2();const w2=_u(b2),{PostgrestClient:_2,PostgrestQueryBuilder:cw,PostgrestFilterBuilder:uw,PostgrestTransformBuilder:dw,PostgrestBuilder:hw,PostgrestError:fw}=w2;class N2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const k2="2.75.0",S2=`realtime-js/${k2}`,j2="1.0.0",mf=1e4,A2=1e3,P2=100;var fu;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(fu||(fu={}));var Bn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bn||(Bn={}));var da;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(da||(da={}));var gf;(function(n){n.websocket="websocket"})(gf||(gf={}));var El;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(El||(El={}));class C2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2);let u=this.HEADER_LENGTH+2;const d=s.decode(e.slice(u,u+a));u=u+a;const f=s.decode(e.slice(u,u+o));u=u+o;const m=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:f,payload:m}}}class ug{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(zr||(zr={}));const yp=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=E2(u,n,e,a),o),{}):{}},E2=(n,e,t,s)=>{const a=e.find(d=>d.name===n),o=a?.type,u=t[n];return o&&!s.includes(o)?dg(o,u):vf(u)},dg=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return O2(e,t)}switch(n){case zr.bool:return L2(e);case zr.float4:case zr.float8:case zr.int2:case zr.int4:case zr.int8:case zr.numeric:case zr.oid:return T2(e);case zr.json:case zr.jsonb:return I2(e);case zr.timestamp:return D2(e);case zr.abstime:case zr.date:case zr.daterange:case zr.int4range:case zr.int8range:case zr.money:case zr.reltime:case zr.text:case zr.time:case zr.timestamptz:case zr.timetz:case zr.tsrange:case zr.tstzrange:return vf(e);default:return vf(e)}},vf=n=>n,L2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},T2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},I2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},O2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let o;const u=n.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>dg(e,d))}return n},D2=n=>typeof n=="string"?n.replace(" ","T"):n,hg=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Th{constructor(e,t,s={},a=mf){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(bp||(bp={}));class pu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pu.syncState(this.state,a,o,u),this.pendingDiffs.forEach(f=>{this.state=pu.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=pu.syncDiff(this.state,a,o,u),d())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),u=this.transformState(t),d={},f={};return this.map(o,(m,v)=>{u[m]||(f[m]=v)}),this.map(u,(m,v)=>{const w=o[m];if(w){const k=v.map(I=>I.presence_ref),y=w.map(I=>I.presence_ref),P=v.filter(I=>y.indexOf(I.presence_ref)<0),L=w.filter(I=>k.indexOf(I.presence_ref)<0);P.length>0&&(d[m]=P),L.length>0&&(f[m]=L)}else d[m]=v}),this.syncDiff(o,{joins:d,leaves:f},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,f)=>{var m;const v=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(f),v.length>0){const w=e[d].map(y=>y.presence_ref),k=v.filter(y=>w.indexOf(y.presence_ref)<0);e[d].unshift(...k)}s(d,v,f)}),this.map(u,(d,f)=>{let m=e[d];if(!m)return;const v=f.map(w=>w.presence_ref);m=m.filter(w=>v.indexOf(w.presence_ref)<0),e[d]=m,a(d,m,f),m.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wp;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(wp||(wp={}));var mu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(mu||(mu={}));var go;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(go||(go={}));class zf{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Th(this,da.join,this.params,this.timeout),this.rejoinTimer=new ug(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(da.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new pu(this),this.broadcastEndpointURL=hg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Bn.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,m=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[mu.PRESENCE]&&this.bindings[mu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},k={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(go.CHANNEL_ERROR,y)),this._onClose(()=>e?.(go.CLOSED)),this.updateJoinPayload(Object.assign({config:k},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var P;if(this.socket.setAuth(),y===void 0){e?.(go.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,I=(P=L?.length)!==null&&P!==void 0?P:0,A=[];for(let G=0;G<I;G++){const U=L[G],{filter:{event:$,schema:le,table:he,filter:H}}=U,re=y&&y[G];if(re&&re.event===$&&re.schema===le&&re.table===he&&re.filter===H)A.push(Object.assign(Object.assign({},U),{id:re.id}));else{this.unsubscribe(),this.state=Bn.errored,e?.(go.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(go.SUBSCRIBED);return}}).receive("error",y=>{this.state=Bn.errored,e?.(go.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(go.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Bn.joined&&e===mu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,f;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(da.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Th(this,da.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Th(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>P2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const u=e.toLocaleLowerCase(),{close:d,error:f,leave:m,join:v}=da;if(s&&[d,f,m,v].indexOf(u)>=0&&s!==this._joinRef())return;let k=this._onMessage(u,t,s);if(t&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var P,L,I;return((P=y.filter)===null||P===void 0?void 0:P.event)==="*"||((I=(L=y.filter)===null||L===void 0?void 0:L.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===u}).map(y=>y.callback(k,s)):(o=this.bindings[u])===null||o===void 0||o.filter(y=>{var P,L,I,A,G,U;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const $=y.id,le=(P=y.filter)===null||P===void 0?void 0:P.event;return $&&((L=t.ids)===null||L===void 0?void 0:L.includes($))&&(le==="*"||le?.toLocaleLowerCase()===((I=t.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const $=(G=(A=y?.filter)===null||A===void 0?void 0:A.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return $==="*"||$===((U=t?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof k=="object"&&"ids"in k){const P=k.data,{schema:L,table:I,commit_timestamp:A,type:G,errors:U}=P;k=Object.assign(Object.assign({},{schema:L,table:I,commit_timestamp:A,eventType:G,new:{},old:{},errors:U}),this._getPayloadRecords(P))}y.callback(k,s)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&zf.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(da.close,{},e)}_onError(e){this._on(da.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=yp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=yp(e.columns,e.old_record)),t}}const Ih=()=>{},ld={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},R2=[1e3,2e3,5e3,1e4],F2=1e4,M2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class U2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mf,this.transport=null,this.heartbeatIntervalMs=ld.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ih,this.ref=0,this.reconnectTimer=null,this.logger=Ih,this.conn=null,this.sendBuffer=[],this.serializer=new C2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...u)=>el(async()=>{const{default:d}=await Promise.resolve().then(()=>Rc);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...u)=>o(...u)},!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${gf.websocket}`,this.httpEndpoint=hg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=N2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:j2}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case fu.connecting:return El.Connecting;case fu.open:return El.Open;case fu.closing:return El.Closing;default:return El.Closed}}isConnected(){return this.connectionState()===El.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new zf(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,u=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(A2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ld.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:u}=t,d=u?`(${u})`:"",f=o.status||"";this.log("receive",`${f} ${s} ${a} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(a,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(da.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([M2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:S2};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(da.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new ug(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ld.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,u,d,f,m,v;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:mf,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:ld.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Ih,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(w=>R2[w-1]||F2),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((w,k)=>k(JSON.stringify(w))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class $f extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Tn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class B2 extends $f{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xf extends $f{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var q2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const fg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>el(async()=>{const{default:s}=await Promise.resolve().then(()=>Rc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},z2=()=>q2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield el(()=>Promise.resolve().then(()=>Rc),void 0)).Response:Response}),yf=n=>{if(Array.isArray(n))return n.map(t=>yf(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=yf(s)}),e},$2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ul=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const Oh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),W2=(n,e,t)=>Ul(void 0,void 0,void 0,function*(){const s=yield z2();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{const o=n.status||500,u=a?.statusCode||o+"";e(new B2(Oh(a),o,u))}).catch(a=>{e(new xf(Oh(a),a))}):e(new xf(Oh(n),n))}),H2=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||!s?a:($2(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Nu(n,e,t,s,a,o){return Ul(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(t,H2(e,s,a,o)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>W2(f,d,s))})})}function Pd(n,e,t,s){return Ul(this,void 0,void 0,function*(){return Nu(n,"GET",e,t,s)})}function Ba(n,e,t,s,a){return Ul(this,void 0,void 0,function*(){return Nu(n,"POST",e,s,a,t)})}function bf(n,e,t,s,a){return Ul(this,void 0,void 0,function*(){return Nu(n,"PUT",e,s,a,t)})}function V2(n,e,t,s){return Ul(this,void 0,void 0,function*(){return Nu(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function pg(n,e,t,s,a){return Ul(this,void 0,void 0,function*(){return Nu(n,"DELETE",e,s,a,t)})}var G2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class Y2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return G2(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Tn(e))return{data:null,error:e};throw e}})}}var K2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class J2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new Y2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return K2(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Tn(e))return{data:null,error:e};throw e}})}}var ti=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const X2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_p={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Q2{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=fg(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return ti(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},_p),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const m=this._removeEmptyFolders(t),v=this._getFinalPath(m),w=yield(e=="PUT"?bf:Ba)(this.fetch,`${this.url}/object/${v}`,o,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Tn(o))return{data:null,error:o};throw o}})}upload(e,t,s){return ti(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return ti(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let f;const m=Object.assign({upsert:_p.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",m.cacheControl)):(f=s,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const w=yield bf(this.fetch,d.toString(),f,{headers:v});return{data:{path:o,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Tn(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return ti(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield Ba(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+o.url),d=u.searchParams.get("token");if(!d)throw new $f("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s))return{data:null,error:s};throw s}})}update(e,t,s){return ti(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ti(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}copy(e,t,s){return ti(this,void 0,void 0,function*(){try{return{data:{path:(yield Ba(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return ti(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Ba(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return ti(this,void 0,void 0,function*(){try{const a=yield Ba(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),u=o?`?${o}`:"",d=this._getFinalPath(e),f=()=>Pd(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new J2(f,this.shouldThrowOnError)}info(e){return ti(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Pd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:yf(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s))return{data:null,error:s};throw s}})}exists(e){return ti(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield V2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s)&&s instanceof xf){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const d=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&a.push(f);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${m}`)}}}remove(e){return ti(this,void 0,void 0,function*(){try{return{data:yield pg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Tn(t))return{data:null,error:t};throw t}})}list(e,t,s){return ti(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},X2),t),{prefix:e||""});return{data:yield Ba(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}listV2(e,t){return ti(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ba(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Z2="2.75.0",ev={"X-Client-Info":`storage-js/${Z2}`};var mc=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class tv{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ev),t),this.fetch=fg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return mc(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Tn(e))return{data:null,error:e};throw e}})}getBucket(e){return mc(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Tn(t))return{data:null,error:t};throw t}})}createBucket(e){return mc(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Ba(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return mc(this,void 0,void 0,function*(){try{return{data:yield bf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Tn(s))return{data:null,error:s};throw s}})}emptyBucket(e){return mc(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Tn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return mc(this,void 0,void 0,function*(){try{return{data:yield pg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Tn(t))return{data:null,error:t};throw t}})}}class rv extends tv{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new Q2(this.url,this.headers,e,this.fetch)}}const nv="2.75.0";let hu="";typeof Deno<"u"?hu="deno":typeof document<"u"?hu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hu="react-native":hu="node";const sv={"X-Client-Info":`supabase-js-${hu}/${nv}`},iv={headers:sv},av={schema:"public"},ov={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lv={};var cv=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const uv=n=>{let e;return n?e=n:typeof fetch>"u"?e=sg:e=fetch,(...t)=>e(...t)},dv=()=>typeof Headers>"u"?ig:Headers,hv=(n,e,t)=>{const s=uv(t),a=dv();return(o,u)=>cv(void 0,void 0,void 0,function*(){var d;const f=(d=yield e())!==null&&d!==void 0?d:n;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},u),{headers:m}))})};var fv=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};function pv(n){return n.endsWith("/")?n:n+"/"}function mv(n,e){var t,s;const{db:a,auth:o,realtime:u,global:d}=n,{db:f,auth:m,realtime:v,global:w}=e,k={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},w),d),{headers:Object.assign(Object.assign({},(t=w?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>fv(this,void 0,void 0,function*(){return""})};return n.accessToken?k.accessToken=n.accessToken:delete k.accessToken,k}function gv(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const mg="2.75.0",kc=30*1e3,wf=3,Dh=wf*kc,vv="http://localhost:9999",xv="supabase.auth.token",yv={"X-Client-Info":`gotrue-js/${mg}`},_f="X-Supabase-Api-Version",gg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wv=600*1e3;class xu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function zt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class _v extends xu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Nv(n){return zt(n)&&n.name==="AuthApiError"}class Ll extends xu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class rl extends xu{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Xo extends rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kv(n){return zt(n)&&n.name==="AuthSessionMissingError"}class gc extends rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cd extends rl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ud extends rl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sv(n){return zt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Np extends rl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nf extends rl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rh(n){return zt(n)&&n.name==="AuthRetryableFetchError"}class kp extends rl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class kf extends rl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sp=` 	
\r=`.split(""),jv=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Sp.length;e+=1)n[Sp[e].charCodeAt(0)]=-2;for(let e=0;e<Cd.length;e+=1)n[Cd[e].charCodeAt(0)]=e;return n})();function jp(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Cd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Cd[s]),e.queuedBits-=6}}function vg(n,e,t){const s=jv[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ap(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{Cv(u,s,t)};for(let u=0;u<n.length;u+=1)vg(n.charCodeAt(u),a,o);return e.join("")}function Av(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Pv(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Av(s,e)}}function Cv(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Cc(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)vg(n.charCodeAt(a),t,s);return new Uint8Array(e)}function Ev(n){const e=[];return Pv(n,t=>e.push(t)),new Uint8Array(e)}function Ol(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>jp(a,t,s)),jp(null,t,s),e.join("")}function Lv(n){return Math.round(Date.now()/1e3)+n}function Tv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const xi=()=>typeof window<"u"&&typeof document<"u",Sl={tested:!1,writable:!1},xg=()=>{if(!xi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sl.tested)return Sl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Sl.tested=!0,Sl.writable=!0}catch{Sl.tested=!0,Sl.writable=!1}return Sl.writable};function Iv(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const yg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>el(async()=>{const{default:s}=await Promise.resolve().then(()=>Rc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ov=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Sc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},jl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Go=async(n,e)=>{await n.removeItem(e)};class Md{constructor(){this.promise=new Md.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Md.promiseConstructor=Promise;function Fh(n){const e=n.split(".");if(e.length!==3)throw new kf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!bv.test(e[s]))throw new kf("JWT not in base64url format");return{header:JSON.parse(Ap(e[0])),payload:JSON.parse(Ap(e[1])),signature:Cc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dv(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Rv(n,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await n(o);if(!e(o,null,u)){s(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function Fv(n){return("0"+n.toString(16)).substr(-2)}function Mv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Fv).join("")}async function Uv(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function Bv(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Uv(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vc(n,e,t=!1){const s=Mv();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Sc(n,`${e}-code-verifier`,a);const o=await Bv(s);return[o,s===o?"plain":"s256"]}const qv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zv(n){const e=n.headers.get(_f);if(!e||!e.match(qv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $v(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Wv(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xc(n){if(!Hv.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Pp(n){return JSON.parse(JSON.stringify(n))}var Vv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const Al=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Gv=[502,503,504];async function Cp(n){var e;if(!Ov(n))throw new Nf(Al(n),0);if(Gv.includes(n.status))throw new Nf(Al(n),n.status);let t;try{t=await n.json()}catch(o){throw new Ll(Al(o),o)}let s;const a=zv(n);if(a&&a.getTime()>=gg["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new kp(Al(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Xo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new kp(Al(t),n.status,t.weak_password.reasons);throw new _v(Al(t),n.status||500,s)}const Yv=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function nr(n,e,t,s){var a;const o=Object.assign({},s?.headers);o[_f]||(o[_f]=gg["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await Kv(n,e,t+d,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function Kv(n,e,t,s,a,o){const u=Yv(e,s,a,o);let d;try{d=await n(t,Object.assign({},u))}catch(f){throw console.error(f),new Nf(Al(f),0)}if(d.ok||await Cp(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await Cp(f)}}function ua(n){var e;let t=null;Qv(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Lv(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Ep(n){const e=ua(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Qo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Jv(n){return{data:n,error:null}}function Xv(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=n,u=Vv(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function Lp(n){return n}function Qv(n){return n.access_token&&n.refresh_token&&n.expires_in}const Uh=["global","local","others"];var Zv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class ex{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=yg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Uh[0]){if(Uh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uh.join(", ")}`);try{return await nr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(zt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await nr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Qo})}catch(s){if(zt(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Zv(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await nr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Xv,redirectTo:t?.redirectTo})}catch(t){if(zt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await nr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qo})}catch(t){if(zt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},v=await nr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Lp});if(v.error)throw v.error;const w=await v.json(),k=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(f=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(P=>{const L=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(P.split(";")[1].split("=")[1]);m[`${I}Page`]=L}),m.total=parseInt(k)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(zt(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){xc(e);try{return await nr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qo})}catch(t){if(zt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){xc(e);try{return await nr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Qo})}catch(s){if(zt(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){xc(e);try{return await nr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Qo})}catch(s){if(zt(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){xc(e.userId);try{const{data:t,error:s}=await nr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){xc(e.userId),xc(e.id);try{return{data:await nr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},v=await nr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Lp});if(v.error)throw v.error;const w=await v.json(),k=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(f=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(P=>{const L=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(P.split(";")[1].split("=")[1]);m[`${I}Page`]=L}),m.total=parseInt(k)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(zt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await nr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await nr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await nr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await nr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}}function Tp(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const yc={debug:!!(globalThis&&xg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tx extends bg{}async function rx(n,e,t){yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),yc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new tx(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(yc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function nx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function sx(n){return parseInt(n,16)}function ix(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function ax(n){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:f,resources:m,scheme:v,uri:w,version:k}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=wg(n.address),P=v?`${v}://${s}`:s,L=n.statement?`${n.statement}
`:"",I=`${P} wants you to sign in with your Ethereum account:
${y}

${L}`;let A=`URI: ${w}
Version: ${k}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),f&&(A+=`
Request ID: ${f}`),m){let G=`
Resources:`;for(const U of m){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);G+=`
- ${U}`}A+=G}return`${I}
${A}`}class Ln extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Ed extends Ln{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function ox({error:n,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ln({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ln({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ln({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ln({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ln({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ln({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ln({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ln({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(Ng(u)){if(o.rp.id!==u)return new Ln({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ln({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ln({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function lx({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ln({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ln({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(Ng(s)){if(t.rpId!==s)return new Ln({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ln({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var _g=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class cx{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ux=new cx;function dx(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,a=_g(n,["challenge","user","excludeCredentials"]),o=Cc(e).buffer,u=Object.assign(Object.assign({},t),{id:Cc(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const m=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:Cc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function hx(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=_g(n,["challenge","allowCredentials"]),a=Cc(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Cc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function fx(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Ol(new Uint8Array(n.response.attestationObject)),clientDataJSON:Ol(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function px(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Ol(new Uint8Array(a.authenticatorData)),clientDataJSON:Ol(new Uint8Array(a.clientDataJSON)),signature:Ol(new Uint8Array(a.signature)),userHandle:a.userHandle?Ol(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ng(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Ip(){var n,e;return!!(xi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function mx(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:ox({error:e,options:n})}}}async function gx(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:lx({error:e,options:n})}}}const vx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},xx={userVerification:"preferred",hints:["security-key"]};function Ld(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of n)if(a)for(const o in a){const u=a[o];if(u!==void 0)if(Array.isArray(u))s[o]=u;else if(t(u))s[o]=u;else if(e(u)){const d=s[o];e(d)?s[o]=Ld(d,u):s[o]=Ld(u)}else s[o]=u}return s}function yx(n,e){return Ld(vx,n,e||{})}function bx(n,e){return Ld(xx,n,e||{})}class wx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const f=a??ux.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=yx(u.webauthn.credential_options.publicKey,o?.create),{data:v,error:w}=await mx({publicKey:m,signal:f});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const m=bx(u.webauthn.credential_options.publicKey,o?.request),{data:v,error:w}=await gx(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:f}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new Ll("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!t)return{data:null,error:new xu("rpId is required for WebAuthn authentication")};try{if(!Ip())return{data:null,error:new Ll("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:s,credential_response:f.credential_response}})}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new Ll("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!t)return{data:null,error:new xu("rpId is required for WebAuthn registration")};try{if(!Ip())return{data:null,error:new Ll("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===e&&k.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:d};const{data:f,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new Ll("Unexpected error in register",u)}}}}nx();const _x={url:vv,storageKey:xv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Op(n,e,t){return await t()}const bc={};class yu{get jwks(){var e,t;return(t=(e=bc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){bc[this.storageKey]=Object.assign(Object.assign({},bc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=bc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bc[this.storageKey]=Object.assign(Object.assign({},bc[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yu.nextInstanceID,yu.nextInstanceID+=1,this.instanceID>0&&xi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},_x),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new ex({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yg(a.fetch),this.lock=a.lock||Op,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:xi()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=rx:this.lock=Op,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wx(this)},this.persistSession?(a.storage?this.storage=a.storage:xg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tp(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Tp(this.memoryStorage)),xi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Iv(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),xi()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Sv(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return zt(t)?{error:t}:{error:new Ll("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ua}),{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(zt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:v,password:w,options:k}=e;let y=null,P=null;this.flowType==="pkce"&&([y,P]=await vc(this.storage,this.storageKey)),o=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:v,password:w,data:(t=k?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:y,code_challenge_method:P},xform:ua})}else if("phone"in e){const{phone:v,password:w,options:k}=e;o=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(s=k?.data)!==null&&s!==void 0?s:{},channel:(a=k?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:ua})}else throw new cd("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(zt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:d}=e;t=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ep})}else if("phone"in e){const{phone:o,password:u,options:d}=e;t=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ep})}else throw new cd("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new gc}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,u,d,f,m,v,w,k;let y,P;if("message"in e)y=e.message,P=e.signature;else{const{chain:L,wallet:I,statement:A,options:G}=e;let U;if(xi())if(typeof I=="object")U=I;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")U=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!G?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=I}const $=new URL((t=G?.url)!==null&&t!==void 0?t:window.location.href),le=await U.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!le||le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=wg(le[0]);let H=(s=G?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!H){const J=await U.request({method:"eth_chainId"});H=sx(J)}const re={domain:$.host,address:he,statement:A,uri:$.href,version:"1",chainId:H,nonce:(a=G?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(o=G?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=G?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=G?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=G?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=G?.signInWithEthereum)===null||v===void 0?void 0:v.resources};y=ax(re),P=await U.request({method:"personal_sign",params:[ix(y),he]})}try{const{data:L,error:I}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:P},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:ua});if(I)throw I;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new gc}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:I})}catch(L){if(zt(L))return{data:{user:null,session:null},error:L};throw L}}async signInWithSolana(e){var t,s,a,o,u,d,f,m,v,w,k,y;let P,L;if("message"in e)P=e.message,L=e.signature;else{const{chain:I,wallet:A,statement:G,options:U}=e;let $;if(xi())if(typeof A=="object")$=A;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))$=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=A}const le=new URL((t=U?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in $&&$.signIn){const he=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:le.host,uri:le.href}),G?{statement:G}:null));let H;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")H=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)H=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)P=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),L=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${le.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${le.href}`,`Issued At: ${(a=(s=U?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=U?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((u=U?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((d=U?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((f=U?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((m=U?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((w=(v=U?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...U.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const he=await $.signMessage(new TextEncoder().encode(P),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=he}}try{const{data:I,error:A}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Ol(L)},!((k=e.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ua});if(A)throw A;return!I||!I.session||!I.user?{data:{user:null,session:null},error:new gc}:(I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),{data:Object.assign({},I),error:A})}catch(I){if(zt(I))return{data:{user:null,session:null},error:I};throw I}}async _exchangeCodeForSession(e){const t=await jl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:u}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ua});if(await Go(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new gc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(zt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:u}=e,d=await nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ua}),{data:f,error:m}=d;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new gc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,o,u;try{if("email"in e){const{email:d,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await vc(this.storage,this.storageKey));const{error:w}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in e){const{phone:d,options:f}=e,{data:m,error:v}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:v}}throw new cd("You must provide either an email or phone number.")}catch(d){if(zt(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await nr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ua});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(zt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await vc(this.storage,this.storageKey)),await nr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:Jv})}catch(o){if(zt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Xo;const{error:a}=await nr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(zt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:u}=await nr(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:u,error:d}=await nr(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new cd("You must provide either an email or phone number and a type")}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Dh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await jl(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Mh()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,v)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,v))})}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qo}):await this._useSession(async t=>{var s,a,o;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xo}:await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Qo})})}catch(t){if(zt(t))return kv(t)&&(await this._removeSession(),await Go(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Xo;const u=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await vc(this.storage,this.storageKey));const{data:m,error:v}=await nr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:Qo});if(v)throw v;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(zt(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xo;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:u}=Fh(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(zt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Xo;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!xi())throw new ud("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ud(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Np("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ud("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Np("No code detected.");const{data:G,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:d,expires_at:f,token_type:m}=e;if(!o||!d||!u||!m)throw new ud("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(d);let k=v+w;f&&(k=parseInt(f));const y=k-v;y*1e3<=kc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${w}s`);const P=k-w;v-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,k,v):v-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,k,v);const{data:L,error:I}=await this._getUser(o);if(I)throw I;const A={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:k,refresh_token:u,token_type:m,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(s){if(zt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await jl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{error:o};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(Nv(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Go(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Tv(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await vc(this.storage,this.storageKey,!0));try{return await nr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(zt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var u,d,f,m,v;const{data:w,error:k}=o;if(k)throw k;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await nr(this.fetch,"GET",y,{headers:this.headers,jwt:(v=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return xi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(zt(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:u,provider:d,token:f,access_token:m,nonce:v}=e,w=await nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ua}),{data:k,error:y}=w;return y?{data:{user:null,session:null},error:y}:!k||!k.session||!k.user?{data:{user:null,session:null},error:new gc}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),{data:k,error:y})}catch(a){if(zt(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)throw u;return await nr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Rv(async a=>(a>0&&await Dv(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await nr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ua})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Rh(o)&&Date.now()+u-s<kc})}catch(s){if(this._debug(t,"error",s),zt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),xi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await jl(this.storage,this.storageKey);if(a&&this.userStorage){let u=await jl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await Sc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Mh()}else if(a&&!a.user&&!a.user){const u=await jl(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Go(this.storage,this.storageKey+"-user"),await Sc(this.storage,this.storageKey,a)):a.user=Mh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Dh;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Dh}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Rh(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Xo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Md;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Xo;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),zt(o)){const u={data:null,error:o};return Rh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Sc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=Pp(a);await Sc(this.storage,this.storageKey,o)}else{const a=Pp(t);await Sc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Go(this.storage,this.storageKey),await Go(this.storage,this.storageKey+"-code-verifier"),await Go(this.storage,this.storageKey+"-user"),this.userStorage&&await Go(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/kc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${kc}ms, refresh threshold is ${wf} ticks`),a<=wf&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await vc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?{data:null,error:o}:await nr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:m}=await nr(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?fx(e.webauthn.credential_response):px(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await nr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(t){if(zt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=await nr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:dx(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:hx(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(zt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Fh(a.access_token);let d=null;u.aal&&(d=u.aal);let f=d;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const v=u.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+wv>a)return s;const{data:o,error:u}=await nr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:y,error:P}=await this.getSession();if(P||!y.session)return{data:null,error:P};s=y.session.access_token}const{header:a,payload:o,signature:u,raw:{header:d,payload:f}}=Fh(s);t?.allowExpired||$v(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!m){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:o,header:a,signature:u},error:null}}const v=Wv(a.alg),w=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,u,Ev(`${d}.${f}`)))throw new kf("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(zt(s))return{data:null,error:s};throw s}}}yu.nextInstanceID=0;const Nx=yu;class kx extends Nx{constructor(e){super(e)}}var Sx=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{m(s.next(v))}catch(w){u(w)}}function f(v){try{m(s.throw(v))}catch(w){u(w)}}function m(v){v.done?o(v.value):a(v.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class jx{constructor(e,t,s){var a,o,u;this.supabaseUrl=e,this.supabaseKey=t;const d=gv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:av,realtime:lv,auth:Object.assign(Object.assign({},ov),{storageKey:f}),global:iv},v=mv(s??{},m);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(w,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=hv(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new _2(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new rv(this.storageUrl.href,this.headers,this.fetch,s?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new h2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Sx(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:u,flowType:d,lock:f,debug:m},v,w){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kx({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),v),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,flowType:d,lock:f,debug:m,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new U2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ax=(n,e,t)=>new jx(n,e,t);function Px(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Px()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bd="https://hyrgqrgeshkgvsfwnzzu.supabase.co",Pl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5cmdxcmdlc2hrZ3ZzZnduenp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTU3NTEsImV4cCI6MjA3NjczMTc1MX0.PpQa22hWN7OAl8LP_h9mhxfogUaV1qmSuOiaBeaLDh4";try{console.log("[supabase] initializing client",{urlPresent:!!bd,keyPresent:!!Pl,urlPreview:bd?`${bd.slice(0,20)}...`:null,keyLength:Pl?.length||0,keyFirst50:Pl?`${Pl.slice(0,50)}...`:null,keyLast20:Pl?`...${Pl.slice(-20)}`:null})}catch{}const Cx=typeof window<"u"?window.localStorage:void 0,ct=Ax(bd,Pl,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:Cx,storageKey:"pch.auth"}});async function Dp(n){try{const{data:e,error:t}=await ct.auth.getUser();if(t||!e?.user?.id)return{ok:!1,updated:!1,error:t?.message||"No authenticated user"};const s=e.user.id,{data:a,error:o}=await ct.from("profiles").select("timezone").eq("id",s).single();if(o)return{ok:!1,updated:!1,error:o.message};const u=String(a?.timezone||"").trim();if(u)return{ok:!0,updated:!1,timezone:u};const d=String(n||"").trim();if(!d)return{ok:!1,updated:!1,error:"Empty timezone provided"};const{error:f}=await ct.from("profiles").update({timezone:d}).eq("id",s);return f?{ok:!1,updated:!1,error:f.message}:{ok:!0,updated:!0,timezone:d}}catch(e){return{ok:!1,updated:!1,error:e?.message||String(e)}}}async function cu(n){try{console.log("[dbLoadPets] START - userId=",n);const{data:e,error:t}=await ct.from("pets").select("id, name, species, color, photo_url, insurance_company, policy_number, owner_name, owner_phone, filing_deadline_days, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit, healthy_paws_pet_id, pumpkin_account_number, spot_account_number, breed, gender, date_of_birth").eq("user_id",n).order("created_at",{ascending:!0});if(console.log("[dbLoadPets] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[dbLoadPets] ERROR:",t),t;const s=(e||[]).map(a=>({id:a.id,name:a.name,species:a.species,color:a.color||(a.species==="dog"?"#3B82F6":a.species==="cat"?"#F97316":"#6B7280"),photo_url:a.photo_url||null,insuranceCompany:a.insurance_company,policyNumber:a.policy_number,ownerName:a.owner_name,ownerPhone:a.owner_phone,filing_deadline_days:a.filing_deadline_days,monthly_premium:a.monthly_premium??null,deductible_per_claim:a.deductible_per_claim??null,coverage_start_date:a.coverage_start_date||null,insurance_pays_percentage:a.insurance_pays_percentage??null,annual_coverage_limit:a.annual_coverage_limit??null,healthy_paws_pet_id:a.healthy_paws_pet_id||null,pumpkin_account_number:a.pumpkin_account_number||null,spot_account_number:a.spot_account_number||null,breed:a.breed||null,gender:a.gender||null,date_of_birth:a.date_of_birth||null}));return console.log("[dbLoadPets] SUCCESS - count=",s.length,"pets:",s),s}catch(e){throw console.error("[dbLoadPets] EXCEPTION:",e),e}}async function Bh(n,e){const t=e.color||(e.species==="dog"?"#3B82F6":e.species==="cat"?"#F97316":"#6B7280"),s={id:e.id,user_id:n,name:e.name,species:e.species,color:t,photo_url:e.photo_url||null,insurance_company:e.insuranceCompany,policy_number:e.policyNumber,owner_name:e.ownerName||"",owner_phone:e.ownerPhone||"",filing_deadline_days:e.filing_deadline_days||e.filingDeadlineDays||null,monthly_premium:e.monthly_premium??null,deductible_per_claim:e.deductible_per_claim??null,coverage_start_date:e.coverage_start_date||null,insurance_pays_percentage:e.insurance_pays_percentage??null,annual_coverage_limit:e.annual_coverage_limit??null,healthy_paws_pet_id:e.healthy_paws_pet_id||null,pumpkin_account_number:e.pumpkin_account_number||null,spot_account_number:e.spot_account_number||null,breed:e.breed||null,gender:e.gender||null,date_of_birth:e.date_of_birth||null};console.log(" [dbUpsertPet] BEFORE Supabase call:"),console.log("  - userId:",n),console.log("  - payload.spot_account_number:",s.spot_account_number),console.log("  - Full payload:",s);const{data:a,error:o}=await ct.from("pets").upsert(s,{onConflict:"id"}).select();if(console.log(" [dbUpsertPet] AFTER Supabase call:"),console.log("  - data:",a),console.log("  - error:",o),o)throw o}async function Ex(n,e){console.log("[dbDeletePet] userId=",n,"petId=",e);const{error:t}=await ct.from("pets").delete().eq("user_id",n).eq("id",e);if(t)throw t}async function Rp(n,e){const t={id:n,email:e??null};console.log("[dbEnsureProfile] upserting profile",t);const{error:s}=await ct.from("profiles").upsert(t,{onConflict:"id"}).select();if(s)throw s}async function Fp(n){console.log("[createPet] received payload:",n);const{data:e,error:t}=await ct.from("pets").insert([{user_id:n.user_id,name:n.name,species:n.species,color:n.color??null,photo_url:n.photo_url??null,insurance_company:n.insurance_company??null,policy_number:n.policy_number??null,healthy_paws_pet_id:n.healthy_paws_pet_id??null,spot_account_number:n.spot_account_number??null,breed:n.breed??null,weight_lbs:n.weight_lbs??null,monthly_premium:n.monthly_premium??null,deductible_per_claim:n.deductible_per_claim??null,coverage_start_date:n.coverage_start_date??null,annual_coverage_limit:n.annual_coverage_limit??null,insurance_pays_percentage:n.insurance_pays_percentage??null,filing_deadline_days:n.filing_deadline_days??null}]).select("*").single();if(console.log("[createPet] insert result:",{data:e,error:t}),t)throw t;return e}function Pr(n){"@babel/helpers - typeof";return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(n)}var ha=Uint8Array,yi=Uint16Array,Wf=Int32Array,Hf=new ha([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vf=new ha([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mp=new ha([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kg=function(n,e){for(var t=new yi(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new Wf(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},Sg=kg(Hf,2),Lx=Sg.b,Sf=Sg.r;Lx[28]=258,Sf[258]=28;var Tx=kg(Vf,0),Up=Tx.r,jf=new yi(32768);for(var Vr=0;Vr<32768;++Vr){var Yo=(Vr&43690)>>1|(Vr&21845)<<1;Yo=(Yo&52428)>>2|(Yo&13107)<<2,Yo=(Yo&61680)>>4|(Yo&3855)<<4,jf[Vr]=((Yo&65280)>>8|(Yo&255)<<8)>>1}var gu=(function(n,e,t){for(var s=n.length,a=0,o=new yi(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new yi(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var d;if(t){d=new yi(1<<e);var f=15-e;for(a=0;a<s;++a)if(n[a])for(var m=a<<4|n[a],v=e-n[a],w=u[n[a]-1]++<<v,k=w|(1<<v)-1;w<=k;++w)d[jf[w]>>f]=m}else for(d=new yi(s),a=0;a<s;++a)n[a]&&(d[a]=jf[u[n[a]-1]++]>>15-n[a]);return d}),Rl=new ha(288);for(var Vr=0;Vr<144;++Vr)Rl[Vr]=8;for(var Vr=144;Vr<256;++Vr)Rl[Vr]=9;for(var Vr=256;Vr<280;++Vr)Rl[Vr]=7;for(var Vr=280;Vr<288;++Vr)Rl[Vr]=8;var Td=new ha(32);for(var Vr=0;Vr<32;++Vr)Td[Vr]=5;var Ix=gu(Rl,9,0),Ox=gu(Td,5,0),jg=function(n){return(n+7)/8|0},Dx=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ha(n.subarray(e,t))},po=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},uu=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},qh=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:Pg,l:0};if(a==1){var u=new ha(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(le,he){return le.f-he.f}),t.push({s:-1,f:25001});var d=t[0],f=t[1],m=0,v=1,w=2;for(t[0]={s:-1,f:d.f+f.f,l:d,r:f};v!=a-1;)d=t[t[m].f<t[w].f?m++:w++],f=t[m!=v&&t[m].f<t[w].f?m++:w++],t[v++]={s:-1,f:d.f+f.f,l:d,r:f};for(var k=o[0].s,s=1;s<a;++s)o[s].s>k&&(k=o[s].s);var y=new yi(k+1),P=Af(t[v-1],y,0);if(P>e){var s=0,L=0,I=P-e,A=1<<I;for(o.sort(function(he,H){return y[H.s]-y[he.s]||he.f-H.f});s<a;++s){var G=o[s].s;if(y[G]>e)L+=A-(1<<P-y[G]),y[G]=e;else break}for(L>>=I;L>0;){var U=o[s].s;y[U]<e?L-=1<<e-y[U]++-1:++s}for(;s>=0&&L;--s){var $=o[s].s;y[$]==e&&(--y[$],++L)}P=e}return{t:new ha(y),l:P}},Af=function(n,e,t){return n.s==-1?Math.max(Af(n.l,e,t+1),Af(n.r,e,t+1)):e[n.s]=t},Bp=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new yi(++e),s=0,a=n[0],o=1,u=function(f){t[s++]=f},d=1;d<=e;++d)if(n[d]==a&&d!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[d]}return{c:t.subarray(0,s),n:e}},du=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},Ag=function(n,e,t){var s=t.length,a=jg(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},qp=function(n,e,t,s,a,o,u,d,f,m,v){po(e,v++,t),++a[256];for(var w=qh(a,15),k=w.t,y=w.l,P=qh(o,15),L=P.t,I=P.l,A=Bp(k),G=A.c,U=A.n,$=Bp(L),le=$.c,he=$.n,H=new yi(19),re=0;re<G.length;++re)++H[G[re]&31];for(var re=0;re<le.length;++re)++H[le[re]&31];for(var J=qh(H,7),W=J.t,T=J.l,B=19;B>4&&!W[Mp[B-1]];--B);var ie=m+5<<3,M=du(a,Rl)+du(o,Td)+u,ee=du(a,k)+du(o,L)+u+14+3*B+du(H,W)+2*H[16]+3*H[17]+7*H[18];if(f>=0&&ie<=M&&ie<=ee)return Ag(e,v,n.subarray(f,f+m));var fe,ae,F,se;if(po(e,v,1+(ee<M)),v+=2,ee<M){fe=gu(k,y,0),ae=k,F=gu(L,I,0),se=L;var ge=gu(W,T,0);po(e,v,U-257),po(e,v+5,he-1),po(e,v+10,B-4),v+=14;for(var re=0;re<B;++re)po(e,v+3*re,W[Mp[re]]);v+=3*B;for(var K=[G,le],j=0;j<2;++j)for(var q=K[j],re=0;re<q.length;++re){var X=q[re]&31;po(e,v,ge[X]),v+=W[X],X>15&&(po(e,v,q[re]>>5&127),v+=q[re]>>12)}}else fe=Ix,ae=Rl,F=Ox,se=Td;for(var re=0;re<d;++re){var oe=s[re];if(oe>255){var X=oe>>18&31;uu(e,v,fe[X+257]),v+=ae[X+257],X>7&&(po(e,v,oe>>23&31),v+=Hf[X]);var de=oe&31;uu(e,v,F[de]),v+=se[de],de>3&&(uu(e,v,oe>>5&8191),v+=Vf[de])}else uu(e,v,fe[oe]),v+=ae[oe]}return uu(e,v,fe[256]),v+ae[256]},Rx=new Wf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pg=new ha(0),Fx=function(n,e,t,s,a,o){var u=o.z||n.length,d=new ha(s+u+5*(1+Math.ceil(u/7e3))+a),f=d.subarray(s,d.length-a),m=o.l,v=(o.r||0)&7;if(e){v&&(f[0]=o.r>>3);for(var w=Rx[e-1],k=w>>13,y=w&8191,P=(1<<t)-1,L=o.p||new yi(32768),I=o.h||new yi(P+1),A=Math.ceil(t/3),G=2*A,U=function(rt){return(n[rt]^n[rt+1]<<A^n[rt+2]<<G)&P},$=new Wf(25e3),le=new yi(288),he=new yi(32),H=0,re=0,J=o.i||0,W=0,T=o.w||0,B=0;J+2<u;++J){var ie=U(J),M=J&32767,ee=I[ie];if(L[M]=ee,I[ie]=M,T<=J){var fe=u-J;if((H>7e3||W>24576)&&(fe>423||!m)){v=qp(n,f,0,$,le,he,re,W,B,J-B,v),W=H=re=0,B=J;for(var ae=0;ae<286;++ae)le[ae]=0;for(var ae=0;ae<30;++ae)he[ae]=0}var F=2,se=0,ge=y,K=M-ee&32767;if(fe>2&&ie==U(J-K))for(var j=Math.min(k,fe)-1,q=Math.min(32767,J),X=Math.min(258,fe);K<=q&&--ge&&M!=ee;){if(n[J+F]==n[J+F-K]){for(var oe=0;oe<X&&n[J+oe]==n[J+oe-K];++oe);if(oe>F){if(F=oe,se=K,oe>j)break;for(var de=Math.min(K,oe-2),ve=0,ae=0;ae<de;++ae){var _e=J-K+ae&32767,je=L[_e],be=_e-je&32767;be>ve&&(ve=be,ee=_e)}}}M=ee,ee=L[M],K+=M-ee&32767}if(se){$[W++]=268435456|Sf[F]<<18|Up[se];var $e=Sf[F]&31,He=Up[se]&31;re+=Hf[$e]+Vf[He],++le[257+$e],++he[He],T=J+F,++H}else $[W++]=n[J],++le[n[J]]}}for(J=Math.max(J,T);J<u;++J)$[W++]=n[J],++le[n[J]];v=qp(n,f,m,$,le,he,re,W,B,J-B,v),m||(o.r=v&7|f[v/8|0]<<3,v-=7,o.h=I,o.p=L,o.i=J,o.w=T)}else{for(var J=o.w||0;J<u+m;J+=65535){var Xe=J+65535;Xe>=u&&(f[v/8|0]=m,Xe=u),v=Ag(f,v+1,n.subarray(J,Xe))}o.i=u}return Dx(d,0,s+jg(v)+a)},Cg=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Mx=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new ha(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return Fx(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},Eg=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Ux=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=Cg();a.p(e.dictionary),Eg(n,2,a.d())}};function Pf(n,e){e||(e={});var t=Cg();t.p(n);var s=Mx(n,e,e.dictionary?6:2,4);return Ux(s,e),Eg(s,s.length-4,t.d()),s}var Bx=typeof TextDecoder<"u"&&new TextDecoder,qx=0;try{Bx.decode(Pg,{stream:!0}),qx=1}catch{}function zx(n){if(Array.isArray(n))return n}function $x(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,d=[],f=!0,m=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(f=(s=o.call(t)).done)&&(d.push(s.value),d.length!==e);f=!0);}catch(v){m=!0,a=v}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw a}}return d}}function zp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function Wx(n,e){if(n){if(typeof n=="string")return zp(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zp(n,e):void 0}}function Hx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $p(n,e){return zx(n)||$x(n,e)||Wx(n,e)||Hx()}function Wp(n,e="utf8"){return new TextDecoder(e).decode(n)}const Vx=new TextEncoder;function Gx(n){return Vx.encode(n)}const Yx=1024*8,Kx=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),zh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Gf{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Yx,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Gf)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=zh[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===Kx&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+s));d.reverse();const f=new zh[t](d.buffer);return this.offset+=s,f.reverse(),f}const u=new zh[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Wp(this.readBytes(e))}decodeText(e=1,t="utf8"){return Wp(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Gx(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Fc(n){let e=n.length;for(;--e>=0;)n[e]=0}const Jx=3,Xx=258,Lg=29,Qx=256,Zx=Qx+1+Lg,Tg=30,ey=512,ty=new Array((Zx+2)*2);Fc(ty);const ry=new Array(Tg*2);Fc(ry);const ny=new Array(ey);Fc(ny);const sy=new Array(Xx-Jx+1);Fc(sy);const iy=new Array(Lg);Fc(iy);const ay=new Array(Tg);Fc(ay);const oy=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Cf=oy;const ly=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},cy=new Uint32Array(ly()),uy=(n,e,t,s)=>{const a=cy,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var Ma=uy,Ef={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ig={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const dy=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var hy=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)dy(t,s)&&(n[s]=t[s])}}return n},fy=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},Og={assign:hy,flattenChunks:fy};let Dg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Dg=!1}const bu=new Uint8Array(256);for(let n=0;n<256;n++)bu[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;bu[254]=bu[254]=1;var py=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,d=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,a=0;o<d;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const my=(n,e)=>{if(e<65534&&n.subarray&&Dg)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var gy=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let d=bu[u];if(d>4){o[a++]=65533,s+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&s<t;)u=u<<6|n[s++]&63,d--;if(d>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return my(o,a)},vy=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+bu[n[t]]>e?t:e},Lf={string2buf:py,buf2string:gy,utf8border:vy};function xy(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var yy=xy;const dd=16209,by=16191;var wy=function(e,t){let s,a,o,u,d,f,m,v,w,k,y,P,L,I,A,G,U,$,le,he,H,re,J,W;const T=e.state;s=e.next_in,J=e.input,a=s+(e.avail_in-5),o=e.next_out,W=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),f=T.dmax,m=T.wsize,v=T.whave,w=T.wnext,k=T.window,y=T.hold,P=T.bits,L=T.lencode,I=T.distcode,A=(1<<T.lenbits)-1,G=(1<<T.distbits)-1;e:do{P<15&&(y+=J[s++]<<P,P+=8,y+=J[s++]<<P,P+=8),U=L[y&A];t:for(;;){if($=U>>>24,y>>>=$,P-=$,$=U>>>16&255,$===0)W[o++]=U&65535;else if($&16){le=U&65535,$&=15,$&&(P<$&&(y+=J[s++]<<P,P+=8),le+=y&(1<<$)-1,y>>>=$,P-=$),P<15&&(y+=J[s++]<<P,P+=8,y+=J[s++]<<P,P+=8),U=I[y&G];r:for(;;){if($=U>>>24,y>>>=$,P-=$,$=U>>>16&255,$&16){if(he=U&65535,$&=15,P<$&&(y+=J[s++]<<P,P+=8,P<$&&(y+=J[s++]<<P,P+=8)),he+=y&(1<<$)-1,he>f){e.msg="invalid distance too far back",T.mode=dd;break e}if(y>>>=$,P-=$,$=o-u,he>$){if($=he-$,$>v&&T.sane){e.msg="invalid distance too far back",T.mode=dd;break e}if(H=0,re=k,w===0){if(H+=m-$,$<le){le-=$;do W[o++]=k[H++];while(--$);H=o-he,re=W}}else if(w<$){if(H+=m+w-$,$-=w,$<le){le-=$;do W[o++]=k[H++];while(--$);if(H=0,w<le){$=w,le-=$;do W[o++]=k[H++];while(--$);H=o-he,re=W}}}else if(H+=w-$,$<le){le-=$;do W[o++]=k[H++];while(--$);H=o-he,re=W}for(;le>2;)W[o++]=re[H++],W[o++]=re[H++],W[o++]=re[H++],le-=3;le&&(W[o++]=re[H++],le>1&&(W[o++]=re[H++]))}else{H=o-he;do W[o++]=W[H++],W[o++]=W[H++],W[o++]=W[H++],le-=3;while(le>2);le&&(W[o++]=W[H++],le>1&&(W[o++]=W[H++]))}}else if(($&64)===0){U=I[(U&65535)+(y&(1<<$)-1)];continue r}else{e.msg="invalid distance code",T.mode=dd;break e}break}}else if(($&64)===0){U=L[(U&65535)+(y&(1<<$)-1)];continue t}else if($&32){T.mode=by;break e}else{e.msg="invalid literal/length code",T.mode=dd;break e}break}}while(s<a&&o<d);le=P>>3,s-=le,P-=le<<3,y&=(1<<P)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<d?257+(d-o):257-(o-d),T.hold=y,T.bits=P};const wc=15,Hp=852,Vp=592,Gp=0,$h=1,Yp=2,_y=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ny=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ky=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Sy=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),jy=(n,e,t,s,a,o,u,d)=>{const f=d.bits;let m=0,v=0,w=0,k=0,y=0,P=0,L=0,I=0,A=0,G=0,U,$,le,he,H,re=null,J;const W=new Uint16Array(wc+1),T=new Uint16Array(wc+1);let B=null,ie,M,ee;for(m=0;m<=wc;m++)W[m]=0;for(v=0;v<s;v++)W[e[t+v]]++;for(y=f,k=wc;k>=1&&W[k]===0;k--);if(y>k&&(y=k),k===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(w=1;w<k&&W[w]===0;w++);for(y<w&&(y=w),I=1,m=1;m<=wc;m++)if(I<<=1,I-=W[m],I<0)return-1;if(I>0&&(n===Gp||k!==1))return-1;for(T[1]=0,m=1;m<wc;m++)T[m+1]=T[m]+W[m];for(v=0;v<s;v++)e[t+v]!==0&&(u[T[e[t+v]]++]=v);if(n===Gp?(re=B=u,J=20):n===$h?(re=_y,B=Ny,J=257):(re=ky,B=Sy,J=0),G=0,v=0,m=w,H=o,P=y,L=0,le=-1,A=1<<y,he=A-1,n===$h&&A>Hp||n===Yp&&A>Vp)return 1;for(;;){ie=m-L,u[v]+1<J?(M=0,ee=u[v]):u[v]>=J?(M=B[u[v]-J],ee=re[u[v]-J]):(M=96,ee=0),U=1<<m-L,$=1<<P,w=$;do $-=U,a[H+(G>>L)+$]=ie<<24|M<<16|ee|0;while($!==0);for(U=1<<m-1;G&U;)U>>=1;if(U!==0?(G&=U-1,G+=U):G=0,v++,--W[m]===0){if(m===k)break;m=e[t+u[v]]}if(m>y&&(G&he)!==le){for(L===0&&(L=y),H+=w,P=m-L,I=1<<P;P+L<k&&(I-=W[P+L],!(I<=0));)P++,I<<=1;if(A+=1<<P,n===$h&&A>Hp||n===Yp&&A>Vp)return 1;le=G&he,a[le]=y<<24|P<<16|H-o|0}}return G!==0&&(a[H+G]=m-L<<24|64<<16|0),d.bits=y,0};var vu=jy;const Ay=0,Rg=1,Fg=2,{Z_FINISH:Kp,Z_BLOCK:Py,Z_TREES:hd,Z_OK:Fl,Z_STREAM_END:Cy,Z_NEED_DICT:Ey,Z_STREAM_ERROR:Bi,Z_DATA_ERROR:Mg,Z_MEM_ERROR:Ug,Z_BUF_ERROR:Ly,Z_DEFLATED:Jp}=Ig,Ud=16180,Xp=16181,Qp=16182,Zp=16183,em=16184,tm=16185,rm=16186,nm=16187,sm=16188,im=16189,Id=16190,mo=16191,Wh=16192,am=16193,Hh=16194,om=16195,lm=16196,cm=16197,um=16198,fd=16199,pd=16200,dm=16201,hm=16202,fm=16203,pm=16204,mm=16205,Vh=16206,gm=16207,vm=16208,Qr=16209,Bg=16210,qg=16211,Ty=852,Iy=592,Oy=15,Dy=Oy,xm=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Ry(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bl=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Ud||e.mode>qg?1:0},zg=n=>{if(Bl(n))return Bi;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Ud,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Ty),e.distcode=e.distdyn=new Int32Array(Iy),e.sane=1,e.back=-1,Fl},$g=n=>{if(Bl(n))return Bi;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,zg(n)},Wg=(n,e)=>{let t;if(Bl(n))return Bi;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Bi:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,$g(n))},Hg=(n,e)=>{if(!n)return Bi;const t=new Ry;n.state=t,t.strm=n,t.window=null,t.mode=Ud;const s=Wg(n,e);return s!==Fl&&(n.state=null),s},Fy=n=>Hg(n,Dy);let ym=!0,Gh,Yh;const My=n=>{if(ym){Gh=new Int32Array(512),Yh=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(vu(Rg,n.lens,0,288,Gh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;vu(Fg,n.lens,0,32,Yh,0,n.work,{bits:5}),ym=!1}n.lencode=Gh,n.lenbits=9,n.distcode=Yh,n.distbits=5},Vg=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},Uy=(n,e)=>{let t,s,a,o,u,d,f,m,v,w,k,y,P,L,I=0,A,G,U,$,le,he,H,re;const J=new Uint8Array(4);let W,T;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bl(n)||!n.output||!n.input&&n.avail_in!==0)return Bi;t=n.state,t.mode===mo&&(t.mode=Wh),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,m=t.hold,v=t.bits,w=d,k=f,re=Fl;e:for(;;)switch(t.mode){case Ud:if(t.wrap===0){t.mode=Wh;break}for(;v<16;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(t.wrap&2&&m===35615){t.wbits===0&&(t.wbits=15),t.check=0,J[0]=m&255,J[1]=m>>>8&255,t.check=Ma(t.check,J,2,0),m=0,v=0,t.mode=Xp;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((m&255)<<8)+(m>>8))%31){n.msg="incorrect header check",t.mode=Qr;break}if((m&15)!==Jp){n.msg="unknown compression method",t.mode=Qr;break}if(m>>>=4,v-=4,H=(m&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=Qr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=m&512?im:mo,m=0,v=0;break;case Xp:for(;v<16;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(t.flags=m,(t.flags&255)!==Jp){n.msg="unknown compression method",t.mode=Qr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Qr;break}t.head&&(t.head.text=m>>8&1),t.flags&512&&t.wrap&4&&(J[0]=m&255,J[1]=m>>>8&255,t.check=Ma(t.check,J,2,0)),m=0,v=0,t.mode=Qp;case Qp:for(;v<32;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}t.head&&(t.head.time=m),t.flags&512&&t.wrap&4&&(J[0]=m&255,J[1]=m>>>8&255,J[2]=m>>>16&255,J[3]=m>>>24&255,t.check=Ma(t.check,J,4,0)),m=0,v=0,t.mode=Zp;case Zp:for(;v<16;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}t.head&&(t.head.xflags=m&255,t.head.os=m>>8),t.flags&512&&t.wrap&4&&(J[0]=m&255,J[1]=m>>>8&255,t.check=Ma(t.check,J,2,0)),m=0,v=0,t.mode=em;case em:if(t.flags&1024){for(;v<16;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}t.length=m,t.head&&(t.head.extra_len=m),t.flags&512&&t.wrap&4&&(J[0]=m&255,J[1]=m>>>8&255,t.check=Ma(t.check,J,2,0)),m=0,v=0}else t.head&&(t.head.extra=null);t.mode=tm;case tm:if(t.flags&1024&&(y=t.length,y>d&&(y=d),y&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+y),H)),t.flags&512&&t.wrap&4&&(t.check=Ma(t.check,s,y,o)),d-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=rm;case rm:if(t.flags&2048){if(d===0)break e;y=0;do H=s[o+y++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=Ma(t.check,s,y,o)),d-=y,o+=y,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=nm;case nm:if(t.flags&4096){if(d===0)break e;y=0;do H=s[o+y++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=Ma(t.check,s,y,o)),d-=y,o+=y,H)break e}else t.head&&(t.head.comment=null);t.mode=sm;case sm:if(t.flags&512){for(;v<16;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(t.wrap&4&&m!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Qr;break}m=0,v=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=mo;break;case im:for(;v<32;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}n.adler=t.check=xm(m),m=0,v=0,t.mode=Id;case Id:if(t.havedict===0)return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=m,t.bits=v,Ey;n.adler=t.check=1,t.mode=mo;case mo:if(e===Py||e===hd)break e;case Wh:if(t.last){m>>>=v&7,v-=v&7,t.mode=Vh;break}for(;v<3;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}switch(t.last=m&1,m>>>=1,v-=1,m&3){case 0:t.mode=am;break;case 1:if(My(t),t.mode=fd,e===hd){m>>>=2,v-=2;break e}break;case 2:t.mode=lm;break;case 3:n.msg="invalid block type",t.mode=Qr}m>>>=2,v-=2;break;case am:for(m>>>=v&7,v-=v&7;v<32;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if((m&65535)!==(m>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Qr;break}if(t.length=m&65535,m=0,v=0,t.mode=Hh,e===hd)break e;case Hh:t.mode=om;case om:if(y=t.length,y){if(y>d&&(y=d),y>f&&(y=f),y===0)break e;a.set(s.subarray(o,o+y),u),d-=y,o+=y,f-=y,u+=y,t.length-=y;break}t.mode=mo;break;case lm:for(;v<14;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(t.nlen=(m&31)+257,m>>>=5,v-=5,t.ndist=(m&31)+1,m>>>=5,v-=5,t.ncode=(m&15)+4,m>>>=4,v-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Qr;break}t.have=0,t.mode=cm;case cm:for(;t.have<t.ncode;){for(;v<3;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}t.lens[B[t.have++]]=m&7,m>>>=3,v-=3}for(;t.have<19;)t.lens[B[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,W={bits:t.lenbits},re=vu(Ay,t.lens,0,19,t.lencode,0,t.work,W),t.lenbits=W.bits,re){n.msg="invalid code lengths set",t.mode=Qr;break}t.have=0,t.mode=um;case um:for(;t.have<t.nlen+t.ndist;){for(;I=t.lencode[m&(1<<t.lenbits)-1],A=I>>>24,G=I>>>16&255,U=I&65535,!(A<=v);){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(U<16)m>>>=A,v-=A,t.lens[t.have++]=U;else{if(U===16){for(T=A+2;v<T;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(m>>>=A,v-=A,t.have===0){n.msg="invalid bit length repeat",t.mode=Qr;break}H=t.lens[t.have-1],y=3+(m&3),m>>>=2,v-=2}else if(U===17){for(T=A+3;v<T;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}m>>>=A,v-=A,H=0,y=3+(m&7),m>>>=3,v-=3}else{for(T=A+7;v<T;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}m>>>=A,v-=A,H=0,y=11+(m&127),m>>>=7,v-=7}if(t.have+y>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Qr;break}for(;y--;)t.lens[t.have++]=H}}if(t.mode===Qr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Qr;break}if(t.lenbits=9,W={bits:t.lenbits},re=vu(Rg,t.lens,0,t.nlen,t.lencode,0,t.work,W),t.lenbits=W.bits,re){n.msg="invalid literal/lengths set",t.mode=Qr;break}if(t.distbits=6,t.distcode=t.distdyn,W={bits:t.distbits},re=vu(Fg,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,W),t.distbits=W.bits,re){n.msg="invalid distances set",t.mode=Qr;break}if(t.mode=fd,e===hd)break e;case fd:t.mode=pd;case pd:if(d>=6&&f>=258){n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=m,t.bits=v,wy(n,k),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,m=t.hold,v=t.bits,t.mode===mo&&(t.back=-1);break}for(t.back=0;I=t.lencode[m&(1<<t.lenbits)-1],A=I>>>24,G=I>>>16&255,U=I&65535,!(A<=v);){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(G&&(G&240)===0){for($=A,le=G,he=U;I=t.lencode[he+((m&(1<<$+le)-1)>>$)],A=I>>>24,G=I>>>16&255,U=I&65535,!($+A<=v);){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}m>>>=$,v-=$,t.back+=$}if(m>>>=A,v-=A,t.back+=A,t.length=U,G===0){t.mode=mm;break}if(G&32){t.back=-1,t.mode=mo;break}if(G&64){n.msg="invalid literal/length code",t.mode=Qr;break}t.extra=G&15,t.mode=dm;case dm:if(t.extra){for(T=t.extra;v<T;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}t.length+=m&(1<<t.extra)-1,m>>>=t.extra,v-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=hm;case hm:for(;I=t.distcode[m&(1<<t.distbits)-1],A=I>>>24,G=I>>>16&255,U=I&65535,!(A<=v);){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if((G&240)===0){for($=A,le=G,he=U;I=t.distcode[he+((m&(1<<$+le)-1)>>$)],A=I>>>24,G=I>>>16&255,U=I&65535,!($+A<=v);){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}m>>>=$,v-=$,t.back+=$}if(m>>>=A,v-=A,t.back+=A,G&64){n.msg="invalid distance code",t.mode=Qr;break}t.offset=U,t.extra=G&15,t.mode=fm;case fm:if(t.extra){for(T=t.extra;v<T;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}t.offset+=m&(1<<t.extra)-1,m>>>=t.extra,v-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Qr;break}t.mode=pm;case pm:if(f===0)break e;if(y=k-f,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Qr;break}y>t.wnext?(y-=t.wnext,P=t.wsize-y):P=t.wnext-y,y>t.length&&(y=t.length),L=t.window}else L=a,P=u-t.offset,y=t.length;y>f&&(y=f),f-=y,t.length-=y;do a[u++]=L[P++];while(--y);t.length===0&&(t.mode=pd);break;case mm:if(f===0)break e;a[u++]=t.length,f--,t.mode=pd;break;case Vh:if(t.wrap){for(;v<32;){if(d===0)break e;d--,m|=s[o++]<<v,v+=8}if(k-=f,n.total_out+=k,t.total+=k,t.wrap&4&&k&&(n.adler=t.check=t.flags?Ma(t.check,a,k,u-k):Cf(t.check,a,k,u-k)),k=f,t.wrap&4&&(t.flags?m:xm(m))!==t.check){n.msg="incorrect data check",t.mode=Qr;break}m=0,v=0}t.mode=gm;case gm:if(t.wrap&&t.flags){for(;v<32;){if(d===0)break e;d--,m+=s[o++]<<v,v+=8}if(t.wrap&4&&m!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Qr;break}m=0,v=0}t.mode=vm;case vm:re=Cy;break e;case Qr:re=Mg;break e;case Bg:return Ug;case qg:default:return Bi}return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=m,t.bits=v,(t.wsize||k!==n.avail_out&&t.mode<Qr&&(t.mode<Vh||e!==Kp))&&Vg(n,n.output,n.next_out,k-n.avail_out),w-=n.avail_in,k-=n.avail_out,n.total_in+=w,n.total_out+=k,t.total+=k,t.wrap&4&&k&&(n.adler=t.check=t.flags?Ma(t.check,a,k,n.next_out-k):Cf(t.check,a,k,n.next_out-k)),n.data_type=t.bits+(t.last?64:0)+(t.mode===mo?128:0)+(t.mode===fd||t.mode===Hh?256:0),(w===0&&k===0||e===Kp)&&re===Fl&&(re=Ly),re},By=n=>{if(Bl(n))return Bi;let e=n.state;return e.window&&(e.window=null),n.state=null,Fl},qy=(n,e)=>{if(Bl(n))return Bi;const t=n.state;return(t.wrap&2)===0?Bi:(t.head=e,e.done=!1,Fl)},zy=(n,e)=>{const t=e.length;let s,a,o;return Bl(n)||(s=n.state,s.wrap!==0&&s.mode!==Id)?Bi:s.mode===Id&&(a=1,a=Cf(a,e,t,0),a!==s.check)?Mg:(o=Vg(n,e,t,t),o?(s.mode=Bg,Ug):(s.havedict=1,Fl))};var $y=$g,Wy=Wg,Hy=zg,Vy=Fy,Gy=Hg,Yy=Uy,Ky=By,Jy=qy,Xy=zy,Qy="pako inflate (from Nodeca project)",vo={inflateReset:$y,inflateReset2:Wy,inflateResetKeep:Hy,inflateInit:Vy,inflateInit2:Gy,inflate:Yy,inflateEnd:Ky,inflateGetHeader:Jy,inflateSetDictionary:Xy,inflateInfo:Qy};function Zy(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var eb=Zy;const Gg=Object.prototype.toString,{Z_NO_FLUSH:tb,Z_FINISH:rb,Z_OK:wu,Z_STREAM_END:Kh,Z_NEED_DICT:Jh,Z_STREAM_ERROR:nb,Z_DATA_ERROR:bm,Z_MEM_ERROR:sb}=Ig;function ku(n){this.options=Og.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yy,this.strm.avail_out=0;let t=vo.inflateInit2(this.strm,e.windowBits);if(t!==wu)throw new Error(Ef[t]);if(this.header=new eb,vo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Lf.string2buf(e.dictionary):Gg.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=vo.inflateSetDictionary(this.strm,e.dictionary),t!==wu)))throw new Error(Ef[t])}ku.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?rb:tb,Gg.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=vo.inflate(t,u),o===Jh&&a&&(o=vo.inflateSetDictionary(t,a),o===wu?o=vo.inflate(t,u):o===bm&&(o=Jh));t.avail_in>0&&o===Kh&&t.state.wrap>0&&n[t.next_in]!==0;)vo.inflateReset(t),o=vo.inflate(t,u);switch(o){case nb:case bm:case Jh:case sb:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===Kh))if(this.options.to==="string"){let f=Lf.utf8border(t.output,t.next_out),m=t.next_out-f,v=Lf.buf2string(t.output,f);t.next_out=m,t.avail_out=s-m,m&&t.output.set(t.output.subarray(f,f+m),0),this.onData(v)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===wu&&d===0)){if(o===Kh)return o=vo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};ku.prototype.onData=function(n){this.chunks.push(n)};ku.prototype.onEnd=function(n){n===wu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Og.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function ib(n,e){const t=new ku(e);if(t.push(n),t.err)throw t.msg||Ef[t.err];return t.result}var ab=ku,ob=ib,lb={Inflate:ab,inflate:ob};const{Inflate:cb,inflate:ub}=lb;var wm=cb,db=ub;const Yg=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Yg[n]=e}const _m=4294967295;function hb(n,e,t){let s=n;for(let a=0;a<t;a++)s=Yg[(s^e[a])&255]^s>>>8;return s}function fb(n,e){return(hb(_m,n,e)^_m)>>>0}function Nm(n,e,t){const s=n.readUint32(),a=fb(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Kg(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function Jg(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function Xg(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function Qg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function Zg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+pb(e[o-a],t[o],t[o-a])&255}}function pb(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function mb(n,e,t,s,a,o){switch(n){case 0:Kg(e,t,a);break;case 1:Jg(e,t,a,o);break;case 2:Xg(e,t,s,a);break;case 3:Qg(e,t,s,a,o);break;case 4:Zg(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const gb=new Uint16Array([255]),vb=new Uint8Array(gb.buffer),xb=vb[0]===255;function yb(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*a,f=new Uint8Array(s*t*d);let m=0;for(let v=0;v<7;v++){const w=u[v],k=Math.ceil((t-w.x)/w.xStep),y=Math.ceil((s-w.y)/w.yStep);if(k<=0||y<=0)continue;const P=k*d,L=new Uint8Array(P);for(let I=0;I<y;I++){const A=e[m++],G=e.subarray(m,m+P);m+=P;const U=new Uint8Array(P);mb(A,G,U,L,P,d),L.set(U);for(let $=0;$<k;$++){const le=w.x+$*w.xStep,he=w.y+I*w.yStep;if(!(le>=t||he>=s))for(let H=0;H<d;H++)f[(he*t+le)*d+H]=U[$*d+H]}}}if(o===16){const v=new Uint16Array(f.buffer);if(xb)for(let w=0;w<v.length;w++)v[w]=bb(v[w]);return v}else return f}function bb(n){return(n&255)<<8|n>>8&255}const wb=new Uint16Array([255]),_b=new Uint8Array(wb.buffer),Nb=_b[0]===255,kb=new Uint8Array(0);function km(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,d=Math.ceil(o/8*a*t),f=new Uint8Array(s*d);let m=kb,v=0,w,k;for(let y=0;y<s;y++){switch(w=e.subarray(v+1,v+1+d),k=f.subarray(y*d,(y+1)*d),e[v]){case 0:Kg(w,k,d);break;case 1:Jg(w,k,d,u);break;case 2:Xg(w,k,m,d);break;case 3:Qg(w,k,m,d,u);break;case 4:Zg(w,k,m,d,u);break;default:throw new Error(`Unsupported filter: ${e[v]}`)}m=k,v+=d+1}if(o===16){const y=new Uint16Array(f.buffer);if(Nb)for(let P=0;P<y.length;P++)y[P]=Sb(y[P]);return y}else return f}function Sb(n){return(n&255)<<8|n>>8&255}const wd=Uint8Array.of(137,80,78,71,13,10,26,10);function Sm(n){if(!jb(n.readBytes(wd.length)))throw new Error("wrong PNG signature")}function jb(n){if(n.length<wd.length)return!1;for(let e=0;e<wd.length;e++)if(n[e]!==wd[e])return!1;return!0}const Ab="tEXt",Pb=0,e1=new TextDecoder("latin1");function Cb(n){if(Lb(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const Eb=/^[\u0000-\u00FF]*$/;function Lb(n){if(!Eb.test(n))throw new Error("invalid latin1 text")}function Tb(n,e,t){const s=t1(e);n[s]=Ib(e,t-s.length-1)}function t1(n){for(n.mark();n.readByte()!==Pb;);const e=n.offset;n.reset();const t=e1.decode(n.readBytes(e-n.offset-1));return n.skip(1),Cb(t),t}function Ib(n,e){return e1.decode(n.readBytes(e))}const gi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Xh={UNKNOWN:-1,DEFLATE:0},jm={UNKNOWN:-1,ADAPTIVE:0},Qh={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},md={NONE:0,BACKGROUND:1,PREVIOUS:2},Zh={SOURCE:0,OVER:1};class Ob extends Gf{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new wm,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Xh.UNKNOWN,this._filterMethod=jm.UNKNOWN,this._interlaceMethod=Qh.UNKNOWN,this._colorType=gi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Sm(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Sm(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Ab:Tb(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Nm(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Nm(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Db(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case gi.GREYSCALE:s=1;break;case gi.TRUECOLOUR:s=3;break;case gi.INDEXED_COLOUR:s=1;break;case gi.GREYSCALE_ALPHA:s=2;break;case gi.TRUECOLOUR_ALPHA:s=4;break;case gi.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Xh.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case gi.GREYSCALE:case gi.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case gi.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case gi.UNKNOWN:case gi.GREYSCALE_ALPHA:case gi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=t1(this),s=this.readUint8();if(s!==Xh.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:db(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=km({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case md.NONE:break;case md.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[u+d]=0}break;case md.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:d,frameIndex:f}};switch(t.blendOp){case Zh.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=a(o,u);for(let m=0;m<this._png.channels;m++)e.data[d+m]=t.data[f+m]}break;case Zh.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=a(o,u);for(let m=0;m<this._png.channels;m++){const v=t.data[f+this._png.channels-1]/s,w=m%(this._png.channels-1)===0?1:t.data[f+m],k=Math.floor(v*w+(1-v)*e.data[d+m]);e.data[d+m]+=k}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==jm.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Qh.NO_INTERLACE)this._png.data=km({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Qh.ADAM7)this._png.data=yb({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:md.NONE,blendOp:Zh.SOURCE,data:e}),this._inflator=new wm,this._writingDataChunks=!1}}function Db(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Am;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Am||(Am={}));function Rb(n,e){return new Ob(n,e).decode()}var Kt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function ef(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var Rr={log:ef,warn:function(n){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):ef.call(null,arguments))},error:function(n){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):ef(n))}};function tf(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){Cl(s.response,e,t)},s.onerror=function(){Rr.error("could not download file")},s.send()}function Pm(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Cl=Kt.saveAs||((typeof window>"u"?"undefined":Pr(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=Kt.URL||Kt.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?Pm(a.href)?tf(n,e,t):gd(a,a.target="_blank"):gd(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){gd(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Pm(n))tf(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){gd(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:Pr(o)!=="object"&&(Rr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return tf(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(Kt.HTMLElement)||Kt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":Pr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var v=d.result;v=u?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=v:location=v,s=null},d.readAsDataURL(n)}else{var f=Kt.URL||Kt.webkitURL,m=f.createObjectURL(n);s?s.location=m:location.href=m,s=null,setTimeout(function(){f.revokeObjectURL(m)},4e4)}});function r1(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),f=this.g.toString(16),m=this.b.toString(16);return d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),m.length==1&&(m="0"+m),"#"+d+f+m}}var _d=Kt.atob.bind(Kt),Cm=Kt.btoa.bind(Kt);function rf(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=Ns(t,s,a,o,e[0],7,-680876936),o=Ns(o,t,s,a,e[1],12,-389564586),a=Ns(a,o,t,s,e[2],17,606105819),s=Ns(s,a,o,t,e[3],22,-1044525330),t=Ns(t,s,a,o,e[4],7,-176418897),o=Ns(o,t,s,a,e[5],12,1200080426),a=Ns(a,o,t,s,e[6],17,-1473231341),s=Ns(s,a,o,t,e[7],22,-45705983),t=Ns(t,s,a,o,e[8],7,1770035416),o=Ns(o,t,s,a,e[9],12,-1958414417),a=Ns(a,o,t,s,e[10],17,-42063),s=Ns(s,a,o,t,e[11],22,-1990404162),t=Ns(t,s,a,o,e[12],7,1804603682),o=Ns(o,t,s,a,e[13],12,-40341101),a=Ns(a,o,t,s,e[14],17,-1502002290),t=ks(t,s=Ns(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ks(o,t,s,a,e[6],9,-1069501632),a=ks(a,o,t,s,e[11],14,643717713),s=ks(s,a,o,t,e[0],20,-373897302),t=ks(t,s,a,o,e[5],5,-701558691),o=ks(o,t,s,a,e[10],9,38016083),a=ks(a,o,t,s,e[15],14,-660478335),s=ks(s,a,o,t,e[4],20,-405537848),t=ks(t,s,a,o,e[9],5,568446438),o=ks(o,t,s,a,e[14],9,-1019803690),a=ks(a,o,t,s,e[3],14,-187363961),s=ks(s,a,o,t,e[8],20,1163531501),t=ks(t,s,a,o,e[13],5,-1444681467),o=ks(o,t,s,a,e[2],9,-51403784),a=ks(a,o,t,s,e[7],14,1735328473),t=Ss(t,s=ks(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=Ss(o,t,s,a,e[8],11,-2022574463),a=Ss(a,o,t,s,e[11],16,1839030562),s=Ss(s,a,o,t,e[14],23,-35309556),t=Ss(t,s,a,o,e[1],4,-1530992060),o=Ss(o,t,s,a,e[4],11,1272893353),a=Ss(a,o,t,s,e[7],16,-155497632),s=Ss(s,a,o,t,e[10],23,-1094730640),t=Ss(t,s,a,o,e[13],4,681279174),o=Ss(o,t,s,a,e[0],11,-358537222),a=Ss(a,o,t,s,e[3],16,-722521979),s=Ss(s,a,o,t,e[6],23,76029189),t=Ss(t,s,a,o,e[9],4,-640364487),o=Ss(o,t,s,a,e[12],11,-421815835),a=Ss(a,o,t,s,e[15],16,530742520),t=js(t,s=Ss(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=js(o,t,s,a,e[7],10,1126891415),a=js(a,o,t,s,e[14],15,-1416354905),s=js(s,a,o,t,e[5],21,-57434055),t=js(t,s,a,o,e[12],6,1700485571),o=js(o,t,s,a,e[3],10,-1894986606),a=js(a,o,t,s,e[10],15,-1051523),s=js(s,a,o,t,e[1],21,-2054922799),t=js(t,s,a,o,e[8],6,1873313359),o=js(o,t,s,a,e[15],10,-30611744),a=js(a,o,t,s,e[6],15,-1560198380),s=js(s,a,o,t,e[13],21,1309151649),t=js(t,s,a,o,e[4],6,-145523070),o=js(o,t,s,a,e[11],10,-1120210379),a=js(a,o,t,s,e[2],15,718787259),s=js(s,a,o,t,e[9],21,-343485551),n[0]=Zo(t,n[0]),n[1]=Zo(s,n[1]),n[2]=Zo(a,n[2]),n[3]=Zo(o,n[3])}function Bd(n,e,t,s,a,o){return e=Zo(Zo(e,n),Zo(s,o)),Zo(e<<a|e>>>32-a,t)}function Ns(n,e,t,s,a,o,u){return Bd(e&t|~e&s,n,e,a,o,u)}function ks(n,e,t,s,a,o,u){return Bd(e&s|t&~s,n,e,a,o,u)}function Ss(n,e,t,s,a,o,u){return Bd(e^t^s,n,e,a,o,u)}function js(n,e,t,s,a,o,u){return Bd(t^(e|~s),n,e,a,o,u)}function n1(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)rf(s,Fb(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(rf(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,rf(s,a),s}function Fb(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var Em="0123456789abcdef".split("");function Mb(n){for(var e="",t=0;t<4;t++)e+=Em[n>>8*t+4&15]+Em[n>>8*t&15];return e}function Ub(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Tf(n){return n1(n).map(Ub).join("")}var Bb=(function(n){for(var e=0;e<n.length;e++)n[e]=Mb(n[e]);return n.join("")})(n1("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zo(n,e){if(Bb){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function If(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),d=[],f=0;f<256;f++)d[f]=f;var m=0;for(f=0;f<256;f++){var v=d[f];m=(m+v+u.charCodeAt(f))%256,d[f]=d[m],d[m]=v}t=n,s=d}else d=s;var w=e.length,k=0,y=0,P="";for(f=0;f<w;f++)y=(y+(v=d[k=(k+1)%256]))%256,d[k]=d[y],d[y]=v,u=d[(d[k]+d[y])%256],P+=String.fromCharCode(e.charCodeAt(f)^u);return P}var Lm={print:4,modify:8,copy:16,"annot-forms":32};function jc(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(d){if(Lm.perm!==void 0)throw new Error("Invalid permission: "+d);a+=Lm[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Tf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=If(this.encryptionKey,this.padding)}function Ac(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function Tm(n){if(Pr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(d){Kt.console&&Rr.error("jsPDF PubSub Error",d.message,d)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Od(n){if(!(this instanceof Od))return new Od(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function s1(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Tl(n,e,t,s,a){if(!(this instanceof Tl))return new Tl(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,s1.call(this,s,a)}function Pc(n,e,t,s,a){if(!(this instanceof Pc))return new Pc(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,s1.call(this,s,a)}function Ot(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],d=1,f=16,m="S",v=null;Pr(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(v=n.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),m=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var w=n.putOnlyUsedFonts||!1,k={},y={internal:{},__private__:{}};y.__private__.PubSub=Tm;var P="1.3",L=y.__private__.getPdfVersion=function(){return P};y.__private__.setPdfVersion=function(x){P=x};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return I};var A=y.__private__.getPageFormat=function(x){return I[x]};a=a||"a4";var G="compat",U="advanced",$=G;function le(){this.saveGraphicsState(),Z(new It(Nt,0,0,-Nt,0,Ke()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),m="n",$=U}function he(){this.restoreGraphicsState(),m="S",$=G}var H=y.__private__.combineFontStyleAndFontWeight=function(x,E){if(x=="bold"&&E=="normal"||x=="bold"&&E==400||x=="normal"&&E=="italic"||x=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(x=E==400||E==="normal"?x==="italic"?"italic":"normal":E!=700&&E!=="bold"||x!=="normal"?(E==700?"bold":E)+""+x:"bold"),x};y.advancedAPI=function(x){var E=$===G;return E&&le.call(this),typeof x!="function"||(x(this),E&&he.call(this)),this},y.compatAPI=function(x){var E=$===U;return E&&he.call(this),typeof x!="function"||(x(this),E&&le.call(this)),this},y.isAdvancedAPI=function(){return $===U};var re,J=function(x){if($!==U)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},W=y.roundToPrecision=y.__private__.roundToPrecision=function(x,E){var Q=e||E;if(isNaN(x)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(Q).replace(/0+$/,"")};re=y.hpf=y.__private__.hpf=typeof f=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return W(x,f)}:f==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return W(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return W(x,16)};var T=y.f2=y.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return W(x,2)},B=y.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return W(x,3)},ie=y.scale=y.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return $===G?x*Nt:$===U?x:void 0},M=function(x){return ie((function(E){return $===G?Ke()-E:$===U?E:void 0})(x))};y.__private__.setPrecision=y.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ee,fe="00000000000000000000000000000000",ae=y.__private__.getFileId=function(){return fe},F=y.__private__.setFileId=function(x){return fe=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Wr=new jc(v.userPermissions,v.userPassword,v.ownerPassword,fe)),fe};y.setFileId=function(x){return F(x),this},y.getFileId=function(){return ae()};var se=y.__private__.convertDateToPDFDate=function(x){var E=x.getTimezoneOffset(),Q=E<0?"+":"-",pe=Math.floor(Math.abs(E/60)),we=Math.abs(E%60),Oe=[Q,X(pe),"'",X(we),"'"].join("");return["D:",x.getFullYear(),X(x.getMonth()+1),X(x.getDate()),X(x.getHours()),X(x.getMinutes()),X(x.getSeconds()),Oe].join("")},ge=y.__private__.convertPDFDateToDate=function(x){var E=parseInt(x.substr(2,4),10),Q=parseInt(x.substr(6,2),10)-1,pe=parseInt(x.substr(8,2),10),we=parseInt(x.substr(10,2),10),Oe=parseInt(x.substr(12,2),10),ze=parseInt(x.substr(14,2),10);return new Date(E,Q,pe,we,Oe,ze,0)},K=y.__private__.setCreationDate=function(x){var E;if(x===void 0&&(x=new Date),x instanceof Date)E=se(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=x}return ee=E},j=y.__private__.getCreationDate=function(x){var E=ee;return x==="jsDate"&&(E=ge(ee)),E};y.setCreationDate=function(x){return K(x),this},y.getCreationDate=function(x){return j(x)};var q,X=y.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},oe=y.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},de=0,ve=[],_e=[],je=0,be=[],$e=[],He=!1,Xe=_e;y.__private__.setCustomOutputDestination=function(x){He=!0,Xe=x};var rt=function(x){He||(Xe=x)};y.__private__.resetCustomOutputDestination=function(){He=!1,Xe=_e};var Z=y.__private__.out=function(x){return x=x.toString(),je+=x.length+1,Xe.push(x),Xe},Ze=y.__private__.write=function(x){return Z(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Rt=y.__private__.getArrayBuffer=function(x){for(var E=x.length,Q=new ArrayBuffer(E),pe=new Uint8Array(Q);E--;)pe[E]=x.charCodeAt(E);return Q},Tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Tt};var We=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(x){return We=$===U?x/Nt:x,this};var wt,st=y.__private__.getFontSize=y.getFontSize=function(){return $===G?We:We*Nt},_t=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(x){return _t=x,this},y.__private__.getR2L=y.getR2L=function(){return _t};var xt,Wt=y.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))wt=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');wt=x}else wt=parseInt(x,10)};y.__private__.getZoomMode=function(){return wt};var St,Mt=y.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');xt=x};y.__private__.getPageMode=function(){return xt};var Qt=y.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');St=x};y.__private__.getLayoutMode=function(){return St},y.__private__.setDisplayMode=y.setDisplayMode=function(x,E,Q){return Wt(x),Qt(E),Mt(Q),this};var Zt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(x){if(Object.keys(Zt).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Zt[x]},y.__private__.getDocumentProperties=function(){return Zt},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(x){for(var E in Zt)Zt.hasOwnProperty(E)&&x[E]&&(Zt[E]=x[E]);return this},y.__private__.setDocumentProperty=function(x,E){if(Object.keys(Zt).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Zt[x]=E};var ft,Nt,ut,_r,Jt,Gt={},Me={},jt=[],ot={},cr={},Et={},Pt={},ur=null,$t=0,Dt=[],dr=new Tm(y),ni=n.hotfixes||[],cn={},As={},vn=[],It=function x(E,Q,pe,we,Oe,ze){if(!(this instanceof x))return new x(E,Q,pe,we,Oe,ze);isNaN(E)&&(E=1),isNaN(Q)&&(Q=0),isNaN(pe)&&(pe=0),isNaN(we)&&(we=1),isNaN(Oe)&&(Oe=0),isNaN(ze)&&(ze=0),this._matrix=[E,Q,pe,we,Oe,ze]};Object.defineProperty(It.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(It.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(It.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(It.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(It.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(It.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(It.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(It.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(It.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(It.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(It.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(It.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(It.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(It.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(It.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(It.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),It.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(re).join(x)},It.prototype.multiply=function(x){var E=x.sx*this.sx+x.shy*this.shx,Q=x.sx*this.shy+x.shy*this.sy,pe=x.shx*this.sx+x.sy*this.shx,we=x.shx*this.shy+x.sy*this.sy,Oe=x.tx*this.sx+x.ty*this.shx+this.tx,ze=x.tx*this.shy+x.ty*this.sy+this.ty;return new It(E,Q,pe,we,Oe,ze)},It.prototype.decompose=function(){var x=this.sx,E=this.shy,Q=this.shx,pe=this.sy,we=this.tx,Oe=this.ty,ze=Math.sqrt(x*x+E*E),at=(x/=ze)*Q+(E/=ze)*pe;Q-=x*at,pe-=E*at;var pt=Math.sqrt(Q*Q+pe*pe);return at/=pt,x*(pe/=pt)<E*(Q/=pt)&&(x=-x,E=-E,at=-at,ze=-ze),{scale:new It(ze,0,0,pt,0,0),translate:new It(1,0,0,1,we,Oe),rotate:new It(x,E,-E,x,0,0),skew:new It(1,0,at,1,0,0)}},It.prototype.toString=function(x){return this.join(" ")},It.prototype.inversed=function(){var x=this.sx,E=this.shy,Q=this.shx,pe=this.sy,we=this.tx,Oe=this.ty,ze=1/(x*pe-E*Q),at=pe*ze,pt=-E*ze,Ut=-Q*ze,Ht=x*ze;return new It(at,pt,Ut,Ht,-at*we-Ut*Oe,-pt*we-Ht*Oe)},It.prototype.applyToPoint=function(x){var E=x.x*this.sx+x.y*this.shx+this.tx,Q=x.x*this.shy+x.y*this.sy+this.ty;return new un(E,Q)},It.prototype.applyToRectangle=function(x){var E=this.applyToPoint(x),Q=this.applyToPoint(new un(x.x+x.w,x.y+x.h));return new Ai(E.x,E.y,Q.x-E.x,Q.y-E.y)},It.prototype.clone=function(){var x=this.sx,E=this.shy,Q=this.shx,pe=this.sy,we=this.tx,Oe=this.ty;return new It(x,E,Q,pe,we,Oe)},y.Matrix=It;var Sn=y.matrixMult=function(x,E){return E.multiply(x)},qn=new It(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=qn;var jn=function(x,E){if(!cr[x]){var Q=(E instanceof Tl?"Sh":"P")+(Object.keys(ot).length+1).toString(10);E.id=Q,cr[x]=Q,ot[Q]=E,dr.publish("addPattern",E)}};y.ShadingPattern=Tl,y.TilingPattern=Pc,y.addShadingPattern=function(x,E){return J("addShadingPattern()"),jn(x,E),this},y.beginTilingPattern=function(x){J("beginTilingPattern()"),C(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},y.endTilingPattern=function(x,E){J("endTilingPattern()"),E.stream=$e[q].join(`
`),jn(x,E),dr.publish("endTilingPattern",E),vn.pop().restore()};var zn,ar=y.__private__.newObject=function(){var x=Cr();return Mr(x,!0),x},Cr=y.__private__.newObjectDeferred=function(){return de++,ve[de]=function(){return je},de},Mr=function(x,E){return E=typeof E=="boolean"&&E,ve[x]=je,E&&Z(x+" 0 obj"),x},Ps=y.__private__.newAdditionalObject=function(){var x={objId:Cr(),content:""};return be.push(x),x},Ms=Cr(),ts=Cr(),Us=y.__private__.decodeColorString=function(x){var E=x.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length!==5||E[4]!=="k"&&E[4]!=="K"||(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var Q=parseFloat(E[0]);E=[Q,Q,Q,"r"]}for(var pe="#",we=0;we<3;we++)pe+=("0"+Math.floor(255*parseFloat(E[we])).toString(16)).slice(-2);return pe},Zr=y.__private__.encodeColorString=function(x){var E;typeof x=="string"&&(x={ch1:x});var Q=x.ch1,pe=x.ch2,we=x.ch3,Oe=x.ch4,ze=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var at=new r1(Q);if(at.ok)Q=at.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var pt=parseInt(Q.substr(1),16);Q=pt>>16&255,pe=pt>>8&255,we=255&pt}if(pe===void 0||Oe===void 0&&Q===pe&&pe===we)E=typeof Q=="string"?Q+" "+ze[0]:x.precision===2?T(Q/255)+" "+ze[0]:B(Q/255)+" "+ze[0];else if(Oe===void 0||Pr(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return["1.","1.","1.",ze[1]].join(" ");E=typeof Q=="string"?[Q,pe,we,ze[1]].join(" "):x.precision===2?[T(Q/255),T(pe/255),T(we/255),ze[1]].join(" "):[B(Q/255),B(pe/255),B(we/255),ze[1]].join(" ")}else E=typeof Q=="string"?[Q,pe,we,Oe,ze[2]].join(" "):x.precision===2?[T(Q),T(pe),T(we),T(Oe),ze[2]].join(" "):[B(Q),B(pe),B(we),B(Oe),ze[2]].join(" ");return E},Cs=y.__private__.getFilters=function(){return u},$n=y.__private__.putStream=function(x){var E=(x=x||{}).data||"",Q=x.filters||Cs(),pe=x.alreadyAppliedFilters||[],we=x.addLength1||!1,Oe=E.length,ze=x.objectId,at=function(kr){return kr};if(v!==null&&ze===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(at=Wr.encryptor(ze,0));var pt={};Q===!0&&(Q=["FlateEncode"]);var Ut=x.additionalKeyValues||[],Ht=(pt=Ot.API.processDataByFilters!==void 0?Ot.API.processDataByFilters(E,Q):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(pt.data.length!==0&&(Ut.push({key:"Length",value:pt.data.length}),we===!0&&Ut.push({key:"Length1",value:Oe})),Ht.length!=0)if(Ht.split("/").length-1==1)Ut.push({key:"Filter",value:Ht});else{Ut.push({key:"Filter",value:"["+Ht+"]"});for(var kt=0;kt<Ut.length;kt+=1)if(Ut[kt].key==="DecodeParms"){for(var mt=[],sr=0;sr<pt.reverseChain.split("/").length-1;sr+=1)mt.push("null");mt.push(Ut[kt].value),Ut[kt].value="["+mt.join(" ")+"]"}}Z("<<");for(var er=0;er<Ut.length;er++)Z("/"+Ut[er].key+" "+Ut[er].value);Z(">>"),pt.data.length!==0&&(Z("stream"),Z(at(pt.data)),Z("endstream"))},xn=y.__private__.putPage=function(x){var E=x.number,Q=x.data,pe=x.objId,we=x.contentsObjId;Mr(pe,!0),Z("<</Type /Page"),Z("/Parent "+x.rootDictionaryObjId+" 0 R"),Z("/Resources "+x.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(re(x.mediaBox.bottomLeftX))+" "+parseFloat(re(x.mediaBox.bottomLeftY))+" "+re(x.mediaBox.topRightX)+" "+re(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&Z("/CropBox ["+re(x.cropBox.bottomLeftX)+" "+re(x.cropBox.bottomLeftY)+" "+re(x.cropBox.topRightX)+" "+re(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&Z("/BleedBox ["+re(x.bleedBox.bottomLeftX)+" "+re(x.bleedBox.bottomLeftY)+" "+re(x.bleedBox.topRightX)+" "+re(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&Z("/TrimBox ["+re(x.trimBox.bottomLeftX)+" "+re(x.trimBox.bottomLeftY)+" "+re(x.trimBox.topRightX)+" "+re(x.trimBox.topRightY)+"]"),x.artBox!==null&&Z("/ArtBox ["+re(x.artBox.bottomLeftX)+" "+re(x.artBox.bottomLeftY)+" "+re(x.artBox.topRightX)+" "+re(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&Z("/UserUnit "+x.userUnit),dr.publish("putPage",{objId:pe,pageContext:Dt[E],pageNumber:E,page:Q}),Z("/Contents "+we+" 0 R"),Z(">>"),Z("endobj");var Oe=Q.join(`
`);return $===U&&(Oe+=`
Q`),Mr(we,!0),$n({data:Oe,filters:Cs(),objectId:we}),Z("endobj"),pe},rs=y.__private__.putPages=function(){var x,E,Q=[];for(x=1;x<=$t;x++)Dt[x].objId=Cr(),Dt[x].contentsObjId=Cr();for(x=1;x<=$t;x++)Q.push(xn({number:x,data:$e[x],objId:Dt[x].objId,contentsObjId:Dt[x].contentsObjId,mediaBox:Dt[x].mediaBox,cropBox:Dt[x].cropBox,bleedBox:Dt[x].bleedBox,trimBox:Dt[x].trimBox,artBox:Dt[x].artBox,userUnit:Dt[x].userUnit,rootDictionaryObjId:Ms,resourceDictionaryObjId:ts}));Mr(Ms,!0),Z("<</Type /Pages");var pe="/Kids [";for(E=0;E<$t;E++)pe+=Q[E]+" 0 R ";Z(pe+"]"),Z("/Count "+$t),Z(">>"),Z("endobj"),dr.publish("postPutPages")},bi=function(x){dr.publish("putFont",{font:x,out:Z,newObject:ar,putStream:$n}),x.isAlreadyPutted!==!0&&(x.objectNumber=ar(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+Ac(x.postScriptName)),Z("/Subtype /Type1"),typeof x.encoding=="string"&&Z("/Encoding /"+x.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Bs=function(x){x.objectNumber=ar();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[re(x.x),re(x.y),re(x.x+x.width),re(x.y+x.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var Q=x.pages[1].join(`
`);$n({data:Q,additionalKeyValues:E,objectId:x.objectNumber}),Z("endobj")},wi=function(x,E){E||(E=21);var Q=ar(),pe=(function(ze,at){var pt,Ut=[],Ht=1/(at-1);for(pt=0;pt<1;pt+=Ht)Ut.push(pt);if(Ut.push(1),ze[0].offset!=0){var kt={offset:0,color:ze[0].color};ze.unshift(kt)}if(ze[ze.length-1].offset!=1){var mt={offset:1,color:ze[ze.length-1].color};ze.push(mt)}for(var sr="",er=0,kr=0;kr<Ut.length;kr++){for(pt=Ut[kr];pt>ze[er+1].offset;)er++;var pr=ze[er].offset,br=(pt-pr)/(ze[er+1].offset-pr),ps=ze[er].color,ai=ze[er+1].color;sr+=oe(Math.round((1-br)*ps[0]+br*ai[0]).toString(16))+oe(Math.round((1-br)*ps[1]+br*ai[1]).toString(16))+oe(Math.round((1-br)*ps[2]+br*ai[2]).toString(16))}return sr.trim()})(x.colors,E),we=[];we.push({key:"FunctionType",value:"0"}),we.push({key:"Domain",value:"[0.0 1.0]"}),we.push({key:"Size",value:"["+E+"]"}),we.push({key:"BitsPerSample",value:"8"}),we.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),we.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$n({data:pe,additionalKeyValues:we,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),Z("endobj"),x.objectNumber=ar(),Z("<< /ShadingType "+x.type),Z("/ColorSpace /DeviceRGB");var Oe="/Coords ["+re(parseFloat(x.coords[0]))+" "+re(parseFloat(x.coords[1]))+" ";x.type===2?Oe+=re(parseFloat(x.coords[2]))+" "+re(parseFloat(x.coords[3])):Oe+=re(parseFloat(x.coords[2]))+" "+re(parseFloat(x.coords[3]))+" "+re(parseFloat(x.coords[4]))+" "+re(parseFloat(x.coords[5])),Z(Oe+="]"),x.matrix&&Z("/Matrix ["+x.matrix.toString()+"]"),Z("/Function "+Q+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},ma=function(x,E){var Q=Cr(),pe=ar();E.push({resourcesOid:Q,objectOid:pe}),x.objectNumber=pe;var we=[];we.push({key:"Type",value:"/Pattern"}),we.push({key:"PatternType",value:"1"}),we.push({key:"PaintType",value:"1"}),we.push({key:"TilingType",value:"1"}),we.push({key:"BBox",value:"["+x.boundingBox.map(re).join(" ")+"]"}),we.push({key:"XStep",value:re(x.xStep)}),we.push({key:"YStep",value:re(x.yStep)}),we.push({key:"Resources",value:Q+" 0 R"}),x.matrix&&we.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),$n({data:x.stream,additionalKeyValues:we,objectId:x.objectNumber}),Z("endobj")},_i=function(x){for(var E in x.objectNumber=ar(),Z("<<"),x)switch(E){case"opacity":Z("/ca "+T(x[E]));break;case"stroke-opacity":Z("/CA "+T(x[E]))}Z(">>"),Z("endobj")},Nr=function(x){Mr(x.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var E in Z("/Font <<"),Gt)Gt.hasOwnProperty(E)&&(w===!1||w===!0&&k.hasOwnProperty(E))&&Z("/"+E+" "+Gt[E].objectNumber+" 0 R");Z(">>")})(),(function(){if(Object.keys(ot).length>0){for(var E in Z("/Shading <<"),ot)ot.hasOwnProperty(E)&&ot[E]instanceof Tl&&ot[E].objectNumber>=0&&Z("/"+E+" "+ot[E].objectNumber+" 0 R");dr.publish("putShadingPatternDict"),Z(">>")}})(),(function(E){if(Object.keys(ot).length>0){for(var Q in Z("/Pattern <<"),ot)ot.hasOwnProperty(Q)&&ot[Q]instanceof y.TilingPattern&&ot[Q].objectNumber>=0&&ot[Q].objectNumber<E&&Z("/"+Q+" "+ot[Q].objectNumber+" 0 R");dr.publish("putTilingPatternDict"),Z(">>")}})(x.objectOid),(function(){if(Object.keys(Et).length>0){var E;for(E in Z("/ExtGState <<"),Et)Et.hasOwnProperty(E)&&Et[E].objectNumber>=0&&Z("/"+E+" "+Et[E].objectNumber+" 0 R");dr.publish("putGStateDict"),Z(">>")}})(),(function(){for(var E in Z("/XObject <<"),cn)cn.hasOwnProperty(E)&&cn[E].objectNumber>=0&&Z("/"+E+" "+cn[E].objectNumber+" 0 R");dr.publish("putXobjectDict"),Z(">>")})(),Z(">>"),Z("endobj")},si=function(x){Me[x.fontName]=Me[x.fontName]||{},Me[x.fontName][x.fontStyle]=x.id},qi=function(x,E,Q,pe,we){var Oe={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:x,fontName:E,fontStyle:Q,encoding:pe,isStandardFont:we||!1,metadata:{}};return dr.publish("addFont",{font:Oe,instance:this}),Gt[Oe.id]=Oe,si(Oe),Oe.id},Wn=y.__private__.pdfEscape=y.pdfEscape=function(x,E){return(function(Q,pe){var we,Oe,ze,at,pt,Ut,Ht,kt,mt;if(ze=(pe=pe||{}).sourceEncoding||"Unicode",pt=pe.outputEncoding,(pe.autoencode||pt)&&Gt[ft].metadata&&Gt[ft].metadata[ze]&&Gt[ft].metadata[ze].encoding&&(at=Gt[ft].metadata[ze].encoding,!pt&&Gt[ft].encoding&&(pt=Gt[ft].encoding),!pt&&at.codePages&&(pt=at.codePages[0]),typeof pt=="string"&&(pt=at[pt]),pt)){for(Ht=!1,Ut=[],we=0,Oe=Q.length;we<Oe;we++)(kt=pt[Q.charCodeAt(we)])?Ut.push(String.fromCharCode(kt)):Ut.push(Q[we]),Ut[we].charCodeAt(0)>>8&&(Ht=!0);Q=Ut.join("")}for(we=Q.length;Ht===void 0&&we!==0;)Q.charCodeAt(we-1)>>8&&(Ht=!0),we--;if(!Ht)return Q;for(Ut=pe.noBOM?[]:[254,255],we=0,Oe=Q.length;we<Oe;we++){if((mt=(kt=Q.charCodeAt(we))>>8)>>8)throw new Error("Character at position "+we+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(mt),Ut.push(kt-(mt<<8))}return String.fromCharCode.apply(void 0,Ut)})(x,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Es=y.__private__.beginPage=function(x){$e[++$t]=[],Dt[$t]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},Ni($t),rt($e[q])},$a=function(x,E){var Q,pe,we;switch(t=E||t,typeof x=="string"&&(Q=A(x.toLowerCase()),Array.isArray(Q)&&(pe=Q[0],we=Q[1])),Array.isArray(x)&&(pe=x[0]*Nt,we=x[1]*Nt),isNaN(pe)&&(pe=a[0],we=a[1]),(pe>14400||we>14400)&&(Rr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),we=Math.min(14400,we)),a=[pe,we],t.substr(0,1)){case"l":we>pe&&(a=[we,pe]);break;case"p":pe>we&&(a=[we,pe])}Es(a),Ft(hs),Z(Hi),Gi!==0&&Z(Gi+" J"),Va!==0&&Z(Va+" j"),dr.publish("addPage",{pageNumber:$t})},ga=function(x){x>0&&x<=$t&&($e.splice(x,1),Dt.splice(x,1),$t--,q>$t&&(q=$t),this.setPage(q))},Ni=function(x){x>0&&x<=$t&&(q=x)},Hn=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return $e.length-1},xo=function(x,E,Q){var pe,we=void 0;return Q=Q||{},x=x!==void 0?x:Gt[ft].fontName,E=E!==void 0?E:Gt[ft].fontStyle,pe=x.toLowerCase(),Me[pe]!==void 0&&Me[pe][E]!==void 0?we=Me[pe][E]:Me[x]!==void 0&&Me[x][E]!==void 0?we=Me[x][E]:Q.disableWarning===!1&&Rr.warn("Unable to look up font label for font '"+x+"', '"+E+"'. Refer to getFontList() for available fonts."),we||Q.noFallback||(we=Me.times[E])==null&&(we=Me.times.normal),we},en=y.__private__.putInfo=function(){var x=ar(),E=function(pe){return pe};for(var Q in v!==null&&(E=Wr.encryptor(x,0)),Z("<<"),Z("/Producer ("+Wn(E("jsPDF "+Ot.version))+")"),Zt)Zt.hasOwnProperty(Q)&&Zt[Q]&&Z("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+Wn(E(Zt[Q]))+")");Z("/CreationDate ("+Wn(E(ee))+")"),Z(">>"),Z("endobj")},va=y.__private__.putCatalog=function(x){var E=(x=x||{}).rootDictionaryObjId||Ms;switch(ar(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+E+" 0 R"),wt||(wt="fullwidth"),wt){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+wt;Q.substr(Q.length-1)==="%"&&(wt=parseInt(wt)/100),typeof wt=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+T(wt)+"]")}switch(St||(St="continuous"),St){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}xt&&Z("/PageMode /"+xt),dr.publish("putCatalog"),Z(">>"),Z("endobj")},xa=y.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(de+1)),Z("/Root "+de+" 0 R"),Z("/Info "+(de-1)+" 0 R"),v!==null&&Z("/Encrypt "+Wr.oid+" 0 R"),Z("/ID [ <"+fe+"> <"+fe+"> ]"),Z(">>")},$r=y.__private__.putHeader=function(){Z("%PDF-"+P),Z("%")},ki=y.__private__.putXRef=function(){var x="0000000000";Z("xref"),Z("0 "+(de+1)),Z("0000000000 65535 f ");for(var E=1;E<=de;E++)typeof ve[E]=="function"?Z((x+ve[E]()).slice(-10)+" 00000 n "):ve[E]!==void 0?Z((x+ve[E]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},In=y.__private__.buildDocument=function(){var x;de=0,je=0,_e=[],ve=[],be=[],Ms=Cr(),ts=Cr(),rt(_e),dr.publish("buildDocument"),$r(),rs(),(function(){dr.publish("putAdditionalObjects");for(var Q=0;Q<be.length;Q++){var pe=be[Q];Mr(pe.objId,!0),Z(pe.content),Z("endobj")}dr.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var Q in Gt)Gt.hasOwnProperty(Q)&&(w===!1||w===!0&&k.hasOwnProperty(Q))&&bi(Gt[Q])})(),(function(){var Q;for(Q in Et)Et.hasOwnProperty(Q)&&_i(Et[Q])})(),(function(){for(var Q in cn)cn.hasOwnProperty(Q)&&Bs(cn[Q])})(),(function(Q){var pe;for(pe in ot)ot.hasOwnProperty(pe)&&(ot[pe]instanceof Tl?wi(ot[pe]):ot[pe]instanceof Pc&&ma(ot[pe],Q))})(x),dr.publish("putResources"),x.forEach(Nr),Nr({resourcesOid:ts,objectOid:Number.MAX_SAFE_INTEGER}),dr.publish("postPutResources"),v!==null&&(Wr.oid=ar(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Wr.v),Z("/R "+Wr.r),Z("/U <"+Wr.toHexString(Wr.U)+">"),Z("/O <"+Wr.toHexString(Wr.O)+">"),Z("/P "+Wr.P),Z(">>"),Z("endobj")),en(),va();var E=je;return ki(),xa(),Z("startxref"),Z(""+E),Z("%%EOF"),rt($e[q]),_e.join(`
`)},cs=y.__private__.getBlob=function(x){return new Blob([Rt(x)],{type:"application/pdf"})},Si=y.output=y.__private__.output=(zn=function(x,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",x){case void 0:return In();case"save":y.save(E.filename);break;case"arraybuffer":return Rt(In());case"blob":return cs(In());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(cs(In()))||void 0;Rr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",pe=In();try{Q=Cm(pe)}catch{Q=Cm(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+E.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var we="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(we=E.pdfObjectUrl,Oe="");var ze='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+we+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",at=Kt.open();return at!==null&&at.document.write(ze),at}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',Ut=Kt.open();if(Ut!==null){Ut.document.write(pt);var Ht=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=E.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',mt=Kt.open();if(mt!==null&&(mt.document.write(kt),mt.document.title=E.filename),mt||typeof safari>"u")return mt;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",E);default:return null}},zn.foo=function(){try{return zn.apply(this,arguments)}catch(Q){var x=Q.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var E="Error in function "+x.split(`
`)[0].split("<")[0]+": "+Q.message;if(!Kt.console)throw new Error(E);Kt.console.error(E,Q),Kt.alert&&alert(E)}},zn.foo.bar=zn,zn.foo),ns=function(x){return Array.isArray(ni)===!0&&ni.indexOf(x)>-1};switch(s){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=ns("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Nt=s}var Wr=null;K(),F();var us=y.__private__.getPageInfo=y.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[x].objId,pageNumber:x,pageContext:Dt[x]}},ya=y.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in Dt)if(Dt[E].objId===x)break;return us(E)},qs=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Dt[q].objId,pageNumber:q,pageContext:Dt[q]}};y.addPage=function(){return $a.apply(this,arguments),this},y.setPage=function(){return Ni.apply(this,arguments),rt.call(this,$e[q]),this},y.insertPage=function(x){return this.addPage(),this.movePage(q,x),this},y.movePage=function(x,E){var Q,pe;if(x>E){Q=$e[x],pe=Dt[x];for(var we=x;we>E;we--)$e[we]=$e[we-1],Dt[we]=Dt[we-1];$e[E]=Q,Dt[E]=pe,this.setPage(E)}else if(x<E){Q=$e[x],pe=Dt[x];for(var Oe=x;Oe<E;Oe++)$e[Oe]=$e[Oe+1],Dt[Oe]=Dt[Oe+1];$e[E]=Q,Dt[E]=pe,this.setPage(E)}return this},y.deletePage=function(){return ga.apply(this,arguments),this},y.__private__.text=y.text=function(x,E,Q,pe,we){var Oe,ze,at,pt,Ut,Ht,kt,mt,sr,er=(pe=pe||{}).scope||this;if(typeof x=="number"&&typeof E=="number"&&(typeof Q=="string"||Array.isArray(Q))){var kr=Q;Q=E,E=x,x=kr}if(arguments[3]instanceof It==0?(at=arguments[4],pt=arguments[5],Pr(kt=arguments[3])==="object"&&kt!==null||(typeof at=="string"&&(pt=at,at=null),typeof kt=="string"&&(pt=kt,kt=null),typeof kt=="number"&&(at=kt,kt=null),pe={flags:kt,angle:at,align:pt})):(J("The transform parameter of text() with a Matrix value"),sr=we),isNaN(E)||isNaN(Q)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return er;var pr,br="",ps=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:Vn,ai=er.internal.scaleFactor;function Yi(mr){return mr=mr.split("	").join(Array(pe.TabLen||9).join(" ")),Wn(mr,kt)}function Ga(mr){for(var Sr,Yr=mr.concat(),dn=[],ci=Yr.length;ci--;)typeof(Sr=Yr.shift())=="string"?dn.push(Sr):Array.isArray(mr)&&(Sr.length===1||Sr[1]===void 0&&Sr[2]===void 0)?dn.push(Sr[0]):dn.push([Sr[0],Sr[1],Sr[2]]);return dn}function No(mr,Sr){var Yr;if(typeof mr=="string")Yr=Sr(mr)[0];else if(Array.isArray(mr)){for(var dn,ci,al=mr.concat(),Po=[],Zi=al.length;Zi--;)typeof(dn=al.shift())=="string"?Po.push(Sr(dn)[0]):Array.isArray(dn)&&typeof dn[0]=="string"&&(ci=Sr(dn[0],dn[1],dn[2]),Po.push([ci[0],ci[1],ci[2]]));Yr=Po}return Yr}var ka=!1,Ya=!0;if(typeof x=="string")ka=!0;else if(Array.isArray(x)){var Sa=x.concat();ze=[];for(var ja,Rn=Sa.length;Rn--;)(typeof(ja=Sa.shift())!="string"||Array.isArray(ja)&&typeof ja[0]!="string")&&(Ya=!1);ka=Ya}if(ka===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Ka=We/er.internal.scaleFactor,Ja=Ka*(ps-1);switch(pe.baseline){case"bottom":Q-=Ja;break;case"top":Q+=Ka-Ja;break;case"hanging":Q+=Ka-2*Ja;break;case"middle":Q+=Ka/2-Ja}if((Ht=pe.maxWidth||0)>0&&(typeof x=="string"?x=er.splitTextToSize(x,Ht):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(mr,Sr){return mr.concat(er.splitTextToSize(Sr,Ht))},[]))),Oe={text:x,x:E,y:Q,options:pe,mutex:{pdfEscape:Wn,activeFontKey:ft,fonts:Gt,activeFontSize:We}},dr.publish("preProcessText",Oe),x=Oe.text,at=(pe=Oe.options).angle,sr instanceof It==0&&at&&typeof at=="number"){at*=Math.PI/180,pe.rotationDirection===0&&(at=-at),$===U&&(at=-at);var sl=Math.cos(at),il=Math.sin(at);sr=new It(sl,il,-il,sl,0,0)}else at&&at instanceof It&&(sr=at);$!==U||sr||(sr=qn),(Ut=pe.charSpace||tn)!==void 0&&(br+=re(ie(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mt=pe.horizontalScale)!==void 0&&(br+=re(100*mt)+` Tz
`),pe.lang;var ss=-1,oi=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Pi=er.internal.getCurrentPageInfo().pageContext;switch(oi){case 0:case!1:case"fill":ss=0;break;case 1:case!0:case"stroke":ss=1;break;case 2:case"fillThenStroke":ss=2;break;case 3:case"invisible":ss=3;break;case 4:case"fillAndAddForClipping":ss=4;break;case 5:case"strokeAndAddPathForClipping":ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ss=6;break;case 7:case"addToPathForClipping":ss=7}var zl=Pi.usedRenderingMode!==void 0?Pi.usedRenderingMode:-1;ss!==-1?br+=ss+` Tr
`:zl!==-1&&(br+=`0 Tr
`),ss!==-1&&(Pi.usedRenderingMode=ss),pt=pe.align||"left";var Ls,Aa=We*ps,ko=er.internal.pageSize.getWidth(),So=Gt[ft];Ut=pe.charSpace||tn,Ht=pe.maxWidth||0,kt=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Ki=[],Gs=function(mr){return er.getStringUnitWidth(mr,{font:So,charSpace:Ut,fontSize:We,doKerning:!1})*We/ai};if(Object.prototype.toString.call(x)==="[object Array]"){var Ts;ze=Ga(x),pt!=="left"&&(Ls=ze.map(Gs));var Is,Pa=0;if(pt==="right"){E-=Ls[0],x=[],Rn=ze.length;for(var Ci=0;Ci<Rn;Ci++)Ci===0?(Is=Dn(E),Ts=Ws(Q)):(Is=ie(Pa-Ls[Ci]),Ts=-Aa),x.push([ze[Ci],Is,Ts]),Pa=Ls[Ci]}else if(pt==="center"){E-=Ls[0]/2,x=[],Rn=ze.length;for(var Ji=0;Ji<Rn;Ji++)Ji===0?(Is=Dn(E),Ts=Ws(Q)):(Is=ie((Pa-Ls[Ji])/2),Ts=-Aa),x.push([ze[Ji],Is,Ts]),Pa=Ls[Ji]}else if(pt==="left"){x=[],Rn=ze.length;for(var Xi=0;Xi<Rn;Xi++)x.push(ze[Xi])}else if(pt==="justify"&&So.encoding==="Identity-H"){x=[],Rn=ze.length,Ht=Ht!==0?Ht:ko;for(var Ei=0,rn=0;rn<Rn;rn++)if(Ts=rn===0?Ws(Q):-Aa,Is=rn===0?Dn(E):Ei,rn<Rn-1){var Xa=ie((Ht-Ls[rn])/(ze[rn].split(" ").length-1)),Li=ze[rn].split(" ");x.push([Li[0]+" ",Is,Ts]),Ei=0;for(var li=1;li<Li.length;li++){var Qa=(Gs(Li[li-1]+" "+Li[li])-Gs(Li[li]))*ai+Xa;li==Li.length-1?x.push([Li[li],Qa,0]):x.push([Li[li]+" ",Qa,0]),Ei-=Qa}}else x.push([ze[rn],Is,Ts]);x.push(["",Ei,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Rn=ze.length,Ht=Ht!==0?Ht:ko,rn=0;rn<Rn;rn++){Ts=rn===0?Ws(Q):-Aa,Is=rn===0?Dn(E):0;var Za=ze[rn].split(" ").length-1,jo=Za>0?(Ht-Ls[rn])/Za:0;rn<Rn-1?Ki.push(re(ie(jo))):Ki.push(0),x.push([ze[rn],Is,Ts])}}}(typeof pe.R2L=="boolean"?pe.R2L:_t)===!0&&(x=No(x,function(mr,Sr,Yr){return[mr.split("").reverse().join(""),Sr,Yr]})),Oe={text:x,x:E,y:Q,options:pe,mutex:{pdfEscape:Wn,activeFontKey:ft,fonts:Gt,activeFontSize:We}},dr.publish("postProcessText",Oe),x=Oe.text,pr=Oe.mutex.isHex||!1;var Ao=Gt[ft].encoding;Ao!=="WinAnsiEncoding"&&Ao!=="StandardEncoding"||(x=No(x,function(mr,Sr,Yr){return[Yi(mr),Sr,Yr]})),ze=Ga(x),x=[];for(var Qi,Ca,Ea,eo=Array.isArray(ze[0])?1:0,La="",to=function(mr,Sr,Yr){var dn="";return Yr instanceof It?(Yr=typeof pe.angle=="number"?Sn(Yr,new It(1,0,0,1,mr,Sr)):Sn(new It(1,0,0,1,mr,Sr),Yr),$===U&&(Yr=Sn(new It(1,0,0,-1,0,0),Yr)),dn=Yr.join(" ")+` Tm
`):dn=re(mr)+" "+re(Sr)+` Td
`,dn},Gr=0;Gr<ze.length;Gr++){switch(La="",eo){case 1:Ea=(pr?"<":"(")+ze[Gr][0]+(pr?">":")"),Qi=parseFloat(ze[Gr][1]),Ca=parseFloat(ze[Gr][2]);break;case 0:Ea=(pr?"<":"(")+ze[Gr]+(pr?">":")"),Qi=Dn(E),Ca=Ws(Q)}Ki!==void 0&&Ki[Gr]!==void 0&&(La=Ki[Gr]+` Tw
`),Gr===0?x.push(La+to(Qi,Ca,sr)+Ea):eo===0?x.push(La+Ea):eo===1&&x.push(La+to(Qi,Ca,sr)+Ea)}x=eo===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var ms=`BT
/`;return ms+=ft+" "+We+` Tf
`,ms+=re(We*ps)+` TL
`,ms+=Hs+`
`,ms+=br,ms+=x,Z(ms+="ET"),k[ft]=!0,er};var zi=y.__private__.clip=y.clip=function(x){return Z(x==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return zi("evenodd")},y.__private__.discardPath=y.discardPath=function(){return Z("n"),this};var ds=y.__private__.isValidStyle=function(x){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(E=!0),E};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(x){return ds(x)&&(m=x),this};var ii=y.__private__.getStyle=y.getStyle=function(x){var E=m;switch(x){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=x}return E},fr=y.close=function(){return Z("h"),this};y.stroke=function(){return Z("S"),this},y.fill=function(x){return $i("f",x),this},y.fillEvenOdd=function(x){return $i("f*",x),this},y.fillStroke=function(x){return $i("B",x),this},y.fillStrokeEvenOdd=function(x){return $i("B*",x),this};var $i=function(x,E){Pr(E)==="object"?yo(E,x):Z(x)},ji=function(x){x===null||$===U&&x===void 0||(x=ii(x),Z(x))};function Wa(x,E,Q,pe,we){var Oe=new Pc(E||this.boundingBox,Q||this.xStep,pe||this.yStep,this.gState,we||this.matrix);Oe.stream=this.stream;var ze=x+"$$"+this.cloneIndex+++"$$";return jn(ze,Oe),Oe}var yo=function(x,E){var Q=cr[x.key],pe=ot[Q];if(pe instanceof Tl)Z("q"),Z(bo(E)),pe.gState&&y.setGState(pe.gState),Z(x.matrix.toString()+" cm"),Z("/"+Q+" sh"),Z("Q");else if(pe instanceof Pc){var we=new It(1,0,0,-1,0,Ke());x.matrix&&(we=we.multiply(x.matrix||qn),Q=Wa.call(pe,x.key,x.boundingBox,x.xStep,x.yStep,we).id),Z("q"),Z("/Pattern cs"),Z("/"+Q+" scn"),pe.gState&&y.setGState(pe.gState),Z(E),Z("Q")}},bo=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ba=y.moveTo=function(x,E){return Z(re(ie(x))+" "+re(M(E))+" m"),this},wa=y.lineTo=function(x,E){return Z(re(ie(x))+" "+re(M(E))+" l"),this},On=y.curveTo=function(x,E,Q,pe,we,Oe){return Z([re(ie(x)),re(M(E)),re(ie(Q)),re(M(pe)),re(ie(we)),re(M(Oe)),"c"].join(" ")),this};y.__private__.line=y.line=function(x,E,Q,pe,we){if(isNaN(x)||isNaN(E)||isNaN(Q)||isNaN(pe)||!ds(we))throw new Error("Invalid arguments passed to jsPDF.line");return $===G?this.lines([[Q-x,pe-E]],x,E,[1,1],we||"S"):this.lines([[Q-x,pe-E]],x,E,[1,1]).stroke()},y.__private__.lines=y.lines=function(x,E,Q,pe,we,Oe){var ze,at,pt,Ut,Ht,kt,mt,sr,er,kr,pr,br;if(typeof x=="number"&&(br=Q,Q=E,E=x,x=br),pe=pe||[1,1],Oe=Oe||!1,isNaN(E)||isNaN(Q)||!Array.isArray(x)||!Array.isArray(pe)||!ds(we)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ba(E,Q),ze=pe[0],at=pe[1],Ut=x.length,kr=E,pr=Q,pt=0;pt<Ut;pt++)(Ht=x[pt]).length===2?(kr=Ht[0]*ze+kr,pr=Ht[1]*at+pr,wa(kr,pr)):(kt=Ht[0]*ze+kr,mt=Ht[1]*at+pr,sr=Ht[2]*ze+kr,er=Ht[3]*at+pr,kr=Ht[4]*ze+kr,pr=Ht[5]*at+pr,On(kt,mt,sr,er,kr,pr));return Oe&&fr(),ji(we),this},y.path=function(x){for(var E=0;E<x.length;E++){var Q=x[E],pe=Q.c;switch(Q.op){case"m":ba(pe[0],pe[1]);break;case"l":wa(pe[0],pe[1]);break;case"c":On.apply(this,pe);break;case"h":fr()}}return this},y.__private__.rect=y.rect=function(x,E,Q,pe,we){if(isNaN(x)||isNaN(E)||isNaN(Q)||isNaN(pe)||!ds(we))throw new Error("Invalid arguments passed to jsPDF.rect");return $===G&&(pe=-pe),Z([re(ie(x)),re(M(E)),re(ie(Q)),re(ie(pe)),"re"].join(" ")),ji(we),this},y.__private__.triangle=y.triangle=function(x,E,Q,pe,we,Oe,ze){if(isNaN(x)||isNaN(E)||isNaN(Q)||isNaN(pe)||isNaN(we)||isNaN(Oe)||!ds(ze))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-x,pe-E],[we-Q,Oe-pe],[x-we,E-Oe]],x,E,[1,1],ze,!0),this},y.__private__.roundedRect=y.roundedRect=function(x,E,Q,pe,we,Oe,ze){if(isNaN(x)||isNaN(E)||isNaN(Q)||isNaN(pe)||isNaN(we)||isNaN(Oe)||!ds(ze))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var at=4/3*(Math.SQRT2-1);return we=Math.min(we,.5*Q),Oe=Math.min(Oe,.5*pe),this.lines([[Q-2*we,0],[we*at,0,we,Oe-Oe*at,we,Oe],[0,pe-2*Oe],[0,Oe*at,-we*at,Oe,-we,Oe],[2*we-Q,0],[-we*at,0,-we,-Oe*at,-we,-Oe],[0,2*Oe-pe],[0,-Oe*at,we*at,-Oe,we,-Oe]],x+we,E,[1,1],ze,!0),this},y.__private__.ellipse=y.ellipse=function(x,E,Q,pe,we){if(isNaN(x)||isNaN(E)||isNaN(Q)||isNaN(pe)||!ds(we))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*Q,ze=4/3*(Math.SQRT2-1)*pe;return ba(x+Q,E),On(x+Q,E-ze,x+Oe,E-pe,x,E-pe),On(x-Oe,E-pe,x-Q,E-ze,x-Q,E),On(x-Q,E+ze,x-Oe,E+pe,x,E+pe),On(x+Oe,E+pe,x+Q,E+ze,x+Q,E),ji(we),this},y.__private__.circle=y.circle=function(x,E,Q,pe){if(isNaN(x)||isNaN(E)||isNaN(Q)||!ds(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,E,Q,Q,pe)},y.setFont=function(x,E,Q){return Q&&(E=H(E,Q)),ft=xo(x,E,{disableWarning:!1}),this};var zs=y.__private__.getFont=y.getFont=function(){return Gt[xo.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var x,E,Q={};for(x in Me)if(Me.hasOwnProperty(x))for(E in Q[x]=[],Me[x])Me[x].hasOwnProperty(E)&&Q[x].push(E);return Q},y.addFont=function(x,E,Q,pe,we){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?we=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(Q=H(Q,pe)),qi.call(this,x,E,Q,we=we||"Identity-H")};var Vn,hs=n.lineWidth||.200025,Wi=y.__private__.getLineWidth=y.getLineWidth=function(){return hs},Ft=y.__private__.setLineWidth=y.setLineWidth=function(x){return hs=x,Z(re(ie(x))+" w"),this};y.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(x,E){if(x=x||[],E=E||0,isNaN(E)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(Q){return re(ie(Q))}).join(" "),E=re(ie(E)),Z("["+x+"] "+E+" d"),this};var $s=y.__private__.getLineHeight=y.getLineHeight=function(){return We*Vn};y.__private__.getLineHeight=y.getLineHeight=function(){return We*Vn};var nl=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Vn=x),this},wo=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Vn};nl(n.lineHeight);var Dn=y.__private__.getHorizontalCoordinate=function(x){return ie(x)},Ws=y.__private__.getVerticalCoordinate=function(x){return $===U?x:Dt[q].mediaBox.topRightY-Dt[q].mediaBox.bottomLeftY-ie(x)},Ha=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(x){return re(Dn(x))},_a=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(x){return re(Ws(x))},Hi=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Us(Hi)},y.__private__.setStrokeColor=y.setDrawColor=function(x,E,Q,pe){return Hi=Zr({ch1:x,ch2:E,ch3:Q,ch4:pe,pdfColorType:"draw",precision:2}),Z(Hi),this};var _o=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Us(_o)},y.__private__.setFillColor=y.setFillColor=function(x,E,Q,pe){return _o=Zr({ch1:x,ch2:E,ch3:Q,ch4:pe,pdfColorType:"fill",precision:2}),Z(_o),this};var Hs=n.textColor||"0 g",Vi=y.__private__.getTextColor=y.getTextColor=function(){return Us(Hs)};y.__private__.setTextColor=y.setTextColor=function(x,E,Q,pe){return Hs=Zr({ch1:x,ch2:E,ch3:Q,ch4:pe,pdfColorType:"text",precision:3}),this};var tn=n.charSpace,Vs=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(tn||0)};y.__private__.setCharSpace=y.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tn=x,this};var Gi=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(x){var E=y.CapJoinStyles[x];if(E===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gi=E,Z(E+" J"),this};var Va=0;y.__private__.setLineJoin=y.setLineJoin=function(x){var E=y.CapJoinStyles[x];if(E===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Va=E,Z(E+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(re(ie(x))+" M"),this},y.GState=Od,y.setGState=function(x){(x=typeof x=="string"?Et[Pt[x]]:Na(null,x)).equals(ur)||(Z("/"+x.id+" gs"),ur=x)};var Na=function(x,E){if(!x||!Pt[x]){var Q=!1;for(var pe in Et)if(Et.hasOwnProperty(pe)&&Et[pe].equals(E)){Q=!0;break}if(Q)E=Et[pe];else{var we="GS"+(Object.keys(Et).length+1).toString(10);Et[we]=E,E.id=we}return x&&(Pt[x]=E.id),dr.publish("addGState",E),E}};y.addGState=function(x,E){return Na(x,E),this},y.saveGraphicsState=function(){return Z("q"),jt.push({key:ft,size:We,color:Hs}),this},y.restoreGraphicsState=function(){Z("Q");var x=jt.pop();return ft=x.key,We=x.size,Hs=x.color,ur=null,this},y.setCurrentTransformationMatrix=function(x){return Z(x.toString()+" cm"),this},y.comment=function(x){return Z("#"+x),this};var un=function(x,E){var Q=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(Oe){isNaN(Oe)||(Q=parseFloat(Oe))}});var pe=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Oe){isNaN(Oe)||(pe=parseFloat(Oe))}});var we="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return we},set:function(Oe){we=Oe.toString()}}),this},Ai=function(x,E,Q,pe){un.call(this,x,E),this.type="rect";var we=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return we},set:function(ze){isNaN(ze)||(we=parseFloat(ze))}});var Oe=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(ze){isNaN(ze)||(Oe=parseFloat(ze))}}),this},fs=function(){this.page=$t,this.currentPage=q,this.pages=$e.slice(0),this.pagesContext=Dt.slice(0),this.x=ut,this.y=_r,this.matrix=Jt,this.width=Se(q),this.height=Ue(q),this.outputDestination=Xe,this.id="",this.objectNumber=-1};fs.prototype.restore=function(){$t=this.page,q=this.currentPage,Dt=this.pagesContext,$e=this.pages,ut=this.x,_r=this.y,Jt=this.matrix,Pe(q,this.width),Ye(q,this.height),Xe=this.outputDestination};var C=function(x,E,Q,pe,we){vn.push(new fs),$t=q=0,$e=[],ut=x,_r=E,Jt=we,Es([Q,pe])};for(var me in y.beginFormObject=function(x,E,Q,pe,we){return C(x,E,Q,pe,we),this},y.endFormObject=function(x){return(function(E){if(As[E])vn.pop().restore();else{var Q=new fs,pe="Xo"+(Object.keys(cn).length+1).toString(10);Q.id=pe,As[E]=pe,cn[pe]=Q,dr.publish("addFormObject",Q),vn.pop().restore()}})(x),this},y.doFormObject=function(x,E){var Q=cn[As[x]];return Z("q"),Z(E.toString()+" cm"),Z("/"+Q.id+" Do"),Z("Q"),this},y.getFormObject=function(x){var E=cn[As[x]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},y.save=function(x,E){return x=x||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(Cl(cs(In()),x),typeof Cl.unload=="function"&&Kt.setTimeout&&setTimeout(Cl.unload,911),this):new Promise(function(Q,pe){try{var we=Cl(cs(In()),x);typeof Cl.unload=="function"&&Kt.setTimeout&&setTimeout(Cl.unload,911),Q(we)}catch(Oe){pe(Oe.message)}})},Ot.API)Ot.API.hasOwnProperty(me)&&(me==="events"&&Ot.API.events.length?(function(x,E){var Q,pe,we;for(we=E.length-1;we!==-1;we--)Q=E[we][0],pe=E[we][1],x.subscribe.apply(x,[Q].concat(typeof pe=="function"?[pe]:pe))})(dr,Ot.API.events):y[me]=Ot.API[me]);function Se(x){return Dt[x].mediaBox.topRightX-Dt[x].mediaBox.bottomLeftX}function Pe(x,E){Dt[x].mediaBox.topRightX=E+Dt[x].mediaBox.bottomLeftX}function Ue(x){return Dt[x].mediaBox.topRightY-Dt[x].mediaBox.bottomLeftY}function Ye(x,E){Dt[x].mediaBox.topRightY=E+Dt[x].mediaBox.bottomLeftY}var nt=y.getPageWidth=function(x){return Se(x=x||q)/Nt},Qe=y.setPageWidth=function(x,E){Pe(x,E*Nt)},Ke=y.getPageHeight=function(x){return Ue(x=x||q)/Nt},it=y.setPageHeight=function(x,E){Ye(x,E*Nt)};return y.internal={pdfEscape:Wn,getStyle:ii,getFont:zs,getFontSize:st,getCharSpace:Vs,getTextColor:Vi,getLineHeight:$s,getLineHeightFactor:wo,getLineWidth:Wi,write:Ze,getHorizontalCoordinate:Dn,getVerticalCoordinate:Ws,getCoordinateString:Ha,getVerticalCoordinateString:_a,collections:{},newObject:ar,newAdditionalObject:Ps,newObjectDeferred:Cr,newObjectDeferredBegin:Mr,getFilters:Cs,putStream:$n,events:dr,scaleFactor:Nt,pageSize:{getWidth:function(){return nt(q)},setWidth:function(x){Qe(q,x)},getHeight:function(){return Ke(q)},setHeight:function(x){it(q,x)}},encryptionOptions:v,encryption:Wr,getEncryptor:function(x){return v!==null?Wr.encryptor(x,0):function(E){return E}},output:Si,getNumberOfPages:Hn,get pages(){return $e},out:Z,f2:T,f3:B,getPageInfo:us,getPageInfoByObjId:ya,getCurrentPageInfo:qs,getPDFVersion:L,Point:un,Rectangle:Ai,Matrix:It,hasHotfix:ns},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return nt(q)},set:function(x){Qe(q,x)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Ke(q)},set:function(x){it(q,x)},enumerable:!0,configurable:!0}),(function(x){for(var E=0,Q=Tt.length;E<Q;E++){var pe=qi.call(this,x[E][0],x[E][1],x[E][2],Tt[E][3],!0);w===!1&&(k[pe]=!0);var we=x[E][0].split("-");si({id:pe,fontName:we[0],fontStyle:we[1]||""})}dr.publish("addFonts",{fonts:Gt,dictionary:Me})}).call(y,Tt),ft="F1",$a(a,t),dr.publish("initialized"),y}jc.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},jc.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jc.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},jc.prototype.processOwnerPassword=function(n,e){return If(Tf(e).substr(0,5),n)},jc.prototype.encryptor=function(n,e){var t=Tf(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return If(t,s)}},Od.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Pr(n)!==Pr(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Ot.API={events:[]},Ot.version="3.0.4";var gn=Ot.API,Yf=1,ql=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_c=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rr=function(n){return n.toFixed(2)},Ko=function(n){return n.toFixed(5)};gn.__acroform__={};var ri=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Im=function(n){return n*Yf},Ua=function(n){var e=new a1,t=bt.internal.getHeight(n)||0,s=bt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(rr(s)),Number(rr(t))],e},qb=gn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},zb=gn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},$b=gn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},_n=gn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $b(n,e-1)},Nn=gn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qb(n,e-1)},kn=gn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zb(n,e-1)},Wb=gn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],d=n[3],f={};return f.lowerLeft_X=t(a)||0,f.lowerLeft_Y=s(o+d)||0,f.upperRight_X=t(a+u)||0,f.upperRight_Y=s(o)||0,[Number(rr(f.lowerLeft_X)),Number(rr(f.lowerLeft_Y)),Number(rr(f.upperRight_X)),Number(rr(f.upperRight_Y))]},Hb=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Of(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+rr(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Ua(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Of=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(T){return T.split(`
`)}):a.map(function(T){return[T]});var o=t,u=bt.internal.getHeight(n)||0;u=u<0?-u:u;var d=bt.internal.getWidth(n)||0;d=d<0?-d:d;var f=function(T,B,ie){if(T+1<a.length){var M=B+" "+a[T+1][0];return vd(M,n,ie).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var m,v,w=vd("3",n,o).height,k=n.multiline?u-o:(u-w)/2,y=k+=2,P=0,L=0,I=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+vd(e,n,o=12).width+", FieldWidth:"+d+`
`;break}for(var A="",G=0,U=0;U<a.length;U++)if(a.hasOwnProperty(U)){var $=!1;if(a[U].length!==1&&I!==a[U].length-1){if((w+2)*(G+2)+2>u)continue e;A+=a[U][I],$=!0,L=U,U--}else{A=(A+=a[U][I]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var le=parseInt(U),he=f(le,A,o),H=U>=a.length-1;if(he&&!H){A+=" ",I=0;continue}if(he||H){if(H)L=le;else if(n.multiline&&(w+2)*(G+2)+2>u)continue e}else{if(!n.multiline||(w+2)*(G+2)+2>u)continue e;L=le}}for(var re="",J=P;J<=L;J++){var W=a[J];if(n.multiline){if(J===L){re+=W[I]+" ",I=(I+1)%W.length;continue}if(J===P){re+=W[W.length-1]+" ";continue}}re+=W[0]+" "}switch(re=re.substr(re.length-1)==" "?re.substr(0,re.length-1):re,v=vd(re,n,o).width,n.textAlign){case"right":m=d-v-2;break;case"center":m=(d-v)/2;break;default:m=2}e+=rr(m)+" "+rr(y)+` Td
`,e+="("+ql(re)+`) Tj
`,e+=-rr(m)+` 0 Td
`,y=-(o+2),v=0,P=$?L:L+1,G++,A=""}break}return s.text=e,s.fontSize=o,s},vd=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Vb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Gb=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Yb=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(fa.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Vb)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Yf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new o1,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&Gb(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var d=s[u],f=[],m=d.Rect;if(d.Rect&&(d.Rect=Wb(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=bt.createDefaultAppearanceStream(d),Pr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(f=d.getKeyValueListForStream()),d.Rect=m,d.hasAppearanceStream&&!d.appearanceStreamContent){var v=Hb(d);f.push({key:"AP",value:"<</N "+v+">>"}),a.internal.acroformPlugin.xForms.push(v)}if(d.appearanceStreamContent){var w="";for(var k in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(k)){var y=d.appearanceStreamContent[k];if(w+="/"+k+" ",w+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var P=y[u];typeof P=="function"&&(P=P.call(a,d)),w+="/"+u+" "+P+" ",a.internal.acroformPlugin.xForms.indexOf(P)>=0||a.internal.acroformPlugin.xForms.push(P)}}else typeof(P=y)=="function"&&(P=P.call(a,d)),w+="/"+u+" "+P,a.internal.acroformPlugin.xForms.indexOf(P)>=0||a.internal.acroformPlugin.xForms.push(P);w+=">>"}f.push({key:"AP",value:`<<
`+w+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:d.objId}),a.internal.out("endobj")}o&&(function(L,I){for(var A in L)if(L.hasOwnProperty(A)){var G=A,U=L[A];I.internal.newObjectDeferredBegin(U.objId,!0),Pr(U)==="object"&&typeof U.putStream=="function"&&U.putStream(),delete L[G]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},i1=gn.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),Pr(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+ql(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},nf=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+ql(s(n))+")"},qa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qa.prototype.toString=function(){return this.objId+" 0 R"},qa.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},qa.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:i1(a,this.objId,this.scope)}):a instanceof qa?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var a1=function(){qa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ri(a1,qa);var o1=function(){qa.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ql(t(n))+")"}},set:function(t){n=t}})};ri(o1,qa);var fa=function n(){qa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_n(e,3)},set:function(A){A?this.F=Nn(e,3):this.F=kn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(A){s=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(A){s[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(A){s[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(A){s[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(A){s[3]=A}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Dd)return;o="FieldObject"+n.FieldNum++}var A=function(G){return G};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+ql(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(A){f=A}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/Yf:m},set:function(A){m=A}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(A){v=A}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof Dd||this instanceof Dl))return nf(w,this.objId,this.scope)},set:function(A){A=A.toString(),w=A}});var k=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(k)return this instanceof es==0?nf(k,this.objId,this.scope):k},set:function(A){A=A.toString(),k=this instanceof es==0?A.substr(0,1)==="("?_c(A.substr(1,A.length-2)):_c(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof es==1?_c(k.substr(1,k.length-1)):k},set:function(A){A=A.toString(),k=this instanceof es==1?"/"+A:A}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof es==0?nf(y,this.objId,this.scope):y},set:function(A){A=A.toString(),y=this instanceof es==0?A.substr(0,1)==="("?_c(A.substr(1,A.length-2)):_c(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof es==1?_c(y.substr(1,y.length-1)):y},set:function(A){A=A.toString(),y=this instanceof es==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(A){A=!!A,L=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(A){P=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,1)},set:function(A){A?this.Ff=Nn(this.Ff,1):this.Ff=kn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,2)},set:function(A){A?this.Ff=Nn(this.Ff,2):this.Ff=kn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,3)},set:function(A){A?this.Ff=Nn(this.Ff,3):this.Ff=kn(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');I=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(I){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:I=2;break;case"center":case 1:I=1;break;default:I=0}}})};ri(fa,qa);var Ec=function(){fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return i1(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,d){d||(d=1);for(var f,m=[];f=u.exec(o);)m.push(f[d]);return m})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,18)},set:function(t){t?this.Ff=Nn(this.Ff,18):this.Ff=kn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Nn(this.Ff,19):this.Ff=kn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,20)},set:function(t){t?(this.Ff=Nn(this.Ff,20),e.sort()):this.Ff=kn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,22)},set:function(t){t?this.Ff=Nn(this.Ff,22):this.Ff=kn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,23)},set:function(t){t?this.Ff=Nn(this.Ff,23):this.Ff=kn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,27)},set:function(t){t?this.Ff=Nn(this.Ff,27):this.Ff=kn(this.Ff,27)}}),this.hasAppearanceStream=!1};ri(Ec,fa);var Lc=function(){Ec.call(this),this.fontName="helvetica",this.combo=!1};ri(Lc,Ec);var Tc=function(){Lc.call(this),this.combo=!0};ri(Tc,Lc);var Nd=function(){Tc.call(this),this.edit=!0};ri(Nd,Tc);var es=function(){fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,15)},set:function(t){t?this.Ff=Nn(this.Ff,15):this.Ff=kn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,16)},set:function(t){t?this.Ff=Nn(this.Ff,16):this.Ff=kn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,17)},set:function(t){t?this.Ff=Nn(this.Ff,17):this.Ff=kn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,26)},set:function(t){t?this.Ff=Nn(this.Ff,26):this.Ff=kn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+ql(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){Pr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ri(es,fa);var kd=function(){es.call(this),this.pushButton=!0};ri(kd,es);var Ic=function(){es.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ri(Ic,es);var Dd=function(){var n,e;fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+ql(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Pr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ri(Dd,fa),Ic.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ic.prototype.createOption=function(n){var e=new Dd;return e.Parent=this,e.optionName=n,this.Kids.push(e),Kb.call(this.scope,e),e};var Sd=function(){es.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};ri(Sd,es);var Dl=function(){fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,13)},set:function(e){e?this.Ff=Nn(this.Ff,13):this.Ff=kn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,21)},set:function(e){e?this.Ff=Nn(this.Ff,21):this.Ff=kn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,23)},set:function(e){e?this.Ff=Nn(this.Ff,23):this.Ff=kn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,24)},set:function(e){e?this.Ff=Nn(this.Ff,24):this.Ff=kn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,25)},set:function(e){e?this.Ff=Nn(this.Ff,25):this.Ff=kn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,26)},set:function(e){e?this.Ff=Nn(this.Ff,26):this.Ff=kn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ri(Dl,fa);var jd=function(){Dl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_n(this.Ff,14)},set:function(n){n?this.Ff=Nn(this.Ff,14):this.Ff=kn(this.Ff,14)}}),this.password=!0};ri(jd,Dl);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ua(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Of(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+rr(bt.internal.getWidth(n))+" "+rr(bt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+rr(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ua(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=bt.internal.getHeight(n),u=bt.internal.getWidth(n),d=Of(n,n.caption);return a.push("1 g"),a.push("0 0 "+rr(u)+" "+rr(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+rr(u-1)+" "+rr(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+rr(d.fontSize)+" Tf "+s),a.push(d.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Ua(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rr(bt.internal.getWidth(n))+" "+rr(bt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=bt.RadioButton.Circle.YesNormal,e.D[n]=bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ua(n);e.scope=n.scope;var t=[],s=bt.internal.getWidth(n)<=bt.internal.getHeight(n)?bt.internal.getWidth(n)/4:bt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=bt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ko(bt.internal.getWidth(n)/2)+" "+Ko(bt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ua(n);e.scope=n.scope;var t=[],s=bt.internal.getWidth(n)<=bt.internal.getHeight(n)?bt.internal.getWidth(n)/4:bt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*bt.internal.Bezier_C).toFixed(5)),u=Number((s*bt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(bt.internal.getWidth(n)/2)+" "+Ko(bt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ko(bt.internal.getWidth(n)/2)+" "+Ko(bt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ua(n);e.scope=n.scope;var t=[],s=bt.internal.getWidth(n)<=bt.internal.getHeight(n)?bt.internal.getWidth(n)/4:bt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*bt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(bt.internal.getWidth(n)/2)+" "+Ko(bt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=bt.RadioButton.Cross.YesNormal,e.D[n]=bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ua(n);e.scope=n.scope;var t=[],s=bt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+rr(bt.internal.getWidth(n)-2)+" "+rr(bt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(rr(s.x1.x)+" "+rr(s.x1.y)+" m"),t.push(rr(s.x2.x)+" "+rr(s.x2.y)+" l"),t.push(rr(s.x4.x)+" "+rr(s.x4.y)+" m"),t.push(rr(s.x3.x)+" "+rr(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ua(n);e.scope=n.scope;var t=bt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+rr(bt.internal.getWidth(n))+" "+rr(bt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+rr(bt.internal.getWidth(n)-2)+" "+rr(bt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(rr(t.x1.x)+" "+rr(t.x1.y)+" m"),s.push(rr(t.x2.x)+" "+rr(t.x2.y)+" l"),s.push(rr(t.x4.x)+" "+rr(t.x4.y)+" m"),s.push(rr(t.x3.x)+" "+rr(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Ua(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rr(bt.internal.getWidth(n))+" "+rr(bt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};bt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=bt.internal.getWidth(n),t=bt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},bt.internal.getWidth=function(n){var e=0;return Pr(n)==="object"&&(e=Im(n.Rect[2])),e},bt.internal.getHeight=function(n){var e=0;return Pr(n)==="object"&&(e=Im(n.Rect[3])),e};var Kb=gn.addField=function(n){if(Yb(this,n),!(n instanceof fa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};gn.AcroFormChoiceField=Ec,gn.AcroFormListBox=Lc,gn.AcroFormComboBox=Tc,gn.AcroFormEditBox=Nd,gn.AcroFormButton=es,gn.AcroFormPushButton=kd,gn.AcroFormRadioButton=Ic,gn.AcroFormCheckBox=Sd,gn.AcroFormTextField=Dl,gn.AcroFormPasswordField=jd,gn.AcroFormAppearance=bt,gn.AcroForm={ChoiceField:Ec,ListBox:Lc,ComboBox:Tc,EditBox:Nd,Button:es,PushButton:kd,RadioButton:Ic,CheckBox:Sd,TextField:Dl,PasswordField:jd,Appearance:bt},Ot.AcroForm={ChoiceField:Ec,ListBox:Lc,ComboBox:Tc,EditBox:Nd,Button:es,PushButton:kd,RadioButton:Ic,CheckBox:Sd,TextField:Dl,PasswordField:jd,Appearance:bt};Ot.AcroForm;function l1(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(T,B){var ie,M,ee,fe,ae,F=t;if((B=B||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(he(T))for(ae in s)for(ee=s[ae],ie=0;ie<ee.length;ie+=1){for(fe=!0,M=0;M<ee[ie].length;M+=1)if(ee[ie][M]!==void 0&&ee[ie][M]!==T[M]){fe=!1;break}if(fe===!0){F=ae;break}}else for(ae in s)for(ee=s[ae],ie=0;ie<ee.length;ie+=1){for(fe=!0,M=0;M<ee[ie].length;M+=1)if(ee[ie][M]!==void 0&&ee[ie][M]!==T.charCodeAt(M)){fe=!1;break}if(fe===!0){F=ae;break}}return F===t&&B!==t&&(F=B),F},o=function T(B){for(var ie=this.internal.write,M=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var fe=[];if(fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Image"}),fe.push({key:"Width",value:B.width}),fe.push({key:"Height",value:B.height}),B.colorSpace===A.INDEXED?fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(fe.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===A.DEVICE_CMYK&&fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),fe.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&fe.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var ae="",F=0,se=B.transparency.length;F<se;F++)ae+=B.transparency[F]+" "+B.transparency[F]+" ";fe.push({key:"Mask",value:"["+ae+"]"})}B.sMask!==void 0&&fe.push({key:"SMask",value:B.objectId+1+" 0 R"});var ge=B.filter!==void 0?["/"+B.filter]:void 0;if(M({data:B.data,additionalKeyValues:fe,alreadyAppliedFilters:ge,objectId:B.objectId}),ie("endobj"),"sMask"in B&&B.sMask!==void 0){var K,j=(K=B.sMaskBitsPerComponent)!==null&&K!==void 0?K:B.bitsPerComponent,q={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:B.sMask};"filter"in B&&(q.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(B.width),q.filter=B.filter),T.call(this,q)}if(B.colorSpace===A.INDEXED){var X=this.internal.newObject();M({data:re(new Uint8Array(B.palette)),objectId:X}),ie("endobj")}},u=function(){var T=this.internal.collections[e+"images"];for(var B in T)o.call(this,T[B])},d=function(){var T,B=this.internal.collections[e+"images"],ie=this.internal.write;for(var M in B)ie("/I"+(T=B[M]).index,T.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},m=function(){var T=this.internal.collections[e+"images"];return f.call(this),T},v=function(){return Object.keys(this.internal.collections[e+"images"]).length},w=function(T){return typeof n["process"+T.toUpperCase()]=="function"},k=function(T){return Pr(T)==="object"&&T.nodeType===1},y=function(T,B){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var ie=""+T.getAttribute("src");if(ie.indexOf("data:image/")===0)return _d(unescape(ie).split("base64,").pop());var M=n.loadFile(ie,!0);if(M!==void 0)return M}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var ee;switch(B){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;default:ee="image/jpeg"}return _d(T.toDataURL(ee,1).split("base64,").pop())}},P=function(T){var B=this.internal.collections[e+"images"];if(B){for(var ie in B)if(T===B[ie].alias)return B[ie]}},L=function(T,B,ie){return T||B||(T=-96,B=-96),T<0&&(T=-1*ie.width*72/T/this.internal.scaleFactor),B<0&&(B=-1*ie.height*72/B/this.internal.scaleFactor),T===0&&(T=B*ie.width/ie.height),B===0&&(B=T*ie.height/ie.width),[T,B]},I=function(T,B,ie,M,ee,fe){var ae=L.call(this,ie,M,ee),F=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ge=m.call(this);if(ie=ae[0],M=ae[1],ge[ee.index]=ee,fe){fe*=Math.PI/180;var K=Math.cos(fe),j=Math.sin(fe),q=function(oe){return oe.toFixed(4)},X=[q(K),q(j),q(-1*j),q(K),0,0,"cm"]}this.internal.write("q"),fe?(this.internal.write([1,"0","0",1,F(T),se(B+M),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([F(ie),"0","0",F(M),"0","0","cm"].join(" "))):this.internal.write([F(ie),"0","0",F(M),F(T),se(B+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},A=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var G=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=n.__addimage__.sHashCode=function(T){var B,ie,M=0;if(typeof T=="string")for(ie=T.length,B=0;B<ie;B++)M=(M<<5)-M+T.charCodeAt(B),M|=0;else if(he(T))for(ie=T.byteLength/2,B=0;B<ie;B++)M=(M<<5)-M+T[B],M|=0;return M},$=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var B=!0;return T.length===0&&(B=!1),T.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(B=!1),B},le=n.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var B=T.indexOf(",");return B<0?null:T.substring(0,B).trim().endsWith("base64")?T.substring(B+1):null};n.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var he=n.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(T){for(var B=T.length,ie=new Uint8Array(B),M=0;M<B;M++)ie[M]=T.charCodeAt(M);return ie},re=n.__addimage__.arrayBufferToBinaryString=function(T){for(var B="",ie=he(T)?T:new Uint8Array(T),M=0;M<ie.length;M+=8192)B+=String.fromCharCode.apply(null,ie.subarray(M,M+8192));return B};n.addImage=function(){var T,B,ie,M,ee,fe,ae,F,se;if(typeof arguments[1]=="number"?(B=t,ie=arguments[1],M=arguments[2],ee=arguments[3],fe=arguments[4],ae=arguments[5],F=arguments[6],se=arguments[7]):(B=arguments[1],ie=arguments[2],M=arguments[3],ee=arguments[4],fe=arguments[5],ae=arguments[6],F=arguments[7],se=arguments[8]),Pr(T=arguments[0])==="object"&&!k(T)&&"imageData"in T){var ge=T;T=ge.imageData,B=ge.format||B||t,ie=ge.x||ie||0,M=ge.y||M||0,ee=ge.w||ge.width||ee,fe=ge.h||ge.height||fe,ae=ge.alias||ae,F=ge.compression||F,se=ge.rotation||ge.angle||se}var K=this.internal.getFilters();if(F===void 0&&K.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(ie)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var j=J.call(this,T,B,ae,F);return I.call(this,ie,M,ee,fe,j,se),this};var J=function(T,B,ie,M){var ee,fe,ae;if(typeof T=="string"&&a(T)===t){T=unescape(T);var F=W(T,!1);(F!==""||(F=n.loadFile(T,!0))!==void 0)&&(T=F)}if(k(T)&&(T=y(T,B)),B=a(T,B),!w(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ae=ie)==null||ae.length===0)&&(ie=(function(se){return typeof se=="string"||he(se)?U(se):he(se.data)?U(se.data):null})(T)),(ee=P.call(this,ie))||(T instanceof Uint8Array||B==="RGBA"||(fe=T,T=H(T)),ee=this["process"+B.toUpperCase()](T,v.call(this),ie,(function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in n.image_compression?se:G.NONE})(M),fe)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},W=n.__addimage__.convertBase64ToBinaryString=function(T,B){B=typeof B!="boolean"||B;var ie,M="";if(typeof T=="string"){var ee;ie=(ee=le(T))!==null&&ee!==void 0?ee:T;try{M=_d(ie)}catch(fe){if(B)throw $(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};n.getImageProperties=function(T){var B,ie,M="";if(k(T)&&(T=y(T)),typeof T=="string"&&a(T)===t&&((M=W(T,!1))===""&&(M=n.loadFile(T)||""),T=M),ie=a(T),!w(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(T instanceof Uint8Array||(T=H(T)),!(B=this["process"+ie.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=ie,B}})(Ot.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ot.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),m=t.pageContext.annotations,v=!1,w=0;w<m.length&&!v;w++)switch((s=m[w]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var k=0;k<m.length;k++){s=m[k];var y=this.internal.pdfEscape,P=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(L.objId),G=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(A(s.contents))+")",o+=" /Popup "+I.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(A(G))+") >>",L.content=o;var U=L.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+U,s.open&&(o+=" /Open true"),o+=" >>",I.content=o,this.internal.write(L.objId,"0 R",I.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var $=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(P(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var le=this.annotations._nameMap[s.options.name];s.options.pageNumber=le.page,s.options.top=le.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(P(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var he=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+he+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var d=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:f(t),y:m(s),w:f(t+a),h:m(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,d,f=this.getTextWidth(t),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var v=this.splitTextToSize(t,d).length;u=Math.ceil(m*v)}else d=f,u=m;return this.text(t,s,a,o),a+=.2*m,o.align==="center"&&(s-=f/2),o.align==="right"&&(s-=f),this.link(s,a-m,d,u,o),f},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(Ot.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(L){return e[L.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},d=n.__arabicParser__.isArabicEndLetter=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(L){return u(L)&&a.indexOf(L.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length>=1};var m=n.__arabicParser__.arabicLetterHasFinalForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length>=3};var v=n.__arabicParser__.arabicLetterHasMedialForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length==4},w=n.__arabicParser__.resolveLigatures=function(L){var I=0,A=t,G="",U=0;for(I=0;I<L.length;I+=1)A[L.charCodeAt(I)]!==void 0?(U++,typeof(A=A[L.charCodeAt(I)])=="number"&&(G+=String.fromCharCode(A),A=t,U=0),I===L.length-1&&(A=t,G+=L.charAt(I-(U-1)),I-=U-1,U=0)):(A=t,G+=L.charAt(I-U),I-=U,U=0);return G};n.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&s[L.charCodeAt(0)]!==void 0};var k=n.__arabicParser__.getCorrectForm=function(L,I,A){return u(L)?o(L)===!1?-1:!m(L)||!u(I)&&!u(A)||!u(A)&&d(I)||d(L)&&!u(I)||d(L)&&f(I)||d(L)&&d(I)?0:v(L)&&u(I)&&!d(I)&&u(A)&&m(A)?3:d(L)||!u(A)?1:2:-1},y=function(L){var I=0,A=0,G=0,U="",$="",le="",he=(L=L||"").split("\\s+"),H=[];for(I=0;I<he.length;I+=1){for(H.push(""),A=0;A<he[I].length;A+=1)U=he[I][A],$=he[I][A-1],le=he[I][A+1],u(U)?(G=k(U,$,le),H[I]+=G!==-1?String.fromCharCode(e[U.charCodeAt(0)][G]):U):H[I]+=U;H[I]=w(H[I])}return H.join(" ")},P=n.__arabicParser__.processArabic=n.processArabic=function(){var L,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(I)){var G=0;for(A=[],G=0;G<I.length;G+=1)Array.isArray(I[G])?A.push([y(I[G][0]),I[G][1],I[G][2]]):A.push([y(I[G])]);L=A}else L=y(I);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};n.events.push(["preProcessText",P])})(Ot.API),Ot.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ot.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(L){f=L}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(L){m=L}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(L){v=L}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(L){w=L}});var k=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return k},set:function(L){k=L}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(L){y=L}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(L){P=L}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,m){s.call(this);var v=(m=m||{}).fontSize||this.getFontSize(),w=m.font||this.getFont(),k=m.scaleFactor||this.internal.scaleFactor,y=0,P=0,L=0,I=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var A=m.maxWidth;A>0?typeof f=="string"?f=this.splitTextToSize(f,A):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(U,$){return U.concat(I.splitTextToSize($,A))},[])):f=Array.isArray(f)?f:[f];for(var G=0;G<f.length;G++)y<(L=this.getStringUnitWidth(f[G],{font:w})*v)&&(y=L);return y!==0&&(P=f.length),{w:y/=k,h:Math.max((P*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/k,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var m=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,k=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===f.lineNumber?(f.x=(m.x||0)+(m.width||0),f.y=m.y||0):m.y+m.height+f.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=w.top,y&&k&&(this.printHeaderRow(f.lineNumber,!0),f.y+=k[0].height)):f.y=m.y+m.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-v,f.y+v,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+v,{align:"center",baseline:"top",maxWidth:f.width-v-v}):this.text(f.text,f.x+v,f.y+v,{align:"left",baseline:"top",maxWidth:f.width-v-v})),this.internal.__cell__.lastCell=f,this};n.table=function(f,m,v,w,k){if(s.call(this),!v)throw new Error("No data for PDF table.");var y,P,L,I,A=[],G=[],U=[],$={},le={},he=[],H=[],re=(k=k||{}).autoSize||!1,J=k.printHeaders!==!1,W=k.css&&k.css["font-size"]!==void 0?16*k.css["font-size"]:k.fontSize||12,T=k.margins||Object.assign({width:this.getPageWidth()},e),B=typeof k.padding=="number"?k.padding:3,ie=k.headerBackgroundColor||"#c8c8c8",M=k.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=ie,this.internal.__cell__.headerTextColor=M,this.setFontSize(W),w==null)G=A=Object.keys(v[0]),U=A.map(function(){return"left"});else if(Array.isArray(w)&&Pr(w[0])==="object")for(A=w.map(function(ge){return ge.name}),G=w.map(function(ge){return ge.prompt||ge.name||""}),U=w.map(function(ge){return ge.align||"left"}),y=0;y<w.length;y+=1)le[w[y].name]=.7499990551181103*w[y].width;else Array.isArray(w)&&typeof w[0]=="string"&&(G=A=w,U=A.map(function(){return"left"}));if(re||Array.isArray(w)&&typeof w[0]=="string")for(y=0;y<A.length;y+=1){for($[I=A[y]]=v.map(function(ge){return ge[I]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(G[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=$[I],this.setFont(void 0,"normal"),L=0;L<P.length;L+=1)he.push(this.getTextDimensions(P[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[I]=Math.max.apply(null,he)+B+B,he=[]}if(J){var ee={};for(y=0;y<A.length;y+=1)ee[A[y]]={},ee[A[y]].text=G[y],ee[A[y]].align=U[y];var fe=d.call(this,ee,le);H=A.map(function(ge){return new o(f,m,le[ge],fe,ee[ge].text,void 0,ee[ge].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var ae=w.reduce(function(ge,K){return ge[K.name]=K.align,ge},{});for(y=0;y<v.length;y+=1){"rowStart"in k&&k.rowStart instanceof Function&&k.rowStart({row:y,data:v[y]},this);var F=d.call(this,v[y],le);for(L=0;L<A.length;L+=1){var se=v[y][A[L]];"cellStart"in k&&k.cellStart instanceof Function&&k.cellStart({row:y,col:L,data:se},this),u.call(this,new o(f,m,le[A[L]],F,se,y+2,ae[A[L]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=m,this};var d=function(f,m){var v=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,k=this.internal.scaleFactor;return Object.keys(f).map(function(y){var P=f[y];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,m[y]-v-v)},this).map(function(y){return this.getLineHeightFactor()*y.length*w/k+v+v},this).reduce(function(y,P){return Math.max(y,P)},0)};n.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,m){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var k=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){v=this.internal.__cell__.tableHeaderRow[y].clone(),m&&(v.y=this.internal.__cell__.margins.top||0,k.push(v)),v.lineNumber=f;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,v),this.setTextColor(P)}k.length>0&&this.setTableHeaderRow(k),this.setFont(void 0,"normal"),t=!1}})(Ot.API);var c1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},u1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Df=l1(u1),d1=[100,200,300,400,500,600,700,800,900],Jb=l1(d1);function sf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return c1[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Df[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function Om(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var Xb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Dm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Rm(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Fm(n){return n.trimLeft()}function Qb(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Zb(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var xd,Mm,Um,Nc,yd,Bm,qm,zm,af=["times"];function $m(n,e,t,s,a){var o=4,u=Hm;switch(a){case Ot.API.image_compression.FAST:o=1,u=Wm;break;case Ot.API.image_compression.MEDIUM:o=6,u=Vm;break;case Ot.API.image_compression.SLOW:o=9,u=Gm}n=(function(f,m,v,w){for(var k,y=f.length/m,P=new Uint8Array(f.length+y),L=[e5,Wm,Hm,Vm,Gm],I=0;I<y;I+=1){var A=I*m,G=f.subarray(A,A+m);if(w)P.set(w(G,v,k),A+I);else{for(var U=L.length,$=[],le=0;le<U;le+=1)$[le]=L[le](G,v,k);var he=r5($.concat());P.set($[he],A+I)}k=G}return P})(n,e,Math.ceil(t*s/8),u);var d=Pf(n,{level:o});return Ot.API.__addimage__.arrayBufferToBinaryString(d)}function e5(n){var e=Array.apply([],n);return e.unshift(0),e}function Wm(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function Hm(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function Vm(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,d=t&&t[o]||0;a[o+1]=n[o]+256-(u+d>>>1)&255}return a}function Gm(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=t5(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function t5(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function r5(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function of(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return h1(n,a)>>o&u}function Ym(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),d=(1<<s)-1,f=(e&d)<<u;(function(m,v,w){if(v+1<m.byteLength)m.setUint16(v,w,!1);else{var k=w>>8&255;m.setUint8(v,k)}})(n,o,h1(n,o)&~(d<<u)&65535|f)}function h1(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function n5(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var d=null,f=null;o&&(d=e,f=u,e+=3*u);var m=!0,v=[],w=0,k=null,y=0,P=null;for(this.width=t,this.height=s;m&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,P=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var L=n[e++];w=n[e++]|n[e++]<<8,k=n[e++],1&L||(k=null),y=L>>2&7,e++;break;case 254:for(;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var I=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,G=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,$=n[e++],le=$>>6&1,he=1<<1+(7&$),H=d,re=f,J=!1;$>>7&&(J=!0,H=e,re=he,e+=3*he);var W=e;for(e++;;){var T;if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}v.push({x:I,y:A,width:G,height:U,has_local_palette:J,palette_offset:H,palette_size:re,data_offset:W,data_length:e-W,transparent_index:k,interlaced:!!le,delay:w,disposal:y});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return P},this.frameInfo=function(B){if(B<0||B>=v.length)throw new Error("Frame index out of range.");return v[B]},this.decodeAndBlitFrameBGRA=function(B,ie){var M=this.frameInfo(B),ee=M.width*M.height,fe=new Uint8Array(ee);Km(n,M.data_offset,fe,ee);var ae=M.palette_offset,F=M.transparent_index;F===null&&(F=256);var se=M.width,ge=t-se,K=se,j=4*(M.y*t+M.x),q=4*((M.y+M.height)*t+M.x),X=j,oe=4*ge;M.interlaced===!0&&(oe+=4*t*7);for(var de=8,ve=0,_e=fe.length;ve<_e;++ve){var je=fe[ve];if(K===0&&(K=se,(X+=oe)>=q&&(oe=4*ge+4*t*(de-1),X=j+(se+ge)*(de<<1),de>>=1)),je===F)X+=4;else{var be=n[ae+3*je],$e=n[ae+3*je+1],He=n[ae+3*je+2];ie[X++]=He,ie[X++]=$e,ie[X++]=be,ie[X++]=255}--K}},this.decodeAndBlitFrameRGBA=function(B,ie){var M=this.frameInfo(B),ee=M.width*M.height,fe=new Uint8Array(ee);Km(n,M.data_offset,fe,ee);var ae=M.palette_offset,F=M.transparent_index;F===null&&(F=256);var se=M.width,ge=t-se,K=se,j=4*(M.y*t+M.x),q=4*((M.y+M.height)*t+M.x),X=j,oe=4*ge;M.interlaced===!0&&(oe+=4*t*7);for(var de=8,ve=0,_e=fe.length;ve<_e;++ve){var je=fe[ve];if(K===0&&(K=se,(X+=oe)>=q&&(oe=4*ge+4*t*(de-1),X=j+(se+ge)*(de<<1),de>>=1)),je===F)X+=4;else{var be=n[ae+3*je],$e=n[ae+3*je+1],He=n[ae+3*je+2];ie[X++]=be,ie[X++]=$e,ie[X++]=He,ie[X++]=255}--K}}}function Km(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,d=u+1,f=a+1,m=(1<<f)-1,v=0,w=0,k=0,y=n[e++],P=new Int32Array(4096),L=null;;){for(;v<16&&y!==0;)w|=n[e++]<<v,v+=8,y===1?y=n[e++]:--y;if(v<f)break;var I=w&m;if(w>>=f,v-=f,I!==o){if(I===u)break;for(var A=I<d?I:L,G=0,U=A;U>o;)U=P[U]>>8,++G;var $=U;if(k+G+(A!==I?1:0)>s)return void Rr.log("Warning, gif stream longer than expected.");t[k++]=$;var le=k+=G;for(A!==I&&(t[k++]=$),U=A;G--;)U=P[U],t[--le]=255&U,U>>=8;L!==null&&d<4096&&(P[d++]=L<<8|$,d>=m+1&&f<12&&(++f,m=m<<1|1)),L=I}else d=u+1,m=(1<<(f=a+1))-1,L=null}return k!==s&&Rr.log("Warning, gif stream shorter than expected."),t}function lf(n){var e,t,s,a,o,u=Math.floor,d=new Array(64),f=new Array(64),m=new Array(64),v=new Array(64),w=new Array(65535),k=new Array(65535),y=new Array(64),P=new Array(64),L=[],I=0,A=7,G=new Array(64),U=new Array(64),$=new Array(64),le=new Array(256),he=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function fe(j,q){for(var X=0,oe=0,de=new Array,ve=1;ve<=16;ve++){for(var _e=1;_e<=j[ve];_e++)de[q[oe]]=[],de[q[oe]][0]=X,de[q[oe]][1]=ve,oe++,X++;X*=2}return de}function ae(j){for(var q=j[0],X=j[1]-1;X>=0;)q&1<<X&&(I|=1<<A),X--,--A<0&&(I==255?(F(255),F(0)):F(I),A=7,I=0)}function F(j){L.push(j)}function se(j){F(j>>8&255),F(255&j)}function ge(j,q,X,oe,de){for(var ve,_e=de[0],je=de[240],be=(function(We,wt){var st,_t,xt,Wt,St,Mt,Qt,Zt,ft,Nt,ut=0;for(ft=0;ft<8;++ft){st=We[ut],_t=We[ut+1],xt=We[ut+2],Wt=We[ut+3],St=We[ut+4],Mt=We[ut+5],Qt=We[ut+6];var _r=st+(Zt=We[ut+7]),Jt=st-Zt,Gt=_t+Qt,Me=_t-Qt,jt=xt+Mt,ot=xt-Mt,cr=Wt+St,Et=Wt-St,Pt=_r+cr,ur=_r-cr,$t=Gt+jt,Dt=Gt-jt;We[ut]=Pt+$t,We[ut+4]=Pt-$t;var dr=.707106781*(Dt+ur);We[ut+2]=ur+dr,We[ut+6]=ur-dr;var ni=.382683433*((Pt=Et+ot)-(Dt=Me+Jt)),cn=.5411961*Pt+ni,As=1.306562965*Dt+ni,vn=.707106781*($t=ot+Me),It=Jt+vn,Sn=Jt-vn;We[ut+5]=Sn+cn,We[ut+3]=Sn-cn,We[ut+1]=It+As,We[ut+7]=It-As,ut+=8}for(ut=0,ft=0;ft<8;++ft){st=We[ut],_t=We[ut+8],xt=We[ut+16],Wt=We[ut+24],St=We[ut+32],Mt=We[ut+40],Qt=We[ut+48];var qn=st+(Zt=We[ut+56]),jn=st-Zt,zn=_t+Qt,ar=_t-Qt,Cr=xt+Mt,Mr=xt-Mt,Ps=Wt+St,Ms=Wt-St,ts=qn+Ps,Us=qn-Ps,Zr=zn+Cr,Cs=zn-Cr;We[ut]=ts+Zr,We[ut+32]=ts-Zr;var $n=.707106781*(Cs+Us);We[ut+16]=Us+$n,We[ut+48]=Us-$n;var xn=.382683433*((ts=Ms+Mr)-(Cs=ar+jn)),rs=.5411961*ts+xn,bi=1.306562965*Cs+xn,Bs=.707106781*(Zr=Mr+ar),wi=jn+Bs,ma=jn-Bs;We[ut+40]=ma+rs,We[ut+24]=ma-rs,We[ut+8]=wi+bi,We[ut+56]=wi-bi,ut++}for(ft=0;ft<64;++ft)Nt=We[ft]*wt[ft],y[ft]=Nt>0?Nt+.5|0:Nt-.5|0;return y})(j,q),$e=0;$e<64;++$e)P[H[$e]]=be[$e];var He=P[0]-X;X=P[0],He==0?ae(oe[0]):(ae(oe[k[ve=32767+He]]),ae(w[ve]));for(var Xe=63;Xe>0&&P[Xe]==0;)Xe--;if(Xe==0)return ae(_e),X;for(var rt,Z=1;Z<=Xe;){for(var Ze=Z;P[Z]==0&&Z<=Xe;)++Z;var Rt=Z-Ze;if(Rt>=16){rt=Rt>>4;for(var Tt=1;Tt<=rt;++Tt)ae(je);Rt&=15}ve=32767+P[Z],ae(de[(Rt<<4)+k[ve]]),ae(w[ve]),Z++}return Xe!=63&&ae(_e),X}function K(j){j=Math.min(Math.max(j,1),100),o!=j&&((function(q){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var de=u((X[oe]*q+50)/100);de=Math.min(Math.max(de,1),255),d[H[oe]]=de}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var je=u((ve[_e]*q+50)/100);je=Math.min(Math.max(je,1),255),f[H[_e]]=je}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$e=0,He=0;He<8;He++)for(var Xe=0;Xe<8;Xe++)m[$e]=1/(d[H[$e]]*be[He]*be[Xe]*8),v[$e]=1/(f[H[$e]]*be[He]*be[Xe]*8),$e++})(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),o=j)}this.encode=function(j,q){q&&K(q),L=new Array,I=0,A=7,se(65496),se(65504),se(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),se(1),se(1),F(0),F(0),(function(){se(65499),se(132),F(0);for(var _t=0;_t<64;_t++)F(d[_t]);F(1);for(var xt=0;xt<64;xt++)F(f[xt])})(),(function(_t,xt){se(65472),se(17),F(8),se(xt),se(_t),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)})(j.width,j.height),(function(){se(65476),se(418),F(0);for(var _t=0;_t<16;_t++)F(re[_t+1]);for(var xt=0;xt<=11;xt++)F(J[xt]);F(16);for(var Wt=0;Wt<16;Wt++)F(W[Wt+1]);for(var St=0;St<=161;St++)F(T[St]);F(1);for(var Mt=0;Mt<16;Mt++)F(B[Mt+1]);for(var Qt=0;Qt<=11;Qt++)F(ie[Qt]);F(17);for(var Zt=0;Zt<16;Zt++)F(M[Zt+1]);for(var ft=0;ft<=161;ft++)F(ee[ft])})(),se(65498),se(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var X=0,oe=0,de=0;I=0,A=7,this.encode.displayName="_encode_";for(var ve,_e,je,be,$e,He,Xe,rt,Z,Ze=j.data,Rt=j.width,Tt=j.height,We=4*Rt,wt=0;wt<Tt;){for(ve=0;ve<We;){for($e=We*wt+ve,Xe=-1,rt=0,Z=0;Z<64;Z++)He=$e+(rt=Z>>3)*We+(Xe=4*(7&Z)),wt+rt>=Tt&&(He-=We*(wt+1+rt-Tt)),ve+Xe>=We&&(He-=ve+Xe-We+4),_e=Ze[He++],je=Ze[He++],be=Ze[He++],G[Z]=(he[_e]+he[je+256|0]+he[be+512|0]>>16)-128,U[Z]=(he[_e+768|0]+he[je+1024|0]+he[be+1280|0]>>16)-128,$[Z]=(he[_e+1280|0]+he[je+1536|0]+he[be+1792|0]>>16)-128;X=ge(G,m,X,e,s),oe=ge(U,v,oe,t,a),de=ge($,v,de,t,a),ve+=32}wt+=8}if(A>=0){var st=[];st[1]=A+1,st[0]=(1<<A+1)-1,ae(st)}return se(65497),new Uint8Array(L)},n=n||50,(function(){for(var j=String.fromCharCode,q=0;q<256;q++)le[q]=j(q)})(),e=fe(re,J),t=fe(B,ie),s=fe(W,T),a=fe(M,ee),(function(){for(var j=1,q=2,X=1;X<=15;X++){for(var oe=j;oe<q;oe++)k[32767+oe]=X,w[32767+oe]=[],w[32767+oe][1]=X,w[32767+oe][0]=oe;for(var de=-(q-1);de<=-j;de++)k[32767+de]=X,w[32767+de]=[],w[32767+de][1]=X,w[32767+de][0]=q-1+de;j<<=1,q<<=1}})(),(function(){for(var j=0;j<256;j++)he[j]=19595*j,he[j+256|0]=38470*j,he[j+512|0]=7471*j+32768,he[j+768|0]=-11059*j,he[j+1024|0]=-21709*j,he[j+1280|0]=32768*j+8421375,he[j+1536|0]=-27439*j,he[j+1792|0]=-5329*j})(),K(n)}function ca(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Jm(n){function e(J){if(!J)throw Error("assert :P")}function t(J,W,T){for(var B=0;4>B;B++)if(J[W+B]!=T.charCodeAt(B))return!0;return!1}function s(J,W,T,B,ie){for(var M=0;M<ie;M++)J[W+M]=T[B+M]}function a(J,W,T,B){for(var ie=0;ie<B;ie++)J[W+ie]=T}function o(J){return new Int32Array(J)}function u(J,W){for(var T=[],B=0;B<J;B++)T.push(new W);return T}function d(J,W){var T=[];return(function B(ie,M,ee){for(var fe=ee[M],ae=0;ae<fe&&(ie.push(ee.length>M+1?[]:new W),!(ee.length<M+1));ae++)B(ie[ae],M+1,ee)})(T,0,J),T}var f=function(){var J=this;function W(h,g){for(var _=1<<g-1>>>0;h&_;)_>>>=1;return _?(h&_-1)+_:h}function T(h,g,_,S,O){e(!(S%_));do h[g+(S-=_)]=O;while(0<S)}function B(h,g,_,S,O){if(e(2328>=O),512>=O)var R=o(512);else if((R=o(O))==null)return 0;return(function(z,V,Y,te,xe,Ce){var ne,Ne,Ae=V,Fe=1<<Y,Le=o(16),De=o(16);for(e(xe!=0),e(te!=null),e(z!=null),e(0<Y),Ne=0;Ne<xe;++Ne){if(15<te[Ne])return 0;++Le[te[Ne]]}if(Le[0]==xe)return 0;for(De[1]=0,ne=1;15>ne;++ne){if(Le[ne]>1<<ne)return 0;De[ne+1]=De[ne]+Le[ne]}for(Ne=0;Ne<xe;++Ne)ne=te[Ne],0<te[Ne]&&(Ce[De[ne]++]=Ne);if(De[15]==1)return(te=new ie).g=0,te.value=Ce[0],T(z,Ae,1,Fe,te),Fe;var Re,Be=-1,qe=Fe-1,Ct=0,dt=1,Xt=1,vt=1<<Y;for(Ne=0,ne=1,xe=2;ne<=Y;++ne,xe<<=1){if(dt+=Xt<<=1,0>(Xt-=Le[ne]))return 0;for(;0<Le[ne];--Le[ne])(te=new ie).g=ne,te.value=Ce[Ne++],T(z,Ae+Ct,xe,vt,te),Ct=W(Ct,ne)}for(ne=Y+1,xe=2;15>=ne;++ne,xe<<=1){if(dt+=Xt<<=1,0>(Xt-=Le[ne]))return 0;for(;0<Le[ne];--Le[ne]){if(te=new ie,(Ct&qe)!=Be){for(Ae+=vt,Re=1<<(Be=ne)-Y;15>Be&&!(0>=(Re-=Le[Be]));)++Be,Re<<=1;Fe+=vt=1<<(Re=Be-Y),z[V+(Be=Ct&qe)].g=Re+Y,z[V+Be].value=Ae-V-Be}te.g=ne-Y,te.value=Ce[Ne++],T(z,Ae+(Ct>>Y),xe,vt,te),Ct=W(Ct,ne)}}return dt!=2*De[15]-1?0:Fe})(h,g,_,S,O,R)}function ie(){this.value=this.g=0}function M(){this.value=this.g=0}function ee(){this.G=u(5,ie),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Gs,M)}function fe(h,g,_,S){e(h!=null),e(g!=null),e(2147483648>S),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=_,h.Jd=g,h.Yc=_+S,h.Zc=4<=S?_+S-4+1:_,_e(h)}function ae(h,g){for(var _=0;0<g--;)_|=be(h,128)<<g;return _}function F(h,g){var _=ae(h,g);return je(h)?-_:_}function se(h,g,_,S){var O,R=0;for(e(h!=null),e(g!=null),e(4294967288>S),h.Sb=S,h.Ra=0,h.u=0,h.h=0,4<S&&(S=4),O=0;O<S;++O)R+=g[_+O]<<8*O;h.Ra=R,h.bb=S,h.oa=g,h.pa=_}function ge(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Pa-8>>>0,++h.bb,h.u-=8;oe(h)&&(h.h=1,h.u=0)}function K(h,g){if(e(0<=g),!h.h&&g<=Is){var _=X(h)&Ts[g];return h.u+=g,ge(h),_}return h.h=1,h.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(h){return h.Ra>>>(h.u&Pa-1)>>>0}function oe(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Pa}function de(h,g){h.u=g,h.h=oe(h)}function ve(h){h.u>=Ci&&(e(h.u>=Ci),ge(h))}function _e(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function je(h){return ae(h,1)}function be(h,g){var _=h.Ca;0>h.b&&_e(h);var S=h.b,O=_*g>>>8,R=(h.I>>>S>O)+0;for(R?(_-=O,h.I-=O+1<<S>>>0):_=O+1,S=_,O=0;256<=S;)O+=8,S>>=8;return S=7^O+Ji[S],h.b-=S,h.Ca=(_<<S)-1,R}function $e(h,g,_){h[g+0]=_>>24&255,h[g+1]=_>>16&255,h[g+2]=_>>8&255,h[g+3]=255&_}function He(h,g){return h[g+0]|h[g+1]<<8}function Xe(h,g){return He(h,g)|h[g+2]<<16}function rt(h,g){return He(h,g)|He(h,g+2)<<16}function Z(h,g){var _=1<<g;return e(h!=null),e(0<g),h.X=o(_),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function Ze(h,g){e(h!=null),e(g!=null),e(h.Xa==g.Xa),s(g.X,0,h.X,0,1<<g.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function Tt(h,g,_,S){e(_!=null),e(S!=null);var O=_[0],R=S[0];return O==0&&(O=(h*R+g/2)/g),R==0&&(R=(g*O+h/2)/h),0>=O||0>=R?0:(_[0]=O,S[0]=R,1)}function We(h,g){return h+(1<<g)-1>>>g}function wt(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function st(h,g){J[g]=function(_,S,O,R,z,V,Y){var te;for(te=0;te<z;++te){var xe=J[h](V[Y+te-1],O,R+te);V[Y+te]=wt(_[S+te],xe)}}}function _t(){this.ud=this.hd=this.jd=0}function xt(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function Wt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function St(h,g){return Wt(h+(h-g+.5>>1))}function Mt(h,g,_){return Math.abs(g-_)-Math.abs(h-_)}function Qt(h,g,_,S,O,R,z){for(S=R[z-1],_=0;_<O;++_)R[z+_]=S=wt(h[g+_],S)}function Zt(h,g,_,S,O){var R;for(R=0;R<_;++R){var z=h[g+R],V=z>>8&255,Y=16711935&(Y=(Y=16711935&z)+((V<<16)+V));S[O+R]=(4278255360&z)+Y>>>0}}function ft(h,g){g.jd=255&h,g.hd=h>>8&255,g.ud=h>>16&255}function Nt(h,g,_,S,O,R){var z;for(z=0;z<S;++z){var V=g[_+z],Y=V>>>8,te=V,xe=255&(xe=(xe=V>>>16)+((h.jd<<24>>24)*(Y<<24>>24)>>>5));te=255&(te=(te+=(h.hd<<24>>24)*(Y<<24>>24)>>>5)+((h.ud<<24>>24)*(xe<<24>>24)>>>5)),O[R+z]=(4278255360&V)+(xe<<16)+te}}function ut(h,g,_,S,O){J[g]=function(R,z,V,Y,te,xe,Ce,ne,Ne){for(Y=Ce;Y<ne;++Y)for(Ce=0;Ce<Ne;++Ce)te[xe++]=O(V[S(R[z++])])},J[h]=function(R,z,V,Y,te,xe,Ce){var ne=8>>R.b,Ne=R.Ea,Ae=R.K[0],Fe=R.w;if(8>ne)for(R=(1<<R.b)-1,Fe=(1<<ne)-1;z<V;++z){var Le,De=0;for(Le=0;Le<Ne;++Le)Le&R||(De=S(Y[te++])),xe[Ce++]=O(Ae[De&Fe]),De>>=ne}else J["VP8LMapColor"+_](Y,te,Ae,Fe,xe,Ce,z,V,Ne)}}function _r(h,g,_,S,O){for(_=g+_;g<_;){var R=h[g++];S[O++]=R>>16&255,S[O++]=R>>8&255,S[O++]=255&R}}function Jt(h,g,_,S,O){for(_=g+_;g<_;){var R=h[g++];S[O++]=R>>16&255,S[O++]=R>>8&255,S[O++]=255&R,S[O++]=R>>24&255}}function Gt(h,g,_,S,O){for(_=g+_;g<_;){var R=(z=h[g++])>>16&240|z>>12&15,z=240&z|z>>28&15;S[O++]=R,S[O++]=z}}function Me(h,g,_,S,O){for(_=g+_;g<_;){var R=(z=h[g++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;S[O++]=R,S[O++]=z}}function jt(h,g,_,S,O){for(_=g+_;g<_;){var R=h[g++];S[O++]=255&R,S[O++]=R>>8&255,S[O++]=R>>16&255}}function ot(h,g,_,S,O,R){if(R==0)for(_=g+_;g<_;)$e(S,((R=h[g++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),O+=32;else s(S,O,h,g,_)}function cr(h,g){J[g][0]=J[h+"0"],J[g][1]=J[h+"1"],J[g][2]=J[h+"2"],J[g][3]=J[h+"3"],J[g][4]=J[h+"4"],J[g][5]=J[h+"5"],J[g][6]=J[h+"6"],J[g][7]=J[h+"7"],J[g][8]=J[h+"8"],J[g][9]=J[h+"9"],J[g][10]=J[h+"10"],J[g][11]=J[h+"11"],J[g][12]=J[h+"12"],J[g][13]=J[h+"13"],J[g][14]=J[h+"0"],J[g][15]=J[h+"0"]}function Et(h){return h==Lo||h==so||h==dl||h==hl}function Pt(){this.eb=[],this.size=this.A=this.fb=0}function ur(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pt,this.f.kb=new ur,this.sd=null}function Dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ni(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function cn(h,g){var _=h.T,S=g.ba.f.RGBA,O=S.eb,R=S.fb+h.ka*S.A,z=vs[g.ba.S],V=h.y,Y=h.O,te=h.f,xe=h.N,Ce=h.ea,ne=h.W,Ne=g.cc,Ae=g.dc,Fe=g.Mc,Le=g.Nc,De=h.ka,Re=h.ka+h.T,Be=h.U,qe=Be+1>>1;for(De==0?z(V,Y,null,null,te,xe,Ce,ne,te,xe,Ce,ne,O,R,null,null,Be):(z(g.ec,g.fc,V,Y,Ne,Ae,Fe,Le,te,xe,Ce,ne,O,R-S.A,O,R,Be),++_);De+2<Re;De+=2)Ne=te,Ae=xe,Fe=Ce,Le=ne,xe+=h.Rc,ne+=h.Rc,R+=2*S.A,z(V,(Y+=2*h.fa)-h.fa,V,Y,Ne,Ae,Fe,Le,te,xe,Ce,ne,O,R-S.A,O,R,Be);return Y+=h.fa,h.j+Re<h.o?(s(g.ec,g.fc,V,Y,Be),s(g.cc,g.dc,te,xe,qe),s(g.Mc,g.Nc,Ce,ne,qe),_--):1&Re||z(V,Y,null,null,te,xe,Ce,ne,te,xe,Ce,ne,O,R+S.A,null,null,Be),_}function As(h,g,_){var S=h.F,O=[h.J];if(S!=null){var R=h.U,z=g.ba.S,V=z==ul||z==dl;g=g.ba.f.RGBA;var Y=[0],te=h.ka;Y[0]=h.T,h.Kb&&(te==0?--Y[0]:(--te,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(Y[0]=h.o-h.j-te));var xe=g.eb;te=g.fb+te*g.A,h=ll(S,O[0],h.width,R,Y,xe,te+(V?0:3),g.A),e(_==Y),h&&Et(z)&&no(xe,te,V,R,Y,g.A)}return 0}function vn(h){var g=h.ma,_=g.ba.S,S=11>_,O=_==Ta||_==cl||_==ul||_==Er||_==12||Et(_);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!ko(g.Oa,h,O?11:12))return 0;if(O&&Et(_)&&Ga(),h.da)alert("todo:use_scaling");else{if(S){if(g.Ib=ni,h.Kb){if(_=h.U+1>>1,g.memory=o(h.U+2*_),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+_,g.Ib=cn,Ga()}}else alert("todo:EmitYUV");O&&(g.Jb=As,S&&ai())}if(S&&!Fn){for(h=0;256>h;++h)xs[h]=89858*(h-128)+ui>>ea,ys[h]=-22014*(h-128)+ui,Do[h]=-45773*(h-128),lo[h]=113618*(h-128)+ui>>ea;for(h=wr;h<jr;++h)g=76283*(h-16)+ui>>ea,Kl[h-wr]=en(g,255),Lu[h-wr]=en(g+8>>4,15);Fn=1}return 1}function It(h){var g=h.ma,_=h.U,S=h.T;return e(!(1&h.ka)),0>=_||0>=S?0:(_=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,_),g.Dc+=_,1)}function Sn(h){h.ma.memory=null}function qn(h,g,_,S){return K(h,8)!=47?0:(g[0]=K(h,14)+1,_[0]=K(h,14)+1,S[0]=K(h,1),K(h,3)!=0?0:!h.h)}function jn(h,g){if(4>h)return h+1;var _=h-2>>1;return(2+(1&h)<<_)+K(g,_)+1}function zn(h,g){return 120<g?g-120:1<=(_=((_=zd[g-1])>>4)*h+(8-(15&_)))?_:1;var _}function ar(h,g,_){var S=X(_),O=h[g+=255&S].g-8;return 0<O&&(de(_,_.u+8),S=X(_),g+=h[g].value,g+=S&(1<<O)-1),de(_,_.u+h[g].g),h[g].value}function Cr(h,g,_){return _.g+=h.g,_.value+=h.value<<g>>>0,e(8>=_.g),h.g}function Mr(h,g,_){var S=h.xc;return e((g=S==0?0:h.vc[h.md*(_>>S)+(g>>S)])<h.Wb),h.Ya[g]}function Ps(h,g,_,S){var O=h.ab,R=h.c*g,z=h.C;g=z+g;var V=_,Y=S;for(S=h.Ta,_=h.Ua;0<O--;){var te=h.gc[O],xe=z,Ce=g,ne=V,Ne=Y,Ae=(Y=S,V=_,te.Ea);switch(e(xe<Ce),e(Ce<=te.nc),te.hc){case 2:rn(ne,Ne,(Ce-xe)*Ae,Y,V);break;case 0:var Fe=xe,Le=Ce,De=Y,Re=V,Be=(vt=te).Ea;Fe==0&&(Xi(ne,Ne,null,null,1,De,Re),Qt(ne,Ne+1,0,0,Be-1,De,Re+1),Ne+=Be,Re+=Be,++Fe);for(var qe=1<<vt.b,Ct=qe-1,dt=We(Be,vt.b),Xt=vt.K,vt=vt.w+(Fe>>vt.b)*dt;Fe<Le;){var or=Xt,Kr=vt,tr=1;for(Ei(ne,Ne,De,Re-Be,1,De,Re);tr<Be;){var ht=(tr&~Ct)+qe;ht>Be&&(ht=Be),(0,Za[or[Kr++]>>8&15])(ne,Ne+ +tr,De,Re+tr-Be,ht-tr,De,Re+tr),tr=ht}Ne+=Be,Re+=Be,++Fe&Ct||(vt+=dt)}Ce!=te.nc&&s(Y,V-Ae,Y,V+(Ce-xe-1)*Ae,Ae);break;case 1:for(Ae=ne,Le=Ne,Be=(ne=te.Ea)-(Re=ne&~(De=(Ne=1<<te.b)-1)),Fe=We(ne,te.b),qe=te.K,te=te.w+(xe>>te.b)*Fe;xe<Ce;){for(Ct=qe,dt=te,Xt=new _t,vt=Le+Re,or=Le+ne;Le<vt;)ft(Ct[dt++],Xt),jo(Xt,Ae,Le,Ne,Y,V),Le+=Ne,V+=Ne;Le<or&&(ft(Ct[dt++],Xt),jo(Xt,Ae,Le,Be,Y,V),Le+=Be,V+=Be),++xe&De||(te+=Fe)}break;case 3:if(ne==Y&&Ne==V&&0<te.b){for(Le=Y,ne=Ae=V+(Ce-xe)*Ae-(Re=(Ce-xe)*We(te.Ea,te.b)),Ne=Y,De=V,Fe=[],Re=(Be=Re)-1;0<=Re;--Re)Fe[Re]=Ne[De+Re];for(Re=Be-1;0<=Re;--Re)Le[ne+Re]=Fe[Re];Xa(te,xe,Ce,Y,Ae,Y,V)}else Xa(te,xe,Ce,ne,Ne,Y,V)}V=S,Y=_}Y!=_&&s(S,_,V,Y,R)}function Ms(h,g){var _=h.V,S=h.Ba+h.c*h.C,O=g-h.C;if(e(g<=h.l.o),e(16>=O),0<O){var R=h.l,z=h.Ta,V=h.Ua,Y=R.width;if(Ps(h,O,_,S),O=V=[V],e((_=h.C)<(S=g)),e(R.v<R.va),S>R.o&&(S=R.o),_<R.j){var te=R.j-_;_=R.j,O[0]+=te*Y}if(_>=S?_=0:(O[0]+=4*R.v,R.ka=_-R.j,R.U=R.va-R.v,R.T=S-_,_=1),_){if(V=V[0],11>(_=h.ca).S){var xe=_.f.RGBA,Ce=(S=_.S,O=R.U,R=R.T,te=xe.eb,xe.A),ne=R;for(xe=xe.fb+h.Ma*xe.A;0<ne--;){var Ne=z,Ae=V,Fe=O,Le=te,De=xe;switch(S){case Hl:Ao(Ne,Ae,Fe,Le,De);break;case Ta:Qi(Ne,Ae,Fe,Le,De);break;case Lo:Qi(Ne,Ae,Fe,Le,De),no(Le,De,0,Fe,1,0);break;case ju:eo(Ne,Ae,Fe,Le,De);break;case cl:ot(Ne,Ae,Fe,Le,De,1);break;case so:ot(Ne,Ae,Fe,Le,De,1),no(Le,De,0,Fe,1,0);break;case ul:ot(Ne,Ae,Fe,Le,De,0);break;case dl:ot(Ne,Ae,Fe,Le,De,0),no(Le,De,1,Fe,1,0);break;case Er:Ca(Ne,Ae,Fe,Le,De);break;case hl:Ca(Ne,Ae,Fe,Le,De),Uc(Le,De,Fe,1,0);break;case Vl:Ea(Ne,Ae,Fe,Le,De);break;default:e(0)}V+=Y,xe+=Ce}h.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=_.height)}}h.C=g,e(h.C<=h.i)}function ts(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var _=h.Ya[g].G,S=h.Ya[g].H;if(0<_[1][S[1]+0].g||0<_[2][S[2]+0].g||0<_[3][S[3]+0].g)return 0}return 1}function Us(h,g,_,S,O,R){if(h.Z!=0){var z=h.qd,V=h.rd;for(e(Gn[h.Z]!=null);g<_;++g)Gn[h.Z](z,V,S,O,S,O,R),z=S,V=O,O+=R;h.qd=z,h.rd=V}}function Zr(h,g){var _=h.l.ma,S=_.Z==0||_.Z==1?h.l.j:h.C;if(S=h.C<S?S:h.C,e(g<=h.l.o),g>S){var O=h.l.width,R=_.ca,z=_.tb+O*S,V=h.V,Y=h.Ba+h.c*S,te=h.gc;e(h.ab==1),e(te[0].hc==3),li(te[0],S,g,V,Y,R,z),Us(_,S,g,R,z,O)}h.C=h.Ma=g}function Cs(h,g,_,S,O,R,z){var V=h.$/S,Y=h.$%S,te=h.m,xe=h.s,Ce=_+h.$,ne=Ce;O=_+S*O;var Ne=_+S*R,Ae=280+xe.ua,Fe=h.Pb?V:16777216,Le=0<xe.ua?xe.Wa:null,De=xe.wc,Re=Ce<Ne?Mr(xe,Y,V):null;e(h.C<R),e(Ne<=O);var Be=!1;e:for(;;){for(;Be||Ce<Ne;){var qe=0;if(V>=Fe){var Ct=Ce-_;e((Fe=h).Pb),Fe.wd=Fe.m,Fe.xd=Ct,0<Fe.s.ua&&Ze(Fe.s.Wa,Fe.s.vb),Fe=V+Yl}if(Y&De||(Re=Mr(xe,Y,V)),e(Re!=null),Re.Qb&&(g[Ce]=Re.qb,Be=!0),!Be)if(ve(te),Re.jc){qe=te,Ct=g;var dt=Ce,Xt=Re.pd[X(qe)&Gs-1];e(Re.jc),256>Xt.g?(de(qe,qe.u+Xt.g),Ct[dt]=Xt.value,qe=0):(de(qe,qe.u+Xt.g-256),e(256<=Xt.value),qe=Xt.value),qe==0&&(Be=!0)}else qe=ar(Re.G[0],Re.H[0],te);if(te.h)break;if(Be||256>qe){if(!Be)if(Re.nd)g[Ce]=(Re.qb|qe<<8)>>>0;else{if(ve(te),Be=ar(Re.G[1],Re.H[1],te),ve(te),Ct=ar(Re.G[2],Re.H[2],te),dt=ar(Re.G[3],Re.H[3],te),te.h)break;g[Ce]=(dt<<24|Be<<16|qe<<8|Ct)>>>0}if(Be=!1,++Ce,++Y>=S&&(Y=0,++V,z!=null&&V<=R&&!(V%16)&&z(h,V),Le!=null))for(;ne<Ce;)qe=g[ne++],Le.X[(506832829*qe&4294967295)>>>Le.Mb]=qe}else if(280>qe){if(qe=jn(qe-256,te),Ct=ar(Re.G[4],Re.H[4],te),ve(te),Ct=zn(S,Ct=jn(Ct,te)),te.h)break;if(Ce-_<Ct||O-Ce<qe)break e;for(dt=0;dt<qe;++dt)g[Ce+dt]=g[Ce+dt-Ct];for(Ce+=qe,Y+=qe;Y>=S;)Y-=S,++V,z!=null&&V<=R&&!(V%16)&&z(h,V);if(e(Ce<=O),Y&De&&(Re=Mr(xe,Y,V)),Le!=null)for(;ne<Ce;)qe=g[ne++],Le.X[(506832829*qe&4294967295)>>>Le.Mb]=qe}else{if(!(qe<Ae))break e;for(Be=qe-280,e(Le!=null);ne<Ce;)qe=g[ne++],Le.X[(506832829*qe&4294967295)>>>Le.Mb]=qe;qe=Ce,e(!(Be>>>(Ct=Le).Xa)),g[qe]=Ct.X[Be],Be=!0}Be||e(te.h==oe(te))}if(h.Pb&&te.h&&Ce<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ze(h.s.vb,h.s.Wa);else{if(te.h)break e;z?.(h,V>R?R:V),h.a=0,h.$=Ce-_}return 1}return h.a=3,0}function $n(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,e(h!=null)}function xn(){var h=new Ut;return h==null?null:(h.a=0,h.xb=Io,cr("Predictor","VP8LPredictors"),cr("Predictor","VP8LPredictors_C"),cr("PredictorAdd","VP8LPredictorsAdd"),cr("PredictorAdd","VP8LPredictorsAdd_C"),rn=Zt,jo=Nt,Ao=_r,Qi=Jt,Ca=Gt,Ea=Me,eo=jt,J.VP8LMapColor32b=Li,J.VP8LMapColor8b=Qa,h)}function rs(h,g,_,S,O){var R=1,z=[h],V=[g],Y=S.m,te=S.s,xe=null,Ce=0;e:for(;;){if(_)for(;R&&K(Y,1);){var ne=z,Ne=V,Ae=S,Fe=1,Le=Ae.m,De=Ae.gc[Ae.ab],Re=K(Le,2);if(Ae.Oc&1<<Re)R=0;else{switch(Ae.Oc|=1<<Re,De.hc=Re,De.Ea=ne[0],De.nc=Ne[0],De.K=[null],++Ae.ab,e(4>=Ae.ab),Re){case 0:case 1:De.b=K(Le,3)+2,Fe=rs(We(De.Ea,De.b),We(De.nc,De.b),0,Ae,De.K),De.K=De.K[0];break;case 3:var Be,qe=K(Le,8)+1,Ct=16<qe?0:4<qe?1:2<qe?2:3;if(ne[0]=We(De.Ea,Ct),De.b=Ct,Be=Fe=rs(qe,1,0,Ae,De.K)){var dt,Xt=qe,vt=De,or=1<<(8>>vt.b),Kr=o(or);if(Kr==null)Be=0;else{var tr=vt.K[0],ht=vt.w;for(Kr[0]=vt.K[0][0],dt=1;dt<1*Xt;++dt)Kr[dt]=wt(tr[ht+dt],Kr[dt-1]);for(;dt<4*or;++dt)Kr[dt]=0;vt.K[0]=null,vt.K[0]=Kr,Be=1}}Fe=Be;break;case 2:break;default:e(0)}R=Fe}}if(z=z[0],V=V[0],R&&K(Y,1)&&!(R=1<=(Ce=K(Y,4))&&11>=Ce)){S.a=3;break e}var tt;if(tt=R)t:{var nn,Vt,ir,Or=S,An=z,hn=V,Hr=Ce,yn=_,Pn=Or.m,Ur=Or.s,hr=[null],gr=1,Br=0,vr=Pu[Hr];r:for(;;){if(yn&&K(Pn,1)){var Jr=K(Pn,3)+2,Xr=We(An,Jr),Lr=We(hn,Jr),Yn=Xr*Lr;if(!rs(Xr,Lr,0,Or,hr))break r;for(hr=hr[0],Ur.xc=Jr,nn=0;nn<Yn;++nn){var Ar=hr[nn]>>8&65535;hr[nn]=Ar,Ar>=gr&&(gr=Ar+1)}}if(Pn.h)break r;for(Vt=0;5>Vt;++Vt){var Tr=io[Vt];!Vt&&0<Hr&&(Tr+=1<<Hr),Br<Tr&&(Br=Tr)}var fn=u(gr*vr,ie),Mn=gr,bs=u(Mn,ee);if(bs==null)var sn=null;else e(65536>=Mn),sn=bs;var an=o(Br);if(sn==null||an==null||fn==null){Or.a=1;break r}var Kn=fn;for(nn=ir=0;nn<gr;++nn){var Ir=sn[nn],Jn=Ir.G,Js=Ir.H,di=0,Cn=1,on=0;for(Vt=0;5>Vt;++Vt){Tr=io[Vt],Jn[Vt]=Kn,Js[Vt]=ir,!Vt&&0<Hr&&(Tr+=1<<Hr);s:{var Da,ra=Tr,Ro=Or,Oi=an,Iu=Kn,Xc=ir,Dr=0,hi=Ro.m,Qc=K(hi,1);if(a(Oi,0,0,ra),Qc){var Zc=K(hi,1)+1,Jl=K(hi,1),Xl=K(hi,Jl==0?1:8);Oi[Xl]=1,Zc==2&&(Oi[Xl=K(hi,8)]=1);var Di=1}else{var qr=o(19),pn=K(hi,4)+4;if(19<pn){Ro.a=3;var ln=0;break s}for(Da=0;Da<pn;++Da)qr[qd[Da]]=K(hi,3);var Fo=void 0,na=void 0,Mo=Ro,Gd=qr,bn=ra,Ql=Oi,vl=0,Ri=Mo.m,fi=8,Os=u(128,ie);n:for(;B(Os,0,7,Gd,19);){if(K(Ri,1)){var xl=2+2*K(Ri,3);if((Fo=2+K(Ri,xl))>bn)break n}else Fo=bn;for(na=0;na<bn&&Fo--;){ve(Ri);var Zl=Os[0+(127&X(Ri))];de(Ri,Ri.u+Zl.g);var Ra=Zl.value;if(16>Ra)Ql[na++]=Ra,Ra!=0&&(fi=Ra);else{var Ou=Ra==16,eu=Ra-16,Du=Gl[eu],tu=K(Ri,fl[eu])+Du;if(na+tu>bn)break n;for(var Ru=Ou?fi:0;0<tu--;)Ql[na++]=Ru}}vl=1;break n}vl||(Mo.a=3),Di=vl}(Di=Di&&!hi.h)&&(Dr=B(Iu,Xc,8,Oi,ra)),Di&&Dr!=0?ln=Dr:(Ro.a=3,ln=0)}if(ln==0)break r;if(Cn&&Au[Vt]==1&&(Cn=Kn[ir].g==0),di+=Kn[ir].g,ir+=ln,3>=Vt){var Uo,ec=an[0];for(Uo=1;Uo<Tr;++Uo)an[Uo]>ec&&(ec=an[Uo]);on+=ec}}if(Ir.nd=Cn,Ir.Qb=0,Cn&&(Ir.qb=(Jn[3][Js[3]+0].value<<24|Jn[1][Js[1]+0].value<<16|Jn[2][Js[2]+0].value)>>>0,di==0&&256>Jn[0][Js[0]+0].value&&(Ir.Qb=1,Ir.qb+=Jn[0][Js[0]+0].value<<8)),Ir.jc=!Ir.Qb&&6>on,Ir.jc){var yl,Ds=Ir;for(yl=0;yl<Gs;++yl){var sa=yl,pi=Ds.pd[sa],uo=Ds.G[0][Ds.H[0]+sa];256<=uo.value?(pi.g=uo.g+256,pi.value=uo.value):(pi.g=0,pi.value=0,sa>>=Cr(uo,8,pi),sa>>=Cr(Ds.G[1][Ds.H[1]+sa],16,pi),sa>>=Cr(Ds.G[2][Ds.H[2]+sa],0,pi),Cr(Ds.G[3][Ds.H[3]+sa],24,pi))}}}Ur.vc=hr,Ur.Wb=gr,Ur.Ya=sn,Ur.yc=fn,tt=1;break t}tt=0}if(!(R=tt)){S.a=3;break e}if(0<Ce){if(te.ua=1<<Ce,!Z(te.Wa,Ce)){S.a=1,R=0;break e}}else te.ua=0;var tc=S,rc=z,Fu=V,nc=tc.s,sc=nc.xc;if(tc.c=rc,tc.i=Fu,nc.md=We(rc,sc),nc.wc=sc==0?-1:(1<<sc)-1,_){S.xb=Ii;break e}if((xe=o(z*V))==null){S.a=1,R=0;break e}R=(R=Cs(S,xe,0,z,V,V,null))&&!Y.h;break e}return R?(O!=null?O[0]=xe:(e(xe==null),e(_)),S.$=0,_||$n(te)):$n(te),R}function bi(h,g){var _=h.c*h.i,S=_+g+16*g;return e(h.c<=g),h.V=o(S),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+_+g,1)}function Bs(h,g){var _=h.C,S=g-_,O=h.V,R=h.Ba+h.c*_;for(e(g<=h.l.o);0<S;){var z=16<S?16:S,V=h.l.ma,Y=h.l.width,te=Y*z,xe=V.ca,Ce=V.tb+Y*_,ne=h.Ta,Ne=h.Ua;Ps(h,z,O,R),Bc(ne,Ne,xe,Ce,te),Us(V,_,_+z,xe,Ce,Y),S-=z,O+=z*h.c,_+=z}e(_==g),h.C=h.Ma=g}function wi(){this.ub=this.yd=this.td=this.Rb=0}function ma(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _i(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Nr(){this.Yb=(function(){var h=[];return(function g(_,S,O){for(var R=O[S],z=0;z<R&&(_.push(O.length>S+1?[]:0),!(O.length<S+1));z++)g(_[z],S+1,O)})(h,0,[3,11]),h})()}function si(){this.jb=o(3),this.Wc=d([4,8],Nr),this.Xc=d([4,17],Nr)}function qi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Wn(){this.ld=this.La=this.dd=this.tc=0}function Es(){this.Na=this.la=0}function $a(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ga(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ni(){this.uc=this.M=this.Nb=0,this.wa=Array(new Wn),this.Y=0,this.ya=Array(new ga),this.aa=0,this.l=new va}function Hn(){this.y=o(16),this.f=o(8),this.ea=o(8)}function xo(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new wi,this.Kc=new ma,this.ed=new qi,this.Qa=new _i,this.Ic=this.$c=this.Aa=0,this.D=new Ni,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,j),this.ia=0,this.pb=u(4,$a),this.Pa=new si,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Hn),this.Hd=0,this.rb=Array(new Es),this.sb=0,this.wa=Array(new Wn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ga),this.L=this.aa=0,this.gd=d([4,2],Wn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function en(h,g){return 0>h?0:h>g?g:h}function va(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xa(){var h=new xo;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ao||(ao=cs)),h}function $r(h,g,_){return h.a==0&&(h.a=g,h.sc=_,h.cb=0),0}function ki(h,g,_){return 3<=_&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function In(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return $r(h,2,"null VP8Io passed to VP8GetHeaders()");var _=g.data,S=g.w,O=g.ha;if(4>O)return $r(h,7,"Truncated header.");var R=_[S+0]|_[S+1]<<8|_[S+2]<<16,z=h.Od;if(z.Rb=!(1&R),z.td=R>>1&7,z.yd=R>>4&1,z.ub=R>>5,3<z.td)return $r(h,3,"Incorrect keyframe parameters.");if(!z.yd)return $r(h,4,"Frame not displayable.");S+=3,O-=3;var V=h.Kc;if(z.Rb){if(7>O)return $r(h,7,"cannot parse picture header");if(!ki(_,S,O))return $r(h,3,"Bad code word");V.c=16383&(_[S+4]<<8|_[S+3]),V.Td=_[S+4]>>6,V.i=16383&(_[S+6]<<8|_[S+5]),V.Ud=_[S+6]>>6,S+=7,O-=7,h.za=V.c+15>>4,h.Ub=V.i+15>>4,g.width=V.c,g.height=V.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,a((R=h.Pa).jb,0,255,R.jb.length),e((R=h.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,a(R.Zb,0,0,R.Zb.length),a(R.Lb,0,0,R.Lb)}if(z.ub>O)return $r(h,7,"bad partition length");fe(R=h.m,_,S,z.ub),S+=z.ub,O-=z.ub,z.Rb&&(V.Ld=je(R),V.Kd=je(R)),V=h.Qa;var Y,te=h.Pa;if(e(R!=null),e(V!=null),V.Cb=je(R),V.Cb){if(V.Bb=je(R),je(R)){for(V.Fb=je(R),Y=0;4>Y;++Y)V.Zb[Y]=je(R)?F(R,7):0;for(Y=0;4>Y;++Y)V.Lb[Y]=je(R)?F(R,6):0}if(V.Bb)for(Y=0;3>Y;++Y)te.jb[Y]=je(R)?ae(R,8):255}else V.Bb=0;if(R.Ka)return $r(h,3,"cannot parse segment header");if((V=h.ed).zd=je(R),V.Tb=ae(R,6),V.wb=ae(R,3),V.Pc=je(R),V.Pc&&je(R)){for(te=0;4>te;++te)je(R)&&(V.vd[te]=F(R,6));for(te=0;4>te;++te)je(R)&&(V.od[te]=F(R,6))}if(h.L=V.Tb==0?0:V.zd?1:2,R.Ka)return $r(h,3,"cannot parse filter header");var xe=O;if(O=Y=S,S=Y+xe,V=xe,h.Xb=(1<<ae(h.m,2))-1,xe<3*(te=h.Xb))_=7;else{for(Y+=3*te,V-=3*te,xe=0;xe<te;++xe){var Ce=_[O+0]|_[O+1]<<8|_[O+2]<<16;Ce>V&&(Ce=V),fe(h.Jc[+xe],_,Y,Ce),Y+=Ce,V-=Ce,O+=3}fe(h.Jc[+te],_,Y,V),_=Y<S?0:5}if(_!=0)return $r(h,_,"cannot parse partitions");for(_=ae(Y=h.m,7),O=je(Y)?F(Y,4):0,S=je(Y)?F(Y,4):0,V=je(Y)?F(Y,4):0,te=je(Y)?F(Y,4):0,Y=je(Y)?F(Y,4):0,xe=h.Qa,Ce=0;4>Ce;++Ce){if(xe.Cb){var ne=xe.Zb[Ce];xe.Fb||(ne+=_)}else{if(0<Ce){h.pb[Ce]=h.pb[0];continue}ne=_}var Ne=h.pb[Ce];Ne.Sc[0]=To[en(ne+O,127)],Ne.Sc[1]=pl[en(ne+0,127)],Ne.Eb[0]=2*To[en(ne+S,127)],Ne.Eb[1]=101581*pl[en(ne+V,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=To[en(ne+te,117)],Ne.Qc[1]=pl[en(ne+Y,127)],Ne.lc=ne+Y}if(!z.Rb)return $r(h,4,"Not a key frame.");for(je(R),z=h.Pa,_=0;4>_;++_){for(O=0;8>O;++O)for(S=0;3>S;++S)for(V=0;11>V;++V)te=be(R,Wd[_][O][S][V])?ae(R,8):Eu[_][O][S][V],z.Wc[_][O].Yb[S][V]=te;for(O=0;17>O;++O)z.Xc[_][O]=z.Wc[_][Yc[O]]}return h.kc=je(R),h.kc&&(h.Bd=ae(R,8)),h.cb=1}function cs(h,g,_,S,O,R,z){var V=g[O].Yb[_];for(_=0;16>O;++O){if(!be(h,V[_+0]))return O;for(;!be(h,V[_+1]);)if(V=g[++O].Yb[0],_=0,O==16)return 16;var Y=g[O+1].Yb;if(be(h,V[_+2])){var te=h,xe=0;if(be(te,(ne=V)[(Ce=_)+3]))if(be(te,ne[Ce+6])){for(V=0,Ce=2*(xe=be(te,ne[Ce+8]))+(ne=be(te,ne[Ce+9+xe])),xe=0,ne=Vc[Ce];ne[V];++V)xe+=xe+be(te,ne[V]);xe+=3+(8<<Ce)}else be(te,ne[Ce+7])?(xe=7+2*be(te,165),xe+=be(te,145)):xe=5+be(te,159);else xe=be(te,ne[Ce+4])?3+be(te,ne[Ce+5]):2;V=Y[2]}else xe=1,V=Y[1];Y=z+Gc[O],0>(te=h).b&&_e(te);var Ce,ne=te.b,Ne=(Ce=te.Ca>>1)-(te.I>>ne)>>31;--te.b,te.Ca+=Ne,te.Ca|=1,te.I-=(Ce+1&Ne)<<ne,R[Y]=((xe^Ne)-Ne)*S[(0<O)+0]}return 16}function Si(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function ns(h,g,_,S,O){O=h[g+_+32*S]+(O>>3),h[g+_+32*S]=-256&O?0>O?0:255:O}function Wr(h,g,_,S,O,R){ns(h,g,0,_,S+O),ns(h,g,1,_,S+R),ns(h,g,2,_,S-R),ns(h,g,3,_,S-O)}function us(h){return(20091*h>>16)+h}function ya(h,g,_,S){var O,R=0,z=o(16);for(O=0;4>O;++O){var V=h[g+0]+h[g+8],Y=h[g+0]-h[g+8],te=(35468*h[g+4]>>16)-us(h[g+12]),xe=us(h[g+4])+(35468*h[g+12]>>16);z[R+0]=V+xe,z[R+1]=Y+te,z[R+2]=Y-te,z[R+3]=V-xe,R+=4,g++}for(O=R=0;4>O;++O)V=(h=z[R+0]+4)+z[R+8],Y=h-z[R+8],te=(35468*z[R+4]>>16)-us(z[R+12]),ns(_,S,0,0,V+(xe=us(z[R+4])+(35468*z[R+12]>>16))),ns(_,S,1,0,Y+te),ns(_,S,2,0,Y-te),ns(_,S,3,0,V-xe),R++,S+=32}function qs(h,g,_,S){var O=h[g+0]+4,R=35468*h[g+4]>>16,z=us(h[g+4]),V=35468*h[g+1]>>16;Wr(_,S,0,O+z,h=us(h[g+1]),V),Wr(_,S,1,O+R,h,V),Wr(_,S,2,O-R,h,V),Wr(_,S,3,O-z,h,V)}function zi(h,g,_,S,O){ya(h,g,_,S),O&&ya(h,g+16,_,S+4)}function ds(h,g,_,S){to(h,g+0,_,S,1),to(h,g+32,_,S+128,1)}function ii(h,g,_,S){var O;for(h=h[g+0]+4,O=0;4>O;++O)for(g=0;4>g;++g)ns(_,S,g,O,h)}function fr(h,g,_,S){h[g+0]&&mr(h,g+0,_,S),h[g+16]&&mr(h,g+16,_,S+4),h[g+32]&&mr(h,g+32,_,S+128),h[g+48]&&mr(h,g+48,_,S+128+4)}function $i(h,g,_,S){var O,R=o(16);for(O=0;4>O;++O){var z=h[g+0+O]+h[g+12+O],V=h[g+4+O]+h[g+8+O],Y=h[g+4+O]-h[g+8+O],te=h[g+0+O]-h[g+12+O];R[0+O]=z+V,R[8+O]=z-V,R[4+O]=te+Y,R[12+O]=te-Y}for(O=0;4>O;++O)z=(h=R[0+4*O]+3)+R[3+4*O],V=R[1+4*O]+R[2+4*O],Y=R[1+4*O]-R[2+4*O],te=h-R[3+4*O],_[S+0]=z+V>>3,_[S+16]=te+Y>>3,_[S+32]=z-V>>3,_[S+48]=te-Y>>3,S+=64}function ji(h,g,_){var S,O=g-32,R=is,z=255-h[O-1];for(S=0;S<_;++S){var V,Y=R,te=z+h[g-1];for(V=0;V<_;++V)h[g+V]=Y[te+h[O+V]];g+=32}}function Wa(h,g){ji(h,g,4)}function yo(h,g){ji(h,g,8)}function bo(h,g){ji(h,g,16)}function ba(h,g){var _;for(_=0;16>_;++_)s(h,g+32*_,h,g-32,16)}function wa(h,g){var _;for(_=16;0<_;--_)a(h,g,h[g-1],16),g+=32}function On(h,g,_){var S;for(S=0;16>S;++S)a(g,_+32*S,h,16)}function zs(h,g){var _,S=16;for(_=0;16>_;++_)S+=h[g-1+32*_]+h[g+_-32];On(S>>5,h,g)}function Vn(h,g){var _,S=8;for(_=0;16>_;++_)S+=h[g-1+32*_];On(S>>4,h,g)}function hs(h,g){var _,S=8;for(_=0;16>_;++_)S+=h[g+_-32];On(S>>4,h,g)}function Wi(h,g){On(128,h,g)}function Ft(h,g,_){return h+2*g+_+2>>2}function $s(h,g){var _,S=g-32;for(S=new Uint8Array([Ft(h[S-1],h[S+0],h[S+1]),Ft(h[S+0],h[S+1],h[S+2]),Ft(h[S+1],h[S+2],h[S+3]),Ft(h[S+2],h[S+3],h[S+4])]),_=0;4>_;++_)s(h,g+32*_,S,0,S.length)}function nl(h,g){var _=h[g-1],S=h[g-1+32],O=h[g-1+64],R=h[g-1+96];$e(h,g+0,16843009*Ft(h[g-1-32],_,S)),$e(h,g+32,16843009*Ft(_,S,O)),$e(h,g+64,16843009*Ft(S,O,R)),$e(h,g+96,16843009*Ft(O,R,R))}function wo(h,g){var _,S=4;for(_=0;4>_;++_)S+=h[g+_-32]+h[g-1+32*_];for(S>>=3,_=0;4>_;++_)a(h,g+32*_,S,4)}function Dn(h,g){var _=h[g-1+0],S=h[g-1+32],O=h[g-1+64],R=h[g-1-32],z=h[g+0-32],V=h[g+1-32],Y=h[g+2-32],te=h[g+3-32];h[g+0+96]=Ft(S,O,h[g-1+96]),h[g+1+96]=h[g+0+64]=Ft(_,S,O),h[g+2+96]=h[g+1+64]=h[g+0+32]=Ft(R,_,S),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=Ft(z,R,_),h[g+3+64]=h[g+2+32]=h[g+1+0]=Ft(V,z,R),h[g+3+32]=h[g+2+0]=Ft(Y,V,z),h[g+3+0]=Ft(te,Y,V)}function Ws(h,g){var _=h[g+1-32],S=h[g+2-32],O=h[g+3-32],R=h[g+4-32],z=h[g+5-32],V=h[g+6-32],Y=h[g+7-32];h[g+0+0]=Ft(h[g+0-32],_,S),h[g+1+0]=h[g+0+32]=Ft(_,S,O),h[g+2+0]=h[g+1+32]=h[g+0+64]=Ft(S,O,R),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=Ft(O,R,z),h[g+3+32]=h[g+2+64]=h[g+1+96]=Ft(R,z,V),h[g+3+64]=h[g+2+96]=Ft(z,V,Y),h[g+3+96]=Ft(V,Y,Y)}function Ha(h,g){var _=h[g-1+0],S=h[g-1+32],O=h[g-1+64],R=h[g-1-32],z=h[g+0-32],V=h[g+1-32],Y=h[g+2-32],te=h[g+3-32];h[g+0+0]=h[g+1+64]=R+z+1>>1,h[g+1+0]=h[g+2+64]=z+V+1>>1,h[g+2+0]=h[g+3+64]=V+Y+1>>1,h[g+3+0]=Y+te+1>>1,h[g+0+96]=Ft(O,S,_),h[g+0+64]=Ft(S,_,R),h[g+0+32]=h[g+1+96]=Ft(_,R,z),h[g+1+32]=h[g+2+96]=Ft(R,z,V),h[g+2+32]=h[g+3+96]=Ft(z,V,Y),h[g+3+32]=Ft(V,Y,te)}function _a(h,g){var _=h[g+0-32],S=h[g+1-32],O=h[g+2-32],R=h[g+3-32],z=h[g+4-32],V=h[g+5-32],Y=h[g+6-32],te=h[g+7-32];h[g+0+0]=_+S+1>>1,h[g+1+0]=h[g+0+64]=S+O+1>>1,h[g+2+0]=h[g+1+64]=O+R+1>>1,h[g+3+0]=h[g+2+64]=R+z+1>>1,h[g+0+32]=Ft(_,S,O),h[g+1+32]=h[g+0+96]=Ft(S,O,R),h[g+2+32]=h[g+1+96]=Ft(O,R,z),h[g+3+32]=h[g+2+96]=Ft(R,z,V),h[g+3+64]=Ft(z,V,Y),h[g+3+96]=Ft(V,Y,te)}function Hi(h,g){var _=h[g-1+0],S=h[g-1+32],O=h[g-1+64],R=h[g-1+96];h[g+0+0]=_+S+1>>1,h[g+2+0]=h[g+0+32]=S+O+1>>1,h[g+2+32]=h[g+0+64]=O+R+1>>1,h[g+1+0]=Ft(_,S,O),h[g+3+0]=h[g+1+32]=Ft(S,O,R),h[g+3+32]=h[g+1+64]=Ft(O,R,R),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=R}function _o(h,g){var _=h[g-1+0],S=h[g-1+32],O=h[g-1+64],R=h[g-1+96],z=h[g-1-32],V=h[g+0-32],Y=h[g+1-32],te=h[g+2-32];h[g+0+0]=h[g+2+32]=_+z+1>>1,h[g+0+32]=h[g+2+64]=S+_+1>>1,h[g+0+64]=h[g+2+96]=O+S+1>>1,h[g+0+96]=R+O+1>>1,h[g+3+0]=Ft(V,Y,te),h[g+2+0]=Ft(z,V,Y),h[g+1+0]=h[g+3+32]=Ft(_,z,V),h[g+1+32]=h[g+3+64]=Ft(S,_,z),h[g+1+64]=h[g+3+96]=Ft(O,S,_),h[g+1+96]=Ft(R,O,S)}function Hs(h,g){var _;for(_=0;8>_;++_)s(h,g+32*_,h,g-32,8)}function Vi(h,g){var _;for(_=0;8>_;++_)a(h,g,h[g-1],8),g+=32}function tn(h,g,_){var S;for(S=0;8>S;++S)a(g,_+32*S,h,8)}function Vs(h,g){var _,S=8;for(_=0;8>_;++_)S+=h[g+_-32]+h[g-1+32*_];tn(S>>4,h,g)}function Gi(h,g){var _,S=4;for(_=0;8>_;++_)S+=h[g+_-32];tn(S>>3,h,g)}function Va(h,g){var _,S=4;for(_=0;8>_;++_)S+=h[g-1+32*_];tn(S>>3,h,g)}function Na(h,g){tn(128,h,g)}function un(h,g,_){var S=h[g-_],O=h[g+0],R=3*(O-S)+Ti[1020+h[g-2*_]-h[g+_]],z=Eo[112+(R+4>>3)];h[g-_]=is[255+S+Eo[112+(R+3>>3)]],h[g+0]=is[255+O-z]}function Ai(h,g,_,S){var O=h[g+0],R=h[g+_];return Ys[255+h[g-2*_]-h[g-_]]>S||Ys[255+R-O]>S}function fs(h,g,_,S){return 4*Ys[255+h[g-_]-h[g+0]]+Ys[255+h[g-2*_]-h[g+_]]<=S}function C(h,g,_,S,O){var R=h[g-3*_],z=h[g-2*_],V=h[g-_],Y=h[g+0],te=h[g+_],xe=h[g+2*_],Ce=h[g+3*_];return 4*Ys[255+V-Y]+Ys[255+z-te]>S?0:Ys[255+h[g-4*_]-R]<=O&&Ys[255+R-z]<=O&&Ys[255+z-V]<=O&&Ys[255+Ce-xe]<=O&&Ys[255+xe-te]<=O&&Ys[255+te-Y]<=O}function me(h,g,_,S){var O=2*S+1;for(S=0;16>S;++S)fs(h,g+S,_,O)&&un(h,g+S,_)}function Se(h,g,_,S){var O=2*S+1;for(S=0;16>S;++S)fs(h,g+S*_,1,O)&&un(h,g+S*_,1)}function Pe(h,g,_,S){var O;for(O=3;0<O;--O)me(h,g+=4*_,_,S)}function Ue(h,g,_,S){var O;for(O=3;0<O;--O)Se(h,g+=4,_,S)}function Ye(h,g,_,S,O,R,z,V){for(R=2*R+1;0<O--;){if(C(h,g,_,R,z))if(Ai(h,g,_,V))un(h,g,_);else{var Y=h,te=g,xe=_,Ce=Y[te-2*xe],ne=Y[te-xe],Ne=Y[te+0],Ae=Y[te+xe],Fe=Y[te+2*xe],Le=27*(Re=Ti[1020+3*(Ne-ne)+Ti[1020+Ce-Ae]])+63>>7,De=18*Re+63>>7,Re=9*Re+63>>7;Y[te-3*xe]=is[255+Y[te-3*xe]+Re],Y[te-2*xe]=is[255+Ce+De],Y[te-xe]=is[255+ne+Le],Y[te+0]=is[255+Ne-Le],Y[te+xe]=is[255+Ae-De],Y[te+2*xe]=is[255+Fe-Re]}g+=S}}function nt(h,g,_,S,O,R,z,V){for(R=2*R+1;0<O--;){if(C(h,g,_,R,z))if(Ai(h,g,_,V))un(h,g,_);else{var Y=h,te=g,xe=_,Ce=Y[te-xe],ne=Y[te+0],Ne=Y[te+xe],Ae=Eo[112+(4+(Fe=3*(ne-Ce))>>3)],Fe=Eo[112+(Fe+3>>3)],Le=Ae+1>>1;Y[te-2*xe]=is[255+Y[te-2*xe]+Le],Y[te-xe]=is[255+Ce+Fe],Y[te+0]=is[255+ne-Ae],Y[te+xe]=is[255+Ne-Le]}g+=S}}function Qe(h,g,_,S,O,R){Ye(h,g,_,1,16,S,O,R)}function Ke(h,g,_,S,O,R){Ye(h,g,1,_,16,S,O,R)}function it(h,g,_,S,O,R){var z;for(z=3;0<z;--z)nt(h,g+=4*_,_,1,16,S,O,R)}function x(h,g,_,S,O,R){var z;for(z=3;0<z;--z)nt(h,g+=4,1,_,16,S,O,R)}function E(h,g,_,S,O,R,z,V){Ye(h,g,O,1,8,R,z,V),Ye(_,S,O,1,8,R,z,V)}function Q(h,g,_,S,O,R,z,V){Ye(h,g,1,O,8,R,z,V),Ye(_,S,1,O,8,R,z,V)}function pe(h,g,_,S,O,R,z,V){nt(h,g+4*O,O,1,8,R,z,V),nt(_,S+4*O,O,1,8,R,z,V)}function we(h,g,_,S,O,R,z,V){nt(h,g+4,1,O,8,R,z,V),nt(_,S+4,1,O,8,R,z,V)}function Oe(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function at(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pt(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ee,this.yc=new ie}function Ut(){this.xb=this.a=0,this.l=new va,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pt,this.ab=0,this.gc=u(4,at),this.Oc=0}function Ht(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new va,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kt(h,g,_,S,O,R,z){for(h=h==null?0:h[g+0],g=0;g<z;++g)O[R+g]=h+_[S+g]&255,h=O[R+g]}function mt(h,g,_,S,O,R,z){var V;if(h==null)kt(null,null,_,S,O,R,z);else for(V=0;V<z;++V)O[R+V]=h[g+V]+_[S+V]&255}function sr(h,g,_,S,O,R,z){if(h==null)kt(null,null,_,S,O,R,z);else{var V,Y=h[g+0],te=Y,xe=Y;for(V=0;V<z;++V)te=xe+(Y=h[g+V])-te,xe=_[S+V]+(-256&te?0>te?0:255:te)&255,te=Y,O[R+V]=xe}}function er(h,g,_,S){var O=g.width,R=g.o;if(e(h!=null&&g!=null),0>_||0>=S||_+S>R)return null;if(!h.Cc){if(h.ga==null){var z;if(h.ga=new Ht,(z=h.ga==null)||(z=g.width*g.o,e(h.Gb.length==0),h.Gb=o(z),h.Uc=0,h.Gb==null?z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,z=1),z=!z),!z){z=h.ga;var V=h.Fa,Y=h.P,te=h.qc,xe=h.mb,Ce=h.nb,ne=Y+1,Ne=te-1,Ae=z.l;if(e(V!=null&&xe!=null&&g!=null),Gn[0]=null,Gn[1]=kt,Gn[2]=mt,Gn[3]=sr,z.ca=xe,z.tb=Ce,z.c=g.width,z.i=g.height,e(0<z.c&&0<z.i),1>=te)g=0;else if(z.$a=3&V[Y+0],z.Z=V[Y+0]>>2&3,z.Lc=V[Y+0]>>4&3,Y=V[Y+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||Y)g=0;else if(Ae.put=It,Ae.ac=vn,Ae.bc=Sn,Ae.ma=z,Ae.width=g.width,Ae.height=g.height,Ae.Da=g.Da,Ae.v=g.v,Ae.va=g.va,Ae.j=g.j,Ae.o=g.o,z.$a)e:{e(z.$a==1),g=xn();t:for(;;){if(g==null){g=0;break e}if(e(z!=null),z.mc=g,g.c=z.c,g.i=z.i,g.l=z.l,g.l.ma=z,g.l.width=z.c,g.l.height=z.i,g.a=0,se(g.m,V,ne,Ne),!rs(z.c,z.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&ts(g.s)?(z.ic=1,V=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(V),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(z.ic=0,g=bi(g,z.c)),!g))break t;g=1;break e}z.mc=null,g=0}else g=Ne>=z.c*z.i;z=!g}if(z)return null;h.ga.Lc!=1?h.Ga=0:S=R-_}e(h.ga!=null),e(_+S<=R);e:{if(g=(V=h.ga).c,R=V.l.o,V.$a==0){if(ne=h.rc,Ne=h.Vc,Ae=h.Fa,Y=h.P+1+_*g,te=h.mb,xe=h.nb+_*g,e(Y<=h.P+h.qc),V.Z!=0)for(e(Gn[V.Z]!=null),z=0;z<S;++z)Gn[V.Z](ne,Ne,Ae,Y,te,xe,g),ne=te,Ne=xe,xe+=g,Y+=g;else for(z=0;z<S;++z)s(te,xe,Ae,Y,g),ne=te,Ne=xe,xe+=g,Y+=g;h.rc=ne,h.Vc=Ne}else{if(e(V.mc!=null),g=_+S,e((z=V.mc)!=null),e(g<=z.i),z.C>=g)g=1;else if(V.ic||ai(),V.ic){V=z.V,ne=z.Ba,Ne=z.c;var Fe=z.i,Le=(Ae=1,Y=z.$/Ne,te=z.$%Ne,xe=z.m,Ce=z.s,z.$),De=Ne*Fe,Re=Ne*g,Be=Ce.wc,qe=Le<Re?Mr(Ce,te,Y):null;e(Le<=De),e(g<=Fe),e(ts(Ce));t:for(;;){for(;!xe.h&&Le<Re;){if(te&Be||(qe=Mr(Ce,te,Y)),e(qe!=null),ve(xe),256>(Fe=ar(qe.G[0],qe.H[0],xe)))V[ne+Le]=Fe,++Le,++te>=Ne&&(te=0,++Y<=g&&!(Y%16)&&Zr(z,Y));else{if(!(280>Fe)){Ae=0;break t}Fe=jn(Fe-256,xe);var Ct,dt=ar(qe.G[4],qe.H[4],xe);if(ve(xe),!(Le>=(dt=zn(Ne,dt=jn(dt,xe)))&&De-Le>=Fe)){Ae=0;break t}for(Ct=0;Ct<Fe;++Ct)V[ne+Le+Ct]=V[ne+Le+Ct-dt];for(Le+=Fe,te+=Fe;te>=Ne;)te-=Ne,++Y<=g&&!(Y%16)&&Zr(z,Y);Le<Re&&te&Be&&(qe=Mr(Ce,te,Y))}e(xe.h==oe(xe))}Zr(z,Y>g?g:Y);break t}!Ae||xe.h&&Le<De?(Ae=0,z.a=xe.h?5:3):z.$=Le,g=Ae}else g=Cs(z,z.V,z.Ba,z.c,z.i,g,Bs);if(!g){S=0;break e}}_+S>=R&&(h.Cc=1),S=1}if(!S)return null;if(h.Cc&&((S=h.ga)!=null&&(S.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+_*O}function kr(h,g,_,S,O,R){for(;0<O--;){var z,V=h,Y=g+(_?1:0),te=h,xe=g+(_?0:3);for(z=0;z<S;++z){var Ce=te[xe+4*z];Ce!=255&&(Ce*=32897,V[Y+4*z+0]=V[Y+4*z+0]*Ce>>23,V[Y+4*z+1]=V[Y+4*z+1]*Ce>>23,V[Y+4*z+2]=V[Y+4*z+2]*Ce>>23)}g+=R}}function pr(h,g,_,S,O){for(;0<S--;){var R;for(R=0;R<_;++R){var z=h[g+2*R+0],V=15&(te=h[g+2*R+1]),Y=4369*V,te=(240&te|te>>4)*Y>>16;h[g+2*R+0]=(240&z|z>>4)*Y>>16&240|(15&z|z<<4)*Y>>16>>4&15,h[g+2*R+1]=240&te|V}g+=O}}function br(h,g,_,S,O,R,z,V){var Y,te,xe=255;for(te=0;te<O;++te){for(Y=0;Y<S;++Y){var Ce=h[g+Y];R[z+4*Y]=Ce,xe&=Ce}g+=_,z+=V}return xe!=255}function ps(h,g,_,S,O){var R;for(R=0;R<O;++R)_[S+R]=h[g+R]>>8}function ai(){no=kr,Uc=pr,ll=br,Bc=ps}function Yi(h,g,_){J[h]=function(S,O,R,z,V,Y,te,xe,Ce,ne,Ne,Ae,Fe,Le,De,Re,Be){var qe,Ct=Be-1>>1,dt=V[Y+0]|te[xe+0]<<16,Xt=Ce[ne+0]|Ne[Ae+0]<<16;e(S!=null);var vt=3*dt+Xt+131074>>2;for(g(S[O+0],255&vt,vt>>16,Fe,Le),R!=null&&(vt=3*Xt+dt+131074>>2,g(R[z+0],255&vt,vt>>16,De,Re)),qe=1;qe<=Ct;++qe){var or=V[Y+qe]|te[xe+qe]<<16,Kr=Ce[ne+qe]|Ne[Ae+qe]<<16,tr=dt+or+Xt+Kr+524296,ht=tr+2*(or+Xt)>>3;vt=ht+dt>>1,dt=(tr=tr+2*(dt+Kr)>>3)+or>>1,g(S[O+2*qe-1],255&vt,vt>>16,Fe,Le+(2*qe-1)*_),g(S[O+2*qe-0],255&dt,dt>>16,Fe,Le+(2*qe-0)*_),R!=null&&(vt=tr+Xt>>1,dt=ht+Kr>>1,g(R[z+2*qe-1],255&vt,vt>>16,De,Re+(2*qe-1)*_),g(R[z+2*qe+0],255&dt,dt>>16,De,Re+(2*qe+0)*_)),dt=or,Xt=Kr}1&Be||(vt=3*dt+Xt+131074>>2,g(S[O+Be-1],255&vt,vt>>16,Fe,Le+(Be-1)*_),R!=null&&(vt=3*Xt+dt+131074>>2,g(R[z+Be-1],255&vt,vt>>16,De,Re+(Be-1)*_)))}}function Ga(){vs[Hl]=Hd,vs[Ta]=Ia,vs[ju]=Vd,vs[cl]=Oo,vs[ul]=oo,vs[Er]=ml,vs[Vl]=Kc,vs[Lo]=Ia,vs[so]=Oo,vs[dl]=oo,vs[hl]=ml}function No(h){return h&-16384?0>h?0:255:h>>Oa}function ka(h,g){return No((19077*h>>8)+(26149*g>>8)-14234)}function Ya(h,g,_){return No((19077*h>>8)-(6419*g>>8)-(13320*_>>8)+8708)}function Sa(h,g){return No((19077*h>>8)+(33050*g>>8)-17685)}function ja(h,g,_,S,O){S[O+0]=ka(h,_),S[O+1]=Ya(h,g,_),S[O+2]=Sa(h,g)}function Rn(h,g,_,S,O){S[O+0]=Sa(h,g),S[O+1]=Ya(h,g,_),S[O+2]=ka(h,_)}function Ka(h,g,_,S,O){var R=Ya(h,g,_);g=R<<3&224|Sa(h,g)>>3,S[O+0]=248&ka(h,_)|R>>5,S[O+1]=g}function Ja(h,g,_,S,O){var R=240&Sa(h,g)|15;S[O+0]=240&ka(h,_)|Ya(h,g,_)>>4,S[O+1]=R}function sl(h,g,_,S,O){S[O+0]=255,ja(h,g,_,S,O+1)}function il(h,g,_,S,O){Rn(h,g,_,S,O),S[O+3]=255}function ss(h,g,_,S,O){ja(h,g,_,S,O),S[O+3]=255}function oi(h,g,_){J[h]=function(S,O,R,z,V,Y,te,xe,Ce){for(var ne=xe+(-2&Ce)*_;xe!=ne;)g(S[O+0],R[z+0],V[Y+0],te,xe),g(S[O+1],R[z+0],V[Y+0],te,xe+_),O+=2,++z,++Y,xe+=2*_;1&Ce&&g(S[O+0],R[z+0],V[Y+0],te,xe)}}function Pi(h,g,_){return _==0?h==0?g==0?6:5:g==0?4:0:_}function zl(h,g,_,S,O){switch(h>>>30){case 3:to(g,_,S,O,0);break;case 2:Gr(g,_,S,O);break;case 1:mr(g,_,S,O)}}function Ls(h,g){var _,S,O=g.M,R=g.Nb,z=h.oc,V=h.pc+40,Y=h.oc,te=h.pc+584,xe=h.oc,Ce=h.pc+600;for(_=0;16>_;++_)z[V+32*_-1]=129;for(_=0;8>_;++_)Y[te+32*_-1]=129,xe[Ce+32*_-1]=129;for(0<O?z[V-1-32]=Y[te-1-32]=xe[Ce-1-32]=129:(a(z,V-32-1,127,21),a(Y,te-32-1,127,9),a(xe,Ce-32-1,127,9)),S=0;S<h.za;++S){var ne=g.ya[g.aa+S];if(0<S){for(_=-1;16>_;++_)s(z,V+32*_-4,z,V+32*_+12,4);for(_=-1;8>_;++_)s(Y,te+32*_-4,Y,te+32*_+4,4),s(xe,Ce+32*_-4,xe,Ce+32*_+4,4)}var Ne=h.Gd,Ae=h.Hd+S,Fe=ne.ad,Le=ne.Hc;if(0<O&&(s(z,V-32,Ne[Ae].y,0,16),s(Y,te-32,Ne[Ae].f,0,8),s(xe,Ce-32,Ne[Ae].ea,0,8)),ne.Za){var De=z,Re=V-32+16;for(0<O&&(S>=h.za-1?a(De,Re,Ne[Ae].y[15],4):s(De,Re,Ne[Ae+1].y,0,4)),_=0;4>_;_++)De[Re+128+_]=De[Re+256+_]=De[Re+384+_]=De[Re+0+_];for(_=0;16>_;++_,Le<<=2)De=z,Re=V+Jc[_],Ks[ne.Ob[_]](De,Re),zl(Le,Fe,16*+_,De,Re)}else if(De=Pi(S,O,ne.Ob[0]),as[De](z,V),Le!=0)for(_=0;16>_;++_,Le<<=2)zl(Le,Fe,16*+_,z,V+Jc[_]);for(_=ne.Gc,De=Pi(S,O,ne.Dd),gs[De](Y,te),gs[De](xe,Ce),Le=Fe,De=Y,Re=te,255&(ne=0|_)&&(170&ne?ms(Le,256,De,Re):Sr(Le,256,De,Re)),ne=xe,Le=Ce,255&(_>>=8)&&(170&_?ms(Fe,320,ne,Le):Sr(Fe,320,ne,Le)),O<h.Ub-1&&(s(Ne[Ae].y,0,z,V+480,16),s(Ne[Ae].f,0,Y,te+224,8),s(Ne[Ae].ea,0,xe,Ce+224,8)),_=8*R*h.B,Ne=h.sa,Ae=h.ta+16*S+16*R*h.R,Fe=h.qa,ne=h.ra+8*S+_,Le=h.Ha,De=h.Ia+8*S+_,_=0;16>_;++_)s(Ne,Ae+_*h.R,z,V+32*_,16);for(_=0;8>_;++_)s(Fe,ne+_*h.B,Y,te+32*_,8),s(Le,De+_*h.B,xe,Ce+32*_,8)}}function Aa(h,g,_,S,O,R,z,V,Y){var te=[0],xe=[0],Ce=0,ne=Y!=null?Y.kd:0,Ne=Y??new ze;if(h==null||12>_)return 7;Ne.data=h,Ne.w=g,Ne.ha=_,g=[g],_=[_],Ne.gb=[Ne.gb];e:{var Ae=g,Fe=_,Le=Ne.gb;if(e(h!=null),e(Fe!=null),e(Le!=null),Le[0]=0,12<=Fe[0]&&!t(h,Ae[0],"RIFF")){if(t(h,Ae[0]+8,"WEBP")){Le=3;break e}var De=rt(h,Ae[0]+4);if(12>De||4294967286<De){Le=3;break e}if(ne&&De>Fe[0]-8){Le=7;break e}Le[0]=De,Ae[0]+=12,Fe[0]-=12}Le=0}if(Le!=0)return Le;for(De=0<Ne.gb[0],_=_[0];;){e:{var Re=h;Fe=g,Le=_;var Be=te,qe=xe,Ct=Ae=[0];if((vt=Ce=[Ce])[0]=0,8>Le[0])Le=7;else{if(!t(Re,Fe[0],"VP8X")){if(rt(Re,Fe[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var dt=rt(Re,Fe[0]+8),Xt=1+Xe(Re,Fe[0]+12);if(2147483648<=Xt*(Re=1+Xe(Re,Fe[0]+15))){Le=3;break e}Ct!=null&&(Ct[0]=dt),Be!=null&&(Be[0]=Xt),qe!=null&&(qe[0]=Re),Fe[0]+=18,Le[0]-=18,vt[0]=1}Le=0}}if(Ce=Ce[0],Ae=Ae[0],Le!=0)return Le;if(Fe=!!(2&Ae),!De&&Ce)return 3;if(R!=null&&(R[0]=!!(16&Ae)),z!=null&&(z[0]=Fe),V!=null&&(V[0]=0),z=te[0],Ae=xe[0],Ce&&Fe&&Y==null){Le=0;break}if(4>_){Le=7;break}if(De&&Ce||!De&&!Ce&&!t(h,g[0],"ALPH")){_=[_],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{dt=h,Le=g,De=_;var vt=Ne.gb;Be=Ne.na,qe=Ne.P,Ct=Ne.Sa,Xt=22,e(dt!=null),e(De!=null),Re=Le[0];var or=De[0];for(e(Be!=null),e(Ct!=null),Be[0]=null,qe[0]=null,Ct[0]=0;;){if(Le[0]=Re,De[0]=or,8>or){Le=7;break e}var Kr=rt(dt,Re+4);if(4294967286<Kr){Le=3;break e}var tr=8+Kr+1&-2;if(Xt+=tr,0<vt&&Xt>vt){Le=3;break e}if(!t(dt,Re,"VP8 ")||!t(dt,Re,"VP8L")){Le=0;break e}if(or[0]<tr){Le=7;break e}t(dt,Re,"ALPH")||(Be[0]=dt,qe[0]=Re+8,Ct[0]=Kr),Re+=tr,or-=tr}}if(_=_[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Le!=0)break}_=[_],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(vt=h,Le=g,De=_,Be=Ne.gb[0],qe=Ne.Ja,Ct=Ne.xa,dt=Le[0],Re=!t(vt,dt,"VP8 "),Xt=!t(vt,dt,"VP8L"),e(vt!=null),e(De!=null),e(qe!=null),e(Ct!=null),8>De[0])Le=7;else{if(Re||Xt){if(vt=rt(vt,dt+4),12<=Be&&vt>Be-12){Le=3;break e}if(ne&&vt>De[0]-8){Le=7;break e}qe[0]=vt,Le[0]+=8,De[0]-=8,Ct[0]=Xt}else Ct[0]=5<=De[0]&&vt[dt+0]==47&&!(vt[dt+4]>>5),qe[0]=De[0];Le=0}if(_=_[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],g=g[0],Le!=0)break;if(4294967286<Ne.Ja)return 3;if(V==null||Fe||(V[0]=Ne.xa?2:1),z=[z],Ae=[Ae],Ne.xa){if(5>_){Le=7;break}V=z,ne=Ae,Fe=R,h==null||5>_?h=0:5<=_&&h[g+0]==47&&!(h[g+4]>>5)?(De=[0],vt=[0],Be=[0],se(qe=new q,h,g,_),qn(qe,De,vt,Be)?(V!=null&&(V[0]=De[0]),ne!=null&&(ne[0]=vt[0]),Fe!=null&&(Fe[0]=Be[0]),h=1):h=0):h=0}else{if(10>_){Le=7;break}V=Ae,h==null||10>_||!ki(h,g+3,_-3)?h=0:(ne=h[g+0]|h[g+1]<<8|h[g+2]<<16,Fe=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=Ne.Ja||!Fe||!h?h=0:(z&&(z[0]=Fe),V&&(V[0]=h),h=1))}if(!h||(z=z[0],Ae=Ae[0],Ce&&(te[0]!=z||xe[0]!=Ae)))return 3;Y!=null&&(Y[0]=Ne,Y.offset=g-Y.w,e(4294967286>g-Y.w),e(Y.offset==Y.ha-_));break}return Le==0||Le==7&&Ce&&Y==null?(R!=null&&(R[0]|=Ne.na!=null&&0<Ne.na.length),S!=null&&(S[0]=z),O!=null&&(O[0]=Ae),0):Le}function ko(h,g,_){var S=g.width,O=g.height,R=0,z=0,V=S,Y=O;if(g.Da=h!=null&&0<h.Da,g.Da&&(V=h.cd,Y=h.bd,R=h.v,z=h.j,11>_||(R&=-2,z&=-2),0>R||0>z||0>=V||0>=Y||R+V>S||z+Y>O))return 0;if(g.v=R,g.j=z,g.va=R+V,g.o=z+Y,g.U=V,g.T=Y,g.da=h!=null&&0<h.da,g.da){if(!Tt(V,Y,_=[h.ib],R=[h.hb]))return 0;g.ib=_[0],g.hb=R[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*S/4&&g.hb<3*O/4,g.Kb=0),1}function So(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function Ki(h,g,_,S){if(S==null||0>=h||0>=g)return 2;if(_!=null){if(_.Da){var O=_.cd,R=_.bd,z=-2&_.v,V=-2&_.j;if(0>z||0>V||0>=O||0>=R||z+O>h||V+R>g)return 2;h=O,g=R}if(_.da){if(!Tt(h,g,O=[_.ib],R=[_.hb]))return 2;h=O[0],g=R[0]}}S.width=h,S.height=g;e:{var Y=S.width,te=S.height;if(h=S.S,0>=Y||0>=te||!(h>=Hl&&13>h))h=2;else{if(0>=S.Rd&&S.sd==null){z=R=O=g=0;var xe=(V=Y*gl[h])*te;if(11>h||(R=(te+1)/2*(g=(Y+1)/2),h==12&&(z=(O=Y)*te)),(te=o(xe+2*R+z))==null){h=1;break e}S.sd=te,11>h?((Y=S.f.RGBA).eb=te,Y.fb=0,Y.A=V,Y.size=xe):((Y=S.f.kb).y=te,Y.O=0,Y.fa=V,Y.Fd=xe,Y.f=te,Y.N=0+xe,Y.Ab=g,Y.Cd=R,Y.ea=te,Y.W=0+xe+R,Y.Db=g,Y.Ed=R,h==12&&(Y.F=te,Y.J=0+xe+2*R),Y.Tc=z,Y.lb=O)}if(g=1,O=S.S,R=S.width,z=S.height,O>=Hl&&13>O)if(11>O)h=S.f.RGBA,g&=(V=Math.abs(h.A))*(z-1)+R<=h.size,g&=V>=R*gl[O],g&=h.eb!=null;else{h=S.f.kb,V=(R+1)/2,xe=(z+1)/2,Y=Math.abs(h.fa),te=Math.abs(h.Ab);var Ce=Math.abs(h.Db),ne=Math.abs(h.lb),Ne=ne*(z-1)+R;g&=Y*(z-1)+R<=h.Fd,g&=te*(xe-1)+V<=h.Cd,g=(g&=Ce*(xe-1)+V<=h.Ed)&Y>=R&te>=V&Ce>=V,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,O==12&&(g&=ne>=R,g&=Ne<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||_!=null&&_.fd&&(h=So(S)),h}var Gs=64,Ts=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Is=24,Pa=32,Ci=8,Ji=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(h){return h},J.Predictor2=function(h,g,_){return g[_+0]},J.Predictor3=function(h,g,_){return g[_+1]},J.Predictor4=function(h,g,_){return g[_-1]},J.Predictor5=function(h,g,_){return xt(xt(h,g[_+1]),g[_+0])},J.Predictor6=function(h,g,_){return xt(h,g[_-1])},J.Predictor7=function(h,g,_){return xt(h,g[_+0])},J.Predictor8=function(h,g,_){return xt(g[_-1],g[_+0])},J.Predictor9=function(h,g,_){return xt(g[_+0],g[_+1])},J.Predictor10=function(h,g,_){return xt(xt(h,g[_-1]),xt(g[_+0],g[_+1]))},J.Predictor11=function(h,g,_){var S=g[_+0];return 0>=Mt(S>>24&255,h>>24&255,(g=g[_-1])>>24&255)+Mt(S>>16&255,h>>16&255,g>>16&255)+Mt(S>>8&255,h>>8&255,g>>8&255)+Mt(255&S,255&h,255&g)?S:h},J.Predictor12=function(h,g,_){var S=g[_+0];return(Wt((h>>24&255)+(S>>24&255)-((g=g[_-1])>>24&255))<<24|Wt((h>>16&255)+(S>>16&255)-(g>>16&255))<<16|Wt((h>>8&255)+(S>>8&255)-(g>>8&255))<<8|Wt((255&h)+(255&S)-(255&g)))>>>0},J.Predictor13=function(h,g,_){var S=g[_-1];return(St((h=xt(h,g[_+0]))>>24&255,S>>24&255)<<24|St(h>>16&255,S>>16&255)<<16|St(h>>8&255,S>>8&255)<<8|St(255&h,255&S))>>>0};var Xi=J.PredictorAdd0;J.PredictorAdd1=Qt,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var Ei=J.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var rn,Xa=J.ColorIndexInverseTransform,Li=J.MapARGB,li=J.VP8LColorIndexInverseTransformAlpha,Qa=J.MapAlpha,Za=J.VP8LPredictorsAdd=[];Za.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var jo,Ao,Qi,Ca,Ea,eo,La,to,Gr,ms,mr,Sr,Yr,dn,ci,al,Po,Zi,$l,Co,Wl,Mc,ol,ro,no,Uc,ll,Bc,qc=o(511),zc=o(2041),$c=o(225),Wc=o(767),Hc=0,Ti=zc,Eo=$c,is=Wc,Ys=qc,Hl=0,Ta=1,ju=2,cl=3,ul=4,Er=5,Vl=6,Lo=7,so=8,dl=9,hl=10,fl=[2,3,7],Gl=[3,3,11],io=[280,256,256,256,40],Au=[0,1,1,1,0],qd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yl=8,To=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],pl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ao=null,Vc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Gc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Cu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Eu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],$d=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Wd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],as=[],Ks=[],gs=[],Ii=1,Io=2,Gn=[],vs=[];Yi("UpsampleRgbLinePair",ja,3),Yi("UpsampleBgrLinePair",Rn,3),Yi("UpsampleRgbaLinePair",ss,4),Yi("UpsampleBgraLinePair",il,4),Yi("UpsampleArgbLinePair",sl,4),Yi("UpsampleRgba4444LinePair",Ja,2),Yi("UpsampleRgb565LinePair",Ka,2);var Hd=J.UpsampleRgbLinePair,Vd=J.UpsampleBgrLinePair,Ia=J.UpsampleRgbaLinePair,Oo=J.UpsampleBgraLinePair,oo=J.UpsampleArgbLinePair,ml=J.UpsampleRgba4444LinePair,Kc=J.UpsampleRgb565LinePair,ea=16,ui=1<<ea-1,wr=-227,jr=482,Oa=6,Fn=0,xs=o(256),lo=o(256),Do=o(256),ys=o(256),Kl=o(jr-wr),Lu=o(jr-wr);oi("YuvToRgbRow",ja,3),oi("YuvToBgrRow",Rn,3),oi("YuvToRgbaRow",ss,4),oi("YuvToBgraRow",il,4),oi("YuvToArgbRow",sl,4),oi("YuvToRgba4444Row",Ja,2),oi("YuvToRgb565Row",Ka,2);var Jc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],co=[0,2,8],Tu=[8,7,6,4,4,2,2,2,1,1,1,1],ta=1;this.WebPDecodeRGBA=function(h,g,_,S,O){var R=Ta,z=new Oe,V=new $t;z.ba=V,V.S=R,V.width=[V.width],V.height=[V.height];var Y=V.width,te=V.height,xe=new Dt;if(xe==null||h==null)var Ce=2;else e(xe!=null),Ce=Aa(h,g,_,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(Ce!=0?Y=0:(Y!=null&&(Y[0]=xe.width[0]),te!=null&&(te[0]=xe.height[0]),Y=1),Y){V.width=V.width[0],V.height=V.height[0],S!=null&&(S[0]=V.width),O!=null&&(O[0]=V.height);e:{if(S=new va,(O=new ze).data=h,O.w=g,O.ha=_,O.kd=1,g=[0],e(O!=null),((h=Aa(O.data,O.w,O.ha,null,null,null,g,null,O))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(e(z!=null),S.data=O.data,S.w=O.w+O.offset,S.ha=O.ha-O.offset,S.put=It,S.ac=vn,S.bc=Sn,S.ma=z,O.xa){if((h=xn())==null){z=1;break e}if((function(ne,Ne){var Ae=[0],Fe=[0],Le=[0];t:for(;;){if(ne==null)return 0;if(Ne==null)return ne.a=2,0;if(ne.l=Ne,ne.a=0,se(ne.m,Ne.data,Ne.w,Ne.ha),!qn(ne.m,Ae,Fe,Le)){ne.a=3;break t}if(ne.xb=Io,Ne.width=Ae[0],Ne.height=Fe[0],!rs(Ae[0],Fe[0],1,ne,null))break t;return 1}return e(ne.a!=0),0})(h,S)){if(S=(g=Ki(S.width,S.height,z.Oa,z.ba))==0){t:{S=h;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((_=S.l)!=null),e((O=_.ma)!=null),S.xb!=0){if(S.ca=O.ba,S.tb=O.tb,e(S.ca!=null),!ko(O.Oa,_,cl)){S.a=2;break r}if(!bi(S,_.width)||_.da)break r;if((_.da||Et(S.ca.S))&&ai(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&ai()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!Z(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Cs(S,S.V,S.Ba,S.c,S.i,_.o,Ms))break r;O.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(g=h.a)}else g=h.a}else{if((h=new xa)==null){z=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,In(h,S)){if((g=Ki(S.width,S.height,z.Oa,z.ba))==0){if(h.Aa=0,_=z.Oa,e((O=h)!=null),_!=null){if(0<(Y=0>(Y=_.Md)?0:100<Y?255:255*Y/100)){for(te=xe=0;4>te;++te)12>(Ce=O.pb[te]).lc&&(Ce.ia=Y*Tu[0>Ce.lc?0:Ce.lc]>>3),xe|=Ce.ia;xe&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=_.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(ne,Ne){if(ne==null)return 0;if(Ne==null)return $r(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!In(ne,Ne))return 0;if(e(ne.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(ne.L=0);var Ae=co[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=Ne.v-Ae>>4,ne.zb=Ne.j-Ae>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=Ne.o+15+Ae>>4,ne.Hb=Ne.va+15+Ae>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var Fe=ne.ed;for(Ae=0;4>Ae;++Ae){var Le;if(ne.Qa.Cb){var De=ne.Qa.Lb[Ae];ne.Qa.Fb||(De+=Fe.Tb)}else De=Fe.Tb;for(Le=0;1>=Le;++Le){var Re=ne.gd[Ae][Le],Be=De;if(Fe.Pc&&(Be+=Fe.vd[0],Le&&(Be+=Fe.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var qe=Be;0<Fe.wb&&(qe=4<Fe.wb?qe>>2:qe>>1)>9-Fe.wb&&(qe=9-Fe.wb),1>qe&&(qe=1),Re.dd=qe,Re.tc=2*Be+qe,Re.ld=40<=Be?2:15<=Be?1:0}else Re.tc=0;Re.La=Le}}}Ae=0}else $r(ne,6,"Frame setup failed"),Ae=ne.a;if(Ae=Ae==0){if(Ae){ne.$c=0,0<ne.Aa||(ne.Ic=ta);t:{Ae=ne.Ic,Fe=4*(qe=ne.za);var Ct=32*qe,dt=qe+1,Xt=0<ne.L?qe*(0<ne.Aa?2:1):0,vt=(ne.Aa==2?2:1)*qe;if((Re=Fe+832+(Le=3*(16*Ae+co[ne.L])/2*Ct)+(De=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=Re)Ae=0;else{if(Re>ne.Vb){if(ne.Vb=0,ne.Ec=o(Re),ne.Fc=0,ne.Ec==null){Ae=$r(ne,1,"no memory during frame initialization.");break t}ne.Vb=Re}Re=ne.Ec,Be=ne.Fc,ne.Ac=Re,ne.Bc=Be,Be+=Fe,ne.Gd=u(Ct,Hn),ne.Hd=0,ne.rb=u(dt+1,Es),ne.sb=1,ne.wa=Xt?u(Xt,Wn):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=qe),e(!0),ne.oc=Re,ne.pc=Be,Be+=832,ne.ya=u(vt,ga),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=qe),ne.R=16*qe,ne.B=8*qe,qe=(Ct=co[ne.L])*ne.R,Ct=Ct/2*ne.B,ne.sa=Re,ne.ta=Be+qe,ne.qa=ne.sa,ne.ra=ne.ta+16*Ae*ne.R+Ct,ne.Ha=ne.qa,ne.Ia=ne.ra+8*Ae*ne.B+Ct,ne.$c=0,Be+=Le,ne.mb=De?Re:null,ne.nb=De?Be:null,e(Be+De<=ne.Fc+ne.Vb),Si(ne),a(ne.Ac,ne.Bc,0,Fe),Ae=1}}if(Ae){if(Ne.ka=0,Ne.y=ne.sa,Ne.O=ne.ta,Ne.f=ne.qa,Ne.N=ne.ra,Ne.ea=ne.Ha,Ne.Vd=ne.Ia,Ne.fa=ne.R,Ne.Rc=ne.B,Ne.F=null,Ne.J=0,!Hc){for(Ae=-255;255>=Ae;++Ae)qc[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)zc[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)$c[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)Wc[255+Ae]=0>Ae?0:255<Ae?255:Ae;Hc=1}La=$i,to=zi,ms=ds,mr=ii,Sr=fr,Gr=qs,Yr=Qe,dn=Ke,ci=E,al=Q,Po=it,Zi=x,$l=pe,Co=we,Wl=me,Mc=Se,ol=Pe,ro=Ue,Ks[0]=wo,Ks[1]=Wa,Ks[2]=$s,Ks[3]=nl,Ks[4]=Dn,Ks[5]=Ha,Ks[6]=Ws,Ks[7]=_a,Ks[8]=_o,Ks[9]=Hi,as[0]=zs,as[1]=bo,as[2]=ba,as[3]=wa,as[4]=Vn,as[5]=hs,as[6]=Wi,gs[0]=Vs,gs[1]=yo,gs[2]=Hs,gs[3]=Vi,gs[4]=Va,gs[5]=Gi,gs[6]=Na,Ae=1}else Ae=0}Ae&&(Ae=(function(or,Kr){for(or.M=0;or.M<or.Va;++or.M){var tr,ht=or.Jc[or.M&or.Xb],tt=or.m,nn=or;for(tr=0;tr<nn.za;++tr){var Vt=tt,ir=nn,Or=ir.Ac,An=ir.Bc+4*tr,hn=ir.zc,Hr=ir.ya[ir.aa+tr];if(ir.Qa.Bb?Hr.$b=be(Vt,ir.Pa.jb[0])?2+be(Vt,ir.Pa.jb[2]):be(Vt,ir.Pa.jb[1]):Hr.$b=0,ir.kc&&(Hr.Ad=be(Vt,ir.Bd)),Hr.Za=!be(Vt,145)+0,Hr.Za){var yn=Hr.Ob,Pn=0;for(ir=0;4>ir;++ir){var Ur,hr=hn[0+ir];for(Ur=0;4>Ur;++Ur){hr=$d[Or[An+Ur]][hr];for(var gr=Cu[be(Vt,hr[0])];0<gr;)gr=Cu[2*gr+be(Vt,hr[gr])];hr=-gr,Or[An+Ur]=hr}s(yn,Pn,Or,An,4),Pn+=4,hn[0+ir]=hr}}else hr=be(Vt,156)?be(Vt,128)?1:3:be(Vt,163)?2:0,Hr.Ob[0]=hr,a(Or,An,hr,4),a(hn,0,hr,4);Hr.Dd=be(Vt,142)?be(Vt,114)?be(Vt,183)?1:3:2:0}if(nn.m.Ka)return $r(or,7,"Premature end-of-partition0 encountered.");for(;or.ja<or.za;++or.ja){if(nn=ht,Vt=(tt=or).rb[tt.sb-1],Or=tt.rb[tt.sb+tt.ja],tr=tt.ya[tt.aa+tt.ja],An=tt.kc?tr.Ad:0)Vt.la=Or.la=0,tr.Za||(Vt.Na=Or.Na=0),tr.Hc=0,tr.Gc=0,tr.ia=0;else{var Br,vr;if(Vt=Or,Or=nn,An=tt.Pa.Xc,hn=tt.ya[tt.aa+tt.ja],Hr=tt.pb[hn.$b],ir=hn.ad,yn=0,Pn=tt.rb[tt.sb-1],hr=Ur=0,a(ir,yn,0,384),hn.Za)var Jr=0,Xr=An[3];else{gr=o(16);var Lr=Vt.Na+Pn.Na;if(Lr=ao(Or,An[1],Lr,Hr.Eb,0,gr,0),Vt.Na=Pn.Na=(0<Lr)+0,1<Lr)La(gr,0,ir,yn);else{var Yn=gr[0]+3>>3;for(gr=0;256>gr;gr+=16)ir[yn+gr]=Yn}Jr=1,Xr=An[0]}var Ar=15&Vt.la,Tr=15&Pn.la;for(gr=0;4>gr;++gr){var fn=1&Tr;for(Yn=vr=0;4>Yn;++Yn)Ar=Ar>>1|(fn=(Lr=ao(Or,Xr,Lr=fn+(1&Ar),Hr.Sc,Jr,ir,yn))>Jr)<<7,vr=vr<<2|(3<Lr?3:1<Lr?2:ir[yn+0]!=0),yn+=16;Ar>>=4,Tr=Tr>>1|fn<<7,Ur=(Ur<<8|vr)>>>0}for(Xr=Ar,Jr=Tr>>4,Br=0;4>Br;Br+=2){for(vr=0,Ar=Vt.la>>4+Br,Tr=Pn.la>>4+Br,gr=0;2>gr;++gr){for(fn=1&Tr,Yn=0;2>Yn;++Yn)Lr=fn+(1&Ar),Ar=Ar>>1|(fn=0<(Lr=ao(Or,An[2],Lr,Hr.Qc,0,ir,yn)))<<3,vr=vr<<2|(3<Lr?3:1<Lr?2:ir[yn+0]!=0),yn+=16;Ar>>=2,Tr=Tr>>1|fn<<5}hr|=vr<<4*Br,Xr|=Ar<<4<<Br,Jr|=(240&Tr)<<Br}Vt.la=Xr,Pn.la=Jr,hn.Hc=Ur,hn.Gc=hr,hn.ia=43690&hr?0:Hr.ia,An=!(Ur|hr)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[tr.$b][tr.Za],tt.wa[tt.Y+tt.ja].La|=!An),nn.Ka)return $r(or,7,"Premature end-of-file encountered.")}if(Si(or),tt=Kr,nn=1,tr=(ht=or).D,Vt=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)t:{if(tr.M=ht.M,tr.uc=Vt,Ls(ht,tr),nn=1,tr=(vr=ht.D).Nb,Vt=(hr=co[ht.L])*ht.R,Or=hr/2*ht.B,gr=16*tr*ht.R,Yn=8*tr*ht.B,An=ht.sa,hn=ht.ta-Vt+gr,Hr=ht.qa,ir=ht.ra-Or+Yn,yn=ht.Ha,Pn=ht.Ia-Or+Yn,Tr=(Ar=vr.M)==0,Ur=Ar>=ht.Va-1,ht.Aa==2&&Ls(ht,vr),vr.uc)for(fn=(Lr=ht).D.M,e(Lr.D.uc),vr=Lr.yb;vr<Lr.Hb;++vr){Jr=vr,Xr=fn;var Mn=(bs=(on=Lr).D).Nb;Br=on.R;var bs=bs.wa[bs.Y+Jr],sn=on.sa,an=on.ta+16*Mn*Br+16*Jr,Kn=bs.dd,Ir=bs.tc;if(Ir!=0)if(e(3<=Ir),on.L==1)0<Jr&&Mc(sn,an,Br,Ir+4),bs.La&&ro(sn,an,Br,Ir),0<Xr&&Wl(sn,an,Br,Ir+4),bs.La&&ol(sn,an,Br,Ir);else{var Jn=on.B,Js=on.qa,di=on.ra+8*Mn*Jn+8*Jr,Cn=on.Ha,on=on.Ia+8*Mn*Jn+8*Jr;Mn=bs.ld,0<Jr&&(dn(sn,an,Br,Ir+4,Kn,Mn),al(Js,di,Cn,on,Jn,Ir+4,Kn,Mn)),bs.La&&(Zi(sn,an,Br,Ir,Kn,Mn),Co(Js,di,Cn,on,Jn,Ir,Kn,Mn)),0<Xr&&(Yr(sn,an,Br,Ir+4,Kn,Mn),ci(Js,di,Cn,on,Jn,Ir+4,Kn,Mn)),bs.La&&(Po(sn,an,Br,Ir,Kn,Mn),$l(Js,di,Cn,on,Jn,Ir,Kn,Mn))}}if(ht.ia&&alert("todo:DitherRow"),tt.put!=null){if(vr=16*Ar,Ar=16*(Ar+1),Tr?(tt.y=ht.sa,tt.O=ht.ta+gr,tt.f=ht.qa,tt.N=ht.ra+Yn,tt.ea=ht.Ha,tt.W=ht.Ia+Yn):(vr-=hr,tt.y=An,tt.O=hn,tt.f=Hr,tt.N=ir,tt.ea=yn,tt.W=Pn),Ur||(Ar-=hr),Ar>tt.o&&(Ar=tt.o),tt.F=null,tt.J=null,ht.Fa!=null&&0<ht.Fa.length&&vr<Ar&&(tt.J=er(ht,tt,vr,Ar-vr),tt.F=ht.mb,tt.F==null&&tt.F.length==0)){nn=$r(ht,3,"Could not decode alpha data.");break t}vr<tt.j&&(hr=tt.j-vr,vr=tt.j,e(!(1&hr)),tt.O+=ht.R*hr,tt.N+=ht.B*(hr>>1),tt.W+=ht.B*(hr>>1),tt.F!=null&&(tt.J+=tt.width*hr)),vr<Ar&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=vr-tt.j,tt.U=tt.va-tt.v,tt.T=Ar-vr,nn=tt.put(tt))}tr+1!=ht.Ic||Ur||(s(ht.sa,ht.ta-Vt,An,hn+16*ht.R,Vt),s(ht.qa,ht.ra-Or,Hr,ir+8*ht.B,Or),s(ht.Ha,ht.Ia-Or,yn,Pn+8*ht.B,Or))}if(!nn)return $r(or,6,"Output aborted.")}return 1})(ne,Ne)),Ne.bc!=null&&Ne.bc(Ne),Ae&=1}return Ae?(ne.cb=0,Ae):0})(h,S)||(g=h.a)}}else g=h.a}g==0&&z.Oa!=null&&z.Oa.fd&&(g=So(z.ba))}z=g}R=z!=0?null:11>R?V.f.RGBA.eb:V.f.kb.y}else R=null;return R};var gl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(J,W){for(var T="",B=0;B<4;B++)T+=String.fromCharCode(J[W++]);return T}function v(J,W){return J[W+0]|J[W+1]<<8}function w(J,W){return(J[W+0]|J[W+1]<<8|J[W+2]<<16)>>>0}function k(J,W){return(J[W+0]|J[W+1]<<8|J[W+2]<<16|J[W+3]<<24)>>>0}new f;var y=[0],P=[0],L=[],I=new f,A=n,G=(function(J,W){var T={},B=0,ie=!1,M=0,ee=0;if(T.frames=[],!(function(j,q){for(var X=0;X<4;X++)if(j[q+X]!="RIFF".charCodeAt(X))return!0;return!1})(J,W)){for(k(J,W+=4),W+=8;W<J.length;){var fe=m(J,W),ae=k(J,W+=4);W+=4;var F=ae+(1&ae);switch(fe){case"VP8 ":case"VP8L":T.frames[B]===void 0&&(T.frames[B]={}),(K=T.frames[B]).src_off=ie?ee:W-8,K.src_size=M+ae+8,B++,ie&&(ie=!1,M=0,ee=0);break;case"VP8X":(K=T.header={}).feature_flags=J[W];var se=W+4;K.canvas_width=1+w(J,se),se+=3,K.canvas_height=1+w(J,se),se+=3;break;case"ALPH":ie=!0,M=F+8,ee=W-8;break;case"ANIM":(K=T.header).bgcolor=k(J,W),se=W+4,K.loop_count=v(J,se),se+=2;break;case"ANMF":var ge,K;(K=T.frames[B]={}).offset_x=2*w(J,W),W+=3,K.offset_y=2*w(J,W),W+=3,K.width=1+w(J,W),W+=3,K.height=1+w(J,W),W+=3,K.duration=w(J,W),W+=3,ge=J[W++],K.dispose=1&ge,K.blend=ge>>1&1}fe!="ANMF"&&(W+=F)}return T}})(A,0);G.response=A,G.rgbaoutput=!0,G.dataurl=!1;var U=G.header?G.header:null,$=G.frames?G.frames:null;if(U){U.loop_counter=U.loop_count,y=[U.canvas_height],P=[U.canvas_width];for(var le=0;le<$.length&&$[le].blend!=0;le++);}var he=$[0],H=I.WebPDecodeRGBA(A,he.src_off,he.src_size,P,y);he.rgba=H,he.imgwidth=P[0],he.imgheight=y[0];for(var re=0;re<P[0]*y[0]*4;re++)L[re]=H[re];return this.width=P,this.height=y,this.data=L,this}(function(n){var e,t,s,a,o,u,d,f,m,v=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new f,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new u,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new u,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,f=this.internal.Matrix,m=new v}]);var w=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=j;Object.defineProperty(this,"pdf",{get:function(){return q}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Z){X=!!Z}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(Z){oe=!!Z}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(Z){isNaN(Z)||(de=Z)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(Z){isNaN(Z)||(ve=Z)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Z){var Ze;typeof Z=="number"?Ze=[Z,Z,Z,Z]:((Ze=new Array(4))[0]=Z[0],Ze[1]=Z.length>=2?Z[1]:Ze[0],Ze[2]=Z.length>=3?Z[2]:Ze[0],Ze[3]=Z.length>=4?Z[3]:Ze[1]),m.margin=Ze}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(Z){_e=Z}});var je=0;Object.defineProperty(this,"lastBreak",{get:function(){return je},set:function(Z){je=Z}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(Z){be=Z}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Z){Z instanceof v&&(m=Z)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Z){m.path=Z}});var $e=[];Object.defineProperty(this,"ctxStack",{get:function(){return $e},set:function(Z){$e=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var Ze;Ze=k(Z),this.ctx.fillStyle=Ze.style,this.ctx.isFillTransparent=Ze.a===0,this.ctx.fillOpacity=Ze.a,this.pdf.setFillColor(Ze.r,Ze.g,Ze.b,{a:Ze.a}),this.pdf.setTextColor(Ze.r,Ze.g,Ze.b,{a:Ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var Ze=k(Z);this.ctx.strokeStyle=Ze.style,this.ctx.isStrokeTransparent=Ze.a===0,this.ctx.strokeOpacity=Ze.a,Ze.a===0?this.pdf.setDrawColor(255,255,255):(Ze.a,this.pdf.setDrawColor(Ze.r,Ze.g,Ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var He=null,Xe=null,rt=null;Object.defineProperty(this,"fontFaces",{get:function(){return rt},set:function(Z){He=null,Xe=null,rt=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var Ze;if(this.ctx.font=Z,(Ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Z))!==null){var Rt=Ze[1];Ze[2];var Tt=Ze[3],We=Ze[4];Ze[5];var wt=Ze[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(st==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var _t=(function(ut){var _r,Jt,Gt=[],Me=ut.trim();if(Me==="")return af;if(Me in Dm)return[Dm[Me]];for(;Me!=="";){switch(Jt=null,_r=(Me=Fm(Me)).charAt(0)){case'"':case"'":Jt=Qb(Me.substring(1),_r);break;default:Jt=Zb(Me)}if(Jt===null||(Gt.push(Jt[0]),(Me=Fm(Jt[1]))!==""&&Me.charAt(0)!==","))return af;Me=Me.replace(/^,/,"")}return Gt})(wt);if(this.fontFaces){var xt=(function(ut,_r){var Jt=ut.getFontList(),Gt=JSON.stringify(Jt);if(He===null||Xe!==Gt){var Me=(function(jt){var ot=[];return Object.keys(jt).forEach(function(cr){jt[cr].forEach(function(Et){var Pt=null;switch(Et){case"bold":Pt={family:cr,weight:"bold"};break;case"italic":Pt={family:cr,style:"italic"};break;case"bolditalic":Pt={family:cr,weight:"bold",style:"italic"};break;case"":case"normal":Pt={family:cr}}Pt!==null&&(Pt.ref={name:cr,style:Et},ot.push(Pt))})}),ot})(Jt);He=(function(jt){for(var ot={},cr=0;cr<jt.length;++cr){var Et=sf(jt[cr]),Pt=Et.family,ur=Et.stretch,$t=Et.style,Dt=Et.weight;ot[Pt]=ot[Pt]||{},ot[Pt][ur]=ot[Pt][ur]||{},ot[Pt][ur][$t]=ot[Pt][ur][$t]||{},ot[Pt][ur][$t][Dt]=Et}return ot})(Me.concat(_r)),Xe=Gt}return He})(this.pdf,this.fontFaces),Wt=_t.map(function(ut){return{family:ut,stretch:"normal",weight:Tt,style:Rt}}),St=(function(ut,_r,Jt){for(var Gt=(Jt=Jt||{}).defaultFontFamily||"times",Me=Object.assign({},Xb,Jt.genericFontFamilies||{}),jt=null,ot=null,cr=0;cr<_r.length;++cr)if(Me[(jt=sf(_r[cr])).family]&&(jt.family=Me[jt.family]),ut.hasOwnProperty(jt.family)){ot=ut[jt.family];break}if(!(ot=ot||ut[Gt]))throw new Error("Could not find a font-family for the rule '"+Rm(jt)+"' and default family '"+Gt+"'.");if(ot=(function(Et,Pt){if(Pt[Et])return Pt[Et];var ur=Df[Et],$t=ur<=Df.normal?-1:1,Dt=Om(Pt,u1,ur,$t);if(!Dt)throw new Error("Could not find a matching font-stretch value for "+Et);return Dt})(jt.stretch,ot),ot=(function(Et,Pt){if(Pt[Et])return Pt[Et];for(var ur=c1[Et],$t=0;$t<ur.length;++$t)if(Pt[ur[$t]])return Pt[ur[$t]];throw new Error("Could not find a matching font-style for "+Et)})(jt.style,ot),!(ot=(function(Et,Pt){if(Pt[Et])return Pt[Et];if(Et===400&&Pt[500])return Pt[500];if(Et===500&&Pt[400])return Pt[400];var ur=Jb[Et],$t=Om(Pt,d1,ur,Et<400?-1:1);if(!$t)throw new Error("Could not find a matching font-weight for value "+Et);return $t})(jt.weight,ot)))throw new Error("Failed to resolve a font for the rule '"+Rm(jt)+"'.");return ot})(xt,Wt);this.pdf.setFont(St.ref.name,St.ref.style)}else{var Mt="";(Tt==="bold"||parseInt(Tt,10)>=700||Rt==="bold")&&(Mt="bold"),Rt==="italic"&&(Mt+="italic"),Mt.length===0&&(Mt="normal");for(var Qt="",Zt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<_t.length;ft++){if(this.pdf.internal.getFont(_t[ft],Mt,{noFallback:!0,disableWarning:!0})!==void 0){Qt=_t[ft];break}if(Mt==="bolditalic"&&this.pdf.internal.getFont(_t[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qt=_t[ft],Mt="bold";else if(this.pdf.internal.getFont(_t[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qt=_t[ft],Mt="normal";break}}if(Qt===""){for(var Nt=0;Nt<_t.length;Nt++)if(Zt[_t[Nt]]){Qt=Zt[_t[Nt]];break}}Qt=Qt===""?"Times":Qt,this.pdf.setFont(Qt,Mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};w.prototype.setLineDash=function(j){this.lineDash=j},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){$.call(this,"fill",!1)},w.prototype.stroke=function(){$.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(j,q){if(isNaN(j)||isNaN(q))throw Rr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new u(j,q));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new u(j,q)},w.prototype.closePath=function(){var j=new u(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Pr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){j=new u(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(j.x,j.y)},w.prototype.lineTo=function(j,q){if(isNaN(j)||isNaN(q))throw Rr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new u(j,q));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new u(X.x,X.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},w.prototype.quadraticCurveTo=function(j,q,X,oe){if(isNaN(X)||isNaN(oe)||isNaN(j)||isNaN(q))throw Rr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new u(X,oe)),ve=this.ctx.transform.applyToPoint(new u(j,q));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:de.x,y:de.y}),this.ctx.lastPoint=new u(de.x,de.y)},w.prototype.bezierCurveTo=function(j,q,X,oe,de,ve){if(isNaN(de)||isNaN(ve)||isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe))throw Rr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new u(de,ve)),je=this.ctx.transform.applyToPoint(new u(j,q)),be=this.ctx.transform.applyToPoint(new u(X,oe));this.path.push({type:"bct",x1:je.x,y1:je.y,x2:be.x,y2:be.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new u(_e.x,_e.y)},w.prototype.arc=function(j,q,X,oe,de,ve){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe)||isNaN(de))throw Rr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new u(j,q));j=_e.x,q=_e.y;var je=this.ctx.transform.applyToPoint(new u(0,X)),be=this.ctx.transform.applyToPoint(new u(0,0));X=Math.sqrt(Math.pow(je.x-be.x,2)+Math.pow(je.y-be.y,2))}Math.abs(de-oe)>=2*Math.PI&&(oe=0,de=2*Math.PI),this.path.push({type:"arc",x:j,y:q,radius:X,startAngle:oe,endAngle:de,counterclockwise:ve})},w.prototype.arcTo=function(j,q,X,oe,de){throw new Error("arcTo not implemented.")},w.prototype.rect=function(j,q,X,oe){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe))throw Rr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,q),this.lineTo(j+X,q),this.lineTo(j+X,q+oe),this.lineTo(j,q+oe),this.lineTo(j,q),this.lineTo(j+X,q),this.lineTo(j,q)},w.prototype.fillRect=function(j,q,X,oe){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe))throw Rr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,q,X,oe),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},w.prototype.strokeRect=function(j,q,X,oe){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe))throw Rr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(j,q,X,oe),this.stroke())},w.prototype.clearRect=function(j,q,X,oe){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe))throw Rr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,q,X,oe))},w.prototype.save=function(j){j=typeof j!="boolean"||j;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},w.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(q),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var k=function(j){var q,X,oe,de;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))q=0,X=0,oe=0,de=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(ve!==null)q=parseInt(ve[1]),X=parseInt(ve[2]),oe=parseInt(ve[3]),de=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)q=parseInt(ve[1]),X=parseInt(ve[2]),oe=parseInt(ve[3]),de=parseFloat(ve[4]);else{if(de=1,typeof j=="string"&&j.charAt(0)!=="#"){var _e=new r1(j);j=_e.ok?_e.toHex():"#000000"}j.length===4?(q=j.substring(1,2),q+=q,X=j.substring(2,3),X+=X,oe=j.substring(3,4),oe+=oe):(q=j.substring(1,3),X=j.substring(3,5),oe=j.substring(5,7)),q=parseInt(q,16),X=parseInt(X,16),oe=parseInt(oe,16)}}return{r:q,g:X,b:oe,a:de,style:j}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(j,q,X,oe){if(isNaN(q)||isNaN(X)||typeof j!="string")throw Rr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!y.call(this)){var de=F(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:j,x:q,y:X,scale:ve,angle:de,align:this.textAlign,maxWidth:oe})}},w.prototype.strokeText=function(j,q,X,oe){if(isNaN(q)||isNaN(X)||typeof j!="string")throw Rr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){oe=isNaN(oe)?void 0:oe;var de=F(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:j,x:q,y:X,scale:ve,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:oe})}},w.prototype.measureText=function(j){if(typeof j!="string")throw Rr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,X=this.pdf.internal.scaleFactor,oe=q.internal.getFontSize(),de=q.getStringUnitWidth(j)*oe/q.internal.scaleFactor;return new function(ve){var _e=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this}({width:de*=Math.round(96*X/72*1e4)/1e4})},w.prototype.scale=function(j,q){if(isNaN(j)||isNaN(q))throw Rr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new f(j,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},w.prototype.rotate=function(j){if(isNaN(j))throw Rr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new f(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},w.prototype.translate=function(j,q){if(isNaN(j)||isNaN(q))throw Rr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new f(1,0,0,1,j,q);this.ctx.transform=this.ctx.transform.multiply(X)},w.prototype.transform=function(j,q,X,oe,de,ve){if(isNaN(j)||isNaN(q)||isNaN(X)||isNaN(oe)||isNaN(de)||isNaN(ve))throw Rr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new f(j,q,X,oe,de,ve);this.ctx.transform=this.ctx.transform.multiply(_e)},w.prototype.setTransform=function(j,q,X,oe,de,ve){j=isNaN(j)?1:j,q=isNaN(q)?0:q,X=isNaN(X)?0:X,oe=isNaN(oe)?1:oe,de=isNaN(de)?0:de,ve=isNaN(ve)?0:ve,this.ctx.transform=new f(j,q,X,oe,de,ve)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(j,q,X,oe,de,ve,_e,je,be){var $e=this.pdf.getImageProperties(j),He=1,Xe=1,rt=1,Z=1;oe!==void 0&&je!==void 0&&(rt=je/oe,Z=be/de,He=$e.width/oe*je/oe,Xe=$e.height/de*be/de),ve===void 0&&(ve=q,_e=X,q=0,X=0),oe!==void 0&&je===void 0&&(je=oe,be=de),oe===void 0&&je===void 0&&(je=$e.width,be=$e.height);var Ze=this.ctx.transform.decompose(),Rt=F(Ze.rotate.shx),Tt=new f,We=(Tt=(Tt=(Tt=Tt.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new d(ve-q*rt,_e-X*Z,oe*He,de*Xe));if(this.autoPaging){for(var wt,st=I.call(this,We),_t=[],xt=0;xt<st.length;xt+=1)_t.indexOf(st[xt])===-1&&_t.push(st[xt]);U(_t);for(var Wt=_t[0],St=_t[_t.length-1],Mt=Wt;Mt<St+1;Mt++){this.pdf.setPage(Mt);var Qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Mt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Mt===1?0:ft+(Mt-2)*Nt;if(this.ctx.clip_path.length!==0){var _r=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(wt,this.posX+this.margin[3],-ut+Zt+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=_r}var Jt=JSON.parse(JSON.stringify(We));Jt=G([Jt],this.posX+this.margin[3],-ut+Zt+this.ctx.prevPageLastElemOffset)[0];var Gt=(Mt>Wt||Mt<St)&&L.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,Nt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,Rt),Gt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(j,"JPEG",We.x,We.y,We.w,We.h,null,null,Rt)};var I=function(j,q,X){var oe=[];q=q||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":oe.push(Math.floor((j.y+de)/X)+1);break;case"arc":oe.push(Math.floor((j.y+de-j.radius)/X)+1),oe.push(Math.floor((j.y+de+j.radius)/X)+1);break;case"qct":var ve=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);oe.push(Math.floor((ve.y+de)/X)+1),oe.push(Math.floor((ve.y+ve.h+de)/X)+1);break;case"bct":var _e=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);oe.push(Math.floor((_e.y+de)/X)+1),oe.push(Math.floor((_e.y+_e.h+de)/X)+1);break;case"rect":oe.push(Math.floor((j.y+de)/X)+1),oe.push(Math.floor((j.y+j.h+de)/X)+1)}for(var je=0;je<oe.length;je+=1)for(;this.pdf.internal.getNumberOfPages()<oe[je];)A.call(this);return oe},A=function(){var j=this.fillStyle,q=this.strokeStyle,X=this.font,oe=this.lineCap,de=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=q,this.font=X,this.lineCap=oe,this.lineWidth=de,this.lineJoin=ve},G=function(j,q,X){for(var oe=0;oe<j.length;oe++)switch(j[oe].type){case"bct":j[oe].x2+=q,j[oe].y2+=X;case"qct":j[oe].x1+=q,j[oe].y1+=X;default:j[oe].x+=q,j[oe].y+=X}return j},U=function(j){return j.sort(function(q,X){return q-X})},$=function(j,q){var X=this.fillStyle,oe=this.strokeStyle,de=this.lineCap,ve=this.lineWidth,_e=Math.abs(ve*this.ctx.transform.scaleX),je=this.lineJoin;if(this.autoPaging){for(var be,$e,He=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),rt=[],Z=0;Z<Xe.length;Z++)if(Xe[Z].x!==void 0)for(var Ze=I.call(this,Xe[Z]),Rt=0;Rt<Ze.length;Rt+=1)rt.indexOf(Ze[Rt])===-1&&rt.push(Ze[Rt]);for(var Tt=0;Tt<rt.length;Tt++)for(;this.pdf.internal.getNumberOfPages()<rt[Tt];)A.call(this);U(rt);for(var We=rt[0],wt=rt[rt.length-1],st=We;st<wt+1;st++){this.pdf.setPage(st),this.fillStyle=X,this.strokeStyle=oe,this.lineCap=de,this.lineWidth=_e,this.lineJoin=je;var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=st===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=st===1?0:Wt+(st-2)*St;if(this.ctx.clip_path.length!==0){var Qt=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(be,this.posX+this.margin[3],-Mt+xt+this.ctx.prevPageLastElemOffset),le.call(this,j,!0),this.path=Qt}if($e=JSON.parse(JSON.stringify(He)),this.path=G($e,this.posX+this.margin[3],-Mt+xt+this.ctx.prevPageLastElemOffset),q===!1||st===0){var Zt=(st>We||st<wt)&&L.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,St,null).clip().discardPath()),le.call(this,j,q),Zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}this.path=He}else this.lineWidth=_e,le.call(this,j,q),this.lineWidth=ve},le=function(j,q){if((j!=="stroke"||q||!P.call(this))&&(j==="stroke"||q||!y.call(this))){for(var X,oe,de=[],ve=this.path,_e=0;_e<ve.length;_e++){var je=ve[_e];switch(je.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:je,deltas:[],abs:[]});break;case"lt":var be=de.length;if(ve[_e-1]&&!isNaN(ve[_e-1].x)&&(X=[je.x-ve[_e-1].x,je.y-ve[_e-1].y],be>0)){for(;be>=0;be--)if(de[be-1].close!==!0&&de[be-1].begin!==!0){de[be-1].deltas.push(X),de[be-1].abs.push(je);break}}break;case"bct":X=[je.x1-ve[_e-1].x,je.y1-ve[_e-1].y,je.x2-ve[_e-1].x,je.y2-ve[_e-1].y,je.x-ve[_e-1].x,je.y-ve[_e-1].y],de[de.length-1].deltas.push(X);break;case"qct":var $e=ve[_e-1].x+2/3*(je.x1-ve[_e-1].x),He=ve[_e-1].y+2/3*(je.y1-ve[_e-1].y),Xe=je.x+2/3*(je.x1-je.x),rt=je.y+2/3*(je.y1-je.y),Z=je.x,Ze=je.y;X=[$e-ve[_e-1].x,He-ve[_e-1].y,Xe-ve[_e-1].x,rt-ve[_e-1].y,Z-ve[_e-1].x,Ze-ve[_e-1].y],de[de.length-1].deltas.push(X);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(je)}}oe=q?null:j==="stroke"?"stroke":"fill";for(var Rt=!1,Tt=0;Tt<de.length;Tt++)if(de[Tt].arc)for(var We=de[Tt].abs,wt=0;wt<We.length;wt++){var st=We[wt];st.type==="arc"?re.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,q,!Rt):ie.call(this,st.x,st.y),Rt=!0}else if(de[Tt].close===!0)this.pdf.internal.out("h"),Rt=!1;else if(de[Tt].begin!==!0){var _t=de[Tt].start.x,xt=de[Tt].start.y;M.call(this,de[Tt].deltas,_t,xt),Rt=!0}oe&&J.call(this,oe),q&&W.call(this)}},he=function(j){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-X;case"top":return j+q-X;case"hanging":return j+q-2*X;case"middle":return j+q/2-X;default:return j}},H=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(q,X){this.colorStops.push([q,X])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var re=function(j,q,X,oe,de,ve,_e,je,be){for(var $e=fe.call(this,X,oe,de,ve),He=0;He<$e.length;He++){var Xe=$e[He];He===0&&(be?T.call(this,Xe.x1+j,Xe.y1+q):ie.call(this,Xe.x1+j,Xe.y1+q)),ee.call(this,j,q,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}je?W.call(this):J.call(this,_e)},J=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(j,q){this.pdf.internal.out(t(j)+" "+s(q)+" m")},B=function(j){var q;switch(j.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var X,oe,de,ve=this.pdf.getTextDimensions(j.text),_e=he.call(this,j.y),je=H.call(this,_e)-ve.h,be=this.ctx.transform.applyToPoint(new u(j.x,_e));if(this.autoPaging){var $e=this.ctx.transform.decompose(),He=new f;He=(He=(He=He.multiply($e.translate)).multiply($e.skew)).multiply($e.scale);for(var Xe=this.ctx.transform.applyToRectangle(new d(j.x,_e,ve.w,ve.h)),rt=He.applyToRectangle(new d(j.x,je,ve.w,ve.h)),Z=I.call(this,rt),Ze=[],Rt=0;Rt<Z.length;Rt+=1)Ze.indexOf(Z[Rt])===-1&&Ze.push(Z[Rt]);U(Ze);for(var Tt=Ze[0],We=Ze[Ze.length-1],wt=Tt;wt<We+1;wt++){this.pdf.setPage(wt);var st=wt===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[2],Wt=xt-this.margin[0],St=this.pdf.internal.pageSize.width-this.margin[1],Mt=St-this.margin[3],Qt=wt===1?0:_t+(wt-2)*Wt;if(this.ctx.clip_path.length!==0){var Zt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(X,this.posX+this.margin[3],-1*Qt+st),le.call(this,"fill",!0),this.path=Zt}var ft=G([JSON.parse(JSON.stringify(rt))],this.posX+this.margin[3],-Qt+st+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*j.scale),de=this.lineWidth,this.lineWidth=de*j.scale);var Nt=this.autoPaging!=="text";if(Nt||ft.y+ft.h<=xt){if(Nt||ft.y>=st&&ft.x<=St){var ut=Nt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||St-ft.x)[0],_r=G([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Qt+st+this.ctx.prevPageLastElemOffset)[0],Jt=Nt&&(wt>Tt||wt<We)&&L.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Wt,null).clip().discardPath()),this.pdf.text(ut,_r.x,_r.y,{angle:j.angle,align:q,renderingMode:j.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else ft.y<xt&&(this.ctx.prevPageLastElemOffset+=xt-ft.y);j.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=de)}}else j.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*j.scale),de=this.lineWidth,this.lineWidth=de*j.scale),this.pdf.text(j.text,be.x+this.posX,be.y+this.posY,{angle:j.angle,align:q,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=de)},ie=function(j,q,X,oe){X=X||0,oe=oe||0,this.pdf.internal.out(t(j+X)+" "+s(q+oe)+" l")},M=function(j,q,X){return this.pdf.lines(j,q,X,null,null)},ee=function(j,q,X,oe,de,ve,_e,je){this.pdf.internal.out([e(a(X+j)),e(o(oe+q)),e(a(de+j)),e(o(ve+q)),e(a(_e+j)),e(o(je+q)),"c"].join(" "))},fe=function(j,q,X,oe){for(var de=2*Math.PI,ve=Math.PI/2;q>X;)q-=de;var _e=Math.abs(X-q);_e<de&&oe&&(_e=de-_e);for(var je=[],be=oe?-1:1,$e=q;_e>1e-5;){var He=$e+be*Math.min(_e,ve);je.push(ae.call(this,j,$e,He)),_e-=Math.abs(He-$e),$e=He}return je},ae=function(j,q,X){var oe=(X-q)/2,de=j*Math.cos(oe),ve=j*Math.sin(oe),_e=de,je=-ve,be=_e*_e+je*je,$e=be+_e*de+je*ve,He=4/3*(Math.sqrt(2*be*$e)-$e)/(_e*ve-je*de),Xe=_e-He*je,rt=je+He*_e,Z=Xe,Ze=-rt,Rt=oe+q,Tt=Math.cos(Rt),We=Math.sin(Rt);return{x1:j*Math.cos(q),y1:j*Math.sin(q),x2:Xe*Tt-rt*We,y2:Xe*We+rt*Tt,x3:Z*Tt-Ze*We,y3:Z*We+Ze*Tt,x4:j*Math.cos(X),y4:j*Math.sin(X)}},F=function(j){return 180*j/Math.PI},se=function(j,q,X,oe,de,ve){var _e=j+.5*(X-j),je=q+.5*(oe-q),be=de+.5*(X-de),$e=ve+.5*(oe-ve),He=Math.min(j,de,_e,be),Xe=Math.max(j,de,_e,be),rt=Math.min(q,ve,je,$e),Z=Math.max(q,ve,je,$e);return new d(He,rt,Xe-He,Z-rt)},ge=function(j,q,X,oe,de,ve,_e,je){var be,$e,He,Xe,rt,Z,Ze,Rt,Tt,We,wt,st,_t,xt,Wt=X-j,St=oe-q,Mt=de-X,Qt=ve-oe,Zt=_e-de,ft=je-ve;for($e=0;$e<41;$e++)Tt=(Ze=(He=j+(be=$e/40)*Wt)+be*((rt=X+be*Mt)-He))+be*(rt+be*(de+be*Zt-rt)-Ze),We=(Rt=(Xe=q+be*St)+be*((Z=oe+be*Qt)-Xe))+be*(Z+be*(ve+be*ft-Z)-Rt),$e==0?(wt=Tt,st=We,_t=Tt,xt=We):(wt=Math.min(wt,Tt),st=Math.min(st,We),_t=Math.max(_t,Tt),xt=Math.max(xt,We));return new d(Math.round(wt),Math.round(st),Math.round(_t-wt),Math.round(xt-st))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,q,X=(j=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:q}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Ot.API),(function(n){var e=function(u){var d,f,m,v,w,k,y,P,L,I;for(f=[],m=0,v=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;v>m;m+=4)(w=(u.charCodeAt(m)<<24)+(u.charCodeAt(m+1)<<16)+(u.charCodeAt(m+2)<<8)+u.charCodeAt(m+3))!==0?(k=(w=((w=((w=((w=(w-(I=w%85))/85)-(L=w%85))/85)-(P=w%85))/85)-(y=w%85))/85)%85,f.push(k+33,y+33,P+33,L+33,I+33)):f.push(122);return(function(A,G){for(var U=G;U>0;U--)A.pop()})(f,d.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var d,f,m,v,w,k=String,y="length",P=255,L="charCodeAt",I="slice",A="replace";for(u[I](-2),u=u[I](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),m=[],v=0,w=(u+=d="uuuuu"[I](u[y]%5||5))[y];w>v;v+=5)f=52200625*(u[L](v)-33)+614125*(u[L](v+1)-33)+7225*(u[L](v+2)-33)+85*(u[L](v+3)-33)+(u[L](v+4)-33),m.push(P&f>>24,P&f>>16,P&f>>8,P&f);return(function(G,U){for(var $=U;$>0;$--)G.pop()})(m,d[y]),k.fromCharCode.apply(k,m)},s=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var f="",m=0;m<u.length;m+=2)f+=String.fromCharCode("0x"+(u[m]+u[m+1]));return f},o=function(u){for(var d=new Uint8Array(u.length),f=u.length;f--;)d[f]=u.charCodeAt(f);return(d=Pf(d)).reduce(function(m,v){return m+String.fromCharCode(v)},"")};n.processDataByFilters=function(u,d){var f=0,m=u||"",v=[];for(typeof(d=d||[])=="string"&&(d=[d]),f=0;f<d.length;f+=1)switch(d[f]){case"ASCII85Decode":case"/ASCII85Decode":m=t(m),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=e(m),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=a(m),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=s(m),v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[f]+'" is not implemented')}return{data:m,reverseChain:v.reverse().join(" ")}}})(Ot.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(f,m,v){var w=new XMLHttpRequest,k=0,y=function(P){var L=P.length,I=[],A=String.fromCharCode;for(k=0;k<L;k+=1)I.push(A(255&P.charCodeAt(k)));return I.join("")};if(w.open("GET",f,!m),w.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(w.onload=function(){w.status===200?v(y(this.responseText)):v(void 0)}),w.send(null),m&&w.status===200)return y(w.responseText)})(a,o,u)}catch{}return d})(e,t,s)},n.loadImageFile=n.loadFile})(Ot.API),(function(n){function e(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):el(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):el(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var f=Pr(d);return f==="undefined"?"undefined":f==="string"||d instanceof String?"string":f==="number"||d instanceof Number?"number":f==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(d,f){var m=document.createElement(d);for(var v in f.className&&(m.className=f.className),f.innerHTML&&f.dompurify&&(m.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)m.style[v]=f.style[v];return m},o=function d(f,m){for(var v=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)m!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||v.appendChild(d(w,m));return f.nodeType===1&&(f.nodeName==="CANVAS"?(v.width=f.width,v.height=f.height,v.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(v.value=f.value),v.addEventListener("load",function(){v.scrollTop=f.scrollTop,v.scrollLeft=f.scrollLeft},!0)),v},u=function d(f){var m=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),v=d.convert(Promise.resolve(),m);return(v=v.setProgress(1,d,1,[d])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,f){return d.__proto__=f||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,f){return this.then(function(){switch(f=f||(function(m){switch(s(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),f){case"string":return this.then(t).then(function(m){return this.set({src:a("div",{innerHTML:d,dompurify:m})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,f(this.prop.container,m)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var m=this.opt.jsPDF,v=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,k=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete k.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=v,v)for(var y=0;y<v.length;++y){var P=v[y],L=P.src.find(function(I){return I.format==="truetype"});L&&m.addFont(L.url,P.ref.name,P.ref.style)}return k.windowHeight=k.windowHeight||0,k.windowHeight=k.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):k.windowHeight,m.context2d.save(!0),f(this.prop.container,k)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,f,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(d,f):this.outputPdf(d,f)},u.prototype.outputPdf=function(d,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,f)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(s(d)!=="object")return this;var f=Object.keys(d||{}).map(function(m){if(m in u.template.prop)return function(){this.prop[m]=d[m]};switch(m){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[m]=d[m]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(d,f){return this.then(function(){var m=d in u.template.prop?this.prop[d]:this.opt[d];return f?f(m):m})},u.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function f(m,v){return Math.floor(m*v/72*96)}return this.then(function(){(d=d||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:f(d.inner.width,d.k),height:f(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,f,m,v){return d!=null&&(this.progress.val=d),f!=null&&(this.progress.state=f),m!=null&&(this.progress.n=m),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,f,m,v){return this.setProgress(d?this.progress.val+d:null,f||null,m?this.progress.n+m:null,v?this.progress.stack.concat(v):null)},u.prototype.then=function(d,f){var m=this;return this.thenCore(d,f,function(v,w){return m.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(k){return m.updateProgress(null,v),k}).then(v,w).then(function(k){return m.updateProgress(1),k})})},u.prototype.thenCore=function(d,f,m){m=m||Promise.prototype.then;var v=this;d&&(d=d.bind(v)),f&&(f=f.bind(v));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?v:u.convert(Object.assign({},v),Promise.prototype),k=m.call(w,d,f);return u.convert(k,v.__proto__)},u.prototype.thenExternal=function(d,f){return Promise.prototype.then.call(this,d,f)},u.prototype.thenList=function(d){var f=this;return d.forEach(function(m){f=f.thenCore(m)}),f},u.prototype.catch=function(d){d&&(d=d.bind(this));var f=Promise.prototype.catch.call(this,d);return u.convert(f,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ot.getPageSize=function(d,f,m){if(Pr(d)==="object"){var v=d;d=v.orientation,f=v.unit||f,m=v.format||m}f=f||"mm",m=m||"a4",d=(""+(d||"P")).toLowerCase();var w,k=(""+m).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+f}var P,L=0,I=0;if(y.hasOwnProperty(k))L=y[k][1]/w,I=y[k][0]/w;else try{L=m[1],I=m[0]}catch{throw new Error("Invalid format: "+m)}if(d==="p"||d==="portrait")d="p",I>L&&(P=I,I=L,L=P);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",L>I&&(P=I,I=L,L=P)}return{width:I,height:L,unit:f,k:w,orientation:d}},n.html=function(d,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(sf):null;var m=new u(f);return f.worker?m:m.from(d).doCallback()}})(Ot.API),Ot.API.addJS=function(n){return Um=n,this.internal.events.subscribe("postPutResources",function(){xd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Mm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Um+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xd!==void 0&&Mm!==void 0&&this.internal.out("/Names <</JavaScript "+xd+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],d=s.exec(u);if(d!=null){var f=d[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,v=[];for(o=0;o<m;o++){var w=t.internal.newObject();v.push(w);var k=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+k.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<v.length;o++)t.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var m=0;m<s.children.length;m++)this.renderItems(s.children[m])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(Ot.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,d){var f,m=this.decode.DCT_DECODE,v=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(w){for(var k,y=256*w.charCodeAt(4)+w.charCodeAt(5),P=w.length,L={width:0,height:0,numcomponents:1},I=4;I<P;I+=2){if(I+=y,e.indexOf(w.charCodeAt(I+1))!==-1){k=256*w.charCodeAt(I+5)+w.charCodeAt(I+6),L={width:256*w.charCodeAt(I+7)+w.charCodeAt(I+8),height:k,numcomponents:w.charCodeAt(I+9)};break}y=256*w.charCodeAt(I+2)+w.charCodeAt(I+3)}return L})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}v={data:t,width:f.width,height:f.height,colorSpace:d,bitsPerComponent:8,filter:m,index:s,alias:a}}return v}})(Ot.API),Ot.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=Rb(n,{checkCrc:!0}),u=o.width,d=o.height,f=o.channels,m=o.palette,v=o.depth;a=m&&f===1?(function(re){for(var J=re.width,W=re.height,T=re.data,B=re.palette,ie=re.depth,M=!1,ee=[],fe=[],ae=void 0,F=!1,se=0,ge=0;ge<B.length;ge++){var K=$p(B[ge],4),j=K[0],q=K[1],X=K[2],oe=K[3];ee.push(j,q,X),oe!=null&&(oe===0?(se++,fe.length<1&&fe.push(ge)):oe<255&&(F=!0))}if(F||se>1){M=!0,fe=void 0;var de=J*W;ae=new Uint8Array(de);for(var ve=new DataView(T.buffer),_e=0;_e<de;_e++){var je=of(ve,_e,ie),be=$p(B[je],4)[3];ae[_e]=be}}else se===0&&(fe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:T,alphaBytes:ae,needSMask:M,palette:ee,mask:fe}})(o):f===2||f===4?(function(re){for(var J=re.data,W=re.width,T=re.height,B=re.channels,ie=re.depth,M=B===2?"DeviceGray":"DeviceRGB",ee=B-1,fe=W*T,ae=ee,F=fe*ae,se=1*fe,ge=Math.ceil(F*ie/8),K=Math.ceil(se*ie/8),j=new Uint8Array(ge),q=new Uint8Array(K),X=new DataView(J.buffer),oe=new DataView(j.buffer),de=new DataView(q.buffer),ve=!1,_e=0;_e<fe;_e++){for(var je=_e*B,be=0;be<ae;be++)Ym(oe,of(X,je+be,ie),_e*ae+be,ie);var $e=of(X,je+ae,ie);$e<(1<<ie)-1&&(ve=!0),Ym(de,$e,1*_e,ie)}return{colorSpace:M,colorsPerPixel:ee,sMaskBitsPerComponent:ve?ie:void 0,colorBytes:j,alphaBytes:q,needSMask:ve}})(o):(function(re){var J=re.data,W=re.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:W,colorsPerPixel:W==="DeviceGray"?1:3,colorBytes:J instanceof Uint16Array?(function(T){for(var B=T.length,ie=new Uint8Array(2*B),M=new DataView(ie.buffer,ie.byteOffset,ie.byteLength),ee=0;ee<B;ee++)M.setUint16(2*ee,T[ee],!1);return ie})(J):J,needSMask:!1}})(o);var w,k,y,P=a,L=P.colorSpace,I=P.colorsPerPixel,A=P.sMaskBitsPerComponent,G=P.colorBytes,U=P.alphaBytes,$=P.needSMask,le=P.palette,he=P.mask,H=null;return s!==Ot.API.image_compression.NONE&&typeof Pf=="function"?(H=(function(re){var J;switch(re){case Ot.API.image_compression.FAST:J=11;break;case Ot.API.image_compression.MEDIUM:J=13;break;case Ot.API.image_compression.SLOW:J=14;break;default:J=12}return J})(s),w=this.decode.FLATE_DECODE,k="/Predictor ".concat(H," /Colors ").concat(I," /BitsPerComponent ").concat(v," /Columns ").concat(u),n=$m(G,Math.ceil(u*I*v/8),I,v,s),$&&(y=$m(U,Math.ceil(u*A/8),1,A,s))):(w=void 0,k=void 0,n=G,$&&(y=U)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:n,index:e,filter:w,decodeParameters:k,transparency:he,palette:le,sMask:y,predictor:H,width:u,height:d,bitsPerComponent:v,sMaskBitsPerComponent:A,colorSpace:L}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new n5(e),u=o.width,d=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var m={data:f,width:u,height:d},v=new lf(100).encode(m,100);return n.processJPEG.call(this,v,t,s,a)},n.processGIF87A=n.processGIF89A})(Ot.API),ca.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ca.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Rr.log("bit decode error:"+t)}},ca.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var f=this.palette[o>>7-d&1];this.data[u+4*d]=f.blue,this.data[u+4*d+1]=f.green,this.data[u+4*d+2]=f.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ca.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,d=o>>4,f=15&o,m=this.palette[d];if(this.data[u]=m.blue,this.data[u+1]=m.green,this.data[u+2]=m.red,this.data[u+3]=255,2*a+1>=this.width)break;m=this.palette[f],this.data[u+4]=m.blue,this.data[u+4+1]=m.green,this.data[u+4+2]=m.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},ca.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ca.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,m=o>>15?255:0,v=s*this.width*4+4*a;this.data[v]=f,this.data[v+1]=d,this.data[v+2]=u,this.data[v+3]=m}this.pos+=n}},ca.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,m=(u>>11)/e*255|0,v=a*this.width*4+4*o;this.data[v]=m,this.data[v+1]=f,this.data[v+2]=d,this.data[v+3]=255}this.pos+=n}},ca.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},ca.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=u}},ca.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new ca(e,!1),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},m=new lf(100).encode(f,100);return n.processJPEG.call(this,m,t,s,a)}})(Ot.API),Jm.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Jm(e),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},m=new lf(100).encode(f,100);return n.processJPEG.call(this,m,t,s,a)}})(Ot.API),Ot.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),d=0,f=0,m=0;m<a;m+=4){var v=s[m],w=s[m+1],k=s[m+2],y=s[m+3];o[d++]=v,o[d++]=w,o[d++]=k,u[f++]=y}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:P,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ot.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nc=Ot.API,yd=Nc.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:a.metadata.Unicode.widths,f=d.fof?d.fof:1,m=e.kerning?e.kerning:a.metadata.Unicode.kerning,v=m.fof?m.fof:1,w=e.doKerning!==!1,k=0,y=n.length,P=0,L=d[0]||f,I=[];for(t=0;t<y;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?I.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(k=w&&Pr(m[s])==="object"&&!isNaN(parseInt(m[s][P],10))?m[s][P]/v:0,I.push((d[s]||L)/f+k)),P=s;return I},Bm=Nc.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Nc.processArabic&&(n=Nc.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:yd.apply(this,arguments).reduce(function(o,u){return o+u},0)},qm=function(n,e,t,s){for(var a=[],o=0,u=n.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;a.push(n.slice(0,o));var f=o;for(d=0;o!==u;)d+e[o]>s&&(a.push(n.slice(f,o)),d=0,f=o),d+=e[o],o++;return f!==o&&a.push(n.slice(f,o)),a},zm=function(n,e,t){t||(t={});var s,a,o,u,d,f,m,v=[],w=[v],k=t.textIndent||0,y=0,P=0,L=n.split(" "),I=yd.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?L[0].length+2:t.lineIndent||0){var A=Array(f).join(" "),G=[];L.map(function($){($=$.split(/\s*\n/)).length>1?G=G.concat($.map(function(le,he){return(he&&le.length?`
`:"")+le})):G.push($[0])}),L=G,f=Bm.apply(this,[A,t])}for(o=0,u=L.length;o<u;o++){var U=0;if(s=L[o],f&&s[0]==`
`&&(s=s.substr(1),U=1),k+y+(P=(a=yd.apply(this,[s,t])).reduce(function($,le){return $+le},0))>e||U){if(P>e){for(d=qm.apply(this,[s,a,e-(k+y),e]),v.push(d.shift()),v=[d.pop()];d.length;)w.push([d.shift()]);P=a.slice(s.length-(v[0]?v[0].length:0)).reduce(function($,le){return $+le},0)}else v=[s];w.push(v),k=P+f,y=I}else v.push(s),k+=y+P,y=I}return m=f?function($,le){return(le?A:"")+$.join(" ")}:function($){return $.join(" ")},w.map(m)},Nc.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var w=this.internal.getFont(v.fontName,v.fontStyle),k="Unicode";return w.metadata[k]?{widths:w.metadata[k].widths||{0:1},kerning:w.metadata[k].kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var d,f,m=[];for(d=0,f=s.length;d<f;d++)m=m.concat(zm.apply(this,[s[d],u,o]));return m},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(k){return"0x"+parseInt(k,10).toString(16)},d=n.__fontmetrics__.compress=function(k){var y,P,L,I,A=["{"];for(var G in k){if(y=k[G],isNaN(parseInt(G,10))?P="'"+G+"'":(G=parseInt(G,10),P=(P=u(G).slice(2)).slice(0,-1)+a[P.slice(-1)]),typeof y=="number")y<0?(L=u(y).slice(3),I="-"):(L=u(y).slice(2),I=""),L=I+L.slice(0,-1)+a[L.slice(-1)];else{if(Pr(y)!=="object")throw new Error("Don't know what to do with value type "+Pr(y)+".");L=d(y)}A.push(P+L)}return A.push("}"),A.join("")},f=n.__fontmetrics__.uncompress=function(k){if(typeof k!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,P,L,I,A={},G=1,U=A,$=[],le="",he="",H=k.length-1,re=1;re<H;re+=1)(I=k[re])=="'"?y?(L=y.join(""),y=void 0):y=[]:y?y.push(I):I=="{"?($.push([U,L]),U={},L=void 0):I=="}"?((P=$.pop())[0][P[1]]=U,L=void 0,U=P[0]):I=="-"?G=-1:L===void 0?s.hasOwnProperty(I)?(le+=s[I],L=parseInt(le,16)*G,G=1,le=""):le+=I:s.hasOwnProperty(I)?(he+=s[I],U[L]=parseInt(he,16)*G,G=1,L=void 0,he=""):he+=I;return A},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},w={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(k){var y=k.font,P=w.Unicode[y.postScriptName];P&&(y.metadata.Unicode={},y.metadata.Unicode.widths=P.widths,y.metadata.Unicode.kerning=P.kerning);var L=v.Unicode[y.postScriptName];L&&(y.metadata.Unicode.encoding=L,y.encoding=L.codePages[0])}])})(Ot.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(_d(d)),u.metadata=n.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(Ot),Ot.API.addSvgAsImage=function(n,e,t,s,a,o,u,d){if(isNaN(e)||isNaN(t))throw Rr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Rr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var m=f.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,f.width,f.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return(Kt.canvg?Promise.resolve(Kt.canvg):el(()=>import("./index.es-jUZL38My.js"),[])).catch(function(k){return Promise.reject(new Error("Could not load canvg: "+k))}).then(function(k){return k.default?k.default:k}).then(function(k){return k.fromString(m,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(v)}).then(function(){w.addImage(f.toDataURL("image/jpeg",1),e,t,s,a,u,d)})},Ot.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},Ot.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),f=[],m=0,v=0,w=0;function k(P,L){var I,A=!1;for(I=0;I<P.length;I+=1)P[I]===L&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var y=d.length;for(w=0;w<y;w+=1)t[d[w]].value=t[d[w]].defaultValue,t[d[w]].explicitSet=!1}if(Pr(n)==="object"){for(a in n)if(o=n[a],k(d,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&k(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(m=0;m<o.length;m+=1)if(s=!0,o[m].length===1&&typeof o[m][0]=="number")f.push(String(o[m]-1));else if(o[m].length>1){for(v=0;v<o[m].length;v+=1)typeof o[m][v]!="number"&&(s=!1);s===!0&&f.push([o[m][0]-1,o[m][1]-1].join(" "))}t[a].value="["+f.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,L=[];for(P in t)t[P].explicitSet===!0&&(t[P].type==="name"?L.push("/"+P+" /"+t[P].value):L.push("/"+P+" "+t[P].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+u.length+d.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+d+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ot.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var d,f=u.metadata.Unicode.widths,m=["","0","00","000","0000"],v=[""],w=0,k=o.length;w<k;++w){if(d=u.metadata.characterToGlyph(o.charCodeAt(w)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(w),f.indexOf(d)==-1&&(f.push(d),f.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return v.join("");d=d.toString(16),v.push(m[4-d.length],d)}return v.join("")},s=function(o){var u,d,f,m,v,w,k;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],w=0,k=(d=Object.keys(o).sort(function(y,P){return y-P})).length;w<k;w++)u=d[w],f.length>=100&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(m=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+m+">"));return f.length&&(v+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),v+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,m=u.newObject,v=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var w=d.metadata.Unicode.widths,k=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",P=0;P<k.length;P++)y+=String.fromCharCode(k[P]);var L=m();v({data:y,addLength1:!0,objectId:L}),f("endobj");var I=m();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:I}),f("endobj");var A=m();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Ac(d.fontName)),f("/FontFile2 "+L+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/Flags "+d.metadata.flags),f("/StemV "+d.metadata.stemV),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f(">>"),f("endobj");var G=m();f("<<"),f("/Type /Font"),f("/BaseFont /"+Ac(d.fontName)),f("/FontDescriptor "+A+" 0 R"),f("/W "+n.API.PDFObject.convert(w)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+d.encoding+")"),f(">>"),f(">>"),f("endobj"),d.objectNumber=m(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+I+" 0 R"),f("/BaseFont /"+Ac(d.fontName)),f("/Encoding /"+d.encoding),f("/DescendantFonts ["+G+" 0 R]"),f(">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,m=u.newObject,v=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var w=d.metadata.rawData,k="",y=0;y<w.length;y++)k+=String.fromCharCode(w[y]);var P=m();v({data:k,addLength1:!0,objectId:P}),f("endobj");var L=m();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:L}),f("endobj");var I=m();f("<<"),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f("/StemV "+d.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+P+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/FontName /"+Ac(d.fontName)),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f(">>"),f("endobj"),d.objectNumber=m();for(var A=0;A<d.metadata.hmtx.widths.length;A++)d.metadata.hmtx.widths[A]=parseInt(d.metadata.hmtx.widths[A]*(1e3/d.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+Ac(d.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,d=o.text||"",f=o.x,m=o.y,v=o.options||{},w=o.mutex||{},k=w.pdfEscape,y=w.activeFontKey,P=w.fonts,L=y,I="",A=0,G="",U=P[L].encoding;if(P[L].encoding!=="Identity-H")return{text:d,x:f,y:m,options:v,mutex:w};for(G=d,L=y,Array.isArray(d)&&(G=d[0]),A=0;A<G.length;A+=1)P[L].metadata.hasOwnProperty("cmap")&&(u=P[L].metadata.cmap.unicode.codeMap[G[A].charCodeAt(0)]),u||G[A].charCodeAt(0)<256&&P[L].metadata.hasOwnProperty("Unicode")?I+=G[A]:I+="";var $="";return parseInt(L.slice(1))<14||U==="WinAnsiEncoding"?$=k(I,L).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):U==="Identity-H"&&($=t(I,P[L])),w.isHex=!0,{text:$,x:f,y:m,options:v,mutex:w}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var m=0;for(m=0;m<u.length;m+=1)Array.isArray(u[m])&&u[m].length===3?d.push([a(Object.assign({},f,{text:u[m][0]})).text,u[m][1],u[m][2]]):d.push(a(Object.assign({},f,{text:u[m]})).text);o.text=d}else o.text=a(Object.assign({},f,{text:u})).text}])})(Ot),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ot.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,d,f,m,v,w=e,k=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),G=!1,U=0;this.__bidiEngine__={};var $=function(T){var B=T.charCodeAt(),ie=B>>8,M=L[ie];return M!==void 0?w[256*M+(255&B)]:ie===252||ie===253?"AL":A.test(ie)?"L":ie===8?"R":"N"},le=function(T){for(var B,ie=0;ie<T.length;ie++){if((B=$(T.charAt(ie)))==="L")return!1;if(B==="R")return!0}return!1},he=function(T,B,ie,M){var ee,fe,ae,F,se=B[M];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":G=!1;break;case"N":case"AN":break;case"EN":G&&(se="AN");break;case"AL":G=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":M<1||M+1>=B.length||(ee=ie[M-1])!=="EN"&&ee!=="AN"||(fe=B[M+1])!=="EN"&&fe!=="AN"?se="N":G&&(fe="AN"),se=fe===ee?fe:"N";break;case"ES":se=(ee=M>0?ie[M-1]:"B")==="EN"&&M+1<B.length&&B[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&ie[M-1]==="EN"){se="EN";break}if(G){se="N";break}for(ae=M+1,F=B.length;ae<F&&B[ae]==="ET";)ae++;se=ae<F&&B[ae]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(F=B.length,ae=M+1;ae<F&&B[ae]==="NSM";)ae++;if(ae<F){var ge=T[M],K=ge>=1425&&ge<=2303||ge===64286;if(ee=B[ae],K&&(ee==="R"||ee==="AL")){se="R";break}}}se=M<1||(ee=B[M-1])==="B"?"N":ie[M-1];break;case"B":G=!1,a=!0,se=U;break;case"S":o=!0,se="N"}return se},H=function(T,B,ie){var M=T.split("");return ie&&re(M,ie,{hiLevel:U}),M.reverse(),B&&B.reverse(),M.join("")},re=function(T,B,ie){var M,ee,fe,ae,F,se=-1,ge=T.length,K=0,j=[],q=U?y:k,X=[];for(G=!1,a=!1,o=!1,ee=0;ee<ge;ee++)X[ee]=$(T[ee]);for(fe=0;fe<ge;fe++){if(F=K,j[fe]=he(T,X,j,fe),M=240&(K=q[F][P[j[fe]]]),K&=15,B[fe]=ae=q[K][5],M>0)if(M===16){for(ee=se;ee<fe;ee++)B[ee]=1;se=-1}else se=-1;if(q[K][6])se===-1&&(se=fe);else if(se>-1){for(ee=se;ee<fe;ee++)B[ee]=ae;se=-1}X[fe]==="B"&&(B[fe]=0),ie.hiLevel|=ae}o&&(function(oe,de,ve){for(var _e=0;_e<ve;_e++)if(oe[_e]==="S"){de[_e]=U;for(var je=_e-1;je>=0&&oe[je]==="WS";je--)de[je]=U}})(X,B,ge)},J=function(T,B,ie,M,ee){if(!(ee.hiLevel<T)){if(T===1&&U===1&&!a)return B.reverse(),void(ie&&ie.reverse());for(var fe,ae,F,se,ge=B.length,K=0;K<ge;){if(M[K]>=T){for(F=K+1;F<ge&&M[F]>=T;)F++;for(se=K,ae=F-1;se<ae;se++,ae--)fe=B[se],B[se]=B[ae],B[ae]=fe,ie&&(fe=ie[se],ie[se]=ie[ae],ie[ae]=fe);K=F}K++}}},W=function(T,B,ie){var M=T.split(""),ee={hiLevel:U};return ie||(ie=[]),re(M,ie,ee),(function(fe,ae,F){if(F.hiLevel!==0&&v)for(var se,ge=0;ge<fe.length;ge++)ae[ge]===1&&(se=I.indexOf(fe[ge]))>=0&&(fe[ge]=I[se+1])})(M,ie,ee),J(2,M,B,ie,ee),J(1,M,B,ie,ee),M.join("")};return this.__bidiEngine__.doBidiReorder=function(T,B,ie){if((function(ee,fe){if(fe)for(var ae=0;ae<ee.length;ae++)fe[ae]=ae;d===void 0&&(d=le(ee)),m===void 0&&(m=le(ee))})(T,B),u||!f||m)if(u&&f&&d^m)U=d?1:0,T=H(T,B,ie);else if(!u&&f&&m)U=d?1:0,T=W(T,B,ie),T=H(T,B);else if(!u||d||f||m){if(u&&!f&&d^m)T=H(T,B),d?(U=0,T=W(T,B,ie)):(U=1,T=W(T,B,ie),T=H(T,B));else if(u&&d&&!f&&m)U=1,T=W(T,B,ie),T=H(T,B);else if(!u&&!f&&d^m){var M=v;d?(U=1,T=W(T,B,ie),U=0,v=!1,T=W(T,B,ie),v=M):(U=0,T=W(T,B,ie),T=H(T,B),U=1,v=!1,T=W(T,B,ie),v=M,T=H(T,B))}}else U=0,T=W(T,B,ie);else U=d?1:0,T=W(T,B,ie);return T},this.__bidiEngine__.setOptions=function(T){T&&(u=T.isInputVisual,f=T.isOutputVisual,d=T.isInputRtl,m=T.isOutputRtl,v=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(u=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?u.push([t.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):u.push([t.doBidiReorder(a[d])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(Ot),Ot.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new tl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new x5(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new s5(this.contents),this.head=new a5(this),this.name=new d5(this),this.cmap=new f1(this),this.toUnicode={},this.hhea=new o5(this),this.maxp=new h5(this),this.hmtx=new f5(this),this.post=new c5(this),this.os2=new l5(this),this.loca=new v5(this),this.glyf=new p5(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,f,m;for(m=[],u=0,d=(f=this.bbox).length;u<d;u++)e=f[u],m.push(Math.round(e*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var pa,tl=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,d,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*d+f},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),s5=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,d,f,m,v,w,k,y,P,L;for(L in y=Object.keys(t).length,f=Math.log(2),w=16*Math.floor(Math.log(y)/f),u=Math.floor(w/f),v=16*y-w,(a=new tl).writeInt(this.scalarType),a.writeShort(y),a.writeShort(w),a.writeShort(u),a.writeShort(v),o=16*y,m=a.pos+o,d=null,P=[],t)for(k=t[L],a.writeString(L),a.writeInt(n(k)),a.writeInt(m),a.writeInt(k.length),P=P.concat(k),L==="head"&&(d=m),m+=k.length;m%4;)P.push(0),m++;return a.write(P),s=2981146554-n(a.data),a.pos=d+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=p1.call(t);t.length%4;)t.push(0);for(o=new tl(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),i5={}.hasOwnProperty,za=function(n,e){for(var t in e)i5.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};pa=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var a5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new tl).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Xm=(function(){function n(e,t){var s,a,o,u,d,f,m,v,w,k,y,P,L,I,A,G,U;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),k=y/2,e.pos+=6,o=(function(){var $,le;for(le=[],f=$=0;0<=k?$<k:$>k;f=0<=k?++$:--$)le.push(e.readUInt16());return le})(),e.pos+=2,L=(function(){var $,le;for(le=[],f=$=0;0<=k?$<k:$>k;f=0<=k?++$:--$)le.push(e.readUInt16());return le})(),m=(function(){var $,le;for(le=[],f=$=0;0<=k?$<k:$>k;f=0<=k?++$:--$)le.push(e.readUInt16());return le})(),v=(function(){var $,le;for(le=[],f=$=0;0<=k?$<k:$>k;f=0<=k?++$:--$)le.push(e.readUInt16());return le})(),a=(this.length-e.pos+this.offset)/2,d=(function(){var $,le;for(le=[],f=$=0;0<=a?$<a:$>a;f=0<=a?++$:--$)le.push(e.readUInt16());return le})(),f=A=0,U=o.length;A<U;f=++A)for(I=o[f],s=G=P=L[f];P<=I?G<=I:G>=I;s=P<=I?++G:--G)v[f]===0?u=s+m[f]:(u=d[v[f]/2+(s-P)-(k-f)]||0)!==0&&(u+=m[f]),this.codeMap[s]=65535&u}e.pos=w}return n.encode=function(e,t){var s,a,o,u,d,f,m,v,w,k,y,P,L,I,A,G,U,$,le,he,H,re,J,W,T,B,ie,M,ee,fe,ae,F,se,ge,K,j,q,X,oe,de,ve,_e,je,be,$e,He;switch(M=new tl,u=Object.keys(e).sort(function(Xe,rt){return Xe-rt}),t){case"macroman":for(L=0,I=(function(){var Xe=[];for(P=0;P<256;++P)Xe.push(0);return Xe})(),G={0:0},o={},ee=0,se=u.length;ee<se;ee++)G[je=e[a=u[ee]]]==null&&(G[je]=++L),o[a]={old:e[a],new:G[e[a]]},I[a]=G[e[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(I),{charMap:o,subtable:M.data,maxGlyphID:L+1};case"unicode":for(B=[],w=[],U=0,G={},s={},A=m=null,fe=0,ge=u.length;fe<ge;fe++)G[le=e[a=u[fe]]]==null&&(G[le]=++U),s[a]={old:le,new:G[le]},d=G[le]-a,A!=null&&d===m||(A&&w.push(A),B.push(a),m=d),A=a;for(A&&w.push(A),w.push(65535),B.push(65535),W=2*(J=B.length),re=2*Math.pow(Math.log(J)/Math.LN2,2),k=Math.log(re/2)/Math.LN2,H=2*J-re,f=[],he=[],y=[],P=ae=0,K=B.length;ae<K;P=++ae){if(T=B[P],v=w[P],T===65535){f.push(0),he.push(0);break}if(T-(ie=s[T].new)>=32768)for(f.push(0),he.push(2*(y.length+J-P)),a=F=T;T<=v?F<=v:F>=v;a=T<=v?++F:--F)y.push(s[a].new);else f.push(ie-T),he.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*J+2*y.length),M.writeUInt16(0),M.writeUInt16(W),M.writeUInt16(re),M.writeUInt16(k),M.writeUInt16(H),ve=0,j=w.length;ve<j;ve++)a=w[ve],M.writeUInt16(a);for(M.writeUInt16(0),_e=0,q=B.length;_e<q;_e++)a=B[_e],M.writeUInt16(a);for(be=0,X=f.length;be<X;be++)d=f[be],M.writeUInt16(d);for($e=0,oe=he.length;$e<oe;$e++)$=he[$e],M.writeUInt16($);for(He=0,de=y.length;He<de;He++)L=y[He],M.writeUInt16(L);return{charMap:s,subtable:M.data,maxGlyphID:U+1}}},n})(),f1=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Xm(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Xm.encode(e,t),(a=new tl).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),o5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),l5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),c5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,d,f;for(f=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)f.push(e.readUInt32());return f}).call(this)}},n})(),u5=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},d5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,d,f,m,v,w,k;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(f={},o=v=0,w=s.length;v<w;o=++v)a=s[o],e.pos=a.offset,m=e.readString(a.length),u=new u5(m,a),f[k=a.nameID]==null&&(f[k]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},n})(),h5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),f5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,d,f;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var m,v;for(v=[],t=m=0;0<=a?m<a:m>a;t=0<=a?++m:--m)v.push(e.readInt16());return v})(),this.widths=(function(){var m,v,w,k;for(k=[],m=0,v=(w=this.metrics).length;m<v;m++)o=w[m],k.push(o.advance);return k}).call(this),s=this.widths[this.widths.length-1],f=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)f.push(this.widths.push(s));return f},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),p1=[].slice,p5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,d,f,m,v,w;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(d=new tl(t.read(a))).readShort(),m=d.readShort(),w=d.readShort(),f=d.readShort(),v=d.readShort(),this.cache[e]=u===-1?new g5(d,m,w,f,v):new m5(d,u,m,w,f,v),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,d,f;for(u=[],o=[],d=0,f=t.length;d<f;d++)a=e[t[d]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),m5=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),g5=(function(){function n(e,t,s,a,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new tl(p1.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),v5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return za(n,pa),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var d=this.offsets[u],f=this.offsets[u+1]-d;f>0&&(a+=f)}for(var m=new Array(4*s.length),v=0;v<s.length;++v)m[4*v+3]=255&s[v],m[4*v+2]=(65280&s[v])>>8,m[4*v+1]=(16711680&s[v])>>16,m[4*v]=(4278190080&s[v])>>24;return m},n})(),x5=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,d,f;for(a={},u=0,d=e.length;u<d;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))s=f[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,d,f,m,v,w,k,y,P,L,I,A;for(a in s=f1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},A=s.charMap)y[(f=A[a]).old]=f.new;for(P in k=s.maxGlyphID,u)P in y||(y[P]=k++);return v=(function(G){var U,$;for(U in $={},G)$[G[U]]=U;return $})(y),w=Object.keys(v).sort(function(G,U){return G-U}),L=(function(){var G,U,$;for($=[],G=0,U=w.length;G<U;G++)d=w[G],$.push(v[d]);return $})(),o=this.font.glyf.encode(u,L,y),m=this.font.loca.encode(o.offsets,L),I={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},n})();Ot.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var d,f,m;for(m=[],d=0,f=t.length;d<f;d++)s=t[d],m.push(e.convert(s));return m})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();function Qm(n){const e=new Date(n);return Number.isNaN(e.getTime())?new Date().toISOString().slice(0,10):e.toISOString().slice(0,10)}function y5(n){if(!n)return"N/A";const e=n.toLowerCase();return e==="dog"?"Dog":e==="cat"?"Cat":n}function m1(n){const e=parseFloat(String(n||"").replace(/[^0-9.\-]/g,""));return Number.isFinite(e)?e:0}function b5(n){return`$${m1(n).toFixed(2)}`}function w5(n){return`$${(Number.isFinite(n)?n:0).toFixed(2)}`}function _5(n,e){const t=new Ot({unit:"pt",format:"letter"}),s=56,a=556,o=a-s;let u=64;const d=he=>{t.setFont("helvetica","bold"),t.setFontSize(18),t.text(he,s,u),u+=18,t.setDrawColor(64),t.setLineWidth(1),t.line(s,u+10,a,u+10),u+=24},f=(he,H)=>{t.setFont("helvetica","bold"),t.setFontSize(11),t.text(he,s,u),t.setFont("helvetica","normal"),t.setFontSize(11),t.text(H||"",s+160,u),u+=18},m=he=>{t.setFont("helvetica","bold"),t.setFontSize(13),t.text(he,s,u),u+=14};d("Pet Insurance Claim Form"),m("Insurance Information"),f("Company",e?.insuranceCompany||"N/A"),f("Policy Number",e?.policyNumber||"N/A"),f("Invoice Number",n.invoiceNumber||"N/A"),u+=8,m("Pet Owner Information"),f("Owner Name",e?.ownerName||"N/A"),f("Phone",e?.ownerPhone||"N/A"),u+=8,m("Pet Information"),f("Pet Name",n.petName||e?.name||"N/A"),f("Species",y5(e?.species)),u+=8,m("Veterinary Clinic"),f("Clinic Name",n.clinicName||"N/A"),f("Clinic Address",n.clinicAddress||"N/A"),u+=8,m("Service Details"),f("Date of Service",n.dateOfService||Qm(new Date().toISOString())),f("Diagnosis / Reason",n.diagnosis||"N/A"),u+=8,m("Itemized Charges");const v=Math.floor(o*.7),w=s,k=a,y=14;t.setFont("helvetica","bold"),t.text("Description",w,u),t.text("Amount",k,u,{align:"right"}),u+=14,t.setDrawColor(200),t.line(s,u,a,u),u+=10,n.lineItems.forEach(he=>{const H=he.description||"",re=b5(he.amount);t.setFont("helvetica","normal"),t.setFontSize(11);const J=t.splitTextToSize(H,v);t.setFont("courier","normal"),t.text(re,k,u,{align:"right"}),t.setFont("helvetica","normal"),J.forEach((W,T)=>{t.text(W,w,u+T*y)}),u+=Math.max(y,J.length*y),u+=2}),n.lineItems.length===0&&(t.setFont("helvetica","normal"),t.text("No items",w,u),u+=16),u+=6,t.setDrawColor(64),t.line(s,u,a,u),u+=14,t.setFont("helvetica","bold"),t.text("Total",w,u),t.setFont("courier","bold"),t.text(w5(m1(n.totalAmount)),k,u,{align:"right"}),u+=24,t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(120);const P=742;t.setTextColor(40),t.setFont("helvetica","bold"),t.text("Filing Deadline Reminder",s,P),t.setFont("helvetica","normal"),t.setTextColor(80),t.setFontSize(9);const I=t.splitTextToSize("Most pet insurance requires claims to be filed within 60180 days of service. This is a general reminder only. Always verify your specific deadline with your insurance provider.",a-s);t.text(I,s,P+14),t.setTextColor(120),t.text("Generated by Pet Claim Helper - petclaimhelper.com",s,760);const A=Qm(n.dateOfService||new Date().toISOString()),G=(n.petName||e?.name||"Pet").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),U=(e?.insuranceCompany||"Insurance").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),$=`${G}_${U}_claim_${A}.pdf`,le=new Blob([t.output("arraybuffer")],{type:"application/pdf"});return{filename:$,blob:le}}function N5(n,e){const t={clinicName:n.clinicName,clinicAddress:n.clinicAddress,petName:n.petName,dateOfService:n.dateOfService,totalAmount:n.subtotal,diagnosis:n.diagnosis,lineItems:n.lineItems,invoiceNumber:n.invoiceNumber};return _5(t,e)}function g1({open:n,onClose:e,onSaved:t,userId:s,pets:a,defaultPetId:o,medicationId:u,editMode:d=!1}){const[f,m]=ue.useState(""),[v,w]=ue.useState(""),[k,y]=ue.useState(""),[P,L]=ue.useState("1x daily"),[I,A]=ue.useState(["07:00"]),[G,U]=ue.useState("7"),[$,le]=ue.useState(7),[he,H]=ue.useState(!1),[re,J]=ue.useState(null),[W,T]=ue.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),B=ue.useRef(!1);ue.useEffect(()=>{if(n&&!B.current){d&&u?(H(!0),ct.from("medications").select("*").eq("id",u).single().then(({data:ae,error:F})=>{if(F||!ae){J("Failed to load medication data"),H(!1);return}if(m(ae.pet_id||""),w(ae.medication_name||""),y(ae.dosage||""),L(ae.frequency||"1x daily"),A(Array.isArray(ae.reminder_times)&&ae.reminder_times.length>0?ae.reminder_times:["07:00"]),ae.start_date&&ae.end_date){const se=new Date(ae.start_date),ge=new Date(ae.end_date),K=Math.round((ge.getTime()-se.getTime())/(1e3*60*60*24))+1;[7,10,14,30].includes(K)?U(String(K)):(U("custom"),le(K))}H(!1),J(null)}).catch(()=>{J("Failed to load medication"),H(!1)})):(m(o||(a[0]?.id??"")),w(""),y(""),L("1x daily"),A(["07:00"]),U("7"),le(7),H(!1),J(null));try{console.log("[AddMedicationForm] Form opened. Initial timezone (from Intl):",W)}catch{}s&&ct.from("profiles").select("timezone").eq("id",s).single().then(({data:ae})=>{const F=ae&&ae.timezone?String(ae.timezone):"";try{console.log("[AddMedicationForm] Profile timezone loaded:",F||"(empty)")}catch{}F&&T(F)}).catch(()=>{})}B.current=n},[n,o,a,s,W,d,u]),ue.useEffect(()=>{if(!n)return;const ae=document.body.style.overflow;document.body.style.overflow="hidden";const F=se=>{se.key==="Escape"&&e()};return window.addEventListener("keydown",F),()=>{document.body.style.overflow=ae,window.removeEventListener("keydown",F)}},[n,e]),ue.useEffect(()=>{P==="1x daily"&&A(["07:00"]),P==="2x daily"&&A(["07:00","19:00"]),P==="3x daily"&&A(["08:00","14:00","20:00"])},[P]);const ie=ue.useMemo(()=>P==="1x daily"?1:P==="2x daily"?2:3,[P]),M=(ae,F)=>{const se=(F||"").slice(0,5),ge=[...I];ge[ae]=se,A(ge)},ee=()=>{const ae=new Date,F=ae.getFullYear(),se=String(ae.getMonth()+1).padStart(2,"0"),ge=String(ae.getDate()).padStart(2,"0"),K=`${F}-${se}-${ge}`;let j=G==="custom"?Math.max(1,Number($||1)):Number(G);(!Number.isFinite(j)||j<1)&&(j=1);const q=new Date(ae.getTime());q.setDate(q.getDate()+(j-1));const X=q.getFullYear(),oe=String(q.getMonth()+1).padStart(2,"0"),de=String(q.getDate()).padStart(2,"0"),ve=`${X}-${oe}-${de}`;return{start:K,end:ve}},fe=async ae=>{if(ae.preventDefault(),!s){J("You must be logged in.");return}if(!f){J("Please select a pet.");return}if(!v.trim()){J("Enter medication name.");return}if(I.some(F=>!/^\d{2}:\d{2}$/.test(F))){J("Please select valid reminder times.");return}if(I.length!==ie){J("Reminder times do not match selected frequency.");return}H(!0),J(null);try{const{start:F,end:se}=ee(),ge=W||Intl.DateTimeFormat().resolvedOptions().timeZone;try{console.log("[AddMedicationForm] Submitting. Detected timezone:",ge),console.log("[AddMedicationForm] Times selected (will store as PST, no UTC conversion):",I)}catch{}const K=I.filter(Boolean);try{console.log("[AddMedicationForm] Times to store in PST:",K)}catch{}if(d&&u){const j={medication_name:v.trim(),dosage:k.trim()||null,frequency:P,reminder_times:K,end_date:se},{error:q}=await ct.from("medications").update(j).eq("id",u).eq("user_id",s);if(q)throw q;t&&t(u)}else{const j={user_id:s,pet_id:f,claim_id:null,medication_name:v.trim(),dosage:k.trim()||null,frequency:P,reminder_times:K,start_date:F,end_date:se};try{console.log("[AddMedicationForm] Payload.reminder_times (storing in PST):",j.reminder_times)}catch{}const{data:q,error:X}=await ct.from("medications").insert(j).select("id").single();try{console.log("[AddMedicationForm] Supabase insert completed. Error:",X||null)}catch{}if(X)throw X;const oe=q?.id;t&&t(oe)}e()}catch(F){J(F?.message||"Failed to save medication")}finally{H(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:ae=>ae.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:d?"Edit Medication":"Add Medication"}),l.jsx("button",{type:"button",className:"text-sm",onClick:e,children:"Close"})]}),re&&l.jsx("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:re}),l.jsxs("form",{className:"mt-4 space-y-4",onSubmit:fe,children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet",d&&l.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(cannot be changed)"})]}),l.jsxs("select",{value:f,onChange:ae=>m(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",disabled:d,children:[l.jsx("option",{value:"",children:" Select "}),a.map(ae=>l.jsxs("option",{value:ae.id,children:[ae.name," (",ae.species,")"]},ae.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Medication name"}),l.jsx("input",{value:v,onChange:ae=>w(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"Amoxicillin"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Dosage"}),l.jsx("input",{value:k,onChange:ae=>y(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"1 pill"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Frequency"}),l.jsxs("select",{value:P,onChange:ae=>L(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{children:"1x daily"}),l.jsx("option",{children:"2x daily"}),l.jsx("option",{children:"3x daily"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Duration"}),l.jsxs("select",{value:G,onChange:ae=>U(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"10",children:"10 days"}),l.jsx("option",{value:"14",children:"14 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"custom",children:"Custom"})]})]})]}),G==="custom"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Custom days"}),l.jsx("input",{type:"number",min:1,value:$,onChange:ae=>le(Number(ae.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Reminder times"}),l.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:Array.from({length:ie}).map((ae,F)=>l.jsx("input",{type:"time",value:I[F]||"",onChange:se=>M(F,se.target.value),className:"w-full min-w-[140px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"},F))})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",onClick:e,className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:he,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:he?"Saving":d?"Update Medication":"Save Medication"})]})]})]})}):null}function k5(n){const e=n.replace(/\D/g,"");return e.length!==10?n:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}function Rd(n){const e=n.replace(/\D/g,"");return e.length!==10?"":`+1${e}`}function Kf(n,e=""){const s=n.replace(/\D/g,"").slice(0,10);return s.length===0?"":s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`}const Dc=[{display:" Select ",value:""},{display:"Not Insured",value:""},{display:"Trupanion (90 days)",value:"Trupanion",deadlineDays:90},{display:"Nationwide (365 days)",value:"Nationwide",deadlineDays:365},{display:"Healthy Paws (90 days)",value:"Healthy Paws",deadlineDays:90},{display:"Pumpkin (270 days)",value:"Pumpkin",deadlineDays:270},{display:"Spot (270 days)",value:"Spot",deadlineDays:270},{display:"Pets Best (90 days)",value:"Pets Best",deadlineDays:90}];function Il(n){const e=Dc.find(t=>t.display===n);return e?e.value:n===" Select "||n==="Not Insured"?"":n.replace(/\s*\(\d+\s*days?\).*$/i,"").trim()}function S5(n){if(!n||n==="")return"Not Insured";const e=Dc.find(t=>t.value===n);return e?e.display:n}function Rf(){return Rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Rf.apply(null,arguments)}function j5(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)!==-1)continue;t[s]=n[s]}return t}function A5(n,e){if(n==null)return{};var t,s,a=j5(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)t=o[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}function P5(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function C5(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ff(n,e){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Ff(n,e)}function E5(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ff(n,e)}function Fd(n){return Fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fd(n)}function v1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v1=function(){return!!n})()}function L5(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function T5(n,e){if(e&&(Pr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L5(n)}function I5(n){var e=v1();return function(){var t,s=Fd(n);if(e){var a=Fd(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return T5(this,t)}}var cf={exports:{}},uf,Zm;function O5(){if(Zm)return uf;Zm=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return uf=n,uf}var df,eg;function D5(){if(eg)return df;eg=1;var n=O5();function e(){}function t(){}return t.resetWarningCache=e,df=function(){function s(u,d,f,m,v,w){if(w!==n){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}s.isRequired=s;function a(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},df}var tg;function R5(){return tg||(tg=1,cf.exports=D5()()),cf.exports}var F5=R5();const vi=_u(F5);function Ml(n,e,t){this.x=n,this.y=e,this.time=t||new Date().getTime()}Ml.prototype.velocityFrom=function(n){return this.time!==n.time?this.distanceTo(n)/(this.time-n.time):1};Ml.prototype.distanceTo=function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))};Ml.prototype.equals=function(n){return this.x===n.x&&this.y===n.y&&this.time===n.time};function Jf(n,e,t,s){this.startPoint=n,this.control1=e,this.control2=t,this.endPoint=s}Jf.prototype.length=function(){for(var n=10,e=0,t=void 0,s=void 0,a=0;a<=n;a+=1){var o=a/n,u=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var f=u-t,m=d-s;e+=Math.sqrt(f*f+m*m)}t=u,s=d}return e};Jf.prototype._point=function(n,e,t,s,a){return e*(1-n)*(1-n)*(1-n)+3*t*(1-n)*(1-n)*n+3*s*(1-n)*n*n+a*n*n*n};function M5(n,e,t){var s,a,o,u=null,d=0;t||(t={});var f=function(){d=t.leading===!1?0:Date.now(),u=null,o=n.apply(s,a),u||(s=a=null)};return function(){var m=Date.now();!d&&t.leading===!1&&(d=m);var v=e-(m-d);return s=this,a=arguments,v<=0||v>e?(u&&(clearTimeout(u),u=null),d=m,o=n.apply(s,a),u||(s=a=null)):!u&&t.trailing!==!1&&(u=setTimeout(f,v)),o}}function Fr(n,e){var t=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=M5(Fr.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Fr.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=n,this._ctx=n.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(t._mouseButtonDown=!0,t._strokeBegin(a))},this._handleMouseMove=function(a){t._mouseButtonDown&&t._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var o=a.changedTouches[0];t._strokeBegin(o)}},this._handleTouchMove=function(a){a.preventDefault();var o=a.targetTouches[0];t._strokeMoveUpdate(o)},this._handleTouchEnd=function(a){var o=a.target===t._canvas;o&&(a.preventDefault(),t._strokeEnd(a))},this.on()}Fr.prototype.clear=function(){var n=this._ctx,e=this._canvas;n.fillStyle=this.backgroundColor,n.clearRect(0,0,e.width,e.height),n.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Fr.prototype.fromDataURL=function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=t.ratio||window.devicePixelRatio||1,o=t.width||this._canvas.width/a,u=t.height||this._canvas.height/a;this._reset(),s.src=n,s.onload=function(){e._ctx.drawImage(s,0,0,o,u)},this._isEmpty=!1};Fr.prototype.toDataURL=function(n){var e;switch(n){case"image/svg+xml":return this._toSVG();default:for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[n].concat(s))}};Fr.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Fr.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Fr.prototype.isEmpty=function(){return this._isEmpty};Fr.prototype._strokeBegin=function(n){this._data.push([]),this._reset(),this._strokeUpdate(n),typeof this.onBegin=="function"&&this.onBegin(n)};Fr.prototype._strokeUpdate=function(n){var e=n.clientX,t=n.clientY,s=this._createPoint(e,t),a=this._data[this._data.length-1],o=a&&a[a.length-1],u=o&&s.distanceTo(o)<this.minDistance;if(!(o&&u)){var d=this._addPoint(s),f=d.curve,m=d.widths;f&&m&&this._drawCurve(f,m.start,m.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};Fr.prototype._strokeEnd=function(n){var e=this.points.length>2,t=this.points[0];if(!e&&t&&this._drawDot(t),t){var s=this._data[this._data.length-1],a=s[s.length-1];t.equals(a)||s.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(n)};Fr.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Fr.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Fr.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Fr.prototype._createPoint=function(n,e,t){var s=this._canvas.getBoundingClientRect();return new Ml(n-s.left,e-s.top,t||new Date().getTime())};Fr.prototype._addPoint=function(n){var e=this.points,t=void 0;if(e.push(n),e.length>2){e.length===3&&e.unshift(e[0]),t=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=t.c2;t=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=t.c1,o=new Jf(e[1],s,a,e[2]),u=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:u}}return{}};Fr.prototype._calculateCurveControlPoints=function(n,e,t){var s=n.x-e.x,a=n.y-e.y,o=e.x-t.x,u=e.y-t.y,d={x:(n.x+e.x)/2,y:(n.y+e.y)/2},f={x:(e.x+t.x)/2,y:(e.y+t.y)/2},m=Math.sqrt(s*s+a*a),v=Math.sqrt(o*o+u*u),w=d.x-f.x,k=d.y-f.y,y=v/(m+v),P={x:f.x+w*y,y:f.y+k*y},L=e.x-P.x,I=e.y-P.y;return{c1:new Ml(d.x+L,d.y+I),c2:new Ml(f.x+L,f.y+I)}};Fr.prototype._calculateCurveWidths=function(n){var e=n.startPoint,t=n.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(a);return s.start=this._lastWidth,s.end=o,this._lastVelocity=a,this._lastWidth=o,s};Fr.prototype._strokeWidth=function(n){return Math.max(this.maxWidth/(n+1),this.minWidth)};Fr.prototype._drawPoint=function(n,e,t){var s=this._ctx;s.moveTo(n,e),s.arc(n,e,t,0,2*Math.PI,!1),this._isEmpty=!1};Fr.prototype._drawCurve=function(n,e,t){var s=this._ctx,a=t-e,o=Math.floor(n.length());s.beginPath();for(var u=0;u<o;u+=1){var d=u/o,f=d*d,m=f*d,v=1-d,w=v*v,k=w*v,y=k*n.startPoint.x;y+=3*w*d*n.control1.x,y+=3*v*f*n.control2.x,y+=m*n.endPoint.x;var P=k*n.startPoint.y;P+=3*w*d*n.control1.y,P+=3*v*f*n.control2.y,P+=m*n.endPoint.y;var L=e+m*a;this._drawPoint(y,P,L)}s.closePath(),s.fill()};Fr.prototype._drawDot=function(n){var e=this._ctx,t=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(n.x,n.y,t),e.closePath(),e.fill()};Fr.prototype._fromData=function(n,e,t){for(var s=0;s<n.length;s+=1){var a=n[s];if(a.length>1)for(var o=0;o<a.length;o+=1){var u=a[o],d=new Ml(u.x,u.y,u.time),f=u.color;if(o===0)this.penColor=f,this._reset(),this._addPoint(d);else if(o!==a.length-1){var m=this._addPoint(d),v=m.curve,w=m.widths;v&&w&&e(v,w,f)}}else{this._reset();var k=a[0];t(k)}}};Fr.prototype._toSVG=function(){var n=this,e=this._data,t=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,o=0,u=t.width/s,d=t.height/s,f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"width",t.width),f.setAttributeNS(null,"height",t.height),this._fromData(e,function(A,G,U){var $=document.createElement("path");if(!isNaN(A.control1.x)&&!isNaN(A.control1.y)&&!isNaN(A.control2.x)&&!isNaN(A.control2.y)){var le="M "+A.startPoint.x.toFixed(3)+","+A.startPoint.y.toFixed(3)+" "+("C "+A.control1.x.toFixed(3)+","+A.control1.y.toFixed(3)+" ")+(A.control2.x.toFixed(3)+","+A.control2.y.toFixed(3)+" ")+(A.endPoint.x.toFixed(3)+","+A.endPoint.y.toFixed(3));$.setAttribute("d",le),$.setAttribute("stroke-width",(G.end*2.25).toFixed(3)),$.setAttribute("stroke",U),$.setAttribute("fill","none"),$.setAttribute("stroke-linecap","round"),f.appendChild($)}},function(A){var G=document.createElement("circle"),U=typeof n.dotSize=="function"?n.dotSize():n.dotSize;G.setAttribute("r",U),G.setAttribute("cx",A.x),G.setAttribute("cy",A.y),G.setAttribute("fill",A.color),f.appendChild(G)});var m="data:image/svg+xml;base64,",v='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+o+" "+u+" "+d+'"')+(' width="'+u+'"')+(' height="'+d+'"')+">",w=f.innerHTML;if(w===void 0){var k=document.createElement("dummy"),y=f.childNodes;k.innerHTML="";for(var P=0;P<y.length;P+=1)k.appendChild(y[P].cloneNode(!0));w=k.innerHTML}var L="</svg>",I=v+w+L;return m+btoa(I)};Fr.prototype.fromData=function(n){var e=this;this.clear(),this._fromData(n,function(t,s){return e._drawCurve(t,s.start,s.end)},function(t){return e._drawDot(t)}),this._data=n};Fr.prototype.toData=function(){return this._data};var Ad={exports:{}},U5=Ad.exports,rg;function B5(){return rg||(rg=1,(function(n,e){(function(t,s){n.exports=s()})(U5,function(){return(function(t){function s(o){if(a[o])return a[o].exports;var u=a[o]={exports:{},id:o,loaded:!1};return t[o].call(u.exports,u,u.exports,s),u.loaded=!0,u.exports}var a={};return s.m=t,s.c=a,s.p="",s(0)})([function(t,s){function a(m){var v=m.getContext("2d"),w=m.width,k=m.height,y=v.getImageData(0,0,w,k).data,P=d(!0,w,k,y),L=d(!1,w,k,y),I=f(!0,w,k,y),A=f(!1,w,k,y),G=A-I+1,U=L-P+1,$=v.getImageData(I,P,G,U);return m.width=G,m.height=U,v.clearRect(0,0,G,U),v.putImageData($,0,0),m}function o(m,v,w,k){return{red:k[4*(w*v+m)],green:k[4*(w*v+m)+1],blue:k[4*(w*v+m)+2],alpha:k[4*(w*v+m)+3]}}function u(m,v,w,k){return o(m,v,w,k).alpha}function d(m,v,w,k){for(var y=m?1:-1,P=m?0:w-1,L=P;m?L<w:L>-1;L+=y)for(var I=0;I<v;I++)if(u(I,L,v,k))return L;return null}function f(m,v,w,k){for(var y=m?1:-1,P=m?0:v-1,L=P;m?L<v:L>-1;L+=y)for(var I=0;I<w;I++)if(u(L,I,v,k))return L;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Ad)),Ad.exports}var q5=B5();const z5=_u(q5);var $5=["canvasProps","clearOnResize"],Su=(function(n){E5(t,n);var e=I5(t);function t(){var s;C5(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=e.call.apply(e,[this].concat(o)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(d){s._canvas=d,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var d=s.props;d.canvasProps,d.clearOnResize;var f=A5(d,$5);return f},s.componentDidMount=function(){var d=s.getCanvas();s._sigPad=new Fr(d,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var d=s.getCanvas(),f=document.createElement("canvas");return f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0),z5(f)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var d,f,m=(d=s.props.canvasProps)!==null&&d!==void 0?d:{},v=m.width,w=m.height;if(!(typeof v<"u"&&typeof w<"u")){var k=s.getCanvas(),y=Math.max((f=window.devicePixelRatio)!==null&&f!==void 0?f:1,1);typeof v>"u"&&(k.width=k.offsetWidth*y),typeof w>"u"&&(k.height=k.offsetHeight*y),k.getContext("2d").scale(y,y),s.clear()}},s.render=function(){var d=s.props.canvasProps;return Uf.createElement("canvas",Rf({ref:s.setRef},d))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(d,f){return s.getSignaturePad().fromDataURL(d,f)},s.toDataURL=function(d,f){return s.getSignaturePad().toDataURL(d,f)},s.fromData=function(d){return s.getSignaturePad().fromData(d)},s.toData=function(){return s.getSignaturePad().toData()},s}return P5(t)})(ue.Component);Su.propTypes={velocityFilterWeight:vi.number,minWidth:vi.number,maxWidth:vi.number,minDistance:vi.number,dotSize:vi.oneOfType([vi.number,vi.func]),penColor:vi.string,throttle:vi.number,onEnd:vi.func,onBegin:vi.func,canvasProps:vi.object,clearOnResize:vi.bool};Su.defaultProps={clearOnResize:!0};Su.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function x1({userId:n,initialSignature:e,onSave:t}){const s=ue.useRef(null),[a,o]=ue.useState(e||null),[u,d]=ue.useState(!1),[f,m]=ue.useState(null),[v,w]=ue.useState(!1);ue.useEffect(()=>{e&&o(e)},[e]);const k=()=>{s.current?.clear(),w(!1),m(null)},y=async()=>{if(!s.current||s.current.isEmpty()){m({type:"error",text:"Please draw your signature first"});return}d(!0),m(null);try{const I=s.current.toDataURL("image/png"),{error:A}=await ct.from("profiles").update({signature:I}).eq("id",n);if(A)throw A;o(I),m({type:"success",text:"Signature saved successfully!"}),t&&t(I),setTimeout(()=>m(null),3e3)}catch(I){console.error("Error saving signature:",I),m({type:"error",text:"Failed to save signature. Please try again."})}finally{d(!1)}},P=()=>{o(null),w(!1),setTimeout(()=>{s.current?.clear()},0)},L=()=>{w(!0),m(null)};return l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Signature"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will be used on your insurance claim forms"})]}),a?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-green-800",children:"Signature Saved"}),l.jsx("button",{onClick:P,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),l.jsx("div",{className:"bg-white rounded border border-green-300 p-4",children:l.jsx("img",{src:a,alt:"Your signature",className:"max-w-full h-auto",style:{maxHeight:"120px"}})})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[!v&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-gray-400 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Su,{ref:s,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(249, 250, 251)",penColor:"rgb(0, 0, 0)",onBegin:L})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:k,disabled:!v||u,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear"}),l.jsx("button",{onClick:y,disabled:!v||u,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:u?"Saving...":"Save Signature"})]}),f&&l.jsx("div",{className:`p-3 rounded-lg text-sm ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:f.text})]}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-800",children:[l.jsx("strong",{children:"Note:"})," Your signature will be included on all insurance claim submissions. Make sure it matches the signature on file with your insurance company."]})})]})}function W5({open:n,onClose:e,userId:t,userEmail:s}){const a=s==="larry@uglydogadventures.com",[o,u]=ue.useState(1),[d,f]=ue.useState(!1),[m,v]=ue.useState(null),[w,k]=ue.useState(""),[y,P]=ue.useState(""),[L,I]=ue.useState(""),[A,G]=ue.useState(""),[U,$]=ue.useState(""),[le,he]=ue.useState(null),[H,re]=ue.useState(""),[J,W]=ue.useState(""),[T,B]=ue.useState("Not Insured"),[ie,M]=ue.useState(""),[ee,fe]=ue.useState(""),[ae,F]=ue.useState(""),[se,ge]=ue.useState(""),[K,j]=ue.useState(""),[q,X]=ue.useState(""),[oe,de]=ue.useState(""),[ve,_e]=ue.useState(!1),[je,be]=ue.useState(""),[$e,He]=ue.useState(!1),[Xe,rt]=ue.useState(""),[Z,Ze]=ue.useState(""),[Rt,Tt]=ue.useState(""),[We,wt]=ue.useState("Not Insured"),[st,_t]=ue.useState(""),[xt,Wt]=ue.useState(""),[St,Mt]=ue.useState("");ue.useEffect(()=>{n&&(u(1),f(!1),v(null),k(""),P(""),I(""),G(""),$(""),he(null),re(""),W(""),B("Not Insured"),M(""),fe(""),F(""),ge(""),j(""),X(""),de(""),_e(!1),be(""),He(!1),rt(""),Ze(""),Tt(""),wt("Not Insured"),_t(""),Wt(""),Mt(""))},[n]);const Qt=ue.useMemo(()=>w.trim().length>0&&y.trim().length>0&&L.trim().length>0&&A.trim().length>0&&U.trim().length>0,[w,y,L,A,U]),Zt=ue.useMemo(()=>!!le,[le]),ft=ue.useMemo(()=>H.trim().length>0&&!!J,[H,J]),Nt=ue.useMemo(()=>ve?je.trim().length>0&&$e:!0,[ve,je,$e]),ut=ue.useMemo(()=>Xe.trim().length>0&&Z.trim().length>0&&!!Rt&&We.length>0,[Xe,Z,Rt,We]);ue.useEffect(()=>{if(!n)return;const Me=document.body.style.overflow;document.body.style.overflow="hidden";const jt=ot=>{ot.key==="Escape"&&o!==5&&e()};return window.addEventListener("keydown",jt),()=>{document.body.style.overflow=Me,window.removeEventListener("keydown",jt)}},[n,o,e]);const _r=async()=>{f(!0),v(null);try{const Me={id:t,full_name:Xe.trim(),onboarding_complete:!0},{error:jt}=await ct.from("profiles").upsert(Me,{onConflict:"id"}).select();if(jt)throw jt;let ot=null;if(xt&&St){const Pt=String(xt).padStart(2,"0");ot=`${St}-${Pt}-01`}const cr=Il(We),Et={user_id:t,name:Z.trim(),species:Rt||"other",insurance_company:cr||null,monthly_premium:st===""?null:parseFloat(st),coverage_start_date:ot};await Fp(Et),e()}catch(Me){v(Me?.message||"Failed to save your info. Please try again.")}finally{f(!1)}},Jt=async()=>{f(!0),v(null);try{let Me=null;if(q){const Pt=new Date(q);if(Number.isNaN(Pt.getTime()))throw new Error("Please select a valid Coverage Start Date.");Me=Pt.toISOString().slice(0,10)}const jt={full_name:w.trim(),onboarding_complete:!0};if(ve&&je.trim()){const Pt=Rd(je);Pt&&(jt.phone=Pt,jt.sms_opt_in=!0)}y.trim()&&(jt.address=y.trim()),L.trim()&&(jt.city=L.trim()),A.trim()&&(jt.state=A.trim()),U.trim()&&(jt.zip=U.trim()),le&&(jt.signature=le),jt.id=t;const{error:ot}=await ct.from("profiles").upsert(jt,{onConflict:"id"}).select();if(ot)throw ot;if(ve&&je.trim()&&$e){const Pt=Rd(je);if(Pt){let ur=null;try{ur=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}const{error:$t}=await ct.from("sms_consent").insert({user_id:t,phone_number:Pt,consented:!0,consent_text:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support.",ip_address:ur});$t&&console.error("[OnboardingModal] Failed to save SMS consent:",$t)}}const cr=Il(T),Et={user_id:t,name:H.trim(),species:J||"other",insurance_company:cr||null,healthy_paws_pet_id:ie.trim()||null,spot_account_number:ee.trim()||null,policy_number:ae.trim()||null,monthly_premium:se===""?null:parseFloat(se),deductible_per_claim:K===""?null:parseFloat(K),coverage_start_date:Me,insurance_pays_percentage:oe===""?null:Math.max(50,Math.min(100,Number(oe)))/100};await Fp(Et),u(5)}catch(Me){v(Me?.message||"Failed to save your info. Please try again.")}finally{f(!1)}};if(!n)return null;const Gt=o===1?"Step 1 of 4":o===2?"Step 2 of 4":o===3?"Step 3 of 4":o===4?"Step 4 of 4":"";return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-6 shadow-2xl max-h-[calc(100vh-40px)] overflow-y-auto",onClick:Me=>Me.stopPropagation(),children:[m&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:m}),a?l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Pet Claim Helper! "}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Quick setup - then we'll handle the insurance headaches for you."}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:Xe,onChange:Me=>rt(Me.target.value),placeholder:"John Smith",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:Z,onChange:Me=>Ze(Me.target.value),placeholder:"Max",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:Rt,onChange:Me=>Tt(Me.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Insurance Company ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:We,onChange:Me=>wt(Me.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:Dc.map(Me=>l.jsx("option",{value:Me.display,children:Me.display},Me.display))})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Optional"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Track your complete pet expenses"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Monthly Premium (USD)"}),l.jsx("input",{type:"number",min:0,value:st,onChange:Me=>_t(Me.target.value),placeholder:"50",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Coverage Start"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:xt,onChange:Me=>Wt(Me.target.value),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:"Month"}),l.jsx("option",{value:"1",children:"January"}),l.jsx("option",{value:"2",children:"February"}),l.jsx("option",{value:"3",children:"March"}),l.jsx("option",{value:"4",children:"April"}),l.jsx("option",{value:"5",children:"May"}),l.jsx("option",{value:"6",children:"June"}),l.jsx("option",{value:"7",children:"July"}),l.jsx("option",{value:"8",children:"August"}),l.jsx("option",{value:"9",children:"September"}),l.jsx("option",{value:"10",children:"October"}),l.jsx("option",{value:"11",children:"November"}),l.jsx("option",{value:"12",children:"December"})]}),l.jsxs("select",{value:St,onChange:Me=>Mt(Me.target.value),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(Me,jt)=>new Date().getFullYear()-jt).map(Me=>l.jsx("option",{value:Me,children:Me},Me))]})]})]})]}),l.jsx("div",{className:"mt-3 text-center",children:l.jsx("button",{type:"button",onClick:()=>{_t(""),Wt(""),Mt("")},className:"text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:"Skip for now"})})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!ut||d,onClick:_r,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",children:d?"Saving":"Get Started"})]})]}):l.jsxs(l.Fragment,{children:[o!==5&&l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:Gt}),o===1&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Welcome to Pet Claim Helper! "}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Quick setup - then we'll handle the insurance headaches for you."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:w,onChange:Me=>k(Me.target.value),placeholder:"John Smith",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Street Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:y,onChange:Me=>P(Me.target.value),placeholder:"123 Main St",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:L,onChange:Me=>I(Me.target.value),placeholder:"San Francisco",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{className:"w-24",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["State ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:A,onChange:Me=>G(Me.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3 uppercase"})]}),l.jsxs("div",{className:"w-28",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["ZIP ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:U,onChange:Me=>$(Me.target.value),placeholder:"94105",maxLength:10,className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]}),l.jsx("p",{className:"text-xs text-slate-500",children:"Required for Auto-Submit claim forms"})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!Qt,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>u(2),children:"Next"})]})]}),o===2&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Sign your claim forms"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Your signature will be used on all insurance claim forms"}),l.jsx("div",{className:"mt-6",children:l.jsx(x1,{userId:t,initialSignature:le,onSave:Me=>he(Me)})}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>u(1),children:"Back"}),l.jsx("button",{type:"button",disabled:!Zt,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>u(3),children:"Next"})]})]}),o===3&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Meet your new claim-filing sidekick"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Add your pet and insurance details. We'll use this to:"}),l.jsxs("div",{className:"mt-4 mb-6 bg-gradient-to-r from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:""}),l.jsx("span",{className:"font-medium",children:"Auto-submit claims in 2 minutes"}),l.jsx("span",{className:"text-xs text-slate-500",children:"(not 30-45)"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),l.jsx("span",{children:"Track every vet visit - insured or not"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:""}),l.jsx("span",{children:"See exactly what you spend on your pet"})]})]}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:H,onChange:Me=>re(Me.target.value),placeholder:"Max",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:J,onChange:Me=>W(Me.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsx("select",{value:T,onChange:Me=>B(Me.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:Dc.map(Me=>l.jsx("option",{value:Me.display,children:Me.display},Me.display))})]}),T==="Healthy Paws (90 days)"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),l.jsx("input",{value:ie,onChange:Me=>M(Me.target.value),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),T==="Spot (270 days)"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Account Number"}),l.jsx("input",{value:ee,onChange:Me=>fe(Me.target.value),placeholder:"e.g., 12345678",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),T&&T!==" Select "&&T!=="Not Insured"&&T!=="Spot (270 days)"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{value:ae,onChange:Me=>F(Me.target.value),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),T&&T!==" Select "&&T!=="Not Insured"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),l.jsx("input",{type:"number",min:0,value:se,onChange:Me=>ge(Me.target.value),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),l.jsx("input",{type:"number",min:0,value:K,onChange:Me=>j(Me.target.value),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),l.jsx("input",{type:"number",min:50,max:100,value:oe,onChange:Me=>de(Me.target.value),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),l.jsx("input",{type:"date",value:q,onChange:Me=>X(Me.target.value),onClick:Me=>Me.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>u(2),children:"Back"}),l.jsx("button",{type:"button",disabled:!ft,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>u(4),children:"Next"})]})]}),o===4&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:" Never forget a dose!"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:["Get a friendly text when it's medication time. ",l.jsx("span",{className:"text-slate-500 italic",children:"(Optional - skip if you don't need reminders)"})]}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:l.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-200",children:[l.jsxs("div",{className:"font-semibold mb-1",children:["Stay on track with ",H||"your pet","'s meds"]}),l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"We'll text you at the right time - no more missed doses!"})]})}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:ve,onChange:Me=>_e(Me.target.checked),className:"mt-1 w-5 h-5 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Yes, text me when it's medication time"}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"We'll send you a quick reminder so you never miss a dose"})]})]}),ve&&l.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-emerald-500",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"tel",value:je,onChange:Me=>be(Kf(Me.target.value,je)),placeholder:"(555) 123-4567",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:$e,onChange:Me=>He(Me.target.checked),className:"mt-0.5 w-4 h-4 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsxs("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:["I agree to receive SMS medication reminders ",l.jsx("span",{className:"text-red-500",children:"*"})]})]}),$e&&l.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Reply STOP to opt out anytime, or HELP for support."})})]}),!ve&&l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"You can always enable medication reminders later in your settings."})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>u(3),children:"Back"}),l.jsx("button",{type:"button",disabled:!Nt||d,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:Jt,children:d?"Saving":"Finish Setup"})]})]}),o===5&&l.jsxs("div",{className:"text-center py-4 animate-fadeIn",children:[l.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),l.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"You're all set!"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-8",children:"Time to start saving money and never miss a deadline."}),l.jsxs("div",{className:"text-left bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 rounded-xl p-6 mb-6 border border-emerald-200 dark:border-emerald-800",children:[l.jsx("div",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Your quick wins:"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",children:[l.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-semibold",children:"Claims auto-submitted"})," to ",T&&T!=="None"?T:"your insurance"]})]}),l.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",style:{animationDelay:"100ms"},children:[l.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-semibold",children:"Deadline tracking active"})," - never miss a filing date"]})]}),l.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",style:{animationDelay:"200ms"},children:[l.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-semibold",children:"Financial dashboard ready"})," - see exactly what you spend"]})]})]})]}),l.jsx("button",{type:"button",className:"w-full h-14 rounded-lg bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 hover:scale-[1.02] hover:shadow-xl text-white font-bold text-lg transition-all duration-200",onClick:()=>{localStorage.setItem("justCompletedOnboarding","true"),e()},children:"Let's Go! "})]})]})]})})}function H5({userId:n,refreshToken:e,period:t}){const[s,a]=ue.useState(!1),[o,u]=ue.useState(null),[d,f]=ue.useState([]),[m,v]=ue.useState([]);ue.useEffect(()=>{console.log("[FinancialSummary]  useEffect triggered | userId:",n,"| refreshToken:",e),n&&(a(!0),u(null),console.log("[FinancialSummary]  Fetching claims and pets from database..."),Promise.all([ct.from("claims").select("id, pet_id, total_amount, reimbursed_amount, filing_status, expense_category, service_date, created_at, deductible_applied, user_coinsurance_payment, insurance_reimbursement").eq("user_id",n),ct.from("pets").select("id, name, species, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",n)]).then(([I,A])=>{if(I.error)throw I.error;if(A.error)throw A.error;console.log("[FinancialSummary] claims fetched:",I.data),console.log("[FinancialSummary] pets fetched:",A.data),f(I.data||[]),v(A.data||[])}).catch(I=>u(I?.message||"Failed to load financial data")).finally(()=>a(!1)))},[n,e]);const w=ue.useMemo(()=>{const I={};for(const A of m)I[A.id]=A;return I},[m]),k=I=>{if(!I)return null;const A=String(I).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!A)return null;const G=Number(A[1]),U=Number(A[2])-1,$=Number(A[3]),le=new Date(G,U,$);return isNaN(le.getTime())?null:le},y=(I,A)=>{const G=Number(I.monthly_premium)||0;if(G===0)return{total:0,monthsCount:0,context:"No insurance"};const U=k(I.coverage_start_date||null);if(!U)return{total:0,monthsCount:0,context:"No coverage start date"};const $=new Date,le=$.getFullYear(),he=$.getMonth(),H=A!==null?A:null;if(H!==null){if(U.getFullYear()>H)return{total:0,monthsCount:0,context:`coverage started ${U.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`};if(H>le)return{total:0,monthsCount:0,context:"future year"};const ee=new Date(H,0,1),fe=new Date(H,11,31),ae=U>ee?U:ee,F=H===le?new Date(le,he,$.getDate()):fe,se=(F.getFullYear()-ae.getFullYear())*12+(F.getMonth()-ae.getMonth()),ge=ae.getDate(),j=F.getDate()>=ge?1:0,q=Math.max(0,se+j),X=G*q;let oe="";if(U.getFullYear()===H&&U.getMonth()>0){const de=U.toLocaleDateString("en-US",{month:"short"}),ve=F.toLocaleDateString("en-US",{month:"short",year:"numeric"});oe=`${de} - ${ve}`}else H===le&&q<12?oe=`Jan - ${F.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`:oe=`${H}`;return{total:X,monthsCount:q,context:oe}}const re=($.getFullYear()-U.getFullYear())*12+($.getMonth()-U.getMonth()),J=U.getDate(),T=$.getDate()>=J?1:0,B=Math.max(0,re+T),ie=G*B,M=`since ${U.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;return{total:ie,monthsCount:B,context:M}},P=ue.useMemo(()=>{const I=new Date().getFullYear(),A=(()=>{const W=String(t||"").toLowerCase();return W==="2024"||W==="2025"||W==="2026"?Number(W):W==="all"?null:I})(),G=new Date,U=m.reduce((W,T)=>{const B=y(T,A);return W+B.total},0);let $=0,le=0,he=0,H=0,re=0;for(const W of d){const T=W.service_date?k(W.service_date)||new Date(W.service_date):null;if(!T||isNaN(T.getTime())||A!==null&&T.getFullYear()!==A||T>G)continue;const B=String(W.expense_category||"").toLowerCase(),ie=String(W.filing_status||"").toLowerCase(),M=Number(W.total_amount)||0,ee=Math.max(0,Number(W.reimbursed_amount)||0);B==="not_insured"||B==="not insured"?$+=M:B==="insured"&&ie==="paid"?(le+=ee,H+=M,he+=Math.max(0,M-ee)):B==="insured"&&(H+=M,he+=Math.max(0,M-ee)),ie==="submitted"&&(re+=M)}const J=U+$+he;return{premiumsYTD:U,nonInsuredTotal:$,insurancePaidBack:le,userShareCoveredClaims:he,insuredBillsTotal:H,definiteTotal:J,pendingTotal:re}},[d,m,t]),L=ue.useMemo(()=>{const I=new Date().getFullYear(),A=(()=>{const le=String(t||"").toLowerCase();return le==="2024"||le==="2025"||le==="2026"?Number(le):le==="all"?null:I})(),G=new Date,U={};for(const le of m){const he=y(le,A);U[le.id]={claimed:0,reimbursed:0,premiums:he.total,nonInsured:0,pendingBills:0,filedClaims:0}}const $=[...d].sort((le,he)=>{const H=le.service_date&&(k(le.service_date)?.getTime()||new Date(le.service_date).getTime())||0,re=he.service_date&&(k(he.service_date)?.getTime()||new Date(he.service_date).getTime())||0;return H-re});for(const le of $){const he=String(le.expense_category||"").toLowerCase(),H=le.pet_id||"";if(!U[H])continue;const re=Number(le.total_amount)||0;if(re<=0)continue;const J=le.service_date?k(le.service_date)||new Date(le.service_date):null;if(!(!J||isNaN(J.getTime()))&&!(A!==null&&J.getFullYear()!==A)){if(he==="insured"){const W=String(le.filing_status||"not_submitted").toLowerCase(),T=W==="filed"?"submitted":W;T==="not_submitted"||T==="not_filed"?U[H].pendingBills+=1:(T==="submitted"||T==="paid"||T==="denied"||T==="approved")&&(U[H].filedClaims+=1)}if(he==="not_insured"||he==="not insured")J<=G&&(U[H].nonInsured+=re);else{U[H].claimed+=re;const W=Math.max(0,Number(le.reimbursed_amount)||0);U[H].reimbursed+=W}}}return console.log("[FinancialSummary] perPet calc (premiums + bills - reimbursed)",U),U},[d,m,w,t]);return n?l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Financial Summary"}),s&&l.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Loading"}),o&&l.jsx("div",{className:"mt-2 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&!o&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:` ${String(t||"").toLowerCase()==="all"?"ALL TIME":String(t||new Date().getFullYear())} TOTAL`}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Spent on all pets (including premiums)"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",(P.premiumsYTD+P.nonInsuredTotal+P.insuredBillsTotal).toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"- Insurance Reimbursed"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",P.insurancePaidBack.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"= Your Net Cost"}),l.jsxs("div",{className:"text-2xl font-bold",children:["$",P.definiteTotal.toFixed(2)]})]})]})]})})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:"YOUR OUT-OF-POCKET BREAKDOWN"}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Insurance Premiums ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Monthly insurance cost)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",P.premiumsYTD.toFixed(2)]})]}),(()=>{const I=new Date().getFullYear(),A=(()=>{const U=String(t||"").toLowerCase();return U==="2024"||U==="2025"||U==="2026"?Number(U):U==="all"?null:I})(),G=m.map(U=>{const $=y(U,A);return{pet:U,...$}}).filter(U=>U.total>0||Number(U.pet.monthly_premium)>0);return G.length===0?null:l.jsx("div",{className:"ml-4 mt-2 space-y-1 text-xs text-slate-500",children:G.map(({pet:U,total:$,monthsCount:le,context:he})=>{const H=Number(U.monthly_premium)||0;return H===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",U.name,": No insurance"]}),l.jsx("div",{})]},U.id):$===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",U.name,": $0 (",he,")"]}),l.jsx("div",{})]},U.id):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",U.name,": $",H.toFixed(2),"/mo  ",le," = $",$.toFixed(2)," (",he,")"]}),l.jsx("div",{})]},U.id)})})})()]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Non-Insured Vet Visits ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Not covered by insurance)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",P.nonInsuredTotal.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Amount You Paid (for covered claims)"}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",P.userShareCoveredClaims.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"Total You Paid"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold font-mono",children:["$",P.definiteTotal.toFixed(2)]})]})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:` PER-PET BREAKDOWN (${String(t||"").toLowerCase()==="all"?"All Time":String(t||new Date().getFullYear())})`}),m.length===0&&l.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No pets yet. Add a pet to see per-pet costs."}),l.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(I=>{const A=L[I.id]||{claimed:0,reimbursed:0,premiums:0,nonInsured:0,pendingBills:0,filedClaims:0};I.species==="cat"||I.species;const G=I.species==="cat"?"":I.species==="dog"?"":"",U=A.premiums+(A.nonInsured||0)+A.claimed-A.reimbursed,$=(A.nonInsured||0)+A.reimbursed+A.claimed>0;return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-100 min-w-0",children:[l.jsx("span",{children:G}),l.jsxs("span",{className:"font-semibold truncate",title:`${I.name} (${I.species})`,children:[I.name," (",I.species,")"]})]}),l.jsx("div",{className:"mt-3 text-sm",children:$?l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"YOUR COSTS"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Premiums (attributed)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.premiums.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Vet Bills (insured + non-insured)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Subtotal Paid"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.premiums+A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsx("div",{className:"pt-3 text-xs font-semibold text-slate-500",children:"INSURANCE COVERAGE"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Reimbursements Received"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.reimbursed.toFixed(2)]})]}),l.jsxs("div",{className:"pt-3 border-t-2 border-slate-300 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("span",{className:"font-mono font-bold text-lg",children:["$",U.toFixed(2)]})]}),l.jsx("div",{className:"text-xs text-slate-500",children:A.pendingBills>0?`(${A.pendingBills} bill${A.pendingBills===1?"":"s"} pending submission)`:A.filedClaims>0?`(${A.filedClaims} claim${A.filedClaims===1?"":"s"} filed)`:""})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("div",{className:"font-mono font-bold text-lg",children:["$",U.toFixed(2)]})]}),l.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"(No vet bills this year)"})]})})]},I.id)})})]})]}):null}function V5({medicationId:n,userId:e,onClose:t,onDoseRecorded:s}){const[a,o]=ue.useState(!0),[u,d]=ue.useState(!1),[f,m]=ue.useState(null),[v,w]=ue.useState(null),[k,y]=ue.useState(!1),[P,L]=ue.useState(null),[I,A]=ue.useState(""),[G,U]=ue.useState(0),[$,le]=ue.useState(null),he=ue.useMemo(()=>P?Array.isArray(P.reminder_times)&&P.reminder_times.length>0?P.reminder_times.length:P.frequency==="1x daily"?1:P.frequency==="2x daily"?2:3:0,[P]),H=ue.useMemo(()=>{if(!P)return 0;const ee=new Date(P.start_date),fe=P.end_date?new Date(P.end_date):null,ae=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),F=fe?new Date(fe.getFullYear(),fe.getMonth(),fe.getDate()):null;return(F?Math.max(1,Math.round((F.getTime()-ae.getTime())/(1e3*60*60*24))+1):1)*he},[P,he]),re=ue.useMemo(()=>H>0?Math.min(Math.round(G/H*100),100):0,[G,H]),J=ue.useMemo(()=>{if(!P||!P.end_date)return 0;const ee=new Date,fe=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),[ae,F,se]=P.end_date.split("-").map(Number),ge=new Date(ae,F-1,se);return Math.max(0,Math.round((ge.getTime()-fe.getTime())/(1e3*60*60*24))+1)},[P]),W=ue.useMemo(()=>!P||!P.end_date?"":P.end_date,[P]),T=async()=>{o(!0),m(null);try{const{data:ee,error:fe}=await ct.from("medications").select("*").eq("id",n).single();if(fe)throw fe;const ae={id:ee.id,user_id:ee.user_id,pet_id:ee.pet_id,medication_name:ee.medication_name,dosage:ee.dosage??null,frequency:ee.frequency,reminder_times:Array.isArray(ee.reminder_times)?ee.reminder_times:[],start_date:ee.start_date,end_date:ee.end_date??null};if(L(ae),ee.pet_id){const{data:j,error:q}=await ct.from("pets").select("name").eq("id",ee.pet_id).single();!q&&j?.name&&A(j.name)}const{count:F,error:se}=await ct.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",n).eq("status","given");if(se)throw se;U(F||0);const{data:ge,error:K}=await ct.from("medication_doses").select("given_time").eq("medication_id",n).eq("status","given").order("given_time",{ascending:!1}).limit(1).single();!K&&ge?.given_time?le(ge.given_time):le(null)}catch(ee){m(ee?.message||"Failed to load medication")}finally{o(!1)}};ue.useEffect(()=>{T()},[n]),ue.useEffect(()=>{const ee=document.body.style.overflow;document.body.style.overflow="hidden";const fe=ae=>{ae.key==="Escape"&&t()};return window.addEventListener("keydown",fe),()=>{document.body.style.overflow=ee,window.removeEventListener("keydown",fe)}},[t]);const B=ee=>{const[fe,ae]=ee.split(":").map(ge=>parseInt(ge,10));if(!Number.isFinite(fe)||!Number.isFinite(ae))return ee;const F=fe===0?12:fe>12?fe-12:fe,se=fe>=12?"PM":"AM";return`${F}:${String(ae).padStart(2,"0")} ${se}`},ie=ee=>{if(!ee)return"No doses recorded yet";const fe=new Date(ee),ae=new Date,F=new Date(ae);F.setDate(F.getDate()-1);const se=new Date(fe.getFullYear(),fe.getMonth(),fe.getDate()),ge=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()),K=new Date(F.getFullYear(),F.getMonth(),F.getDate());let j="";se.getTime()===ge.getTime()?j="Today":se.getTime()===K.getTime()?j="Yesterday":j=fe.toLocaleDateString("en-US",{month:"short",day:"numeric"});const q=fe.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${j} ${q}`},M=async()=>{if(!e){m("You must be logged in to record a dose.");return}if(G>=H){m("All doses have been recorded for this medication");return}const ee=G+1>=H;d(!0),m(null);try{const ae=new Date().toISOString(),{error:F}=await ct.from("medication_doses").insert({medication_id:n,user_id:e,scheduled_time:ae,given_time:ae,status:"given"});if(F)throw F;U(se=>se+1),le(ae),ee?y(!0):(w("Dose recorded "),setTimeout(()=>{t()},2e3)),s&&s()}catch(fe){m(fe?.message||"Failed to record dose")}finally{d(!1)}};return k&&P?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:()=>{},children:l.jsx("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900 p-8 shadow-2xl",onClick:ee=>ee.stopPropagation(),children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-200 mb-2",children:"Great job!"}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-1",children:["You've completed ",l.jsx("span",{className:"font-semibold",children:P.medication_name})]}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-4",children:["for ",l.jsx("span",{className:"font-semibold",children:I}),"!"]}),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 text-sm text-blue-800 dark:text-blue-200",children:" Consider following up with your vet if needed."}),l.jsx("button",{type:"button",onClick:()=>{y(!1),t()},className:"mt-6 w-full h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold",children:"Got it"})]})})}):l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Track Dose"}),l.jsx("button",{type:"button",className:"text-sm",onClick:t,children:"Close"})]}),a&&l.jsx("div",{className:"mt-4 text-sm text-slate-600",children:"Loading"}),f&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:f}),!a&&P&&l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Pet: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:I||""})]}),l.jsx("div",{className:"text-lg font-semibold",children:P.medication_name}),P.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:P.dosage}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Frequency: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:P.frequency})]}),l.jsxs("div",{className:"mt-2 rounded-lg border border-slate-200 dark:border-slate-800 p-3 text-sm space-y-1.5",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${G}/${H} doses (${re}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",J]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",W]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Last dose given:"})," ",ie($)]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Reminder times:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(P.reminder_times)?P.reminder_times:[]).map((ee,fe)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:B(ee)},fe))})]})]}),v&&l.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:v}),G>=H?l.jsx("div",{className:"pt-2",children:l.jsxs("div",{className:"rounded-lg bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 p-4 text-center",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-emerald-800 dark:text-emerald-200",children:"All doses completed!"}),l.jsx("div",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"This medication course is finished."})]})}):l.jsx("div",{className:"pt-2 flex flex-col sm:flex-row gap-3 sm:justify-end",children:l.jsx("button",{type:"button",disabled:u||!e,onClick:M,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:u?"Saving":" MARK AS GIVEN"})})]})]})})}function G5({userId:n,pets:e,refreshKey:t}){const[s,a]=ue.useState(!1),[o,u]=ue.useState(null),[d,f]=ue.useState([]),[m,v]=ue.useState({}),[w,k]=ue.useState(!1),[y,P]=ue.useState(null),[L,I]=ue.useState(null),[A,G]=ue.useState(!1),[U,$]=ue.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),le=ue.useMemo(()=>{const M={};for(const ee of e)M[ee.id]=ee;return M},[e]),he=async()=>{if(n){a(!0),u(null);try{try{const{data:F}=await ct.from("profiles").select("timezone").eq("id",n).single(),se=F&&F.timezone?String(F.timezone):"";se&&$(se)}catch{}const{data:M,error:ee}=await ct.from("medications").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(ee)throw ee;const fe=(M||[]).map(F=>({...F,reminder_times:Array.isArray(F.reminder_times)?F.reminder_times:[]}));f(fe);const ae=fe.map(F=>F.id);if(ae.length>0){const{data:F,error:se}=await ct.from("medication_doses").select("id, medication_id, user_id, scheduled_time, given_time, status").in("medication_id",ae).eq("user_id",n).eq("status","given");if(se)throw se;const ge={};for(const K of F||[])ge[K.medication_id]=(ge[K.medication_id]||0)+1;v(ge)}else v({})}catch(M){u(M?.message||"Failed to load medications")}finally{a(!1)}}};ue.useEffect(()=>{he()},[n,t]);const H=M=>Array.isArray(M.reminder_times)&&M.reminder_times.length>0?M.reminder_times.length:M.frequency==="1x daily"?1:M.frequency==="2x daily"?2:3,re=M=>{const[ee,fe]=M.split(":");let ae=Number(ee);const F=ae>=12?"PM":"AM";return ae=ae%12,ae===0&&(ae=12),`${ae}:${fe} ${F}`},J=(M,ee)=>{const fe=new Date(M.getFullYear(),M.getMonth(),M.getDate()),ae=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),F=Math.round((fe.getTime()-ae.getTime())/(1e3*60*60*24));let se;F===0?M.getTime()<=ee.getTime()?se="Tomorrow":se="Today":F===1?se="Tomorrow":se=M.toLocaleDateString("en-US",{month:"short",day:"numeric"});const ge=M.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${se} ${ge}`},W=M=>{const ee=new Date(M.start_date),fe=M.end_date?new Date(M.end_date):null,ae=new Date,F=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),se=fe?new Date(fe.getFullYear(),fe.getMonth(),fe.getDate()):null,ge=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()),K=se?Math.max(1,Math.round((se.getTime()-F.getTime())/(1e3*60*60*24))+1):1,j=H(M),q=K*j,X=m[M.id]||0,oe=q>0?Math.min(Math.round(X/q*100),100):0,de=se?Math.max(0,Math.round((se.getTime()-ge.getTime())/(1e3*60*60*24))+1):0,ve=M.reminder_times&&M.reminder_times.length>0?M.reminder_times.filter(Boolean):M.frequency==="1x daily"?["07:00"]:M.frequency==="2x daily"?["07:00","19:00"]:["08:00","14:00","20:00"];let _e=null;const je=new Date;let be=new Date(je.getFullYear(),je.getMonth(),je.getDate());for(let $e=0;$e<7;$e++){if(be<F){be.setDate(be.getDate()+1);continue}if(se&&be>se)break;for(const He of ve){const[Xe,rt]=He.split(":").map(Ze=>Number(Ze)),Z=new Date(be.getFullYear(),be.getMonth(),be.getDate(),Xe,rt,0);if(Z.getTime()>je.getTime()){_e=Z;break}}if(_e)break;be.setDate(be.getDate()+1)}return{totalDoses:q,given:X,pct:oe,daysRemaining:de,nextDoseLabel:_e?J(_e,je):se&&ge>se?"Completed":"",endLabel:se?se.toISOString().slice(0,10):""}},{active:T,completed:B}=ue.useMemo(()=>{const M=new Date,ee=new Date(M.getFullYear(),M.getMonth(),M.getDate()),fe=[],ae=[];for(const F of d){const[se,ge,K]=F.start_date.split("-").map(Number),j=new Date(se,ge-1,K),q=F.end_date?(()=>{const[ve,_e,je]=F.end_date.split("-").map(Number);return new Date(ve,_e-1,je)})():null,X=W(F),oe=X.given>=X.totalDoses||q&&ee>q,de=ee>=j&&!oe;oe?ae.push(F):de&&fe.push(F)}return{active:fe,completed:ae}},[d,m]),ie=ue.useMemo(()=>{const M={};for(const ee of T)M[ee.pet_id]||(M[ee.pet_id]=[]),M[ee.pet_id].push(ee);return M},[T]);return l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Medications"}),l.jsx("button",{type:"button",onClick:()=>k(!0),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm",disabled:!n,children:"+ ADD MEDICATION"})]}),s&&l.jsx("div",{className:"mt-4 text-sm text-slate-500",children:"Loading medications"}),o&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&d.length===0&&l.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 text-sm text-slate-600",children:'No medications yet. Click "+ ADD MEDICATION" to create one.'}),l.jsx("div",{className:"mt-4 space-y-6",children:Object.entries(ie).map(([M,ee])=>{const fe=le[M];return l.jsxs("div",{children:[l.jsxs("div",{className:"text-base font-semibold mb-2 flex items-center gap-3 h-12 px-4",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:fe?.color||(fe?.species==="dog"?"#3B82F6":fe?.species==="cat"?"#F97316":"#6B7280")}}),l.jsx("span",{className:"font-semibold",children:fe?`${fe.name} (${fe.species})`:"Unknown Pet"})]}),ee.length===0?l.jsx("div",{className:"ml-4 text-sm text-slate-500 dark:text-slate-400",children:"No active medications"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(ae=>{const F=W(ae);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm cursor-pointer hover:shadow-md",onClick:()=>I(ae.id),children:[l.jsx("div",{className:"flex items-start justify-between gap-2",children:l.jsx("div",{className:"text-lg font-semibold",children:ae.medication_name})}),l.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-700 cursor-pointer",onClick:se=>{se.stopPropagation(),P(ae.id)},title:"Edit medication","aria-label":"Edit medication",children:"Edit"}),l.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-700 cursor-pointer",onClick:async se=>{if(se.stopPropagation(),!!confirm(`Are you sure you want to delete ${ae.medication_name}?`))try{let ge=!1;try{ge=(await fetch(`/api/medications/${ae.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}catch{}if(!ge){const{error:K}=await ct.from("medications").delete().eq("id",ae.id).eq("user_id",n);if(K)throw K}f(K=>K.filter(j=>j.id!==ae.id));try{alert("Medication deleted successfully")}catch{}}catch(ge){console.error("[medications] delete error",ge);try{alert("Failed to delete medication")}catch{}}},title:"Delete medication","aria-label":"Delete medication",children:"Delete"})]}),ae.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:ae.dosage}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:ae.frequency}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Array.isArray(ae.reminder_times)?ae.reminder_times:[]).map((se,ge)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:re(se)},ge))}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${F.given}/${F.totalDoses} doses (${F.pct}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Next dose:"})," ",F.nextDoseLabel]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",F.daysRemaining]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",F.endLabel]})]})]},ae.id)})})]},M)})}),B.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsxs("button",{type:"button",onClick:()=>G(!A),className:"flex items-center gap-2 text-base font-semibold hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:[l.jsx("svg",{className:`w-4 h-4 transition-transform ${A?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),l.jsxs("span",{children:["Completed Medications (",B.length,")"]})]}),A&&l.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(M=>{const ee=W(M),fe=le[M.pet_id],ae=M.end_date||new Date().toISOString().slice(0,10);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 p-4 shadow-sm opacity-75",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"text-lg font-semibold",children:M.medication_name}),l.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:" Completed"})]}),M.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:M.dosage}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Pet:"})," ",fe?.name||"Unknown"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${ee.given}/${ee.totalDoses} doses`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Completed:"})," ",ae]})]})]},M.id)})})]}),l.jsx(g1,{open:w||!!y,onClose:()=>{k(!1),P(null)},onSaved:()=>{k(!1),P(null),he()},userId:n,pets:e,medicationId:y,editMode:!!y}),L&&l.jsx(V5,{medicationId:L,userId:n,onClose:()=>I(null),onDoseRecorded:()=>he()})]})}function Y5({medicationId:n,userId:e,onClose:t}){const[s,a]=ue.useState(null),[o,u]=ue.useState(null),[d,f]=ue.useState(!0),[m,v]=ue.useState(!1),[w,k]=ue.useState(!1),[y,P]=ue.useState(null),[L,I]=ue.useState(null),[A,G]=ue.useState(null),[U,$]=ue.useState(null),[le,he]=ue.useState(null);ue.useEffect(()=>{if(console.log("[DoseMarkingPage] useEffect triggered",{medicationId:n,userId:e,success:w,loading:d,error:y}),w){console.log("[DoseMarkingPage] Already successful, skipping reload");return}const B=new URLSearchParams(window.location.search).get("token");B&&(I(B),console.log("[DoseMarkingPage] Magic link token detected:",B.slice(0,8)+"...")),console.log("[DoseMarkingPage] Calling loadMedicationDetails with token:",B?B.slice(0,8)+"...":"null"),H(B)},[n,e,w]);async function H(T=null){console.log("[DoseMarkingPage] loadMedicationDetails called",{tokenFromUrl:T,magicToken:L,medicationId:n,success:w,loading:d});try{const B=T||L,ie=n.length===8&&!n.includes("-"),M=n.includes("-");if(console.log("[DoseMarkingPage] Detecting format",{isShortCode:ie,isUUID:M,effectiveToken:B?B.slice(0,8)+"...":"null"}),ie){console.log("[DoseMarkingPage] Loading via short code:",n);const{data:F,error:se}=await ct.from("medication_doses").select("*, medications(*, pets(name, species))").eq("short_code",n).single();if(se||!F){console.error("[DoseMarkingPage] Short code lookup failed:",se?.message,se?.code),P("This link is invalid or has expired. Please check for a newer SMS."),f(!1);return}console.log("[DoseMarkingPage]  Dose found via short code:",F.id),a(F.medications),u(F.medications?.pets),G(F.medication_id),$(n),f(!1);return}if(B){console.log("[DoseMarkingPage] Loading via legacy token:",B.slice(0,8)+"...");const{data:F,error:se}=await ct.from("medication_doses").select("*, medications(*, pets(name, species))").eq("one_time_token",B).single();if(se||!F){console.error("[DoseMarkingPage] Token validation failed:",se?.message,se?.code),console.error("[DoseMarkingPage] Full error:",JSON.stringify(se)),P("This link is invalid or has expired. Please check for a newer SMS."),f(!1);return}console.log("[DoseMarkingPage]  Dose found via token:",F.id),console.log("[DoseMarkingPage] Full dose data:",JSON.stringify(F,null,2)),console.log("[DoseMarkingPage] Medications object:",F.medications),console.log("[DoseMarkingPage] Pets object:",F.medications?.pets),a(F.medications),u(F.medications?.pets),f(!1),console.log("[DoseMarkingPage]  Medication name:",F.medications?.medication_name||"MISSING"),console.log("[DoseMarkingPage]  Pet name:",F.medications?.pets?.name||"MISSING");return}if(!e){P("Please log in to mark medication as given"),f(!1);return}const{data:ee,error:fe}=await ct.from("medications").select("*, pets(name, species)").eq("id",n).eq("user_id",e).single();if(fe||!ee){P("Medication not found"),f(!1);return}a(ee),u(ee.pets),(await re())?.isComplete&&P("This medication course is already complete!"),f(!1)}catch(B){console.error("Error loading medication:",B),P("Failed to load medication details"),f(!1)}}async function re(){try{const T=A||n,{data:B,error:ie}=await ct.from("medication_doses").select("*").eq("medication_id",T).order("scheduled_time",{ascending:!0});if(ie||!B)return console.error("[DoseMarkingPage] Failed to fetch doses for stats:",ie),null;let M=0;if(s?.start_date&&s?.end_date&&s?.reminder_times){const[q,X,oe]=s.start_date.split("-").map(Number),de=new Date(q,X-1,oe),[ve,_e,je]=s.end_date.split("-").map(Number),be=new Date(ve,_e-1,je),$e=Math.floor((be.getTime()-de.getTime())/(1e3*60*60*24))+1,He=s.reminder_times&&Array.isArray(s.reminder_times)?s.reminder_times.length:1;M=$e*He,console.log("[DoseMarkingPage] Progress calculation:",{startDate:s.start_date,endDate:s.end_date,totalDays:$e,dosesPerDay:He,totalExpectedDoses:M,dosesInDB:B.length})}else M=B.length,console.warn("[DoseMarkingPage] Missing medication dates, falling back to DB count");const ee=B.filter(q=>q.status==="given").length,fe=M-ee,ae=M>0?Math.min(Math.round(ee/M*100),100):0,F=ee>=M&&M>0,se=B.find(q=>q.status==="pending");let ge=null;if(se&&!F){const q=new Date(se.scheduled_time),X=new Date,oe=new Date(X);oe.setDate(oe.getDate()+1);const de=q.toDateString()===X.toDateString(),ve=q.toDateString()===oe.toDateString(),_e=q.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});de?ge=`Today ${_e}`:ve?ge=`Tomorrow ${_e}`:ge=`${q.toLocaleDateString("en-US",{weekday:"short"})} ${_e}`}let K=null;if(s?.end_date&&!F){const q=new Date(s.end_date),X=new Date;X.setHours(0,0,0,0),q.setHours(0,0,0,0);const oe=q.getTime()-X.getTime(),de=Math.ceil(oe/(1e3*60*60*24));K=de>=0?de:0}const j={givenCount:ee,totalCount:M,remainingCount:fe,percentage:ae,nextDoseTime:ge,daysRemaining:K,isComplete:F};return he(j),j}catch(T){return console.error("[DoseMarkingPage] Error calculating progress stats:",T),null}}async function J(){if(!U&&!L&&!e){P("Please log in to mark medication as given");return}v(!0),P(null);try{if(U){console.log("[DoseMarkingPage] SHORT CODE: Bypassing backend, using Supabase directly");const{data:F,error:se}=await ct.from("medication_doses").select("*").eq("short_code",U).single();if(se||!F){console.error("[DoseMarkingPage] Invalid short code:",se),P("Invalid link. Please check your recent SMS."),v(!1);return}if(console.log("[DoseMarkingPage] Found dose:",F.id,"Status:",F.status),F.status==="given"){console.log("[DoseMarkingPage] Dose already marked as given - redirecting to success"),window.location.href=`/dose-success?pet=${encodeURIComponent(o?.name||"Your pet")}&med=${encodeURIComponent(s?.medication_name||"medication")}&count=1&total=1`;return}const{count:ge,error:K}=await ct.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",F.medication_id).eq("status","given");if(K){console.error("[DoseMarkingPage] Error counting doses:",K),P("Error checking medication status"),v(!1);return}if(s){const oe=new Date(s.start_date),de=new Date(s.end_date),_e=Math.max(1,Math.round((de.getTime()-oe.getTime())/(1e3*60*60*24))+1)*(s.times_per_day||1);if((ge||0)>=_e){console.log("[DoseMarkingPage] All doses already complete:",{givenCount:ge,totalExpectedDoses:_e}),P("All doses have been recorded for this medication"),v(!1);return}}console.log("[DoseMarkingPage] Marking dose as given via Supabase...");const{error:j}=await ct.from("medication_doses").update({status:"given",given_time:new Date().toISOString()}).eq("id",F.id);if(j){console.error("[DoseMarkingPage] Failed to update dose:",j),P("Failed to mark dose as given. Please try again."),v(!1);return}console.log("[DoseMarkingPage]  Dose marked as given via Supabase"),console.log("[DoseMarkingPage] Calculating progress stats...");let q=null;try{const oe=re(),de=new Promise((ve,_e)=>setTimeout(()=>_e(new Error("Stats timeout")),3e3));q=await Promise.race([oe,de]),console.log("[DoseMarkingPage] Stats calculated:",q)}catch(oe){console.error("[DoseMarkingPage] Stats calculation failed/timeout:",oe)}const X=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",count:String(q?.givenCount||1),total:String(q?.totalCount||1)});q?.nextDoseTime&&X.set("next",q.nextDoseTime),console.log("[DoseMarkingPage] Redirecting to success page"),window.location.href=`/dose-success?${X.toString()}`;return}console.log("[DoseMarkingPage] Using backend API for:",L?"magic token":"session auth");const T=L?{token:L}:{userId:e},ie=`http://localhost:8787/api/medications/${A||n}/mark-given`;console.log("[DoseMarkingPage] Calling API:",ie);const M=new AbortController,ee=setTimeout(()=>M.abort(),1e4);let fe;try{fe=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T),signal:M.signal}),clearTimeout(ee)}catch(F){clearTimeout(ee),console.error("[DoseMarkingPage] API call failed or timeout:",F),F.name==="AbortError"?P("Request timeout. Please try again or close this tab."):P("Network error. Please check your connection or close this tab."),v(!1);return}console.log("[DoseMarkingPage] API response status:",fe.status);let ae;try{ae=await fe.json(),console.log("[DoseMarkingPage] API response body:",ae)}catch(F){console.error("[DoseMarkingPage] Failed to parse response:",F),P("Something went wrong. Please try again or close this tab."),v(!1);return}if(!fe.ok||!ae.ok){console.error("[DoseMarkingPage] API call failed:",{status:fe.status,result:ae}),P(ae.error||"Failed to mark dose as given"),v(!1);return}if(console.log("[DoseMarkingPage]  Successfully marked as given"),(U||L)&&!e){console.log("[DoseMarkingPage] Redirecting to static success page"),console.log("[DoseMarkingPage] Calculating progress stats...");let F=null;try{const ge=re(),K=new Promise((j,q)=>setTimeout(()=>q(new Error("Stats calculation timeout")),3e3));F=await Promise.race([ge,K]),console.log("[DoseMarkingPage] Stats calculated:",F)}catch(ge){console.error("[DoseMarkingPage] Stats calculation failed/timeout:",ge)}const se=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",count:String(F?.givenCount||1),total:String(F?.totalCount||1)});F?.nextDoseTime&&se.set("next",F.nextDoseTime),console.log("[DoseMarkingPage] Redirecting to:",`/dose-success?${se.toString()}`),window.location.href=`/dose-success?${se.toString()}`;return}await re(),k(!0),v(!1)}catch(T){console.error("Error marking dose:",T),P("Failed to mark dose as given"),v(!1)}}function W(){t()}return d?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading medication details..."})]})})}):y&&!s?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:y}),l.jsx("button",{onClick:t,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})}):w?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:le?.isComplete?"All doses complete!":`Dose ${le?.givenCount||1} of ${le?.totalCount||1} complete`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[o?.name||"Your pet","  ",s?.medication_name||"Medication"]}),le&&l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6 text-left",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${le.percentage}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[le.percentage,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:le.isComplete?" Treatment complete!":le.remainingCount===1?"Just 1 more dose!":`${le.remainingCount} doses to go`})]})]}),!le.isComplete&&l.jsxs("div",{className:"space-y-3",children:[le.nextDoseTime&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:le.nextDoseTime})]}),le.daysRemaining!==null&&le.daysRemaining>=0&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Days remaining:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:le.daysRemaining===0?"Last day":le.daysRemaining===1?"1 day":`${le.daysRemaining} days`})]})]})]}),(U||L)&&!e?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:le?.nextDoseTime?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center mb-2",children:" All done! You can close this tab now."}),l.jsxs("p",{className:"text-blue-700 text-xs text-center",children:[" Next reminder: ",le.nextDoseTime]})]}):le?.isComplete?l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" Treatment complete! You can close this tab."}):l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" All done! You can close this tab now."})}):l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-800 text-sm",children:" Your pet's medication has been recorded. You're all set!"})}),l.jsx("button",{onClick:()=>{if((U||L)&&!e){window.close();return}t(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold",children:(U||L)&&!e?"Done":"View Dashboard"})]})})}):l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mark Medication as Given?"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pet:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:o?.name}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medication:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:s?.medication_name}),s?.dosage&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dosage:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.dosage})]})]}),y&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:y})}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:J,disabled:m,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Marking..."]}):l.jsx(l.Fragment,{children:" Yes, I gave it"})}),l.jsx("button",{onClick:W,disabled:m,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip this dose"})]})]})})})}function K5(){const n=new URLSearchParams(window.location.search),e=n.get("pet")||"Your pet",t=n.get("med")||"medication",s=parseInt(n.get("count")||"1"),a=parseInt(n.get("total")||"1"),o=n.get("next")||null,u=a>0?Math.min(Math.round(s/a*100),100):0,d=a-s,f=s>=a;return l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:f?"All doses recorded!":`Dose ${s} of ${a} recorded`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[e,"  ",t]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${u}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[u,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f?" Treatment complete!":d===1?"Just 1 more dose!":`${d} doses to go`})]})]}),!f&&o&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:o})]})]}),o&&!f&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:l.jsxs("p",{className:"text-blue-700 text-sm text-center",children:[" Next reminder: ",o]})}),l.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-2",children:[l.jsx("p",{className:"text-gray-800 font-medium text-center mb-2",children:"You're all set!"}),l.jsx("p",{className:"text-gray-600 text-sm text-center",children:"Use your back button or close this window to return to your messages."})]})]})})})}function J5({open:n,onClose:e,insurerName:t,petId:s,petName:a,claimId:o,missingFields:u,existingData:d={},suggestedValues:f={},onComplete:m}){console.log("[MissingFieldsModal] Component rendered with petName:",a);const[v,w]=ue.useState({}),[k,y]=ue.useState(null),[P,L]=ue.useState(!1),I=ue.useRef({});ue.useEffect(()=>{const H={};u.forEach(re=>{f[re.field]?H[re.field]=f[re.field]:d[re.field]&&(H[re.field]=d[re.field])}),w(H)},[u,d,f]);const A=(H,re)=>{w(J=>({...J,[H]:re})),y(null)},G=H=>H.conditional?v[H.conditional.field]===H.conditional.value:!0,U=ue.useMemo(()=>(console.log("[MissingFieldsModal] Filtering fields, formData:",v),u.filter(H=>{const re=G(H);return console.log(`[MissingFieldsModal] Field ${H.field}: ${re?"VISIBLE":"HIDDEN"}`,H.conditional?`(conditional: ${H.conditional.field} === "${H.conditional.value}")`:""),re})),[u,v]),$=H=>{console.log("[MissingFieldsModal] replacePlaceholders called with:",H,"petName:",a);const re=H.replace(/{petName}/g,a||"your pet");return console.log("[MissingFieldsModal] replacePlaceholders result:",re),re},le=H=>H.type==="signature"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsxs("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!v[H.field]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Su,{ref:re=>{I.current[H.field]=re},canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onEnd:()=>{const re=I.current[H.field];re&&!re.isEmpty()&&A(H.field,re.toDataURL("image/png"))}})]}),v[H.field]&&l.jsx("button",{type:"button",onClick:()=>{I.current[H.field]?.clear(),A(H.field,null)},className:"mt-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})]},H.field):H.type==="text"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("input",{type:"text",placeholder:H.placeholder,value:v[H.field]||"",onChange:re=>A(H.field,re.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"}),H.aiExtract&&f[H.field]&&l.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[" Suggested from diagnosis: ",f[H.field]]})]},H.field):H.type==="textarea"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("textarea",{rows:H.rows||3,placeholder:H.placeholder,value:v[H.field]||"",onChange:re=>A(H.field,re.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},H.field):H.type==="date"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("input",{type:"date",value:v[H.field]||"",onChange:re=>A(H.field,re.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},H.field):H.type==="phone"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("input",{type:"tel",placeholder:H.placeholder||"(555) 123-4567",value:v[H.field]||"",onChange:re=>A(H.field,re.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},H.field):H.type==="radio"&&H.options?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(H.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),H.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(H.description)}),l.jsx("div",{className:"space-y-2",children:H.options.map(re=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[l.jsx("input",{type:"radio",name:H.field,value:re,checked:v[H.field]===re,onChange:J=>A(H.field,J.target.value),className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${v[H.field]===re?"bg-emerald-500 border-emerald-500":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:v[H.field]===re&&l.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:re})]},re))})]},H.field):null,he=async H=>{if(H.preventDefault(),y(null),!U.every(J=>{if(!J.required)return!0;const W=v[J.field];return!(!W||typeof W=="string"&&W.trim()==="")})){y("Please fill out all required fields");return}L(!0);try{await m(v)}catch{y("Failed to save data. Please try again."),L(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl max-h-[calc(100vh-80px)] overflow-y-auto",onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Quick Questions for ",t]}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:[" We need a few details to submit your claim. These fields are required by ",t,"."]})]}),k&&l.jsx("div",{className:"mb-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:k}),l.jsxs("form",{onSubmit:he,children:[U.map(H=>le(H)),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" This information will be saved for future claims"})}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,disabled:P,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:P,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50",children:P?"Saving...":"Continue to Submit"})]})]})]})}):null}function X5({claim:n,pet:e,userId:t,onClose:s,onSuccess:a}){const[o,u]=ue.useState("validating"),[d,f]=ue.useState(null),[m,v]=ue.useState(null),[w,k]=ue.useState(!1),[y,P]=ue.useState(null),[L,I]=ue.useState(null),A=e?.insurance_company||"Nationwide",G=n.total_amount?`$${parseFloat(n.total_amount).toFixed(2)}`:"$0.00";ue.useEffect(()=>{async function H(){try{u("validating"),console.log("[ClaimSubmissionModal] Starting validation..."),console.log("[ClaimSubmissionModal] claim:",n),console.log("[ClaimSubmissionModal] pet:",e),console.log("[ClaimSubmissionModal] pet.insurance_company:",e?.insurance_company);const{data:re,error:J}=await ct.from("profiles").select("*").eq("id",t).single();if(J)throw J;P(re);const W=e?.insurance_company?.toLowerCase()||"";if(console.log("[ClaimSubmissionModal] insurerName:",W),!W||W==="not insured"||W==="none"){console.log("[ClaimSubmissionModal] No insurance company found"),v("Pet does not have an insurance company set. Please update pet information in Settings."),u("missing-data");return}const{data:{session:T}}=await ct.auth.getSession();if(!T?.access_token){v("Please log in to submit claims"),u("error");return}const B="http://localhost:8787";console.log("[ClaimSubmissionModal] Calling validation API:",`${B}/api/claims/validate-fields`),console.log("[ClaimSubmissionModal] Request body:",{claimId:n.id,userId:t,insurer:W});const ie=await fetch(`${B}/api/claims/validate-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T.access_token}`},body:JSON.stringify({claimId:n.id,userId:t,insurer:W})});console.log("[ClaimSubmissionModal] Response status:",ie.status),console.log("[ClaimSubmissionModal] Response ok:",ie.ok),console.log("[ClaimSubmissionModal] Response headers:",{"content-type":ie.headers.get("content-type"),"content-length":ie.headers.get("content-length")});const M=await ie.text();console.log("[ClaimSubmissionModal] Response text (first 500 chars):",M.substring(0,500));let ee;try{ee=JSON.parse(M),console.log("[ClaimSubmissionModal] Validation response:",ee)}catch(fe){throw console.error("[ClaimSubmissionModal] Failed to parse JSON response:",fe),console.error("[ClaimSubmissionModal] Full response text:",M),new Error(`API returned non-JSON response (status ${ie.status}): ${M.substring(0,200)}`)}if(!ee.ok){console.error("[ClaimSubmissionModal] Validation failed:",ee.error),v(`Error validating claim requirements: ${ee.error}`),u("error");return}if(console.log("[Validation] Result:",ee),ee.missingFields&&ee.missingFields.length>0){console.log("[ClaimSubmissionModal] Missing fields detected:",ee.missingFields),I({insurerName:e.insurance_company,missingFields:ee.missingFields,existingData:ee.existingData||{},suggestedValues:ee.suggestedValues||{}}),u("collect-missing-fields");return}console.log("[ClaimSubmissionModal] All fields present, proceeding to confirm"),u("confirm")}catch(re){console.error("[Validation] Error:",re),v(`Failed to validate claim: ${re.message}`),u("error")}}H()},[t,e,n]);const U=[];async function $(){console.log("[Preview] ========== PREVIEW PDF CLICKED =========="),console.log("[Preview] User Agent:",navigator.userAgent),console.log("[Preview] Window width:",window.innerWidth);try{k(!0);const H="http://localhost:8787",{data:{session:re}}=await ct.auth.getSession();if(!re?.access_token)throw new Error("Not authenticated");const J=n.pdf_path?"?merged=true":"";console.log("[Preview] Fetching PDF from:",`${H}/api/claims/${n.id}/preview-pdf${J}`);const W=await fetch(`${H}/api/claims/${n.id}/preview-pdf${J}`,{headers:{Authorization:`Bearer ${re.access_token}`}});if(console.log("[Preview] Response status:",W.status),console.log("[Preview] Response content-type:",W.headers.get("content-type")),!W.ok)if(W.headers.get("content-type")?.includes("application/json")){const ee=await W.json();console.error("[Preview] Server returned error:",ee);let fe=ee.error||"Failed to generate preview";throw ee.details&&(fe+=`

Details: ${ee.details}`),ee.fallback==="claim-form-only"?fe+=`

The claim form was generated but the vet invoice could not be retrieved from storage.`:ee.fallback==="merge-failed"&&(fe+=`

Both files exist but could not be merged into a single PDF.`),new Error(fe)}else throw new Error("Failed to generate preview");const T=await W.blob();console.log("[Preview] PDF blob size:",T.size),console.log("[Preview] PDF blob type:",T.type);const B=URL.createObjectURL(T);console.log("[Preview] Blob URL created:",B),console.log("[Preview]  PDF fetched successfully, size:",T.size,"bytes");const ie=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768;if(console.log("[Preview] Mobile detected:",ie),ie){console.log("[Preview] Using mobile-specific PDF handling");const M=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(console.log("[Preview] Is iOS:",M),M)console.log("[Preview] Opening PDF in same window (iOS)"),window.location.href=B;else{console.log("[Preview] Attempting download (Android)");const ee=document.createElement("a");ee.href=B,ee.download=`claim-${e.name}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),console.log("[Preview] Download triggered")}}else{console.log("[Preview] Opening PDF in new tab (desktop)");const M=window.open(B,"_blank","noopener,noreferrer");console.log("[Preview] New window opened:",!!M),n.pdf_path?console.log("[Preview] Opened merged PDF (claim form + vet invoice)"):console.log("[Preview] Opened claim form PDF (no vet invoice attached)")}}catch(H){console.error("[Preview PDF] ERROR:",H),console.error("[Preview PDF] Error stack:",H.stack),alert(`Could not generate preview: ${H.message}`)}finally{console.log("[Preview] Cleaning up, setting loading to false"),k(!1)}}async function le(){u("submitting"),v(null);try{const{data:{session:H}}=await ct.auth.getSession();if(!H?.access_token){v("Please log in to submit claims"),u("error");return}const J=await fetch("http://localhost:8787/api/claims/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H.access_token}`},body:JSON.stringify({claimId:n.id,userId:t})}),W=await J.json();if(!J.ok||!W.ok)throw new Error(W.error||"Failed to submit claim");console.log("[ClaimSubmission] Success:",W),f(W.messageId),u("success")}catch(H){console.error("[ClaimSubmission] Error:",H),v(H.message||"Failed to submit claim"),u("error")}}async function he(H){try{u("validating");const{data:{session:re}}=await ct.auth.getSession();if(!re?.access_token){v("Please log in to save claim information"),u("error");return}const W=await fetch(`http://localhost:8787/api/claims/${n.id}/save-collected-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${re.access_token}`},body:JSON.stringify({collectedData:H})}),T=await W.json();if(!W.ok||!T.ok){v("Failed to save claim information"),u("error");return}console.log("[Save Fields] Success:",T),u("confirm")}catch(re){console.error("[Save Fields] Error:",re),v("Failed to save claim information"),u("error")}}if(o==="validating")return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Validating Requirements..."}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Checking if all required information is complete"})]})});if(o==="collect-missing-fields"&&L)return l.jsx(J5,{open:!0,onClose:s,insurerName:L.insurerName,petId:e.id,petName:e.name,claimId:n.id,missingFields:L.missingFields,existingData:L.existingData,suggestedValues:L.suggestedValues,onComplete:he});if(o==="missing-data"){const H=()=>{s(),window.location.hash="#settings"};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full",children:[l.jsx("div",{className:"text-orange-500 text-6xl mb-4 text-center",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Missing Required Information"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-center",children:"Please complete your profile and pet information before submitting claims."}),l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-3",children:"Missing:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 space-y-1.5",children:m?.split(`
`).slice(1).map((re,J)=>l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),l.jsx("span",{children:re.replace("- ","")})]},J))})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How to complete:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:"1. Go to Settings (click button below)"}),l.jsx("li",{children:"2. Fill in your signature, insurance info, and address"}),l.jsx("li",{children:"3. Update your pet's breed and date of birth"}),l.jsx("li",{children:"4. Return here and submit your claim"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:H,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Go to Settings"})]})]})})}return o==="submitting"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Submitting Claim..."}),l.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Generating PDF and sending to ",A]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Creating claim form PDF..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Sending email to insurance company..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Updating claim status..."})]})]})]})}):o==="success"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Claim Submitted!"}),l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Your claim for ",l.jsx("strong",{children:e?.name||"your pet"})," has been automatically submitted to ",l.jsx("strong",{children:A}),"."]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"What happens next:"}),l.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-400 space-y-1",children:[l.jsxs("li",{children:[" Claim form PDF sent to ",A]}),l.jsx("li",{children:" Copy sent to your email (BCC)"}),l.jsx("li",{className:"ml-4 text-xs",children:" Don't see it? Check your spam or junk folder"}),l.jsx("li",{children:' Claim status updated to "Submitted"'}),l.jsx("li",{children:" Insurance company will review (typically 5-10 business days)"})]})]}),d&&l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6",children:l.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 font-mono break-all",children:["Tracking ID: ",d.slice(0,20),"..."]})}),l.jsx("button",{onClick:()=>{a(d),s()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold w-full",children:"Done"})]})}):o==="error"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Submission Failed"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"We couldn't submit your claim automatically."}),l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:l.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[l.jsx("strong",{children:"Error:"})," ",m]})}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Next steps:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:" Try again in a few minutes"}),l.jsx("li",{children:" Or manually mark as submitted after filing yourself"}),l.jsx("li",{children:" Contact support if the problem persists"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>u("confirm"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Auto-Submit Claim to ",A,"?"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Review the claim details before submitting"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:"Claim Summary"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pet:"}),l.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e?.name||"Unknown"," (",e?.species||"Pet",")"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Clinic:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.clinic_name||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Service Date:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.service_date||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagnosis:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-right max-w-xs line-clamp-2",children:n.visit_title||n.diagnosis||"N/A"})]}),l.jsxs("div",{className:"pt-3 border-t border-blue-200 dark:border-blue-700 flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-semibold",children:"Total Amount:"}),l.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:G})]})]})]}),U.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-1",children:"Missing Information"}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"The following information is missing from your claim:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 list-disc list-inside",children:U.map((H,re)=>l.jsx("li",{children:H},re))}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-2",children:"You can still submit, but the insurance company may request additional information."})]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("button",{onClick:$,disabled:w,className:"w-full py-3 px-4 border-2 border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Generating Preview..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Preview Claim Form PDF"]})}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Review before submitting"})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"What will happen:"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"1."}),l.jsx("span",{children:"Generate professional claim form PDF with all details"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"2."}),l.jsxs("span",{children:["Email claim form to ",l.jsx("strong",{children:A})," at their claims processing address"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"3."}),l.jsx("span",{children:"Send you a copy (BCC) so you have a record"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"4."}),l.jsx("span",{children:'Update claim status to "Submitted" in your dashboard'})]})]})]}),l.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Test Mode Active"}),l.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["This submission will be sent to ",l.jsx("strong",{children:"larry@uglydogadventures.com"})," for testing, not to the actual insurance company. Perfect for testing!"]})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:le,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all",children:[" Submit to ",A]}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})})}function Q5(){const n=W=>{if(!W)return null;const T=String(W).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!T)return null;const B=Number(T[1]),ie=Number(T[2])-1,M=Number(T[3]),ee=new Date(B,ie,M);return isNaN(ee.getTime())?null:ee},[e,t]=ue.useState([]),[s,a]=ue.useState([]),[o,u]=ue.useState(!0),[d,f]=ue.useState(null),[m,v]=ue.useState("all"),[w,k]=ue.useState("all"),[y,P]=ue.useState("email"),[L,I]=ue.useState("asc"),[A,G]=ue.useState(null);ue.useEffect(()=>{U()},[]);async function U(){try{u(!0),f(null);const{data:W,error:T}=await ct.from("profiles").select("*").order("created_at",{ascending:!1});if(T)throw T;const B=W.filter(j=>{const q=(j.email||"").toLowerCase();return!q.includes("larry")&&!q.includes("uglydogadventures")&&!q.includes("dogstrainedright")}),ie=new Set(B.map(j=>j.id)),{data:M,error:ee}=await ct.from("pets").select("*");if(ee)throw ee;const fe=M.filter(j=>ie.has(j.user_id)),{data:ae,error:F}=await ct.from("claims").select("*");if(F)throw F;const se=ae.filter(j=>ie.has(j.user_id)),ge=B.map(j=>{const q=fe.filter(ve=>ve.user_id===j.id),X=se.filter(ve=>ve.user_id===j.id),oe=X.reduce((ve,_e)=>ve+(_e.total_amount||0),0);let de="inactive";return X.length>0?de="active":q.length>0&&(de="pet-only"),{profile:j,pets:q,claims:X,petsCount:q.length,claimsCount:X.length,totalClaimAmount:oe,lastActive:j.updated_at||j.created_at,status:de}}),K=se.map(j=>{const q=B.find(oe=>oe.id===j.user_id),X=fe.find(oe=>oe.id===j.pet_id);return{...j,userEmail:q?.email||"Unknown",userName:q?.full_name||"Unknown",petName:X?.name||"Unknown",insuranceCompany:X?.insurance_company||"Unknown"}});t(ge),a(K)}catch(W){console.error("Error loading admin data:",W),f(W.message)}finally{u(!1)}}const $=ue.useMemo(()=>{const W=e.filter(se=>se.status==="active").length,T=e.filter(se=>se.status==="inactive").length,B=e.reduce((se,ge)=>se+ge.petsCount,0),ie=s.length,M=s.reduce((se,ge)=>se+(ge.total_amount||0),0),ee=s.filter(se=>se.filing_status==="draft").length,fe=s.filter(se=>se.filing_status==="submitted").length,ae=s.filter(se=>se.filing_status==="paid").length,F={};return s.forEach(se=>{const ge=se.insuranceCompany||"Unknown";F[ge]=(F[ge]||0)+1}),{totalUsers:e.length,activeUsers:W,inactiveUsers:T,totalPets:B,totalClaims:ie,totalAmount:M,draftClaims:ee,submittedClaims:fe,paidClaims:ae,insuranceBreakdown:F}},[e,s]),le=ue.useMemo(()=>[...e].sort((T,B)=>{let ie,M;switch(y){case"email":ie=T.profile.email,M=B.profile.email;break;case"name":ie=T.profile.full_name||"",M=B.profile.full_name||"";break;case"petsCount":ie=T.petsCount,M=B.petsCount;break;case"claimsCount":ie=T.claimsCount,M=B.claimsCount;break;case"lastActive":ie=new Date(T.lastActive).getTime(),M=new Date(B.lastActive).getTime();break;default:return 0}return ie<M?L==="asc"?-1:1:ie>M?L==="asc"?1:-1:0}),[e,y,L]),he=ue.useMemo(()=>s.filter(W=>!(m!=="all"&&W.filing_status!==m||w!=="all"&&W.insuranceCompany!==w)),[s,m,w]);function H(W){y===W?I(L==="asc"?"desc":"asc"):(P(W),I("asc"))}function re(W){switch(W){case"active":return"bg-green-100 text-green-800";case"pet-only":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function J(W){switch(W){case"submitted":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800"}}return o?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):d?l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading admin data"}),l.jsx("p",{className:"text-red-600 mt-2",children:d})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"System overview and user management"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Users"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:$.totalUsers}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-green-600",children:["Active: ",$.activeUsers]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-red-600",children:["Inactive: ",$.inactiveUsers]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Pets"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:$.totalPets}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Across all users"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Claims"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:$.totalClaims}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Draft: ",$.draftClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-blue-600",children:["Submitted: ",$.submittedClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-green-600",children:["Paid: ",$.paidClaims]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Amount"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",$.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All claims combined"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims by Insurance Company"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries($.insuranceBreakdown).map(([W,T])=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:W}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:T})]},W))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Users"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("email"),children:["Email ",y==="email"&&(L==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("name"),children:["Name ",y==="name"&&(L==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("petsCount"),children:["Pets ",y==="petsCount"&&(L==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("claimsCount"),children:["Claims ",y==="claimsCount"&&(L==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>H("lastActive"),children:["Last Active ",y==="lastActive"&&(L==="asc"?"":"")]}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map(W=>l.jsxs(Uf.Fragment,{children:[l.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>G(A===W.profile.id?null:W.profile.id),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W.profile.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W.profile.full_name||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:W.petsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:W.claimsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(W.lastActive).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${re(W.status)}`,children:W.status})})]}),A===W.profile.id&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"User Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",W.profile.phone_number||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Timezone:"})," ",W.profile.timezone||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"SMS Opt-in:"})," ",W.profile.sms_opt_in?"Yes":"No"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Email Reminders:"})," ",W.profile.email_reminders?"Yes":"No"]})]})]}),W.pets.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Pets (",W.pets.length,")"]}),l.jsx("div",{className:"space-y-2",children:W.pets.map(T=>l.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[l.jsxs("div",{className:"font-medium",children:[T.name," - ",T.species]}),l.jsxs("div",{className:"text-gray-600",children:[T.insurance_company,"  Policy: ",T.policy_number||"Not set"]})]},T.id))})]}),W.claims.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Recent Claims (",W.claims.length,") - Total: $",W.totalClaimAmount.toFixed(2)]}),l.jsxs("div",{className:"space-y-2",children:[W.claims.slice(0,5).map(T=>l.jsx("div",{className:"bg-white border rounded p-3 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:T.clinic_name||"Unknown Clinic"}),l.jsxs("div",{className:"text-gray-600",children:[T.service_date&&n(T.service_date)?.toLocaleDateString()||"No date","  $",T.total_amount?.toFixed(2)||"0.00"]})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${J(T.filing_status||"draft")}`,children:T.filing_status||"draft"})]})},T.id)),W.claims.length>5&&l.jsxs("div",{className:"text-sm text-gray-600",children:["+ ",W.claims.length-5," more claims"]})]})]})]})})})]},W.profile.id))})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Claims"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("select",{value:m,onChange:W=>v(W.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"paid",children:"Paid"})]}),l.jsxs("select",{value:w,onChange:W=>k(W.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Insurance"}),Object.keys($.insuranceBreakdown).map(W=>l.jsx("option",{value:W,children:W},W))]})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Date"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insurance"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PDF"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:he.map(W=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm text-gray-900",children:W.userName}),l.jsx("div",{className:"text-sm text-gray-500",children:W.userEmail})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W.service_date&&n(W.service_date)?.toLocaleDateString()||"-"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",W.total_amount?.toFixed(2)||"0.00"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${J(W.filing_status||"draft")}`,children:W.filing_status||"draft"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W.insuranceCompany}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:W.pdf_path?l.jsx("span",{className:"text-green-600",children:""}):l.jsx("span",{className:"text-gray-400",children:"-"})})]},W.id))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Showing ",he.length," of ",s.length," claims"]}),l.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",he.reduce((W,T)=>W+(T.total_amount||0),0).toFixed(2)]})]})})]})]})}function Z5({onBack:n}){const[e,t]=ue.useState(""),[s,a]=ue.useState(!1),[o,u]=ue.useState(!1),[d,f]=ue.useState(null),m=async v=>{v.preventDefault(),a(!0),f(null);try{const{error:w}=await ct.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(w)throw w;u(!0)}catch(w){f(w?.message||"Failed to send reset email")}finally{a(!1)}};return o?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:[l.jsx("div",{className:"font-medium mb-1",children:"Check your email"}),l.jsxs("div",{className:"text-sm",children:["We've sent a password reset link to ",l.jsx("span",{className:"font-mono",children:e})]})]}),l.jsx("button",{type:"button",onClick:n,className:"text-sm text-emerald-600 hover:text-emerald-700",children:" Back to login"})]}):l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Reset Password"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),d&&l.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm",children:d}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:v=>t(v.target.value),required:!0,placeholder:"you@example.com",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",children:s?"Sending...":"Send Reset Link"}),l.jsx("button",{type:"button",onClick:n,className:"text-sm text-emerald-600 hover:text-emerald-700",children:" Back to login"})]})}function ew(){const[n,e]=ue.useState(""),[t,s]=ue.useState(""),[a,o]=ue.useState(!1),[u,d]=ue.useState(!1),[f,m]=ue.useState(null),[v,w]=ue.useState(!1),k=async y=>{if(y.preventDefault(),o(!0),m(null),n!==t){m("Passwords do not match"),o(!1);return}if(n.length<6){m("Password must be at least 6 characters"),o(!1);return}try{const{error:P}=await ct.auth.updateUser({password:n});if(P)throw P;d(!0),setTimeout(()=>{window.location.href="/"},2e3)}catch(P){m(P?.message||"Failed to reset password")}finally{o(!1)}};return u?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:[l.jsx("div",{className:"font-medium mb-1",children:" Password Updated"}),l.jsx("div",{className:"text-sm",children:"Your password has been successfully reset. Redirecting to login..."})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:l.jsxs("form",{onSubmit:k,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Set New Password"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your new password below."})]}),f&&l.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm",children:f}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:"password",type:v?"text":"password",value:n,onChange:y=>e(y.target.value),required:!0,placeholder:"Enter new password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm pr-10"}),l.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 text-xs",children:v?"Hide":"Show"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",type:v?"text":"password",value:t,onChange:y=>s(y.target.value),required:!0,placeholder:"Confirm new password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",children:a?"Updating...":"Reset Password"})]})})})}async function ng(n){console.log("[createClaim] inserting",n);const{data:e,error:t}=await ct.from("claims").insert(n).select("*").single();if(t)throw t;return e}async function Ui(n){try{console.log("[listClaims] START - userId=",n);const{data:e,error:t}=await ct.from("claims").select("*, pets(id, name, species, insurance_company, filing_deadline_days)").eq("user_id",n).order("service_date",{ascending:!1});if(console.log("[listClaims] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[listClaims] ERROR:",t),t;return console.log("[listClaims] SUCCESS - count=",e?.length||0),e}catch(e){throw console.error("[listClaims] EXCEPTION:",e),e}}async function Jo(n,e){const{error:t}=await ct.from("claims").update(e).eq("id",n);if(t)throw t}async function tw(n){const{error:e}=await ct.from("claims").delete().eq("id",n);if(e)throw e}const hf=["pumpkin","spot","healthy paws","nationwide","trupanion","pets best"],ff=["demo@petclaimhelper.com","drsarah@petclaimhelper.com","david@mybenefitexperience.com","larry@uglydogadventures.com"];function rw(){const n=window.location.pathname,e=n.match(/^\/dose\/([a-zA-Z0-9-]+)$/i);if(console.log("[App Router] Path:",n,"DoseMatch:",e),n==="/dose-success")return console.log("[App Router] Rendering static success page"),l.jsx(K5,{});if(n==="/reset-password")return console.log("[App Router] Rendering reset password page"),l.jsx(ew,{});if(e){const t=e[1];return console.log("[App Router] Rendering standalone dose page for code:",t),l.jsx(Y5,{medicationId:t,userId:null,onClose:()=>{console.log("[App Router] Dose marking closed")}})}return console.log("[App Router] Rendering full app"),l.jsx(nw,{})}function nw(){const n=ue.useRef(null),[e,t]=ue.useState(null),[s,a]=ue.useState(!1),[o,u]=ue.useState(!1),[d,f]=ue.useState(!1),[m,v]=ue.useState(null),[w,k]=ue.useState(null),[y,P]=ue.useState([]),[L,I]=ue.useState(null),A=ue.useMemo(()=>y.find(C=>C.id===L)??null,[y,L]),[G,U]=ue.useState(""),[$,le]=ue.useState(""),[he,H]=ue.useState("insured"),[re,J]=ue.useState(!1),[W,T]=ue.useState({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:"",healthy_paws_pet_id:"",spot_account_number:""}),[B,ie]=ue.useState(null),[M,ee]=ue.useState(null),[fe,ae]=ue.useState(""),[F,se]=ue.useState(""),[ge,K]=ue.useState(""),[j,q]=ue.useState(""),[X,oe]=ue.useState(""),[de,ve]=ue.useState(""),[_e,je]=ue.useState(null),[be,$e]=ue.useState(null),[He,Xe]=ue.useState("login"),[rt,Z]=ue.useState(null),[Ze,Rt]=ue.useState([]),[Tt,We]=ue.useState(!1),[wt,st]=ue.useState(null),_t=ue.useRef(null),xt=ue.useRef(null),[Wt,St]=ue.useState([]),[Mt,Qt]=ue.useState(0),[Zt,ft]=ue.useState(!1),[Nt,ut]=ue.useState("all"),[_r,Jt]=ue.useState("app"),[Gt,Me]=ue.useState(!1),[jt,ot]=ue.useState(null),[cr,Et]=ue.useState(null),[Pt,ur]=ue.useState(""),[$t,Dt]=ue.useState(""),[dr,ni]=ue.useState(""),[cn,As]=ue.useState(""),[vn,It]=ue.useState([]),[Sn,qn]=ue.useState("insured"),[jn,zn]=ue.useState(!1),[ar,Cr]=ue.useState(null),[Mr,Ps]=ue.useState(""),[Ms,ts]=ue.useState(si()),[Us,Zr]=ue.useState(!1),[Cs,$n]=ue.useState(null),[xn,rs]=ue.useState(null),[bi,Bs]=ue.useState(!1),[wi,ma]=ue.useState([]),[_i,Nr]=ue.useState([]);function si(){const C=new Date,me=C.getFullYear(),Se=String(C.getMonth()+1).padStart(2,"0"),Pe=String(C.getDate()).padStart(2,"0");return`${me}-${Se}-${Pe}`}const[qi,Wn]=ue.useState(null),Es=C=>{Wn({message:C}),setTimeout(()=>Wn(null),2500)},[$a,ga]=ue.useState(null),[Ni,Hn]=ue.useState(!1),[xo,en]=ue.useState(0),[va,xa]=ue.useState(!1),[$r,ki]=ue.useState(null),[In,cs]=ue.useState(null),[Si,ns]=ue.useState(null),[Wr,us]=ue.useState(null),[ya,qs]=ue.useState(null);ue.useEffect(()=>{w&&requestAnimationFrame(()=>{document.body.offsetHeight})},[w]),ue.useEffect(()=>{if(console.log("[VISIT TITLE DEBUG] useEffect triggered",{extracted:w,diagnosis:w?.diagnosis,currentVisitTitle:$}),w){const C=w.diagnosis?.trim()||"Vet visit";console.log("[VISIT TITLE DEBUG] Setting visitTitle to:",C),le(C)}},[w]);const[zi,ds]=ue.useState(!1),ii=C=>C.trim().toLowerCase(),fr=(C,me)=>{const Se=ii(C),Pe=ii(me),Ue=Se.length,Ye=Pe.length;if(Ue===0)return Ye;if(Ye===0)return Ue;const nt=Array.from({length:Ue+1},()=>Array(Ye+1).fill(0));for(let Qe=0;Qe<=Ue;Qe++)nt[Qe][0]=Qe;for(let Qe=0;Qe<=Ye;Qe++)nt[0][Qe]=Qe;for(let Qe=1;Qe<=Ue;Qe++)for(let Ke=1;Ke<=Ye;Ke++){const it=Se[Qe-1]===Pe[Ke-1]?0:1;nt[Qe][Ke]=Math.min(nt[Qe-1][Ke]+1,nt[Qe][Ke-1]+1,nt[Qe-1][Ke-1]+it)}return nt[Ue][Ye]},$i=(C,me)=>{const Se=ii(C),Pe=ii(me);if(!Se||!Pe)return 0;if(Se===Pe)return 1;if(Se.includes(Pe)||Pe.includes(Se))return .92;const Ue=fr(Se,Pe),Ye=Math.max(Se.length,Pe.length);return 1-Ue/(Ye||1)},ji=(C,me)=>{const Se=Array(C.length).fill(null),Pe=new Set;return C.forEach((Ue,Ye)=>{const Qe=me.map(Ke=>({id:Ke.id,score:$i(Ue.petName||"",Ke.name||"")})).sort((Ke,it)=>it.score-Ke.score).find(Ke=>Ke.score>=.8&&!Pe.has(Ke.id));Qe&&(Se[Ye]=Qe.id,Pe.add(Qe.id))}),Se};ue.useEffect(()=>{try{console.log("[auth] calling getSession()")}catch{}ct.auth.getSession().then(async({data:me})=>{try{console.log("[auth] getSession() result:",{hasSession:!!me?.session,userId:me?.session?.user?.id||null})}catch{}const Se=me.session;if(Se?.user){je(Se.user.email??null),$e(Se.user.id),Xe("app"),Rp(Se.user.id,Se.user.email??null).catch(()=>{});try{const Pe=Intl.DateTimeFormat().resolvedOptions().timeZone;Dp(Pe).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",Se.user.id)}catch{}Promise.all([cu(Se.user.id),ct.from("profiles").select("onboarding_complete").eq("id",Se.user.id).single()]).then(([Pe,Ue])=>{P(Pe);const Ye=Ue.data?.onboarding_complete??!1;$n(Ye),(Pe||[]).length===0&&!Ye&&Zr(!0)}).catch(Pe=>{console.error("[auth] dbLoadPets failed:",Pe),P([])}),Ui(Se.user.id).then(St).catch(Pe=>{console.error("[auth] listClaims failed:",Pe),St([])})}else{try{console.log("[auth] getSession() no session found - showing login")}catch{}Xe("login")}}).catch(me=>{try{console.error("[auth] getSession() error:",me)}catch{}Xe("login")});const{data:C}=ct.auth.onAuthStateChange(async(me,Se)=>{try{console.log("[auth] onAuthStateChange:",{event:me,hasSession:!!Se,userId:Se?.user?.id||null})}catch{}if(Se?.user){je(Se.user.email??null),$e(Se.user.id),Xe("app"),Rp(Se.user.id,Se.user.email??null).catch(()=>{});try{const Pe=localStorage.getItem("pending_sms_consent");if(Pe){console.log("[auth] Found pending SMS consent, saving to database...");const Ue=JSON.parse(Pe);let Ye=null;try{Ye=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,console.log("[auth] IP address fetched:",Ye)}catch(it){console.log("[auth] Could not fetch IP address:",it)}const nt={user_id:Se.user.id,phone_number:Ue.phone_number,consented:Ue.consented,consent_text:Ue.consent_text,ip_address:Ye};console.log("[auth] Inserting SMS consent data:",nt);const{data:Qe,error:Ke}=await ct.from("sms_consent").insert(nt).select();Ke?(console.error("[auth] Failed to save SMS consent:",Ke),console.error("[auth] Consent error details:",JSON.stringify(Ke,null,2))):(console.log("[auth] SMS consent saved successfully!",Qe),localStorage.removeItem("pending_sms_consent"),console.log("[auth] Cleared pending SMS consent from localStorage"))}}catch(Pe){console.error("[auth] Error processing pending SMS consent:",Pe)}try{const Pe=Intl.DateTimeFormat().resolvedOptions().timeZone;Dp(Pe).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",Se.user.id)}catch{}Promise.all([cu(Se.user.id),ct.from("profiles").select("onboarding_complete").eq("id",Se.user.id).single()]).then(([Pe,Ue])=>{P(Pe);const Ye=Ue.data?.onboarding_complete??!1;$n(Ye),(Pe||[]).length===0&&!Ye&&Zr(!0)}).catch(Pe=>{console.error("[auth] dbLoadPets failed:",Pe),P([])}),Ui(Se.user.id).then(St).catch(Pe=>{console.error("[auth] listClaims failed:",Pe),St([])})}else{je(null),$e(null),P([]);try{console.log("[auth] onAuthStateChange - signed out, clearing state")}catch{}Xe("login")}});return()=>{C.subscription.unsubscribe()}},[]),ue.useEffect(()=>{if(!be){Me(!1);return}ct.from("profiles").select("is_admin").eq("id",be).single().then(({data:C,error:me})=>{if(me){console.error("[admin] Failed to load admin status:",me),Me(!1);return}Me(C?.is_admin===!0)}).catch(()=>Me(!1))},[be]),ue.useEffect(()=>{y&&y.length===1&&I(C=>C||y[0].id)},[y]),ue.useEffect(()=>{if(localStorage.getItem("justCompletedOnboarding")==="true"&&y&&y.length>0)if(y.some(Se=>!Se.photo_url)){ds(!0);const Se=setTimeout(()=>{ds(!1),localStorage.removeItem("justCompletedOnboarding")},5e3),Pe=()=>{ds(!1),localStorage.removeItem("justCompletedOnboarding"),document.removeEventListener("click",Pe)};return document.addEventListener("click",Pe),()=>{clearTimeout(Se),document.removeEventListener("click",Pe)}}else localStorage.removeItem("justCompletedOnboarding")},[y]),ue.useEffect(()=>{try{localStorage.removeItem("pch.finPeriod")}catch{}},[]),ue.useEffect(()=>{Qt(C=>(console.log("[App]  Incrementing dataRefreshToken:",C,"",C+1,"| pets count:",y.length),C+1))},[Wt,y,Nt]),ue.useEffect(()=>{jt&&(Et(jt.pet_id||null),ur(jt.service_date||""),ni(jt.visit_title||""),Dt(jt.diagnosis||""),As(jt.visit_notes||""),It(Array.isArray(jt.line_items)?jt.line_items:[]),qn(jt.expense_category||"insured"))},[jt]);const Wa=()=>{const C=W.name.trim();if(!C)return;if(!fe||fe==="Not Insured"||fe===" Select ")W.insuranceCompany="",W.filing_deadline_days="",W.policyNumber="";else if(fe==="Custom Insurance"){const Ue=ge.trim(),Ye=Number(j);if(!Ue){alert("Enter custom insurance company name");return}if(!Number.isFinite(Ye)||Ye<1||Ye>365){alert("Deadline must be 1-365 days");return}W.insuranceCompany=Ue,W.filing_deadline_days=Ye}else W.insuranceCompany=Il(fe),W.filing_deadline_days=tn(Il(fe))||90;console.log(" [addPet] STEP 1 - Form values from newPet:"),console.log("  - newPet.spot_account_number:",W.spot_account_number),console.log("  - After trim:",(W.spot_account_number||"").trim()),console.log("  - Final value:",(W.spot_account_number||"").trim()||null);const me=globalThis.crypto?.randomUUID?.()??String(Date.now()),Se={id:me,name:C,species:W.species,insuranceCompany:W.insuranceCompany||"",policyNumber:(W.policyNumber||"").trim(),ownerName:"",ownerPhone:"",filing_deadline_days:W.filing_deadline_days,monthly_premium:W.monthly_premium===""?null:Number(W.monthly_premium),deductible_per_claim:W.deductible_per_claim===""?null:Number(W.deductible_per_claim),insurance_pays_percentage:W.insurance_pays_percentage===""?null:Number(W.insurance_pays_percentage)/100,annual_coverage_limit:null,coverage_start_date:W.coverage_start_date||null,healthy_paws_pet_id:(W.healthy_paws_pet_id||"").trim()||null,spot_account_number:(W.spot_account_number||"").trim()||null};console.log(" [addPet] STEP 2 - Created PetProfile object:"),console.log("  - created.spot_account_number:",Se.spot_account_number),console.log("  - Full created object:",Se);const Pe=[...y,Se];if(P(Pe),be?(console.log(" [addPet] STEP 3 - Calling dbUpsertPet with userId:",be),Bh(be,Se).then(()=>{console.log(" [addPet] STEP 4 - dbUpsertPet SUCCESS")}).catch(Ue=>{console.error(" [addPet] STEP 4 - dbUpsertPet ERROR:",Ue)})):console.log(" [addPet] STEP 3 - SKIPPED dbUpsertPet (no userId)"),wt!==null){const Ue=[...Ze];Ue[wt]=me,Rt(Ue),st(null)}else I(me);J(!1),T({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:"",healthy_paws_pet_id:"",spot_account_number:""}),ae(""),K(""),q("")},yo=C=>{ie(C.id),ee({name:C.name,species:C.species,insuranceCompany:C.insuranceCompany,filing_deadline_days:C.filing_deadline_days||"",monthly_premium:C.monthly_premium??"",deductible_per_claim:C.deductible_per_claim??"",coverage_start_date:C.coverage_start_date||"",insurance_pays_percentage:C.insurance_pays_percentage!=null?Math.round(Number(C.insurance_pays_percentage)*100):"",policyNumber:C.policyNumber||"",healthy_paws_pet_id:C.healthy_paws_pet_id||"",spot_account_number:C.spot_account_number||""}),!C.insuranceCompany||C.insuranceCompany===""?se("Not Insured"):se(S5(C.insuranceCompany))},bo=async()=>{if(console.log("[saveEdit]  Save started",{editingPetId:B,editPet:M}),!B||!M)return;let C="",me="";if(!F||F==="Not Insured"||F===" Select ")C="",me="";else if(F==="Custom Insurance"){const Ue=X.trim(),Ye=Number(de);if(!Ue){alert("Enter custom insurance company name");return}if(!Number.isFinite(Ye)||Ye<1||Ye>365){alert("Deadline must be 1-365 days");return}C=Ue,me=Ye}else C=Il(F),me=tn(C)||90;const Se=y.map(Ue=>Ue.id===B?{...Ue,name:M.name.trim(),species:M.species,insuranceCompany:C,policyNumber:(M.policyNumber||"").trim(),ownerName:Ue.ownerName||"",ownerPhone:Ue.ownerPhone||"",filing_deadline_days:me,monthly_premium:M.monthly_premium===""?null:Number(M.monthly_premium),deductible_per_claim:M.deductible_per_claim===""?null:Number(M.deductible_per_claim),coverage_start_date:M.coverage_start_date||null,insurance_pays_percentage:M.insurance_pays_percentage===""?null:Number(M.insurance_pays_percentage)/100,annual_coverage_limit:Ue.annual_coverage_limit??null,healthy_paws_pet_id:M.healthy_paws_pet_id||null,spot_account_number:M.spot_account_number||null}:Ue),Pe=Se.find(Ue=>Ue.id===B);if(console.log("[saveEdit]  Pet data to save:",Pe),be){const Ue=Se.find(Ye=>Ye.id===B);if(Ue)try{console.log("[saveEdit]  Starting dbUpsertPet..."),await Bh(be,Ue),console.log("[saveEdit]  dbUpsertPet complete"),console.log("[saveEdit]  Starting dbLoadPets...");const Ye=await cu(be);console.log("[saveEdit]  dbLoadPets complete, got",Ye.length,"pets"),console.log("[saveEdit]  Refreshed pet data:",Ye.find(nt=>nt.id===B)),P(Ye),console.log("[saveEdit]  State updated with fresh DB data"),Qt(nt=>(console.log("[saveEdit]  Forcing dataRefreshToken increment:",nt,"",nt+1),nt+1)),console.log("[saveEdit]  Financial Summary refresh triggered")}catch(Ye){console.error("[saveEdit]  Error:",Ye),P(Se)}}else P(Se);ie(null),ee(null),console.log("[saveEdit]  Save complete")},ba=()=>n.current?.click(),wa=async()=>{try{console.log("[auth] signOut() called")}catch{}const{error:C}=await ct.auth.signOut();try{console.log("[auth] signOut() result:",C||null)}catch{}try{const{data:me}=await ct.auth.getSession();console.log("[auth] post-signOut getSession():",{hasSession:!!me?.session})}catch{}},On=C=>{if(console.log("[MOBILE DEBUG] ========== processFile CALLED =========="),console.log("[MOBILE DEBUG] file:",C),console.log("[MOBILE DEBUG] file type:",C?.type),console.log("[MOBILE DEBUG] file size:",C?.size),!C){console.log("[MOBILE DEBUG] No file provided, setting selectedFile to null"),t(null);return}if(!(C.type.startsWith("image/")||C.type==="application/pdf")){console.log("[MOBILE DEBUG] File type not allowed:",C.type),t(null);return}const Se=C.type.startsWith("image/"),Pe=Se?URL.createObjectURL(C):void 0;console.log("[MOBILE DEBUG] Setting selectedFile:",{fileName:C.name,fileType:C.type,isImage:Se,objectUrl:Pe}),t({file:C,objectUrl:Pe}),k(null),v(null)},zs=ue.useCallback(C=>{console.log("[MOBILE DEBUG] ========== handleChange CALLED =========="),console.log("[MOBILE DEBUG] e.target.files:",C.target.files),console.log("[MOBILE DEBUG] e.target.files?.[0]:",C.target.files?.[0]),On(C.target.files?.[0]),C.target.value=""},[]),Vn=C=>{C.preventDefault(),C.stopPropagation(),a(!0)},hs=C=>{C.preventDefault(),C.stopPropagation(),a(!0)},Wi=C=>{C.preventDefault(),C.stopPropagation(),a(!1)},Ft=C=>{C.preventDefault(),C.stopPropagation(),a(!1);const me=C.dataTransfer;if(!me)return;const Se=me.files?.[0]??null;On(Se)},$s=ue.useMemo(()=>{if(!e)return"";const{size:C}=e.file,me=1024,Se=me*1024;return C<me?`${C} B`:C<Se?`${(C/me).toFixed(1)} KB`:`${(C/Se).toFixed(2)} MB`},[e]),nl=C=>{const me=typeof C?.clinicName=="string"?C.clinicName:typeof C?.clinic_name=="string"?C.clinic_name:"",Se=typeof C?.clinicAddress=="string"?C.clinicAddress:typeof C?.clinic_address=="string"?C.clinic_address:"",Pe=typeof C?.clinicPhone=="string"?C.clinicPhone:typeof C?.clinic_phone=="string"?C.clinic_phone:void 0,Ue=typeof C?.petName=="string"?C.petName:typeof C?.pet_name=="string"?C.pet_name:"",Ye=typeof C?.dateOfService=="string"?C.dateOfService:typeof C?.service_date=="string"?C.service_date:"",nt=typeof C?.totalAmount=="string"?C.totalAmount:C?.total_amount!=null?String(C.total_amount):"",Qe=typeof C?.invoiceNumber=="string"?C.invoiceNumber:typeof C?.invoice_number=="string"?C.invoice_number:void 0,it=(Array.isArray(C?.lineItems)?C.lineItems:Array.isArray(C?.line_items)?C.line_items:[]).map(x=>({description:typeof x?.description=="string"?x.description:"",amount:typeof x?.amount=="string"?x.amount:x?.amount!=null?String(x.amount):""}));return{clinicName:me,clinicAddress:Se,clinicPhone:Pe,petName:Ue,dateOfService:Ye,totalAmount:nt,diagnosis:typeof C?.diagnosis=="string"?C.diagnosis:"",lineItems:it,invoiceNumber:Qe}},wo=C=>{if(!C||!Array.isArray(C.pets))return null;const me=C.pets.map(Se=>({petName:typeof Se?.petName=="string"?Se.petName:"",petSpecies:typeof Se?.petSpecies=="string"?Se.petSpecies:void 0,lineItems:Array.isArray(Se?.lineItems)?Se.lineItems.map(Pe=>({description:typeof Pe?.description=="string"?Pe.description:"",amount:typeof Pe?.amount=="string"?Pe.amount:String(Pe?.amount??"")})):[],subtotal:typeof Se?.subtotal=="string"?Se.subtotal:void 0}));return{clinicName:typeof C?.clinicName=="string"?C.clinicName:"",clinicAddress:typeof C?.clinicAddress=="string"?C.clinicAddress:"",clinicPhone:typeof C?.clinicPhone=="string"?C.clinicPhone:typeof C?.clinic_phone=="string"?C.clinic_phone:void 0,dateOfService:typeof C?.dateOfService=="string"?C.dateOfService:"",diagnosis:typeof C?.diagnosis=="string"?C.diagnosis:"",pets:me,invoiceNumber:typeof C?.invoiceNumber=="string"?C.invoiceNumber:void 0}},Dn=C=>{const me=(C||"").replace(/[^0-9.\-]/g,""),Se=parseFloat(me);return Number.isFinite(Se)?Se:0},Ws=C=>`$${C.reduce((Se,Pe)=>Se+Dn(Pe.amount),0).toFixed(2)}`,Ha=async(C,me,Se)=>{try{console.log("[uploadClaimPdf] Starting upload...",{uid:C,claimId:me,blobSize:Se.size,blobType:Se.type,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)});let Pe=Se;Se instanceof File||(console.log("[uploadClaimPdf] Converting Blob to File for better mobile compatibility"),Pe=new File([Se],`${me}.pdf`,{type:"application/pdf"}));const Ue=`${C}/${me}.pdf`;console.log("[uploadClaimPdf] Uploading to path:",Ue);const{error:Ye}=await ct.storage.from("claim-pdfs").upload(Ue,Pe,{upsert:!0,contentType:"application/pdf"});if(Ye)throw console.error("[uploadClaimPdf]  Supabase storage error:",Ye),new Error(`Storage upload failed: ${Ye.message}`);console.log("[uploadClaimPdf]  Storage upload successful, updating claim record...");const nt=await Jo(me,{pdf_path:Ue});console.log("[uploadClaimPdf]  Claim record updated with pdf_path:",Ue,"Result:",nt);const{data:Qe,error:Ke}=await ct.from("claims").select("pdf_path").eq("id",me).single();if(Ke)console.error("[uploadClaimPdf]   Could not verify pdf_path update:",Ke);else{if(Qe?.pdf_path!==Ue)throw console.error("[uploadClaimPdf]  pdf_path verification FAILED - expected:",Ue,"got:",Qe?.pdf_path),new Error("Failed to update claim record with pdf_path");console.log("[uploadClaimPdf]  Verified pdf_path was saved correctly:",Qe.pdf_path)}return Ue}catch(Pe){throw console.error("[uploadClaimPdf]  CRITICAL ERROR - Invoice will NOT be attached:",Pe),Pe}},_a=async(C,me)=>{if(!be){qs("Please log in to upload photos");return}const Se=5*1024*1024;if(me.size>Se){qs("Photo must be smaller than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(me.type)){qs("Please upload a PNG or JPEG image");return}us(C),qs(null);try{const Ue=me.name.split(".").pop()||"jpg",Ye=Date.now(),nt=`${be}/${C}-${Ye}.${Ue}`,{error:Qe}=await ct.storage.from("pet-photos").upload(nt,me,{upsert:!0,contentType:me.type});if(Qe)throw Qe;const{data:Ke}=ct.storage.from("pet-photos").getPublicUrl(nt);if(!Ke?.publicUrl)throw new Error("Failed to get public URL");const it=y.find(Q=>Q.id===C);if(!it)throw new Error("Pet not found");const x={...it,photo_url:Ke.publicUrl};await Bh(be,x);const E=await cu(be);P(E),Es("Photo uploaded successfully!")}catch(Ue){console.error("[uploadPetPhoto] error",Ue),qs(Ue?.message||"Failed to upload photo. Please try again.")}finally{us(null)}},Hi=async(C,me)=>{const Se=me.target.files?.[0];Se&&(await _a(C,Se),me.target.value="")},[_o,Hs]=ue.useState(!1),Vi=async()=>{if(console.log("[MOBILE DEBUG] ========== handleProcess CALLED =========="),console.log("[MOBILE DEBUG] selectedFile:",e),console.log("[MOBILE DEBUG] typeof selectedFile:",typeof e),console.log("[MOBILE DEBUG] selectedFile?.file:",e?.file),!e){console.log("[MOBILE DEBUG]  EARLY RETURN - No selectedFile!");return}u(!0),v(null);try{console.log("[extract] starting server-side extraction, file type:",e.file.type),console.log("[extract] file size:",e.file.size),console.log("[extract] file name:",e.file.name);const C="https://pet-claim-helper.onrender.com",me=new FormData;me.append("file",e.file);const Se=new AbortController,Ue=setTimeout(()=>{try{Se.abort()}catch{}},9e4),Ye=await fetch(`${C}/api/extract-pdf`,{method:"POST",body:me,signal:Se.signal});if(clearTimeout(Ue),!Ye.ok){const x=await Ye.text().catch(()=>"");throw new Error(x||`Server error (${Ye.status})`)}const nt=await Ye.json();if(console.log("[MOBILE DEBUG] Full JSON response:",JSON.stringify(nt,null,2)),!nt||nt.ok!==!0||!nt.data)throw console.error("[extract] bad response shape",nt),new Error("Invalid extraction response");const Qe=nt.data;if(console.log("[MOBILE DEBUG] Parsed data from server:",JSON.stringify(Qe,null,2)),!Qe)throw console.error("[extract] empty parsed data from server response"),new Error("Could not parse JSON from server response.");const Ke=wo(Qe);if(Ke&&Ke.pets.length>1){console.log("[MOBILE DEBUG] Multi-pet extraction detected:",Ke),Z(Ke),k(null);const x=ji(Ke.pets,y);Rt(x);return}const it=nl(Qe);console.log("[MOBILE DEBUG] Normalized extraction result:",JSON.stringify(it,null,2)),console.log("[VISIT TITLE DEBUG] Extracted diagnosis value:",it.diagnosis),A&&(it.petName=A.name),console.log("[MOBILE DEBUG] Final extraction being set to state:",JSON.stringify(it,null,2)),console.log("[VISIT TITLE DEBUG] About to call setExtracted with diagnosis:",it.diagnosis),k(it),Z(null)}catch(C){const me=String(C?.message||""),Pe=String(C?.name||"")==="AbortError"||/aborted|timeout/i.test(me),Ue=/NetworkError|Failed to fetch|TypeError: Failed to fetch/i.test(me),Ye=C?.error&&(C.error.message||C.error?.error?.message)||me;v(Pe?"Extraction timed out. Mobile networks can be slow  please try again. We now wait up to 90 seconds.":Ue?"Network error during extraction. Please check your connection and try again.":Ye||"AI extraction failed. Please try again."),console.error("[extract] error:",{name:C?.name,message:C?.message,cause:C?.cause});const nt={clinicName:"",clinicAddress:"",clinicPhone:"",petName:A?A.name:"",dateOfService:"",totalAmount:"",diagnosis:"",lineItems:[]};k(nt),Z(null)}finally{u(!1)}},tn=C=>{const me=C.pets?.filing_deadline_days;return typeof me=="number"&&me>0?me:90},Vs=C=>{if(!C.service_date)return null;const me=String(C.service_date).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!me)return null;const Se=Number(me[1]),Pe=Number(me[2])-1,Ue=Number(me[3]),Ye=new Date(Se,Pe,Ue);return Number.isNaN(Ye.getTime())?null:Ye},Gi=C=>{const me=Vs(C);if(!me)return null;const Se=new Date(me.getTime());Se.setDate(Se.getDate()+tn(C));const Pe=new Date,Ue=Se.getTime()-Pe.getTime();return Math.ceil(Ue/(1e3*60*60*24))},Va=C=>{switch((C||"not_submitted").toLowerCase()){case"filed":case"submitted":return{text:"Claim - Filed",cls:"bg-emerald-50 text-emerald-700"};case"approved":return{text:"Approved",cls:"bg-emerald-50 text-emerald-700"};case"paid":return{text:"Paid",cls:"bg-emerald-50 text-emerald-700"};case"denied":return{text:"Denied",cls:"bg-rose-50 text-rose-700"};case"not_filed":default:return{text:"Bill - Pending Submission",cls:"bg-blue-50 text-blue-700"}}},Na=C=>{const me=Gi(C),Se=(C.filing_status||"not_submitted").toLowerCase(),Pe=Se==="filed"?"submitted":Se;return Pe==="denied"?{text:" Claim Denied",cls:"bg-red-100 text-red-800 border border-red-300 font-semibold"}:Pe==="approved"?{text:" Approved",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:Pe==="paid"?{text:" Paid",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:Pe==="submitted"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:me===null?{text:"No date",cls:"bg-slate-100 text-slate-600"}:me<0?{text:" DEADLINE PASSED - Submit now!",cls:"bg-red-100 text-red-800 border border-red-300 font-bold"}:me<5?{text:` URGENT - ${me} days`,cls:"bg-red-100 text-red-800 border border-red-300 font-bold animate-pulse"}:me<=14?{text:` Due soon - ${me} days`,cls:"bg-orange-100 text-orange-800 border border-orange-300 font-semibold"}:me<=29?{text:` Due soon - ${me} days`,cls:"bg-yellow-100 text-yellow-800 border border-yellow-300 font-semibold"}:{text:` Plenty of time - ${me} days`,cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}},un=C=>`$${(typeof C=="number"&&Number.isFinite(C)?C:0).toFixed(2)}`,Ai=ue.useMemo(()=>{const C=[...Wt];return C.sort((me,Se)=>{const Pe=Vs(me)?.getTime()||0;return(Vs(Se)?.getTime()||0)-Pe}),C},[Wt]),fs=ue.useMemo(()=>{const C=Wt.length,me=Wt.filter(nt=>String(nt.expense_category||"insured").toLowerCase()==="insured"),Se=me.filter(nt=>["not_filed","not_submitted"].includes(String(nt.filing_status||"not_submitted").toLowerCase())),Pe=Se.reduce((nt,Qe)=>nt+(Number(Qe.total_amount)||0),0),Ue=me.filter(nt=>["filed","submitted"].includes(String(nt.filing_status||"").toLowerCase())).length,Ye=Se.filter(nt=>{const Qe=Gi(nt);return Qe!==null&&Qe>=1&&Qe<=14}).length;return{total:C,notFiledCount:Se.length,notFiledSum:Pe,filedPending:Ue,expiringSoon:Ye}},[Wt]);return ue.useMemo(()=>{const C=kt=>{if(!kt)return null;const mt=String(kt).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!mt)return null;const sr=Number(mt[1]),er=Number(mt[2])-1,kr=Number(mt[3]),pr=new Date(sr,er,kr);return Number.isNaN(pr.getTime())?null:pr},me=kt=>{const mt=C(kt);if(!mt)return 0;const sr=new Date;if(Nt==="2026"){if(mt.getFullYear()>2026)return 0;const br=mt.getFullYear()<2026?0:mt.getMonth(),ps=sr.getFullYear()===2026?sr.getMonth():11;return Math.max(0,ps-br+1)}if(Nt==="2025"){if(mt.getFullYear()>2025)return 0;const br=mt.getFullYear()<2025?0:mt.getMonth(),ps=sr.getFullYear()===2025?sr.getMonth():11;return Math.max(0,ps-br+1)}if(Nt==="2024"){if(mt.getFullYear()>2024)return 0;const br=mt.getFullYear()<2024?0:mt.getMonth();return Math.max(0,11-br+1)}const er=sr,kr=(er.getFullYear()-mt.getFullYear())*12+(er.getMonth()-mt.getMonth())+1;return Math.max(0,kr)},Se=Wt.filter(kt=>{const mt=kt.service_date?C(kt.service_date):null;if(!mt||Number.isNaN(mt.getTime()))return!1;if(Nt==="all")return!0;if(Nt==="2026")return mt.getFullYear()===2026;if(Nt==="2025")return mt.getFullYear()===2025;if(Nt==="2024")return mt.getFullYear()===2024;if(Nt==="last12"){const sr=new Date,er=new Date(sr.getTime());return er.setDate(er.getDate()-365),mt>=er&&mt<=sr}return!0}),Pe={insured:{sum:0,count:0},not_insured:{sum:0,count:0},maybe_insured:{sum:0,count:0}};let Ue=0,Ye=0,nt=0,Qe=0;const Ke={};let it=0,x=0;const E=new Date;let Q=0,pe=0,we=0,Oe=0,ze=0,at=0;for(const kt of Se){const mt=Number(kt.total_amount||0),sr=String(kt.filing_status||"not_filed").toLowerCase(),er=kt.expense_category||"insured",kr=C(kt.service_date);if(Qe+=mt,Pe[er].sum+=mt,Pe[er].count+=1,sr==="paid"){const br=Number(kt.reimbursed_amount||0);Ue+=br,er==="insured"&&(at+=Math.max(0,mt-br))}else(sr==="filed"||sr==="approved")&&(Ye+=mt);if((sr==="denied"||er==="not_insured")&&(nt+=mt),er!=="insured"&&(Oe+=mt),sr==="approved"&&(it+=mt),kr&&!Number.isNaN(kr.getTime())){if(kr<=E&&(Q+=mt,sr==="paid")){const br=Number(kt.reimbursed_amount||0);x+=br,pe+=br}kr<=E&&sr==="submitted"&&er==="insured"&&(ze+=mt)}const pr=kt.pets?.name||"Unknown Pet";Ke[pr]||(Ke[pr]={sum:0,count:0}),Ke[pr].sum+=mt,Ke[pr].count+=1}for(const kt of y){const mt=Number(kt.monthly_premium||0);mt>0&&(we+=mt*me(kt.coverage_start_date||null))}for(const kt of Se){const mt=String(kt.filing_status||"").toLowerCase(),sr=String(kt.expense_category||"").toLowerCase();mt==="paid"&&sr==="insured"&&(Number(kt.total_amount||0),Math.max(0,Number(kt.deductible_applied)||0),Math.max(0,Number(kt.reimbursed_amount)||0))}const pt=we+Oe+at,Ut=Math.max(0,Q-pe);return{byCategory:Pe,reimbursed:Ue,awaiting:Ye,outOfPocket:nt,grandTotal:Qe,perPet:Ke,awaitingInsured:it,periodSpent:pt,periodReimbursed:x,periodNet:pt,definiteTotal:pt,pendingTotal:ze,spentOnAllPets:Q,reimbursedPaidPeriod:pe,netCostPeriod:Ut}},[Wt,Nt]),l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100",children:[qi&&l.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:l.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm shadow-lg border border-slate-700",children:qi.message})}),l.jsx("header",{className:"px-4 pt-2 pb-3 md:py-8 bg-gradient-to-b from-white/50 to-transparent dark:from-slate-900/50",children:l.jsxs("div",{className:"mx-auto max-w-6xl",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center mb-1 md:mb-6",children:[l.jsx("img",{src:"/pch-logo.png",alt:"Pet Claim Helper",className:"w-[70vw] max-w-[320px] md:w-[90vw] md:max-w-[500px] h-auto object-contain mt-1 mb-0 md:mt-0 md:mb-0"}),(()=>{const C=y.some(Se=>{const Pe=Se.insuranceCompany?.toLowerCase()||"";return hf.some(Ue=>Pe.includes(Ue))}),me=_e&&ff.includes(_e.toLowerCase());return C||me?null:l.jsx("div",{className:"w-full px-4 mt-4 mb-3 md:mt-6 md:mb-4 animate-fade-in",children:l.jsx("div",{className:"max-w-3xl mx-auto",children:l.jsx("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-[2px] shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02]",children:l.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl px-6 py-4 md:px-8 md:py-5",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 md:gap-4",children:[l.jsx("span",{className:"text-3xl md:text-4xl animate-pulse",children:""}),l.jsxs("div",{className:"text-center md:text-left",children:[l.jsx("div",{className:"font-bold text-lg md:text-xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Coming Soon: Auto-Submit Claims"}),l.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mt-1",children:"One-click submission. Track payments. Never miss deadlines."})]})]})})})})})})(),l.jsxs("div",{className:"text-base md:text-lg font-bold text-gray-500 dark:text-gray-400 text-center max-w-xl px-4 leading-snug mt-1 mb-3 md:mt-0 md:mb-0",children:[l.jsx("div",{children:"Track Vet Bills. File Pet Insurance Instantly."}),l.jsx("div",{children:"Get Paid Faster."})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 flex-wrap mt-2 md:mt-0",children:[He==="app"&&l.jsxs("button",{type:"button",onClick:()=>xt.current?.scrollIntoView({behavior:"smooth"}),className:"relative inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:["Bills (",Wt.length,")",fs.expiringSoon>0&&l.jsx("span",{className:"ml-2 inline-block h-2 w-2 rounded-full bg-rose-500","aria-hidden":!0})]}),He==="app"&&l.jsx("button",{type:"button",onClick:()=>Jt(C=>C==="app"?"settings":"app"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Settings"}),He==="app"&&l.jsx("button",{type:"button",onClick:async()=>{if(_r==="medications")Jt("app");else{if($r===null&&be){const{data:C}=await ct.from("profiles").select("phone").eq("id",be).single(),me=C?.phone||null;ki(!!me),me||xa(!0)}else $r===!1&&xa(!0);Jt("medications")}},className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Medications"}),He==="app"&&Gt&&l.jsx("button",{type:"button",onClick:()=>Jt(C=>C==="admin"?"app":"admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Admin Dashboard"}),He==="app"&&l.jsx("a",{href:`mailto:support@petclaimhelper.com?subject=Pet Claim Helper Support Request&body=Hi Pet Claim Helper Team,%0D%0A%0D%0AI need help with:%0D%0A%0D%0A----%0D%0AUser: ${_e||"Not logged in"}%0D%0AUser ID: ${be||"N/A"}`,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",title:"Need help? Contact support",children:" Contact Support"}),_e&&l.jsxs("span",{className:"hidden sm:inline text-xs text-slate-600 dark:text-slate-300",children:["Logged in as: ",_e]}),_e&&l.jsx("button",{onClick:wa,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:"Logout"})]})]})}),l.jsxs("main",{className:"px-6",children:[He==="app"&&_r==="settings"&&l.jsx(aw,{userId:be,userEmail:_e,onClose:()=>Jt("app"),onDefaultExpenseChange:C=>H(C),onDefaultPeriodChange:C=>ut(C)}),He==="app"&&_r==="medications"&&l.jsx("section",{className:"mx-auto mt-8 max-w-6xl px-2",children:l.jsx(G5,{userId:be,pets:y,refreshKey:xo})}),He==="app"&&_r==="admin"&&l.jsx(l.Fragment,{children:Gt?l.jsx(Q5,{}):l.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[l.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),l.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),l.jsx("button",{onClick:()=>Jt("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),He!=="app"&&l.jsxs("section",{className:"mx-auto max-w-md mt-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("button",{type:"button",onClick:()=>Xe("signup"),className:["flex-1 px-6 py-3 text-sm rounded-t-xl transition-all font-semibold",He==="signup"?"bg-teal-600 text-white shadow-lg scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"].join(" "),children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Create Account"})]})}),l.jsx("button",{type:"button",onClick:()=>Xe("login"),className:["flex-1 px-6 py-3 text-sm rounded-t-xl transition-all font-semibold",He==="login"?"bg-emerald-600 text-white shadow-lg scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"].join(" "),children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Sign In"})]})})]}),l.jsxs("div",{className:"rounded-2xl rounded-tl-none rounded-tr-none border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-xl overflow-hidden",children:[l.jsx("div",{className:["px-6 py-4 text-white font-semibold",He==="signup"?"bg-gradient-to-r from-teal-500 to-cyan-600":"bg-gradient-to-r from-emerald-500 to-green-600"].join(" "),children:l.jsx("div",{className:"flex items-center gap-2 text-base",children:He==="signup"?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Get Started - Create Your Account"})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Welcome Back!"})]})})}),l.jsx("div",{className:"p-6",children:l.jsx(sw,{mode:He,onSwitch:C=>Xe(C)})})]})]}),He==="app"&&l.jsxs("section",{className:"mx-auto max-w-4xl",ref:_t,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Your Pets"}),l.jsx("button",{type:"button",onClick:()=>J(C=>!C),className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-1.5 text-sm hover:shadow",children:"+ Add Pet"})]}),ya&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-800 dark:text-red-200 flex items-start justify-between",children:[l.jsx("span",{children:ya}),l.jsx("button",{onClick:()=>qs(null),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:""})]}),re&&l.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 p-4 max-w-2xl mx-auto",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{id:"pet-name",value:W.name,onChange:C=>T({...W,name:C.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-species",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{id:"pet-species",value:W.species,onChange:C=>T({...W,species:C.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsx("select",{id:"pet-insurance",value:fe,onChange:C=>{const me=C.target.value;ae(me);const Se=Il(me),Pe=tn(Se);me==="Not Insured"||me===" Select "?T({...W,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):me==="Custom Insurance"?T({...W,insuranceCompany:"",filing_deadline_days:""}):Se&&T({...W,insuranceCompany:Se,filing_deadline_days:Pe||90})},className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:Dc.map(C=>l.jsx("option",{value:C.display,children:C.display},C.display))})]}),fe==="Healthy Paws (90 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-healthy-paws-id",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"pet-healthy-paws-id",value:W.healthy_paws_pet_id||"",onChange:C=>T({...W,healthy_paws_pet_id:C.target.value}),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),fe==="Spot (270 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-spot-account-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Account Number"}),l.jsx("input",{id:"pet-spot-account-number",value:W.spot_account_number||"",onChange:C=>T({...W,spot_account_number:C.target.value}),placeholder:"e.g., 12345678",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),fe&&fe!=="Not Insured"&&fe!==" Select "&&fe!=="Spot (270 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{id:"pet-policy-number",value:W.policyNumber||"",onChange:C=>T({...W,policyNumber:C.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),fe&&fe!=="Not Insured"&&fe!==" Select "&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-premium",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"pet-premium",type:"number",min:0,value:String(W.monthly_premium??""),onChange:C=>T({...W,monthly_premium:C.target.value===""?"":Number(C.target.value)}),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-deductible",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"pet-deductible",type:"number",min:0,value:String(W.deductible_per_claim??""),onChange:C=>T({...W,deductible_per_claim:C.target.value===""?"":Number(C.target.value)}),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-pays",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),l.jsx("input",{id:"pet-insurance-pays",type:"number",min:50,max:100,value:String(W.insurance_pays_percentage??""),onChange:C=>T({...W,insurance_pays_percentage:C.target.value===""?"":Number(C.target.value)}),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-coverage-start",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),l.jsx("input",{id:"pet-coverage-start",type:"date",value:W.coverage_start_date||"",onChange:C=>T({...W,coverage_start_date:C.target.value}),onClick:C=>C.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:Wa,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",children:"Save Pet"}),l.jsx("button",{type:"button",onClick:()=>J(!1),className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.length===0&&l.jsx("div",{className:"col-span-full text-sm text-slate-500 dark:text-slate-400",children:'No pets saved yet. Click "+ Add Pet" to create one.'}),y.map(C=>l.jsxs("div",{className:["rounded-xl border p-6 text-left bg-white dark:bg-slate-900/60 shadow-sm relative",L===C.id?"border-emerald-400":"border-slate-200 dark:border-slate-800"].join(" "),style:{border:`2px solid ${C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280")}`},children:[l.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[l.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:me=>Hi(C.id,me),className:"sr-only",id:`photo-upload-${C.id}`,disabled:Wr===C.id}),l.jsx("label",{htmlFor:`photo-upload-${C.id}`,className:["inline-flex items-center justify-center w-8 h-8 rounded-full cursor-pointer transition-all",C.species==="dog"?"bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",Wr===C.id?"opacity-50 cursor-not-allowed":""].join(" "),title:C.photo_url?"Change Photo":"Add Photo",children:Wr===C.id?l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),zi&&!C.photo_url&&y.indexOf(C)===0&&l.jsxs("div",{className:"absolute -top-16 -right-2 pointer-events-none animate-bounce",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg shadow-xl whitespace-nowrap text-sm font-medium",children:["Upload the cutest picture of ",C.name,"! "]}),l.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-pink-500"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-center mb-4",children:C.photo_url?l.jsx("img",{src:C.photo_url,alt:`${C.name}'s photo`,className:"w-32 h-32 rounded-full object-cover border-4 shadow-lg transition-transform hover:scale-105",style:{borderColor:C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280")}}):l.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center text-6xl border-4 shadow-lg",style:{borderColor:C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280"),backgroundColor:C.species==="dog"?"#EFF6FF":C.species==="cat"?"#FFF7ED":"#F3F4F6"},children:C.species==="dog"?"":C.species==="cat"?"":""})}),l.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:l.jsxs("div",{className:"flex-1 text-center",children:[l.jsxs("div",{className:"text-base font-semibold flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280")}}),C.name]}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 capitalize",children:C.species})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-3",children:[l.jsx("button",{type:"button",onClick:()=>I(C.id),className:["inline-flex items-center justify-center rounded-lg px-3 py-1.5 h-12 text-sm hover:shadow w-full sm:w-auto whitespace-nowrap",L===C.id?C.species==="dog"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white":"border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900"].join(" "),children:L===C.id?"Selected":"Use This Pet"}),l.jsx("button",{type:"button",onClick:()=>yo(C),className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-sm text-slate-700 dark:text-slate-200 w-full sm:w-auto px-3 whitespace-nowrap",children:"Edit"})]})]}),l.jsx("div",{className:"mt-4 text-sm text-slate-700 dark:text-slate-300 space-y-1.5",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Insurance:"}),(()=>{const me=C.insuranceCompany||"Not Insured",Se=me.toLowerCase().includes("nationwide"),Pe=me.toLowerCase().includes("healthy paws"),Ue=me.toLowerCase().includes("trupanion"),Ye=me.toLowerCase().includes("pumpkin"),nt=me.toLowerCase().includes("spot"),Qe=me.toLowerCase().includes("pets best"),Ke=me.toLowerCase().includes("not insured")||me.toLowerCase().includes("none");let it="bg-slate-100 dark:bg-slate-800",x="text-slate-700 dark:text-slate-300",E="border-slate-200 dark:border-slate-700";return Se?(it="bg-blue-50 dark:bg-blue-950",x="text-blue-700 dark:text-blue-300",E="border-blue-200 dark:border-blue-800"):Pe?(it="bg-green-50 dark:bg-green-950",x="text-green-700 dark:text-green-300",E="border-green-200 dark:border-green-800"):Ue?(it="bg-purple-50 dark:bg-purple-950",x="text-purple-700 dark:text-purple-300",E="border-purple-200 dark:border-purple-800"):Ye?(it="bg-orange-50 dark:bg-orange-950",x="text-orange-600 dark:text-orange-300",E="border-orange-200 dark:border-orange-800"):nt?(it="bg-orange-50 dark:bg-orange-950",x="text-orange-600 dark:text-orange-400",E="border-orange-200 dark:border-orange-800"):Qe?(it="bg-cyan-50 dark:bg-cyan-950",x="text-cyan-700 dark:text-cyan-300",E="border-cyan-200 dark:border-cyan-800"):Ke&&(it="bg-slate-100 dark:bg-slate-800",x="text-slate-600 dark:text-slate-400",E="border-slate-300 dark:border-slate-700"),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${it} ${x} ${E}`,children:[Se&&"",Pe&&"",Ue&&"",Ye&&"",nt&&"",Qe&&"",Ke&&"",me]})})()]})}),B===C.id&&M&&l.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-800 p-3 max-w-3xl mx-auto overflow-x-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-name",className:"block text-xs",children:"Pet Name"}),l.jsx("input",{id:"edit-pet-name",value:M.name,onChange:me=>ee({...M,name:me.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-species",className:"block text-xs",children:"Species"}),l.jsxs("select",{id:"edit-pet-species",value:M.species,onChange:me=>ee({...M,species:me.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("select",{id:"edit-pet-insurance",value:F,onChange:me=>{const Se=me.target.value;se(Se);const Pe=Il(Se),Ue=tn(Pe);Se==="Not Insured"||Se===" Select "?ee({...M,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):Pe&&ee({...M,insuranceCompany:Pe,filing_deadline_days:Ue||90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:Dc.map(me=>l.jsx("option",{value:me.display,children:me.display},me.display))})]}),F==="Not Insured"&&l.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:l.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}),F==="Healthy Paws (90 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-healthy-paws-id",className:"block text-xs text-slate-500",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"edit-pet-healthy-paws-id",value:M.healthy_paws_pet_id||"",onChange:me=>ee({...M,healthy_paws_pet_id:me.target.value}),placeholder:"e.g., 1400806-1",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),F==="Spot (270 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-spot-account-number",className:"block text-xs text-slate-500",children:"Account Number"}),l.jsx("input",{id:"edit-pet-spot-account-number",value:M.spot_account_number||"",onChange:me=>ee({...M,spot_account_number:me.target.value}),placeholder:"e.g., 12345678",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),F&&F!=="Not Insured"&&F!==" Select "&&F!=="Spot (270 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"edit-pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),l.jsx("input",{id:"edit-pet-policy-number",value:M.policyNumber||"",onChange:me=>ee({...M,policyNumber:me.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),F!=="Not Insured"&&F!==" Select "&&F&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"edit-pet-premium",type:"number",step:"0.01",placeholder:"e.g., 38.00",value:String(M.monthly_premium??""),onChange:me=>ee({...M,monthly_premium:me.target.value===""?"":Number(me.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Monthly insurance premium cost"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"edit-pet-deductible",type:"number",step:"0.01",placeholder:"e.g., 250.00",value:String(M.deductible_per_claim??""),onChange:me=>ee({...M,deductible_per_claim:me.target.value===""?"":Number(me.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),l.jsx("input",{id:"edit-pet-insurance-pays",type:"number",min:0,max:100,placeholder:"80",value:String(M.insurance_pays_percentage??""),onChange:me=>ee({...M,insurance_pays_percentage:me.target.value===""?"":Number(me.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),l.jsx("input",{id:"edit-pet-coverage-start",type:"date",value:M.coverage_start_date||"",onChange:me=>ee({...M,coverage_start_date:me.target.value}),className:"mt-1 w-full min-w-[220px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When did your coverage start?"})]})]})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:bo,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save"}),l.jsx("button",{type:"button",onClick:()=>{if(!B)return;const Se=y.find(Ue=>Ue.id===B)?.name||"this pet";if(!confirm(` Delete ${Se}?

This will NOT delete bills for this pet, but you won't be able to file new bills.

This cannot be undone!`))return;const Pe=y.filter(Ue=>Ue.id!==B);P(Pe),be&&Ex(be,B).catch(Ue=>{console.error("[deletePet] error",Ue)}),ie(null),ee(null)},className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",children:"Delete"}),l.jsx("button",{type:"button",onClick:()=>{ie(null),ee(null)},className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]})]},C.id))]})]}),He==="app"&&l.jsxs("section",{className:"mx-auto max-w-3xl text-center mt-8 px-2",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Upload Vet Bill"}),l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:["rounded-2xl border bg-white dark:bg-slate-900/60 shadow-sm p-6 sm:p-8 transition-colors",s?"border-emerald-400 ring-2 ring-emerald-400/60 dark:ring-emerald-400/50 bg-emerald-50/40 dark:bg-emerald-900/10":"border-slate-200 dark:border-slate-800"].join(" "),onDragEnter:hs,onDragOver:Vn,onDragLeave:Wi,onDrop:Ft,children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",onClick:ba,className:"group relative w-full sm:w-auto h-16 rounded-xl border border-slate-300/70 dark:border-slate-700 bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 hover:from-white hover:to-white px-5 text-base sm:text-sm text-slate-800 dark:text-slate-100 shadow hover:shadow-lg transition",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("svg",{className:"h-6 w-6 text-emerald-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),l.jsx("span",{className:"font-medium",children:"Upload Vet Bill (PDF or Photo)"})]})}),l.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"or drag & drop here"}),l.jsx("input",{ref:n,type:"file",accept:"image/*,application/pdf",onChange:zs,className:"sr-only"}),e&&l.jsxs("div",{className:"mt-6 w-full text-left",children:[l.jsx("div",{className:"flex items-start justify-between gap-4",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:$s})]})}),e.objectUrl&&l.jsx("div",{className:"mt-4",children:l.jsx("img",{src:e.objectUrl,alt:"Selected preview",className:"max-h-80 w-full object-contain rounded-lg border border-slate-200 dark:border-slate-800",onLoad:()=>{e.objectUrl&&URL.revokeObjectURL(e.objectUrl)}})}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("button",{type:"button",onClick:C=>{console.log("[MOBILE DEBUG] ========== PROCESS BILL BUTTON CLICKED =========="),console.log("[MOBILE DEBUG] Event:",C),console.log("[MOBILE DEBUG] isProcessing:",o),Vi()},disabled:o,className:"inline-flex items-center justify-center w-full h-14 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 text-base sm:text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[o&&l.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),"Process Bill"]}),o&&l.jsxs("div",{className:"mt-4 flex flex-col items-center text-sm text-slate-700 dark:text-slate-300",children:[l.jsxs("svg",{className:"h-6 w-6 animate-spin mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),l.jsx("div",{children:" Extracting bill data..."})]})]})]})]})})})]},"upload-section"),He==="app"&&rt&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Multiple Pets Detected"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We found charges for multiple pets on this bill:"}),l.jsx("ul",{className:"mt-2 text-sm list-disc pl-6 text-slate-700 dark:text-slate-200",children:rt.pets.map((C,me)=>l.jsxs("li",{children:[C.petName||`Pet ${me+1}`," (",C.petSpecies||"Pet",")  ",Ws(C.lineItems)]},me))}),l.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"We'll create a separate bill for each pet."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("p",{className:"text-sm font-medium",children:"Match each pet to your saved profiles (or add new ones):"}),rt.pets.map((C,me)=>l.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 justify-between",children:[l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-sm font-medium",children:C.petName||`Pet ${me+1}`}),l.jsx("div",{className:"text-xs text-slate-500",children:C.petSpecies||"Pet"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",value:Ze[me]||"",onChange:Se=>{const Pe=[...Ze];Pe[me]=Se.target.value||null,Rt(Pe)},children:[l.jsx("option",{value:"",children:"Select saved pet"}),y.map(Se=>l.jsxs("option",{value:Se.id,children:[Se.name," (",Se.species,")"]},Se.id))]}),!Ze[me]&&l.jsx("button",{type:"button",className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-xs hover:shadow",onClick:()=>{st(me),J(!0);const Se=(C.petSpecies||"").toLowerCase(),Pe=Se.includes("cat")?"cat":Se.includes("dog")?"dog":W.species;T(Ue=>({...Ue,name:C.petName||"",species:Pe})),_t.current?.scrollIntoView({behavior:"smooth"})},children:"+ Add New Pet"})]})]})},me))]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",disabled:Ze.some(C=>!C),onClick:async()=>{const C=[];for(let me=0;me<rt.pets.length;me++){const Se=rt.pets[me],Pe=Ze[me],Ue=y.find(x=>x.id===Pe)||null,Ye=Se.subtotal||Ws(Se.lineItems),{filename:nt,blob:Qe}=N5({clinicName:rt.clinicName,clinicAddress:rt.clinicAddress,dateOfService:rt.dateOfService,diagnosis:rt.diagnosis,petName:Se.petName,lineItems:Se.lineItems,subtotal:Ye,invoiceNumber:rt.invoiceNumber},Ue);if(be)try{const x=parseFloat(String(Ye).replace(/[^0-9.\-]/g,""))||null,E=Number(Ue?.filing_deadline_days)||90,pe=(ze=>{if(!ze)return null;const at=String(ze).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!at)return null;const pt=Number(at[1]),Ut=Number(at[2])-1,Ht=Number(at[3]),kt=new Date(pt,Ut,Ht);return Number.isNaN(kt.getTime())?null:kt})(rt.dateOfService),we=pe?new Date(pe.getTime()):null;we&&we.setDate(we.getDate()+E);const Oe=await ng({user_id:be,pet_id:Ue?Ue.id:null,service_date:rt.dateOfService||null,invoice_number:rt.invoiceNumber||null,clinic_name:rt.clinicName||null,clinic_address:rt.clinicAddress||null,clinic_phone:rt.clinicPhone||null,diagnosis:rt.diagnosis||null,total_amount:x,line_items:Se.lineItems,filing_status:"not_filed",filing_deadline_days:E});Oe?.id&&await Ha(be,Oe.id,Qe)}catch(x){console.error("[createClaim multi] error",x)}const Ke=URL.createObjectURL(Qe),it=document.createElement("a");it.href=Ke,it.download=nt,document.body.appendChild(it),it.click(),it.remove(),URL.revokeObjectURL(Ke),C.push({name:nt,amount:Ye})}be&&Ui(be).then(St).catch(()=>{}),ft(!0),alert(` ${C.length} bills generated and downloaded!
`+C.map(me=>`- ${me.name} (${me.amount})`).join(`
`)+`

Email each bill to your insurance company.`)},children:"Generate Bills"})})]})}),w&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{k(null),Z(null),t(null),v(null),U(""),le(""),H("insured")},children:" Cancel"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Extracted Details"})]}),l.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"What was this visit for? (Visit Title)"}),l.jsx("input",{value:$,onChange:C=>le(C.target.value),placeholder:"e.g., Annual checkup, Emergency visit, Teeth cleaning",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Edit if needed"})]}),(()=>{if(!w||!Array.isArray(w.lineItems))return null;const C=w.lineItems.map(Pe=>Dn(Pe.amount));return w.lineItems.length>0&&C.every(Pe=>!Number.isFinite(Pe)||Pe===0)?l.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:[l.jsx("div",{className:"font-semibold",children:" NO PRICES FOUND"}),l.jsx("div",{className:"mt-1",children:"This appears to be a vaccination certificate or record, not an invoice."}),l.jsx("div",{className:"mt-1",children:"Please upload the actual bill/receipt with itemized charges and prices."}),l.jsx("div",{className:"mt-1 text-amber-800/80",children:"Insurance companies require invoices showing what you paid."})]}):null})(),l.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Review and edit any field if needed."}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Name"}),l.jsx("input",{value:w.clinicName,onChange:C=>k({...w,clinicName:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Address"}),l.jsx("input",{value:w.clinicAddress,onChange:C=>k({...w,clinicAddress:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Phone"}),l.jsx("input",{value:w.clinicPhone||"",onChange:C=>k({...w,clinicPhone:C.target.value}),placeholder:"(XXX) XXX-XXXX",type:"tel",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),l.jsx("input",{value:w.petName,onChange:C=>k({...w,petName:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Date of Service"}),l.jsx("input",{type:"date",value:w.dateOfService,onChange:C=>k({...w,dateOfService:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Invoice Number"}),l.jsx("input",{value:w.invoiceNumber||"",onChange:C=>k({...w,invoiceNumber:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Total Amount"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx("span",{className:"text-slate-500 text-sm",children:"$"})}),l.jsx("input",{value:w.totalAmount,onChange:C=>k({...w,totalAmount:C.target.value}),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 pl-7 pr-3 py-2 text-sm"})]})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Diagnosis / Reason"}),l.jsx("textarea",{value:w.diagnosis,onChange:C=>k({...w,diagnosis:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",rows:3})]})]}),A&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Pet Insurance"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("input",{value:A.insuranceCompany,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Policy Number"}),l.jsx("input",{value:A.policyNumber,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-sm text-emerald-700 dark:text-emerald-300 hover:underline",onClick:()=>k({...w,lineItems:[...w.lineItems,{description:"",amount:""}]}),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-3 space-y-3",children:w.lineItems.map((C,me)=>l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3",children:[l.jsx("div",{className:"sm:col-span-8",children:l.jsx("input",{placeholder:"Description",value:C.description,onChange:Se=>{const Pe=[...w.lineItems];Pe[me]={...Pe[me],description:Se.target.value},k({...w,lineItems:Pe})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-3",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx("span",{className:"text-slate-500 text-sm",children:"$"})}),l.jsx("input",{placeholder:"Amount",value:C.amount,onChange:Se=>{const Pe=[...w.lineItems];Pe[me]={...Pe[me],amount:Se.target.value},k({...w,lineItems:Pe})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 pl-7 pr-3 py-2 text-sm"})]})}),l.jsx("div",{className:"sm:col-span-1 flex items-center",children:l.jsx("button",{type:"button",className:"text-slate-500 hover:text-rose-600 text-sm",onClick:()=>{const Se=w.lineItems.filter((Pe,Ue)=>Ue!==me);k({...w,lineItems:Se})},"aria-label":"Remove item",children:""})})]},me))})]}),l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-blue-50/60 dark:bg-blue-900/10 p-4",children:[l.jsxs("label",{htmlFor:"visit-notes",className:"block text-sm font-semibold mb-2",children:[" Visit Notes ",l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(Optional but recommended)"})]}),l.jsx("textarea",{id:"visit-notes",value:G,onChange:C=>U(C.target.value),placeholder:"What was discussed at this vet visit? (e.g., 'Annual checkup - vet noted minor eye redness from outdoor play, cleared up in 2 days')",rows:3,className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),l.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:[" ",l.jsx("strong",{children:"Why this matters:"})," Documenting what was discussed protects you from casual comments being misinterpreted later as pre-existing conditions."]})]}),A&&A.insuranceCompany&&A.insuranceCompany.trim()!==""&&A.insuranceCompany.toLowerCase()!=="not insured"&&he!=="not_insured"&&(()=>{const C=Number(A?.filing_deadline_days)||90,me=Qe=>{if(!Qe)return null;const Ke=String(Qe).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!Ke)return null;const it=Number(Ke[1]),x=Number(Ke[2])-1,E=Number(Ke[3]),Q=new Date(it,x,E);return Number.isNaN(Q.getTime())?null:Q},Se=me(w.dateOfService),Pe=Se?new Date(Se.getTime()):null;Pe&&Pe.setDate(Pe.getDate()+C);const Ue=new Date,Ye=Pe?Math.ceil((Pe.getTime()-Ue.getTime())/(1e3*60*60*24)):null,nt=Ye===null?{wrap:"bg-slate-50 border-slate-200",title:"text-slate-900"}:Ye>=60?{wrap:"bg-emerald-50 border-emerald-200",title:"text-emerald-900"}:Ye>=30?{wrap:"bg-yellow-50 border-yellow-200",title:"text-yellow-900"}:Ye>=15?{wrap:"bg-orange-50 border-orange-200",title:"text-orange-900"}:{wrap:"bg-rose-50 border-rose-200",title:"text-rose-900"};if(Ye!==null&&Ye<0){const Qe=Se?Math.floor((Ue.getTime()-Se.getTime())/864e5):0,Ke=Math.floor(Qe/365),it=Math.max(1,Math.floor(Qe%365/30)),x=Ke>=1?Ke===1?"over 1 year ago":`over ${Ke} years ago`:`over ${it} months ago`;return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm bg-rose-50 border-rose-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold text-rose-900",children:" DEADLINE PASSED"}),l.jsxs("div",{className:"mt-2 text-sm text-rose-900",children:["This bill is from ",w.dateOfService||""," (",x,")."]}),l.jsx("div",{className:"mt-2 text-sm text-rose-900",children:"Most insurers won't accept bills this old."}),l.jsx("div",{className:"mt-1 text-xs text-rose-900/80",children:"Contact your insurance company to verify if you can still file."})]})}return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm",nt.wrap].join(" "),children:[l.jsx("div",{className:["text-sm font-semibold flex items-center gap-2",nt.title].join(" "),children:l.jsx("span",{children:" FILING DEADLINE REMINDER"})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Service Date"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:w.dateOfService&&me(w.dateOfService)?.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Insurance"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:A?A.insuranceCompany:""})]})]}),l.jsx("div",{className:"mt-3 text-sm",children:l.jsx("div",{className:"text-slate-700",children:" Most insurers require filing within 60180 days of service."})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Estimated Deadline"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:Pe?Pe.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Days Remaining"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base",children:Ye===null?"":`${Ye} days`})]})]}),l.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"This is a general reminder. Always verify your specific policy deadline."})]})})(),A&&A.insuranceCompany&&A.insuranceCompany.trim()!==""&&A.insuranceCompany.toLowerCase()!=="not insured"&&l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expense Category"}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"insured",checked:he==="insured",onChange:()=>H("insured")}),l.jsx("span",{children:"Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"not_insured",checked:he==="not_insured",onChange:()=>H("not_insured")}),l.jsx("span",{children:"Not Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"maybe_insured",checked:he==="maybe_insured",onChange:()=>H("maybe_insured")}),l.jsx("span",{children:"Maybe Insured"})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{k(null),Z(null),t(null),v(null),U(""),le(""),H("insured")},children:" Cancel"}),!o&&l.jsx("button",{type:"button",disabled:d,className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",onClick:async()=>{if(!d){if(!A){zn(!0);return}f(!0);try{const C=Number(A?.filing_deadline_days)||90,Se=(nt=>{if(!nt)return null;const Qe=String(nt).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!Qe)return null;const Ke=Number(Qe[1]),it=Number(Qe[2])-1,x=Number(Qe[3]),E=new Date(Ke,it,x);return Number.isNaN(E.getTime())?null:E})(w.dateOfService),Pe=Se?new Date(Se.getTime()):null;Pe&&Pe.setDate(Pe.getDate()+C);let Ue=null;if(be)try{const nt=parseFloat(String(w.totalAmount).replace(/[^0-9.\-]/g,""))||null;if(Ue=await ng({user_id:be,pet_id:A?A.id:null,service_date:w.dateOfService||null,invoice_number:w.invoiceNumber||null,clinic_name:w.clinicName||null,clinic_address:w.clinicAddress||null,clinic_phone:w.clinicPhone||null,visit_title:$||null,diagnosis:w.diagnosis||null,total_amount:nt,line_items:w.lineItems,filing_status:"not_submitted",filing_deadline_days:C,visit_notes:G||null,expense_category:he}),console.log("[createClaim single] Checking for vet bill upload...",{hasClaimId:!!Ue?.id,hasSelectedFile:!!e,hasFile:!!e?.file,selectedFileType:e?.file?.type}),Ue?.id&&e?.file)try{console.log("[createClaim single] Uploading vet bill PDF to storage..."),await Ha(be,Ue.id,e.file),console.log("[createClaim single]  Uploaded vet bill PDF for claim:",Ue.id)}catch(Qe){console.error("[createClaim single]  Failed to upload vet bill:",Qe),alert(` Warning: Failed to attach vet invoice.

The claim was created but the invoice file could not be uploaded. You may need to attach it manually when submitting.

Error: ${Qe instanceof Error?Qe.message:String(Qe)}`)}else console.warn("[createClaim single]   No vet bill PDF to upload - selectedFile or file is missing")}catch(nt){console.error("[createClaim single] error",nt)}const Ye={claimId:Ue?.id||null,petName:A?.name||"Unknown",species:A?.species||"",amount:Dn(String(w.totalAmount||"")),serviceDate:w.dateOfService||null,insurance:A?.insuranceCompany||"",deadlineDate:Pe?Pe.toISOString().slice(0,10):null,deadlineDays:C};rs(Ye),ga(Ue?.id||null),console.log("[LOOKS GOOD CLICKED] Showing success modal",{claimId:Ue?.id}),k(null)}finally{f(!1)}}},children:d?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Looks Good"})]})]})},JSON.stringify(w)),He==="app"&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Financial Summary"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("label",{className:"mr-2 text-slate-600",children:"Show expenses for:"}),l.jsxs("select",{value:Nt,onChange:C=>ut(C.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[l.jsx("option",{value:"all",children:"All Time"}),l.jsx("option",{value:"2026",children:"2026"}),l.jsx("option",{value:"2025",children:"2025"}),l.jsx("option",{value:"2024",children:"2024"}),l.jsx("option",{value:"last12",children:"Last 12 Months"})]})]})]}),l.jsx(H5,{userId:be,refreshToken:Mt,period:Nt})]}),He==="app"&&Wt.length>0&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Vet Bills"})}),(()=>{const C=y.some(Se=>{const Pe=Se.insuranceCompany?.toLowerCase()||"";return hf.some(Ue=>Pe.includes(Ue))}),me=_e&&ff.includes(_e.toLowerCase());return C||me?null:l.jsx("div",{className:"mt-4 mb-4 p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:l.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[l.jsx("span",{className:"text-3xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:"Auto-Submit Coming Soon!"}),l.jsx("p",{className:"text-sm text-blue-100",children:"Soon we'll file claims directly with your insurance company. No more manual work!"})]})]})})})(),l.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Total bills"}),l.jsx("div",{className:"text-lg font-semibold",children:fs.total})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Bills pending submission"}),l.jsxs("div",{className:"text-lg font-semibold",children:[fs.notFiledCount," ",l.jsxs("span",{className:"text-sm text-slate-500",children:["(",un(fs.notFiledSum),")"]})]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims filed"}),l.jsx("div",{className:"text-lg font-semibold",children:fs.filedPending})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims expiring soon (< 15 days)"}),l.jsx("div",{className:"text-lg font-semibold",children:fs.expiringSoon})]})]}),l.jsx("div",{ref:xt,className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full overflow-x-hidden",style:{overscrollBehaviorX:"none"},children:Ai.map(C=>{const me=C.pets||{},Se=me?.color||(me?.species==="cat"?"#F97316":me?.species==="dog"?"#3B82F6":"#6B7280");Gi(C);const Pe=(()=>{const Ke=Vs(C);if(!Ke)return null;const it=new Date(Ke.getTime());return it.setDate(it.getDate()+tn(C)),it})(),Ue=Na(C),Ye=Va(C.filing_status),nt=String(C.expense_category||"insured")==="not_insured",Qe=(()=>{const Ke=C.expense_category||"insured",it=me?.insurance_company||"";return Ke==="insured"?{text:it?`Insured  ${it}`:"Insured",cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}:Ke==="not_insured"?{text:"Not Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}:{text:it?`Maybe Insured  ${it}`:"Maybe Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}})();return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900 shadow-sm min-h-[180px] w-full",style:{border:`2px solid ${Se}`,touchAction:"pan-y",overscrollBehaviorX:"none"},children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:Se+"20"},children:l.jsx("span",{className:"text-slate-700",children:me.species==="cat"?"":""})}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 break-words line-clamp-2",children:(()=>{const Ke=(C.visit_title&&String(C.visit_title)||C.diagnosis&&String(C.diagnosis)||"").trim();return Ke?`${me.name||"Pet"}  ${Ke}`:me.name||"Pet"})()})})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:[l.jsx("span",{className:"mr-1",children:""}),C.clinic_name||""]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${Qe.cls}`,children:Qe.text}),!nt&&l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${Ye.cls}`,children:Ye.text})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Service Date"}),l.jsx("div",{className:"font-medium",children:C.service_date&&Vs(C)?.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-500",children:"Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:un(C.total_amount)}),String(C.filing_status||"").toLowerCase()==="paid"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:(()=>{const Ke=Number(C.total_amount||0),it=Number(C.reimbursed_amount||0),x=Ke>0?Math.round(it/Ke*100):0;return`Claimed: ${un(Ke)}  Received: ${un(it)} (${x}%)`})()})}),C.paid_date&&l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:`Date Paid: ${new Date(C.paid_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}`})})]})]}),(()=>{const Ke=String(C.filing_status||"").toLowerCase();if(!(!!C.filed_date&&(Ke==="filed"||Ke==="paid")))return null;const x=(()=>{const Q=String(C.filed_date||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);if(Q)return new Date(Number(Q[1]),Number(Q[2])-1,Number(Q[3])).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const pe=C.filed_date?new Date(C.filed_date):null;return pe?pe.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})();return l.jsxs("div",{className:"col-span-2 mt-1 text-[11px] text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Filed: ",x]})]})})(),nt?l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Info"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:" Self-paid vet bill"})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Filing Deadline"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:Pe?Pe.toISOString().slice(0,10):""})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${Ue.cls}`,children:Ue.text})})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 flex flex-wrap items-start sm:items-center justify-between gap-2",children:[(()=>{const Ke=String(C.filing_status||"not_submitted").toLowerCase(),it=Ke==="filed"?"submitted":Ke==="not_filed"?"not_submitted":Ke;if(nt)return l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-600",children:" Not insured - No filing required"})});if(it==="not_submitted"){const x=(()=>{if(!_e)return!1;const E=_e.toLowerCase(),Q=C.pets?.insurance_company?.toLowerCase()||"";return ff.includes(E)?!0:hf.some(pe=>Q.includes(pe))})();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[x&&l.jsx("button",{type:"button",className:`
                                      text-xs px-2 py-1 rounded font-semibold whitespace-nowrap flex items-center gap-1.5
                                      transition-all duration-200 ease-out
                                      ${Si===C.id?"scale-95 bg-gradient-to-r from-teal-600 via-teal-500 to-teal-600 bg-[length:200%_100%] animate-[shimmer_1.5s_ease-in-out_infinite]":"bg-blue-600 hover:bg-blue-700 active:scale-95"}
                                      text-white
                                    `,onClick:async()=>{navigator.vibrate&&navigator.vibrate(10),ns(C.id),await new Promise(E=>setTimeout(E,1e3)),cs(C),await new Promise(E=>setTimeout(E,200)),ns(null)},title:"Automatically generate PDF and email to insurance company",children:Si===C.id?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"animate-pulse",children:"Preparing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Auto-Submit"]})}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",onClick:async()=>{try{const E=si(),pe=prompt("Enter filed date (YYYY-MM-DD):",E)||E;await Jo(C.id,{filing_status:"filed",filed_date:pe}),St(we=>we.map(Oe=>Oe.id===C.id?{...Oe,filing_status:"filed",filed_date:pe}:Oe));try{alert(" Claim marked as submitted")}catch{}if(await new Promise(we=>setTimeout(we,500)),be){const we=await Ui(be);St(we)}}catch(E){console.error("[mark filed] error",E)}},title:"Manually mark as submitted (if you filed yourself)",children:"Mark Submitted"})]}),["insured","maybe"].includes(String(C.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"not_submitted",onChange:async E=>{try{const Q=E.target.value,pe=Q==="submitted"?"filed":Q==="not_submitted"?"not_filed":Q;await Jo(C.id,{filing_status:pe}),St(we=>we.map(Oe=>Oe.id===C.id?{...Oe,filing_status:pe}:Oe));try{alert(" Status updated")}catch{}await new Promise(we=>setTimeout(we,400)),be&&Ui(be).then(St)}catch(Q){console.error("[edit status] error",Q)}},children:[l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]}),!x&&l.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-950/30 border-l-4 border-blue-400 rounded",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"text-2xl mr-2",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Coming Soon: Auto-Submit"}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"We'll file claims directly with your insurance company - no more manual work!"})]})]})})]})}return it==="submitted"?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"What happened with this claim?"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{Cr(C);const x=C.total_amount&&Number.isFinite(Number(C.total_amount))?String(Number(C.total_amount).toFixed(2)):"";Ps(x),ts(si())},children:"Payment Received? Mark as Paid"}),l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800",onClick:async()=>{try{await Jo(C.id,{filing_status:"denied"}),St(x=>x.map(E=>E.id===C.id?{...E,filing_status:"denied"}:E));try{alert(" Claim marked as denied")}catch{}be&&Ui(be).then(St)}catch(x){console.error("[deny claim] error",x)}},children:"Deny Claim"})]}),["insured","maybe"].includes(String(C.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"submitted",onChange:async x=>{try{const E=x.target.value,Q=E==="submitted"?"filed":E==="not_submitted"?"not_filed":E;await Jo(C.id,{filing_status:Q}),St(pe=>pe.map(we=>we.id===C.id?{...we,filing_status:Q}:we));try{alert(" Status updated")}catch{}be&&Ui(be).then(St)}catch(E){console.error("[edit status] error",E)}},children:[l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]})]}):null})(),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[C.pdf_path&&l.jsx("a",{href:"#",onClick:async Ke=>{Ke.preventDefault();try{const{data:it}=await ct.storage.from("claim-pdfs").createSignedUrl(C.pdf_path,60);it?.signedUrl&&window.open(it.signedUrl,"_blank")}catch(it){console.error("[view pdf] error",it)}},className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",children:"View PDF"}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800 shrink-0 whitespace-nowrap",onClick:async()=>{if(confirm("Delete this bill?"))try{await tw(C.id),be&&Ui(be).then(St)}catch(Ke){console.error("[delete claim] error",Ke)}},children:"Delete"})]})]})]},C.id)})}),Ai.length===0&&l.jsx("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 p-6 text-center text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900",children:"No vet bills yet. Upload your first bill to get started!"})]}),He==="app"&&l.jsxs("footer",{className:"mx-auto max-w-3xl text-center py-10 text-xs text-slate-500 dark:text-slate-400",children:[" ",new Date().getFullYear()," Pet Claim Helper"]})]}),Tt&&l.jsx(iw,{userId:be,userEmail:_e,onClose:()=>We(!1)}),jn&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>zn(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-rose-200 bg-white p-6",onClick:C=>C.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold text-rose-700",children:" Please Select a Pet"}),l.jsx("div",{className:"mt-2 text-sm text-rose-800",children:"You haven't selected a pet for this bill yet."}),l.jsx("div",{className:"mt-1 text-sm text-rose-800",children:"Please go back and click 'Use This Pet' for the pet you want to add this bill for."}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",onClick:()=>zn(!1),children:"Go Back"})})]})}),jt&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>ot(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-2xl rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 flex flex-col max-h-[85vh]",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Edit Bill"}),l.jsx("button",{className:"text-sm",onClick:()=>ot(null),children:"Close"})]}),["filed","paid"].includes(String(jt.filing_status||"").toLowerCase())&&l.jsx("div",{className:"mx-5 mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:" This claim has been filed. Changes may require resubmitting to insurance."}),l.jsx("div",{className:"p-5 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Pet"}),l.jsxs("select",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:cr||"",onChange:C=>Et(C.target.value),children:[l.jsx("option",{value:"",children:""}),y.map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Service Date"}),l.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Pt,onChange:C=>ur(C.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Title"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:dr,onChange:C=>ni(C.target.value),placeholder:"e.g., Annual checkup, Teeth cleaning"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Diagnosis / Reason"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:$t,onChange:C=>Dt(C.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Notes"}),l.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:cn,onChange:C=>As(C.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-xs text-emerald-700",onClick:()=>It([...vn,{description:"",amount:""}]),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-2 space-y-2",children:vn.map((C,me)=>l.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[l.jsx("input",{className:"col-span-8 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Description",value:C.description,onChange:Se=>{const Pe=[...vn];Pe[me]={...Pe[me],description:Se.target.value},It(Pe)}}),l.jsx("input",{className:"col-span-3 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Amount",value:C.amount,onChange:Se=>{const Pe=[...vn];Pe[me]={...Pe[me],amount:Se.target.value},It(Pe)}}),l.jsx("button",{className:"col-span-1 text-xs",onClick:()=>{const Se=vn.filter((Pe,Ue)=>Ue!==me);It(Se)},children:""})]},me))})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Expense Category"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Sn==="insured",onChange:()=>qn("insured")})," Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Sn==="not_insured",onChange:()=>qn("not_insured")})," Not Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Sn==="maybe_insured",onChange:()=>qn("maybe_insured")})," Maybe"]})]})]})]})}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>ot(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{if(jt)try{if(await Jo(jt.id,{pet_id:cr||jt.pet_id,service_date:Pt||null,visit_title:dr||null,diagnosis:$t||null,visit_notes:cn||null,line_items:vn,expense_category:Sn}),be){const C=await Ui(be);St(C)}ot(null),alert("Bill updated")}catch(C){console.error("[update claim] error",C),alert("Error updating bill")}},children:"Save Changes"})]})]})}),ar&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Cr(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Mark as Paid"}),l.jsx("button",{className:"text-sm",onClick:()=>Cr(null),children:"Close"})]}),l.jsxs("div",{className:"p-5 text-sm space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Claimed Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:un(ar.total_amount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Reimbursed Amount"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",placeholder:"0.00",value:Mr,onChange:C=>Ps(C.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Date Received"}),l.jsx("input",{type:"date",value:Ms,onChange:C=>ts(C.target.value),max:si(),placeholder:"YYYY-MM-DD",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2"})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-500",children:"Difference"}),l.jsx("div",{className:"font-mono font-semibold",children:(()=>{const C=Number(ar.total_amount||0),me=Number(Mr||0),Se=C-me;return un(Se)})()})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Cr(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{try{const C=Number(Mr);if(!Number.isFinite(C)||C<0){alert("Please enter a valid reimbursed amount");return}if(!Ms){alert("Please select the date received");return}const me=new Date(Ms).toISOString().slice(0,10),Se=Number(ar.total_amount||0),Pe=ar.pet_id||null,Ue=ar.service_date?Number(String(ar.service_date).slice(0,4)):null,Ye=Ue&&Pe?Wt.some(x=>x.id!==ar.id&&x.pet_id===Pe&&String(x.expense_category||"").toLowerCase()==="insured"&&String(x.filing_status||"").toLowerCase()==="paid"&&x.service_date&&String(x.service_date).slice(0,4)===String(Ue)&&Number(x.deductible_applied||0)>0):!1,nt=Pe?y.find(x=>x.id===Pe):null,Qe=Math.max(0,Number(nt?.deductible_per_claim||0)),Ke=Math.min(Se,Ye?0:Qe),it=Math.max(0,Se-Ke-C);if(await Jo(ar.id,{filing_status:"paid",reimbursed_amount:C,paid_date:me,deductible_applied:Ke,user_coinsurance_payment:it}),be){const x=await Ui(be);St(x)}Cr(null),Ps(""),ts(si()),alert("Claim marked as paid")}catch(C){console.error("[mark paid] error",C),alert("Error saving paid status")}},children:"Save"})]})]})}),bi&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Bs(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:C=>C.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Select Medications Prescribed"}),l.jsxs("div",{className:"mt-3 space-y-2 max-h-[50vh] overflow-y-auto",children:[wi.length===0&&l.jsx("div",{className:"text-sm text-slate-600",children:"No active medications found"}),wi.map(C=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors",children:[l.jsx("input",{type:"checkbox",checked:_i.includes(C.id),onChange:me=>{const Se=me.target.checked;Nr(Pe=>Se?[...Pe,C.id]:Pe.filter(Ue=>Ue!==C.id))},className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${_i.includes(C.id)?"bg-emerald-500 border-emerald-500":"bg-white border-gray-300"}`,children:_i.includes(C.id)&&l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:"text-sm font-medium",children:C.medication_name}),C.dosage&&l.jsx("div",{className:"text-xs text-slate-500",children:C.dosage})]})]},C.id))]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",className:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-700",onClick:()=>Hn(!0),children:"+ Add New Medication"})}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>Bs(!1),children:"Cancel"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{$a&&_i.length>0&&await Jo($a,{medication_ids:_i}),Bs(!1),Es("Medications saved ")}catch(C){console.error("[med select -> link meds] error",C),Bs(!1),Es("Medications saved ")}},children:"Confirm"})]})]})}),Ni&&l.jsx(g1,{open:Ni,onClose:()=>Hn(!1),onSaved:async C=>{try{if(be&&A){const me=si(),{data:Se}=await ct.from("medications").select("*").eq("user_id",be).eq("pet_id",A.id).lte("start_date",me).or(`end_date.is.null,end_date.gte.${me}`);ma(Array.isArray(Se)?Se:[]),C&&!_i.includes(C)&&Nr(Pe=>[...Pe,C])}}catch{}},userId:be,pets:y,defaultPetId:A?.id||null}),In&&be&&l.jsx(X5,{claim:In,pet:In.pets||{},userId:be,onClose:()=>cs(null),onSuccess:async C=>{if(console.log("[Auto-Submit] Success! Message ID:",C),cs(null),be){const me=await Ui(be);St(me)}Es(" Claim submitted to insurance!")}}),l.jsx(W5,{open:Us,onClose:()=>{Zr(!1),be&&cu(be).then(P).catch(()=>{})},userId:be||"",userEmail:_e}),va&&l.jsx(ow,{userId:be,onClose:()=>xa(!1),onSave:C=>{ki(!0),xa(!1)}}),xn&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>rs(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 bg-white p-0 overflow-hidden",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"p-6 bg-emerald-50 dark:bg-emerald-900/20 border-b border-emerald-200 dark:border-emerald-800 flex flex-col items-center text-center",children:[l.jsx("div",{className:"h-14 w-14 rounded-full bg-emerald-600 text-white flex items-center justify-center text-2xl shadow animate-pulse",children:""}),l.jsx("div",{className:"mt-3 text-lg font-semibold text-emerald-800 dark:text-emerald-200",children:"Vet Bill Saved Successfully!"}),l.jsx("div",{className:"mt-1 text-xs text-emerald-900/80 dark:text-emerald-300/80",children:"Your vet bill was saved. You can submit it to insurance when ready."})]}),l.jsxs("div",{className:"p-6 text-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Pet:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100 font-semibold",children:[xn.petName," (",xn.species,")"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Amount:"})," ",l.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-slate-100",children:un(xn.amount||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Date:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:xn.serviceDate||""})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Insurance:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:xn.insurance||"Not Insured"})]}),xn.insurance&&xn.insurance.trim()!==""&&l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Filing Deadline:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[xn.deadlineDate||""," (",(()=>{if(!xn.deadlineDate)return"";const C=new Date;C.setHours(0,0,0,0);const me=new Date(xn.deadlineDate);me.setHours(0,0,0,0);const Se=me.getTime()-C.getTime(),Pe=Math.ceil(Se/(1e3*60*60*24));return Pe>0?`${Pe} days remaining`:"overdue"})(),")"]})]})]}),l.jsx("div",{className:"mt-5 flex justify-center",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 text-sm font-medium w-full sm:w-auto",onClick:async()=>{rs(null),k(null),Z(null),t(null),v(null),U(""),le(""),H("insured");try{if(be){const C=await Ui(be);St(C)}}catch{}ft(!1)},children:"Done"})})]})]})}),l.jsx("footer",{className:"mt-12 pb-8 text-center",children:l.jsx("p",{className:"text-xs text-slate-400",children:" Your data is encrypted and never shared"})})]})}function sw({mode:n,onSwitch:e}){const[t,s]=ue.useState(""),[a,o]=ue.useState(""),[u,d]=ue.useState(!1),[f,m]=ue.useState(null),[v,w]=ue.useState(!1),[k,y]=ue.useState(null),[P,L]=ue.useState(!1),I=async A=>{A.preventDefault(),d(!0),m(null);try{try{console.log("[auth] handleSubmit start:",{mode:n,emailPreview:t.replace(/(.).+(@.+)/,"$1***$2")})}catch{}if(n==="signup"){const{data:G,error:U}=await ct.auth.signUp({email:t,password:a});try{console.log("[auth] signUp result:",{hasUser:!!G?.user,hasSession:!!G?.session,error:U||null})}catch{}if(U)throw U;y(t)}else{const{data:G,error:U}=await ct.auth.signInWithPassword({email:t,password:a});try{console.log("[auth] signInWithPassword result:",{hasUser:!!G?.user,hasSession:!!G?.session,error:U||null})}catch{}if(U)throw U;try{const{data:$}=await ct.auth.getSession();console.log("[auth] post-login getSession():",{hasSession:!!$?.session,userId:$?.session?.user?.id||null});const le=typeof window<"u"?window.localStorage?.getItem("pch.auth"):null;console.log("[auth] localStorage pch.auth present:",!!le)}catch{}}}catch(G){m(G?.message||"Authentication failed")}finally{d(!1)}};return P&&n==="login"?l.jsx(Z5,{onBack:()=>L(!1)}):l.jsxs("form",{onSubmit:I,className:"space-y-4",children:[k&&l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:[l.jsx("div",{className:"font-medium",children:"Account created!"}),l.jsxs("div",{className:"text-[13px] mt-1",children:["Please check your email at ",l.jsx("span",{className:"font-mono",children:k})," to verify your account. You won't be able to log in until you confirm your email address."]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-email",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Email"}),l.jsx("input",{id:"auth-email",type:"email",value:t,onChange:A=>s(A.target.value),placeholder:n==="signup"?"Enter your email to get started":"Enter your email",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-password",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{id:"auth-password",type:v?"text":"password",value:a,onChange:A=>o(A.target.value),placeholder:n==="signup"?"Create a password (6+ characters)":"Enter your password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 pr-10 text-sm",required:!0}),l.jsx("button",{type:"button",onClick:()=>w(A=>!A),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400","aria-label":v?"Hide password":"Show password",title:v?"Hide password":"Show password",children:v?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a21.87 21.87 0 0 1 5.06-7.94"}),l.jsx("path",{d:"M10.58 10.58a2 2 0 1 0 2.83 2.83"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 4.12A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8a21.87 21.87 0 0 1-2.16 3.19"})]}):l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),n==="login"&&l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"button",onClick:()=>L(!0),className:"text-xs text-emerald-600 hover:text-emerald-700",children:"Forgot password?"})}),f&&l.jsx("p",{className:"text-xs text-rose-600",children:f}),n==="signup"&&l.jsx("p",{className:"text-xs text-center text-slate-500",children:" Your data is encrypted and never shared"}),l.jsx("button",{type:"submit",disabled:u,className:["w-full inline-flex items-center justify-center rounded-lg text-white px-4 py-2.5 text-sm font-semibold disabled:opacity-60 transition-colors",n==="signup"?"bg-teal-600 hover:bg-teal-700":"bg-emerald-600 hover:bg-emerald-700"].join(" "),children:u?"Please wait":n==="login"?"Log In":"Sign Up"}),l.jsx("div",{className:"text-center pt-2 border-t border-slate-200",children:l.jsx("p",{className:"text-xs text-slate-600",children:n==="signup"?l.jsxs(l.Fragment,{children:["Already have an account?"," ",l.jsx("button",{type:"button",onClick:()=>e("login"),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Sign in instead "})]}):l.jsxs(l.Fragment,{children:["New here?"," ",l.jsx("button",{type:"button",onClick:()=>e("signup"),className:"text-teal-600 hover:text-teal-700 font-medium",children:"Create an account "})]})})})]})}function iw({userId:n,userEmail:e,onClose:t}){const[s,a]=ue.useState(e||"");return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:o=>o.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-userid",className:"block text-sm font-medium mb-1",children:"User ID"}),l.jsx("input",{id:"settings-userid",type:"text",value:n||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-email",className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{id:"settings-email",type:"email",value:s,onChange:o=>a(o.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]}),l.jsx("button",{onClick:t,className:"mt-6 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium",children:"Close"})]})})}function aw({userId:n,userEmail:e,onClose:t,onDefaultExpenseChange:s,onDefaultPeriodChange:a}){const[o,u]=ue.useState(!1),[d,f]=ue.useState(""),[m,v]=ue.useState(""),[w,k]=ue.useState(""),[y,P]=ue.useState(""),[L,I]=ue.useState(""),[A,G]=ue.useState(""),[U,$]=ue.useState(null);ue.useEffect(()=>{n&&(async()=>{u(!0);try{const{data:he,error:H}=await ct.from("profiles").select("*").eq("id",n).single();if(H)throw H;he&&(f(he.full_name||""),v(he.phone?k5(he.phone):""),k(he.address||""),P(he.city||""),I(he.state||""),G(he.zip||""),$(he.signature||null))}catch(he){console.error("[settings load] error",he)}finally{u(!1)}})()},[n]);const le=async()=>{if(n){u(!0);try{const he=Rd(m),{error:H}=await ct.from("profiles").upsert({id:n,email:e||"",full_name:d,phone:he||null,address:w||null,city:y||null,state:L||null,zip:A||null});if(H)throw H;alert("Profile saved successfully!"),t()}catch(he){console.error("[save profile] error",he),alert("Error saving profile")}finally{u(!1)}}};return l.jsxs("section",{className:"mx-auto max-w-3xl mt-6 pb-12",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),l.jsx("button",{type:"button",onClick:t,className:"text-sm text-slate-600 dark:text-slate-300",children:"Close"})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Profile Information"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Manage your personal information"}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Email"}),l.jsx("input",{value:e||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:d,onChange:he=>f(he.target.value),placeholder:"John Smith",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Street Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:w,onChange:he=>k(he.target.value),placeholder:"123 Main St",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[l.jsxs("div",{className:"col-span-6",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:y,onChange:he=>P(he.target.value),placeholder:"San Francisco",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["State ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:L,onChange:he=>I(he.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm uppercase"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["ZIP ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:A,onChange:he=>G(he.target.value),placeholder:"94105",maxLength:10,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:m,onChange:he=>v(Kf(he.target.value,m)),placeholder:"(123) 456-7890",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(x1,{userId:n,initialSignature:U,onSave:he=>$(he)})}),l.jsxs("div",{className:"mt-4 sticky bottom-4 bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-lg",children:[l.jsx("button",{type:"button",onClick:le,disabled:o,className:"w-full inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 text-sm font-medium disabled:opacity-60 transition-colors",children:o?"Saving...":"Save Profile"}),l.jsxs("p",{className:"mt-2 text-xs text-center text-slate-500",children:[l.jsx("span",{className:"text-red-500",children:"*"})," Required fields for claim submission"]})]})]})}function ow({userId:n,onClose:e,onSave:t}){const[s,a]=ue.useState(""),[o,u]=ue.useState(!1),[d,f]=ue.useState(!1),[m,v]=ue.useState(null),w=async()=>{if(!(!n||!s.trim()||!o)){f(!0),v(null);try{const k=Rd(s);if(!k)throw new Error("Invalid phone number");const{error:y}=await ct.from("profiles").update({phone:k,sms_opt_in:!0}).eq("id",n);if(y)throw y;let P=null;try{P=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}const{error:L}=await ct.from("sms_consent").insert({user_id:n,phone_number:k,consented:!0,consent_text:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support.",ip_address:P});L&&console.error("[SmsIntroModal] Failed to save SMS consent:",L),t(k)}catch(k){v(k?.message||"Failed to save phone number")}finally{f(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:k=>k.stopPropagation(),children:[m&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:m}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Never forget a dose"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Get a friendly text when it's medication time"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Phone Number"}),l.jsx("input",{type:"tel",value:s,onChange:k=>a(Kf(k.target.value,s)),placeholder:"(555) 123-4567",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o,onChange:k=>u(k.target.checked),className:"mt-0.5 w-4 h-4 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support."})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors text-sm",children:"Skip for now"}),l.jsx("button",{type:"button",disabled:!s.trim()||!o||d,onClick:w,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-4 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200 text-sm font-medium",children:d?"Saving":"Enable Reminders"})]})]})})}o2.createRoot(document.getElementById("root")).render(l.jsx(Uf.StrictMode,{children:l.jsx(rw,{})}));export{Pr as _,lw as c,_u as g};
