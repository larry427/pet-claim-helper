(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _u(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function K1(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var jh={exports:{}},ou={},Ah={exports:{}},Zt={};var X0;function J1(){if(X0)return Zt;X0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function S(X){return X===null||typeof X!="object"?null:(X=_&&X[_]||X["@@iterator"],typeof X=="function"?X:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,L={};function T(X,P,W){this.props=X,this.context=P,this.refs=L,this.updater=W||y}T.prototype.isReactComponent={},T.prototype.setState=function(X,P){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,P,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function A(){}A.prototype=T.prototype;function Y(X,P,W){this.props=X,this.context=P,this.refs=L,this.updater=W||y}var B=Y.prototype=new A;B.constructor=Y,E(B,T.prototype),B.isPureReactComponent=!0;var H=Array.isArray,ue=Object.prototype.hasOwnProperty,de={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function K(X,P,W){var re,oe={},he=null,we=null;if(P!=null)for(re in P.ref!==void 0&&(we=P.ref),P.key!==void 0&&(he=""+P.key),P)ue.call(P,re)&&!Z.hasOwnProperty(re)&&(oe[re]=P[re]);var Ne=arguments.length-2;if(Ne===1)oe.children=W;else if(1<Ne){for(var Ae=Array(Ne),me=0;me<Ne;me++)Ae[me]=arguments[me+2];oe.children=Ae}if(X&&X.defaultProps)for(re in Ne=X.defaultProps,Ne)oe[re]===void 0&&(oe[re]=Ne[re]);return{$$typeof:n,type:X,key:he,ref:we,props:oe,_owner:de.current}}function G(X,P){return{$$typeof:n,type:X.type,key:P,ref:X.ref,props:X.props,_owner:X._owner}}function ne(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function D(X){var P={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(W){return P[W]})}var q=/\/+/g;function z(X,P){return typeof X=="object"&&X!==null&&X.key!=null?D(""+X.key):P.toString(36)}function O(X,P,W,re,oe){var he=typeof X;(he==="undefined"||he==="boolean")&&(X=null);var we=!1;if(X===null)we=!0;else switch(he){case"string":case"number":we=!0;break;case"object":switch(X.$$typeof){case n:case e:we=!0}}if(we)return we=X,oe=oe(we),X=re===""?"."+z(we,0):re,H(oe)?(W="",X!=null&&(W=X.replace(q,"$&/")+"/"),O(oe,P,W,"",function(me){return me})):oe!=null&&(ne(oe)&&(oe=G(oe,W+(!oe.key||we&&we.key===oe.key?"":(""+oe.key).replace(q,"$&/")+"/")+X)),P.push(oe)),1;if(we=0,re=re===""?".":re+":",H(X))for(var Ne=0;Ne<X.length;Ne++){he=X[Ne];var Ae=re+z(he,Ne);we+=O(he,P,W,Ae,oe)}else if(Ae=S(X),typeof Ae=="function")for(X=Ae.call(X),Ne=0;!(he=X.next()).done;)he=he.value,Ae=re+z(he,Ne++),we+=O(he,P,W,Ae,oe);else if(he==="object")throw P=String(X),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return we}function Q(X,P,W){if(X==null)return X;var re=[],oe=0;return O(X,re,"","",function(he){return P.call(W,he,oe++)}),re}function ae(X){if(X._status===-1){var P=X._result;P=P(),P.then(function(W){(X._status===0||X._status===-1)&&(X._status=1,X._result=W)},function(W){(X._status===0||X._status===-1)&&(X._status=2,X._result=W)}),X._status===-1&&(X._status=0,X._result=P)}if(X._status===1)return X._result.default;throw X._result}var se={current:null},M={transition:null},ce={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:M,ReactCurrentOwner:de};function be(){throw Error("act(...) is not supported in production builds of React.")}return Zt.Children={map:Q,forEach:function(X,P,W){Q(X,function(){P.apply(this,arguments)},W)},count:function(X){var P=0;return Q(X,function(){P++}),P},toArray:function(X){return Q(X,function(P){return P})||[]},only:function(X){if(!ne(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Zt.Component=T,Zt.Fragment=t,Zt.Profiler=a,Zt.PureComponent=Y,Zt.StrictMode=s,Zt.Suspense=f,Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Zt.act=be,Zt.cloneElement=function(X,P,W){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var re=E({},X.props),oe=X.key,he=X.ref,we=X._owner;if(P!=null){if(P.ref!==void 0&&(he=P.ref,we=de.current),P.key!==void 0&&(oe=""+P.key),X.type&&X.type.defaultProps)var Ne=X.type.defaultProps;for(Ae in P)ue.call(P,Ae)&&!Z.hasOwnProperty(Ae)&&(re[Ae]=P[Ae]===void 0&&Ne!==void 0?Ne[Ae]:P[Ae])}var Ae=arguments.length-2;if(Ae===1)re.children=W;else if(1<Ae){Ne=Array(Ae);for(var me=0;me<Ae;me++)Ne[me]=arguments[me+2];re.children=Ne}return{$$typeof:n,type:X.type,key:oe,ref:he,props:re,_owner:we}},Zt.createContext=function(X){return X={$$typeof:u,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:o,_context:X},X.Consumer=X},Zt.createElement=K,Zt.createFactory=function(X){var P=K.bind(null,X);return P.type=X,P},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(X){return{$$typeof:d,render:X}},Zt.isValidElement=ne,Zt.lazy=function(X){return{$$typeof:x,_payload:{_status:-1,_result:X},_init:ae}},Zt.memo=function(X,P){return{$$typeof:m,type:X,compare:P===void 0?null:P}},Zt.startTransition=function(X){var P=M.transition;M.transition={};try{X()}finally{M.transition=P}},Zt.unstable_act=be,Zt.useCallback=function(X,P){return se.current.useCallback(X,P)},Zt.useContext=function(X){return se.current.useContext(X)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(X){return se.current.useDeferredValue(X)},Zt.useEffect=function(X,P){return se.current.useEffect(X,P)},Zt.useId=function(){return se.current.useId()},Zt.useImperativeHandle=function(X,P,W){return se.current.useImperativeHandle(X,P,W)},Zt.useInsertionEffect=function(X,P){return se.current.useInsertionEffect(X,P)},Zt.useLayoutEffect=function(X,P){return se.current.useLayoutEffect(X,P)},Zt.useMemo=function(X,P){return se.current.useMemo(X,P)},Zt.useReducer=function(X,P,W){return se.current.useReducer(X,P,W)},Zt.useRef=function(X){return se.current.useRef(X)},Zt.useState=function(X){return se.current.useState(X)},Zt.useSyncExternalStore=function(X,P,W){return se.current.useSyncExternalStore(X,P,W)},Zt.useTransition=function(){return se.current.useTransition()},Zt.version="18.3.1",Zt}var Q0;function Rf(){return Q0||(Q0=1,Ah.exports=J1()),Ah.exports}var Z0;function X1(){if(Z0)return ou;Z0=1;var n=Rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var x,_={},S=null,y=null;m!==void 0&&(S=""+m),f.key!==void 0&&(S=""+f.key),f.ref!==void 0&&(y=f.ref);for(x in f)s.call(f,x)&&!o.hasOwnProperty(x)&&(_[x]=f[x]);if(d&&d.defaultProps)for(x in f=d.defaultProps,f)_[x]===void 0&&(_[x]=f[x]);return{$$typeof:e,type:d,key:S,ref:y,props:_,_owner:a.current}}return ou.Fragment=t,ou.jsx=u,ou.jsxs=u,ou}var ep;function Q1(){return ep||(ep=1,jh.exports=X1()),jh.exports}var l=Q1(),ge=Rf();const Mf=_u(ge);var ad={},Ph={exports:{}},si={},Ch={exports:{}},Eh={};var tp;function Z1(){return tp||(tp=1,(function(n){function e(M,ce){var be=M.length;M.push(ce);e:for(;0<be;){var X=be-1>>>1,P=M[X];if(0<a(P,ce))M[X]=ce,M[be]=P,be=X;else break e}}function t(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var ce=M[0],be=M.pop();if(be!==ce){M[0]=be;e:for(var X=0,P=M.length,W=P>>>1;X<W;){var re=2*(X+1)-1,oe=M[re],he=re+1,we=M[he];if(0>a(oe,be))he<P&&0>a(we,oe)?(M[X]=we,M[he]=be,X=he):(M[X]=oe,M[re]=be,X=re);else if(he<P&&0>a(we,be))M[X]=we,M[he]=be,X=he;else break e}}return ce}function a(M,ce){var be=M.sortIndex-ce.sortIndex;return be!==0?be:M.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],x=1,_=null,S=3,y=!1,E=!1,L=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(M){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=M)s(m),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=t(m)}}function H(M){if(L=!1,B(M),!E)if(t(f)!==null)E=!0,ae(ue);else{var ce=t(m);ce!==null&&se(H,ce.startTime-M)}}function ue(M,ce){E=!1,L&&(L=!1,A(K),K=-1),y=!0;var be=S;try{for(B(ce),_=t(f);_!==null&&(!(_.expirationTime>ce)||M&&!D());){var X=_.callback;if(typeof X=="function"){_.callback=null,S=_.priorityLevel;var P=X(_.expirationTime<=ce);ce=n.unstable_now(),typeof P=="function"?_.callback=P:_===t(f)&&s(f),B(ce)}else s(f);_=t(f)}if(_!==null)var W=!0;else{var re=t(m);re!==null&&se(H,re.startTime-ce),W=!1}return W}finally{_=null,S=be,y=!1}}var de=!1,Z=null,K=-1,G=5,ne=-1;function D(){return!(n.unstable_now()-ne<G)}function q(){if(Z!==null){var M=n.unstable_now();ne=M;var ce=!0;try{ce=Z(!0,M)}finally{ce?z():(de=!1,Z=null)}}else de=!1}var z;if(typeof Y=="function")z=function(){Y(q)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Q=O.port2;O.port1.onmessage=q,z=function(){Q.postMessage(null)}}else z=function(){T(q,0)};function ae(M){Z=M,de||(de=!0,z())}function se(M,ce){K=T(function(){M(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,ae(ue))},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(M){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var be=S;S=ce;try{return M()}finally{S=be}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(M,ce){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var be=S;S=M;try{return ce()}finally{S=be}},n.unstable_scheduleCallback=function(M,ce,be){var X=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?X+be:X):be=X,M){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=be+P,M={id:x++,callback:ce,priorityLevel:M,startTime:be,expirationTime:P,sortIndex:-1},be>X?(M.sortIndex=be,e(m,M),t(f)===null&&M===t(m)&&(L?(A(K),K=-1):L=!0,se(H,be-X))):(M.sortIndex=P,e(f,M),E||y||(E=!0,ae(ue))),M},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(M){var ce=S;return function(){var be=S;S=ce;try{return M.apply(this,arguments)}finally{S=be}}}})(Eh)),Eh}var rp;function e2(){return rp||(rp=1,Ch.exports=Z1()),Ch.exports}var np;function t2(){if(np)return si;np=1;var n=Rf(),e=e2();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(a[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function S(r){return f.call(_,r)?!0:f.call(x,r)?!1:m.test(r)?_[r]=!0:(x[r]=!0,!1)}function y(r,i,c,p){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function E(r,i,c,p){if(i===null||typeof i>"u"||y(r,i,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function L(r,i,c,p,b,N,R){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=p,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=r,this.type=i,this.sanitizeURL=N,this.removeEmptyString=R}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){T[r]=new L(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];T[i]=new L(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){T[r]=new L(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){T[r]=new L(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){T[r]=new L(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){T[r]=new L(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){T[r]=new L(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){T[r]=new L(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){T[r]=new L(r,5,!1,r.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function Y(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(A,Y);T[i]=new L(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(A,Y);T[i]=new L(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(A,Y);T[i]=new L(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){T[r]=new L(r,1,!1,r.toLowerCase(),null,!1,!1)}),T.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){T[r]=new L(r,1,!1,r.toLowerCase(),null,!0,!0)});function B(r,i,c,p){var b=T.hasOwnProperty(i)?T[i]:null;(b!==null?b.type!==0:p||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(E(i,c,b,p)&&(c=null),p||b===null?S(i)&&(c===null?r.removeAttribute(i):r.setAttribute(i,""+c)):b.mustUseProperty?r[b.propertyName]=c===null?b.type===3?!1:"":c:(i=b.attributeName,p=b.attributeNamespace,c===null?r.removeAttribute(i):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,p?r.setAttributeNS(p,i,c):r.setAttribute(i,c))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),de=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),D=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),M=Symbol.iterator;function ce(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var be=Object.assign,X;function P(r){if(X===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);X=i&&i[1]||""}return`
`+X+r}var W=!1;function re(r,i){if(!r||W)return"";W=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(De){var p=De}Reflect.construct(r,[],i)}else{try{i.call()}catch(De){p=De}r.call(i.prototype)}else{try{throw Error()}catch(De){p=De}r()}}catch(De){if(De&&p&&typeof De.stack=="string"){for(var b=De.stack.split(`
`),N=p.stack.split(`
`),R=b.length-1,pe=N.length-1;1<=R&&0<=pe&&b[R]!==N[pe];)pe--;for(;1<=R&&0<=pe;R--,pe--)if(b[R]!==N[pe]){if(R!==1||pe!==1)do if(R--,pe--,0>pe||b[R]!==N[pe]){var ye=`
`+b[R].replace(" at new "," at ");return r.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",r.displayName)),ye}while(1<=R&&0<=pe);break}}}finally{W=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?P(r):""}function oe(r){switch(r.tag){case 5:return P(r.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return r=re(r.type,!1),r;case 11:return r=re(r.type.render,!1),r;case 1:return r=re(r.type,!0),r;default:return""}}function he(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Z:return"Fragment";case de:return"Portal";case G:return"Profiler";case K:return"StrictMode";case z:return"Suspense";case O:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case ne:return(r._context.displayName||"Context")+".Provider";case q:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Q:return i=r.displayName||null,i!==null?i:he(r.type)||"Memo";case ae:i=r._payload,r=r._init;try{return he(r(i))}catch{}}return null}function we(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(i);case 8:return i===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ne(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ae(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function me(r){var i=Ae(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),p=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,N=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return b.call(this)},set:function(R){p=""+R,N.call(this,R)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ue(r){r._valueTracker||(r._valueTracker=me(r))}function ze(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),p="";return r&&(p=Ae(r)?r.checked?"true":"false":r.value),r=p,r!==c?(i.setValue(r),!0):!1}function Ve(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xe(r,i){var c=i.checked;return be({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function ee(r,i){var c=i.defaultValue==null?"":i.defaultValue,p=i.checked!=null?i.checked:i.defaultChecked;c=Ne(i.value!=null?i.value:c),r._wrapperState={initialChecked:p,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ke(r,i){i=i.checked,i!=null&&B(r,"checked",i,!1)}function Lt(r,i){Ke(r,i);var c=Ne(i.value),p=i.type;if(c!=null)p==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(p==="submit"||p==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?$e(r,i.type,c):i.hasOwnProperty("defaultValue")&&$e(r,i.type,Ne(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function xt(r,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var p=i.type;if(!(p!=="submit"&&p!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,c||i===r.value||(r.value=i),r.defaultValue=i}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function $e(r,i,c){(i!=="number"||Ve(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var ct=Array.isArray;function et(r,i,c,p){if(r=r.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<r.length;c++)b=i.hasOwnProperty("$"+r[c].value),r[c].selected!==b&&(r[c].selected=b),b&&p&&(r[c].defaultSelected=!0)}else{for(c=""+Ne(c),i=null,b=0;b<r.length;b++){if(r[b].value===c){r[b].selected=!0,p&&(r[b].defaultSelected=!0);return}i!==null||r[b].disabled||(i=r[b])}i!==null&&(i.selected=!0)}}function vt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return be({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function mt(r,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(t(92));if(ct(c)){if(1<c.length)throw Error(t(93));c=c[0]}i=c}i==null&&(i=""),c=i}r._wrapperState={initialValue:Ne(c)}}function qt(r,i){var c=Ne(i.value),p=Ne(i.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),i.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),p!=null&&(r.defaultValue=""+p)}function yt(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function It(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?It(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Kt,ot=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,p,b){MSApp.execUnsafeLocalFunction(function(){return r(i,c,p,b)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Kt=Kt||document.createElement("div"),Kt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Kt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function ft(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ar=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(r){Ar.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),it[i]=it[r]})});function Gt(r,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||it.hasOwnProperty(r)&&it[r]?(""+i).trim():i+"px"}function zt(r,i){r=r.style;for(var c in i)if(i.hasOwnProperty(c)){var p=c.indexOf("--")===0,b=Gt(c,i[c],p);c==="float"&&(c="cssFloat"),p?r.setProperty(c,b):r[c]=b}}var Ut=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yr(r,i){if(i){if(Ut[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function bt(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ur=null;function kt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ot=null,lr=null,Bt=null;function St(r){if(r=Do(r)){if(typeof Ot!="function")throw Error(t(280));var i=r.stateNode;i&&(i=pl(i),Ot(r.stateNode,r.type,i))}}function Tt(r){lr?Bt?Bt.push(r):Bt=[r]:lr=r}function Ps(){if(lr){var r=lr,i=Bt;if(Bt=lr=null,St(r),i)for(r=0;r<i.length;r++)St(i[r])}}function an(r,i){return r(i)}function Cs(){}var es=!1;function _t(r,i,c){if(es)return r(i,c);es=!0;try{return an(r,i,c)}finally{es=!1,(lr!==null||Bt!==null)&&(Cs(),Ps())}}function Mn(r,i){var c=r.stateNode;if(c===null)return null;var p=pl(c);if(p===null)return null;c=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(t(231,i,typeof c));return c}var hs=!1;if(d)try{var mn={};Object.defineProperty(mn,"passive",{get:function(){hs=!0}}),window.addEventListener("test",mn,mn),window.removeEventListener("test",mn,mn)}catch{hs=!1}function ts(r,i,c,p,b,N,R,pe,ye){var De=Array.prototype.slice.call(arguments,3);try{i.apply(c,De)}catch(He){this.onError(He)}}var dr=!1,Tr=null,br=!1,rs=null,Es={onError:function(r){dr=!0,Tr=r}};function Un(r,i,c,p,b,N,R,pe,ye){dr=!1,Tr=null,ts.apply(Es,arguments)}function Hs(r,i,c,p,b,N,R,pe,ye){if(Un.apply(this,arguments),dr){if(dr){var De=Tr;dr=!1,Tr=null}else throw Error(t(198));br||(br=!0,rs=De)}}function Jr(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function zr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function gn(r){if(Jr(r)!==r)throw Error(t(188))}function oi(r){var i=r.alternate;if(!i){if(i=Jr(r),i===null)throw Error(t(188));return i!==r?null:r}for(var c=r,p=i;;){var b=c.return;if(b===null)break;var N=b.alternate;if(N===null){if(p=b.return,p!==null){c=p;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===c)return gn(b),r;if(N===p)return gn(b),i;N=N.sibling}throw Error(t(188))}if(c.return!==p.return)c=b,p=N;else{for(var R=!1,pe=b.child;pe;){if(pe===c){R=!0,c=b,p=N;break}if(pe===p){R=!0,p=b,c=N;break}pe=pe.sibling}if(!R){for(pe=N.child;pe;){if(pe===c){R=!0,c=N,p=b;break}if(pe===p){R=!0,p=N,c=b;break}pe=pe.sibling}if(!R)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?r:i}function ns(r){return r=oi(r),r!==null?Vs(r):null}function Vs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Vs(r);if(i!==null)return i;r=r.sibling}return null}var li=e.unstable_scheduleCallback,Hi=e.unstable_cancelCallback,Ci=e.unstable_shouldYield,Bl=e.unstable_requestPaint,fr=e.unstable_now,Bn=e.unstable_getCurrentPriorityLevel,Ei=e.unstable_ImmediatePriority,ss=e.unstable_UserBlockingPriority,Ls=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,_a=e.unstable_IdlePriority,fs=null,qn=null;function ci(r){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(fs,r,void 0,(r.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:Mr,Vi=Math.log,Na=Math.LN2;function Mr(r){return r>>>=0,r===0?32:31-(Vi(r)/Na|0)|0}var Gi=64,zn=4194304;function Ts(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Yi(r,i){var c=r.pendingLanes;if(c===0)return 0;var p=0,b=r.suspendedLanes,N=r.pingedLanes,R=c&268435455;if(R!==0){var pe=R&~b;pe!==0?p=Ts(pe):(N&=R,N!==0&&(p=Ts(N)))}else R=c&~b,R!==0?p=Ts(R):N!==0&&(p=Ts(N));if(p===0)return 0;if(i!==0&&i!==p&&(i&b)===0&&(b=p&-p,N=i&-i,b>=N||b===16&&(N&4194240)!==0))return i;if((p&4)!==0&&(p|=c&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=p;0<i;)c=31-Rr(i),b=1<<c,p|=r[c],i&=~b;return p}function Ds(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(r,i){for(var c=r.suspendedLanes,p=r.pingedLanes,b=r.expirationTimes,N=r.pendingLanes;0<N;){var R=31-Rr(N),pe=1<<R,ye=b[R];ye===-1?((pe&c)===0||(pe&p)!==0)&&(b[R]=Ds(pe,i)):ye<=i&&(r.expiredLanes|=pe),N&=~pe}}function $n(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ka(){var r=Gi;return Gi<<=1,(Gi&4194240)===0&&(Gi=64),r}function Sa(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function ui(r,i,c){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Rr(i),r[i]=c}function ps(r,i){var c=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var p=r.eventTimes;for(r=r.expirationTimes;0<c;){var b=31-Rr(c),N=1<<b;i[b]=0,p[b]=-1,r[b]=-1,c&=~N}}function Ki(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var p=31-Rr(c),b=1<<p;b&i|r[p]&i&&(r[p]|=i),c&=~b}}var er=0;function di(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var hi,ja,fi,wo,Li,pi=!1,Wn=[],Gs=null,Hn=null,ms=null,Ji=new Map,jt=new Map,Ys=[],rl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ya(r,i){switch(r){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Ji.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(i.pointerId)}}function is(r,i,c,p,b,N){return r===null||r.nativeEvent!==N?(r={blockedOn:i,domEventName:c,eventSystemFlags:p,nativeEvent:N,targetContainers:[b]},i!==null&&(i=Do(i),i!==null&&ja(i)),r):(r.eventSystemFlags|=p,i=r.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),r)}function mi(r,i,c,p,b){switch(i){case"focusin":return Gs=is(Gs,r,i,c,p,b),!0;case"dragenter":return Hn=is(Hn,r,i,c,p,b),!0;case"mouseover":return ms=is(ms,r,i,c,p,b),!0;case"pointerover":var N=b.pointerId;return Ji.set(N,is(Ji.get(N)||null,r,i,c,p,b)),!0;case"gotpointercapture":return N=b.pointerId,jt.set(N,is(jt.get(N)||null,r,i,c,p,b)),!0}return!1}function _o(r){var i=Ra(r.target);if(i!==null){var c=Jr(i);if(c!==null){if(i=c.tag,i===13){if(i=zr(c),i!==null){r.blockedOn=i,Li(r.priority,function(){fi(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Aa(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=Ea(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var p=new c.constructor(c.type,c);ur=p,c.target.dispatchEvent(p),ur=null}else return i=Do(c),i!==null&&ja(i),r.blockedOn=c,!1;i.shift()}return!0}function Xi(r,i,c){Aa(r)&&c.delete(i)}function Ka(){pi=!1,Gs!==null&&Aa(Gs)&&(Gs=null),Hn!==null&&Aa(Hn)&&(Hn=null),ms!==null&&Aa(ms)&&(ms=null),Ji.forEach(Xi),jt.forEach(Xi)}function Is(r,i){r.blockedOn===i&&(r.blockedOn=null,pi||(pi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ka)))}function Qi(r){function i(b){return Is(b,r)}if(0<Wn.length){Is(Wn[0],r);for(var c=1;c<Wn.length;c++){var p=Wn[c];p.blockedOn===r&&(p.blockedOn=null)}}for(Gs!==null&&Is(Gs,r),Hn!==null&&Is(Hn,r),ms!==null&&Is(ms,r),Ji.forEach(i),jt.forEach(i),c=0;c<Ys.length;c++)p=Ys[c],p.blockedOn===r&&(p.blockedOn=null);for(;0<Ys.length&&(c=Ys[0],c.blockedOn===null);)_o(c),c.blockedOn===null&&Ys.shift()}var kn=H.ReactCurrentBatchConfig,Zi=!0;function Pa(r,i,c,p){var b=er,N=kn.transition;kn.transition=null;try{er=1,Ca(r,i,c,p)}finally{er=b,kn.transition=N}}function Ja(r,i,c,p){var b=er,N=kn.transition;kn.transition=null;try{er=4,Ca(r,i,c,p)}finally{er=b,kn.transition=N}}function Ca(r,i,c,p){if(Zi){var b=Ea(r,i,c,p);if(b===null)dl(r,i,p,Os,c),Ya(r,p);else if(mi(b,r,i,c,p))p.stopPropagation();else if(Ya(r,p),i&4&&-1<rl.indexOf(r)){for(;b!==null;){var N=Do(b);if(N!==null&&hi(N),N=Ea(r,i,c,p),N===null&&dl(r,i,p,Os,c),N===b)break;b=N}b!==null&&p.stopPropagation()}else dl(r,i,p,null,c)}}var Os=null;function Ea(r,i,c,p){if(Os=null,r=kt(p),r=Ra(r),r!==null)if(i=Jr(r),i===null)r=null;else if(c=i.tag,c===13){if(r=zr(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Os=r,null}function ea(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bn()){case Ei:return 1;case ss:return 4;case Ls:case Ga:return 16;case _a:return 536870912;default:return 16}default:return 16}}var vn=null,as=null,Ks=null;function Xa(){if(Ks)return Ks;var r,i=as,c=i.length,p,b="value"in vn?vn.value:vn.textContent,N=b.length;for(r=0;r<c&&i[r]===b[r];r++);var R=c-r;for(p=1;p<=R&&i[c-p]===b[N-p];p++);return Ks=b.slice(r,1<p?1-p:void 0)}function ta(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function on(){return!0}function Fs(){return!1}function Ur(r){function i(c,p,b,N,R){this._reactName=c,this._targetInst=b,this.type=p,this.nativeEvent=N,this.target=R,this.currentTarget=null;for(var pe in r)r.hasOwnProperty(pe)&&(c=r[pe],this[pe]=c?c(N):N[pe]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?on:Fs,this.isPropagationStopped=Fs,this}return be(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),i}var C={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ve=Ur(C),v=be({},C,{view:0,detail:0}),k=Ur(v),F,te,fe,_e=be({},v,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fe&&(fe&&r.type==="mousemove"?(F=r.screenX-fe.screenX,te=r.screenY-fe.screenY):te=F=0,fe=r),F)},movementY:function(r){return"movementY"in r?r.movementY:te}}),je=Ur(_e),Me=be({},_e,{dataTransfer:0}),Re=Ur(Me),Ge=be({},v,{relatedTarget:0}),Qe=Ur(Ge),Nt=be({},C,{animationName:0,elapsedTime:0,pseudoElement:0}),Ft=Ur(Nt),rr=be({},C,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),nr=Ur(rr),wr=be({},C,{data:0}),_r=Ur(wr),Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function At(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Jt[r])?!!i[r]:!1}function pr(){return At}var $r=be({},v,{key:function(r){if(r.key){var i=Qr[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ta(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Js[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(r){return r.type==="keypress"?ta(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ta(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Tn=Ur($r),Sn=be({},_e,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ln=Ur(Sn),Rs=be({},v,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),Dn=Ur(Rs),Qa=be({},C,{propertyName:0,elapsedTime:0,pseudoElement:0}),Za=Ur(Qa),nl=be({},_e,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),sl=Ur(nl),os=[9,13,27,32],gi=d&&"CompositionEvent"in window,Ti=null;d&&"documentMode"in document&&(Ti=document.documentMode);var ql=d&&"TextEvent"in window&&!Ti,Ms=d&&(!gi||Ti&&8<Ti&&11>=Ti),La=" ",No=!1;function ko(r,i){switch(r){case"keyup":return os.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ra(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xs=!1;function Us(r,i){switch(r){case"compositionend":return ra(i);case"keypress":return i.which!==32?null:(No=!0,La);case"textInput":return r=i.data,r===La&&No?null:r;default:return null}}function Bs(r,i){if(Xs)return r==="compositionend"||!gi&&ko(r,i)?(r=Xa(),Ks=as=vn=null,Xs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ms&&i.locale!=="ko"?null:i.data;default:return null}}var Ta={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Di(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Ta[r.type]:i==="textarea"}function na(r,i,c,p){Tt(p),i=Vl(i,"onChange"),0<i.length&&(c=new ve("onChange","change",null,c,p),r.push({event:c,listeners:i}))}var sa=null,Ii=null;function Zr(r){cl(r,0)}function eo(r){var i=uo(r);if(ze(i))return r}function Oi(r,i){if(r==="change")return i}var vi=!1;if(d){var to;if(d){var ro="oninput"in document;if(!ro){var So=document.createElement("div");So.setAttribute("oninput","return;"),ro=typeof So.oninput=="function"}to=ro}else to=!1;vi=to&&(!document.documentMode||9<document.documentMode)}function jo(){sa&&(sa.detachEvent("onpropertychange",ia),Ii=sa=null)}function ia(r){if(r.propertyName==="value"&&eo(Ii)){var i=[];na(i,Ii,r,kt(r)),_t(Zr,i)}}function Da(r,i,c){r==="focusin"?(jo(),sa=i,Ii=c,sa.attachEvent("onpropertychange",ia)):r==="focusout"&&jo()}function Ia(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return eo(Ii)}function no(r,i){if(r==="click")return eo(i)}function Oa(r,i){if(r==="input"||r==="change")return eo(i)}function so(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Wr=typeof Object.is=="function"?Object.is:so;function gs(r,i){if(Wr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),p=Object.keys(i);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var b=c[p];if(!f.call(i,b)||!Wr(r[b],i[b]))return!1}return!0}function sr(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function mr(r,i){var c=sr(r);r=0;for(var p;c;){if(c.nodeType===3){if(p=r+c.textContent.length,r<=i&&p>=i)return{node:c,offset:i-r};r=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=sr(c)}}function Hr(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Hr(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function cn(){for(var r=window,i=Ve();i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=Ve(r.document)}return i}function xi(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function il(r){var i=cn(),c=r.focusedElem,p=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&Hr(c.ownerDocument.documentElement,c)){if(p!==null&&xi(c)){if(i=p.start,r=p.end,r===void 0&&(r=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(r,c.value.length);else if(r=(i=c.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var b=c.textContent.length,N=Math.min(p.start,b);p=p.end===void 0?N:Math.min(p.end,b),!r.extend&&N>p&&(b=p,p=N,N=b),b=mr(c,N);var R=mr(c,p);b&&R&&(r.rangeCount!==1||r.anchorNode!==b.node||r.anchorOffset!==b.offset||r.focusNode!==R.node||r.focusOffset!==R.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),r.removeAllRanges(),N>p?(r.addRange(i),r.extend(R.node,R.offset)):(i.setEnd(R.node,R.offset),r.addRange(i)))}}for(i=[],r=c;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)r=i[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Ao=d&&"documentMode"in document&&11>=document.documentMode,aa=null,zl=null,Po=null,$l=!1;function Rc(r,i,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$l||aa==null||aa!==Ve(p)||(p=aa,"selectionStart"in p&&xi(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Po&&gs(Po,p)||(Po=p,p=Vl(zl,"onSelect"),0<p.length&&(i=new ve("onSelect","select",null,i,c),r.push({event:i,listeners:p}),i.target=aa)))}function al(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var io={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},ao={},Mc={};d&&(Mc=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function ol(r){if(ao[r])return ao[r];if(!io[r])return r;var i=io[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Mc)return ao[r]=i[c];return r}var Uc=ol("animationend"),Bc=ol("animationiteration"),qc=ol("animationstart"),zc=ol("transitionend"),$c=new Map,Wc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(r,i){$c.set(r,i),o(i,[r])}for(var Co=0;Co<Wc.length;Co++){var ls=Wc[Co],Qs=ls.toLowerCase(),Wl=ls[0].toUpperCase()+ls.slice(1);Fi(Qs,"on"+Wl)}Fi(Uc,"onAnimationEnd"),Fi(Bc,"onAnimationIteration"),Fi(qc,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(zc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ju=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fa));function ll(r,i,c){var p=r.type||"unknown-event";r.currentTarget=c,Hs(p,i,void 0,r),r.currentTarget=null}function cl(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var p=r[c],b=p.event;p=p.listeners;e:{var N=void 0;if(i)for(var R=p.length-1;0<=R;R--){var pe=p[R],ye=pe.instance,De=pe.currentTarget;if(pe=pe.listener,ye!==N&&b.isPropagationStopped())break e;ll(b,pe,De),N=ye}else for(R=0;R<p.length;R++){if(pe=p[R],ye=pe.instance,De=pe.currentTarget,pe=pe.listener,ye!==N&&b.isPropagationStopped())break e;ll(b,pe,De),N=ye}}}if(br)throw r=rs,br=!1,rs=null,r}function Nr(r,i){var c=i[xs];c===void 0&&(c=i[xs]=new Set);var p=r+"__bubble";c.has(p)||(ul(i,r,2,!1),c.add(p))}function Hl(r,i,c){var p=0;i&&(p|=4),ul(c,r,p,i)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function oo(r){if(!r[Eo]){r[Eo]=!0,s.forEach(function(c){c!=="selectionchange"&&(ju.has(c)||Hl(c,!1,r),Hl(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Eo]||(i[Eo]=!0,Hl("selectionchange",!1,i))}}function ul(r,i,c,p){switch(ea(i)){case 1:var b=Pa;break;case 4:b=Ja;break;default:b=Ca}c=b.bind(null,i,c,r),b=void 0,!hs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),p?b!==void 0?r.addEventListener(i,c,{capture:!0,passive:b}):r.addEventListener(i,c,!0):b!==void 0?r.addEventListener(i,c,{passive:b}):r.addEventListener(i,c,!1)}function dl(r,i,c,p,b){var N=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var pe=p.stateNode.containerInfo;if(pe===b||pe.nodeType===8&&pe.parentNode===b)break;if(R===4)for(R=p.return;R!==null;){var ye=R.tag;if((ye===3||ye===4)&&(ye=R.stateNode.containerInfo,ye===b||ye.nodeType===8&&ye.parentNode===b))return;R=R.return}for(;pe!==null;){if(R=Ra(pe),R===null)return;if(ye=R.tag,ye===5||ye===6){p=N=R;continue e}pe=pe.parentNode}}p=p.return}_t(function(){var De=N,He=kt(c),Ye=[];e:{var We=$c.get(r);if(We!==void 0){var tt=ve,ut=r;switch(r){case"keypress":if(ta(c)===0)break e;case"keydown":case"keyup":tt=Tn;break;case"focusin":ut="focus",tt=Qe;break;case"focusout":ut="blur",tt=Qe;break;case"beforeblur":case"afterblur":tt=Qe;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Re;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Dn;break;case Uc:case Bc:case qc:tt=Ft;break;case zc:tt=Za;break;case"scroll":tt=k;break;case"wheel":tt=sl;break;case"copy":case"cut":case"paste":tt=nr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=ln}var ht=(i&4)!==0,bn=!ht&&r==="scroll",Ee=ht?We!==null?We+"Capture":null:We;ht=[];for(var Se=De,Te;Se!==null;){Te=Se;var Je=Te.stateNode;if(Te.tag===5&&Je!==null&&(Te=Je,Ee!==null&&(Je=Mn(Se,Ee),Je!=null&&ht.push(hl(Se,Je,Te)))),bn)break;Se=Se.return}0<ht.length&&(We=new tt(We,ut,null,c,He),Ye.push({event:We,listeners:ht}))}}if((i&7)===0){e:{if(We=r==="mouseover"||r==="pointerover",tt=r==="mouseout"||r==="pointerout",We&&c!==ur&&(ut=c.relatedTarget||c.fromElement)&&(Ra(ut)||ut[Vn]))break e;if((tt||We)&&(We=He.window===He?He:(We=He.ownerDocument)?We.defaultView||We.parentWindow:window,tt?(ut=c.relatedTarget||c.toElement,tt=De,ut=ut?Ra(ut):null,ut!==null&&(bn=Jr(ut),ut!==bn||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(tt=null,ut=De),tt!==ut)){if(ht=je,Je="onMouseLeave",Ee="onMouseEnter",Se="mouse",(r==="pointerout"||r==="pointerover")&&(ht=ln,Je="onPointerLeave",Ee="onPointerEnter",Se="pointer"),bn=tt==null?We:uo(tt),Te=ut==null?We:uo(ut),We=new ht(Je,Se+"leave",tt,c,He),We.target=bn,We.relatedTarget=Te,Je=null,Ra(He)===De&&(ht=new ht(Ee,Se+"enter",ut,c,He),ht.target=Te,ht.relatedTarget=bn,Je=ht),bn=Je,tt&&ut)t:{for(ht=tt,Ee=ut,Se=0,Te=ht;Te;Te=lo(Te))Se++;for(Te=0,Je=Ee;Je;Je=lo(Je))Te++;for(;0<Se-Te;)ht=lo(ht),Se--;for(;0<Te-Se;)Ee=lo(Ee),Te--;for(;Se--;){if(ht===Ee||Ee!==null&&ht===Ee.alternate)break t;ht=lo(ht),Ee=lo(Ee)}ht=null}else ht=null;tt!==null&&Au(Ye,We,tt,ht,!1),ut!==null&&bn!==null&&Au(Ye,bn,ut,ht,!0)}}e:{if(We=De?uo(De):window,tt=We.nodeName&&We.nodeName.toLowerCase(),tt==="select"||tt==="input"&&We.type==="file")var gt=Oi;else if(Di(We))if(vi)gt=Oa;else{gt=Ia;var Pt=Da}else(tt=We.nodeName)&&tt.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(gt=no);if(gt&&(gt=gt(r,De))){na(Ye,gt,c,He);break e}Pt&&Pt(r,We,De),r==="focusout"&&(Pt=We._wrapperState)&&Pt.controlled&&We.type==="number"&&$e(We,"number",We.value)}switch(Pt=De?uo(De):window,r){case"focusin":(Di(Pt)||Pt.contentEditable==="true")&&(aa=Pt,zl=De,Po=null);break;case"focusout":Po=zl=aa=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,Rc(Ye,c,He);break;case"selectionchange":if(Ao)break;case"keydown":case"keyup":Rc(Ye,c,He)}var Ct;if(gi)e:{switch(r){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else Xs?ko(r,c)&&(Rt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Rt="onCompositionStart");Rt&&(Ms&&c.locale!=="ko"&&(Xs||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Xs&&(Ct=Xa()):(vn=He,as="value"in vn?vn.value:vn.textContent,Xs=!0)),Pt=Vl(De,Rt),0<Pt.length&&(Rt=new _r(Rt,r,null,c,He),Ye.push({event:Rt,listeners:Pt}),Ct?Rt.data=Ct:(Ct=ra(c),Ct!==null&&(Rt.data=Ct)))),(Ct=ql?Us(r,c):Bs(r,c))&&(De=Vl(De,"onBeforeInput"),0<De.length&&(He=new _r("onBeforeInput","beforeinput",null,c,He),Ye.push({event:He,listeners:De}),He.data=Ct))}cl(Ye,i)})}function hl(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Vl(r,i){for(var c=i+"Capture",p=[];r!==null;){var b=r,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=Mn(r,c),N!=null&&p.unshift(hl(r,N,b)),N=Mn(r,i),N!=null&&p.push(hl(r,N,b))),r=r.return}return p}function lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Au(r,i,c,p,b){for(var N=i._reactName,R=[];c!==null&&c!==p;){var pe=c,ye=pe.alternate,De=pe.stateNode;if(ye!==null&&ye===p)break;pe.tag===5&&De!==null&&(pe=De,b?(ye=Mn(c,N),ye!=null&&R.unshift(hl(c,ye,pe))):b||(ye=Mn(c,N),ye!=null&&R.push(hl(c,ye,pe)))),c=c.return}R.length!==0&&r.push({event:i,listeners:R})}var Bd=/\r\n?/g,qd=/\u0000|\uFFFD/g;function Pu(r){return(typeof r=="string"?r:""+r).replace(Bd,`
`).replace(qd,"")}function Gl(r,i,c){if(i=Pu(i),Pu(r)!==i&&c)throw Error(t(425))}function Lo(){}var fl=null,co=null;function Hc(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vc=typeof setTimeout=="function"?setTimeout:void 0,Cu=typeof clearTimeout=="function"?clearTimeout:void 0,Eu=typeof Promise=="function"?Promise:void 0,zd=typeof queueMicrotask=="function"?queueMicrotask:typeof Eu<"u"?function(r){return Eu.resolve(null).then(r).catch($d)}:Vc;function $d(r){setTimeout(function(){throw r})}function Gc(r,i){var c=i,p=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(p===0){r.removeChild(b),Qi(i);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=b}while(c);Qi(i)}function cs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Zs(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}var vs=Math.random().toString(36).slice(2),Ri="__reactFiber$"+vs,To="__reactProps$"+vs,Vn="__reactContainer$"+vs,xs="__reactEvents$"+vs,Wd="__reactListeners$"+vs,Hd="__reactHandles$"+vs;function Ra(r){var i=r[Ri];if(i)return i;for(var c=r.parentNode;c;){if(i=c[Vn]||c[Ri]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=Zs(r);r!==null;){if(c=r[Ri])return c;r=Zs(r)}return i}r=c,c=r.parentNode}return null}function Do(r){return r=r[Ri]||r[Vn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function uo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function pl(r){return r[To]||null}var Yc=[],oa=-1;function yi(r){return{current:r}}function hr(r){0>oa||(r.current=Yc[oa],Yc[oa]=null,oa--)}function gr(r,i){oa++,Yc[oa]=r.current,r.current=i}var Ma={},In=yi(Ma),ys=yi(!1),ho=Ma;function Io(r,i){var c=r.type.contextTypes;if(!c)return Ma;var p=r.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===i)return p.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in c)b[N]=i[N];return p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=b),b}function bs(r){return r=r.childContextTypes,r!=null}function Yl(){hr(ys),hr(In)}function Lu(r,i,c){if(In.current!==Ma)throw Error(t(168));gr(In,i),gr(ys,c)}function Kc(r,i,c){var p=r.stateNode;if(i=i.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var b in p)if(!(b in i))throw Error(t(108,we(r)||"Unknown",b));return be({},c,p)}function fo(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ma,ho=In.current,gr(In,r),gr(ys,ys.current),!0}function Tu(r,i,c){var p=r.stateNode;if(!p)throw Error(t(169));c?(r=Kc(r,i,ho),p.__reactInternalMemoizedMergedChildContext=r,hr(ys),hr(In),gr(In,r)):hr(ys),gr(ys,c)}var la=null,ml=!1,h=!1;function g(r){la===null?la=[r]:la.push(r)}function w(r){ml=!0,g(r)}function j(){if(!h&&la!==null){h=!0;var r=0,i=er;try{var c=la;for(er=1;r<c.length;r++){var p=c[r];do p=p(!0);while(p!==null)}la=null,ml=!1}catch(b){throw la!==null&&(la=la.slice(r+1)),li(Ei,j),b}finally{er=i,h=!1}}return null}var I=[],U=0,$=null,V=0,J=[],ie=0,xe=null,Ce=1,le="";function ke(r,i){I[U++]=V,I[U++]=$,$=r,V=i}function Pe(r,i,c){J[ie++]=Ce,J[ie++]=le,J[ie++]=xe,xe=r;var p=Ce;r=le;var b=32-Rr(p)-1;p&=~(1<<b),c+=1;var N=32-Rr(i)+b;if(30<N){var R=b-b%5;N=(p&(1<<R)-1).toString(32),p>>=R,b-=R,Ce=1<<32-Rr(i)+b|c<<b|p,le=N+r}else Ce=1<<N|c<<b|p,le=r}function Fe(r){r.return!==null&&(ke(r,1),Pe(r,1,0))}function Le(r){for(;r===$;)$=I[--U],I[U]=null,V=I[--U],I[U]=null;for(;r===xe;)xe=J[--ie],J[ie]=null,le=J[--ie],J[ie]=null,Ce=J[--ie],J[ie]=null}var Ie=null,Oe=null,Be=!1,qe=null;function pt(r,i){var c=zi(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=r,i=r.deletions,i===null?(r.deletions=[c],r.flags|=16):i.push(c)}function nt(r,i){switch(r.tag){case 5:var c=r.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Ie=r,Oe=cs(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Ie=r,Oe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=xe!==null?{id:Ce,overflow:le}:null,r.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=zi(18,null,null,0),c.stateNode=i,c.return=r,r.child=c,Ie=r,Oe=null,!0):!1;default:return!1}}function $t(r){return(r.mode&1)!==0&&(r.flags&128)===0}function lt(r){if(Be){var i=Oe;if(i){var c=i;if(!nt(r,i)){if($t(r))throw Error(t(418));i=cs(c.nextSibling);var p=Ie;i&&nt(r,i)?pt(p,c):(r.flags=r.flags&-4097|2,Be=!1,Ie=r)}}else{if($t(r))throw Error(t(418));r.flags=r.flags&-4097|2,Be=!1,Ie=r}}}function Qt(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ie=r}function Vr(r){if(r!==Ie)return!1;if(!Be)return Qt(r),Be=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Hc(r.type,r.memoizedProps)),i&&(i=Oe)){if($t(r))throw Wt(),Error(t(418));for(;i;)pt(r,i),i=cs(i.nextSibling)}if(Qt(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(i===0){Oe=cs(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}r=r.nextSibling}Oe=null}}else Oe=Ie?cs(r.stateNode.nextSibling):null;return!0}function Wt(){for(var r=Oe;r;)r=cs(r.nextSibling)}function st(){Oe=Ie=null,Be=!1}function Ze(r){qe===null?qe=[r]:qe.push(r)}var en=H.ReactCurrentBatchConfig;function Dt(r,i,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,r));var b=p,N=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===N?i.ref:(i=function(R){var pe=b.refs;R===null?delete pe[N]:pe[N]=R},i._stringRef=N,i)}if(typeof r!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,r))}return r}function Xt(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Pr(r){var i=r._init;return i(r._payload)}function jn(r){function i(Ee,Se){if(r){var Te=Ee.deletions;Te===null?(Ee.deletions=[Se],Ee.flags|=16):Te.push(Se)}}function c(Ee,Se){if(!r)return null;for(;Se!==null;)i(Ee,Se),Se=Se.sibling;return null}function p(Ee,Se){for(Ee=new Map;Se!==null;)Se.key!==null?Ee.set(Se.key,Se):Ee.set(Se.index,Se),Se=Se.sibling;return Ee}function b(Ee,Se){return Ee=Wo(Ee,Se),Ee.index=0,Ee.sibling=null,Ee}function N(Ee,Se,Te){return Ee.index=Te,r?(Te=Ee.alternate,Te!==null?(Te=Te.index,Te<Se?(Ee.flags|=2,Se):Te):(Ee.flags|=2,Se)):(Ee.flags|=1048576,Se)}function R(Ee){return r&&Ee.alternate===null&&(Ee.flags|=2),Ee}function pe(Ee,Se,Te,Je){return Se===null||Se.tag!==6?(Se=bh(Te,Ee.mode,Je),Se.return=Ee,Se):(Se=b(Se,Te),Se.return=Ee,Se)}function ye(Ee,Se,Te,Je){var gt=Te.type;return gt===Z?He(Ee,Se,Te.props.children,Je,Te.key):Se!==null&&(Se.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===ae&&Pr(gt)===Se.type)?(Je=b(Se,Te.props),Je.ref=Dt(Ee,Se,Te),Je.return=Ee,Je):(Je=Qu(Te.type,Te.key,Te.props,null,Ee.mode,Je),Je.ref=Dt(Ee,Se,Te),Je.return=Ee,Je)}function De(Ee,Se,Te,Je){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Te.containerInfo||Se.stateNode.implementation!==Te.implementation?(Se=wh(Te,Ee.mode,Je),Se.return=Ee,Se):(Se=b(Se,Te.children||[]),Se.return=Ee,Se)}function He(Ee,Se,Te,Je,gt){return Se===null||Se.tag!==7?(Se=Nl(Te,Ee.mode,Je,gt),Se.return=Ee,Se):(Se=b(Se,Te),Se.return=Ee,Se)}function Ye(Ee,Se,Te){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=bh(""+Se,Ee.mode,Te),Se.return=Ee,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case ue:return Te=Qu(Se.type,Se.key,Se.props,null,Ee.mode,Te),Te.ref=Dt(Ee,null,Se),Te.return=Ee,Te;case de:return Se=wh(Se,Ee.mode,Te),Se.return=Ee,Se;case ae:var Je=Se._init;return Ye(Ee,Je(Se._payload),Te)}if(ct(Se)||ce(Se))return Se=Nl(Se,Ee.mode,Te,null),Se.return=Ee,Se;Xt(Ee,Se)}return null}function We(Ee,Se,Te,Je){var gt=Se!==null?Se.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return gt!==null?null:pe(Ee,Se,""+Te,Je);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case ue:return Te.key===gt?ye(Ee,Se,Te,Je):null;case de:return Te.key===gt?De(Ee,Se,Te,Je):null;case ae:return gt=Te._init,We(Ee,Se,gt(Te._payload),Je)}if(ct(Te)||ce(Te))return gt!==null?null:He(Ee,Se,Te,Je,null);Xt(Ee,Te)}return null}function tt(Ee,Se,Te,Je,gt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Ee=Ee.get(Te)||null,pe(Se,Ee,""+Je,gt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case ue:return Ee=Ee.get(Je.key===null?Te:Je.key)||null,ye(Se,Ee,Je,gt);case de:return Ee=Ee.get(Je.key===null?Te:Je.key)||null,De(Se,Ee,Je,gt);case ae:var Pt=Je._init;return tt(Ee,Se,Te,Pt(Je._payload),gt)}if(ct(Je)||ce(Je))return Ee=Ee.get(Te)||null,He(Se,Ee,Je,gt,null);Xt(Se,Je)}return null}function ut(Ee,Se,Te,Je){for(var gt=null,Pt=null,Ct=Se,Rt=Se=0,Xn=null;Ct!==null&&Rt<Te.length;Rt++){Ct.index>Rt?(Xn=Ct,Ct=null):Xn=Ct.sibling;var cr=We(Ee,Ct,Te[Rt],Je);if(cr===null){Ct===null&&(Ct=Xn);break}r&&Ct&&cr.alternate===null&&i(Ee,Ct),Se=N(cr,Se,Rt),Pt===null?gt=cr:Pt.sibling=cr,Pt=cr,Ct=Xn}if(Rt===Te.length)return c(Ee,Ct),Be&&ke(Ee,Rt),gt;if(Ct===null){for(;Rt<Te.length;Rt++)Ct=Ye(Ee,Te[Rt],Je),Ct!==null&&(Se=N(Ct,Se,Rt),Pt===null?gt=Ct:Pt.sibling=Ct,Pt=Ct);return Be&&ke(Ee,Rt),gt}for(Ct=p(Ee,Ct);Rt<Te.length;Rt++)Xn=tt(Ct,Ee,Rt,Te[Rt],Je),Xn!==null&&(r&&Xn.alternate!==null&&Ct.delete(Xn.key===null?Rt:Xn.key),Se=N(Xn,Se,Rt),Pt===null?gt=Xn:Pt.sibling=Xn,Pt=Xn);return r&&Ct.forEach(function(Ho){return i(Ee,Ho)}),Be&&ke(Ee,Rt),gt}function ht(Ee,Se,Te,Je){var gt=ce(Te);if(typeof gt!="function")throw Error(t(150));if(Te=gt.call(Te),Te==null)throw Error(t(151));for(var Pt=gt=null,Ct=Se,Rt=Se=0,Xn=null,cr=Te.next();Ct!==null&&!cr.done;Rt++,cr=Te.next()){Ct.index>Rt?(Xn=Ct,Ct=null):Xn=Ct.sibling;var Ho=We(Ee,Ct,cr.value,Je);if(Ho===null){Ct===null&&(Ct=Xn);break}r&&Ct&&Ho.alternate===null&&i(Ee,Ct),Se=N(Ho,Se,Rt),Pt===null?gt=Ho:Pt.sibling=Ho,Pt=Ho,Ct=Xn}if(cr.done)return c(Ee,Ct),Be&&ke(Ee,Rt),gt;if(Ct===null){for(;!cr.done;Rt++,cr=Te.next())cr=Ye(Ee,cr.value,Je),cr!==null&&(Se=N(cr,Se,Rt),Pt===null?gt=cr:Pt.sibling=cr,Pt=cr);return Be&&ke(Ee,Rt),gt}for(Ct=p(Ee,Ct);!cr.done;Rt++,cr=Te.next())cr=tt(Ct,Ee,Rt,cr.value,Je),cr!==null&&(r&&cr.alternate!==null&&Ct.delete(cr.key===null?Rt:cr.key),Se=N(cr,Se,Rt),Pt===null?gt=cr:Pt.sibling=cr,Pt=cr);return r&&Ct.forEach(function(Y1){return i(Ee,Y1)}),Be&&ke(Ee,Rt),gt}function bn(Ee,Se,Te,Je){if(typeof Te=="object"&&Te!==null&&Te.type===Z&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case ue:e:{for(var gt=Te.key,Pt=Se;Pt!==null;){if(Pt.key===gt){if(gt=Te.type,gt===Z){if(Pt.tag===7){c(Ee,Pt.sibling),Se=b(Pt,Te.props.children),Se.return=Ee,Ee=Se;break e}}else if(Pt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===ae&&Pr(gt)===Pt.type){c(Ee,Pt.sibling),Se=b(Pt,Te.props),Se.ref=Dt(Ee,Pt,Te),Se.return=Ee,Ee=Se;break e}c(Ee,Pt);break}else i(Ee,Pt);Pt=Pt.sibling}Te.type===Z?(Se=Nl(Te.props.children,Ee.mode,Je,Te.key),Se.return=Ee,Ee=Se):(Je=Qu(Te.type,Te.key,Te.props,null,Ee.mode,Je),Je.ref=Dt(Ee,Se,Te),Je.return=Ee,Ee=Je)}return R(Ee);case de:e:{for(Pt=Te.key;Se!==null;){if(Se.key===Pt)if(Se.tag===4&&Se.stateNode.containerInfo===Te.containerInfo&&Se.stateNode.implementation===Te.implementation){c(Ee,Se.sibling),Se=b(Se,Te.children||[]),Se.return=Ee,Ee=Se;break e}else{c(Ee,Se);break}else i(Ee,Se);Se=Se.sibling}Se=wh(Te,Ee.mode,Je),Se.return=Ee,Ee=Se}return R(Ee);case ae:return Pt=Te._init,bn(Ee,Se,Pt(Te._payload),Je)}if(ct(Te))return ut(Ee,Se,Te,Je);if(ce(Te))return ht(Ee,Se,Te,Je);Xt(Ee,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,Se!==null&&Se.tag===6?(c(Ee,Se.sibling),Se=b(Se,Te),Se.return=Ee,Ee=Se):(c(Ee,Se),Se=bh(Te,Ee.mode,Je),Se.return=Ee,Ee=Se),R(Ee)):c(Ee,Se)}return bn}var un=jn(!0),Br=jn(!1),xn=yi(null),An=null,Dr=null,tr=null;function ir(){tr=Dr=An=null}function Ir(r){var i=xn.current;hr(xn),r._currentValue=i}function ar(r,i,c){for(;r!==null;){var p=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),r===c)break;r=r.return}}function Gr(r,i){An=r,tr=Dr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(ti=!0),r.firstContext=null)}function Yr(r){var i=r._currentValue;if(tr!==r)if(r={context:r,memoizedValue:i,next:null},Dr===null){if(An===null)throw Error(t(308));Dr=r,An.dependencies={lanes:0,firstContext:r}}else Dr=Dr.next=r;return i}var kr=null;function Gn(r){kr===null?kr=[r]:kr.push(r)}function vr(r,i,c,p){var b=i.interleaved;return b===null?(c.next=c,Gn(i)):(c.next=b.next,b.next=c),i.interleaved=c,Sr(r,p)}function Sr(r,i){r.lanes|=i;var c=r.alternate;for(c!==null&&(c.lanes|=i),c=r,r=r.return;r!==null;)r.childLanes|=i,c=r.alternate,c!==null&&(c.childLanes|=i),c=r,r=r.return;return c.tag===3?c.stateNode:null}var dn=!1;function On(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ws(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function tn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function rn(r,i,c){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(or&2)!==0){var b=p.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),p.pending=i,Sr(r,c)}return b=p.interleaved,b===null?(i.next=i,Gn(p)):(i.next=b.next,b.next=i),p.interleaved=i,Sr(r,c)}function Yn(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var p=i.lanes;p&=r.pendingLanes,c|=p,i.lanes=c,Ki(r,c)}}function jr(r,i){var c=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var b=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var R={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};N===null?b=N=R:N=N.next=R,c=c.next}while(c!==null);N===null?b=N=i:N=N.next=i}else b=N=i;c={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:p.shared,effects:p.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}function Kn(r,i,c,p){var b=r.updateQueue;dn=!1;var N=b.firstBaseUpdate,R=b.lastBaseUpdate,pe=b.shared.pending;if(pe!==null){b.shared.pending=null;var ye=pe,De=ye.next;ye.next=null,R===null?N=De:R.next=De,R=ye;var He=r.alternate;He!==null&&(He=He.updateQueue,pe=He.lastBaseUpdate,pe!==R&&(pe===null?He.firstBaseUpdate=De:pe.next=De,He.lastBaseUpdate=ye))}if(N!==null){var Ye=b.baseState;R=0,He=De=ye=null,pe=N;do{var We=pe.lane,tt=pe.eventTime;if((p&We)===We){He!==null&&(He=He.next={eventTime:tt,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var ut=r,ht=pe;switch(We=i,tt=c,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Ye=ut.call(tt,Ye,We);break e}Ye=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,We=typeof ut=="function"?ut.call(tt,Ye,We):ut,We==null)break e;Ye=be({},Ye,We);break e;case 2:dn=!0}}pe.callback!==null&&pe.lane!==0&&(r.flags|=64,We=b.effects,We===null?b.effects=[pe]:We.push(pe))}else tt={eventTime:tt,lane:We,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},He===null?(De=He=tt,ye=Ye):He=He.next=tt,R|=We;if(pe=pe.next,pe===null){if(pe=b.shared.pending,pe===null)break;We=pe,pe=We.next,We.next=null,b.lastBaseUpdate=We,b.shared.pending=null}}while(!0);if(He===null&&(ye=Ye),b.baseState=ye,b.firstBaseUpdate=De,b.lastBaseUpdate=He,i=b.shared.interleaved,i!==null){b=i;do R|=b.lane,b=b.next;while(b!==i)}else N===null&&(b.shared.lanes=0);yl|=R,r.lanes=R,r.memoizedState=Ye}}function ei(r,i,c){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var p=r[i],b=p.callback;if(b!==null){if(p.callback=null,p=c,typeof b!="function")throw Error(t(191,b));b.call(p)}}}var bi={},Pn=yi(bi),nn=yi(bi),Ua=yi(bi);function ca(r){if(r===bi)throw Error(t(174));return r}function Oo(r,i){switch(gr(Ua,i),gr(nn,r),gr(Pn,bi),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Yt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Yt(i,r)}hr(Pn),gr(Pn,i)}function Mi(){hr(Pn),hr(nn),hr(Ua)}function Du(r){ca(Ua.current);var i=ca(Pn.current),c=Yt(i,r.type);i!==c&&(gr(nn,r),gr(Pn,c))}function Jc(r){nn.current===r&&(hr(Pn),hr(nn))}var Cr=yi(0);function wi(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xc=[];function Qc(){for(var r=0;r<Xc.length;r++)Xc[r]._workInProgressVersionPrimary=null;Xc.length=0}var Kl=H.ReactCurrentDispatcher,Jl=H.ReactCurrentBatchConfig,Ui=0,Or=null,hn=null,sn=null,Fo=!1,ua=!1,Ro=0,Vd=0;function yn(){throw Error(t(321))}function Xl(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Wr(r[c],i[c]))return!1;return!0}function gl(r,i,c,p,b,N){if(Ui=N,Or=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Kl.current=r===null||r.memoizedState===null?b1:w1,r=c(p,b),ua){N=0;do{if(ua=!1,Ro=0,25<=N)throw Error(t(301));N+=1,sn=hn=null,i.updateQueue=null,Kl.current=_1,r=c(p,b)}while(ua)}if(Kl.current=Mu,i=hn!==null&&hn.next!==null,Ui=0,sn=hn=Or=null,Fo=!1,i)throw Error(t(300));return r}function Bi(){var r=Ro!==0;return Ro=0,r}function _i(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Or.memoizedState=sn=r:sn=sn.next=r,sn}function qs(){if(hn===null){var r=Or.alternate;r=r!==null?r.memoizedState:null}else r=hn.next;var i=sn===null?Or.memoizedState:sn.next;if(i!==null)sn=i,hn=r;else{if(r===null)throw Error(t(310));hn=r,r={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},sn===null?Or.memoizedState=sn=r:sn=sn.next=r}return sn}function vl(r,i){return typeof i=="function"?i(r):i}function Ql(r){var i=qs(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var p=hn,b=p.baseQueue,N=c.pending;if(N!==null){if(b!==null){var R=b.next;b.next=N.next,N.next=R}p.baseQueue=b=N,c.pending=null}if(b!==null){N=b.next,p=p.baseState;var pe=R=null,ye=null,De=N;do{var He=De.lane;if((Ui&He)===He)ye!==null&&(ye=ye.next={lane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),p=De.hasEagerState?De.eagerState:r(p,De.action);else{var Ye={lane:He,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null};ye===null?(pe=ye=Ye,R=p):ye=ye.next=Ye,Or.lanes|=He,yl|=He}De=De.next}while(De!==null&&De!==N);ye===null?R=p:ye.next=pe,Wr(p,i.memoizedState)||(ti=!0),i.memoizedState=p,i.baseState=R,i.baseQueue=ye,c.lastRenderedState=p}if(r=c.interleaved,r!==null){b=r;do N=b.lane,Or.lanes|=N,yl|=N,b=b.next;while(b!==r)}else b===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ba(r){var i=qs(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var p=c.dispatch,b=c.pending,N=i.memoizedState;if(b!==null){c.pending=null;var R=b=b.next;do N=r(N,R.action),R=R.next;while(R!==b);Wr(N,i.memoizedState)||(ti=!0),i.memoizedState=N,i.baseQueue===null&&(i.baseState=N),c.lastRenderedState=N}return[N,p]}function Iu(){}function Zc(r,i){var c=Or,p=qs(),b=i(),N=!Wr(p.memoizedState,b);if(N&&(p.memoizedState=b,ti=!0),p=p.queue,tc(Fu.bind(null,c,p,r),[r]),p.getSnapshot!==i||N||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,zs(9,eu.bind(null,c,p,b,i),void 0,null),Jn===null)throw Error(t(349));(Ui&30)!==0||Ou(c,i,b)}return b}function Ou(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=Or.updateQueue,i===null?(i={lastEffect:null,stores:null},Or.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function eu(r,i,c,p){i.value=c,i.getSnapshot=p,Mo(i)&&Zl(r)}function Fu(r,i,c){return c(function(){Mo(i)&&Zl(r)})}function Mo(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Wr(r,c)}catch{return!0}}function Zl(r){var i=Sr(r,1);i!==null&&ma(i,r,1,-1)}function xl(r){var i=_i();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:r},i.queue=r,r=r.dispatch=y1.bind(null,Or,r),[i.memoizedState,r]}function zs(r,i,c,p){return r={tag:r,create:i,destroy:c,deps:p,next:null},i=Or.updateQueue,i===null?(i={lastEffect:null,stores:null},Or.updateQueue=i,i.lastEffect=r.next=r):(c=i.lastEffect,c===null?i.lastEffect=r.next=r:(p=c.next,c.next=r,r.next=p,i.lastEffect=r)),r}function da(){return qs().memoizedState}function Ni(r,i,c,p){var b=_i();Or.flags|=r,b.memoizedState=zs(1|i,c,void 0,p===void 0?null:p)}function po(r,i,c,p){var b=qs();p=p===void 0?null:p;var N=void 0;if(hn!==null){var R=hn.memoizedState;if(N=R.destroy,p!==null&&Xl(p,R.deps)){b.memoizedState=zs(i,c,N,p);return}}Or.flags|=r,b.memoizedState=zs(1|i,c,N,p)}function ec(r,i){return Ni(8390656,8,r,i)}function tc(r,i){return po(2048,8,r,i)}function Ru(r,i){return po(4,2,r,i)}function rc(r,i){return po(4,4,r,i)}function nc(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Kf(r,i,c){return c=c!=null?c.concat([r]):null,po(4,4,nc.bind(null,i,r),c)}function Gd(){}function Jf(r,i){var c=qs();i=i===void 0?null:i;var p=c.memoizedState;return p!==null&&i!==null&&Xl(i,p[1])?p[0]:(c.memoizedState=[r,i],r)}function Xf(r,i){var c=qs();i=i===void 0?null:i;var p=c.memoizedState;return p!==null&&i!==null&&Xl(i,p[1])?p[0]:(r=r(),c.memoizedState=[r,i],r)}function Qf(r,i,c){return(Ui&21)===0?(r.baseState&&(r.baseState=!1,ti=!0),r.memoizedState=c):(Wr(c,i)||(c=ka(),Or.lanes|=c,yl|=c,r.baseState=!0),i)}function v1(r,i){var c=er;er=c!==0&&4>c?c:4,r(!0);var p=Jl.transition;Jl.transition={};try{r(!1),i()}finally{er=c,Jl.transition=p}}function Zf(){return qs().memoizedState}function x1(r,i,c){var p=zo(r);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},e0(r))t0(i,c);else if(c=vr(r,i,c,p),c!==null){var b=Ws();ma(c,r,p,b),r0(c,i,p)}}function y1(r,i,c){var p=zo(r),b={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(e0(r))t0(i,b);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=i.lastRenderedReducer,N!==null))try{var R=i.lastRenderedState,pe=N(R,c);if(b.hasEagerState=!0,b.eagerState=pe,Wr(pe,R)){var ye=i.interleaved;ye===null?(b.next=b,Gn(i)):(b.next=ye.next,ye.next=b),i.interleaved=b;return}}catch{}finally{}c=vr(r,i,b,p),c!==null&&(b=Ws(),ma(c,r,p,b),r0(c,i,p))}}function e0(r){var i=r.alternate;return r===Or||i!==null&&i===Or}function t0(r,i){ua=Fo=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function r0(r,i,c){if((c&4194240)!==0){var p=i.lanes;p&=r.pendingLanes,c|=p,i.lanes=c,Ki(r,c)}}var Mu={readContext:Yr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},b1={readContext:Yr,useCallback:function(r,i){return _i().memoizedState=[r,i===void 0?null:i],r},useContext:Yr,useEffect:ec,useImperativeHandle:function(r,i,c){return c=c!=null?c.concat([r]):null,Ni(4194308,4,nc.bind(null,i,r),c)},useLayoutEffect:function(r,i){return Ni(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ni(4,2,r,i)},useMemo:function(r,i){var c=_i();return i=i===void 0?null:i,r=r(),c.memoizedState=[r,i],r},useReducer:function(r,i,c){var p=_i();return i=c!==void 0?c(i):i,p.memoizedState=p.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},p.queue=r,r=r.dispatch=x1.bind(null,Or,r),[p.memoizedState,r]},useRef:function(r){var i=_i();return r={current:r},i.memoizedState=r},useState:xl,useDebugValue:Gd,useDeferredValue:function(r){return _i().memoizedState=r},useTransition:function(){var r=xl(!1),i=r[0];return r=v1.bind(null,r[1]),_i().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,c){var p=Or,b=_i();if(Be){if(c===void 0)throw Error(t(407));c=c()}else{if(c=i(),Jn===null)throw Error(t(349));(Ui&30)!==0||Ou(p,i,c)}b.memoizedState=c;var N={value:c,getSnapshot:i};return b.queue=N,ec(Fu.bind(null,p,N,r),[r]),p.flags|=2048,zs(9,eu.bind(null,p,N,c,i),void 0,null),c},useId:function(){var r=_i(),i=Jn.identifierPrefix;if(Be){var c=le,p=Ce;c=(p&~(1<<32-Rr(p)-1)).toString(32)+c,i=":"+i+"R"+c,c=Ro++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=Vd++,i=":"+i+"r"+c.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},w1={readContext:Yr,useCallback:Jf,useContext:Yr,useEffect:tc,useImperativeHandle:Kf,useInsertionEffect:Ru,useLayoutEffect:rc,useMemo:Xf,useReducer:Ql,useRef:da,useState:function(){return Ql(vl)},useDebugValue:Gd,useDeferredValue:function(r){var i=qs();return Qf(i,hn.memoizedState,r)},useTransition:function(){var r=Ql(vl)[0],i=qs().memoizedState;return[r,i]},useMutableSource:Iu,useSyncExternalStore:Zc,useId:Zf,unstable_isNewReconciler:!1},_1={readContext:Yr,useCallback:Jf,useContext:Yr,useEffect:tc,useImperativeHandle:Kf,useInsertionEffect:Ru,useLayoutEffect:rc,useMemo:Xf,useReducer:Ba,useRef:da,useState:function(){return Ba(vl)},useDebugValue:Gd,useDeferredValue:function(r){var i=qs();return hn===null?i.memoizedState=r:Qf(i,hn.memoizedState,r)},useTransition:function(){var r=Ba(vl)[0],i=qs().memoizedState;return[r,i]},useMutableSource:Iu,useSyncExternalStore:Zc,useId:Zf,unstable_isNewReconciler:!1};function ha(r,i){if(r&&r.defaultProps){i=be({},i),r=r.defaultProps;for(var c in r)i[c]===void 0&&(i[c]=r[c]);return i}return i}function Yd(r,i,c,p){i=r.memoizedState,c=c(p,i),c=c==null?i:be({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Uu={isMounted:function(r){return(r=r._reactInternals)?Jr(r)===r:!1},enqueueSetState:function(r,i,c){r=r._reactInternals;var p=Ws(),b=zo(r),N=tn(p,b);N.payload=i,c!=null&&(N.callback=c),i=rn(r,N,b),i!==null&&(ma(i,r,b,p),Yn(i,r,b))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var p=Ws(),b=zo(r),N=tn(p,b);N.tag=1,N.payload=i,c!=null&&(N.callback=c),i=rn(r,N,b),i!==null&&(ma(i,r,b,p),Yn(i,r,b))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=Ws(),p=zo(r),b=tn(c,p);b.tag=2,i!=null&&(b.callback=i),i=rn(r,b,p),i!==null&&(ma(i,r,p,c),Yn(i,r,p))}};function n0(r,i,c,p,b,N,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,N,R):i.prototype&&i.prototype.isPureReactComponent?!gs(c,p)||!gs(b,N):!0}function s0(r,i,c){var p=!1,b=Ma,N=i.contextType;return typeof N=="object"&&N!==null?N=Yr(N):(b=bs(i)?ho:In.current,p=i.contextTypes,N=(p=p!=null)?Io(r,b):Ma),i=new i(c,N),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Uu,r.stateNode=i,i._reactInternals=r,p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=b,r.__reactInternalMemoizedMaskedChildContext=N),i}function i0(r,i,c,p){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,p),i.state!==r&&Uu.enqueueReplaceState(i,i.state,null)}function Kd(r,i,c,p){var b=r.stateNode;b.props=c,b.state=r.memoizedState,b.refs={},On(r);var N=i.contextType;typeof N=="object"&&N!==null?b.context=Yr(N):(N=bs(i)?ho:In.current,b.context=Io(r,N)),b.state=r.memoizedState,N=i.getDerivedStateFromProps,typeof N=="function"&&(Yd(r,i,N,c),b.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(i=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),i!==b.state&&Uu.enqueueReplaceState(b,b.state,null),Kn(r,c,b,p),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308)}function sc(r,i){try{var c="",p=i;do c+=oe(p),p=p.return;while(p);var b=c}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:r,source:i,stack:b,digest:null}}function Jd(r,i,c){return{value:r,source:null,stack:c??null,digest:i??null}}function Xd(r,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var N1=typeof WeakMap=="function"?WeakMap:Map;function a0(r,i,c){c=tn(-1,c),c.tag=3,c.payload={element:null};var p=i.value;return c.callback=function(){Vu||(Vu=!0,hh=p),Xd(r,i)},c}function o0(r,i,c){c=tn(-1,c),c.tag=3;var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var b=i.value;c.payload=function(){return p(b)},c.callback=function(){Xd(r,i)}}var N=r.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(c.callback=function(){Xd(r,i),typeof p!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var R=i.stack;this.componentDidCatch(i.value,{componentStack:R!==null?R:""})}),c}function l0(r,i,c){var p=r.pingCache;if(p===null){p=r.pingCache=new N1;var b=new Set;p.set(i,b)}else b=p.get(i),b===void 0&&(b=new Set,p.set(i,b));b.has(c)||(b.add(c),r=R1.bind(null,r,i,c),i.then(r,r))}function c0(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function u0(r,i,c,p,b){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=tn(-1,1),i.tag=2,rn(c,i,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=b,r)}var k1=H.ReactCurrentOwner,ti=!1;function $s(r,i,c,p){i.child=r===null?Br(i,null,c,p):un(i,r.child,c,p)}function d0(r,i,c,p,b){c=c.render;var N=i.ref;return Gr(i,b),p=gl(r,i,c,p,N,b),c=Bi(),r!==null&&!ti?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,mo(r,i,b)):(Be&&c&&Fe(i),i.flags|=1,$s(r,i,p,b),i.child)}function h0(r,i,c,p,b){if(r===null){var N=c.type;return typeof N=="function"&&!yh(N)&&N.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=N,f0(r,i,N,p,b)):(r=Qu(c.type,null,p,i,i.mode,b),r.ref=i.ref,r.return=i,i.child=r)}if(N=r.child,(r.lanes&b)===0){var R=N.memoizedProps;if(c=c.compare,c=c!==null?c:gs,c(R,p)&&r.ref===i.ref)return mo(r,i,b)}return i.flags|=1,r=Wo(N,p),r.ref=i.ref,r.return=i,i.child=r}function f0(r,i,c,p,b){if(r!==null){var N=r.memoizedProps;if(gs(N,p)&&r.ref===i.ref)if(ti=!1,i.pendingProps=p=N,(r.lanes&b)!==0)(r.flags&131072)!==0&&(ti=!0);else return i.lanes=r.lanes,mo(r,i,b)}return Qd(r,i,c,p,b)}function p0(r,i,c){var p=i.pendingProps,b=p.children,N=r!==null?r.memoizedState:null;if(p.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},gr(ac,ki),ki|=c;else{if((c&1073741824)===0)return r=N!==null?N.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,gr(ac,ki),ki|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=N!==null?N.baseLanes:c,gr(ac,ki),ki|=p}else N!==null?(p=N.baseLanes|c,i.memoizedState=null):p=c,gr(ac,ki),ki|=p;return $s(r,i,b,c),i.child}function m0(r,i){var c=i.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Qd(r,i,c,p,b){var N=bs(c)?ho:In.current;return N=Io(i,N),Gr(i,b),c=gl(r,i,c,p,N,b),p=Bi(),r!==null&&!ti?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,mo(r,i,b)):(Be&&p&&Fe(i),i.flags|=1,$s(r,i,c,b),i.child)}function g0(r,i,c,p,b){if(bs(c)){var N=!0;fo(i)}else N=!1;if(Gr(i,b),i.stateNode===null)qu(r,i),s0(i,c,p),Kd(i,c,p,b),p=!0;else if(r===null){var R=i.stateNode,pe=i.memoizedProps;R.props=pe;var ye=R.context,De=c.contextType;typeof De=="object"&&De!==null?De=Yr(De):(De=bs(c)?ho:In.current,De=Io(i,De));var He=c.getDerivedStateFromProps,Ye=typeof He=="function"||typeof R.getSnapshotBeforeUpdate=="function";Ye||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(pe!==p||ye!==De)&&i0(i,R,p,De),dn=!1;var We=i.memoizedState;R.state=We,Kn(i,p,R,b),ye=i.memoizedState,pe!==p||We!==ye||ys.current||dn?(typeof He=="function"&&(Yd(i,c,He,p),ye=i.memoizedState),(pe=dn||n0(i,c,pe,p,We,ye,De))?(Ye||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(i.flags|=4194308)):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=ye),R.props=p,R.state=ye,R.context=De,p=pe):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{R=i.stateNode,ws(r,i),pe=i.memoizedProps,De=i.type===i.elementType?pe:ha(i.type,pe),R.props=De,Ye=i.pendingProps,We=R.context,ye=c.contextType,typeof ye=="object"&&ye!==null?ye=Yr(ye):(ye=bs(c)?ho:In.current,ye=Io(i,ye));var tt=c.getDerivedStateFromProps;(He=typeof tt=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(pe!==Ye||We!==ye)&&i0(i,R,p,ye),dn=!1,We=i.memoizedState,R.state=We,Kn(i,p,R,b);var ut=i.memoizedState;pe!==Ye||We!==ut||ys.current||dn?(typeof tt=="function"&&(Yd(i,c,tt,p),ut=i.memoizedState),(De=dn||n0(i,c,De,p,We,ut,ye)||!1)?(He||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(p,ut,ye),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(p,ut,ye)),typeof R.componentDidUpdate=="function"&&(i.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof R.componentDidUpdate!="function"||pe===r.memoizedProps&&We===r.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||pe===r.memoizedProps&&We===r.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=ut),R.props=p,R.state=ut,R.context=ye,p=De):(typeof R.componentDidUpdate!="function"||pe===r.memoizedProps&&We===r.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||pe===r.memoizedProps&&We===r.memoizedState||(i.flags|=1024),p=!1)}return Zd(r,i,c,p,N,b)}function Zd(r,i,c,p,b,N){m0(r,i);var R=(i.flags&128)!==0;if(!p&&!R)return b&&Tu(i,c,!1),mo(r,i,N);p=i.stateNode,k1.current=i;var pe=R&&typeof c.getDerivedStateFromError!="function"?null:p.render();return i.flags|=1,r!==null&&R?(i.child=un(i,r.child,null,N),i.child=un(i,null,pe,N)):$s(r,i,pe,N),i.memoizedState=p.state,b&&Tu(i,c,!0),i.child}function v0(r){var i=r.stateNode;i.pendingContext?Lu(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Lu(r,i.context,!1),Oo(r,i.containerInfo)}function x0(r,i,c,p,b){return st(),Ze(b),i.flags|=256,$s(r,i,c,p),i.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(r){return{baseLanes:r,cachePool:null,transitions:null}}function y0(r,i,c){var p=i.pendingProps,b=Cr.current,N=!1,R=(i.flags&128)!==0,pe;if((pe=R)||(pe=r!==null&&r.memoizedState===null?!1:(b&2)!==0),pe?(N=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(b|=1),gr(Cr,b&1),r===null)return lt(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(R=p.children,r=p.fallback,N?(p=i.mode,N=i.child,R={mode:"hidden",children:R},(p&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=R):N=Zu(R,p,0,null),r=Nl(r,p,c,null),N.return=i,r.return=i,N.sibling=r,i.child=N,i.child.memoizedState=th(c),i.memoizedState=eh,r):rh(i,R));if(b=r.memoizedState,b!==null&&(pe=b.dehydrated,pe!==null))return S1(r,i,R,p,pe,b,c);if(N){N=p.fallback,R=i.mode,b=r.child,pe=b.sibling;var ye={mode:"hidden",children:p.children};return(R&1)===0&&i.child!==b?(p=i.child,p.childLanes=0,p.pendingProps=ye,i.deletions=null):(p=Wo(b,ye),p.subtreeFlags=b.subtreeFlags&14680064),pe!==null?N=Wo(pe,N):(N=Nl(N,R,c,null),N.flags|=2),N.return=i,p.return=i,p.sibling=N,i.child=p,p=N,N=i.child,R=r.child.memoizedState,R=R===null?th(c):{baseLanes:R.baseLanes|c,cachePool:null,transitions:R.transitions},N.memoizedState=R,N.childLanes=r.childLanes&~c,i.memoizedState=eh,p}return N=r.child,r=N.sibling,p=Wo(N,{mode:"visible",children:p.children}),(i.mode&1)===0&&(p.lanes=c),p.return=i,p.sibling=null,r!==null&&(c=i.deletions,c===null?(i.deletions=[r],i.flags|=16):c.push(r)),i.child=p,i.memoizedState=null,p}function rh(r,i){return i=Zu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Bu(r,i,c,p){return p!==null&&Ze(p),un(i,r.child,null,c),r=rh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function S1(r,i,c,p,b,N,R){if(c)return i.flags&256?(i.flags&=-257,p=Jd(Error(t(422))),Bu(r,i,R,p)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(N=p.fallback,b=i.mode,p=Zu({mode:"visible",children:p.children},b,0,null),N=Nl(N,b,R,null),N.flags|=2,p.return=i,N.return=i,p.sibling=N,i.child=p,(i.mode&1)!==0&&un(i,r.child,null,R),i.child.memoizedState=th(R),i.memoizedState=eh,N);if((i.mode&1)===0)return Bu(r,i,R,null);if(b.data==="$!"){if(p=b.nextSibling&&b.nextSibling.dataset,p)var pe=p.dgst;return p=pe,N=Error(t(419)),p=Jd(N,p,void 0),Bu(r,i,R,p)}if(pe=(R&r.childLanes)!==0,ti||pe){if(p=Jn,p!==null){switch(R&-R){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(p.suspendedLanes|R))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Sr(r,b),ma(p,r,b,-1))}return xh(),p=Jd(Error(t(421))),Bu(r,i,R,p)}return b.data==="$?"?(i.flags|=128,i.child=r.child,i=M1.bind(null,r),b._reactRetry=i,null):(r=N.treeContext,Oe=cs(b.nextSibling),Ie=i,Be=!0,qe=null,r!==null&&(J[ie++]=Ce,J[ie++]=le,J[ie++]=xe,Ce=r.id,le=r.overflow,xe=i),i=rh(i,p.children),i.flags|=4096,i)}function b0(r,i,c){r.lanes|=i;var p=r.alternate;p!==null&&(p.lanes|=i),ar(r.return,i,c)}function nh(r,i,c,p,b){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:b}:(N.isBackwards=i,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=c,N.tailMode=b)}function w0(r,i,c){var p=i.pendingProps,b=p.revealOrder,N=p.tail;if($s(r,i,p.children,c),p=Cr.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&b0(r,c,i);else if(r.tag===19)b0(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}if(gr(Cr,p),(i.mode&1)===0)i.memoizedState=null;else switch(b){case"forwards":for(c=i.child,b=null;c!==null;)r=c.alternate,r!==null&&wi(r)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),nh(i,!1,b,c,N);break;case"backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(r=b.alternate,r!==null&&wi(r)===null){i.child=b;break}r=b.sibling,b.sibling=c,c=b,b=r}nh(i,!0,c,null,N);break;case"together":nh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function mo(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),yl|=i.lanes,(c&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,c=Wo(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Wo(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function j1(r,i,c){switch(i.tag){case 3:v0(i),st();break;case 5:Du(i);break;case 1:bs(i.type)&&fo(i);break;case 4:Oo(i,i.stateNode.containerInfo);break;case 10:var p=i.type._context,b=i.memoizedProps.value;gr(xn,p._currentValue),p._currentValue=b;break;case 13:if(p=i.memoizedState,p!==null)return p.dehydrated!==null?(gr(Cr,Cr.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?y0(r,i,c):(gr(Cr,Cr.current&1),r=mo(r,i,c),r!==null?r.sibling:null);gr(Cr,Cr.current&1);break;case 19:if(p=(c&i.childLanes)!==0,(r.flags&128)!==0){if(p)return w0(r,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),gr(Cr,Cr.current),p)break;return null;case 22:case 23:return i.lanes=0,p0(r,i,c)}return mo(r,i,c)}var _0,sh,N0,k0;_0=function(r,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},sh=function(){},N0=function(r,i,c,p){var b=r.memoizedProps;if(b!==p){r=i.stateNode,ca(Pn.current);var N=null;switch(c){case"input":b=Xe(r,b),p=Xe(r,p),N=[];break;case"select":b=be({},b,{value:void 0}),p=be({},p,{value:void 0}),N=[];break;case"textarea":b=vt(r,b),p=vt(r,p),N=[];break;default:typeof b.onClick!="function"&&typeof p.onClick=="function"&&(r.onclick=Lo)}yr(c,p);var R;c=null;for(De in b)if(!p.hasOwnProperty(De)&&b.hasOwnProperty(De)&&b[De]!=null)if(De==="style"){var pe=b[De];for(R in pe)pe.hasOwnProperty(R)&&(c||(c={}),c[R]="")}else De!=="dangerouslySetInnerHTML"&&De!=="children"&&De!=="suppressContentEditableWarning"&&De!=="suppressHydrationWarning"&&De!=="autoFocus"&&(a.hasOwnProperty(De)?N||(N=[]):(N=N||[]).push(De,null));for(De in p){var ye=p[De];if(pe=b?.[De],p.hasOwnProperty(De)&&ye!==pe&&(ye!=null||pe!=null))if(De==="style")if(pe){for(R in pe)!pe.hasOwnProperty(R)||ye&&ye.hasOwnProperty(R)||(c||(c={}),c[R]="");for(R in ye)ye.hasOwnProperty(R)&&pe[R]!==ye[R]&&(c||(c={}),c[R]=ye[R])}else c||(N||(N=[]),N.push(De,c)),c=ye;else De==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,pe=pe?pe.__html:void 0,ye!=null&&pe!==ye&&(N=N||[]).push(De,ye)):De==="children"?typeof ye!="string"&&typeof ye!="number"||(N=N||[]).push(De,""+ye):De!=="suppressContentEditableWarning"&&De!=="suppressHydrationWarning"&&(a.hasOwnProperty(De)?(ye!=null&&De==="onScroll"&&Nr("scroll",r),N||pe===ye||(N=[])):(N=N||[]).push(De,ye))}c&&(N=N||[]).push("style",c);var De=N;(i.updateQueue=De)&&(i.flags|=4)}},k0=function(r,i,c,p){c!==p&&(i.flags|=4)};function tu(r,i){if(!Be)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function _s(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,p=0;if(i)for(var b=r.child;b!==null;)c|=b.lanes|b.childLanes,p|=b.subtreeFlags&14680064,p|=b.flags&14680064,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)c|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=p,r.childLanes=c,i}function A1(r,i,c){var p=i.pendingProps;switch(Le(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(i),null;case 1:return bs(i.type)&&Yl(),_s(i),null;case 3:return p=i.stateNode,Mi(),hr(ys),hr(In),Qc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(Vr(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qe!==null&&(mh(qe),qe=null))),sh(r,i),_s(i),null;case 5:Jc(i);var b=ca(Ua.current);if(c=i.type,r!==null&&i.stateNode!=null)N0(r,i,c,p,b),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(i.stateNode===null)throw Error(t(166));return _s(i),null}if(r=ca(Pn.current),Vr(i)){p=i.stateNode,c=i.type;var N=i.memoizedProps;switch(p[Ri]=i,p[To]=N,r=(i.mode&1)!==0,c){case"dialog":Nr("cancel",p),Nr("close",p);break;case"iframe":case"object":case"embed":Nr("load",p);break;case"video":case"audio":for(b=0;b<Fa.length;b++)Nr(Fa[b],p);break;case"source":Nr("error",p);break;case"img":case"image":case"link":Nr("error",p),Nr("load",p);break;case"details":Nr("toggle",p);break;case"input":ee(p,N),Nr("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!N.multiple},Nr("invalid",p);break;case"textarea":mt(p,N),Nr("invalid",p)}yr(c,N),b=null;for(var R in N)if(N.hasOwnProperty(R)){var pe=N[R];R==="children"?typeof pe=="string"?p.textContent!==pe&&(N.suppressHydrationWarning!==!0&&Gl(p.textContent,pe,r),b=["children",pe]):typeof pe=="number"&&p.textContent!==""+pe&&(N.suppressHydrationWarning!==!0&&Gl(p.textContent,pe,r),b=["children",""+pe]):a.hasOwnProperty(R)&&pe!=null&&R==="onScroll"&&Nr("scroll",p)}switch(c){case"input":Ue(p),xt(p,N,!0);break;case"textarea":Ue(p),yt(p);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(p.onclick=Lo)}p=b,i.updateQueue=p,p!==null&&(i.flags|=4)}else{R=b.nodeType===9?b:b.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=It(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=R.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof p.is=="string"?r=R.createElement(c,{is:p.is}):(r=R.createElement(c),c==="select"&&(R=r,p.multiple?R.multiple=!0:p.size&&(R.size=p.size))):r=R.createElementNS(r,c),r[Ri]=i,r[To]=p,_0(r,i,!1,!1),i.stateNode=r;e:{switch(R=bt(c,p),c){case"dialog":Nr("cancel",r),Nr("close",r),b=p;break;case"iframe":case"object":case"embed":Nr("load",r),b=p;break;case"video":case"audio":for(b=0;b<Fa.length;b++)Nr(Fa[b],r);b=p;break;case"source":Nr("error",r),b=p;break;case"img":case"image":case"link":Nr("error",r),Nr("load",r),b=p;break;case"details":Nr("toggle",r),b=p;break;case"input":ee(r,p),b=Xe(r,p),Nr("invalid",r);break;case"option":b=p;break;case"select":r._wrapperState={wasMultiple:!!p.multiple},b=be({},p,{value:void 0}),Nr("invalid",r);break;case"textarea":mt(r,p),b=vt(r,p),Nr("invalid",r);break;default:b=p}yr(c,b),pe=b;for(N in pe)if(pe.hasOwnProperty(N)){var ye=pe[N];N==="style"?zt(r,ye):N==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&ot(r,ye)):N==="children"?typeof ye=="string"?(c!=="textarea"||ye!=="")&&ft(r,ye):typeof ye=="number"&&ft(r,""+ye):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(a.hasOwnProperty(N)?ye!=null&&N==="onScroll"&&Nr("scroll",r):ye!=null&&B(r,N,ye,R))}switch(c){case"input":Ue(r),xt(r,p,!1);break;case"textarea":Ue(r),yt(r);break;case"option":p.value!=null&&r.setAttribute("value",""+Ne(p.value));break;case"select":r.multiple=!!p.multiple,N=p.value,N!=null?et(r,!!p.multiple,N,!1):p.defaultValue!=null&&et(r,!!p.multiple,p.defaultValue,!0);break;default:typeof b.onClick=="function"&&(r.onclick=Lo)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return _s(i),null;case 6:if(r&&i.stateNode!=null)k0(r,i,r.memoizedProps,p);else{if(typeof p!="string"&&i.stateNode===null)throw Error(t(166));if(c=ca(Ua.current),ca(Pn.current),Vr(i)){if(p=i.stateNode,c=i.memoizedProps,p[Ri]=i,(N=p.nodeValue!==c)&&(r=Ie,r!==null))switch(r.tag){case 3:Gl(p.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gl(p.nodeValue,c,(r.mode&1)!==0)}N&&(i.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Ri]=i,i.stateNode=p}return _s(i),null;case 13:if(hr(Cr),p=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Be&&Oe!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Wt(),st(),i.flags|=98560,N=!1;else if(N=Vr(i),p!==null&&p.dehydrated!==null){if(r===null){if(!N)throw Error(t(318));if(N=i.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[Ri]=i}else st(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_s(i),N=!1}else qe!==null&&(mh(qe),qe=null),N=!0;if(!N)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(p=p!==null,p!==(r!==null&&r.memoizedState!==null)&&p&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Cr.current&1)!==0?Fn===0&&(Fn=3):xh())),i.updateQueue!==null&&(i.flags|=4),_s(i),null);case 4:return Mi(),sh(r,i),r===null&&oo(i.stateNode.containerInfo),_s(i),null;case 10:return Ir(i.type._context),_s(i),null;case 17:return bs(i.type)&&Yl(),_s(i),null;case 19:if(hr(Cr),N=i.memoizedState,N===null)return _s(i),null;if(p=(i.flags&128)!==0,R=N.rendering,R===null)if(p)tu(N,!1);else{if(Fn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(R=wi(r),R!==null){for(i.flags|=128,tu(N,!1),p=R.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),i.subtreeFlags=0,p=c,c=i.child;c!==null;)N=c,r=p,N.flags&=14680066,R=N.alternate,R===null?(N.childLanes=0,N.lanes=r,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=R.childLanes,N.lanes=R.lanes,N.child=R.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=R.memoizedProps,N.memoizedState=R.memoizedState,N.updateQueue=R.updateQueue,N.type=R.type,r=R.dependencies,N.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return gr(Cr,Cr.current&1|2),i.child}r=r.sibling}N.tail!==null&&fr()>oc&&(i.flags|=128,p=!0,tu(N,!1),i.lanes=4194304)}else{if(!p)if(r=wi(R),r!==null){if(i.flags|=128,p=!0,c=r.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),tu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!R.alternate&&!Be)return _s(i),null}else 2*fr()-N.renderingStartTime>oc&&c!==1073741824&&(i.flags|=128,p=!0,tu(N,!1),i.lanes=4194304);N.isBackwards?(R.sibling=i.child,i.child=R):(c=N.last,c!==null?c.sibling=R:i.child=R,N.last=R)}return N.tail!==null?(i=N.tail,N.rendering=i,N.tail=i.sibling,N.renderingStartTime=fr(),i.sibling=null,c=Cr.current,gr(Cr,p?c&1|2:c&1),i):(_s(i),null);case 22:case 23:return vh(),p=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==p&&(i.flags|=8192),p&&(i.mode&1)!==0?(ki&1073741824)!==0&&(_s(i),i.subtreeFlags&6&&(i.flags|=8192)):_s(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function P1(r,i){switch(Le(i),i.tag){case 1:return bs(i.type)&&Yl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Mi(),hr(ys),hr(In),Qc(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Jc(i),null;case 13:if(hr(Cr),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));st()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return hr(Cr),null;case 4:return Mi(),null;case 10:return Ir(i.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var zu=!1,Ns=!1,C1=typeof WeakSet=="function"?WeakSet:Set,at=null;function ic(r,i){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){fn(r,i,p)}else c.current=null}function ih(r,i,c){try{c()}catch(p){fn(r,i,p)}}var S0=!1;function E1(r,i){if(fl=Zi,r=cn(),xi(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var b=p.anchorOffset,N=p.focusNode;p=p.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var R=0,pe=-1,ye=-1,De=0,He=0,Ye=r,We=null;t:for(;;){for(var tt;Ye!==c||b!==0&&Ye.nodeType!==3||(pe=R+b),Ye!==N||p!==0&&Ye.nodeType!==3||(ye=R+p),Ye.nodeType===3&&(R+=Ye.nodeValue.length),(tt=Ye.firstChild)!==null;)We=Ye,Ye=tt;for(;;){if(Ye===r)break t;if(We===c&&++De===b&&(pe=R),We===N&&++He===p&&(ye=R),(tt=Ye.nextSibling)!==null)break;Ye=We,We=Ye.parentNode}Ye=tt}c=pe===-1||ye===-1?null:{start:pe,end:ye}}else c=null}c=c||{start:0,end:0}}else c=null;for(co={focusedElem:r,selectionRange:c},Zi=!1,at=i;at!==null;)if(i=at,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,at=r;else for(;at!==null;){i=at;try{var ut=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,bn=ut.memoizedState,Ee=i.stateNode,Se=Ee.getSnapshotBeforeUpdate(i.elementType===i.type?ht:ha(i.type,ht),bn);Ee.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var Te=i.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Je){fn(i,i.return,Je)}if(r=i.sibling,r!==null){r.return=i.return,at=r;break}at=i.return}return ut=S0,S0=!1,ut}function ru(r,i,c){var p=i.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&r)===r){var N=b.destroy;b.destroy=void 0,N!==void 0&&ih(i,c,N)}b=b.next}while(b!==p)}}function $u(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&r)===r){var p=c.create;c.destroy=p()}c=c.next}while(c!==i)}}function ah(r){var i=r.ref;if(i!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof i=="function"?i(r):i.current=r}}function j0(r){var i=r.alternate;i!==null&&(r.alternate=null,j0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Ri],delete i[To],delete i[xs],delete i[Wd],delete i[Hd])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function A0(r){return r.tag===5||r.tag===3||r.tag===4}function P0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||A0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function oh(r,i,c){var p=r.tag;if(p===5||p===6)r=r.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(r,i):c.insertBefore(r,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(r,c)):(i=c,i.appendChild(r)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Lo));else if(p!==4&&(r=r.child,r!==null))for(oh(r,i,c),r=r.sibling;r!==null;)oh(r,i,c),r=r.sibling}function lh(r,i,c){var p=r.tag;if(p===5||p===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(p!==4&&(r=r.child,r!==null))for(lh(r,i,c),r=r.sibling;r!==null;)lh(r,i,c),r=r.sibling}var us=null,fa=!1;function Uo(r,i,c){for(c=c.child;c!==null;)C0(r,i,c),c=c.sibling}function C0(r,i,c){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(fs,c)}catch{}switch(c.tag){case 5:Ns||ic(c,i);case 6:var p=us,b=fa;us=null,Uo(r,i,c),us=p,fa=b,us!==null&&(fa?(r=us,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):us.removeChild(c.stateNode));break;case 18:us!==null&&(fa?(r=us,c=c.stateNode,r.nodeType===8?Gc(r.parentNode,c):r.nodeType===1&&Gc(r,c),Qi(r)):Gc(us,c.stateNode));break;case 4:p=us,b=fa,us=c.stateNode.containerInfo,fa=!0,Uo(r,i,c),us=p,fa=b;break;case 0:case 11:case 14:case 15:if(!Ns&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){b=p=p.next;do{var N=b,R=N.destroy;N=N.tag,R!==void 0&&((N&2)!==0||(N&4)!==0)&&ih(c,i,R),b=b.next}while(b!==p)}Uo(r,i,c);break;case 1:if(!Ns&&(ic(c,i),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(pe){fn(c,i,pe)}Uo(r,i,c);break;case 21:Uo(r,i,c);break;case 22:c.mode&1?(Ns=(p=Ns)||c.memoizedState!==null,Uo(r,i,c),Ns=p):Uo(r,i,c);break;default:Uo(r,i,c)}}function E0(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new C1),i.forEach(function(p){var b=U1.bind(null,r,p);c.has(p)||(c.add(p),p.then(b,b))})}}function pa(r,i){var c=i.deletions;if(c!==null)for(var p=0;p<c.length;p++){var b=c[p];try{var N=r,R=i,pe=R;e:for(;pe!==null;){switch(pe.tag){case 5:us=pe.stateNode,fa=!1;break e;case 3:us=pe.stateNode.containerInfo,fa=!0;break e;case 4:us=pe.stateNode.containerInfo,fa=!0;break e}pe=pe.return}if(us===null)throw Error(t(160));C0(N,R,b),us=null,fa=!1;var ye=b.alternate;ye!==null&&(ye.return=null),b.return=null}catch(De){fn(b,i,De)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)L0(i,r),i=i.sibling}function L0(r,i){var c=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(pa(i,r),qa(r),p&4){try{ru(3,r,r.return),$u(3,r)}catch(ht){fn(r,r.return,ht)}try{ru(5,r,r.return)}catch(ht){fn(r,r.return,ht)}}break;case 1:pa(i,r),qa(r),p&512&&c!==null&&ic(c,c.return);break;case 5:if(pa(i,r),qa(r),p&512&&c!==null&&ic(c,c.return),r.flags&32){var b=r.stateNode;try{ft(b,"")}catch(ht){fn(r,r.return,ht)}}if(p&4&&(b=r.stateNode,b!=null)){var N=r.memoizedProps,R=c!==null?c.memoizedProps:N,pe=r.type,ye=r.updateQueue;if(r.updateQueue=null,ye!==null)try{pe==="input"&&N.type==="radio"&&N.name!=null&&Ke(b,N),bt(pe,R);var De=bt(pe,N);for(R=0;R<ye.length;R+=2){var He=ye[R],Ye=ye[R+1];He==="style"?zt(b,Ye):He==="dangerouslySetInnerHTML"?ot(b,Ye):He==="children"?ft(b,Ye):B(b,He,Ye,De)}switch(pe){case"input":Lt(b,N);break;case"textarea":qt(b,N);break;case"select":var We=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var tt=N.value;tt!=null?et(b,!!N.multiple,tt,!1):We!==!!N.multiple&&(N.defaultValue!=null?et(b,!!N.multiple,N.defaultValue,!0):et(b,!!N.multiple,N.multiple?[]:"",!1))}b[To]=N}catch(ht){fn(r,r.return,ht)}}break;case 6:if(pa(i,r),qa(r),p&4){if(r.stateNode===null)throw Error(t(162));b=r.stateNode,N=r.memoizedProps;try{b.nodeValue=N}catch(ht){fn(r,r.return,ht)}}break;case 3:if(pa(i,r),qa(r),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Qi(i.containerInfo)}catch(ht){fn(r,r.return,ht)}break;case 4:pa(i,r),qa(r);break;case 13:pa(i,r),qa(r),b=r.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(dh=fr())),p&4&&E0(r);break;case 22:if(He=c!==null&&c.memoizedState!==null,r.mode&1?(Ns=(De=Ns)||He,pa(i,r),Ns=De):pa(i,r),qa(r),p&8192){if(De=r.memoizedState!==null,(r.stateNode.isHidden=De)&&!He&&(r.mode&1)!==0)for(at=r,He=r.child;He!==null;){for(Ye=at=He;at!==null;){switch(We=at,tt=We.child,We.tag){case 0:case 11:case 14:case 15:ru(4,We,We.return);break;case 1:ic(We,We.return);var ut=We.stateNode;if(typeof ut.componentWillUnmount=="function"){p=We,c=We.return;try{i=p,ut.props=i.memoizedProps,ut.state=i.memoizedState,ut.componentWillUnmount()}catch(ht){fn(p,c,ht)}}break;case 5:ic(We,We.return);break;case 22:if(We.memoizedState!==null){I0(Ye);continue}}tt!==null?(tt.return=We,at=tt):I0(Ye)}He=He.sibling}e:for(He=null,Ye=r;;){if(Ye.tag===5){if(He===null){He=Ye;try{b=Ye.stateNode,De?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(pe=Ye.stateNode,ye=Ye.memoizedProps.style,R=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,pe.style.display=Gt("display",R))}catch(ht){fn(r,r.return,ht)}}}else if(Ye.tag===6){if(He===null)try{Ye.stateNode.nodeValue=De?"":Ye.memoizedProps}catch(ht){fn(r,r.return,ht)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===r)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===r)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===r)break e;He===Ye&&(He=null),Ye=Ye.return}He===Ye&&(He=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:pa(i,r),qa(r),p&4&&E0(r);break;case 21:break;default:pa(i,r),qa(r)}}function qa(r){var i=r.flags;if(i&2){try{e:{for(var c=r.return;c!==null;){if(A0(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var b=p.stateNode;p.flags&32&&(ft(b,""),p.flags&=-33);var N=P0(r);lh(r,N,b);break;case 3:case 4:var R=p.stateNode.containerInfo,pe=P0(r);oh(r,pe,R);break;default:throw Error(t(161))}}catch(ye){fn(r,r.return,ye)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function L1(r,i,c){at=r,T0(r)}function T0(r,i,c){for(var p=(r.mode&1)!==0;at!==null;){var b=at,N=b.child;if(b.tag===22&&p){var R=b.memoizedState!==null||zu;if(!R){var pe=b.alternate,ye=pe!==null&&pe.memoizedState!==null||Ns;pe=zu;var De=Ns;if(zu=R,(Ns=ye)&&!De)for(at=b;at!==null;)R=at,ye=R.child,R.tag===22&&R.memoizedState!==null?O0(b):ye!==null?(ye.return=R,at=ye):O0(b);for(;N!==null;)at=N,T0(N),N=N.sibling;at=b,zu=pe,Ns=De}D0(r)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,at=N):D0(r)}}function D0(r){for(;at!==null;){var i=at;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ns||$u(5,i);break;case 1:var p=i.stateNode;if(i.flags&4&&!Ns)if(c===null)p.componentDidMount();else{var b=i.elementType===i.type?c.memoizedProps:ha(i.type,c.memoizedProps);p.componentDidUpdate(b,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var N=i.updateQueue;N!==null&&ei(i,N,p);break;case 3:var R=i.updateQueue;if(R!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}ei(i,R,c)}break;case 5:var pe=i.stateNode;if(c===null&&i.flags&4){c=pe;var ye=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&c.focus();break;case"img":ye.src&&(c.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var De=i.alternate;if(De!==null){var He=De.memoizedState;if(He!==null){var Ye=He.dehydrated;Ye!==null&&Qi(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ns||i.flags&512&&ah(i)}catch(We){fn(i,i.return,We)}}if(i===r){at=null;break}if(c=i.sibling,c!==null){c.return=i.return,at=c;break}at=i.return}}function I0(r){for(;at!==null;){var i=at;if(i===r){at=null;break}var c=i.sibling;if(c!==null){c.return=i.return,at=c;break}at=i.return}}function O0(r){for(;at!==null;){var i=at;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{$u(4,i)}catch(ye){fn(i,c,ye)}break;case 1:var p=i.stateNode;if(typeof p.componentDidMount=="function"){var b=i.return;try{p.componentDidMount()}catch(ye){fn(i,b,ye)}}var N=i.return;try{ah(i)}catch(ye){fn(i,N,ye)}break;case 5:var R=i.return;try{ah(i)}catch(ye){fn(i,R,ye)}}}catch(ye){fn(i,i.return,ye)}if(i===r){at=null;break}var pe=i.sibling;if(pe!==null){pe.return=i.return,at=pe;break}at=i.return}}var T1=Math.ceil,Wu=H.ReactCurrentDispatcher,ch=H.ReactCurrentOwner,qi=H.ReactCurrentBatchConfig,or=0,Jn=null,Cn=null,ds=0,ki=0,ac=yi(0),Fn=0,nu=null,yl=0,Hu=0,uh=0,su=null,ri=null,dh=0,oc=1/0,go=null,Vu=!1,hh=null,Bo=null,Gu=!1,qo=null,Yu=0,iu=0,fh=null,Ku=-1,Ju=0;function Ws(){return(or&6)!==0?fr():Ku!==-1?Ku:Ku=fr()}function zo(r){return(r.mode&1)===0?1:(or&2)!==0&&ds!==0?ds&-ds:en.transition!==null?(Ju===0&&(Ju=ka()),Ju):(r=er,r!==0||(r=window.event,r=r===void 0?16:ea(r.type)),r)}function ma(r,i,c,p){if(50<iu)throw iu=0,fh=null,Error(t(185));ui(r,c,p),((or&2)===0||r!==Jn)&&(r===Jn&&((or&2)===0&&(Hu|=c),Fn===4&&$o(r,ds)),ni(r,p),c===1&&or===0&&(i.mode&1)===0&&(oc=fr()+500,ml&&j()))}function ni(r,i){var c=r.callbackNode;Xr(r,i);var p=Yi(r,r===Jn?ds:0);if(p===0)c!==null&&Hi(c),r.callbackNode=null,r.callbackPriority=0;else if(i=p&-p,r.callbackPriority!==i){if(c!=null&&Hi(c),i===1)r.tag===0?w(R0.bind(null,r)):g(R0.bind(null,r)),zd(function(){(or&6)===0&&j()}),c=null;else{switch(di(p)){case 1:c=Ei;break;case 4:c=ss;break;case 16:c=Ls;break;case 536870912:c=_a;break;default:c=Ls}c=H0(c,F0.bind(null,r))}r.callbackPriority=i,r.callbackNode=c}}function F0(r,i){if(Ku=-1,Ju=0,(or&6)!==0)throw Error(t(327));var c=r.callbackNode;if(lc()&&r.callbackNode!==c)return null;var p=Yi(r,r===Jn?ds:0);if(p===0)return null;if((p&30)!==0||(p&r.expiredLanes)!==0||i)i=Xu(r,p);else{i=p;var b=or;or|=2;var N=U0();(Jn!==r||ds!==i)&&(go=null,oc=fr()+500,wl(r,i));do try{O1();break}catch(pe){M0(r,pe)}while(!0);ir(),Wu.current=N,or=b,Cn!==null?i=0:(Jn=null,ds=0,i=Fn)}if(i!==0){if(i===2&&(b=$n(r),b!==0&&(p=b,i=ph(r,b))),i===1)throw c=nu,wl(r,0),$o(r,p),ni(r,fr()),c;if(i===6)$o(r,p);else{if(b=r.current.alternate,(p&30)===0&&!D1(b)&&(i=Xu(r,p),i===2&&(N=$n(r),N!==0&&(p=N,i=ph(r,N))),i===1))throw c=nu,wl(r,0),$o(r,p),ni(r,fr()),c;switch(r.finishedWork=b,r.finishedLanes=p,i){case 0:case 1:throw Error(t(345));case 2:_l(r,ri,go);break;case 3:if($o(r,p),(p&130023424)===p&&(i=dh+500-fr(),10<i)){if(Yi(r,0)!==0)break;if(b=r.suspendedLanes,(b&p)!==p){Ws(),r.pingedLanes|=r.suspendedLanes&b;break}r.timeoutHandle=Vc(_l.bind(null,r,ri,go),i);break}_l(r,ri,go);break;case 4:if($o(r,p),(p&4194240)===p)break;for(i=r.eventTimes,b=-1;0<p;){var R=31-Rr(p);N=1<<R,R=i[R],R>b&&(b=R),p&=~N}if(p=b,p=fr()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*T1(p/1960))-p,10<p){r.timeoutHandle=Vc(_l.bind(null,r,ri,go),p);break}_l(r,ri,go);break;case 5:_l(r,ri,go);break;default:throw Error(t(329))}}}return ni(r,fr()),r.callbackNode===c?F0.bind(null,r):null}function ph(r,i){var c=su;return r.current.memoizedState.isDehydrated&&(wl(r,i).flags|=256),r=Xu(r,i),r!==2&&(i=ri,ri=c,i!==null&&mh(i)),r}function mh(r){ri===null?ri=r:ri.push.apply(ri,r)}function D1(r){for(var i=r;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var b=c[p],N=b.getSnapshot;b=b.value;try{if(!Wr(N(),b))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $o(r,i){for(i&=~uh,i&=~Hu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var c=31-Rr(i),p=1<<c;r[c]=-1,i&=~p}}function R0(r){if((or&6)!==0)throw Error(t(327));lc();var i=Yi(r,0);if((i&1)===0)return ni(r,fr()),null;var c=Xu(r,i);if(r.tag!==0&&c===2){var p=$n(r);p!==0&&(i=p,c=ph(r,p))}if(c===1)throw c=nu,wl(r,0),$o(r,i),ni(r,fr()),c;if(c===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,_l(r,ri,go),ni(r,fr()),null}function gh(r,i){var c=or;or|=1;try{return r(i)}finally{or=c,or===0&&(oc=fr()+500,ml&&j())}}function bl(r){qo!==null&&qo.tag===0&&(or&6)===0&&lc();var i=or;or|=1;var c=qi.transition,p=er;try{if(qi.transition=null,er=1,r)return r()}finally{er=p,qi.transition=c,or=i,(or&6)===0&&j()}}function vh(){ki=ac.current,hr(ac)}function wl(r,i){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,Cu(c)),Cn!==null)for(c=Cn.return;c!==null;){var p=c;switch(Le(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Yl();break;case 3:Mi(),hr(ys),hr(In),Qc();break;case 5:Jc(p);break;case 4:Mi();break;case 13:hr(Cr);break;case 19:hr(Cr);break;case 10:Ir(p.type._context);break;case 22:case 23:vh()}c=c.return}if(Jn=r,Cn=r=Wo(r.current,null),ds=ki=i,Fn=0,nu=null,uh=Hu=yl=0,ri=su=null,kr!==null){for(i=0;i<kr.length;i++)if(c=kr[i],p=c.interleaved,p!==null){c.interleaved=null;var b=p.next,N=c.pending;if(N!==null){var R=N.next;N.next=b,p.next=R}c.pending=p}kr=null}return r}function M0(r,i){do{var c=Cn;try{if(ir(),Kl.current=Mu,Fo){for(var p=Or.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}Fo=!1}if(Ui=0,sn=hn=Or=null,ua=!1,Ro=0,ch.current=null,c===null||c.return===null){Fn=1,nu=i,Cn=null;break}e:{var N=r,R=c.return,pe=c,ye=i;if(i=ds,pe.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var De=ye,He=pe,Ye=He.tag;if((He.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var We=He.alternate;We?(He.updateQueue=We.updateQueue,He.memoizedState=We.memoizedState,He.lanes=We.lanes):(He.updateQueue=null,He.memoizedState=null)}var tt=c0(R);if(tt!==null){tt.flags&=-257,u0(tt,R,pe,N,i),tt.mode&1&&l0(N,De,i),i=tt,ye=De;var ut=i.updateQueue;if(ut===null){var ht=new Set;ht.add(ye),i.updateQueue=ht}else ut.add(ye);break e}else{if((i&1)===0){l0(N,De,i),xh();break e}ye=Error(t(426))}}else if(Be&&pe.mode&1){var bn=c0(R);if(bn!==null){(bn.flags&65536)===0&&(bn.flags|=256),u0(bn,R,pe,N,i),Ze(sc(ye,pe));break e}}N=ye=sc(ye,pe),Fn!==4&&(Fn=2),su===null?su=[N]:su.push(N),N=R;do{switch(N.tag){case 3:N.flags|=65536,i&=-i,N.lanes|=i;var Ee=a0(N,ye,i);jr(N,Ee);break e;case 1:pe=ye;var Se=N.type,Te=N.stateNode;if((N.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(Bo===null||!Bo.has(Te)))){N.flags|=65536,i&=-i,N.lanes|=i;var Je=o0(N,pe,i);jr(N,Je);break e}}N=N.return}while(N!==null)}q0(c)}catch(gt){i=gt,Cn===c&&c!==null&&(Cn=c=c.return);continue}break}while(!0)}function U0(){var r=Wu.current;return Wu.current=Mu,r===null?Mu:r}function xh(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Jn===null||(yl&268435455)===0&&(Hu&268435455)===0||$o(Jn,ds)}function Xu(r,i){var c=or;or|=2;var p=U0();(Jn!==r||ds!==i)&&(go=null,wl(r,i));do try{I1();break}catch(b){M0(r,b)}while(!0);if(ir(),or=c,Wu.current=p,Cn!==null)throw Error(t(261));return Jn=null,ds=0,Fn}function I1(){for(;Cn!==null;)B0(Cn)}function O1(){for(;Cn!==null&&!Ci();)B0(Cn)}function B0(r){var i=W0(r.alternate,r,ki);r.memoizedProps=r.pendingProps,i===null?q0(r):Cn=i,ch.current=null}function q0(r){var i=r;do{var c=i.alternate;if(r=i.return,(i.flags&32768)===0){if(c=A1(c,i,ki),c!==null){Cn=c;return}}else{if(c=P1(c,i),c!==null){c.flags&=32767,Cn=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Fn=6,Cn=null;return}}if(i=i.sibling,i!==null){Cn=i;return}Cn=i=r}while(i!==null);Fn===0&&(Fn=5)}function _l(r,i,c){var p=er,b=qi.transition;try{qi.transition=null,er=1,F1(r,i,c,p)}finally{qi.transition=b,er=p}return null}function F1(r,i,c,p){do lc();while(qo!==null);if((or&6)!==0)throw Error(t(327));c=r.finishedWork;var b=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var N=c.lanes|c.childLanes;if(ps(r,N),r===Jn&&(Cn=Jn=null,ds=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Gu||(Gu=!0,H0(Ls,function(){return lc(),null})),N=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||N){N=qi.transition,qi.transition=null;var R=er;er=1;var pe=or;or|=4,ch.current=null,E1(r,c),L0(c,r),il(co),Zi=!!fl,co=fl=null,r.current=c,L1(c),Bl(),or=pe,er=R,qi.transition=N}else r.current=c;if(Gu&&(Gu=!1,qo=r,Yu=b),N=r.pendingLanes,N===0&&(Bo=null),ci(c.stateNode),ni(r,fr()),i!==null)for(p=r.onRecoverableError,c=0;c<i.length;c++)b=i[c],p(b.value,{componentStack:b.stack,digest:b.digest});if(Vu)throw Vu=!1,r=hh,hh=null,r;return(Yu&1)!==0&&r.tag!==0&&lc(),N=r.pendingLanes,(N&1)!==0?r===fh?iu++:(iu=0,fh=r):iu=0,j(),null}function lc(){if(qo!==null){var r=di(Yu),i=qi.transition,c=er;try{if(qi.transition=null,er=16>r?16:r,qo===null)var p=!1;else{if(r=qo,qo=null,Yu=0,(or&6)!==0)throw Error(t(331));var b=or;for(or|=4,at=r.current;at!==null;){var N=at,R=N.child;if((at.flags&16)!==0){var pe=N.deletions;if(pe!==null){for(var ye=0;ye<pe.length;ye++){var De=pe[ye];for(at=De;at!==null;){var He=at;switch(He.tag){case 0:case 11:case 15:ru(8,He,N)}var Ye=He.child;if(Ye!==null)Ye.return=He,at=Ye;else for(;at!==null;){He=at;var We=He.sibling,tt=He.return;if(j0(He),He===De){at=null;break}if(We!==null){We.return=tt,at=We;break}at=tt}}}var ut=N.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var bn=ht.sibling;ht.sibling=null,ht=bn}while(ht!==null)}}at=N}}if((N.subtreeFlags&2064)!==0&&R!==null)R.return=N,at=R;else e:for(;at!==null;){if(N=at,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:ru(9,N,N.return)}var Ee=N.sibling;if(Ee!==null){Ee.return=N.return,at=Ee;break e}at=N.return}}var Se=r.current;for(at=Se;at!==null;){R=at;var Te=R.child;if((R.subtreeFlags&2064)!==0&&Te!==null)Te.return=R,at=Te;else e:for(R=Se;at!==null;){if(pe=at,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:$u(9,pe)}}catch(gt){fn(pe,pe.return,gt)}if(pe===R){at=null;break e}var Je=pe.sibling;if(Je!==null){Je.return=pe.return,at=Je;break e}at=pe.return}}if(or=b,j(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(fs,r)}catch{}p=!0}return p}finally{er=c,qi.transition=i}}return!1}function z0(r,i,c){i=sc(c,i),i=a0(r,i,1),r=rn(r,i,1),i=Ws(),r!==null&&(ui(r,1,i),ni(r,i))}function fn(r,i,c){if(r.tag===3)z0(r,r,c);else for(;i!==null;){if(i.tag===3){z0(i,r,c);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Bo===null||!Bo.has(p))){r=sc(c,r),r=o0(i,r,1),i=rn(i,r,1),r=Ws(),i!==null&&(ui(i,1,r),ni(i,r));break}}i=i.return}}function R1(r,i,c){var p=r.pingCache;p!==null&&p.delete(i),i=Ws(),r.pingedLanes|=r.suspendedLanes&c,Jn===r&&(ds&c)===c&&(Fn===4||Fn===3&&(ds&130023424)===ds&&500>fr()-dh?wl(r,0):uh|=c),ni(r,i)}function $0(r,i){i===0&&((r.mode&1)===0?i=1:(i=zn,zn<<=1,(zn&130023424)===0&&(zn=4194304)));var c=Ws();r=Sr(r,i),r!==null&&(ui(r,i,c),ni(r,c))}function M1(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),$0(r,c)}function U1(r,i){var c=0;switch(r.tag){case 13:var p=r.stateNode,b=r.memoizedState;b!==null&&(c=b.retryLane);break;case 19:p=r.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(i),$0(r,c)}var W0;W0=function(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps||ys.current)ti=!0;else{if((r.lanes&c)===0&&(i.flags&128)===0)return ti=!1,j1(r,i,c);ti=(r.flags&131072)!==0}else ti=!1,Be&&(i.flags&1048576)!==0&&Pe(i,V,i.index);switch(i.lanes=0,i.tag){case 2:var p=i.type;qu(r,i),r=i.pendingProps;var b=Io(i,In.current);Gr(i,c),b=gl(null,i,p,r,b,c);var N=Bi();return i.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,bs(p)?(N=!0,fo(i)):N=!1,i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,On(i),b.updater=Uu,i.stateNode=b,b._reactInternals=i,Kd(i,p,r,c),i=Zd(null,i,p,!0,N,c)):(i.tag=0,Be&&N&&Fe(i),$s(null,i,b,c),i=i.child),i;case 16:p=i.elementType;e:{switch(qu(r,i),r=i.pendingProps,b=p._init,p=b(p._payload),i.type=p,b=i.tag=q1(p),r=ha(p,r),b){case 0:i=Qd(null,i,p,r,c);break e;case 1:i=g0(null,i,p,r,c);break e;case 11:i=d0(null,i,p,r,c);break e;case 14:i=h0(null,i,p,ha(p.type,r),c);break e}throw Error(t(306,p,""))}return i;case 0:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ha(p,b),Qd(r,i,p,b,c);case 1:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ha(p,b),g0(r,i,p,b,c);case 3:e:{if(v0(i),r===null)throw Error(t(387));p=i.pendingProps,N=i.memoizedState,b=N.element,ws(r,i),Kn(i,p,null,c);var R=i.memoizedState;if(p=R.element,N.isDehydrated)if(N={element:p,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},i.updateQueue.baseState=N,i.memoizedState=N,i.flags&256){b=sc(Error(t(423)),i),i=x0(r,i,p,c,b);break e}else if(p!==b){b=sc(Error(t(424)),i),i=x0(r,i,p,c,b);break e}else for(Oe=cs(i.stateNode.containerInfo.firstChild),Ie=i,Be=!0,qe=null,c=Br(i,null,p,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(st(),p===b){i=mo(r,i,c);break e}$s(r,i,p,c)}i=i.child}return i;case 5:return Du(i),r===null&&lt(i),p=i.type,b=i.pendingProps,N=r!==null?r.memoizedProps:null,R=b.children,Hc(p,b)?R=null:N!==null&&Hc(p,N)&&(i.flags|=32),m0(r,i),$s(r,i,R,c),i.child;case 6:return r===null&&lt(i),null;case 13:return y0(r,i,c);case 4:return Oo(i,i.stateNode.containerInfo),p=i.pendingProps,r===null?i.child=un(i,null,p,c):$s(r,i,p,c),i.child;case 11:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ha(p,b),d0(r,i,p,b,c);case 7:return $s(r,i,i.pendingProps,c),i.child;case 8:return $s(r,i,i.pendingProps.children,c),i.child;case 12:return $s(r,i,i.pendingProps.children,c),i.child;case 10:e:{if(p=i.type._context,b=i.pendingProps,N=i.memoizedProps,R=b.value,gr(xn,p._currentValue),p._currentValue=R,N!==null)if(Wr(N.value,R)){if(N.children===b.children&&!ys.current){i=mo(r,i,c);break e}}else for(N=i.child,N!==null&&(N.return=i);N!==null;){var pe=N.dependencies;if(pe!==null){R=N.child;for(var ye=pe.firstContext;ye!==null;){if(ye.context===p){if(N.tag===1){ye=tn(-1,c&-c),ye.tag=2;var De=N.updateQueue;if(De!==null){De=De.shared;var He=De.pending;He===null?ye.next=ye:(ye.next=He.next,He.next=ye),De.pending=ye}}N.lanes|=c,ye=N.alternate,ye!==null&&(ye.lanes|=c),ar(N.return,c,i),pe.lanes|=c;break}ye=ye.next}}else if(N.tag===10)R=N.type===i.type?null:N.child;else if(N.tag===18){if(R=N.return,R===null)throw Error(t(341));R.lanes|=c,pe=R.alternate,pe!==null&&(pe.lanes|=c),ar(R,c,i),R=N.sibling}else R=N.child;if(R!==null)R.return=N;else for(R=N;R!==null;){if(R===i){R=null;break}if(N=R.sibling,N!==null){N.return=R.return,R=N;break}R=R.return}N=R}$s(r,i,b.children,c),i=i.child}return i;case 9:return b=i.type,p=i.pendingProps.children,Gr(i,c),b=Yr(b),p=p(b),i.flags|=1,$s(r,i,p,c),i.child;case 14:return p=i.type,b=ha(p,i.pendingProps),b=ha(p.type,b),h0(r,i,p,b,c);case 15:return f0(r,i,i.type,i.pendingProps,c);case 17:return p=i.type,b=i.pendingProps,b=i.elementType===p?b:ha(p,b),qu(r,i),i.tag=1,bs(p)?(r=!0,fo(i)):r=!1,Gr(i,c),s0(i,p,b),Kd(i,p,b,c),Zd(null,i,p,!0,r,c);case 19:return w0(r,i,c);case 22:return p0(r,i,c)}throw Error(t(156,i.tag))};function H0(r,i){return li(r,i)}function B1(r,i,c,p){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(r,i,c,p){return new B1(r,i,c,p)}function yh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function q1(r){if(typeof r=="function")return yh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===q)return 11;if(r===Q)return 14}return 2}function Wo(r,i){var c=r.alternate;return c===null?(c=zi(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Qu(r,i,c,p,b,N){var R=2;if(p=r,typeof r=="function")yh(r)&&(R=1);else if(typeof r=="string")R=5;else e:switch(r){case Z:return Nl(c.children,b,N,i);case K:R=8,b|=8;break;case G:return r=zi(12,c,i,b|2),r.elementType=G,r.lanes=N,r;case z:return r=zi(13,c,i,b),r.elementType=z,r.lanes=N,r;case O:return r=zi(19,c,i,b),r.elementType=O,r.lanes=N,r;case se:return Zu(c,b,N,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ne:R=10;break e;case D:R=9;break e;case q:R=11;break e;case Q:R=14;break e;case ae:R=16,p=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=zi(R,c,i,b),i.elementType=r,i.type=p,i.lanes=N,i}function Nl(r,i,c,p){return r=zi(7,r,p,i),r.lanes=c,r}function Zu(r,i,c,p){return r=zi(22,r,p,i),r.elementType=se,r.lanes=c,r.stateNode={isHidden:!1},r}function bh(r,i,c){return r=zi(6,r,null,i),r.lanes=c,r}function wh(r,i,c){return i=zi(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function z1(r,i,c,p,b){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sa(0),this.expirationTimes=Sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sa(0),this.identifierPrefix=p,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function _h(r,i,c,p,b,N,R,pe,ye){return r=new z1(r,i,c,pe,ye),i===1?(i=1,N===!0&&(i|=8)):i=0,N=zi(3,null,null,i),r.current=N,N.stateNode=r,N.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},On(N),r}function $1(r,i,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:p==null?null:""+p,children:r,containerInfo:i,implementation:c}}function V0(r){if(!r)return Ma;r=r._reactInternals;e:{if(Jr(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(bs(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var c=r.type;if(bs(c))return Kc(r,c,i)}return i}function G0(r,i,c,p,b,N,R,pe,ye){return r=_h(c,p,!0,r,b,N,R,pe,ye),r.context=V0(null),c=r.current,p=Ws(),b=zo(c),N=tn(p,b),N.callback=i??null,rn(c,N,b),r.current.lanes=b,ui(r,b,p),ni(r,p),r}function ed(r,i,c,p){var b=i.current,N=Ws(),R=zo(b);return c=V0(c),i.context===null?i.context=c:i.pendingContext=c,i=tn(N,R),i.payload={element:r},p=p===void 0?null:p,p!==null&&(i.callback=p),r=rn(b,i,R),r!==null&&(ma(r,b,R,N),Yn(r,b,R)),R}function td(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Y0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function Nh(r,i){Y0(r,i),(r=r.alternate)&&Y0(r,i)}function W1(){return null}var K0=typeof reportError=="function"?reportError:function(r){console.error(r)};function kh(r){this._internalRoot=r}rd.prototype.render=kh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));ed(r,i,null,null)},rd.prototype.unmount=kh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;bl(function(){ed(null,r,null,null)}),i[Vn]=null}};function rd(r){this._internalRoot=r}rd.prototype.unstable_scheduleHydration=function(r){if(r){var i=wo();r={blockedOn:null,target:r,priority:i};for(var c=0;c<Ys.length&&i!==0&&i<Ys[c].priority;c++);Ys.splice(c,0,r),c===0&&_o(r)}};function Sh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function nd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function J0(){}function H1(r,i,c,p,b){if(b){if(typeof p=="function"){var N=p;p=function(){var De=td(R);N.call(De)}}var R=G0(i,p,r,0,null,!1,!1,"",J0);return r._reactRootContainer=R,r[Vn]=R.current,oo(r.nodeType===8?r.parentNode:r),bl(),R}for(;b=r.lastChild;)r.removeChild(b);if(typeof p=="function"){var pe=p;p=function(){var De=td(ye);pe.call(De)}}var ye=_h(r,0,!1,null,null,!1,!1,"",J0);return r._reactRootContainer=ye,r[Vn]=ye.current,oo(r.nodeType===8?r.parentNode:r),bl(function(){ed(i,ye,c,p)}),ye}function sd(r,i,c,p,b){var N=c._reactRootContainer;if(N){var R=N;if(typeof b=="function"){var pe=b;b=function(){var ye=td(R);pe.call(ye)}}ed(i,R,r,b)}else R=H1(c,i,r,b,p);return td(R)}hi=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var c=Ts(i.pendingLanes);c!==0&&(Ki(i,c|1),ni(i,fr()),(or&6)===0&&(oc=fr()+500,j()))}break;case 13:bl(function(){var p=Sr(r,1);if(p!==null){var b=Ws();ma(p,r,1,b)}}),Nh(r,1)}},ja=function(r){if(r.tag===13){var i=Sr(r,134217728);if(i!==null){var c=Ws();ma(i,r,134217728,c)}Nh(r,134217728)}},fi=function(r){if(r.tag===13){var i=zo(r),c=Sr(r,i);if(c!==null){var p=Ws();ma(c,r,i,p)}Nh(r,i)}},wo=function(){return er},Li=function(r,i){var c=er;try{return er=r,i()}finally{er=c}},Ot=function(r,i,c){switch(i){case"input":if(Lt(r,c),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var p=c[i];if(p!==r&&p.form===r.form){var b=pl(p);if(!b)throw Error(t(90));ze(p),Lt(p,b)}}}break;case"textarea":qt(r,c);break;case"select":i=c.value,i!=null&&et(r,!!c.multiple,i,!1)}},an=gh,Cs=bl;var V1={usingClientEntryPoint:!1,Events:[Do,uo,pl,Tt,Ps,gh]},au={findFiberByHostInstance:Ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G1={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ns(r),r===null?null:r.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||W1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{fs=id.inject(G1),qn=id}catch{}}return si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V1,si.createPortal=function(r,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sh(i))throw Error(t(200));return $1(r,i,null,c)},si.createRoot=function(r,i){if(!Sh(r))throw Error(t(299));var c=!1,p="",b=K0;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=_h(r,1,!1,null,null,c,!1,p,b),r[Vn]=i.current,oo(r.nodeType===8?r.parentNode:r),new kh(i)},si.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ns(i),r=r===null?null:r.stateNode,r},si.flushSync=function(r){return bl(r)},si.hydrate=function(r,i,c){if(!nd(i))throw Error(t(200));return sd(null,r,i,!0,c)},si.hydrateRoot=function(r,i,c){if(!Sh(r))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,b=!1,N="",R=K0;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onRecoverableError!==void 0&&(R=c.onRecoverableError)),i=G0(i,null,r,1,c??null,b,!1,N,R),r[Vn]=i.current,oo(r),p)for(r=0;r<p.length;r++)c=p[r],b=c._getVersion,b=b(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,b]:i.mutableSourceEagerHydrationData.push(c,b);return new rd(i)},si.render=function(r,i,c){if(!nd(i))throw Error(t(200));return sd(null,r,i,!1,c)},si.unmountComponentAtNode=function(r){if(!nd(r))throw Error(t(40));return r._reactRootContainer?(bl(function(){sd(null,null,r,!1,function(){r._reactRootContainer=null,r[Vn]=null})}),!0):!1},si.unstable_batchedUpdates=gh,si.unstable_renderSubtreeIntoContainer=function(r,i,c,p){if(!nd(c))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return sd(r,i,c,!1,p)},si.version="18.3.1-next-f1338f8080-20240426",si}var sp;function r2(){if(sp)return Ph.exports;sp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ph.exports=t2(),Ph.exports}var ip;function n2(){if(ip)return ad;ip=1;var n=r2();return ad.createRoot=n.createRoot,ad.hydrateRoot=n.hydrateRoot,ad}var s2=n2();const i2=_u(s2),a2="modulepreload",o2=function(n){return"/"+n},ap={},Zo=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");a=f(t.map(m=>{if(m=o2(m),m in ap)return;ap[m]=!0;const x=m.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":a2,x||(S.as="script"),S.crossOrigin="",S.href=m,d&&S.setAttribute("nonce",d),document.head.appendChild(S),x)return new Promise((y,E)=>{S.addEventListener("load",y),S.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},l2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Zo(async()=>{const{default:s}=await Promise.resolve().then(()=>Oc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Uf extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class op extends Uf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lp extends Uf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cp extends Uf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ff;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ff||(ff={}));var c2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class u2{constructor(e,{headers:t={},customFetch:s,region:a=ff.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=l2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return c2(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:o,method:u,body:d,signal:f}=s;let m={},{region:x}=s;x||(x=this.region);const _=new URL(`${this.url}/${t}`);x&&x!=="any"&&(m["x-region"]=x,_.searchParams.set("forceFunctionRegion",x));let S;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",S=d):typeof d=="string"?(m["Content-Type"]="text/plain",S=d):typeof FormData<"u"&&d instanceof FormData?S=d:(m["Content-Type"]="application/json",S=JSON.stringify(d)));const y=yield this.fetch(_.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:S,signal:f}).catch(A=>{throw A.name==="AbortError"?A:new op(A)}),E=y.headers.get("x-relay-error");if(E&&E==="true")throw new lp(y);if(!y.ok)throw new cp(y);let L=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return L==="application/json"?T=yield y.json():L==="application/octet-stream"?T=yield y.blob():L==="text/event-stream"?T=y:L==="multipart/form-data"?T=yield y.formData():T=yield y.text(),{data:T,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new op(o)}:{data:null,error:o,response:o instanceof cp||o instanceof lp?o.context:void 0}}})}}var Qn={},cc={},uc={},dc={},hc={},fc={},d2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ic=d2();const h2=Ic.fetch,tg=Ic.fetch.bind(Ic),rg=Ic.Headers,f2=Ic.Request,p2=Ic.Response,Oc=Object.freeze(Object.defineProperty({__proto__:null,Headers:rg,Request:f2,Response:p2,default:tg,fetch:h2},Symbol.toStringTag,{value:"Module"})),m2=K1(Oc);var od={},up;function ng(){if(up)return od;up=1,Object.defineProperty(od,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return od.default=n,od}var dp;function sg(){if(dp)return fc;dp=1;var n=fc&&fc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(fc,"__esModule",{value:!0});const e=n(m2),t=n(ng());class s{constructor(o){var u,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(u=o.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=new Headers(this.headers),this.headers.set(o,u),this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var x,_,S,y;let E=null,L=null,T=null,A=m.status,Y=m.statusText;if(m.ok){if(this.method!=="HEAD"){const de=await m.text();de===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?L=de:L=JSON.parse(de))}const H=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),ue=(S=m.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");H&&ue&&ue.length>1&&(T=parseInt(ue[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(L)&&(L.length>1?(E={code:"PGRST116",details:`Results contain ${L.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},L=null,T=null,A=406,Y="Not Acceptable"):L.length===1?L=L[0]:L=null)}else{const H=await m.text();try{E=JSON.parse(H),Array.isArray(E)&&m.status===404&&(L=[],E=null,A=200,Y="OK")}catch{m.status===404&&H===""?(A=204,Y="No Content"):E={message:H}}if(E&&this.isMaybeSingle&&(!((y=E?.details)===null||y===void 0)&&y.includes("0 rows"))&&(E=null,A=200,Y="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:L,count:T,status:A,statusText:Y}});return this.shouldThrowOnError||(f=f.catch(m=>{var x,_,S;return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:`${(_=m?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(S=m?.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,u)}returns(){return this}overrideTypes(){return this}}return fc.default=s,fc}var hp;function ig(){if(hp)return hc;hp=1;var n=hc&&hc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hc,"__esModule",{value:!0});const e=n(sg());class t extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:d,referencedTable:f=d}={}){const m=f?`${f}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:d=u}={}){const f=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:d=!1,wal:f=!1,format:m="text"}={}){var x;const _=[a?"analyze":null,o?"verbose":null,u?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),S=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${S}"; options=${_};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return hc.default=t,hc}var fp;function Bf(){if(fp)return dc;fp=1;var n=dc&&dc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dc,"__esModule",{value:!0});const e=n(ig());class t extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${f}fts${m}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return dc.default=t,dc}var pp;function ag(){if(pp)return uc;pp=1;var n=uc&&uc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(uc,"__esModule",{value:!0});const e=n(Bf());class t{constructor(a,{headers:o={},schema:u,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=u,this.fetch=d}select(a,o){const{head:u=!1,count:d}=o??{},f=u?"HEAD":"GET";let m=!1;const x=(a??"*").split("").map(_=>/\s/.test(_)&&!m?"":(_==='"'&&(m=!m),_)).join("");return this.url.searchParams.set("select",x),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:u=!0}={}){var d;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(m.length>0){const x=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:d,defaultToNull:f=!0}={}){var m;const x="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const _=a.reduce((S,y)=>S.concat(Object.keys(y)),[]);if(_.length>0){const S=[...new Set(_)].map(y=>`"${y}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:o}={}){var u;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var o;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return uc.default=t,uc}var mp;function g2(){if(mp)return cc;mp=1;var n=cc&&cc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(cc,"__esModule",{value:!0});const e=n(ag()),t=n(Bf());class s{constructor(o,{headers:u={},schema:d,fetch:f}={}){this.url=o,this.headers=new Headers(u),this.schemaName=d,this.fetch=f}from(o){const u=new URL(`${this.url}/${o}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,u={},{head:d=!1,get:f=!1,count:m}={}){var x;let _;const S=new URL(`${this.url}/rpc/${o}`);let y;d||f?(_=d?"HEAD":"GET",Object.entries(u).filter(([L,T])=>T!==void 0).map(([L,T])=>[L,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([L,T])=>{S.searchParams.append(L,T)})):(_="POST",y=u);const E=new Headers(this.headers);return m&&E.set("Prefer",`count=${m}`),new t.default({method:_,url:S,headers:E,schema:this.schemaName,body:y,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return cc.default=s,cc}var gp;function v2(){if(gp)return Qn;gp=1;var n=Qn&&Qn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PostgrestError=Qn.PostgrestBuilder=Qn.PostgrestTransformBuilder=Qn.PostgrestFilterBuilder=Qn.PostgrestQueryBuilder=Qn.PostgrestClient=void 0;const e=n(g2());Qn.PostgrestClient=e.default;const t=n(ag());Qn.PostgrestQueryBuilder=t.default;const s=n(Bf());Qn.PostgrestFilterBuilder=s.default;const a=n(ig());Qn.PostgrestTransformBuilder=a.default;const o=n(sg());Qn.PostgrestBuilder=o.default;const u=n(ng());return Qn.PostgrestError=u.default,Qn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},Qn}var x2=v2();const y2=_u(x2),{PostgrestClient:b2,PostgrestQueryBuilder:hw,PostgrestFilterBuilder:fw,PostgrestTransformBuilder:pw,PostgrestBuilder:mw,PostgrestError:gw}=y2;class w2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const _2="2.75.0",N2=`realtime-js/${_2}`,k2="1.0.0",pf=1e4,S2=1e3,j2=100;var hu;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(hu||(hu={}));var Rn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Rn||(Rn={}));var xa;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(xa||(xa={}));var mf;(function(n){n.websocket="websocket"})(mf||(mf={}));var Cl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Cl||(Cl={}));class A2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2);let u=this.HEADER_LENGTH+2;const d=s.decode(e.slice(u,u+a));u=u+a;const f=s.decode(e.slice(u,u+o));u=u+o;const m=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:f,payload:m}}}class og{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Fr||(Fr={}));const vp=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=P2(u,n,e,a),o),{}):{}},P2=(n,e,t,s)=>{const a=e.find(d=>d.name===n),o=a?.type,u=t[n];return o&&!s.includes(o)?lg(o,u):gf(u)},lg=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return T2(e,t)}switch(n){case Fr.bool:return C2(e);case Fr.float4:case Fr.float8:case Fr.int2:case Fr.int4:case Fr.int8:case Fr.numeric:case Fr.oid:return E2(e);case Fr.json:case Fr.jsonb:return L2(e);case Fr.timestamp:return D2(e);case Fr.abstime:case Fr.date:case Fr.daterange:case Fr.int4range:case Fr.int8range:case Fr.money:case Fr.reltime:case Fr.text:case Fr.time:case Fr.timestamptz:case Fr.timetz:case Fr.tsrange:case Fr.tstzrange:return gf(e);default:return gf(e)}},gf=n=>n,C2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},E2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},L2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},T2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let o;const u=n.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>lg(e,d))}return n},D2=n=>typeof n=="string"?n.replace(" ","T"):n,cg=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Lh{constructor(e,t,s={},a=pf){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(xp||(xp={}));class fu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fu.syncState(this.state,a,o,u),this.pendingDiffs.forEach(f=>{this.state=fu.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=fu.syncDiff(this.state,a,o,u),d())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),u=this.transformState(t),d={},f={};return this.map(o,(m,x)=>{u[m]||(f[m]=x)}),this.map(u,(m,x)=>{const _=o[m];if(_){const S=x.map(T=>T.presence_ref),y=_.map(T=>T.presence_ref),E=x.filter(T=>y.indexOf(T.presence_ref)<0),L=_.filter(T=>S.indexOf(T.presence_ref)<0);E.length>0&&(d[m]=E),L.length>0&&(f[m]=L)}else d[m]=x}),this.syncDiff(o,{joins:d,leaves:f},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,f)=>{var m;const x=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(f),x.length>0){const _=e[d].map(y=>y.presence_ref),S=x.filter(y=>_.indexOf(y.presence_ref)<0);e[d].unshift(...S)}s(d,x,f)}),this.map(u,(d,f)=>{let m=e[d];if(!m)return;const x=f.map(_=>_.presence_ref);m=m.filter(_=>x.indexOf(_.presence_ref)<0),e[d]=m,a(d,m,f),m.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yp;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(yp||(yp={}));var pu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(pu||(pu={}));var yo;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(yo||(yo={}));class qf{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Lh(this,xa.join,this.params,this.timeout),this.rejoinTimer=new og(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xa.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new fu(this),this.broadcastEndpointURL=cg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Rn.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,m=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[pu.PRESENCE]&&this.bindings[pu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},S={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:x}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(yo.CHANNEL_ERROR,y)),this._onClose(()=>e?.(yo.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var E;if(this.socket.setAuth(),y===void 0){e?.(yo.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,T=(E=L?.length)!==null&&E!==void 0?E:0,A=[];for(let Y=0;Y<T;Y++){const B=L[Y],{filter:{event:H,schema:ue,table:de,filter:Z}}=B,K=y&&y[Y];if(K&&K.event===H&&K.schema===ue&&K.table===de&&K.filter===Z)A.push(Object.assign(Object.assign({},B),{id:K.id}));else{this.unsubscribe(),this.state=Rn.errored,e?.(yo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(yo.SUBSCRIBED);return}}).receive("error",y=>{this.state=Rn.errored,e?.(yo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(yo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Rn.joined&&e===pu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,f;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xa.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Lh(this,xa.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Lh(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>j2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const u=e.toLocaleLowerCase(),{close:d,error:f,leave:m,join:x}=xa;if(s&&[d,f,m,x].indexOf(u)>=0&&s!==this._joinRef())return;let S=this._onMessage(u,t,s);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var E,L,T;return((E=y.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(L=y.filter)===null||L===void 0?void 0:L.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(y=>y.callback(S,s)):(o=this.bindings[u])===null||o===void 0||o.filter(y=>{var E,L,T,A,Y,B;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const H=y.id,ue=(E=y.filter)===null||E===void 0?void 0:E.event;return H&&((L=t.ids)===null||L===void 0?void 0:L.includes(H))&&(ue==="*"||ue?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const H=(Y=(A=y?.filter)===null||A===void 0?void 0:A.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return H==="*"||H===((B=t?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:L,table:T,commit_timestamp:A,type:Y,errors:B}=E;S=Object.assign(Object.assign({},{schema:L,table:T,commit_timestamp:A,eventType:Y,new:{},old:{},errors:B}),this._getPayloadRecords(E))}y.callback(S,s)})}_isClosed(){return this.state===Rn.closed}_isJoined(){return this.state===Rn.joined}_isJoining(){return this.state===Rn.joining}_isLeaving(){return this.state===Rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&qf.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xa.close,{},e)}_onError(e){this._on(xa.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=vp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=vp(e.columns,e.old_record)),t}}const Th=()=>{},ld={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},I2=[1e3,2e3,5e3,1e4],O2=1e4,F2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class R2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pf,this.transport=null,this.heartbeatIntervalMs=ld.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Th,this.ref=0,this.reconnectTimer=null,this.logger=Th,this.conn=null,this.sendBuffer=[],this.serializer=new A2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...u)=>Zo(async()=>{const{default:d}=await Promise.resolve().then(()=>Oc);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...u)=>o(...u)},!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${mf.websocket}`,this.httpEndpoint=cg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=w2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:k2}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case hu.connecting:return Cl.Connecting;case hu.open:return Cl.Open;case hu.closing:return Cl.Closing;default:return Cl.Closed}}isConnected(){return this.connectionState()===Cl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new qf(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,u=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(S2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ld.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:u}=t,d=u?`(${u})`:"",f=o.status||"";this.log("receive",`${f} ${s} ${a} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(a,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xa.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([F2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:N2};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(xa.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new og(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ld.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,u,d,f,m,x;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:pf,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:ld.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Th,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(_=>I2[_-1]||O2),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((_,S)=>S(JSON.stringify(_))),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class zf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ln(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class M2 extends zf{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vf extends zf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var U2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const ug=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Zo(async()=>{const{default:s}=await Promise.resolve().then(()=>Oc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},B2=()=>U2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zo(()=>Promise.resolve().then(()=>Oc),void 0)).Response:Response}),xf=n=>{if(Array.isArray(n))return n.map(t=>xf(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=xf(s)}),e},q2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Rl=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const Dh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),z2=(n,e,t)=>Rl(void 0,void 0,void 0,function*(){const s=yield B2();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{const o=n.status||500,u=a?.statusCode||o+"";e(new M2(Dh(a),o,u))}).catch(a=>{e(new vf(Dh(a),a))}):e(new vf(Dh(n),n))}),$2=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||!s?a:(q2(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Nu(n,e,t,s,a,o){return Rl(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(t,$2(e,s,a,o)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>z2(f,d,s))})})}function Pd(n,e,t,s){return Rl(this,void 0,void 0,function*(){return Nu(n,"GET",e,t,s)})}function Wa(n,e,t,s,a){return Rl(this,void 0,void 0,function*(){return Nu(n,"POST",e,s,a,t)})}function yf(n,e,t,s,a){return Rl(this,void 0,void 0,function*(){return Nu(n,"PUT",e,s,a,t)})}function W2(n,e,t,s){return Rl(this,void 0,void 0,function*(){return Nu(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function dg(n,e,t,s,a){return Rl(this,void 0,void 0,function*(){return Nu(n,"DELETE",e,s,a,t)})}var H2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class V2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return H2(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ln(e))return{data:null,error:e};throw e}})}}var G2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class Y2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new V2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return G2(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ln(e))return{data:null,error:e};throw e}})}}var ii=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const K2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class J2{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=ug(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return ii(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},bp),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const m=this._removeEmptyFolders(t),x=this._getFinalPath(m),_=yield(e=="PUT"?yf:Wa)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ln(o))return{data:null,error:o};throw o}})}upload(e,t,s){return ii(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return ii(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let f;const m=Object.assign({upsert:bp.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",m.cacheControl)):(f=s,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const _=yield yf(this.fetch,d.toString(),f,{headers:x});return{data:{path:o,fullPath:_.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Ln(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return ii(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield Wa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+o.url),d=u.searchParams.get("token");if(!d)throw new zf("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}update(e,t,s){return ii(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ii(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}copy(e,t,s){return ii(this,void 0,void 0,function*(){try{return{data:{path:(yield Wa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return ii(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Wa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return ii(this,void 0,void 0,function*(){try{const a=yield Wa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),u=o?`?${o}`:"",d=this._getFinalPath(e),f=()=>Pd(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new Y2(f,this.shouldThrowOnError)}info(e){return ii(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Pd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xf(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}exists(e){return ii(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield W2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s)&&s instanceof vf){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const d=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&a.push(f);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${m}`)}}}remove(e){return ii(this,void 0,void 0,function*(){try{return{data:yield dg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}list(e,t,s){return ii(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},K2),t),{prefix:e||""});return{data:yield Wa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}listV2(e,t){return ii(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Wa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const X2="2.75.0",Q2={"X-Client-Info":`storage-js/${X2}`};var pc=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class Z2{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Q2),t),this.fetch=ug(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return pc(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ln(e))return{data:null,error:e};throw e}})}getBucket(e){return pc(this,void 0,void 0,function*(){try{return{data:yield Pd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}createBucket(e){return pc(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Wa(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ln(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return pc(this,void 0,void 0,function*(){try{return{data:yield yf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ln(s))return{data:null,error:s};throw s}})}emptyBucket(e){return pc(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pc(this,void 0,void 0,function*(){try{return{data:yield dg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ln(t))return{data:null,error:t};throw t}})}}class ev extends Z2{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new J2(this.url,this.headers,e,this.fetch)}}const tv="2.75.0";let du="";typeof Deno<"u"?du="deno":typeof document<"u"?du="web":typeof navigator<"u"&&navigator.product==="ReactNative"?du="react-native":du="node";const rv={"X-Client-Info":`supabase-js-${du}/${tv}`},nv={headers:rv},sv={schema:"public"},iv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},av={};var ov=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};const lv=n=>{let e;return n?e=n:typeof fetch>"u"?e=tg:e=fetch,(...t)=>e(...t)},cv=()=>typeof Headers>"u"?rg:Headers,uv=(n,e,t)=>{const s=lv(t),a=cv();return(o,u)=>ov(void 0,void 0,void 0,function*(){var d;const f=(d=yield e())!==null&&d!==void 0?d:n;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},u),{headers:m}))})};var dv=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};function hv(n){return n.endsWith("/")?n:n+"/"}function fv(n,e){var t,s;const{db:a,auth:o,realtime:u,global:d}=n,{db:f,auth:m,realtime:x,global:_}=e,S={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},x),u),storage:{},global:Object.assign(Object.assign(Object.assign({},_),d),{headers:Object.assign(Object.assign({},(t=_?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>dv(this,void 0,void 0,function*(){return""})};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}function pv(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hg="2.75.0",Nc=30*1e3,bf=3,Ih=bf*Nc,mv="http://localhost:9999",gv="supabase.auth.token",vv={"X-Client-Info":`gotrue-js/${hg}`},wf="X-Supabase-Api-Version",fg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yv=600*1e3;class vu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Et(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class bv extends vu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function wv(n){return Et(n)&&n.name==="AuthApiError"}class El extends vu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class tl extends vu{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Jo extends tl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _v(n){return Et(n)&&n.name==="AuthSessionMissingError"}class mc extends tl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cd extends tl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ud extends tl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Nv(n){return Et(n)&&n.name==="AuthImplicitGrantRedirectError"}class wp extends tl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _f extends tl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Oh(n){return Et(n)&&n.name==="AuthRetryableFetchError"}class _p extends tl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Nf extends tl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Np=` 	
\r=`.split(""),kv=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Np.length;e+=1)n[Np[e].charCodeAt(0)]=-2;for(let e=0;e<Cd.length;e+=1)n[Cd[e].charCodeAt(0)]=e;return n})();function kp(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Cd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Cd[s]),e.queuedBits-=6}}function pg(n,e,t){const s=kv[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Sp(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{Av(u,s,t)};for(let u=0;u<n.length;u+=1)pg(n.charCodeAt(u),a,o);return e.join("")}function Sv(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function jv(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Sv(s,e)}}function Av(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Cc(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)pg(n.charCodeAt(a),t,s);return new Uint8Array(e)}function Pv(n){const e=[];return jv(n,t=>e.push(t)),new Uint8Array(e)}function Tl(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>kp(a,t,s)),kp(null,t,s),e.join("")}function Cv(n){return Math.round(Date.now()/1e3)+n}function Ev(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ai=()=>typeof window<"u"&&typeof document<"u",kl={tested:!1,writable:!1},mg=()=>{if(!Ai())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kl.tested)return kl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),kl.tested=!0,kl.writable=!0}catch{kl.tested=!0,kl.writable=!1}return kl.writable};function Lv(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const gg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Zo(async()=>{const{default:s}=await Promise.resolve().then(()=>Oc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Tv=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",kc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Sl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Vo=async(n,e)=>{await n.removeItem(e)};class Rd{constructor(){this.promise=new Rd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Rd.promiseConstructor=Promise;function Fh(n){const e=n.split(".");if(e.length!==3)throw new Nf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!xv.test(e[s]))throw new Nf("JWT not in base64url format");return{header:JSON.parse(Sp(e[0])),payload:JSON.parse(Sp(e[1])),signature:Cc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dv(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Iv(n,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await n(o);if(!e(o,null,u)){s(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function Ov(n){return("0"+n.toString(16)).substr(-2)}function Fv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Ov).join("")}async function Rv(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function Mv(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Rv(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gc(n,e,t=!1){const s=Fv();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await kc(n,`${e}-code-verifier`,a);const o=await Mv(s);return[o,s===o?"plain":"s256"]}const Uv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bv(n){const e=n.headers.get(wf);if(!e||!e.match(Uv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function qv(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function zv(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $v=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vc(n){if(!$v.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jp(n){return JSON.parse(JSON.stringify(n))}var Wv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const jl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Hv=[502,503,504];async function Ap(n){var e;if(!Tv(n))throw new _f(jl(n),0);if(Hv.includes(n.status))throw new _f(jl(n),n.status);let t;try{t=await n.json()}catch(o){throw new El(jl(o),o)}let s;const a=Bv(n);if(a&&a.getTime()>=fg["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new _p(jl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Jo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new _p(jl(t),n.status,t.weak_password.reasons);throw new bv(jl(t),n.status||500,s)}const Vv=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Vt(n,e,t,s){var a;const o=Object.assign({},s?.headers);o[wf]||(o[wf]=fg["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await Gv(n,e,t+d,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function Gv(n,e,t,s,a,o){const u=Vv(e,s,a,o);let d;try{d=await n(t,Object.assign({},u))}catch(f){throw console.error(f),new _f(jl(f),0)}if(d.ok||await Ap(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await Ap(f)}}function va(n){var e;let t=null;Jv(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Cv(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Pp(n){const e=va(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Xo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Yv(n){return{data:n,error:null}}function Kv(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=n,u=Wv(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function Cp(n){return n}function Jv(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mh=["global","local","others"];var Xv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class Qv{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=gg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Mh[0]){if(Mh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mh.join(", ")}`);try{return await Vt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Et(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Xo})}catch(s){if(Et(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Xv(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await Vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Kv,redirectTo:t?.redirectTo})}catch(t){if(Et(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Vt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xo})}catch(t){if(Et(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},x=await Vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Cp});if(x.error)throw x.error;const _=await x.json(),S=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(f=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(E=>{const L=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);m[`${T}Page`]=L}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(Et(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){vc(e);try{return await Vt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xo})}catch(t){if(Et(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){vc(e);try{return await Vt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Xo})}catch(s){if(Et(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){vc(e);try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Xo})}catch(s){if(Et(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){vc(e.userId);try{const{data:t,error:s}=await Vt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _deleteFactor(e){vc(e.userId),vc(e.id);try{return{data:await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},x=await Vt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Cp});if(x.error)throw x.error;const _=await x.json(),S=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(f=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(E=>{const L=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);m[`${T}Page`]=L}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(Et(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await Vt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Vt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Vt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}}function Ep(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const xc={debug:!!(globalThis&&mg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Zv extends vg{}async function ex(n,e,t){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),xc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Zv(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(xc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function tx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function rx(n){return parseInt(n,16)}function nx(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function sx(n){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:f,resources:m,scheme:x,uri:_,version:S}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=xg(n.address),E=x?`${x}://${s}`:s,L=n.statement?`${n.statement}
`:"",T=`${E} wants you to sign in with your Ethereum account:
${y}

${L}`;let A=`URI: ${_}
Version: ${S}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),f&&(A+=`
Request ID: ${f}`),m){let Y=`
Resources:`;for(const B of m){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);Y+=`
- ${B}`}A+=Y}return`${T}
${A}`}class En extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Ed extends En{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function ix({error:n,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new En({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new En({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new En({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new En({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new En({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new En({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new En({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new En({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(bg(u)){if(o.rp.id!==u)return new En({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new En({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new En({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new En({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new En({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function ax({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new En({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new En({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(bg(s)){if(t.rpId!==s)return new En({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new En({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new En({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new En({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var yg=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class ox{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const lx=new ox;function cx(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,a=yg(n,["challenge","user","excludeCredentials"]),o=Cc(e).buffer,u=Object.assign(Object.assign({},t),{id:Cc(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const m=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:Cc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function ux(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=yg(n,["challenge","allowCredentials"]),a=Cc(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Cc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function dx(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Tl(new Uint8Array(n.response.attestationObject)),clientDataJSON:Tl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hx(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Tl(new Uint8Array(a.authenticatorData)),clientDataJSON:Tl(new Uint8Array(a.clientDataJSON)),signature:Tl(new Uint8Array(a.signature)),userHandle:a.userHandle?Tl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function bg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Lp(){var n,e;return!!(Ai()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function fx(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:ix({error:e,options:n})}}}async function px(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ed("Browser returned unexpected credential type",e)}:{data:null,error:new Ed("Empty credential response",e)}}catch(e){return{data:null,error:ax({error:e,options:n})}}}const mx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},gx={userVerification:"preferred",hints:["security-key"]};function Ld(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of n)if(a)for(const o in a){const u=a[o];if(u!==void 0)if(Array.isArray(u))s[o]=u;else if(t(u))s[o]=u;else if(e(u)){const d=s[o];e(d)?s[o]=Ld(d,u):s[o]=Ld(u)}else s[o]=u}return s}function vx(n,e){return Ld(mx,n,e||{})}function xx(n,e){return Ld(gx,n,e||{})}class yx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const f=a??lx.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=vx(u.webauthn.credential_options.publicKey,o?.create),{data:x,error:_}=await fx({publicKey:m,signal:f});return x?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:x}},error:null}:{data:null,error:_}}case"request":{const m=xx(u.webauthn.credential_options.publicKey,o?.request),{data:x,error:_}=await px(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:f}));return x?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:x}},error:null}:{data:null,error:_}}}}catch(u){return Et(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!t)return{data:null,error:new vu("rpId is required for WebAuthn authentication")};try{if(!Lp())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:s,credential_response:f.credential_response}})}catch(u){return Et(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!t)return{data:null,error:new vu("rpId is required for WebAuthn registration")};try{if(!Lp())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(x=>{var _;return(_=x.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:d};const{data:f,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(u){return Et(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in register",u)}}}}tx();const bx={url:mv,storageKey:gv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tp(n,e,t){return await t()}const yc={};class xu{get jwks(){var e,t;return(t=(e=yc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=yc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xu.nextInstanceID,xu.nextInstanceID+=1,this.instanceID>0&&Ai()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},bx),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Qv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=gg(a.fetch),this.lock=a.lock||Tp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ai()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ex:this.lock=Tp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yx(this)},this.persistSession?(a.storage?this.storage=a.storage:mg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ep(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ep(this.memoryStorage)),Ai()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Lv(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Ai()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Nv(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Et(t)?{error:t}:{error:new El("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:va}),{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(Et(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:x,password:_,options:S}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await gc(this.storage,this.storageKey)),o=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:x,password:_,data:(t=S?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:y,code_challenge_method:E},xform:va})}else if("phone"in e){const{phone:x,password:_,options:S}=e;o=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:_,data:(s=S?.data)!==null&&s!==void 0?s:{},channel:(a=S?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:va})}else throw new cd("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(Et(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:d}=e;t=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Pp})}else if("phone"in e){const{phone:o,password:u,options:d}=e;t=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Pp})}else throw new cd("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new mc}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,u,d,f,m,x,_,S;let y,E;if("message"in e)y=e.message,E=e.signature;else{const{chain:L,wallet:T,statement:A,options:Y}=e;let B;if(Ai())if(typeof T=="object")B=T;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")B=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!Y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=T}const H=new URL((t=Y?.url)!==null&&t!==void 0?t:window.location.href),ue=await B.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ue||ue.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const de=xg(ue[0]);let Z=(s=Y?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!Z){const G=await B.request({method:"eth_chainId"});Z=rx(G)}const K={domain:H.host,address:de,statement:A,uri:H.href,version:"1",chainId:Z,nonce:(a=Y?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(o=Y?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=Y?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=Y?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=Y?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(x=Y?.signInWithEthereum)===null||x===void 0?void 0:x.resources};y=sx(K),E=await B.request({method:"personal_sign",params:[nx(y),de]})}try{const{data:L,error:T}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:E},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:va});if(T)throw T;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new mc}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:T})}catch(L){if(Et(L))return{data:{user:null,session:null},error:L};throw L}}async signInWithSolana(e){var t,s,a,o,u,d,f,m,x,_,S,y;let E,L;if("message"in e)E=e.message,L=e.signature;else{const{chain:T,wallet:A,statement:Y,options:B}=e;let H;if(Ai())if(typeof A=="object")H=A;else{const de=window;if("solana"in de&&typeof de.solana=="object"&&("signIn"in de.solana&&typeof de.solana.signIn=="function"||"signMessage"in de.solana&&typeof de.solana.signMessage=="function"))H=de.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=A}const ue=new URL((t=B?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in H&&H.signIn){const de=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:ue.host,uri:ue.href}),Y?{statement:Y}:null));let Z;if(Array.isArray(de)&&de[0]&&typeof de[0]=="object")Z=de[0];else if(de&&typeof de=="object"&&"signedMessage"in de&&"signature"in de)Z=de;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)E=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),L=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${ue.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...Y?["",Y,""]:[""],"Version: 1",`URI: ${ue.href}`,`Issued At: ${(a=(s=B?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=B?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((u=B?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((d=B?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((f=B?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((m=B?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((_=(x=B?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||_===void 0)&&_.length?["Resources",...B.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const de=await H.signMessage(new TextEncoder().encode(E),"utf8");if(!de||!(de instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=de}}try{const{data:T,error:A}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Tl(L)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:va});if(A)throw A;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new mc}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:A})}catch(T){if(Et(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:u}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:va});if(await Vo(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new mc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(Et(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:u}=e,d=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:va}),{data:f,error:m}=d;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new mc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,o,u;try{if("email"in e){const{email:d,options:f}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await gc(this.storage,this.storageKey));const{error:_}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:d,options:f}=e,{data:m,error:x}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:x}}throw new cd("You must provide either an email or phone number.")}catch(d){if(Et(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:va});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await gc(this.storage,this.storageKey)),await Vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:Yv})}catch(o){if(Et(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Jo;const{error:a}=await Vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Et(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:u}=await Vt(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:u,error:d}=await Vt(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new cd("You must provide either an email or phone number and a type")}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ih:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await Sl(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Rh()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,x)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,x))})}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xo}):await this._useSession(async t=>{var s,a,o;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jo}:await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Xo})})}catch(t){if(Et(t))return _v(t)&&(await this._removeSession(),await Vo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Jo;const u=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await gc(this.storage,this.storageKey));const{data:m,error:x}=await Vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:Xo});if(x)throw x;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Et(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Jo;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:u}=Fh(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Et(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Jo;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ai())throw new ud("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ud(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ud("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wp("No code detected.");const{data:Y,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:Y.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:d,expires_at:f,token_type:m}=e;if(!o||!d||!u||!m)throw new ud("No session defined in URL");const x=Math.round(Date.now()/1e3),_=parseInt(d);let S=x+_;f&&(S=parseInt(f));const y=S-x;y*1e3<=Nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${_}s`);const E=S-_;x-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,x):x-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,x);const{data:L,error:T}=await this._getUser(o);if(T)throw T;const A={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:_,expires_at:S,refresh_token:u,token_type:m,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(s){if(Et(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{error:o};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(wv(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Vo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ev(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await gc(this.storage,this.storageKey,!0));try{return await Vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Et(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Et(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var u,d,f,m,x;const{data:_,error:S}=o;if(S)throw S;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Vt(this.fetch,"GET",y,{headers:this.headers,jwt:(x=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return Ai()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Et(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:u,provider:d,token:f,access_token:m,nonce:x}=e,_=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:m,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:va}),{data:S,error:y}=_;return y?{data:{user:null,session:null},error:y}:!S||!S.session||!S.user?{data:{user:null,session:null},error:new mc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),{data:S,error:y})}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)throw u;return await Vt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Iv(async a=>(a>0&&await Dv(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:va})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Oh(o)&&Date.now()+u-s<Nc})}catch(s){if(this._debug(t,"error",s),Et(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ai()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Sl(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await kc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Rh()}else if(a&&!a.user&&!a.user){const u=await Sl(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Vo(this.storage,this.storageKey+"-user"),await kc(this.storage,this.storageKey,a)):a.user=Rh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ih;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Ih}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Oh(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Jo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Rd;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Jo;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),Et(o)){const u={data:null,error:o};return Oh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await kc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=jp(a);await kc(this.storage,this.storageKey,o)}else{const a=jp(t);await kc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Vo(this.storage,this.storageKey),await Vo(this.storage,this.storageKey+"-code-verifier"),await Vo(this.storage,this.storageKey+"-user"),this.userStorage&&await Vo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ai()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Nc}ms, refresh threshold is ${bf} ticks`),a<=bf&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof vg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ai()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await gc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?{data:null,error:o}:await Vt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:m}=await Vt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?dx(e.webauthn.credential_response):hx(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await Vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(t){if(Et(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=await Vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:cx(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:ux(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Et(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Fh(a.access_token);let d=null;u.aal&&(d=u.aal);let f=d;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const x=u.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+yv>a)return s;const{data:o,error:u}=await Vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:y,error:E}=await this.getSession();if(E||!y.session)return{data:null,error:E};s=y.session.access_token}const{header:a,payload:o,signature:u,raw:{header:d,payload:f}}=Fh(s);t?.allowExpired||qv(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!m){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:o,header:a,signature:u},error:null}}const x=zv(a.alg),_=await crypto.subtle.importKey("jwk",m,x,!0,["verify"]);if(!await crypto.subtle.verify(x,_,u,Pv(`${d}.${f}`)))throw new Nf("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(Et(s))return{data:null,error:s};throw s}}}xu.nextInstanceID=0;const wx=xu;class _x extends wx{constructor(e){super(e)}}var Nx=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{m(s.next(x))}catch(_){u(_)}}function f(x){try{m(s.throw(x))}catch(_){u(_)}}function m(x){x.done?o(x.value):a(x.value).then(d,f)}m((s=s.apply(n,e||[])).next())})};class kx{constructor(e,t,s){var a,o,u;this.supabaseUrl=e,this.supabaseKey=t;const d=pv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:sv,realtime:av,auth:Object.assign(Object.assign({},iv),{storageKey:f}),global:nv},x=fv(s??{},m);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(_,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=uv(t,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new b2(new URL("rest/v1",d).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new ev(this.storageUrl.href,this.headers,this.fetch,s?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new u2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Nx(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:u,flowType:d,lock:f,debug:m},x,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _x({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),x),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,flowType:d,lock:f,debug:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new R2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sx=(n,e,t)=>new kx(n,e,t);function jx(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bd="https://hyrgqrgeshkgvsfwnzzu.supabase.co",Al="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5cmdxcmdlc2hrZ3ZzZnduenp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTU3NTEsImV4cCI6MjA3NjczMTc1MX0.PpQa22hWN7OAl8LP_h9mhxfogUaV1qmSuOiaBeaLDh4";try{console.log("[supabase] initializing client",{urlPresent:!!bd,keyPresent:!!Al,urlPreview:bd?`${bd.slice(0,20)}...`:null,keyLength:Al?.length||0,keyFirst50:Al?`${Al.slice(0,50)}...`:null,keyLast20:Al?`...${Al.slice(-20)}`:null})}catch{}const Ax=typeof window<"u"?window.localStorage:void 0,rt=Sx(bd,Al,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:Ax,storageKey:"pch.auth"}});async function Dp(n){try{const{data:e,error:t}=await rt.auth.getUser();if(t||!e?.user?.id)return{ok:!1,updated:!1,error:t?.message||"No authenticated user"};const s=e.user.id,{data:a,error:o}=await rt.from("profiles").select("timezone").eq("id",s).single();if(o)return{ok:!1,updated:!1,error:o.message};const u=String(a?.timezone||"").trim();if(u)return{ok:!0,updated:!1,timezone:u};const d=String(n||"").trim();if(!d)return{ok:!1,updated:!1,error:"Empty timezone provided"};const{error:f}=await rt.from("profiles").update({timezone:d}).eq("id",s);return f?{ok:!1,updated:!1,error:f.message}:{ok:!0,updated:!0,timezone:d}}catch(e){return{ok:!1,updated:!1,error:e?.message||String(e)}}}async function lu(n){try{console.log("[dbLoadPets] START - userId=",n);const{data:e,error:t}=await rt.from("pets").select("id, name, species, color, photo_url, insurance_company, policy_number, owner_name, owner_phone, filing_deadline_days, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit, healthy_paws_pet_id, pumpkin_account_number, spot_account_number, figo_policy_number, breed, gender, date_of_birth").eq("user_id",n).order("created_at",{ascending:!0});if(console.log("[dbLoadPets] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[dbLoadPets] ERROR:",t),t;const s=(e||[]).map(a=>({id:a.id,name:a.name,species:a.species,color:a.color||(a.species==="dog"?"#3B82F6":a.species==="cat"?"#F97316":"#6B7280"),photo_url:a.photo_url||null,insuranceCompany:a.insurance_company,policyNumber:a.policy_number,ownerName:a.owner_name,ownerPhone:a.owner_phone,filing_deadline_days:a.filing_deadline_days,monthly_premium:a.monthly_premium??null,deductible_per_claim:a.deductible_per_claim??null,coverage_start_date:a.coverage_start_date||null,insurance_pays_percentage:a.insurance_pays_percentage??null,annual_coverage_limit:a.annual_coverage_limit??null,healthy_paws_pet_id:a.healthy_paws_pet_id||null,pumpkin_account_number:a.pumpkin_account_number||null,spot_account_number:a.spot_account_number||null,figo_policy_number:a.figo_policy_number||null,breed:a.breed||null,gender:a.gender||null,date_of_birth:a.date_of_birth||null}));return console.log("[dbLoadPets] SUCCESS - count=",s.length,"pets:",s),s}catch(e){throw console.error("[dbLoadPets] EXCEPTION:",e),e}}async function Uh(n,e){const t=e.color||(e.species==="dog"?"#3B82F6":e.species==="cat"?"#F97316":"#6B7280"),s={id:e.id,user_id:n,name:e.name,species:e.species,color:t,photo_url:e.photo_url||null,insurance_company:e.insuranceCompany,policy_number:e.policyNumber,owner_name:e.ownerName||"",owner_phone:e.ownerPhone||"",filing_deadline_days:e.filing_deadline_days||e.filingDeadlineDays||null,monthly_premium:e.monthly_premium??null,deductible_per_claim:e.deductible_per_claim??null,coverage_start_date:e.coverage_start_date||null,insurance_pays_percentage:e.insurance_pays_percentage??null,annual_coverage_limit:e.annual_coverage_limit??null,healthy_paws_pet_id:e.healthy_paws_pet_id||null,pumpkin_account_number:e.pumpkin_account_number||null,spot_account_number:e.spot_account_number||null,figo_policy_number:e.figo_policy_number||null,breed:e.breed||null,gender:e.gender||null,date_of_birth:e.date_of_birth||null};console.log(" [dbUpsertPet] BEFORE Supabase call:"),console.log("  - userId:",n),console.log("  - payload.spot_account_number:",s.spot_account_number),console.log("  - Full payload:",s);const{data:a,error:o}=await rt.from("pets").upsert(s,{onConflict:"id"}).select();if(console.log(" [dbUpsertPet] AFTER Supabase call:"),console.log("  - data:",a),console.log("  - error:",o),o)throw o}async function Px(n,e){console.log("[dbDeletePet] userId=",n,"petId=",e);const{error:t}=await rt.from("pets").delete().eq("user_id",n).eq("id",e);if(t)throw t}async function Ip(n,e){const t={id:n,email:e??null};console.log("[dbEnsureProfile] upserting profile",t);const{error:s}=await rt.from("profiles").upsert(t,{onConflict:"id"}).select();if(s)throw s}async function Cx(n){console.log("[createPet] received payload:",n);const{data:e,error:t}=await rt.from("pets").insert([{user_id:n.user_id,name:n.name,species:n.species,color:n.color??null,photo_url:n.photo_url??null,insurance_company:n.insurance_company??null,policy_number:n.policy_number??null,healthy_paws_pet_id:n.healthy_paws_pet_id??null,spot_account_number:n.spot_account_number??null,breed:n.breed??null,weight_lbs:n.weight_lbs??null,monthly_premium:n.monthly_premium??null,deductible_per_claim:n.deductible_per_claim??null,coverage_start_date:n.coverage_start_date??null,annual_coverage_limit:n.annual_coverage_limit??null,insurance_pays_percentage:n.insurance_pays_percentage??null,filing_deadline_days:n.filing_deadline_days??null}]).select("*").single();if(console.log("[createPet] insert result:",{data:e,error:t}),t)throw t;return e}function xr(n){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(n)}var ya=Uint8Array,Pi=Uint16Array,$f=Int32Array,Wf=new ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hf=new ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Op=new ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wg=function(n,e){for(var t=new Pi(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new $f(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},_g=wg(Wf,2),Ex=_g.b,kf=_g.r;Ex[28]=258,kf[258]=28;var Lx=wg(Hf,0),Fp=Lx.r,Sf=new Pi(32768);for(var qr=0;qr<32768;++qr){var Go=(qr&43690)>>1|(qr&21845)<<1;Go=(Go&52428)>>2|(Go&13107)<<2,Go=(Go&61680)>>4|(Go&3855)<<4,Sf[qr]=((Go&65280)>>8|(Go&255)<<8)>>1}var mu=(function(n,e,t){for(var s=n.length,a=0,o=new Pi(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new Pi(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var d;if(t){d=new Pi(1<<e);var f=15-e;for(a=0;a<s;++a)if(n[a])for(var m=a<<4|n[a],x=e-n[a],_=u[n[a]-1]++<<x,S=_|(1<<x)-1;_<=S;++_)d[Sf[_]>>f]=m}else for(d=new Pi(s),a=0;a<s;++a)n[a]&&(d[a]=Sf[u[n[a]-1]++]>>15-n[a]);return d}),Il=new ya(288);for(var qr=0;qr<144;++qr)Il[qr]=8;for(var qr=144;qr<256;++qr)Il[qr]=9;for(var qr=256;qr<280;++qr)Il[qr]=7;for(var qr=280;qr<288;++qr)Il[qr]=8;var Td=new ya(32);for(var qr=0;qr<32;++qr)Td[qr]=5;var Tx=mu(Il,9,0),Dx=mu(Td,5,0),Ng=function(n){return(n+7)/8|0},Ix=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ya(n.subarray(e,t))},vo=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},cu=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Bh=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:Sg,l:0};if(a==1){var u=new ya(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(ue,de){return ue.f-de.f}),t.push({s:-1,f:25001});var d=t[0],f=t[1],m=0,x=1,_=2;for(t[0]={s:-1,f:d.f+f.f,l:d,r:f};x!=a-1;)d=t[t[m].f<t[_].f?m++:_++],f=t[m!=x&&t[m].f<t[_].f?m++:_++],t[x++]={s:-1,f:d.f+f.f,l:d,r:f};for(var S=o[0].s,s=1;s<a;++s)o[s].s>S&&(S=o[s].s);var y=new Pi(S+1),E=jf(t[x-1],y,0);if(E>e){var s=0,L=0,T=E-e,A=1<<T;for(o.sort(function(de,Z){return y[Z.s]-y[de.s]||de.f-Z.f});s<a;++s){var Y=o[s].s;if(y[Y]>e)L+=A-(1<<E-y[Y]),y[Y]=e;else break}for(L>>=T;L>0;){var B=o[s].s;y[B]<e?L-=1<<e-y[B]++-1:++s}for(;s>=0&&L;--s){var H=o[s].s;y[H]==e&&(--y[H],++L)}E=e}return{t:new ya(y),l:E}},jf=function(n,e,t){return n.s==-1?Math.max(jf(n.l,e,t+1),jf(n.r,e,t+1)):e[n.s]=t},Rp=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Pi(++e),s=0,a=n[0],o=1,u=function(f){t[s++]=f},d=1;d<=e;++d)if(n[d]==a&&d!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[d]}return{c:t.subarray(0,s),n:e}},uu=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},kg=function(n,e,t){var s=t.length,a=Ng(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},Mp=function(n,e,t,s,a,o,u,d,f,m,x){vo(e,x++,t),++a[256];for(var _=Bh(a,15),S=_.t,y=_.l,E=Bh(o,15),L=E.t,T=E.l,A=Rp(S),Y=A.c,B=A.n,H=Rp(L),ue=H.c,de=H.n,Z=new Pi(19),K=0;K<Y.length;++K)++Z[Y[K]&31];for(var K=0;K<ue.length;++K)++Z[ue[K]&31];for(var G=Bh(Z,7),ne=G.t,D=G.l,q=19;q>4&&!ne[Op[q-1]];--q);var z=m+5<<3,O=uu(a,Il)+uu(o,Td)+u,Q=uu(a,S)+uu(o,L)+u+14+3*q+uu(Z,ne)+2*Z[16]+3*Z[17]+7*Z[18];if(f>=0&&z<=O&&z<=Q)return kg(e,x,n.subarray(f,f+m));var ae,se,M,ce;if(vo(e,x,1+(Q<O)),x+=2,Q<O){ae=mu(S,y,0),se=S,M=mu(L,T,0),ce=L;var be=mu(ne,D,0);vo(e,x,B-257),vo(e,x+5,de-1),vo(e,x+10,q-4),x+=14;for(var K=0;K<q;++K)vo(e,x+3*K,ne[Op[K]]);x+=3*q;for(var X=[Y,ue],P=0;P<2;++P)for(var W=X[P],K=0;K<W.length;++K){var re=W[K]&31;vo(e,x,be[re]),x+=ne[re],re>15&&(vo(e,x,W[K]>>5&127),x+=W[K]>>12)}}else ae=Tx,se=Il,M=Dx,ce=Td;for(var K=0;K<d;++K){var oe=s[K];if(oe>255){var re=oe>>18&31;cu(e,x,ae[re+257]),x+=se[re+257],re>7&&(vo(e,x,oe>>23&31),x+=Wf[re]);var he=oe&31;cu(e,x,M[he]),x+=ce[he],he>3&&(cu(e,x,oe>>5&8191),x+=Hf[he])}else cu(e,x,ae[oe]),x+=se[oe]}return cu(e,x,ae[256]),x+se[256]},Ox=new $f([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sg=new ya(0),Fx=function(n,e,t,s,a,o){var u=o.z||n.length,d=new ya(s+u+5*(1+Math.ceil(u/7e3))+a),f=d.subarray(s,d.length-a),m=o.l,x=(o.r||0)&7;if(e){x&&(f[0]=o.r>>3);for(var _=Ox[e-1],S=_>>13,y=_&8191,E=(1<<t)-1,L=o.p||new Pi(32768),T=o.h||new Pi(E+1),A=Math.ceil(t/3),Y=2*A,B=function(Xe){return(n[Xe]^n[Xe+1]<<A^n[Xe+2]<<Y)&E},H=new $f(25e3),ue=new Pi(288),de=new Pi(32),Z=0,K=0,G=o.i||0,ne=0,D=o.w||0,q=0;G+2<u;++G){var z=B(G),O=G&32767,Q=T[z];if(L[O]=Q,T[z]=O,D<=G){var ae=u-G;if((Z>7e3||ne>24576)&&(ae>423||!m)){x=Mp(n,f,0,H,ue,de,K,ne,q,G-q,x),ne=Z=K=0,q=G;for(var se=0;se<286;++se)ue[se]=0;for(var se=0;se<30;++se)de[se]=0}var M=2,ce=0,be=y,X=O-Q&32767;if(ae>2&&z==B(G-X))for(var P=Math.min(S,ae)-1,W=Math.min(32767,G),re=Math.min(258,ae);X<=W&&--be&&O!=Q;){if(n[G+M]==n[G+M-X]){for(var oe=0;oe<re&&n[G+oe]==n[G+oe-X];++oe);if(oe>M){if(M=oe,ce=X,oe>P)break;for(var he=Math.min(X,oe-2),we=0,se=0;se<he;++se){var Ne=G-X+se&32767,Ae=L[Ne],me=Ne-Ae&32767;me>we&&(we=me,Q=Ne)}}}O=Q,Q=L[O],X+=O-Q&32767}if(ce){H[ne++]=268435456|kf[M]<<18|Fp[ce];var Ue=kf[M]&31,ze=Fp[ce]&31;K+=Wf[Ue]+Hf[ze],++ue[257+Ue],++de[ze],D=G+M,++Z}else H[ne++]=n[G],++ue[n[G]]}}for(G=Math.max(G,D);G<u;++G)H[ne++]=n[G],++ue[n[G]];x=Mp(n,f,m,H,ue,de,K,ne,q,G-q,x),m||(o.r=x&7|f[x/8|0]<<3,x-=7,o.h=T,o.p=L,o.i=G,o.w=D)}else{for(var G=o.w||0;G<u+m;G+=65535){var Ve=G+65535;Ve>=u&&(f[x/8|0]=m,Ve=u),x=kg(f,x+1,n.subarray(G,Ve))}o.i=u}return Ix(d,0,s+Ng(x)+a)},jg=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Rx=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new ya(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return Fx(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},Ag=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Mx=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=jg();a.p(e.dictionary),Ag(n,2,a.d())}};function Af(n,e){e||(e={});var t=jg();t.p(n);var s=Rx(n,e,e.dictionary?6:2,4);return Mx(s,e),Ag(s,s.length-4,t.d()),s}var Ux=typeof TextDecoder<"u"&&new TextDecoder,Bx=0;try{Ux.decode(Sg,{stream:!0}),Bx=1}catch{}function qx(n){if(Array.isArray(n))return n}function zx(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,d=[],f=!0,m=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(f=(s=o.call(t)).done)&&(d.push(s.value),d.length!==e);f=!0);}catch(x){m=!0,a=x}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw a}}return d}}function Up(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function $x(n,e){if(n){if(typeof n=="string")return Up(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Up(n,e):void 0}}function Wx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bp(n,e){return qx(n)||zx(n,e)||$x(n,e)||Wx()}function qp(n,e="utf8"){return new TextDecoder(e).decode(n)}const Hx=new TextEncoder;function Vx(n){return Hx.encode(n)}const Gx=1024*8,Yx=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),qh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Vf{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Gx,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Vf)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=qh[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===Yx&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+s));d.reverse();const f=new qh[t](d.buffer);return this.offset+=s,f.reverse(),f}const u=new qh[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return qp(this.readBytes(e))}decodeText(e=1,t="utf8"){return qp(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Vx(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Fc(n){let e=n.length;for(;--e>=0;)n[e]=0}const Kx=3,Jx=258,Pg=29,Xx=256,Qx=Xx+1+Pg,Cg=30,Zx=512,ey=new Array((Qx+2)*2);Fc(ey);const ty=new Array(Cg*2);Fc(ty);const ry=new Array(Zx);Fc(ry);const ny=new Array(Jx-Kx+1);Fc(ny);const sy=new Array(Pg);Fc(sy);const iy=new Array(Cg);Fc(iy);const ay=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Pf=ay;const oy=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},ly=new Uint32Array(oy()),cy=(n,e,t,s)=>{const a=ly,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var za=cy,Cf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Eg={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const uy=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var dy=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)uy(t,s)&&(n[s]=t[s])}}return n},hy=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},Lg={assign:dy,flattenChunks:hy};let Tg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Tg=!1}const yu=new Uint8Array(256);for(let n=0;n<256;n++)yu[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;yu[254]=yu[254]=1;var fy=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,d=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,a=0;o<d;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const py=(n,e)=>{if(e<65534&&n.subarray&&Tg)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var my=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let d=yu[u];if(d>4){o[a++]=65533,s+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&s<t;)u=u<<6|n[s++]&63,d--;if(d>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return py(o,a)},gy=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+yu[n[t]]>e?t:e},Ef={string2buf:fy,buf2string:my,utf8border:gy};function vy(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var xy=vy;const dd=16209,yy=16191;var by=function(e,t){let s,a,o,u,d,f,m,x,_,S,y,E,L,T,A,Y,B,H,ue,de,Z,K,G,ne;const D=e.state;s=e.next_in,G=e.input,a=s+(e.avail_in-5),o=e.next_out,ne=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),f=D.dmax,m=D.wsize,x=D.whave,_=D.wnext,S=D.window,y=D.hold,E=D.bits,L=D.lencode,T=D.distcode,A=(1<<D.lenbits)-1,Y=(1<<D.distbits)-1;e:do{E<15&&(y+=G[s++]<<E,E+=8,y+=G[s++]<<E,E+=8),B=L[y&A];t:for(;;){if(H=B>>>24,y>>>=H,E-=H,H=B>>>16&255,H===0)ne[o++]=B&65535;else if(H&16){ue=B&65535,H&=15,H&&(E<H&&(y+=G[s++]<<E,E+=8),ue+=y&(1<<H)-1,y>>>=H,E-=H),E<15&&(y+=G[s++]<<E,E+=8,y+=G[s++]<<E,E+=8),B=T[y&Y];r:for(;;){if(H=B>>>24,y>>>=H,E-=H,H=B>>>16&255,H&16){if(de=B&65535,H&=15,E<H&&(y+=G[s++]<<E,E+=8,E<H&&(y+=G[s++]<<E,E+=8)),de+=y&(1<<H)-1,de>f){e.msg="invalid distance too far back",D.mode=dd;break e}if(y>>>=H,E-=H,H=o-u,de>H){if(H=de-H,H>x&&D.sane){e.msg="invalid distance too far back",D.mode=dd;break e}if(Z=0,K=S,_===0){if(Z+=m-H,H<ue){ue-=H;do ne[o++]=S[Z++];while(--H);Z=o-de,K=ne}}else if(_<H){if(Z+=m+_-H,H-=_,H<ue){ue-=H;do ne[o++]=S[Z++];while(--H);if(Z=0,_<ue){H=_,ue-=H;do ne[o++]=S[Z++];while(--H);Z=o-de,K=ne}}}else if(Z+=_-H,H<ue){ue-=H;do ne[o++]=S[Z++];while(--H);Z=o-de,K=ne}for(;ue>2;)ne[o++]=K[Z++],ne[o++]=K[Z++],ne[o++]=K[Z++],ue-=3;ue&&(ne[o++]=K[Z++],ue>1&&(ne[o++]=K[Z++]))}else{Z=o-de;do ne[o++]=ne[Z++],ne[o++]=ne[Z++],ne[o++]=ne[Z++],ue-=3;while(ue>2);ue&&(ne[o++]=ne[Z++],ue>1&&(ne[o++]=ne[Z++]))}}else if((H&64)===0){B=T[(B&65535)+(y&(1<<H)-1)];continue r}else{e.msg="invalid distance code",D.mode=dd;break e}break}}else if((H&64)===0){B=L[(B&65535)+(y&(1<<H)-1)];continue t}else if(H&32){D.mode=yy;break e}else{e.msg="invalid literal/length code",D.mode=dd;break e}break}}while(s<a&&o<d);ue=E>>3,s-=ue,E-=ue<<3,y&=(1<<E)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<d?257+(d-o):257-(o-d),D.hold=y,D.bits=E};const bc=15,zp=852,$p=592,Wp=0,zh=1,Hp=2,wy=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_y=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ny=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ky=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Sy=(n,e,t,s,a,o,u,d)=>{const f=d.bits;let m=0,x=0,_=0,S=0,y=0,E=0,L=0,T=0,A=0,Y=0,B,H,ue,de,Z,K=null,G;const ne=new Uint16Array(bc+1),D=new Uint16Array(bc+1);let q=null,z,O,Q;for(m=0;m<=bc;m++)ne[m]=0;for(x=0;x<s;x++)ne[e[t+x]]++;for(y=f,S=bc;S>=1&&ne[S]===0;S--);if(y>S&&(y=S),S===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(_=1;_<S&&ne[_]===0;_++);for(y<_&&(y=_),T=1,m=1;m<=bc;m++)if(T<<=1,T-=ne[m],T<0)return-1;if(T>0&&(n===Wp||S!==1))return-1;for(D[1]=0,m=1;m<bc;m++)D[m+1]=D[m]+ne[m];for(x=0;x<s;x++)e[t+x]!==0&&(u[D[e[t+x]]++]=x);if(n===Wp?(K=q=u,G=20):n===zh?(K=wy,q=_y,G=257):(K=Ny,q=ky,G=0),Y=0,x=0,m=_,Z=o,E=y,L=0,ue=-1,A=1<<y,de=A-1,n===zh&&A>zp||n===Hp&&A>$p)return 1;for(;;){z=m-L,u[x]+1<G?(O=0,Q=u[x]):u[x]>=G?(O=q[u[x]-G],Q=K[u[x]-G]):(O=96,Q=0),B=1<<m-L,H=1<<E,_=H;do H-=B,a[Z+(Y>>L)+H]=z<<24|O<<16|Q|0;while(H!==0);for(B=1<<m-1;Y&B;)B>>=1;if(B!==0?(Y&=B-1,Y+=B):Y=0,x++,--ne[m]===0){if(m===S)break;m=e[t+u[x]]}if(m>y&&(Y&de)!==ue){for(L===0&&(L=y),Z+=_,E=m-L,T=1<<E;E+L<S&&(T-=ne[E+L],!(T<=0));)E++,T<<=1;if(A+=1<<E,n===zh&&A>zp||n===Hp&&A>$p)return 1;ue=Y&de,a[ue]=y<<24|E<<16|Z-o|0}}return Y!==0&&(a[Z+Y]=m-L<<24|64<<16|0),d.bits=y,0};var gu=Sy;const jy=0,Dg=1,Ig=2,{Z_FINISH:Vp,Z_BLOCK:Ay,Z_TREES:hd,Z_OK:Ol,Z_STREAM_END:Py,Z_NEED_DICT:Cy,Z_STREAM_ERROR:Wi,Z_DATA_ERROR:Og,Z_MEM_ERROR:Fg,Z_BUF_ERROR:Ey,Z_DEFLATED:Gp}=Eg,Md=16180,Yp=16181,Kp=16182,Jp=16183,Xp=16184,Qp=16185,Zp=16186,em=16187,tm=16188,rm=16189,Dd=16190,xo=16191,$h=16192,nm=16193,Wh=16194,sm=16195,im=16196,am=16197,om=16198,fd=16199,pd=16200,lm=16201,cm=16202,um=16203,dm=16204,hm=16205,Hh=16206,fm=16207,pm=16208,Kr=16209,Rg=16210,Mg=16211,Ly=852,Ty=592,Dy=15,Iy=Dy,mm=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Oy(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ml=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Md||e.mode>Mg?1:0},Ug=n=>{if(Ml(n))return Wi;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Md,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Ly),e.distcode=e.distdyn=new Int32Array(Ty),e.sane=1,e.back=-1,Ol},Bg=n=>{if(Ml(n))return Wi;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Ug(n)},qg=(n,e)=>{let t;if(Ml(n))return Wi;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Wi:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Bg(n))},zg=(n,e)=>{if(!n)return Wi;const t=new Oy;n.state=t,t.strm=n,t.window=null,t.mode=Md;const s=qg(n,e);return s!==Ol&&(n.state=null),s},Fy=n=>zg(n,Iy);let gm=!0,Vh,Gh;const Ry=n=>{if(gm){Vh=new Int32Array(512),Gh=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(gu(Dg,n.lens,0,288,Vh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;gu(Ig,n.lens,0,32,Gh,0,n.work,{bits:5}),gm=!1}n.lencode=Vh,n.lenbits=9,n.distcode=Gh,n.distbits=5},$g=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},My=(n,e)=>{let t,s,a,o,u,d,f,m,x,_,S,y,E,L,T=0,A,Y,B,H,ue,de,Z,K;const G=new Uint8Array(4);let ne,D;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ml(n)||!n.output||!n.input&&n.avail_in!==0)return Wi;t=n.state,t.mode===xo&&(t.mode=$h),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,m=t.hold,x=t.bits,_=d,S=f,K=Ol;e:for(;;)switch(t.mode){case Md:if(t.wrap===0){t.mode=$h;break}for(;x<16;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(t.wrap&2&&m===35615){t.wbits===0&&(t.wbits=15),t.check=0,G[0]=m&255,G[1]=m>>>8&255,t.check=za(t.check,G,2,0),m=0,x=0,t.mode=Yp;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((m&255)<<8)+(m>>8))%31){n.msg="incorrect header check",t.mode=Kr;break}if((m&15)!==Gp){n.msg="unknown compression method",t.mode=Kr;break}if(m>>>=4,x-=4,Z=(m&15)+8,t.wbits===0&&(t.wbits=Z),Z>15||Z>t.wbits){n.msg="invalid window size",t.mode=Kr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=m&512?rm:xo,m=0,x=0;break;case Yp:for(;x<16;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(t.flags=m,(t.flags&255)!==Gp){n.msg="unknown compression method",t.mode=Kr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Kr;break}t.head&&(t.head.text=m>>8&1),t.flags&512&&t.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,t.check=za(t.check,G,2,0)),m=0,x=0,t.mode=Kp;case Kp:for(;x<32;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}t.head&&(t.head.time=m),t.flags&512&&t.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,G[2]=m>>>16&255,G[3]=m>>>24&255,t.check=za(t.check,G,4,0)),m=0,x=0,t.mode=Jp;case Jp:for(;x<16;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}t.head&&(t.head.xflags=m&255,t.head.os=m>>8),t.flags&512&&t.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,t.check=za(t.check,G,2,0)),m=0,x=0,t.mode=Xp;case Xp:if(t.flags&1024){for(;x<16;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}t.length=m,t.head&&(t.head.extra_len=m),t.flags&512&&t.wrap&4&&(G[0]=m&255,G[1]=m>>>8&255,t.check=za(t.check,G,2,0)),m=0,x=0}else t.head&&(t.head.extra=null);t.mode=Qp;case Qp:if(t.flags&1024&&(y=t.length,y>d&&(y=d),y&&(t.head&&(Z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+y),Z)),t.flags&512&&t.wrap&4&&(t.check=za(t.check,s,y,o)),d-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=Zp;case Zp:if(t.flags&2048){if(d===0)break e;y=0;do Z=s[o+y++],t.head&&Z&&t.length<65536&&(t.head.name+=String.fromCharCode(Z));while(Z&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=za(t.check,s,y,o)),d-=y,o+=y,Z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=em;case em:if(t.flags&4096){if(d===0)break e;y=0;do Z=s[o+y++],t.head&&Z&&t.length<65536&&(t.head.comment+=String.fromCharCode(Z));while(Z&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=za(t.check,s,y,o)),d-=y,o+=y,Z)break e}else t.head&&(t.head.comment=null);t.mode=tm;case tm:if(t.flags&512){for(;x<16;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(t.wrap&4&&m!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Kr;break}m=0,x=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=xo;break;case rm:for(;x<32;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}n.adler=t.check=mm(m),m=0,x=0,t.mode=Dd;case Dd:if(t.havedict===0)return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=m,t.bits=x,Cy;n.adler=t.check=1,t.mode=xo;case xo:if(e===Ay||e===hd)break e;case $h:if(t.last){m>>>=x&7,x-=x&7,t.mode=Hh;break}for(;x<3;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}switch(t.last=m&1,m>>>=1,x-=1,m&3){case 0:t.mode=nm;break;case 1:if(Ry(t),t.mode=fd,e===hd){m>>>=2,x-=2;break e}break;case 2:t.mode=im;break;case 3:n.msg="invalid block type",t.mode=Kr}m>>>=2,x-=2;break;case nm:for(m>>>=x&7,x-=x&7;x<32;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if((m&65535)!==(m>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Kr;break}if(t.length=m&65535,m=0,x=0,t.mode=Wh,e===hd)break e;case Wh:t.mode=sm;case sm:if(y=t.length,y){if(y>d&&(y=d),y>f&&(y=f),y===0)break e;a.set(s.subarray(o,o+y),u),d-=y,o+=y,f-=y,u+=y,t.length-=y;break}t.mode=xo;break;case im:for(;x<14;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(t.nlen=(m&31)+257,m>>>=5,x-=5,t.ndist=(m&31)+1,m>>>=5,x-=5,t.ncode=(m&15)+4,m>>>=4,x-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Kr;break}t.have=0,t.mode=am;case am:for(;t.have<t.ncode;){for(;x<3;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}t.lens[q[t.have++]]=m&7,m>>>=3,x-=3}for(;t.have<19;)t.lens[q[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ne={bits:t.lenbits},K=gu(jy,t.lens,0,19,t.lencode,0,t.work,ne),t.lenbits=ne.bits,K){n.msg="invalid code lengths set",t.mode=Kr;break}t.have=0,t.mode=om;case om:for(;t.have<t.nlen+t.ndist;){for(;T=t.lencode[m&(1<<t.lenbits)-1],A=T>>>24,Y=T>>>16&255,B=T&65535,!(A<=x);){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(B<16)m>>>=A,x-=A,t.lens[t.have++]=B;else{if(B===16){for(D=A+2;x<D;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(m>>>=A,x-=A,t.have===0){n.msg="invalid bit length repeat",t.mode=Kr;break}Z=t.lens[t.have-1],y=3+(m&3),m>>>=2,x-=2}else if(B===17){for(D=A+3;x<D;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}m>>>=A,x-=A,Z=0,y=3+(m&7),m>>>=3,x-=3}else{for(D=A+7;x<D;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}m>>>=A,x-=A,Z=0,y=11+(m&127),m>>>=7,x-=7}if(t.have+y>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Kr;break}for(;y--;)t.lens[t.have++]=Z}}if(t.mode===Kr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Kr;break}if(t.lenbits=9,ne={bits:t.lenbits},K=gu(Dg,t.lens,0,t.nlen,t.lencode,0,t.work,ne),t.lenbits=ne.bits,K){n.msg="invalid literal/lengths set",t.mode=Kr;break}if(t.distbits=6,t.distcode=t.distdyn,ne={bits:t.distbits},K=gu(Ig,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ne),t.distbits=ne.bits,K){n.msg="invalid distances set",t.mode=Kr;break}if(t.mode=fd,e===hd)break e;case fd:t.mode=pd;case pd:if(d>=6&&f>=258){n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=m,t.bits=x,by(n,S),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,m=t.hold,x=t.bits,t.mode===xo&&(t.back=-1);break}for(t.back=0;T=t.lencode[m&(1<<t.lenbits)-1],A=T>>>24,Y=T>>>16&255,B=T&65535,!(A<=x);){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(Y&&(Y&240)===0){for(H=A,ue=Y,de=B;T=t.lencode[de+((m&(1<<H+ue)-1)>>H)],A=T>>>24,Y=T>>>16&255,B=T&65535,!(H+A<=x);){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}m>>>=H,x-=H,t.back+=H}if(m>>>=A,x-=A,t.back+=A,t.length=B,Y===0){t.mode=hm;break}if(Y&32){t.back=-1,t.mode=xo;break}if(Y&64){n.msg="invalid literal/length code",t.mode=Kr;break}t.extra=Y&15,t.mode=lm;case lm:if(t.extra){for(D=t.extra;x<D;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}t.length+=m&(1<<t.extra)-1,m>>>=t.extra,x-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=cm;case cm:for(;T=t.distcode[m&(1<<t.distbits)-1],A=T>>>24,Y=T>>>16&255,B=T&65535,!(A<=x);){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if((Y&240)===0){for(H=A,ue=Y,de=B;T=t.distcode[de+((m&(1<<H+ue)-1)>>H)],A=T>>>24,Y=T>>>16&255,B=T&65535,!(H+A<=x);){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}m>>>=H,x-=H,t.back+=H}if(m>>>=A,x-=A,t.back+=A,Y&64){n.msg="invalid distance code",t.mode=Kr;break}t.offset=B,t.extra=Y&15,t.mode=um;case um:if(t.extra){for(D=t.extra;x<D;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}t.offset+=m&(1<<t.extra)-1,m>>>=t.extra,x-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Kr;break}t.mode=dm;case dm:if(f===0)break e;if(y=S-f,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Kr;break}y>t.wnext?(y-=t.wnext,E=t.wsize-y):E=t.wnext-y,y>t.length&&(y=t.length),L=t.window}else L=a,E=u-t.offset,y=t.length;y>f&&(y=f),f-=y,t.length-=y;do a[u++]=L[E++];while(--y);t.length===0&&(t.mode=pd);break;case hm:if(f===0)break e;a[u++]=t.length,f--,t.mode=pd;break;case Hh:if(t.wrap){for(;x<32;){if(d===0)break e;d--,m|=s[o++]<<x,x+=8}if(S-=f,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?za(t.check,a,S,u-S):Pf(t.check,a,S,u-S)),S=f,t.wrap&4&&(t.flags?m:mm(m))!==t.check){n.msg="incorrect data check",t.mode=Kr;break}m=0,x=0}t.mode=fm;case fm:if(t.wrap&&t.flags){for(;x<32;){if(d===0)break e;d--,m+=s[o++]<<x,x+=8}if(t.wrap&4&&m!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Kr;break}m=0,x=0}t.mode=pm;case pm:K=Py;break e;case Kr:K=Og;break e;case Rg:return Fg;case Mg:default:return Wi}return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=m,t.bits=x,(t.wsize||S!==n.avail_out&&t.mode<Kr&&(t.mode<Hh||e!==Vp))&&$g(n,n.output,n.next_out,S-n.avail_out),_-=n.avail_in,S-=n.avail_out,n.total_in+=_,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?za(t.check,a,S,n.next_out-S):Pf(t.check,a,S,n.next_out-S)),n.data_type=t.bits+(t.last?64:0)+(t.mode===xo?128:0)+(t.mode===fd||t.mode===Wh?256:0),(_===0&&S===0||e===Vp)&&K===Ol&&(K=Ey),K},Uy=n=>{if(Ml(n))return Wi;let e=n.state;return e.window&&(e.window=null),n.state=null,Ol},By=(n,e)=>{if(Ml(n))return Wi;const t=n.state;return(t.wrap&2)===0?Wi:(t.head=e,e.done=!1,Ol)},qy=(n,e)=>{const t=e.length;let s,a,o;return Ml(n)||(s=n.state,s.wrap!==0&&s.mode!==Dd)?Wi:s.mode===Dd&&(a=1,a=Pf(a,e,t,0),a!==s.check)?Og:(o=$g(n,e,t,t),o?(s.mode=Rg,Fg):(s.havedict=1,Ol))};var zy=Bg,$y=qg,Wy=Ug,Hy=Fy,Vy=zg,Gy=My,Yy=Uy,Ky=By,Jy=qy,Xy="pako inflate (from Nodeca project)",bo={inflateReset:zy,inflateReset2:$y,inflateResetKeep:Wy,inflateInit:Hy,inflateInit2:Vy,inflate:Gy,inflateEnd:Yy,inflateGetHeader:Ky,inflateSetDictionary:Jy,inflateInfo:Xy};function Qy(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Zy=Qy;const Wg=Object.prototype.toString,{Z_NO_FLUSH:eb,Z_FINISH:tb,Z_OK:bu,Z_STREAM_END:Yh,Z_NEED_DICT:Kh,Z_STREAM_ERROR:rb,Z_DATA_ERROR:vm,Z_MEM_ERROR:nb}=Eg;function ku(n){this.options=Lg.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xy,this.strm.avail_out=0;let t=bo.inflateInit2(this.strm,e.windowBits);if(t!==bu)throw new Error(Cf[t]);if(this.header=new Zy,bo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ef.string2buf(e.dictionary):Wg.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=bo.inflateSetDictionary(this.strm,e.dictionary),t!==bu)))throw new Error(Cf[t])}ku.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?tb:eb,Wg.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=bo.inflate(t,u),o===Kh&&a&&(o=bo.inflateSetDictionary(t,a),o===bu?o=bo.inflate(t,u):o===vm&&(o=Kh));t.avail_in>0&&o===Yh&&t.state.wrap>0&&n[t.next_in]!==0;)bo.inflateReset(t),o=bo.inflate(t,u);switch(o){case rb:case vm:case Kh:case nb:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===Yh))if(this.options.to==="string"){let f=Ef.utf8border(t.output,t.next_out),m=t.next_out-f,x=Ef.buf2string(t.output,f);t.next_out=m,t.avail_out=s-m,m&&t.output.set(t.output.subarray(f,f+m),0),this.onData(x)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===bu&&d===0)){if(o===Yh)return o=bo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};ku.prototype.onData=function(n){this.chunks.push(n)};ku.prototype.onEnd=function(n){n===bu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Lg.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function sb(n,e){const t=new ku(e);if(t.push(n),t.err)throw t.msg||Cf[t.err];return t.result}var ib=ku,ab=sb,ob={Inflate:ib,inflate:ab};const{Inflate:lb,inflate:cb}=ob;var xm=lb,ub=cb;const Hg=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Hg[n]=e}const ym=4294967295;function db(n,e,t){let s=n;for(let a=0;a<t;a++)s=Hg[(s^e[a])&255]^s>>>8;return s}function hb(n,e){return(db(ym,n,e)^ym)>>>0}function bm(n,e,t){const s=n.readUint32(),a=hb(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Vg(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function Gg(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function Yg(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function Kg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function Jg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+fb(e[o-a],t[o],t[o-a])&255}}function fb(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function pb(n,e,t,s,a,o){switch(n){case 0:Vg(e,t,a);break;case 1:Gg(e,t,a,o);break;case 2:Yg(e,t,s,a);break;case 3:Kg(e,t,s,a,o);break;case 4:Jg(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const mb=new Uint16Array([255]),gb=new Uint8Array(mb.buffer),vb=gb[0]===255;function xb(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*a,f=new Uint8Array(s*t*d);let m=0;for(let x=0;x<7;x++){const _=u[x],S=Math.ceil((t-_.x)/_.xStep),y=Math.ceil((s-_.y)/_.yStep);if(S<=0||y<=0)continue;const E=S*d,L=new Uint8Array(E);for(let T=0;T<y;T++){const A=e[m++],Y=e.subarray(m,m+E);m+=E;const B=new Uint8Array(E);pb(A,Y,B,L,E,d),L.set(B);for(let H=0;H<S;H++){const ue=_.x+H*_.xStep,de=_.y+T*_.yStep;if(!(ue>=t||de>=s))for(let Z=0;Z<d;Z++)f[(de*t+ue)*d+Z]=B[H*d+Z]}}}if(o===16){const x=new Uint16Array(f.buffer);if(vb)for(let _=0;_<x.length;_++)x[_]=yb(x[_]);return x}else return f}function yb(n){return(n&255)<<8|n>>8&255}const bb=new Uint16Array([255]),wb=new Uint8Array(bb.buffer),_b=wb[0]===255,Nb=new Uint8Array(0);function wm(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,d=Math.ceil(o/8*a*t),f=new Uint8Array(s*d);let m=Nb,x=0,_,S;for(let y=0;y<s;y++){switch(_=e.subarray(x+1,x+1+d),S=f.subarray(y*d,(y+1)*d),e[x]){case 0:Vg(_,S,d);break;case 1:Gg(_,S,d,u);break;case 2:Yg(_,S,m,d);break;case 3:Kg(_,S,m,d,u);break;case 4:Jg(_,S,m,d,u);break;default:throw new Error(`Unsupported filter: ${e[x]}`)}m=S,x+=d+1}if(o===16){const y=new Uint16Array(f.buffer);if(_b)for(let E=0;E<y.length;E++)y[E]=kb(y[E]);return y}else return f}function kb(n){return(n&255)<<8|n>>8&255}const wd=Uint8Array.of(137,80,78,71,13,10,26,10);function _m(n){if(!Sb(n.readBytes(wd.length)))throw new Error("wrong PNG signature")}function Sb(n){if(n.length<wd.length)return!1;for(let e=0;e<wd.length;e++)if(n[e]!==wd[e])return!1;return!0}const jb="tEXt",Ab=0,Xg=new TextDecoder("latin1");function Pb(n){if(Eb(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const Cb=/^[\u0000-\u00FF]*$/;function Eb(n){if(!Cb.test(n))throw new Error("invalid latin1 text")}function Lb(n,e,t){const s=Qg(e);n[s]=Tb(e,t-s.length-1)}function Qg(n){for(n.mark();n.readByte()!==Ab;);const e=n.offset;n.reset();const t=Xg.decode(n.readBytes(e-n.offset-1));return n.skip(1),Pb(t),t}function Tb(n,e){return Xg.decode(n.readBytes(e))}const Si={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Jh={UNKNOWN:-1,DEFLATE:0},Nm={UNKNOWN:-1,ADAPTIVE:0},Xh={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},md={NONE:0,BACKGROUND:1,PREVIOUS:2},Qh={SOURCE:0,OVER:1};class Db extends Vf{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new xm,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Jh.UNKNOWN,this._filterMethod=Nm.UNKNOWN,this._interlaceMethod=Xh.UNKNOWN,this._colorType=Si.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(_m(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(_m(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case jb:Lb(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?bm(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?bm(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Ib(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case Si.GREYSCALE:s=1;break;case Si.TRUECOLOUR:s=3;break;case Si.INDEXED_COLOUR:s=1;break;case Si.GREYSCALE_ALPHA:s=2;break;case Si.TRUECOLOUR_ALPHA:s=4;break;case Si.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Jh.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Si.GREYSCALE:case Si.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Si.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Si.UNKNOWN:case Si.GREYSCALE_ALPHA:case Si.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=Qg(this),s=this.readUint8();if(s!==Jh.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:ub(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=wm({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case md.NONE:break;case md.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[u+d]=0}break;case md.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:d,frameIndex:f}};switch(t.blendOp){case Qh.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=a(o,u);for(let m=0;m<this._png.channels;m++)e.data[d+m]=t.data[f+m]}break;case Qh.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=a(o,u);for(let m=0;m<this._png.channels;m++){const x=t.data[f+this._png.channels-1]/s,_=m%(this._png.channels-1)===0?1:t.data[f+m],S=Math.floor(x*_+(1-x)*e.data[d+m]);e.data[d+m]+=S}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Nm.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Xh.NO_INTERLACE)this._png.data=wm({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Xh.ADAM7)this._png.data=xb({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:md.NONE,blendOp:Qh.SOURCE,data:e}),this._inflator=new xm,this._writingDataChunks=!1}}function Ib(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var km;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(km||(km={}));function Ob(n,e){return new Db(n,e).decode()}var Mt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Zh(){Mt.console&&typeof Mt.console.log=="function"&&Mt.console.log.apply(Mt.console,arguments)}var Er={log:Zh,warn:function(n){Mt.console&&(typeof Mt.console.warn=="function"?Mt.console.warn.apply(Mt.console,arguments):Zh.call(null,arguments))},error:function(n){Mt.console&&(typeof Mt.console.error=="function"?Mt.console.error.apply(Mt.console,arguments):Zh(n))}};function ef(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){Pl(s.response,e,t)},s.onerror=function(){Er.error("could not download file")},s.send()}function Sm(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Pl=Mt.saveAs||((typeof window>"u"?"undefined":xr(window))!=="object"||window!==Mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=Mt.URL||Mt.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?Sm(a.href)?ef(n,e,t):gd(a,a.target="_blank"):gd(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){gd(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Sm(n))ef(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){gd(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:xr(o)!=="object"&&(Er.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return ef(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(Mt.HTMLElement)||Mt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":xr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var x=d.result;x=u?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=x:location=x,s=null},d.readAsDataURL(n)}else{var f=Mt.URL||Mt.webkitURL,m=f.createObjectURL(n);s?s.location=m:location.href=m,s=null,setTimeout(function(){f.revokeObjectURL(m)},4e4)}});function Zg(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),f=this.g.toString(16),m=this.b.toString(16);return d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),m.length==1&&(m="0"+m),"#"+d+f+m}}var _d=Mt.atob.bind(Mt),jm=Mt.btoa.bind(Mt);function tf(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=ks(t,s,a,o,e[0],7,-680876936),o=ks(o,t,s,a,e[1],12,-389564586),a=ks(a,o,t,s,e[2],17,606105819),s=ks(s,a,o,t,e[3],22,-1044525330),t=ks(t,s,a,o,e[4],7,-176418897),o=ks(o,t,s,a,e[5],12,1200080426),a=ks(a,o,t,s,e[6],17,-1473231341),s=ks(s,a,o,t,e[7],22,-45705983),t=ks(t,s,a,o,e[8],7,1770035416),o=ks(o,t,s,a,e[9],12,-1958414417),a=ks(a,o,t,s,e[10],17,-42063),s=ks(s,a,o,t,e[11],22,-1990404162),t=ks(t,s,a,o,e[12],7,1804603682),o=ks(o,t,s,a,e[13],12,-40341101),a=ks(a,o,t,s,e[14],17,-1502002290),t=Ss(t,s=ks(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Ss(o,t,s,a,e[6],9,-1069501632),a=Ss(a,o,t,s,e[11],14,643717713),s=Ss(s,a,o,t,e[0],20,-373897302),t=Ss(t,s,a,o,e[5],5,-701558691),o=Ss(o,t,s,a,e[10],9,38016083),a=Ss(a,o,t,s,e[15],14,-660478335),s=Ss(s,a,o,t,e[4],20,-405537848),t=Ss(t,s,a,o,e[9],5,568446438),o=Ss(o,t,s,a,e[14],9,-1019803690),a=Ss(a,o,t,s,e[3],14,-187363961),s=Ss(s,a,o,t,e[8],20,1163531501),t=Ss(t,s,a,o,e[13],5,-1444681467),o=Ss(o,t,s,a,e[2],9,-51403784),a=Ss(a,o,t,s,e[7],14,1735328473),t=js(t,s=Ss(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=js(o,t,s,a,e[8],11,-2022574463),a=js(a,o,t,s,e[11],16,1839030562),s=js(s,a,o,t,e[14],23,-35309556),t=js(t,s,a,o,e[1],4,-1530992060),o=js(o,t,s,a,e[4],11,1272893353),a=js(a,o,t,s,e[7],16,-155497632),s=js(s,a,o,t,e[10],23,-1094730640),t=js(t,s,a,o,e[13],4,681279174),o=js(o,t,s,a,e[0],11,-358537222),a=js(a,o,t,s,e[3],16,-722521979),s=js(s,a,o,t,e[6],23,76029189),t=js(t,s,a,o,e[9],4,-640364487),o=js(o,t,s,a,e[12],11,-421815835),a=js(a,o,t,s,e[15],16,530742520),t=As(t,s=js(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=As(o,t,s,a,e[7],10,1126891415),a=As(a,o,t,s,e[14],15,-1416354905),s=As(s,a,o,t,e[5],21,-57434055),t=As(t,s,a,o,e[12],6,1700485571),o=As(o,t,s,a,e[3],10,-1894986606),a=As(a,o,t,s,e[10],15,-1051523),s=As(s,a,o,t,e[1],21,-2054922799),t=As(t,s,a,o,e[8],6,1873313359),o=As(o,t,s,a,e[15],10,-30611744),a=As(a,o,t,s,e[6],15,-1560198380),s=As(s,a,o,t,e[13],21,1309151649),t=As(t,s,a,o,e[4],6,-145523070),o=As(o,t,s,a,e[11],10,-1120210379),a=As(a,o,t,s,e[2],15,718787259),s=As(s,a,o,t,e[9],21,-343485551),n[0]=Qo(t,n[0]),n[1]=Qo(s,n[1]),n[2]=Qo(a,n[2]),n[3]=Qo(o,n[3])}function Ud(n,e,t,s,a,o){return e=Qo(Qo(e,n),Qo(s,o)),Qo(e<<a|e>>>32-a,t)}function ks(n,e,t,s,a,o,u){return Ud(e&t|~e&s,n,e,a,o,u)}function Ss(n,e,t,s,a,o,u){return Ud(e&s|t&~s,n,e,a,o,u)}function js(n,e,t,s,a,o,u){return Ud(e^t^s,n,e,a,o,u)}function As(n,e,t,s,a,o,u){return Ud(t^(e|~s),n,e,a,o,u)}function e1(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)tf(s,Fb(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(tf(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,tf(s,a),s}function Fb(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var Am="0123456789abcdef".split("");function Rb(n){for(var e="",t=0;t<4;t++)e+=Am[n>>8*t+4&15]+Am[n>>8*t&15];return e}function Mb(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Lf(n){return e1(n).map(Mb).join("")}var Ub=(function(n){for(var e=0;e<n.length;e++)n[e]=Rb(n[e]);return n.join("")})(e1("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qo(n,e){if(Ub){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Tf(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),d=[],f=0;f<256;f++)d[f]=f;var m=0;for(f=0;f<256;f++){var x=d[f];m=(m+x+u.charCodeAt(f))%256,d[f]=d[m],d[m]=x}t=n,s=d}else d=s;var _=e.length,S=0,y=0,E="";for(f=0;f<_;f++)y=(y+(x=d[S=(S+1)%256]))%256,d[S]=d[y],d[y]=x,u=d[(d[S]+d[y])%256],E+=String.fromCharCode(e.charCodeAt(f)^u);return E}var Pm={print:4,modify:8,copy:16,"annot-forms":32};function Sc(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(d){if(Pm.perm!==void 0)throw new Error("Invalid permission: "+d);a+=Pm[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Lf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Tf(this.encryptionKey,this.padding)}function jc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function Cm(n){if(xr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(d){Mt.console&&Er.error("jsPDF PubSub Error",d.message,d)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Id(n){if(!(this instanceof Id))return new Id(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function t1(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ll(n,e,t,s,a){if(!(this instanceof Ll))return new Ll(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,t1.call(this,s,a)}function Pc(n,e,t,s,a){if(!(this instanceof Pc))return new Pc(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,t1.call(this,s,a)}function wt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],d=1,f=16,m="S",x=null;xr(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(x=n.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),m=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var _=n.putOnlyUsedFonts||!1,S={},y={internal:{},__private__:{}};y.__private__.PubSub=Cm;var E="1.3",L=y.__private__.getPdfVersion=function(){return E};y.__private__.setPdfVersion=function(v){E=v};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return T};var A=y.__private__.getPageFormat=function(v){return T[v]};a=a||"a4";var Y="compat",B="advanced",H=Y;function ue(){this.saveGraphicsState(),ee(new _t(ft,0,0,-ft,0,C()*ft).toString()+" cm"),this.setFontSize(this.getFontSize()/ft),m="n",H=B}function de(){this.restoreGraphicsState(),m="S",H=Y}var Z=y.__private__.combineFontStyleAndFontWeight=function(v,k){if(v=="bold"&&k=="normal"||v=="bold"&&k==400||v=="normal"&&k=="italic"||v=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(v=k==400||k==="normal"?v==="italic"?"italic":"normal":k!=700&&k!=="bold"||v!=="normal"?(k==700?"bold":k)+""+v:"bold"),v};y.advancedAPI=function(v){var k=H===Y;return k&&ue.call(this),typeof v!="function"||(v(this),k&&de.call(this)),this},y.compatAPI=function(v){var k=H===B;return k&&de.call(this),typeof v!="function"||(v(this),k&&ue.call(this)),this},y.isAdvancedAPI=function(){return H===B};var K,G=function(v){if(H!==B)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ne=y.roundToPrecision=y.__private__.roundToPrecision=function(v,k){var F=e||k;if(isNaN(v)||isNaN(F))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(F).replace(/0+$/,"")};K=y.hpf=y.__private__.hpf=typeof f=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(v,f)}:f==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(v,16)};var D=y.f2=y.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return ne(v,2)},q=y.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return ne(v,3)},z=y.scale=y.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return H===Y?v*ft:H===B?v:void 0},O=function(v){return z((function(k){return H===Y?C()-k:H===B?k:void 0})(v))};y.__private__.setPrecision=y.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var Q,ae="00000000000000000000000000000000",se=y.__private__.getFileId=function(){return ae},M=y.__private__.setFileId=function(v){return ae=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Xr=new Sc(x.userPermissions,x.userPassword,x.ownerPassword,ae)),ae};y.setFileId=function(v){return M(v),this},y.getFileId=function(){return se()};var ce=y.__private__.convertDateToPDFDate=function(v){var k=v.getTimezoneOffset(),F=k<0?"+":"-",te=Math.floor(Math.abs(k/60)),fe=Math.abs(k%60),_e=[F,re(te),"'",re(fe),"'"].join("");return["D:",v.getFullYear(),re(v.getMonth()+1),re(v.getDate()),re(v.getHours()),re(v.getMinutes()),re(v.getSeconds()),_e].join("")},be=y.__private__.convertPDFDateToDate=function(v){var k=parseInt(v.substr(2,4),10),F=parseInt(v.substr(6,2),10)-1,te=parseInt(v.substr(8,2),10),fe=parseInt(v.substr(10,2),10),_e=parseInt(v.substr(12,2),10),je=parseInt(v.substr(14,2),10);return new Date(k,F,te,fe,_e,je,0)},X=y.__private__.setCreationDate=function(v){var k;if(v===void 0&&(v=new Date),v instanceof Date)k=ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=v}return Q=k},P=y.__private__.getCreationDate=function(v){var k=Q;return v==="jsDate"&&(k=be(Q)),k};y.setCreationDate=function(v){return X(v),this},y.getCreationDate=function(v){return P(v)};var W,re=y.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},oe=y.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},he=0,we=[],Ne=[],Ae=0,me=[],Ue=[],ze=!1,Ve=Ne;y.__private__.setCustomOutputDestination=function(v){ze=!0,Ve=v};var Xe=function(v){ze||(Ve=v)};y.__private__.resetCustomOutputDestination=function(){ze=!1,Ve=Ne};var ee=y.__private__.out=function(v){return v=v.toString(),Ae+=v.length+1,Ve.push(v),Ve},Ke=y.__private__.write=function(v){return ee(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Lt=y.__private__.getArrayBuffer=function(v){for(var k=v.length,F=new ArrayBuffer(k),te=new Uint8Array(F);k--;)te[k]=v.charCodeAt(k);return F},xt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return xt};var $e=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(v){return $e=H===B?v/ft:v,this};var ct,et=y.__private__.getFontSize=y.getFontSize=function(){return H===Y?$e:$e*ft},vt=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(v){return vt=v,this},y.__private__.getR2L=y.getR2L=function(){return vt};var mt,qt=y.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ct=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ct=v}else ct=parseInt(v,10)};y.__private__.getZoomMode=function(){return ct};var yt,It=y.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');mt=v};y.__private__.getPageMode=function(){return mt};var Yt=y.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');yt=v};y.__private__.getLayoutMode=function(){return yt},y.__private__.setDisplayMode=y.setDisplayMode=function(v,k,F){return qt(v),Yt(k),It(F),this};var Kt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(v){if(Object.keys(Kt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Kt[v]},y.__private__.getDocumentProperties=function(){return Kt},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(v){for(var k in Kt)Kt.hasOwnProperty(k)&&v[k]&&(Kt[k]=v[k]);return this},y.__private__.setDocumentProperty=function(v,k){if(Object.keys(Kt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Kt[v]=k};var ot,ft,it,Ar,Gt,zt={},Ut={},yr=[],bt={},ur={},kt={},Ot={},lr=null,Bt=0,St=[],Tt=new Cm(y),Ps=n.hotfixes||[],an={},Cs={},es=[],_t=function v(k,F,te,fe,_e,je){if(!(this instanceof v))return new v(k,F,te,fe,_e,je);isNaN(k)&&(k=1),isNaN(F)&&(F=0),isNaN(te)&&(te=0),isNaN(fe)&&(fe=1),isNaN(_e)&&(_e=0),isNaN(je)&&(je=0),this._matrix=[k,F,te,fe,_e,je]};Object.defineProperty(_t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(_t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(_t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(_t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(_t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(_t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(_t.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(_t.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(_t.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(_t.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(_t.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(_t.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(_t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_t.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(K).join(v)},_t.prototype.multiply=function(v){var k=v.sx*this.sx+v.shy*this.shx,F=v.sx*this.shy+v.shy*this.sy,te=v.shx*this.sx+v.sy*this.shx,fe=v.shx*this.shy+v.sy*this.sy,_e=v.tx*this.sx+v.ty*this.shx+this.tx,je=v.tx*this.shy+v.ty*this.sy+this.ty;return new _t(k,F,te,fe,_e,je)},_t.prototype.decompose=function(){var v=this.sx,k=this.shy,F=this.shx,te=this.sy,fe=this.tx,_e=this.ty,je=Math.sqrt(v*v+k*k),Me=(v/=je)*F+(k/=je)*te;F-=v*Me,te-=k*Me;var Re=Math.sqrt(F*F+te*te);return Me/=Re,v*(te/=Re)<k*(F/=Re)&&(v=-v,k=-k,Me=-Me,je=-je),{scale:new _t(je,0,0,Re,0,0),translate:new _t(1,0,0,1,fe,_e),rotate:new _t(v,k,-k,v,0,0),skew:new _t(1,0,Me,1,0,0)}},_t.prototype.toString=function(v){return this.join(" ")},_t.prototype.inversed=function(){var v=this.sx,k=this.shy,F=this.shx,te=this.sy,fe=this.tx,_e=this.ty,je=1/(v*te-k*F),Me=te*je,Re=-k*je,Ge=-F*je,Qe=v*je;return new _t(Me,Re,Ge,Qe,-Me*fe-Ge*_e,-Re*fe-Qe*_e)},_t.prototype.applyToPoint=function(v){var k=v.x*this.sx+v.y*this.shx+this.tx,F=v.x*this.shy+v.y*this.sy+this.ty;return new Os(k,F)},_t.prototype.applyToRectangle=function(v){var k=this.applyToPoint(v),F=this.applyToPoint(new Os(v.x+v.w,v.y+v.h));return new Ea(k.x,k.y,F.x-k.x,F.y-k.y)},_t.prototype.clone=function(){var v=this.sx,k=this.shy,F=this.shx,te=this.sy,fe=this.tx,_e=this.ty;return new _t(v,k,F,te,fe,_e)},y.Matrix=_t;var Mn=y.matrixMult=function(v,k){return k.multiply(v)},hs=new _t(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=hs;var mn=function(v,k){if(!ur[v]){var F=(k instanceof Ll?"Sh":"P")+(Object.keys(bt).length+1).toString(10);k.id=F,ur[v]=F,bt[F]=k,Tt.publish("addPattern",k)}};y.ShadingPattern=Ll,y.TilingPattern=Pc,y.addShadingPattern=function(v,k){return G("addShadingPattern()"),mn(v,k),this},y.beginTilingPattern=function(v){G("beginTilingPattern()"),vn(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},y.endTilingPattern=function(v,k){G("endTilingPattern()"),k.stream=Ue[W].join(`
`),mn(v,k),Tt.publish("endTilingPattern",k),es.pop().restore()};var ts,dr=y.__private__.newObject=function(){var v=Tr();return br(v,!0),v},Tr=y.__private__.newObjectDeferred=function(){return he++,we[he]=function(){return Ae},he},br=function(v,k){return k=typeof k=="boolean"&&k,we[v]=Ae,k&&ee(v+" 0 obj"),v},rs=y.__private__.newAdditionalObject=function(){var v={objId:Tr(),content:""};return me.push(v),v},Es=Tr(),Un=Tr(),Hs=y.__private__.decodeColorString=function(v){var k=v.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length!==5||k[4]!=="k"&&k[4]!=="K"||(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var F=parseFloat(k[0]);k=[F,F,F,"r"]}for(var te="#",fe=0;fe<3;fe++)te+=("0"+Math.floor(255*parseFloat(k[fe])).toString(16)).slice(-2);return te},Jr=y.__private__.encodeColorString=function(v){var k;typeof v=="string"&&(v={ch1:v});var F=v.ch1,te=v.ch2,fe=v.ch3,_e=v.ch4,je=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof F=="string"&&F.charAt(0)!=="#"){var Me=new Zg(F);if(Me.ok)F=Me.toHex();else if(!/^\d*\.?\d*$/.test(F))throw new Error('Invalid color "'+F+'" passed to jsPDF.encodeColorString.')}if(typeof F=="string"&&/^#[0-9A-Fa-f]{3}$/.test(F)&&(F="#"+F[1]+F[1]+F[2]+F[2]+F[3]+F[3]),typeof F=="string"&&/^#[0-9A-Fa-f]{6}$/.test(F)){var Re=parseInt(F.substr(1),16);F=Re>>16&255,te=Re>>8&255,fe=255&Re}if(te===void 0||_e===void 0&&F===te&&te===fe)k=typeof F=="string"?F+" "+je[0]:v.precision===2?D(F/255)+" "+je[0]:q(F/255)+" "+je[0];else if(_e===void 0||xr(_e)==="object"){if(_e&&!isNaN(_e.a)&&_e.a===0)return["1.","1.","1.",je[1]].join(" ");k=typeof F=="string"?[F,te,fe,je[1]].join(" "):v.precision===2?[D(F/255),D(te/255),D(fe/255),je[1]].join(" "):[q(F/255),q(te/255),q(fe/255),je[1]].join(" ")}else k=typeof F=="string"?[F,te,fe,_e,je[2]].join(" "):v.precision===2?[D(F),D(te),D(fe),D(_e),je[2]].join(" "):[q(F),q(te),q(fe),q(_e),je[2]].join(" ");return k},zr=y.__private__.getFilters=function(){return u},gn=y.__private__.putStream=function(v){var k=(v=v||{}).data||"",F=v.filters||zr(),te=v.alreadyAppliedFilters||[],fe=v.addLength1||!1,_e=k.length,je=v.objectId,Me=function(wr){return wr};if(x!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(Me=Xr.encryptor(je,0));var Re={};F===!0&&(F=["FlateEncode"]);var Ge=v.additionalKeyValues||[],Qe=(Re=wt.API.processDataByFilters!==void 0?wt.API.processDataByFilters(k,F):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(Re.data.length!==0&&(Ge.push({key:"Length",value:Re.data.length}),fe===!0&&Ge.push({key:"Length1",value:_e})),Qe.length!=0)if(Qe.split("/").length-1==1)Ge.push({key:"Filter",value:Qe});else{Ge.push({key:"Filter",value:"["+Qe+"]"});for(var Nt=0;Nt<Ge.length;Nt+=1)if(Ge[Nt].key==="DecodeParms"){for(var Ft=[],rr=0;rr<Re.reverseChain.split("/").length-1;rr+=1)Ft.push("null");Ft.push(Ge[Nt].value),Ge[Nt].value="["+Ft.join(" ")+"]"}}ee("<<");for(var nr=0;nr<Ge.length;nr++)ee("/"+Ge[nr].key+" "+Ge[nr].value);ee(">>"),Re.data.length!==0&&(ee("stream"),ee(Me(Re.data)),ee("endstream"))},oi=y.__private__.putPage=function(v){var k=v.number,F=v.data,te=v.objId,fe=v.contentsObjId;br(te,!0),ee("<</Type /Page"),ee("/Parent "+v.rootDictionaryObjId+" 0 R"),ee("/Resources "+v.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(K(v.mediaBox.bottomLeftX))+" "+parseFloat(K(v.mediaBox.bottomLeftY))+" "+K(v.mediaBox.topRightX)+" "+K(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&ee("/CropBox ["+K(v.cropBox.bottomLeftX)+" "+K(v.cropBox.bottomLeftY)+" "+K(v.cropBox.topRightX)+" "+K(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&ee("/BleedBox ["+K(v.bleedBox.bottomLeftX)+" "+K(v.bleedBox.bottomLeftY)+" "+K(v.bleedBox.topRightX)+" "+K(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&ee("/TrimBox ["+K(v.trimBox.bottomLeftX)+" "+K(v.trimBox.bottomLeftY)+" "+K(v.trimBox.topRightX)+" "+K(v.trimBox.topRightY)+"]"),v.artBox!==null&&ee("/ArtBox ["+K(v.artBox.bottomLeftX)+" "+K(v.artBox.bottomLeftY)+" "+K(v.artBox.topRightX)+" "+K(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&ee("/UserUnit "+v.userUnit),Tt.publish("putPage",{objId:te,pageContext:St[k],pageNumber:k,page:F}),ee("/Contents "+fe+" 0 R"),ee(">>"),ee("endobj");var _e=F.join(`
`);return H===B&&(_e+=`
Q`),br(fe,!0),gn({data:_e,filters:zr(),objectId:fe}),ee("endobj"),te},ns=y.__private__.putPages=function(){var v,k,F=[];for(v=1;v<=Bt;v++)St[v].objId=Tr(),St[v].contentsObjId=Tr();for(v=1;v<=Bt;v++)F.push(oi({number:v,data:Ue[v],objId:St[v].objId,contentsObjId:St[v].contentsObjId,mediaBox:St[v].mediaBox,cropBox:St[v].cropBox,bleedBox:St[v].bleedBox,trimBox:St[v].trimBox,artBox:St[v].artBox,userUnit:St[v].userUnit,rootDictionaryObjId:Es,resourceDictionaryObjId:Un}));br(Es,!0),ee("<</Type /Pages");var te="/Kids [";for(k=0;k<Bt;k++)te+=F[k]+" 0 R ";ee(te+"]"),ee("/Count "+Bt),ee(">>"),ee("endobj"),Tt.publish("postPutPages")},Vs=function(v){Tt.publish("putFont",{font:v,out:ee,newObject:dr,putStream:gn}),v.isAlreadyPutted!==!0&&(v.objectNumber=dr(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+jc(v.postScriptName)),ee("/Subtype /Type1"),typeof v.encoding=="string"&&ee("/Encoding /"+v.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},li=function(v){v.objectNumber=dr();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[K(v.x),K(v.y),K(v.x+v.width),K(v.y+v.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var F=v.pages[1].join(`
`);gn({data:F,additionalKeyValues:k,objectId:v.objectNumber}),ee("endobj")},Hi=function(v,k){k||(k=21);var F=dr(),te=(function(je,Me){var Re,Ge=[],Qe=1/(Me-1);for(Re=0;Re<1;Re+=Qe)Ge.push(Re);if(Ge.push(1),je[0].offset!=0){var Nt={offset:0,color:je[0].color};je.unshift(Nt)}if(je[je.length-1].offset!=1){var Ft={offset:1,color:je[je.length-1].color};je.push(Ft)}for(var rr="",nr=0,wr=0;wr<Ge.length;wr++){for(Re=Ge[wr];Re>je[nr+1].offset;)nr++;var _r=je[nr].offset,Qr=(Re-_r)/(je[nr+1].offset-_r),Js=je[nr].color,Jt=je[nr+1].color;rr+=oe(Math.round((1-Qr)*Js[0]+Qr*Jt[0]).toString(16))+oe(Math.round((1-Qr)*Js[1]+Qr*Jt[1]).toString(16))+oe(Math.round((1-Qr)*Js[2]+Qr*Jt[2]).toString(16))}return rr.trim()})(v.colors,k),fe=[];fe.push({key:"FunctionType",value:"0"}),fe.push({key:"Domain",value:"[0.0 1.0]"}),fe.push({key:"Size",value:"["+k+"]"}),fe.push({key:"BitsPerSample",value:"8"}),fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gn({data:te,additionalKeyValues:fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:F}),ee("endobj"),v.objectNumber=dr(),ee("<< /ShadingType "+v.type),ee("/ColorSpace /DeviceRGB");var _e="/Coords ["+K(parseFloat(v.coords[0]))+" "+K(parseFloat(v.coords[1]))+" ";v.type===2?_e+=K(parseFloat(v.coords[2]))+" "+K(parseFloat(v.coords[3])):_e+=K(parseFloat(v.coords[2]))+" "+K(parseFloat(v.coords[3]))+" "+K(parseFloat(v.coords[4]))+" "+K(parseFloat(v.coords[5])),ee(_e+="]"),v.matrix&&ee("/Matrix ["+v.matrix.toString()+"]"),ee("/Function "+F+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Ci=function(v,k){var F=Tr(),te=dr();k.push({resourcesOid:F,objectOid:te}),v.objectNumber=te;var fe=[];fe.push({key:"Type",value:"/Pattern"}),fe.push({key:"PatternType",value:"1"}),fe.push({key:"PaintType",value:"1"}),fe.push({key:"TilingType",value:"1"}),fe.push({key:"BBox",value:"["+v.boundingBox.map(K).join(" ")+"]"}),fe.push({key:"XStep",value:K(v.xStep)}),fe.push({key:"YStep",value:K(v.yStep)}),fe.push({key:"Resources",value:F+" 0 R"}),v.matrix&&fe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),gn({data:v.stream,additionalKeyValues:fe,objectId:v.objectNumber}),ee("endobj")},Bl=function(v){for(var k in v.objectNumber=dr(),ee("<<"),v)switch(k){case"opacity":ee("/ca "+D(v[k]));break;case"stroke-opacity":ee("/CA "+D(v[k]))}ee(">>"),ee("endobj")},fr=function(v){br(v.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var k in ee("/Font <<"),zt)zt.hasOwnProperty(k)&&(_===!1||_===!0&&S.hasOwnProperty(k))&&ee("/"+k+" "+zt[k].objectNumber+" 0 R");ee(">>")})(),(function(){if(Object.keys(bt).length>0){for(var k in ee("/Shading <<"),bt)bt.hasOwnProperty(k)&&bt[k]instanceof Ll&&bt[k].objectNumber>=0&&ee("/"+k+" "+bt[k].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),ee(">>")}})(),(function(k){if(Object.keys(bt).length>0){for(var F in ee("/Pattern <<"),bt)bt.hasOwnProperty(F)&&bt[F]instanceof y.TilingPattern&&bt[F].objectNumber>=0&&bt[F].objectNumber<k&&ee("/"+F+" "+bt[F].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),ee(">>")}})(v.objectOid),(function(){if(Object.keys(kt).length>0){var k;for(k in ee("/ExtGState <<"),kt)kt.hasOwnProperty(k)&&kt[k].objectNumber>=0&&ee("/"+k+" "+kt[k].objectNumber+" 0 R");Tt.publish("putGStateDict"),ee(">>")}})(),(function(){for(var k in ee("/XObject <<"),an)an.hasOwnProperty(k)&&an[k].objectNumber>=0&&ee("/"+k+" "+an[k].objectNumber+" 0 R");Tt.publish("putXobjectDict"),ee(">>")})(),ee(">>"),ee("endobj")},Bn=function(v){Ut[v.fontName]=Ut[v.fontName]||{},Ut[v.fontName][v.fontStyle]=v.id},Ei=function(v,k,F,te,fe){var _e={id:"F"+(Object.keys(zt).length+1).toString(10),postScriptName:v,fontName:k,fontStyle:F,encoding:te,isStandardFont:fe||!1,metadata:{}};return Tt.publish("addFont",{font:_e,instance:this}),zt[_e.id]=_e,Bn(_e),_e.id},ss=y.__private__.pdfEscape=y.pdfEscape=function(v,k){return(function(F,te){var fe,_e,je,Me,Re,Ge,Qe,Nt,Ft;if(je=(te=te||{}).sourceEncoding||"Unicode",Re=te.outputEncoding,(te.autoencode||Re)&&zt[ot].metadata&&zt[ot].metadata[je]&&zt[ot].metadata[je].encoding&&(Me=zt[ot].metadata[je].encoding,!Re&&zt[ot].encoding&&(Re=zt[ot].encoding),!Re&&Me.codePages&&(Re=Me.codePages[0]),typeof Re=="string"&&(Re=Me[Re]),Re)){for(Qe=!1,Ge=[],fe=0,_e=F.length;fe<_e;fe++)(Nt=Re[F.charCodeAt(fe)])?Ge.push(String.fromCharCode(Nt)):Ge.push(F[fe]),Ge[fe].charCodeAt(0)>>8&&(Qe=!0);F=Ge.join("")}for(fe=F.length;Qe===void 0&&fe!==0;)F.charCodeAt(fe-1)>>8&&(Qe=!0),fe--;if(!Qe)return F;for(Ge=te.noBOM?[]:[254,255],fe=0,_e=F.length;fe<_e;fe++){if((Ft=(Nt=F.charCodeAt(fe))>>8)>>8)throw new Error("Character at position "+fe+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(Ft),Ge.push(Nt-(Ft<<8))}return String.fromCharCode.apply(void 0,Ge)})(v,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ls=y.__private__.beginPage=function(v){Ue[++Bt]=[],St[Bt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},fs(Bt),Xe(Ue[W])},Ga=function(v,k){var F,te,fe;switch(t=k||t,typeof v=="string"&&(F=A(v.toLowerCase()),Array.isArray(F)&&(te=F[0],fe=F[1])),Array.isArray(v)&&(te=v[0]*ft,fe=v[1]*ft),isNaN(te)&&(te=a[0],fe=a[1]),(te>14400||fe>14400)&&(Er.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),fe=Math.min(14400,fe)),a=[te,fe],t.substr(0,1)){case"l":fe>te&&(a=[fe,te]);break;case"p":te>fe&&(a=[fe,te])}Ls(a),jt(ms),ee(Xi),Pa!==0&&ee(Pa+" J"),Ja!==0&&ee(Ja+" j"),Tt.publish("addPage",{pageNumber:Bt})},_a=function(v){v>0&&v<=Bt&&(Ue.splice(v,1),St.splice(v,1),Bt--,W>Bt&&(W=Bt),this.setPage(W))},fs=function(v){v>0&&v<=Bt&&(W=v)},qn=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ue.length-1},ci=function(v,k,F){var te,fe=void 0;return F=F||{},v=v!==void 0?v:zt[ot].fontName,k=k!==void 0?k:zt[ot].fontStyle,te=v.toLowerCase(),Ut[te]!==void 0&&Ut[te][k]!==void 0?fe=Ut[te][k]:Ut[v]!==void 0&&Ut[v][k]!==void 0?fe=Ut[v][k]:F.disableWarning===!1&&Er.warn("Unable to look up font label for font '"+v+"', '"+k+"'. Refer to getFontList() for available fonts."),fe||F.noFallback||(fe=Ut.times[k])==null&&(fe=Ut.times.normal),fe},Rr=y.__private__.putInfo=function(){var v=dr(),k=function(te){return te};for(var F in x!==null&&(k=Xr.encryptor(v,0)),ee("<<"),ee("/Producer ("+ss(k("jsPDF "+wt.version))+")"),Kt)Kt.hasOwnProperty(F)&&Kt[F]&&ee("/"+F.substr(0,1).toUpperCase()+F.substr(1)+" ("+ss(k(Kt[F]))+")");ee("/CreationDate ("+ss(k(Q))+")"),ee(">>"),ee("endobj")},Vi=y.__private__.putCatalog=function(v){var k=(v=v||{}).rootDictionaryObjId||Es;switch(dr(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+k+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var F=""+ct;F.substr(F.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+D(ct)+"]")}switch(yt||(yt="continuous"),yt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}mt&&ee("/PageMode /"+mt),Tt.publish("putCatalog"),ee(">>"),ee("endobj")},Na=y.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(he+1)),ee("/Root "+he+" 0 R"),ee("/Info "+(he-1)+" 0 R"),x!==null&&ee("/Encrypt "+Xr.oid+" 0 R"),ee("/ID [ <"+ae+"> <"+ae+"> ]"),ee(">>")},Mr=y.__private__.putHeader=function(){ee("%PDF-"+E),ee("%")},Gi=y.__private__.putXRef=function(){var v="0000000000";ee("xref"),ee("0 "+(he+1)),ee("0000000000 65535 f ");for(var k=1;k<=he;k++)typeof we[k]=="function"?ee((v+we[k]()).slice(-10)+" 00000 n "):we[k]!==void 0?ee((v+we[k]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},zn=y.__private__.buildDocument=function(){var v;he=0,Ae=0,Ne=[],we=[],me=[],Es=Tr(),Un=Tr(),Xe(Ne),Tt.publish("buildDocument"),Mr(),ns(),(function(){Tt.publish("putAdditionalObjects");for(var F=0;F<me.length;F++){var te=me[F];br(te.objId,!0),ee(te.content),ee("endobj")}Tt.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var F in zt)zt.hasOwnProperty(F)&&(_===!1||_===!0&&S.hasOwnProperty(F))&&Vs(zt[F])})(),(function(){var F;for(F in kt)kt.hasOwnProperty(F)&&Bl(kt[F])})(),(function(){for(var F in an)an.hasOwnProperty(F)&&li(an[F])})(),(function(F){var te;for(te in bt)bt.hasOwnProperty(te)&&(bt[te]instanceof Ll?Hi(bt[te]):bt[te]instanceof Pc&&Ci(bt[te],F))})(v),Tt.publish("putResources"),v.forEach(fr),fr({resourcesOid:Un,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources"),x!==null&&(Xr.oid=dr(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Xr.v),ee("/R "+Xr.r),ee("/U <"+Xr.toHexString(Xr.U)+">"),ee("/O <"+Xr.toHexString(Xr.O)+">"),ee("/P "+Xr.P),ee(">>"),ee("endobj")),Rr(),Vi();var k=Ae;return Gi(),Na(),ee("startxref"),ee(""+k),ee("%%EOF"),Xe(Ue[W]),Ne.join(`
`)},Ts=y.__private__.getBlob=function(v){return new Blob([Lt(v)],{type:"application/pdf"})},Yi=y.output=y.__private__.output=(ts=function(v,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",v){case void 0:return zn();case"save":y.save(k.filename);break;case"arraybuffer":return Lt(zn());case"blob":return Ts(zn());case"bloburi":case"bloburl":if(Mt.URL!==void 0&&typeof Mt.URL.createObjectURL=="function")return Mt.URL&&Mt.URL.createObjectURL(Ts(zn()))||void 0;Er.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var F="",te=zn();try{F=jm(te)}catch{F=jm(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+k.filename+";base64,"+F;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(fe=k.pdfObjectUrl,_e="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+fe+'"'+_e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",Me=Mt.open();return Me!==null&&Me.document.write(je),Me}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',Ge=Mt.open();if(Ge!==null){Ge.document.write(Re);var Qe=this;Ge.document.documentElement.querySelector("#pdfViewer").onload=function(){Ge.document.title=k.filename,Ge.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qe.output("bloburl"))}}return Ge}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',Ft=Mt.open();if(Ft!==null&&(Ft.document.write(Nt),Ft.document.title=k.filename),Ft||typeof safari>"u")return Ft;break;case"datauri":case"dataurl":return Mt.document.location.href=this.output("datauristring",k);default:return null}},ts.foo=function(){try{return ts.apply(this,arguments)}catch(F){var v=F.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var k="Error in function "+v.split(`
`)[0].split("<")[0]+": "+F.message;if(!Mt.console)throw new Error(k);Mt.console.error(k,F),Mt.alert&&alert(k)}},ts.foo.bar=ts,ts.foo),Ds=function(v){return Array.isArray(Ps)===!0&&Ps.indexOf(v)>-1};switch(s){case"pt":ft=1;break;case"mm":ft=72/25.4;break;case"cm":ft=72/2.54;break;case"in":ft=72;break;case"px":ft=Ds("px_scaling")==1?.75:96/72;break;case"pc":case"em":ft=12;break;case"ex":ft=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);ft=s}var Xr=null;X(),M();var $n=y.__private__.getPageInfo=y.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:St[v].objId,pageNumber:v,pageContext:St[v]}},ka=y.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in St)if(St[k].objId===v)break;return $n(k)},Sa=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:St[W].objId,pageNumber:W,pageContext:St[W]}};y.addPage=function(){return Ga.apply(this,arguments),this},y.setPage=function(){return fs.apply(this,arguments),Xe.call(this,Ue[W]),this},y.insertPage=function(v){return this.addPage(),this.movePage(W,v),this},y.movePage=function(v,k){var F,te;if(v>k){F=Ue[v],te=St[v];for(var fe=v;fe>k;fe--)Ue[fe]=Ue[fe-1],St[fe]=St[fe-1];Ue[k]=F,St[k]=te,this.setPage(k)}else if(v<k){F=Ue[v],te=St[v];for(var _e=v;_e<k;_e++)Ue[_e]=Ue[_e+1],St[_e]=St[_e+1];Ue[k]=F,St[k]=te,this.setPage(k)}return this},y.deletePage=function(){return _a.apply(this,arguments),this},y.__private__.text=y.text=function(v,k,F,te,fe){var _e,je,Me,Re,Ge,Qe,Nt,Ft,rr,nr=(te=te||{}).scope||this;if(typeof v=="number"&&typeof k=="number"&&(typeof F=="string"||Array.isArray(F))){var wr=F;F=k,k=v,v=wr}if(arguments[3]instanceof _t==0?(Me=arguments[4],Re=arguments[5],xr(Nt=arguments[3])==="object"&&Nt!==null||(typeof Me=="string"&&(Re=Me,Me=null),typeof Nt=="string"&&(Re=Nt,Nt=null),typeof Nt=="number"&&(Me=Nt,Nt=null),te={flags:Nt,angle:Me,align:Re})):(G("The transform parameter of text() with a Matrix value"),rr=fe),isNaN(k)||isNaN(F)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return nr;var _r,Qr="",Js=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:Hn,Jt=nr.internal.scaleFactor;function At(sr){return sr=sr.split("	").join(Array(te.TabLen||9).join(" ")),ss(sr,Nt)}function pr(sr){for(var mr,Hr=sr.concat(),cn=[],xi=Hr.length;xi--;)typeof(mr=Hr.shift())=="string"?cn.push(mr):Array.isArray(sr)&&(mr.length===1||mr[1]===void 0&&mr[2]===void 0)?cn.push(mr[0]):cn.push([mr[0],mr[1],mr[2]]);return cn}function $r(sr,mr){var Hr;if(typeof sr=="string")Hr=mr(sr)[0];else if(Array.isArray(sr)){for(var cn,xi,il=sr.concat(),Ao=[],aa=il.length;aa--;)typeof(cn=il.shift())=="string"?Ao.push(mr(cn)[0]):Array.isArray(cn)&&typeof cn[0]=="string"&&(xi=mr(cn[0],cn[1],cn[2]),Ao.push([xi[0],xi[1],xi[2]]));Hr=Ao}return Hr}var Tn=!1,Sn=!0;if(typeof v=="string")Tn=!0;else if(Array.isArray(v)){var ln=v.concat();je=[];for(var Rs,Dn=ln.length;Dn--;)(typeof(Rs=ln.shift())!="string"||Array.isArray(Rs)&&typeof Rs[0]!="string")&&(Sn=!1);Tn=Sn}if(Tn===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Qa=$e/nr.internal.scaleFactor,Za=Qa*(Js-1);switch(te.baseline){case"bottom":F-=Za;break;case"top":F+=Qa-Za;break;case"hanging":F+=Qa-2*Za;break;case"middle":F+=Qa/2-Za}if((Qe=te.maxWidth||0)>0&&(typeof v=="string"?v=nr.splitTextToSize(v,Qe):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(sr,mr){return sr.concat(nr.splitTextToSize(mr,Qe))},[]))),_e={text:v,x:k,y:F,options:te,mutex:{pdfEscape:ss,activeFontKey:ot,fonts:zt,activeFontSize:$e}},Tt.publish("preProcessText",_e),v=_e.text,Me=(te=_e.options).angle,rr instanceof _t==0&&Me&&typeof Me=="number"){Me*=Math.PI/180,te.rotationDirection===0&&(Me=-Me),H===B&&(Me=-Me);var nl=Math.cos(Me),sl=Math.sin(Me);rr=new _t(nl,sl,-sl,nl,0,0)}else Me&&Me instanceof _t&&(rr=Me);H!==B||rr||(rr=hs),(Ge=te.charSpace||kn)!==void 0&&(Qr+=K(z(Ge))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ft=te.horizontalScale)!==void 0&&(Qr+=K(100*Ft)+` Tz
`),te.lang;var os=-1,gi=te.renderingMode!==void 0?te.renderingMode:te.stroke,Ti=nr.internal.getCurrentPageInfo().pageContext;switch(gi){case 0:case!1:case"fill":os=0;break;case 1:case!0:case"stroke":os=1;break;case 2:case"fillThenStroke":os=2;break;case 3:case"invisible":os=3;break;case 4:case"fillAndAddForClipping":os=4;break;case 5:case"strokeAndAddPathForClipping":os=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":os=6;break;case 7:case"addToPathForClipping":os=7}var ql=Ti.usedRenderingMode!==void 0?Ti.usedRenderingMode:-1;os!==-1?Qr+=os+` Tr
`:ql!==-1&&(Qr+=`0 Tr
`),os!==-1&&(Ti.usedRenderingMode=os),Re=te.align||"left";var Ms,La=$e*Js,No=nr.internal.pageSize.getWidth(),ko=zt[ot];Ge=te.charSpace||kn,Qe=te.maxWidth||0,Nt=Object.assign({autoencode:!0,noBOM:!0},te.flags);var ra=[],Xs=function(sr){return nr.getStringUnitWidth(sr,{font:ko,charSpace:Ge,fontSize:$e,doKerning:!1})*$e/Jt};if(Object.prototype.toString.call(v)==="[object Array]"){var Us;je=pr(v),Re!=="left"&&(Ms=je.map(Xs));var Bs,Ta=0;if(Re==="right"){k-=Ms[0],v=[],Dn=je.length;for(var Di=0;Di<Dn;Di++)Di===0?(Bs=is(k),Us=mi(F)):(Bs=z(Ta-Ms[Di]),Us=-La),v.push([je[Di],Bs,Us]),Ta=Ms[Di]}else if(Re==="center"){k-=Ms[0]/2,v=[],Dn=je.length;for(var na=0;na<Dn;na++)na===0?(Bs=is(k),Us=mi(F)):(Bs=z((Ta-Ms[na])/2),Us=-La),v.push([je[na],Bs,Us]),Ta=Ms[na]}else if(Re==="left"){v=[],Dn=je.length;for(var sa=0;sa<Dn;sa++)v.push(je[sa])}else if(Re==="justify"&&ko.encoding==="Identity-H"){v=[],Dn=je.length,Qe=Qe!==0?Qe:No;for(var Ii=0,Zr=0;Zr<Dn;Zr++)if(Us=Zr===0?mi(F):-La,Bs=Zr===0?is(k):Ii,Zr<Dn-1){var eo=z((Qe-Ms[Zr])/(je[Zr].split(" ").length-1)),Oi=je[Zr].split(" ");v.push([Oi[0]+" ",Bs,Us]),Ii=0;for(var vi=1;vi<Oi.length;vi++){var to=(Xs(Oi[vi-1]+" "+Oi[vi])-Xs(Oi[vi]))*Jt+eo;vi==Oi.length-1?v.push([Oi[vi],to,0]):v.push([Oi[vi]+" ",to,0]),Ii-=to}}else v.push([je[Zr],Bs,Us]);v.push(["",Ii,0])}else{if(Re!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Dn=je.length,Qe=Qe!==0?Qe:No,Zr=0;Zr<Dn;Zr++){Us=Zr===0?mi(F):-La,Bs=Zr===0?is(k):0;var ro=je[Zr].split(" ").length-1,So=ro>0?(Qe-Ms[Zr])/ro:0;Zr<Dn-1?ra.push(K(z(So))):ra.push(0),v.push([je[Zr],Bs,Us])}}}(typeof te.R2L=="boolean"?te.R2L:vt)===!0&&(v=$r(v,function(sr,mr,Hr){return[sr.split("").reverse().join(""),mr,Hr]})),_e={text:v,x:k,y:F,options:te,mutex:{pdfEscape:ss,activeFontKey:ot,fonts:zt,activeFontSize:$e}},Tt.publish("postProcessText",_e),v=_e.text,_r=_e.mutex.isHex||!1;var jo=zt[ot].encoding;jo!=="WinAnsiEncoding"&&jo!=="StandardEncoding"||(v=$r(v,function(sr,mr,Hr){return[At(sr),mr,Hr]})),je=pr(v),v=[];for(var ia,Da,Ia,no=Array.isArray(je[0])?1:0,Oa="",so=function(sr,mr,Hr){var cn="";return Hr instanceof _t?(Hr=typeof te.angle=="number"?Mn(Hr,new _t(1,0,0,1,sr,mr)):Mn(new _t(1,0,0,1,sr,mr),Hr),H===B&&(Hr=Mn(new _t(1,0,0,-1,0,0),Hr)),cn=Hr.join(" ")+` Tm
`):cn=K(sr)+" "+K(mr)+` Td
`,cn},Wr=0;Wr<je.length;Wr++){switch(Oa="",no){case 1:Ia=(_r?"<":"(")+je[Wr][0]+(_r?">":")"),ia=parseFloat(je[Wr][1]),Da=parseFloat(je[Wr][2]);break;case 0:Ia=(_r?"<":"(")+je[Wr]+(_r?">":")"),ia=is(k),Da=mi(F)}ra!==void 0&&ra[Wr]!==void 0&&(Oa=ra[Wr]+` Tw
`),Wr===0?v.push(Oa+so(ia,Da,rr)+Ia):no===0?v.push(Oa+Ia):no===1&&v.push(Oa+so(ia,Da,rr)+Ia)}v=no===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var gs=`BT
/`;return gs+=ot+" "+$e+` Tf
`,gs+=K($e*Js)+` TL
`,gs+=Is+`
`,gs+=Qr,gs+=v,ee(gs+="ET"),S[ot]=!0,nr};var ui=y.__private__.clip=y.clip=function(v){return ee(v==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return ui("evenodd")},y.__private__.discardPath=y.discardPath=function(){return ee("n"),this};var ps=y.__private__.isValidStyle=function(v){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(k=!0),k};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(v){return ps(v)&&(m=v),this};var Ki=y.__private__.getStyle=y.getStyle=function(v){var k=m;switch(v){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=v}return k},er=y.close=function(){return ee("h"),this};y.stroke=function(){return ee("S"),this},y.fill=function(v){return di("f",v),this},y.fillEvenOdd=function(v){return di("f*",v),this},y.fillStroke=function(v){return di("B",v),this},y.fillStrokeEvenOdd=function(v){return di("B*",v),this};var di=function(v,k){xr(k)==="object"?fi(k,v):ee(v)},hi=function(v){v===null||H===B&&v===void 0||(v=Ki(v),ee(v))};function ja(v,k,F,te,fe){var _e=new Pc(k||this.boundingBox,F||this.xStep,te||this.yStep,this.gState,fe||this.matrix);_e.stream=this.stream;var je=v+"$$"+this.cloneIndex+++"$$";return mn(je,_e),_e}var fi=function(v,k){var F=ur[v.key],te=bt[F];if(te instanceof Ll)ee("q"),ee(wo(k)),te.gState&&y.setGState(te.gState),ee(v.matrix.toString()+" cm"),ee("/"+F+" sh"),ee("Q");else if(te instanceof Pc){var fe=new _t(1,0,0,-1,0,C());v.matrix&&(fe=fe.multiply(v.matrix||hs),F=ja.call(te,v.key,v.boundingBox,v.xStep,v.yStep,fe).id),ee("q"),ee("/Pattern cs"),ee("/"+F+" scn"),te.gState&&y.setGState(te.gState),ee(k),ee("Q")}},wo=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Li=y.moveTo=function(v,k){return ee(K(z(v))+" "+K(O(k))+" m"),this},pi=y.lineTo=function(v,k){return ee(K(z(v))+" "+K(O(k))+" l"),this},Wn=y.curveTo=function(v,k,F,te,fe,_e){return ee([K(z(v)),K(O(k)),K(z(F)),K(O(te)),K(z(fe)),K(O(_e)),"c"].join(" ")),this};y.__private__.line=y.line=function(v,k,F,te,fe){if(isNaN(v)||isNaN(k)||isNaN(F)||isNaN(te)||!ps(fe))throw new Error("Invalid arguments passed to jsPDF.line");return H===Y?this.lines([[F-v,te-k]],v,k,[1,1],fe||"S"):this.lines([[F-v,te-k]],v,k,[1,1]).stroke()},y.__private__.lines=y.lines=function(v,k,F,te,fe,_e){var je,Me,Re,Ge,Qe,Nt,Ft,rr,nr,wr,_r,Qr;if(typeof v=="number"&&(Qr=F,F=k,k=v,v=Qr),te=te||[1,1],_e=_e||!1,isNaN(k)||isNaN(F)||!Array.isArray(v)||!Array.isArray(te)||!ps(fe)||typeof _e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Li(k,F),je=te[0],Me=te[1],Ge=v.length,wr=k,_r=F,Re=0;Re<Ge;Re++)(Qe=v[Re]).length===2?(wr=Qe[0]*je+wr,_r=Qe[1]*Me+_r,pi(wr,_r)):(Nt=Qe[0]*je+wr,Ft=Qe[1]*Me+_r,rr=Qe[2]*je+wr,nr=Qe[3]*Me+_r,wr=Qe[4]*je+wr,_r=Qe[5]*Me+_r,Wn(Nt,Ft,rr,nr,wr,_r));return _e&&er(),hi(fe),this},y.path=function(v){for(var k=0;k<v.length;k++){var F=v[k],te=F.c;switch(F.op){case"m":Li(te[0],te[1]);break;case"l":pi(te[0],te[1]);break;case"c":Wn.apply(this,te);break;case"h":er()}}return this},y.__private__.rect=y.rect=function(v,k,F,te,fe){if(isNaN(v)||isNaN(k)||isNaN(F)||isNaN(te)||!ps(fe))throw new Error("Invalid arguments passed to jsPDF.rect");return H===Y&&(te=-te),ee([K(z(v)),K(O(k)),K(z(F)),K(z(te)),"re"].join(" ")),hi(fe),this},y.__private__.triangle=y.triangle=function(v,k,F,te,fe,_e,je){if(isNaN(v)||isNaN(k)||isNaN(F)||isNaN(te)||isNaN(fe)||isNaN(_e)||!ps(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[F-v,te-k],[fe-F,_e-te],[v-fe,k-_e]],v,k,[1,1],je,!0),this},y.__private__.roundedRect=y.roundedRect=function(v,k,F,te,fe,_e,je){if(isNaN(v)||isNaN(k)||isNaN(F)||isNaN(te)||isNaN(fe)||isNaN(_e)||!ps(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Me=4/3*(Math.SQRT2-1);return fe=Math.min(fe,.5*F),_e=Math.min(_e,.5*te),this.lines([[F-2*fe,0],[fe*Me,0,fe,_e-_e*Me,fe,_e],[0,te-2*_e],[0,_e*Me,-fe*Me,_e,-fe,_e],[2*fe-F,0],[-fe*Me,0,-fe,-_e*Me,-fe,-_e],[0,2*_e-te],[0,-_e*Me,fe*Me,-_e,fe,-_e]],v+fe,k,[1,1],je,!0),this},y.__private__.ellipse=y.ellipse=function(v,k,F,te,fe){if(isNaN(v)||isNaN(k)||isNaN(F)||isNaN(te)||!ps(fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _e=4/3*(Math.SQRT2-1)*F,je=4/3*(Math.SQRT2-1)*te;return Li(v+F,k),Wn(v+F,k-je,v+_e,k-te,v,k-te),Wn(v-_e,k-te,v-F,k-je,v-F,k),Wn(v-F,k+je,v-_e,k+te,v,k+te),Wn(v+_e,k+te,v+F,k+je,v+F,k),hi(fe),this},y.__private__.circle=y.circle=function(v,k,F,te){if(isNaN(v)||isNaN(k)||isNaN(F)||!ps(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,k,F,F,te)},y.setFont=function(v,k,F){return F&&(k=Z(k,F)),ot=ci(v,k,{disableWarning:!1}),this};var Gs=y.__private__.getFont=y.getFont=function(){return zt[ci.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var v,k,F={};for(v in Ut)if(Ut.hasOwnProperty(v))for(k in F[v]=[],Ut[v])Ut[v].hasOwnProperty(k)&&F[v].push(k);return F},y.addFont=function(v,k,F,te,fe){var _e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_e.indexOf(arguments[3])!==-1?fe=arguments[3]:arguments[3]&&_e.indexOf(arguments[3])==-1&&(F=Z(F,te)),Ei.call(this,v,k,F,fe=fe||"Identity-H")};var Hn,ms=n.lineWidth||.200025,Ji=y.__private__.getLineWidth=y.getLineWidth=function(){return ms},jt=y.__private__.setLineWidth=y.setLineWidth=function(v){return ms=v,ee(K(z(v))+" w"),this};y.__private__.setLineDash=wt.API.setLineDash=wt.API.setLineDashPattern=function(v,k){if(v=v||[],k=k||0,isNaN(k)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(F){return K(z(F))}).join(" "),k=K(z(k)),ee("["+v+"] "+k+" d"),this};var Ys=y.__private__.getLineHeight=y.getLineHeight=function(){return $e*Hn};y.__private__.getLineHeight=y.getLineHeight=function(){return $e*Hn};var rl=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Hn=v),this},Ya=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Hn};rl(n.lineHeight);var is=y.__private__.getHorizontalCoordinate=function(v){return z(v)},mi=y.__private__.getVerticalCoordinate=function(v){return H===B?v:St[W].mediaBox.topRightY-St[W].mediaBox.bottomLeftY-z(v)},_o=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(v){return K(is(v))},Aa=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(v){return K(mi(v))},Xi=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Hs(Xi)},y.__private__.setStrokeColor=y.setDrawColor=function(v,k,F,te){return Xi=Jr({ch1:v,ch2:k,ch3:F,ch4:te,pdfColorType:"draw",precision:2}),ee(Xi),this};var Ka=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Hs(Ka)},y.__private__.setFillColor=y.setFillColor=function(v,k,F,te){return Ka=Jr({ch1:v,ch2:k,ch3:F,ch4:te,pdfColorType:"fill",precision:2}),ee(Ka),this};var Is=n.textColor||"0 g",Qi=y.__private__.getTextColor=y.getTextColor=function(){return Hs(Is)};y.__private__.setTextColor=y.setTextColor=function(v,k,F,te){return Is=Jr({ch1:v,ch2:k,ch3:F,ch4:te,pdfColorType:"text",precision:3}),this};var kn=n.charSpace,Zi=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(kn||0)};y.__private__.setCharSpace=y.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return kn=v,this};var Pa=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(v){var k=y.CapJoinStyles[v];if(k===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pa=k,ee(k+" J"),this};var Ja=0;y.__private__.setLineJoin=y.setLineJoin=function(v){var k=y.CapJoinStyles[v];if(k===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ja=k,ee(k+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(K(z(v))+" M"),this},y.GState=Id,y.setGState=function(v){(v=typeof v=="string"?kt[Ot[v]]:Ca(null,v)).equals(lr)||(ee("/"+v.id+" gs"),lr=v)};var Ca=function(v,k){if(!v||!Ot[v]){var F=!1;for(var te in kt)if(kt.hasOwnProperty(te)&&kt[te].equals(k)){F=!0;break}if(F)k=kt[te];else{var fe="GS"+(Object.keys(kt).length+1).toString(10);kt[fe]=k,k.id=fe}return v&&(Ot[v]=k.id),Tt.publish("addGState",k),k}};y.addGState=function(v,k){return Ca(v,k),this},y.saveGraphicsState=function(){return ee("q"),yr.push({key:ot,size:$e,color:Is}),this},y.restoreGraphicsState=function(){ee("Q");var v=yr.pop();return ot=v.key,$e=v.size,Is=v.color,lr=null,this},y.setCurrentTransformationMatrix=function(v){return ee(v.toString()+" cm"),this},y.comment=function(v){return ee("#"+v),this};var Os=function(v,k){var F=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return F},set:function(_e){isNaN(_e)||(F=parseFloat(_e))}});var te=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(_e){isNaN(_e)||(te=parseFloat(_e))}});var fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return fe},set:function(_e){fe=_e.toString()}}),this},Ea=function(v,k,F,te){Os.call(this,v,k),this.type="rect";var fe=F||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return fe},set:function(je){isNaN(je)||(fe=parseFloat(je))}});var _e=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _e},set:function(je){isNaN(je)||(_e=parseFloat(je))}}),this},ea=function(){this.page=Bt,this.currentPage=W,this.pages=Ue.slice(0),this.pagesContext=St.slice(0),this.x=it,this.y=Ar,this.matrix=Gt,this.width=Ks(W),this.height=ta(W),this.outputDestination=Ve,this.id="",this.objectNumber=-1};ea.prototype.restore=function(){Bt=this.page,W=this.currentPage,St=this.pagesContext,Ue=this.pages,it=this.x,Ar=this.y,Gt=this.matrix,Xa(W,this.width),on(W,this.height),Ve=this.outputDestination};var vn=function(v,k,F,te,fe){es.push(new ea),Bt=W=0,Ue=[],it=v,Ar=k,Gt=fe,Ls([F,te])};for(var as in y.beginFormObject=function(v,k,F,te,fe){return vn(v,k,F,te,fe),this},y.endFormObject=function(v){return(function(k){if(Cs[k])es.pop().restore();else{var F=new ea,te="Xo"+(Object.keys(an).length+1).toString(10);F.id=te,Cs[k]=te,an[te]=F,Tt.publish("addFormObject",F),es.pop().restore()}})(v),this},y.doFormObject=function(v,k){var F=an[Cs[v]];return ee("q"),ee(k.toString()+" cm"),ee("/"+F.id+" Do"),ee("Q"),this},y.getFormObject=function(v){var k=an[Cs[v]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},y.save=function(v,k){return v=v||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(Pl(Ts(zn()),v),typeof Pl.unload=="function"&&Mt.setTimeout&&setTimeout(Pl.unload,911),this):new Promise(function(F,te){try{var fe=Pl(Ts(zn()),v);typeof Pl.unload=="function"&&Mt.setTimeout&&setTimeout(Pl.unload,911),F(fe)}catch(_e){te(_e.message)}})},wt.API)wt.API.hasOwnProperty(as)&&(as==="events"&&wt.API.events.length?(function(v,k){var F,te,fe;for(fe=k.length-1;fe!==-1;fe--)F=k[fe][0],te=k[fe][1],v.subscribe.apply(v,[F].concat(typeof te=="function"?[te]:te))})(Tt,wt.API.events):y[as]=wt.API[as]);function Ks(v){return St[v].mediaBox.topRightX-St[v].mediaBox.bottomLeftX}function Xa(v,k){St[v].mediaBox.topRightX=k+St[v].mediaBox.bottomLeftX}function ta(v){return St[v].mediaBox.topRightY-St[v].mediaBox.bottomLeftY}function on(v,k){St[v].mediaBox.topRightY=k+St[v].mediaBox.bottomLeftY}var Fs=y.getPageWidth=function(v){return Ks(v=v||W)/ft},Ur=y.setPageWidth=function(v,k){Xa(v,k*ft)},C=y.getPageHeight=function(v){return ta(v=v||W)/ft},ve=y.setPageHeight=function(v,k){on(v,k*ft)};return y.internal={pdfEscape:ss,getStyle:Ki,getFont:Gs,getFontSize:et,getCharSpace:Zi,getTextColor:Qi,getLineHeight:Ys,getLineHeightFactor:Ya,getLineWidth:Ji,write:Ke,getHorizontalCoordinate:is,getVerticalCoordinate:mi,getCoordinateString:_o,getVerticalCoordinateString:Aa,collections:{},newObject:dr,newAdditionalObject:rs,newObjectDeferred:Tr,newObjectDeferredBegin:br,getFilters:zr,putStream:gn,events:Tt,scaleFactor:ft,pageSize:{getWidth:function(){return Fs(W)},setWidth:function(v){Ur(W,v)},getHeight:function(){return C(W)},setHeight:function(v){ve(W,v)}},encryptionOptions:x,encryption:Xr,getEncryptor:function(v){return x!==null?Xr.encryptor(v,0):function(k){return k}},output:Yi,getNumberOfPages:qn,get pages(){return Ue},out:ee,f2:D,f3:q,getPageInfo:$n,getPageInfoByObjId:ka,getCurrentPageInfo:Sa,getPDFVersion:L,Point:Os,Rectangle:Ea,Matrix:_t,hasHotfix:Ds},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Fs(W)},set:function(v){Ur(W,v)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return C(W)},set:function(v){ve(W,v)},enumerable:!0,configurable:!0}),(function(v){for(var k=0,F=xt.length;k<F;k++){var te=Ei.call(this,v[k][0],v[k][1],v[k][2],xt[k][3],!0);_===!1&&(S[te]=!0);var fe=v[k][0].split("-");Bn({id:te,fontName:fe[0],fontStyle:fe[1]||""})}Tt.publish("addFonts",{fonts:zt,dictionary:Ut})}).call(y,xt),ot="F1",Ga(a,t),Tt.publish("initialized"),y}Sc.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Sc.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sc.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Sc.prototype.processOwnerPassword=function(n,e){return Tf(Lf(e).substr(0,5),n)},Sc.prototype.encryptor=function(n,e){var t=Lf(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Tf(t,s)}},Id.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||xr(n)!==xr(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},wt.API={events:[]},wt.version="3.0.4";var pn=wt.API,Gf=1,Ul=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ht=function(n){return n.toFixed(2)},Yo=function(n){return n.toFixed(5)};pn.__acroform__={};var ai=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Em=function(n){return n*Gf},$a=function(n){var e=new n1,t=dt.internal.getHeight(n)||0,s=dt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Ht(s)),Number(Ht(t))],e},Bb=pn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},qb=pn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},zb=pn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},wn=pn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zb(n,e-1)},_n=pn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bb(n,e-1)},Nn=pn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qb(n,e-1)},$b=pn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],d=n[3],f={};return f.lowerLeft_X=t(a)||0,f.lowerLeft_Y=s(o+d)||0,f.upperRight_X=t(a+u)||0,f.upperRight_Y=s(o)||0,[Number(Ht(f.lowerLeft_X)),Number(Ht(f.lowerLeft_Y)),Number(Ht(f.upperRight_X)),Number(Ht(f.upperRight_Y))]},Wb=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Df(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+Ht(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=$a(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Df=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var o=t,u=dt.internal.getHeight(n)||0;u=u<0?-u:u;var d=dt.internal.getWidth(n)||0;d=d<0?-d:d;var f=function(D,q,z){if(D+1<a.length){var O=q+" "+a[D+1][0];return vd(O,n,z).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var m,x,_=vd("3",n,o).height,S=n.multiline?u-o:(u-_)/2,y=S+=2,E=0,L=0,T=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+vd(e,n,o=12).width+", FieldWidth:"+d+`
`;break}for(var A="",Y=0,B=0;B<a.length;B++)if(a.hasOwnProperty(B)){var H=!1;if(a[B].length!==1&&T!==a[B].length-1){if((_+2)*(Y+2)+2>u)continue e;A+=a[B][T],H=!0,L=B,B--}else{A=(A+=a[B][T]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var ue=parseInt(B),de=f(ue,A,o),Z=B>=a.length-1;if(de&&!Z){A+=" ",T=0;continue}if(de||Z){if(Z)L=ue;else if(n.multiline&&(_+2)*(Y+2)+2>u)continue e}else{if(!n.multiline||(_+2)*(Y+2)+2>u)continue e;L=ue}}for(var K="",G=E;G<=L;G++){var ne=a[G];if(n.multiline){if(G===L){K+=ne[T]+" ",T=(T+1)%ne.length;continue}if(G===E){K+=ne[ne.length-1]+" ";continue}}K+=ne[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,x=vd(K,n,o).width,n.textAlign){case"right":m=d-x-2;break;case"center":m=(d-x)/2;break;default:m=2}e+=Ht(m)+" "+Ht(y)+` Td
`,e+="("+Ul(K)+`) Tj
`,e+=-Ht(m)+` 0 Td
`,y=-(o+2),x=0,E=H?L:L+1,Y++,A=""}break}return s.text=e,s.fontSize=o,s},vd=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Hb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vb=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Gb=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ba.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Hb)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Gf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new s1,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&Vb(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var d=s[u],f=[],m=d.Rect;if(d.Rect&&(d.Rect=$b(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=dt.createDefaultAppearanceStream(d),xr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(f=d.getKeyValueListForStream()),d.Rect=m,d.hasAppearanceStream&&!d.appearanceStreamContent){var x=Wb(d);f.push({key:"AP",value:"<</N "+x+">>"}),a.internal.acroformPlugin.xForms.push(x)}if(d.appearanceStreamContent){var _="";for(var S in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(S)){var y=d.appearanceStreamContent[S];if(_+="/"+S+" ",_+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var E=y[u];typeof E=="function"&&(E=E.call(a,d)),_+="/"+u+" "+E+" ",a.internal.acroformPlugin.xForms.indexOf(E)>=0||a.internal.acroformPlugin.xForms.push(E)}}else typeof(E=y)=="function"&&(E=E.call(a,d)),_+="/"+u+" "+E,a.internal.acroformPlugin.xForms.indexOf(E)>=0||a.internal.acroformPlugin.xForms.push(E);_+=">>"}f.push({key:"AP",value:`<<
`+_+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:d.objId}),a.internal.out("endobj")}o&&(function(L,T){for(var A in L)if(L.hasOwnProperty(A)){var Y=A,B=L[A];T.internal.newObjectDeferredBegin(B.objId,!0),xr(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete L[Y]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},r1=pn.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),xr(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Ul(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rf=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Ul(s(n))+")"},Ha=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ha.prototype.toString=function(){return this.objId+" 0 R"},Ha.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ha.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:r1(a,this.objId,this.scope)}):a instanceof Ha?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var n1=function(){Ha.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ai(n1,Ha);var s1=function(){Ha.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ul(t(n))+")"}},set:function(t){n=t}})};ai(s1,Ha);var ba=function n(){Ha.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wn(e,3)},set:function(A){A?this.F=_n(e,3):this.F=Nn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(A){s=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(A){s[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(A){s[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(A){s[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(A){s[3]=A}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Od)return;o="FieldObject"+n.FieldNum++}var A=function(Y){return Y};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Ul(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(A){f=A}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/Gf:m},set:function(A){m=A}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(A){x=A}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof Od||this instanceof Dl))return rf(_,this.objId,this.scope)},set:function(A){A=A.toString(),_=A}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Zn==0?rf(S,this.objId,this.scope):S},set:function(A){A=A.toString(),S=this instanceof Zn==0?A.substr(0,1)==="("?wc(A.substr(1,A.length-2)):wc(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zn==1?wc(S.substr(1,S.length-1)):S},set:function(A){A=A.toString(),S=this instanceof Zn==1?"/"+A:A}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Zn==0?rf(y,this.objId,this.scope):y},set:function(A){A=A.toString(),y=this instanceof Zn==0?A.substr(0,1)==="("?wc(A.substr(1,A.length-2)):wc(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zn==1?wc(y.substr(1,y.length-1)):y},set:function(A){A=A.toString(),y=this instanceof Zn==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(A){A=!!A,L=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(A){E=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,1)},set:function(A){A?this.Ff=_n(this.Ff,1):this.Ff=Nn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,2)},set:function(A){A?this.Ff=_n(this.Ff,2):this.Ff=Nn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,3)},set:function(A){A?this.Ff=_n(this.Ff,3):this.Ff=Nn(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');T=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(T){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:T=2;break;case"center":case 1:T=1;break;default:T=0}}})};ai(ba,Ha);var Ec=function(){ba.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return r1(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,d){d||(d=1);for(var f,m=[];f=u.exec(o);)m.push(f[d]);return m})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,18)},set:function(t){t?this.Ff=_n(this.Ff,18):this.Ff=Nn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=_n(this.Ff,19):this.Ff=Nn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,20)},set:function(t){t?(this.Ff=_n(this.Ff,20),e.sort()):this.Ff=Nn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,22)},set:function(t){t?this.Ff=_n(this.Ff,22):this.Ff=Nn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(t){t?this.Ff=_n(this.Ff,23):this.Ff=Nn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,27)},set:function(t){t?this.Ff=_n(this.Ff,27):this.Ff=Nn(this.Ff,27)}}),this.hasAppearanceStream=!1};ai(Ec,ba);var Lc=function(){Ec.call(this),this.fontName="helvetica",this.combo=!1};ai(Lc,Ec);var Tc=function(){Lc.call(this),this.combo=!0};ai(Tc,Lc);var Nd=function(){Tc.call(this),this.edit=!0};ai(Nd,Tc);var Zn=function(){ba.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,15)},set:function(t){t?this.Ff=_n(this.Ff,15):this.Ff=Nn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,16)},set:function(t){t?this.Ff=_n(this.Ff,16):this.Ff=Nn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,17)},set:function(t){t?this.Ff=_n(this.Ff,17):this.Ff=Nn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(t){t?this.Ff=_n(this.Ff,26):this.Ff=Nn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Ul(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){xr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ai(Zn,ba);var kd=function(){Zn.call(this),this.pushButton=!0};ai(kd,Zn);var Dc=function(){Zn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ai(Dc,Zn);var Od=function(){var n,e;ba.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Ul(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){xr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ai(Od,ba),Dc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Dc.prototype.createOption=function(n){var e=new Od;return e.Parent=this,e.optionName=n,this.Kids.push(e),Yb.call(this.scope,e),e};var Sd=function(){Zn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dt.CheckBox.createAppearanceStream()};ai(Sd,Zn);var Dl=function(){ba.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,13)},set:function(e){e?this.Ff=_n(this.Ff,13):this.Ff=Nn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,21)},set:function(e){e?this.Ff=_n(this.Ff,21):this.Ff=Nn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(e){e?this.Ff=_n(this.Ff,23):this.Ff=Nn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,24)},set:function(e){e?this.Ff=_n(this.Ff,24):this.Ff=Nn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,25)},set:function(e){e?this.Ff=_n(this.Ff,25):this.Ff=Nn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(e){e?this.Ff=_n(this.Ff,26):this.Ff=Nn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ai(Dl,ba);var jd=function(){Dl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,14)},set:function(n){n?this.Ff=_n(this.Ff,14):this.Ff=Nn(this.Ff,14)}}),this.password=!0};ai(jd,Dl);var dt={CheckBox:{createAppearanceStream:function(){return{N:{On:dt.CheckBox.YesNormal},D:{On:dt.CheckBox.YesPushDown,Off:dt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=$a(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Df(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Ht(dt.internal.getWidth(n))+" "+Ht(dt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+Ht(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=$a(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=dt.internal.getHeight(n),u=dt.internal.getWidth(n),d=Df(n,n.caption);return a.push("1 g"),a.push("0 0 "+Ht(u)+" "+Ht(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ht(u-1)+" "+Ht(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+Ht(d.fontSize)+" Tf "+s),a.push(d.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=$a(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ht(dt.internal.getWidth(n))+" "+Ht(dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=dt.RadioButton.Circle.YesNormal,e.D[n]=dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=$a(n);e.scope=n.scope;var t=[],s=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=dt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Yo(dt.internal.getWidth(n)/2)+" "+Yo(dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=$a(n);e.scope=n.scope;var t=[],s=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*dt.internal.Bezier_C).toFixed(5)),u=Number((s*dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Yo(dt.internal.getWidth(n)/2)+" "+Yo(dt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Yo(dt.internal.getWidth(n)/2)+" "+Yo(dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=$a(n);e.scope=n.scope;var t=[],s=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Yo(dt.internal.getWidth(n)/2)+" "+Yo(dt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=dt.RadioButton.Cross.YesNormal,e.D[n]=dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=$a(n);e.scope=n.scope;var t=[],s=dt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Ht(dt.internal.getWidth(n)-2)+" "+Ht(dt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Ht(s.x1.x)+" "+Ht(s.x1.y)+" m"),t.push(Ht(s.x2.x)+" "+Ht(s.x2.y)+" l"),t.push(Ht(s.x4.x)+" "+Ht(s.x4.y)+" m"),t.push(Ht(s.x3.x)+" "+Ht(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=$a(n);e.scope=n.scope;var t=dt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Ht(dt.internal.getWidth(n))+" "+Ht(dt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Ht(dt.internal.getWidth(n)-2)+" "+Ht(dt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Ht(t.x1.x)+" "+Ht(t.x1.y)+" m"),s.push(Ht(t.x2.x)+" "+Ht(t.x2.y)+" l"),s.push(Ht(t.x4.x)+" "+Ht(t.x4.y)+" m"),s.push(Ht(t.x3.x)+" "+Ht(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=$a(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ht(dt.internal.getWidth(n))+" "+Ht(dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};dt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=dt.internal.getWidth(n),t=dt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},dt.internal.getWidth=function(n){var e=0;return xr(n)==="object"&&(e=Em(n.Rect[2])),e},dt.internal.getHeight=function(n){var e=0;return xr(n)==="object"&&(e=Em(n.Rect[3])),e};var Yb=pn.addField=function(n){if(Gb(this,n),!(n instanceof ba))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};pn.AcroFormChoiceField=Ec,pn.AcroFormListBox=Lc,pn.AcroFormComboBox=Tc,pn.AcroFormEditBox=Nd,pn.AcroFormButton=Zn,pn.AcroFormPushButton=kd,pn.AcroFormRadioButton=Dc,pn.AcroFormCheckBox=Sd,pn.AcroFormTextField=Dl,pn.AcroFormPasswordField=jd,pn.AcroFormAppearance=dt,pn.AcroForm={ChoiceField:Ec,ListBox:Lc,ComboBox:Tc,EditBox:Nd,Button:Zn,PushButton:kd,RadioButton:Dc,CheckBox:Sd,TextField:Dl,PasswordField:jd,Appearance:dt},wt.AcroForm={ChoiceField:Ec,ListBox:Lc,ComboBox:Tc,EditBox:Nd,Button:Zn,PushButton:kd,RadioButton:Dc,CheckBox:Sd,TextField:Dl,PasswordField:jd,Appearance:dt};wt.AcroForm;function i1(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(D,q){var z,O,Q,ae,se,M=t;if((q=q||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(de(D))for(se in s)for(Q=s[se],z=0;z<Q.length;z+=1){for(ae=!0,O=0;O<Q[z].length;O+=1)if(Q[z][O]!==void 0&&Q[z][O]!==D[O]){ae=!1;break}if(ae===!0){M=se;break}}else for(se in s)for(Q=s[se],z=0;z<Q.length;z+=1){for(ae=!0,O=0;O<Q[z].length;O+=1)if(Q[z][O]!==void 0&&Q[z][O]!==D.charCodeAt(O)){ae=!1;break}if(ae===!0){M=se;break}}return M===t&&q!==t&&(M=q),M},o=function D(q){for(var z=this.internal.write,O=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:q.width}),ae.push({key:"Height",value:q.height}),q.colorSpace===A.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===A.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var se="",M=0,ce=q.transparency.length;M<ce;M++)se+=q.transparency[M]+" "+q.transparency[M]+" ";ae.push({key:"Mask",value:"["+se+"]"})}q.sMask!==void 0&&ae.push({key:"SMask",value:q.objectId+1+" 0 R"});var be=q.filter!==void 0?["/"+q.filter]:void 0;if(O({data:q.data,additionalKeyValues:ae,alreadyAppliedFilters:be,objectId:q.objectId}),z("endobj"),"sMask"in q&&q.sMask!==void 0){var X,P=(X=q.sMaskBitsPerComponent)!==null&&X!==void 0?X:q.bitsPerComponent,W={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:q.sMask};"filter"in q&&(W.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(q.width),W.filter=q.filter),D.call(this,W)}if(q.colorSpace===A.INDEXED){var re=this.internal.newObject();O({data:K(new Uint8Array(q.palette)),objectId:re}),z("endobj")}},u=function(){var D=this.internal.collections[e+"images"];for(var q in D)o.call(this,D[q])},d=function(){var D,q=this.internal.collections[e+"images"],z=this.internal.write;for(var O in q)z("/I"+(D=q[O]).index,D.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},m=function(){var D=this.internal.collections[e+"images"];return f.call(this),D},x=function(){return Object.keys(this.internal.collections[e+"images"]).length},_=function(D){return typeof n["process"+D.toUpperCase()]=="function"},S=function(D){return xr(D)==="object"&&D.nodeType===1},y=function(D,q){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var z=""+D.getAttribute("src");if(z.indexOf("data:image/")===0)return _d(unescape(z).split("base64,").pop());var O=n.loadFile(z,!0);if(O!==void 0)return O}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var Q;switch(q){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return _d(D.toDataURL(Q,1).split("base64,").pop())}},E=function(D){var q=this.internal.collections[e+"images"];if(q){for(var z in q)if(D===q[z].alias)return q[z]}},L=function(D,q,z){return D||q||(D=-96,q=-96),D<0&&(D=-1*z.width*72/D/this.internal.scaleFactor),q<0&&(q=-1*z.height*72/q/this.internal.scaleFactor),D===0&&(D=q*z.width/z.height),q===0&&(q=D*z.height/z.width),[D,q]},T=function(D,q,z,O,Q,ae){var se=L.call(this,z,O,Q),M=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,be=m.call(this);if(z=se[0],O=se[1],be[Q.index]=Q,ae){ae*=Math.PI/180;var X=Math.cos(ae),P=Math.sin(ae),W=function(oe){return oe.toFixed(4)},re=[W(X),W(P),W(-1*P),W(X),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,M(D),ce(q+O),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([M(z),"0","0",M(O),"0","0","cm"].join(" "))):this.internal.write([M(z),"0","0",M(O),M(D),ce(q+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},A=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=n.__addimage__.sHashCode=function(D){var q,z,O=0;if(typeof D=="string")for(z=D.length,q=0;q<z;q++)O=(O<<5)-O+D.charCodeAt(q),O|=0;else if(de(D))for(z=D.byteLength/2,q=0;q<z;q++)O=(O<<5)-O+D[q],O|=0;return O},H=n.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var q=!0;return D.length===0&&(q=!1),D.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(q=!1),q},ue=n.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var q=D.indexOf(",");return q<0?null:D.substring(0,q).trim().endsWith("base64")?D.substring(q+1):null};n.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var de=n.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},Z=n.__addimage__.binaryStringToUint8Array=function(D){for(var q=D.length,z=new Uint8Array(q),O=0;O<q;O++)z[O]=D.charCodeAt(O);return z},K=n.__addimage__.arrayBufferToBinaryString=function(D){for(var q="",z=de(D)?D:new Uint8Array(D),O=0;O<z.length;O+=8192)q+=String.fromCharCode.apply(null,z.subarray(O,O+8192));return q};n.addImage=function(){var D,q,z,O,Q,ae,se,M,ce;if(typeof arguments[1]=="number"?(q=t,z=arguments[1],O=arguments[2],Q=arguments[3],ae=arguments[4],se=arguments[5],M=arguments[6],ce=arguments[7]):(q=arguments[1],z=arguments[2],O=arguments[3],Q=arguments[4],ae=arguments[5],se=arguments[6],M=arguments[7],ce=arguments[8]),xr(D=arguments[0])==="object"&&!S(D)&&"imageData"in D){var be=D;D=be.imageData,q=be.format||q||t,z=be.x||z||0,O=be.y||O||0,Q=be.w||be.width||Q,ae=be.h||be.height||ae,se=be.alias||se,M=be.compression||M,ce=be.rotation||be.angle||ce}var X=this.internal.getFilters();if(M===void 0&&X.indexOf("FlateEncode")!==-1&&(M="SLOW"),isNaN(z)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var P=G.call(this,D,q,se,M);return T.call(this,z,O,Q,ae,P,ce),this};var G=function(D,q,z,O){var Q,ae,se;if(typeof D=="string"&&a(D)===t){D=unescape(D);var M=ne(D,!1);(M!==""||(M=n.loadFile(D,!0))!==void 0)&&(D=M)}if(S(D)&&(D=y(D,q)),q=a(D,q),!_(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((se=z)==null||se.length===0)&&(z=(function(ce){return typeof ce=="string"||de(ce)?B(ce):de(ce.data)?B(ce.data):null})(D)),(Q=E.call(this,z))||(D instanceof Uint8Array||q==="RGBA"||(ae=D,D=Z(D)),Q=this["process"+q.toUpperCase()](D,x.call(this),z,(function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in n.image_compression?ce:Y.NONE})(O),ae)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},ne=n.__addimage__.convertBase64ToBinaryString=function(D,q){q=typeof q!="boolean"||q;var z,O="";if(typeof D=="string"){var Q;z=(Q=ue(D))!==null&&Q!==void 0?Q:D;try{O=_d(z)}catch(ae){if(q)throw H(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};n.getImageProperties=function(D){var q,z,O="";if(S(D)&&(D=y(D)),typeof D=="string"&&a(D)===t&&((O=ne(D,!1))===""&&(O=n.loadFile(D)||""),D=O),z=a(D),!_(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(D instanceof Uint8Array||(D=Z(D)),!(q=this["process"+z.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=z,q}})(wt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};wt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),m=t.pageContext.annotations,x=!1,_=0;_<m.length&&!x;_++)switch((s=m[_]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var S=0;S<m.length;S++){s=m[S];var y=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(L.objId),Y=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(A(s.contents))+")",o+=" /Popup "+T.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+y(A(Y))+") >>",L.content=o;var B=L.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+B,s.open&&(o+=" /Open true"),o+=" >>",T.content=o,this.internal.write(L.objId,"0 R",T.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var H=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(E(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var ue=this.annotations._nameMap[s.options.name];s.options.pageNumber=ue.page,s.options.top=ue.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(E(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var de=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+de+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var d=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:f(t),y:m(s),w:f(t+a),h:m(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,d,f=this.getTextWidth(t),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var x=this.splitTextToSize(t,d).length;u=Math.ceil(m*x)}else d=f,u=m;return this.text(t,s,a,o),a+=.2*m,o.align==="center"&&(s-=f/2),o.align==="right"&&(s-=f),this.link(s,a-m,d,u,o),f},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(wt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(L){return e[L.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},d=n.__arabicParser__.isArabicEndLetter=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(L){return u(L)&&a.indexOf(L.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length>=1};var m=n.__arabicParser__.arabicLetterHasFinalForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length>=3};var x=n.__arabicParser__.arabicLetterHasMedialForm=function(L){return u(L)&&o(L)&&e[L.charCodeAt(0)].length==4},_=n.__arabicParser__.resolveLigatures=function(L){var T=0,A=t,Y="",B=0;for(T=0;T<L.length;T+=1)A[L.charCodeAt(T)]!==void 0?(B++,typeof(A=A[L.charCodeAt(T)])=="number"&&(Y+=String.fromCharCode(A),A=t,B=0),T===L.length-1&&(A=t,Y+=L.charAt(T-(B-1)),T-=B-1,B=0)):(A=t,Y+=L.charAt(T-B),T-=B,B=0);return Y};n.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&s[L.charCodeAt(0)]!==void 0};var S=n.__arabicParser__.getCorrectForm=function(L,T,A){return u(L)?o(L)===!1?-1:!m(L)||!u(T)&&!u(A)||!u(A)&&d(T)||d(L)&&!u(T)||d(L)&&f(T)||d(L)&&d(T)?0:x(L)&&u(T)&&!d(T)&&u(A)&&m(A)?3:d(L)||!u(A)?1:2:-1},y=function(L){var T=0,A=0,Y=0,B="",H="",ue="",de=(L=L||"").split("\\s+"),Z=[];for(T=0;T<de.length;T+=1){for(Z.push(""),A=0;A<de[T].length;A+=1)B=de[T][A],H=de[T][A-1],ue=de[T][A+1],u(B)?(Y=S(B,H,ue),Z[T]+=Y!==-1?String.fromCharCode(e[B.charCodeAt(0)][Y]):B):Z[T]+=B;Z[T]=_(Z[T])}return Z.join(" ")},E=n.__arabicParser__.processArabic=n.processArabic=function(){var L,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(T)){var Y=0;for(A=[],Y=0;Y<T.length;Y+=1)Array.isArray(T[Y])?A.push([y(T[Y][0]),T[Y][1],T[Y][2]]):A.push([y(T[Y])]);L=A}else L=y(T);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};n.events.push(["preProcessText",E])})(wt.API),wt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(wt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(L){f=L}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(L){m=L}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(L){x=L}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(L){_=L}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(L){S=L}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(L){y=L}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(L){E=L}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,m){s.call(this);var x=(m=m||{}).fontSize||this.getFontSize(),_=m.font||this.getFont(),S=m.scaleFactor||this.internal.scaleFactor,y=0,E=0,L=0,T=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var A=m.maxWidth;A>0?typeof f=="string"?f=this.splitTextToSize(f,A):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(B,H){return B.concat(T.splitTextToSize(H,A))},[])):f=Array.isArray(f)?f:[f];for(var Y=0;Y<f.length;Y++)y<(L=this.getStringUnitWidth(f[Y],{font:_})*x)&&(y=L);return y!==0&&(E=f.length),{w:y/=S,h:Math.max((E*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/S,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var m=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===f.lineNumber?(f.x=(m.x||0)+(m.width||0),f.y=m.y||0):m.y+m.height+f.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=_.top,y&&S&&(this.printHeaderRow(f.lineNumber,!0),f.y+=S[0].height)):f.y=m.y+m.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-x,f.y+x,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+x,{align:"center",baseline:"top",maxWidth:f.width-x-x}):this.text(f.text,f.x+x,f.y+x,{align:"left",baseline:"top",maxWidth:f.width-x-x})),this.internal.__cell__.lastCell=f,this};n.table=function(f,m,x,_,S){if(s.call(this),!x)throw new Error("No data for PDF table.");var y,E,L,T,A=[],Y=[],B=[],H={},ue={},de=[],Z=[],K=(S=S||{}).autoSize||!1,G=S.printHeaders!==!1,ne=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,D=S.margins||Object.assign({width:this.getPageWidth()},e),q=typeof S.padding=="number"?S.padding:3,z=S.headerBackgroundColor||"#c8c8c8",O=S.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=G,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=ne,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=O,this.setFontSize(ne),_==null)Y=A=Object.keys(x[0]),B=A.map(function(){return"left"});else if(Array.isArray(_)&&xr(_[0])==="object")for(A=_.map(function(be){return be.name}),Y=_.map(function(be){return be.prompt||be.name||""}),B=_.map(function(be){return be.align||"left"}),y=0;y<_.length;y+=1)ue[_[y].name]=.7499990551181103*_[y].width;else Array.isArray(_)&&typeof _[0]=="string"&&(Y=A=_,B=A.map(function(){return"left"}));if(K||Array.isArray(_)&&typeof _[0]=="string")for(y=0;y<A.length;y+=1){for(H[T=A[y]]=x.map(function(be){return be[T]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(Y[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=H[T],this.setFont(void 0,"normal"),L=0;L<E.length;L+=1)de.push(this.getTextDimensions(E[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ue[T]=Math.max.apply(null,de)+q+q,de=[]}if(G){var Q={};for(y=0;y<A.length;y+=1)Q[A[y]]={},Q[A[y]].text=Y[y],Q[A[y]].align=B[y];var ae=d.call(this,Q,ue);Z=A.map(function(be){return new o(f,m,ue[be],ae,Q[be].text,void 0,Q[be].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var se=_.reduce(function(be,X){return be[X.name]=X.align,be},{});for(y=0;y<x.length;y+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:y,data:x[y]},this);var M=d.call(this,x[y],ue);for(L=0;L<A.length;L+=1){var ce=x[y][A[L]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:y,col:L,data:ce},this),u.call(this,new o(f,m,ue[A[L]],M,ce,y+2,se[A[L]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=m,this};var d=function(f,m){var x=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(f).map(function(y){var E=f[y];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,m[y]-x-x)},this).map(function(y){return this.getLineHeightFactor()*y.length*_/S+x+x},this).reduce(function(y,E){return Math.max(y,E)},0)};n.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,m){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){x=this.internal.__cell__.tableHeaderRow[y].clone(),m&&(x.y=this.internal.__cell__.margins.top||0,S.push(x)),x.lineNumber=f;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,x),this.setTextColor(E)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}})(wt.API);var a1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},o1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],If=i1(o1),l1=[100,200,300,400,500,600,700,800,900],Kb=i1(l1);function nf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return a1[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof If[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function Lm(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var Jb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dm(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Im(n){return n.trimLeft()}function Xb(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Qb(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var xd,Om,Fm,_c,yd,Rm,Mm,Um,sf=["times"];function Bm(n,e,t,s,a){var o=4,u=zm;switch(a){case wt.API.image_compression.FAST:o=1,u=qm;break;case wt.API.image_compression.MEDIUM:o=6,u=$m;break;case wt.API.image_compression.SLOW:o=9,u=Wm}n=(function(f,m,x,_){for(var S,y=f.length/m,E=new Uint8Array(f.length+y),L=[Zb,qm,zm,$m,Wm],T=0;T<y;T+=1){var A=T*m,Y=f.subarray(A,A+m);if(_)E.set(_(Y,x,S),A+T);else{for(var B=L.length,H=[],ue=0;ue<B;ue+=1)H[ue]=L[ue](Y,x,S);var de=t5(H.concat());E.set(H[de],A+T)}S=Y}return E})(n,e,Math.ceil(t*s/8),u);var d=Af(n,{level:o});return wt.API.__addimage__.arrayBufferToBinaryString(d)}function Zb(n){var e=Array.apply([],n);return e.unshift(0),e}function qm(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function zm(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function $m(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,d=t&&t[o]||0;a[o+1]=n[o]+256-(u+d>>>1)&255}return a}function Wm(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=e5(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function e5(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function t5(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function af(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return c1(n,a)>>o&u}function Hm(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),d=(1<<s)-1,f=(e&d)<<u;(function(m,x,_){if(x+1<m.byteLength)m.setUint16(x,_,!1);else{var S=_>>8&255;m.setUint8(x,S)}})(n,o,c1(n,o)&~(d<<u)&65535|f)}function c1(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function r5(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var d=null,f=null;o&&(d=e,f=u,e+=3*u);var m=!0,x=[],_=0,S=null,y=0,E=null;for(this.width=t,this.height=s;m&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,E=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var L=n[e++];_=n[e++]|n[e++]<<8,S=n[e++],1&L||(S=null),y=L>>2&7,e++;break;case 254:for(;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var T=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,Y=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,H=n[e++],ue=H>>6&1,de=1<<1+(7&H),Z=d,K=f,G=!1;H>>7&&(G=!0,Z=e,K=de,e+=3*de);var ne=e;for(e++;;){var D;if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}x.push({x:T,y:A,width:Y,height:B,has_local_palette:G,palette_offset:Z,palette_size:K,data_offset:ne,data_length:e-ne,transparent_index:S,interlaced:!!ue,delay:_,disposal:y});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return E},this.frameInfo=function(q){if(q<0||q>=x.length)throw new Error("Frame index out of range.");return x[q]},this.decodeAndBlitFrameBGRA=function(q,z){var O=this.frameInfo(q),Q=O.width*O.height,ae=new Uint8Array(Q);Vm(n,O.data_offset,ae,Q);var se=O.palette_offset,M=O.transparent_index;M===null&&(M=256);var ce=O.width,be=t-ce,X=ce,P=4*(O.y*t+O.x),W=4*((O.y+O.height)*t+O.x),re=P,oe=4*be;O.interlaced===!0&&(oe+=4*t*7);for(var he=8,we=0,Ne=ae.length;we<Ne;++we){var Ae=ae[we];if(X===0&&(X=ce,(re+=oe)>=W&&(oe=4*be+4*t*(he-1),re=P+(ce+be)*(he<<1),he>>=1)),Ae===M)re+=4;else{var me=n[se+3*Ae],Ue=n[se+3*Ae+1],ze=n[se+3*Ae+2];z[re++]=ze,z[re++]=Ue,z[re++]=me,z[re++]=255}--X}},this.decodeAndBlitFrameRGBA=function(q,z){var O=this.frameInfo(q),Q=O.width*O.height,ae=new Uint8Array(Q);Vm(n,O.data_offset,ae,Q);var se=O.palette_offset,M=O.transparent_index;M===null&&(M=256);var ce=O.width,be=t-ce,X=ce,P=4*(O.y*t+O.x),W=4*((O.y+O.height)*t+O.x),re=P,oe=4*be;O.interlaced===!0&&(oe+=4*t*7);for(var he=8,we=0,Ne=ae.length;we<Ne;++we){var Ae=ae[we];if(X===0&&(X=ce,(re+=oe)>=W&&(oe=4*be+4*t*(he-1),re=P+(ce+be)*(he<<1),he>>=1)),Ae===M)re+=4;else{var me=n[se+3*Ae],Ue=n[se+3*Ae+1],ze=n[se+3*Ae+2];z[re++]=me,z[re++]=Ue,z[re++]=ze,z[re++]=255}--X}}}function Vm(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,d=u+1,f=a+1,m=(1<<f)-1,x=0,_=0,S=0,y=n[e++],E=new Int32Array(4096),L=null;;){for(;x<16&&y!==0;)_|=n[e++]<<x,x+=8,y===1?y=n[e++]:--y;if(x<f)break;var T=_&m;if(_>>=f,x-=f,T!==o){if(T===u)break;for(var A=T<d?T:L,Y=0,B=A;B>o;)B=E[B]>>8,++Y;var H=B;if(S+Y+(A!==T?1:0)>s)return void Er.log("Warning, gif stream longer than expected.");t[S++]=H;var ue=S+=Y;for(A!==T&&(t[S++]=H),B=A;Y--;)B=E[B],t[--ue]=255&B,B>>=8;L!==null&&d<4096&&(E[d++]=L<<8|H,d>=m+1&&f<12&&(++f,m=m<<1|1)),L=T}else d=u+1,m=(1<<(f=a+1))-1,L=null}return S!==s&&Er.log("Warning, gif stream shorter than expected."),t}function of(n){var e,t,s,a,o,u=Math.floor,d=new Array(64),f=new Array(64),m=new Array(64),x=new Array(64),_=new Array(65535),S=new Array(65535),y=new Array(64),E=new Array(64),L=[],T=0,A=7,Y=new Array(64),B=new Array(64),H=new Array(64),ue=new Array(256),de=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(P,W){for(var re=0,oe=0,he=new Array,we=1;we<=16;we++){for(var Ne=1;Ne<=P[we];Ne++)he[W[oe]]=[],he[W[oe]][0]=re,he[W[oe]][1]=we,oe++,re++;re*=2}return he}function se(P){for(var W=P[0],re=P[1]-1;re>=0;)W&1<<re&&(T|=1<<A),re--,--A<0&&(T==255?(M(255),M(0)):M(T),A=7,T=0)}function M(P){L.push(P)}function ce(P){M(P>>8&255),M(255&P)}function be(P,W,re,oe,he){for(var we,Ne=he[0],Ae=he[240],me=(function($e,ct){var et,vt,mt,qt,yt,It,Yt,Kt,ot,ft,it=0;for(ot=0;ot<8;++ot){et=$e[it],vt=$e[it+1],mt=$e[it+2],qt=$e[it+3],yt=$e[it+4],It=$e[it+5],Yt=$e[it+6];var Ar=et+(Kt=$e[it+7]),Gt=et-Kt,zt=vt+Yt,Ut=vt-Yt,yr=mt+It,bt=mt-It,ur=qt+yt,kt=qt-yt,Ot=Ar+ur,lr=Ar-ur,Bt=zt+yr,St=zt-yr;$e[it]=Ot+Bt,$e[it+4]=Ot-Bt;var Tt=.707106781*(St+lr);$e[it+2]=lr+Tt,$e[it+6]=lr-Tt;var Ps=.382683433*((Ot=kt+bt)-(St=Ut+Gt)),an=.5411961*Ot+Ps,Cs=1.306562965*St+Ps,es=.707106781*(Bt=bt+Ut),_t=Gt+es,Mn=Gt-es;$e[it+5]=Mn+an,$e[it+3]=Mn-an,$e[it+1]=_t+Cs,$e[it+7]=_t-Cs,it+=8}for(it=0,ot=0;ot<8;++ot){et=$e[it],vt=$e[it+8],mt=$e[it+16],qt=$e[it+24],yt=$e[it+32],It=$e[it+40],Yt=$e[it+48];var hs=et+(Kt=$e[it+56]),mn=et-Kt,ts=vt+Yt,dr=vt-Yt,Tr=mt+It,br=mt-It,rs=qt+yt,Es=qt-yt,Un=hs+rs,Hs=hs-rs,Jr=ts+Tr,zr=ts-Tr;$e[it]=Un+Jr,$e[it+32]=Un-Jr;var gn=.707106781*(zr+Hs);$e[it+16]=Hs+gn,$e[it+48]=Hs-gn;var oi=.382683433*((Un=Es+br)-(zr=dr+mn)),ns=.5411961*Un+oi,Vs=1.306562965*zr+oi,li=.707106781*(Jr=br+dr),Hi=mn+li,Ci=mn-li;$e[it+40]=Ci+ns,$e[it+24]=Ci-ns,$e[it+8]=Hi+Vs,$e[it+56]=Hi-Vs,it++}for(ot=0;ot<64;++ot)ft=$e[ot]*ct[ot],y[ot]=ft>0?ft+.5|0:ft-.5|0;return y})(P,W),Ue=0;Ue<64;++Ue)E[Z[Ue]]=me[Ue];var ze=E[0]-re;re=E[0],ze==0?se(oe[0]):(se(oe[S[we=32767+ze]]),se(_[we]));for(var Ve=63;Ve>0&&E[Ve]==0;)Ve--;if(Ve==0)return se(Ne),re;for(var Xe,ee=1;ee<=Ve;){for(var Ke=ee;E[ee]==0&&ee<=Ve;)++ee;var Lt=ee-Ke;if(Lt>=16){Xe=Lt>>4;for(var xt=1;xt<=Xe;++xt)se(Ae);Lt&=15}we=32767+E[ee],se(he[(Lt<<4)+S[we]]),se(_[we]),ee++}return Ve!=63&&se(Ne),re}function X(P){P=Math.min(Math.max(P,1),100),o!=P&&((function(W){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var he=u((re[oe]*W+50)/100);he=Math.min(Math.max(he,1),255),d[Z[oe]]=he}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ne=0;Ne<64;Ne++){var Ae=u((we[Ne]*W+50)/100);Ae=Math.min(Math.max(Ae,1),255),f[Z[Ne]]=Ae}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,ze=0;ze<8;ze++)for(var Ve=0;Ve<8;Ve++)m[Ue]=1/(d[Z[Ue]]*me[ze]*me[Ve]*8),x[Ue]=1/(f[Z[Ue]]*me[ze]*me[Ve]*8),Ue++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),o=P)}this.encode=function(P,W){W&&X(W),L=new Array,T=0,A=7,ce(65496),ce(65504),ce(16),M(74),M(70),M(73),M(70),M(0),M(1),M(1),M(0),ce(1),ce(1),M(0),M(0),(function(){ce(65499),ce(132),M(0);for(var vt=0;vt<64;vt++)M(d[vt]);M(1);for(var mt=0;mt<64;mt++)M(f[mt])})(),(function(vt,mt){ce(65472),ce(17),M(8),ce(mt),ce(vt),M(3),M(1),M(17),M(0),M(2),M(17),M(1),M(3),M(17),M(1)})(P.width,P.height),(function(){ce(65476),ce(418),M(0);for(var vt=0;vt<16;vt++)M(K[vt+1]);for(var mt=0;mt<=11;mt++)M(G[mt]);M(16);for(var qt=0;qt<16;qt++)M(ne[qt+1]);for(var yt=0;yt<=161;yt++)M(D[yt]);M(1);for(var It=0;It<16;It++)M(q[It+1]);for(var Yt=0;Yt<=11;Yt++)M(z[Yt]);M(17);for(var Kt=0;Kt<16;Kt++)M(O[Kt+1]);for(var ot=0;ot<=161;ot++)M(Q[ot])})(),ce(65498),ce(12),M(3),M(1),M(0),M(2),M(17),M(3),M(17),M(0),M(63),M(0);var re=0,oe=0,he=0;T=0,A=7,this.encode.displayName="_encode_";for(var we,Ne,Ae,me,Ue,ze,Ve,Xe,ee,Ke=P.data,Lt=P.width,xt=P.height,$e=4*Lt,ct=0;ct<xt;){for(we=0;we<$e;){for(Ue=$e*ct+we,Ve=-1,Xe=0,ee=0;ee<64;ee++)ze=Ue+(Xe=ee>>3)*$e+(Ve=4*(7&ee)),ct+Xe>=xt&&(ze-=$e*(ct+1+Xe-xt)),we+Ve>=$e&&(ze-=we+Ve-$e+4),Ne=Ke[ze++],Ae=Ke[ze++],me=Ke[ze++],Y[ee]=(de[Ne]+de[Ae+256|0]+de[me+512|0]>>16)-128,B[ee]=(de[Ne+768|0]+de[Ae+1024|0]+de[me+1280|0]>>16)-128,H[ee]=(de[Ne+1280|0]+de[Ae+1536|0]+de[me+1792|0]>>16)-128;re=be(Y,m,re,e,s),oe=be(B,x,oe,t,a),he=be(H,x,he,t,a),we+=32}ct+=8}if(A>=0){var et=[];et[1]=A+1,et[0]=(1<<A+1)-1,se(et)}return ce(65497),new Uint8Array(L)},n=n||50,(function(){for(var P=String.fromCharCode,W=0;W<256;W++)ue[W]=P(W)})(),e=ae(K,G),t=ae(q,z),s=ae(ne,D),a=ae(O,Q),(function(){for(var P=1,W=2,re=1;re<=15;re++){for(var oe=P;oe<W;oe++)S[32767+oe]=re,_[32767+oe]=[],_[32767+oe][1]=re,_[32767+oe][0]=oe;for(var he=-(W-1);he<=-P;he++)S[32767+he]=re,_[32767+he]=[],_[32767+he][1]=re,_[32767+he][0]=W-1+he;P<<=1,W<<=1}})(),(function(){for(var P=0;P<256;P++)de[P]=19595*P,de[P+256|0]=38470*P,de[P+512|0]=7471*P+32768,de[P+768|0]=-11059*P,de[P+1024|0]=-21709*P,de[P+1280|0]=32768*P+8421375,de[P+1536|0]=-27439*P,de[P+1792|0]=-5329*P})(),X(n)}function ga(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Gm(n){function e(G){if(!G)throw Error("assert :P")}function t(G,ne,D){for(var q=0;4>q;q++)if(G[ne+q]!=D.charCodeAt(q))return!0;return!1}function s(G,ne,D,q,z){for(var O=0;O<z;O++)G[ne+O]=D[q+O]}function a(G,ne,D,q){for(var z=0;z<q;z++)G[ne+z]=D}function o(G){return new Int32Array(G)}function u(G,ne){for(var D=[],q=0;q<G;q++)D.push(new ne);return D}function d(G,ne){var D=[];return(function q(z,O,Q){for(var ae=Q[O],se=0;se<ae&&(z.push(Q.length>O+1?[]:new ne),!(Q.length<O+1));se++)q(z[se],O+1,Q)})(D,0,G),D}var f=function(){var G=this;function ne(h,g){for(var w=1<<g-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function D(h,g,w,j,I){e(!(j%w));do h[g+(j-=w)]=I;while(0<j)}function q(h,g,w,j,I){if(e(2328>=I),512>=I)var U=o(512);else if((U=o(I))==null)return 0;return(function($,V,J,ie,xe,Ce){var le,ke,Pe=V,Fe=1<<J,Le=o(16),Ie=o(16);for(e(xe!=0),e(ie!=null),e($!=null),e(0<J),ke=0;ke<xe;++ke){if(15<ie[ke])return 0;++Le[ie[ke]]}if(Le[0]==xe)return 0;for(Ie[1]=0,le=1;15>le;++le){if(Le[le]>1<<le)return 0;Ie[le+1]=Ie[le]+Le[le]}for(ke=0;ke<xe;++ke)le=ie[ke],0<ie[ke]&&(Ce[Ie[le]++]=ke);if(Ie[15]==1)return(ie=new z).g=0,ie.value=Ce[0],D($,Pe,1,Fe,ie),Fe;var Oe,Be=-1,qe=Fe-1,pt=0,nt=1,$t=1,lt=1<<J;for(ke=0,le=1,xe=2;le<=J;++le,xe<<=1){if(nt+=$t<<=1,0>($t-=Le[le]))return 0;for(;0<Le[le];--Le[le])(ie=new z).g=le,ie.value=Ce[ke++],D($,Pe+pt,xe,lt,ie),pt=ne(pt,le)}for(le=J+1,xe=2;15>=le;++le,xe<<=1){if(nt+=$t<<=1,0>($t-=Le[le]))return 0;for(;0<Le[le];--Le[le]){if(ie=new z,(pt&qe)!=Be){for(Pe+=lt,Oe=1<<(Be=le)-J;15>Be&&!(0>=(Oe-=Le[Be]));)++Be,Oe<<=1;Fe+=lt=1<<(Oe=Be-J),$[V+(Be=pt&qe)].g=Oe+J,$[V+Be].value=Pe-V-Be}ie.g=le-J,ie.value=Ce[ke++],D($,Pe+(pt>>J),xe,lt,ie),pt=ne(pt,le)}}return nt!=2*Ie[15]-1?0:Fe})(h,g,w,j,I,U)}function z(){this.value=this.g=0}function O(){this.value=this.g=0}function Q(){this.G=u(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Xs,O)}function ae(h,g,w,j){e(h!=null),e(g!=null),e(2147483648>j),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=w,h.Jd=g,h.Yc=w+j,h.Zc=4<=j?w+j-4+1:w,Ne(h)}function se(h,g){for(var w=0;0<g--;)w|=me(h,128)<<g;return w}function M(h,g){var w=se(h,g);return Ae(h)?-w:w}function ce(h,g,w,j){var I,U=0;for(e(h!=null),e(g!=null),e(4294967288>j),h.Sb=j,h.Ra=0,h.u=0,h.h=0,4<j&&(j=4),I=0;I<j;++I)U+=g[w+I]<<8*I;h.Ra=U,h.bb=j,h.oa=g,h.pa=w}function be(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ta-8>>>0,++h.bb,h.u-=8;oe(h)&&(h.h=1,h.u=0)}function X(h,g){if(e(0<=g),!h.h&&g<=Bs){var w=re(h)&Us[g];return h.u+=g,be(h),w}return h.h=1,h.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(h){return h.Ra>>>(h.u&Ta-1)>>>0}function oe(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ta}function he(h,g){h.u=g,h.h=oe(h)}function we(h){h.u>=Di&&(e(h.u>=Di),be(h))}function Ne(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ae(h){return se(h,1)}function me(h,g){var w=h.Ca;0>h.b&&Ne(h);var j=h.b,I=w*g>>>8,U=(h.I>>>j>I)+0;for(U?(w-=I,h.I-=I+1<<j>>>0):w=I+1,j=w,I=0;256<=j;)I+=8,j>>=8;return j=7^I+na[j],h.b-=j,h.Ca=(w<<j)-1,U}function Ue(h,g,w){h[g+0]=w>>24&255,h[g+1]=w>>16&255,h[g+2]=w>>8&255,h[g+3]=255&w}function ze(h,g){return h[g+0]|h[g+1]<<8}function Ve(h,g){return ze(h,g)|h[g+2]<<16}function Xe(h,g){return ze(h,g)|ze(h,g+2)<<16}function ee(h,g){var w=1<<g;return e(h!=null),e(0<g),h.X=o(w),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function Ke(h,g){e(h!=null),e(g!=null),e(h.Xa==g.Xa),s(g.X,0,h.X,0,1<<g.Xa)}function Lt(){this.X=[],this.Xa=this.Mb=0}function xt(h,g,w,j){e(w!=null),e(j!=null);var I=w[0],U=j[0];return I==0&&(I=(h*U+g/2)/g),U==0&&(U=(g*I+h/2)/h),0>=I||0>=U?0:(w[0]=I,j[0]=U,1)}function $e(h,g){return h+(1<<g)-1>>>g}function ct(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function et(h,g){G[g]=function(w,j,I,U,$,V,J){var ie;for(ie=0;ie<$;++ie){var xe=G[h](V[J+ie-1],I,U+ie);V[J+ie]=ct(w[j+ie],xe)}}}function vt(){this.ud=this.hd=this.jd=0}function mt(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function qt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function yt(h,g){return qt(h+(h-g+.5>>1))}function It(h,g,w){return Math.abs(g-w)-Math.abs(h-w)}function Yt(h,g,w,j,I,U,$){for(j=U[$-1],w=0;w<I;++w)U[$+w]=j=ct(h[g+w],j)}function Kt(h,g,w,j,I){var U;for(U=0;U<w;++U){var $=h[g+U],V=$>>8&255,J=16711935&(J=(J=16711935&$)+((V<<16)+V));j[I+U]=(4278255360&$)+J>>>0}}function ot(h,g){g.jd=255&h,g.hd=h>>8&255,g.ud=h>>16&255}function ft(h,g,w,j,I,U){var $;for($=0;$<j;++$){var V=g[w+$],J=V>>>8,ie=V,xe=255&(xe=(xe=V>>>16)+((h.jd<<24>>24)*(J<<24>>24)>>>5));ie=255&(ie=(ie+=(h.hd<<24>>24)*(J<<24>>24)>>>5)+((h.ud<<24>>24)*(xe<<24>>24)>>>5)),I[U+$]=(4278255360&V)+(xe<<16)+ie}}function it(h,g,w,j,I){G[g]=function(U,$,V,J,ie,xe,Ce,le,ke){for(J=Ce;J<le;++J)for(Ce=0;Ce<ke;++Ce)ie[xe++]=I(V[j(U[$++])])},G[h]=function(U,$,V,J,ie,xe,Ce){var le=8>>U.b,ke=U.Ea,Pe=U.K[0],Fe=U.w;if(8>le)for(U=(1<<U.b)-1,Fe=(1<<le)-1;$<V;++$){var Le,Ie=0;for(Le=0;Le<ke;++Le)Le&U||(Ie=j(J[ie++])),xe[Ce++]=I(Pe[Ie&Fe]),Ie>>=le}else G["VP8LMapColor"+w](J,ie,Pe,Fe,xe,Ce,$,V,ke)}}function Ar(h,g,w,j,I){for(w=g+w;g<w;){var U=h[g++];j[I++]=U>>16&255,j[I++]=U>>8&255,j[I++]=255&U}}function Gt(h,g,w,j,I){for(w=g+w;g<w;){var U=h[g++];j[I++]=U>>16&255,j[I++]=U>>8&255,j[I++]=255&U,j[I++]=U>>24&255}}function zt(h,g,w,j,I){for(w=g+w;g<w;){var U=($=h[g++])>>16&240|$>>12&15,$=240&$|$>>28&15;j[I++]=U,j[I++]=$}}function Ut(h,g,w,j,I){for(w=g+w;g<w;){var U=($=h[g++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;j[I++]=U,j[I++]=$}}function yr(h,g,w,j,I){for(w=g+w;g<w;){var U=h[g++];j[I++]=255&U,j[I++]=U>>8&255,j[I++]=U>>16&255}}function bt(h,g,w,j,I,U){if(U==0)for(w=g+w;g<w;)Ue(j,((U=h[g++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),I+=32;else s(j,I,h,g,w)}function ur(h,g){G[g][0]=G[h+"0"],G[g][1]=G[h+"1"],G[g][2]=G[h+"2"],G[g][3]=G[h+"3"],G[g][4]=G[h+"4"],G[g][5]=G[h+"5"],G[g][6]=G[h+"6"],G[g][7]=G[h+"7"],G[g][8]=G[h+"8"],G[g][9]=G[h+"9"],G[g][10]=G[h+"10"],G[g][11]=G[h+"11"],G[g][12]=G[h+"12"],G[g][13]=G[h+"13"],G[g][14]=G[h+"0"],G[g][15]=G[h+"0"]}function kt(h){return h==Eo||h==oo||h==ul||h==dl}function Ot(){this.eb=[],this.size=this.A=this.fb=0}function lr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ot,this.f.kb=new lr,this.sd=null}function St(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Tt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ps(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function an(h,g){var w=h.T,j=g.ba.f.RGBA,I=j.eb,U=j.fb+h.ka*j.A,$=xs[g.ba.S],V=h.y,J=h.O,ie=h.f,xe=h.N,Ce=h.ea,le=h.W,ke=g.cc,Pe=g.dc,Fe=g.Mc,Le=g.Nc,Ie=h.ka,Oe=h.ka+h.T,Be=h.U,qe=Be+1>>1;for(Ie==0?$(V,J,null,null,ie,xe,Ce,le,ie,xe,Ce,le,I,U,null,null,Be):($(g.ec,g.fc,V,J,ke,Pe,Fe,Le,ie,xe,Ce,le,I,U-j.A,I,U,Be),++w);Ie+2<Oe;Ie+=2)ke=ie,Pe=xe,Fe=Ce,Le=le,xe+=h.Rc,le+=h.Rc,U+=2*j.A,$(V,(J+=2*h.fa)-h.fa,V,J,ke,Pe,Fe,Le,ie,xe,Ce,le,I,U-j.A,I,U,Be);return J+=h.fa,h.j+Oe<h.o?(s(g.ec,g.fc,V,J,Be),s(g.cc,g.dc,ie,xe,qe),s(g.Mc,g.Nc,Ce,le,qe),w--):1&Oe||$(V,J,null,null,ie,xe,Ce,le,ie,xe,Ce,le,I,U+j.A,null,null,Be),w}function Cs(h,g,w){var j=h.F,I=[h.J];if(j!=null){var U=h.U,$=g.ba.S,V=$==cl||$==ul;g=g.ba.f.RGBA;var J=[0],ie=h.ka;J[0]=h.T,h.Kb&&(ie==0?--J[0]:(--ie,I[0]-=h.width),h.j+h.ka+h.T==h.o&&(J[0]=h.o-h.j-ie));var xe=g.eb;ie=g.fb+ie*g.A,h=ol(j,I[0],h.width,U,J,xe,ie+(V?0:3),g.A),e(w==J),h&&kt($)&&ao(xe,ie,V,U,J,g.A)}return 0}function es(h){var g=h.ma,w=g.ba.S,j=11>w,I=w==Fa||w==ll||w==cl||w==Nr||w==12||kt(w);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!No(g.Oa,h,I?11:12))return 0;if(I&&kt(w)&&pr(),h.da)alert("todo:use_scaling");else{if(j){if(g.Ib=Ps,h.Kb){if(w=h.U+1>>1,g.memory=o(h.U+2*w),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+w,g.Ib=an,pr()}}else alert("todo:EmitYUV");I&&(g.Jb=Cs,j&&Jt())}if(j&&!In){for(h=0;256>h;++h)ys[h]=89858*(h-128)+yi>>oa,bs[h]=-22014*(h-128)+yi,Io[h]=-45773*(h-128),ho[h]=113618*(h-128)+yi>>oa;for(h=hr;h<gr;++h)g=76283*(h-16)+yi>>oa,Yl[h-hr]=Rr(g,255),Lu[h-hr]=Rr(g+8>>4,15);In=1}return 1}function _t(h){var g=h.ma,w=h.U,j=h.T;return e(!(1&h.ka)),0>=w||0>=j?0:(w=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,w),g.Dc+=w,1)}function Mn(h){h.ma.memory=null}function hs(h,g,w,j){return X(h,8)!=47?0:(g[0]=X(h,14)+1,w[0]=X(h,14)+1,j[0]=X(h,1),X(h,3)!=0?0:!h.h)}function mn(h,g){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+X(g,w)+1}function ts(h,g){return 120<g?g-120:1<=(w=((w=qd[g-1])>>4)*h+(8-(15&w)))?w:1;var w}function dr(h,g,w){var j=re(w),I=h[g+=255&j].g-8;return 0<I&&(he(w,w.u+8),j=re(w),g+=h[g].value,g+=j&(1<<I)-1),he(w,w.u+h[g].g),h[g].value}function Tr(h,g,w){return w.g+=h.g,w.value+=h.value<<g>>>0,e(8>=w.g),h.g}function br(h,g,w){var j=h.xc;return e((g=j==0?0:h.vc[h.md*(w>>j)+(g>>j)])<h.Wb),h.Ya[g]}function rs(h,g,w,j){var I=h.ab,U=h.c*g,$=h.C;g=$+g;var V=w,J=j;for(j=h.Ta,w=h.Ua;0<I--;){var ie=h.gc[I],xe=$,Ce=g,le=V,ke=J,Pe=(J=j,V=w,ie.Ea);switch(e(xe<Ce),e(Ce<=ie.nc),ie.hc){case 2:Zr(le,ke,(Ce-xe)*Pe,J,V);break;case 0:var Fe=xe,Le=Ce,Ie=J,Oe=V,Be=(lt=ie).Ea;Fe==0&&(sa(le,ke,null,null,1,Ie,Oe),Yt(le,ke+1,0,0,Be-1,Ie,Oe+1),ke+=Be,Oe+=Be,++Fe);for(var qe=1<<lt.b,pt=qe-1,nt=$e(Be,lt.b),$t=lt.K,lt=lt.w+(Fe>>lt.b)*nt;Fe<Le;){var Qt=$t,Vr=lt,Wt=1;for(Ii(le,ke,Ie,Oe-Be,1,Ie,Oe);Wt<Be;){var st=(Wt&~pt)+qe;st>Be&&(st=Be),(0,ro[Qt[Vr++]>>8&15])(le,ke+ +Wt,Ie,Oe+Wt-Be,st-Wt,Ie,Oe+Wt),Wt=st}ke+=Be,Oe+=Be,++Fe&pt||(lt+=nt)}Ce!=ie.nc&&s(J,V-Pe,J,V+(Ce-xe-1)*Pe,Pe);break;case 1:for(Pe=le,Le=ke,Be=(le=ie.Ea)-(Oe=le&~(Ie=(ke=1<<ie.b)-1)),Fe=$e(le,ie.b),qe=ie.K,ie=ie.w+(xe>>ie.b)*Fe;xe<Ce;){for(pt=qe,nt=ie,$t=new vt,lt=Le+Oe,Qt=Le+le;Le<lt;)ot(pt[nt++],$t),So($t,Pe,Le,ke,J,V),Le+=ke,V+=ke;Le<Qt&&(ot(pt[nt++],$t),So($t,Pe,Le,Be,J,V),Le+=Be,V+=Be),++xe&Ie||(ie+=Fe)}break;case 3:if(le==J&&ke==V&&0<ie.b){for(Le=J,le=Pe=V+(Ce-xe)*Pe-(Oe=(Ce-xe)*$e(ie.Ea,ie.b)),ke=J,Ie=V,Fe=[],Oe=(Be=Oe)-1;0<=Oe;--Oe)Fe[Oe]=ke[Ie+Oe];for(Oe=Be-1;0<=Oe;--Oe)Le[le+Oe]=Fe[Oe];eo(ie,xe,Ce,J,Pe,J,V)}else eo(ie,xe,Ce,le,ke,J,V)}V=j,J=w}J!=w&&s(j,w,V,J,U)}function Es(h,g){var w=h.V,j=h.Ba+h.c*h.C,I=g-h.C;if(e(g<=h.l.o),e(16>=I),0<I){var U=h.l,$=h.Ta,V=h.Ua,J=U.width;if(rs(h,I,w,j),I=V=[V],e((w=h.C)<(j=g)),e(U.v<U.va),j>U.o&&(j=U.o),w<U.j){var ie=U.j-w;w=U.j,I[0]+=ie*J}if(w>=j?w=0:(I[0]+=4*U.v,U.ka=w-U.j,U.U=U.va-U.v,U.T=j-w,w=1),w){if(V=V[0],11>(w=h.ca).S){var xe=w.f.RGBA,Ce=(j=w.S,I=U.U,U=U.T,ie=xe.eb,xe.A),le=U;for(xe=xe.fb+h.Ma*xe.A;0<le--;){var ke=$,Pe=V,Fe=I,Le=ie,Ie=xe;switch(j){case Wl:jo(ke,Pe,Fe,Le,Ie);break;case Fa:ia(ke,Pe,Fe,Le,Ie);break;case Eo:ia(ke,Pe,Fe,Le,Ie),ao(Le,Ie,0,Fe,1,0);break;case ju:no(ke,Pe,Fe,Le,Ie);break;case ll:bt(ke,Pe,Fe,Le,Ie,1);break;case oo:bt(ke,Pe,Fe,Le,Ie,1),ao(Le,Ie,0,Fe,1,0);break;case cl:bt(ke,Pe,Fe,Le,Ie,0);break;case ul:bt(ke,Pe,Fe,Le,Ie,0),ao(Le,Ie,1,Fe,1,0);break;case Nr:Da(ke,Pe,Fe,Le,Ie);break;case dl:Da(ke,Pe,Fe,Le,Ie),Mc(Le,Ie,Fe,1,0);break;case Hl:Ia(ke,Pe,Fe,Le,Ie);break;default:e(0)}V+=J,xe+=Ce}h.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=g,e(h.C<=h.i)}function Un(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var w=h.Ya[g].G,j=h.Ya[g].H;if(0<w[1][j[1]+0].g||0<w[2][j[2]+0].g||0<w[3][j[3]+0].g)return 0}return 1}function Hs(h,g,w,j,I,U){if(h.Z!=0){var $=h.qd,V=h.rd;for(e(Vn[h.Z]!=null);g<w;++g)Vn[h.Z]($,V,j,I,j,I,U),$=j,V=I,I+=U;h.qd=$,h.rd=V}}function Jr(h,g){var w=h.l.ma,j=w.Z==0||w.Z==1?h.l.j:h.C;if(j=h.C<j?j:h.C,e(g<=h.l.o),g>j){var I=h.l.width,U=w.ca,$=w.tb+I*j,V=h.V,J=h.Ba+h.c*j,ie=h.gc;e(h.ab==1),e(ie[0].hc==3),vi(ie[0],j,g,V,J,U,$),Hs(w,j,g,U,$,I)}h.C=h.Ma=g}function zr(h,g,w,j,I,U,$){var V=h.$/j,J=h.$%j,ie=h.m,xe=h.s,Ce=w+h.$,le=Ce;I=w+j*I;var ke=w+j*U,Pe=280+xe.ua,Fe=h.Pb?V:16777216,Le=0<xe.ua?xe.Wa:null,Ie=xe.wc,Oe=Ce<ke?br(xe,J,V):null;e(h.C<U),e(ke<=I);var Be=!1;e:for(;;){for(;Be||Ce<ke;){var qe=0;if(V>=Fe){var pt=Ce-w;e((Fe=h).Pb),Fe.wd=Fe.m,Fe.xd=pt,0<Fe.s.ua&&Ke(Fe.s.Wa,Fe.s.vb),Fe=V+Gl}if(J&Ie||(Oe=br(xe,J,V)),e(Oe!=null),Oe.Qb&&(g[Ce]=Oe.qb,Be=!0),!Be)if(we(ie),Oe.jc){qe=ie,pt=g;var nt=Ce,$t=Oe.pd[re(qe)&Xs-1];e(Oe.jc),256>$t.g?(he(qe,qe.u+$t.g),pt[nt]=$t.value,qe=0):(he(qe,qe.u+$t.g-256),e(256<=$t.value),qe=$t.value),qe==0&&(Be=!0)}else qe=dr(Oe.G[0],Oe.H[0],ie);if(ie.h)break;if(Be||256>qe){if(!Be)if(Oe.nd)g[Ce]=(Oe.qb|qe<<8)>>>0;else{if(we(ie),Be=dr(Oe.G[1],Oe.H[1],ie),we(ie),pt=dr(Oe.G[2],Oe.H[2],ie),nt=dr(Oe.G[3],Oe.H[3],ie),ie.h)break;g[Ce]=(nt<<24|Be<<16|qe<<8|pt)>>>0}if(Be=!1,++Ce,++J>=j&&(J=0,++V,$!=null&&V<=U&&!(V%16)&&$(h,V),Le!=null))for(;le<Ce;)qe=g[le++],Le.X[(506832829*qe&4294967295)>>>Le.Mb]=qe}else if(280>qe){if(qe=mn(qe-256,ie),pt=dr(Oe.G[4],Oe.H[4],ie),we(ie),pt=ts(j,pt=mn(pt,ie)),ie.h)break;if(Ce-w<pt||I-Ce<qe)break e;for(nt=0;nt<qe;++nt)g[Ce+nt]=g[Ce+nt-pt];for(Ce+=qe,J+=qe;J>=j;)J-=j,++V,$!=null&&V<=U&&!(V%16)&&$(h,V);if(e(Ce<=I),J&Ie&&(Oe=br(xe,J,V)),Le!=null)for(;le<Ce;)qe=g[le++],Le.X[(506832829*qe&4294967295)>>>Le.Mb]=qe}else{if(!(qe<Pe))break e;for(Be=qe-280,e(Le!=null);le<Ce;)qe=g[le++],Le.X[(506832829*qe&4294967295)>>>Le.Mb]=qe;qe=Ce,e(!(Be>>>(pt=Le).Xa)),g[qe]=pt.X[Be],Be=!0}Be||e(ie.h==oe(ie))}if(h.Pb&&ie.h&&Ce<I)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ke(h.s.vb,h.s.Wa);else{if(ie.h)break e;$?.(h,V>U?U:V),h.a=0,h.$=Ce-w}return 1}return h.a=3,0}function gn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,e(h!=null)}function oi(){var h=new Ge;return h==null?null:(h.a=0,h.xb=To,ur("Predictor","VP8LPredictors"),ur("Predictor","VP8LPredictors_C"),ur("PredictorAdd","VP8LPredictorsAdd"),ur("PredictorAdd","VP8LPredictorsAdd_C"),Zr=Kt,So=ft,jo=Ar,ia=Gt,Da=zt,Ia=Ut,no=yr,G.VP8LMapColor32b=Oi,G.VP8LMapColor8b=to,h)}function ns(h,g,w,j,I){var U=1,$=[h],V=[g],J=j.m,ie=j.s,xe=null,Ce=0;e:for(;;){if(w)for(;U&&X(J,1);){var le=$,ke=V,Pe=j,Fe=1,Le=Pe.m,Ie=Pe.gc[Pe.ab],Oe=X(Le,2);if(Pe.Oc&1<<Oe)U=0;else{switch(Pe.Oc|=1<<Oe,Ie.hc=Oe,Ie.Ea=le[0],Ie.nc=ke[0],Ie.K=[null],++Pe.ab,e(4>=Pe.ab),Oe){case 0:case 1:Ie.b=X(Le,3)+2,Fe=ns($e(Ie.Ea,Ie.b),$e(Ie.nc,Ie.b),0,Pe,Ie.K),Ie.K=Ie.K[0];break;case 3:var Be,qe=X(Le,8)+1,pt=16<qe?0:4<qe?1:2<qe?2:3;if(le[0]=$e(Ie.Ea,pt),Ie.b=pt,Be=Fe=ns(qe,1,0,Pe,Ie.K)){var nt,$t=qe,lt=Ie,Qt=1<<(8>>lt.b),Vr=o(Qt);if(Vr==null)Be=0;else{var Wt=lt.K[0],st=lt.w;for(Vr[0]=lt.K[0][0],nt=1;nt<1*$t;++nt)Vr[nt]=ct(Wt[st+nt],Vr[nt-1]);for(;nt<4*Qt;++nt)Vr[nt]=0;lt.K[0]=null,lt.K[0]=Vr,Be=1}}Fe=Be;break;case 2:break;default:e(0)}U=Fe}}if($=$[0],V=V[0],U&&X(J,1)&&!(U=1<=(Ce=X(J,4))&&11>=Ce)){j.a=3;break e}var Ze;if(Ze=U)t:{var en,Dt,Xt,Pr=j,jn=$,un=V,Br=Ce,xn=w,An=Pr.m,Dr=Pr.s,tr=[null],ir=1,Ir=0,ar=Pu[Br];r:for(;;){if(xn&&X(An,1)){var Gr=X(An,3)+2,Yr=$e(jn,Gr),kr=$e(un,Gr),Gn=Yr*kr;if(!ns(Yr,kr,0,Pr,tr))break r;for(tr=tr[0],Dr.xc=Gr,en=0;en<Gn;++en){var vr=tr[en]>>8&65535;tr[en]=vr,vr>=ir&&(ir=vr+1)}}if(An.h)break r;for(Dt=0;5>Dt;++Dt){var Sr=lo[Dt];!Dt&&0<Br&&(Sr+=1<<Br),Ir<Sr&&(Ir=Sr)}var dn=u(ir*ar,z),On=ir,ws=u(On,Q);if(ws==null)var tn=null;else e(65536>=On),tn=ws;var rn=o(Ir);if(tn==null||rn==null||dn==null){Pr.a=1;break r}var Yn=dn;for(en=Xt=0;en<ir;++en){var jr=tn[en],Kn=jr.G,ei=jr.H,bi=0,Pn=1,nn=0;for(Dt=0;5>Dt;++Dt){Sr=lo[Dt],Kn[Dt]=Yn,ei[Dt]=Xt,!Dt&&0<Br&&(Sr+=1<<Br);s:{var Ua,ca=Sr,Oo=Pr,Mi=rn,Du=Yn,Jc=Xt,Cr=0,wi=Oo.m,Xc=X(wi,1);if(a(Mi,0,0,ca),Xc){var Qc=X(wi,1)+1,Kl=X(wi,1),Jl=X(wi,Kl==0?1:8);Mi[Jl]=1,Qc==2&&(Mi[Jl=X(wi,8)]=1);var Ui=1}else{var Or=o(19),hn=X(wi,4)+4;if(19<hn){Oo.a=3;var sn=0;break s}for(Ua=0;Ua<hn;++Ua)Or[Bd[Ua]]=X(wi,3);var Fo=void 0,ua=void 0,Ro=Oo,Vd=Or,yn=ca,Xl=Mi,gl=0,Bi=Ro.m,_i=8,qs=u(128,z);n:for(;q(qs,0,7,Vd,19);){if(X(Bi,1)){var vl=2+2*X(Bi,3);if((Fo=2+X(Bi,vl))>yn)break n}else Fo=yn;for(ua=0;ua<yn&&Fo--;){we(Bi);var Ql=qs[0+(127&re(Bi))];he(Bi,Bi.u+Ql.g);var Ba=Ql.value;if(16>Ba)Xl[ua++]=Ba,Ba!=0&&(_i=Ba);else{var Iu=Ba==16,Zc=Ba-16,Ou=Vl[Zc],eu=X(Bi,hl[Zc])+Ou;if(ua+eu>yn)break n;for(var Fu=Iu?_i:0;0<eu--;)Xl[ua++]=Fu}}gl=1;break n}gl||(Ro.a=3),Ui=gl}(Ui=Ui&&!wi.h)&&(Cr=q(Du,Jc,8,Mi,ca)),Ui&&Cr!=0?sn=Cr:(Oo.a=3,sn=0)}if(sn==0)break r;if(Pn&&Au[Dt]==1&&(Pn=Yn[Xt].g==0),bi+=Yn[Xt].g,Xt+=sn,3>=Dt){var Mo,Zl=rn[0];for(Mo=1;Mo<Sr;++Mo)rn[Mo]>Zl&&(Zl=rn[Mo]);nn+=Zl}}if(jr.nd=Pn,jr.Qb=0,Pn&&(jr.qb=(Kn[3][ei[3]+0].value<<24|Kn[1][ei[1]+0].value<<16|Kn[2][ei[2]+0].value)>>>0,bi==0&&256>Kn[0][ei[0]+0].value&&(jr.Qb=1,jr.qb+=Kn[0][ei[0]+0].value<<8)),jr.jc=!jr.Qb&&6>nn,jr.jc){var xl,zs=jr;for(xl=0;xl<Xs;++xl){var da=xl,Ni=zs.pd[da],po=zs.G[0][zs.H[0]+da];256<=po.value?(Ni.g=po.g+256,Ni.value=po.value):(Ni.g=0,Ni.value=0,da>>=Tr(po,8,Ni),da>>=Tr(zs.G[1][zs.H[1]+da],16,Ni),da>>=Tr(zs.G[2][zs.H[2]+da],0,Ni),Tr(zs.G[3][zs.H[3]+da],24,Ni))}}}Dr.vc=tr,Dr.Wb=ir,Dr.Ya=tn,Dr.yc=dn,Ze=1;break t}Ze=0}if(!(U=Ze)){j.a=3;break e}if(0<Ce){if(ie.ua=1<<Ce,!ee(ie.Wa,Ce)){j.a=1,U=0;break e}}else ie.ua=0;var ec=j,tc=$,Ru=V,rc=ec.s,nc=rc.xc;if(ec.c=tc,ec.i=Ru,rc.md=$e(tc,nc),rc.wc=nc==0?-1:(1<<nc)-1,w){j.xb=Ri;break e}if((xe=o($*V))==null){j.a=1,U=0;break e}U=(U=zr(j,xe,0,$,V,V,null))&&!J.h;break e}return U?(I!=null?I[0]=xe:(e(xe==null),e(w)),j.$=0,w||gn(ie)):gn(ie),U}function Vs(h,g){var w=h.c*h.i,j=w+g+16*g;return e(h.c<=g),h.V=o(j),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+g,1)}function li(h,g){var w=h.C,j=g-w,I=h.V,U=h.Ba+h.c*w;for(e(g<=h.l.o);0<j;){var $=16<j?16:j,V=h.l.ma,J=h.l.width,ie=J*$,xe=V.ca,Ce=V.tb+J*w,le=h.Ta,ke=h.Ua;rs(h,$,I,U),Uc(le,ke,xe,Ce,ie),Hs(V,w,w+$,xe,Ce,J),j-=$,I+=$*h.c,w+=$}e(w==g),h.C=h.Ma=g}function Hi(){this.ub=this.yd=this.td=this.Rb=0}function Ci(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Bl(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function fr(){this.Yb=(function(){var h=[];return(function g(w,j,I){for(var U=I[j],$=0;$<U&&(w.push(I.length>j+1?[]:0),!(I.length<j+1));$++)g(w[$],j+1,I)})(h,0,[3,11]),h})()}function Bn(){this.jb=o(3),this.Wc=d([4,8],fr),this.Xc=d([4,17],fr)}function Ei(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ss(){this.ld=this.La=this.dd=this.tc=0}function Ls(){this.Na=this.la=0}function Ga(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _a(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fs(){this.uc=this.M=this.Nb=0,this.wa=Array(new ss),this.Y=0,this.ya=Array(new _a),this.aa=0,this.l=new Vi}function qn(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ci(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Hi,this.Kc=new Ci,this.ed=new Ei,this.Qa=new Bl,this.Ic=this.$c=this.Aa=0,this.D=new fs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,P),this.ia=0,this.pb=u(4,Ga),this.Pa=new Bn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qn),this.Hd=0,this.rb=Array(new Ls),this.sb=0,this.wa=Array(new ss),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _a),this.L=this.aa=0,this.gd=d([4,2],ss),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Rr(h,g){return 0>h?0:h>g?g:h}function Vi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Na(){var h=new ci;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,co||(co=Ts)),h}function Mr(h,g,w){return h.a==0&&(h.a=g,h.sc=w,h.cb=0),0}function Gi(h,g,w){return 3<=w&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function zn(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return Mr(h,2,"null VP8Io passed to VP8GetHeaders()");var w=g.data,j=g.w,I=g.ha;if(4>I)return Mr(h,7,"Truncated header.");var U=w[j+0]|w[j+1]<<8|w[j+2]<<16,$=h.Od;if($.Rb=!(1&U),$.td=U>>1&7,$.yd=U>>4&1,$.ub=U>>5,3<$.td)return Mr(h,3,"Incorrect keyframe parameters.");if(!$.yd)return Mr(h,4,"Frame not displayable.");j+=3,I-=3;var V=h.Kc;if($.Rb){if(7>I)return Mr(h,7,"cannot parse picture header");if(!Gi(w,j,I))return Mr(h,3,"Bad code word");V.c=16383&(w[j+4]<<8|w[j+3]),V.Td=w[j+4]>>6,V.i=16383&(w[j+6]<<8|w[j+5]),V.Ud=w[j+6]>>6,j+=7,I-=7,h.za=V.c+15>>4,h.Ub=V.i+15>>4,g.width=V.c,g.height=V.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,a((U=h.Pa).jb,0,255,U.jb.length),e((U=h.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,a(U.Zb,0,0,U.Zb.length),a(U.Lb,0,0,U.Lb)}if($.ub>I)return Mr(h,7,"bad partition length");ae(U=h.m,w,j,$.ub),j+=$.ub,I-=$.ub,$.Rb&&(V.Ld=Ae(U),V.Kd=Ae(U)),V=h.Qa;var J,ie=h.Pa;if(e(U!=null),e(V!=null),V.Cb=Ae(U),V.Cb){if(V.Bb=Ae(U),Ae(U)){for(V.Fb=Ae(U),J=0;4>J;++J)V.Zb[J]=Ae(U)?M(U,7):0;for(J=0;4>J;++J)V.Lb[J]=Ae(U)?M(U,6):0}if(V.Bb)for(J=0;3>J;++J)ie.jb[J]=Ae(U)?se(U,8):255}else V.Bb=0;if(U.Ka)return Mr(h,3,"cannot parse segment header");if((V=h.ed).zd=Ae(U),V.Tb=se(U,6),V.wb=se(U,3),V.Pc=Ae(U),V.Pc&&Ae(U)){for(ie=0;4>ie;++ie)Ae(U)&&(V.vd[ie]=M(U,6));for(ie=0;4>ie;++ie)Ae(U)&&(V.od[ie]=M(U,6))}if(h.L=V.Tb==0?0:V.zd?1:2,U.Ka)return Mr(h,3,"cannot parse filter header");var xe=I;if(I=J=j,j=J+xe,V=xe,h.Xb=(1<<se(h.m,2))-1,xe<3*(ie=h.Xb))w=7;else{for(J+=3*ie,V-=3*ie,xe=0;xe<ie;++xe){var Ce=w[I+0]|w[I+1]<<8|w[I+2]<<16;Ce>V&&(Ce=V),ae(h.Jc[+xe],w,J,Ce),J+=Ce,V-=Ce,I+=3}ae(h.Jc[+ie],w,J,V),w=J<j?0:5}if(w!=0)return Mr(h,w,"cannot parse partitions");for(w=se(J=h.m,7),I=Ae(J)?M(J,4):0,j=Ae(J)?M(J,4):0,V=Ae(J)?M(J,4):0,ie=Ae(J)?M(J,4):0,J=Ae(J)?M(J,4):0,xe=h.Qa,Ce=0;4>Ce;++Ce){if(xe.Cb){var le=xe.Zb[Ce];xe.Fb||(le+=w)}else{if(0<Ce){h.pb[Ce]=h.pb[0];continue}le=w}var ke=h.pb[Ce];ke.Sc[0]=Lo[Rr(le+I,127)],ke.Sc[1]=fl[Rr(le+0,127)],ke.Eb[0]=2*Lo[Rr(le+j,127)],ke.Eb[1]=101581*fl[Rr(le+V,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=Lo[Rr(le+ie,117)],ke.Qc[1]=fl[Rr(le+J,127)],ke.lc=le+J}if(!$.Rb)return Mr(h,4,"Not a key frame.");for(Ae(U),$=h.Pa,w=0;4>w;++w){for(I=0;8>I;++I)for(j=0;3>j;++j)for(V=0;11>V;++V)ie=me(U,$d[w][I][j][V])?se(U,8):Eu[w][I][j][V],$.Wc[w][I].Yb[j][V]=ie;for(I=0;17>I;++I)$.Xc[w][I]=$.Wc[w][Gc[I]]}return h.kc=Ae(U),h.kc&&(h.Bd=se(U,8)),h.cb=1}function Ts(h,g,w,j,I,U,$){var V=g[I].Yb[w];for(w=0;16>I;++I){if(!me(h,V[w+0]))return I;for(;!me(h,V[w+1]);)if(V=g[++I].Yb[0],w=0,I==16)return 16;var J=g[I+1].Yb;if(me(h,V[w+2])){var ie=h,xe=0;if(me(ie,(le=V)[(Ce=w)+3]))if(me(ie,le[Ce+6])){for(V=0,Ce=2*(xe=me(ie,le[Ce+8]))+(le=me(ie,le[Ce+9+xe])),xe=0,le=Hc[Ce];le[V];++V)xe+=xe+me(ie,le[V]);xe+=3+(8<<Ce)}else me(ie,le[Ce+7])?(xe=7+2*me(ie,165),xe+=me(ie,145)):xe=5+me(ie,159);else xe=me(ie,le[Ce+4])?3+me(ie,le[Ce+5]):2;V=J[2]}else xe=1,V=J[1];J=$+Vc[I],0>(ie=h).b&&Ne(ie);var Ce,le=ie.b,ke=(Ce=ie.Ca>>1)-(ie.I>>le)>>31;--ie.b,ie.Ca+=ke,ie.Ca|=1,ie.I-=(Ce+1&ke)<<le,U[J]=((xe^ke)-ke)*j[(0<I)+0]}return 16}function Yi(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function Ds(h,g,w,j,I){I=h[g+w+32*j]+(I>>3),h[g+w+32*j]=-256&I?0>I?0:255:I}function Xr(h,g,w,j,I,U){Ds(h,g,0,w,j+I),Ds(h,g,1,w,j+U),Ds(h,g,2,w,j-U),Ds(h,g,3,w,j-I)}function $n(h){return(20091*h>>16)+h}function ka(h,g,w,j){var I,U=0,$=o(16);for(I=0;4>I;++I){var V=h[g+0]+h[g+8],J=h[g+0]-h[g+8],ie=(35468*h[g+4]>>16)-$n(h[g+12]),xe=$n(h[g+4])+(35468*h[g+12]>>16);$[U+0]=V+xe,$[U+1]=J+ie,$[U+2]=J-ie,$[U+3]=V-xe,U+=4,g++}for(I=U=0;4>I;++I)V=(h=$[U+0]+4)+$[U+8],J=h-$[U+8],ie=(35468*$[U+4]>>16)-$n($[U+12]),Ds(w,j,0,0,V+(xe=$n($[U+4])+(35468*$[U+12]>>16))),Ds(w,j,1,0,J+ie),Ds(w,j,2,0,J-ie),Ds(w,j,3,0,V-xe),U++,j+=32}function Sa(h,g,w,j){var I=h[g+0]+4,U=35468*h[g+4]>>16,$=$n(h[g+4]),V=35468*h[g+1]>>16;Xr(w,j,0,I+$,h=$n(h[g+1]),V),Xr(w,j,1,I+U,h,V),Xr(w,j,2,I-U,h,V),Xr(w,j,3,I-$,h,V)}function ui(h,g,w,j,I){ka(h,g,w,j),I&&ka(h,g+16,w,j+4)}function ps(h,g,w,j){so(h,g+0,w,j,1),so(h,g+32,w,j+128,1)}function Ki(h,g,w,j){var I;for(h=h[g+0]+4,I=0;4>I;++I)for(g=0;4>g;++g)Ds(w,j,g,I,h)}function er(h,g,w,j){h[g+0]&&sr(h,g+0,w,j),h[g+16]&&sr(h,g+16,w,j+4),h[g+32]&&sr(h,g+32,w,j+128),h[g+48]&&sr(h,g+48,w,j+128+4)}function di(h,g,w,j){var I,U=o(16);for(I=0;4>I;++I){var $=h[g+0+I]+h[g+12+I],V=h[g+4+I]+h[g+8+I],J=h[g+4+I]-h[g+8+I],ie=h[g+0+I]-h[g+12+I];U[0+I]=$+V,U[8+I]=$-V,U[4+I]=ie+J,U[12+I]=ie-J}for(I=0;4>I;++I)$=(h=U[0+4*I]+3)+U[3+4*I],V=U[1+4*I]+U[2+4*I],J=U[1+4*I]-U[2+4*I],ie=h-U[3+4*I],w[j+0]=$+V>>3,w[j+16]=ie+J>>3,w[j+32]=$-V>>3,w[j+48]=ie-J>>3,j+=64}function hi(h,g,w){var j,I=g-32,U=ls,$=255-h[I-1];for(j=0;j<w;++j){var V,J=U,ie=$+h[g-1];for(V=0;V<w;++V)h[g+V]=J[ie+h[I+V]];g+=32}}function ja(h,g){hi(h,g,4)}function fi(h,g){hi(h,g,8)}function wo(h,g){hi(h,g,16)}function Li(h,g){var w;for(w=0;16>w;++w)s(h,g+32*w,h,g-32,16)}function pi(h,g){var w;for(w=16;0<w;--w)a(h,g,h[g-1],16),g+=32}function Wn(h,g,w){var j;for(j=0;16>j;++j)a(g,w+32*j,h,16)}function Gs(h,g){var w,j=16;for(w=0;16>w;++w)j+=h[g-1+32*w]+h[g+w-32];Wn(j>>5,h,g)}function Hn(h,g){var w,j=8;for(w=0;16>w;++w)j+=h[g-1+32*w];Wn(j>>4,h,g)}function ms(h,g){var w,j=8;for(w=0;16>w;++w)j+=h[g+w-32];Wn(j>>4,h,g)}function Ji(h,g){Wn(128,h,g)}function jt(h,g,w){return h+2*g+w+2>>2}function Ys(h,g){var w,j=g-32;for(j=new Uint8Array([jt(h[j-1],h[j+0],h[j+1]),jt(h[j+0],h[j+1],h[j+2]),jt(h[j+1],h[j+2],h[j+3]),jt(h[j+2],h[j+3],h[j+4])]),w=0;4>w;++w)s(h,g+32*w,j,0,j.length)}function rl(h,g){var w=h[g-1],j=h[g-1+32],I=h[g-1+64],U=h[g-1+96];Ue(h,g+0,16843009*jt(h[g-1-32],w,j)),Ue(h,g+32,16843009*jt(w,j,I)),Ue(h,g+64,16843009*jt(j,I,U)),Ue(h,g+96,16843009*jt(I,U,U))}function Ya(h,g){var w,j=4;for(w=0;4>w;++w)j+=h[g+w-32]+h[g-1+32*w];for(j>>=3,w=0;4>w;++w)a(h,g+32*w,j,4)}function is(h,g){var w=h[g-1+0],j=h[g-1+32],I=h[g-1+64],U=h[g-1-32],$=h[g+0-32],V=h[g+1-32],J=h[g+2-32],ie=h[g+3-32];h[g+0+96]=jt(j,I,h[g-1+96]),h[g+1+96]=h[g+0+64]=jt(w,j,I),h[g+2+96]=h[g+1+64]=h[g+0+32]=jt(U,w,j),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=jt($,U,w),h[g+3+64]=h[g+2+32]=h[g+1+0]=jt(V,$,U),h[g+3+32]=h[g+2+0]=jt(J,V,$),h[g+3+0]=jt(ie,J,V)}function mi(h,g){var w=h[g+1-32],j=h[g+2-32],I=h[g+3-32],U=h[g+4-32],$=h[g+5-32],V=h[g+6-32],J=h[g+7-32];h[g+0+0]=jt(h[g+0-32],w,j),h[g+1+0]=h[g+0+32]=jt(w,j,I),h[g+2+0]=h[g+1+32]=h[g+0+64]=jt(j,I,U),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=jt(I,U,$),h[g+3+32]=h[g+2+64]=h[g+1+96]=jt(U,$,V),h[g+3+64]=h[g+2+96]=jt($,V,J),h[g+3+96]=jt(V,J,J)}function _o(h,g){var w=h[g-1+0],j=h[g-1+32],I=h[g-1+64],U=h[g-1-32],$=h[g+0-32],V=h[g+1-32],J=h[g+2-32],ie=h[g+3-32];h[g+0+0]=h[g+1+64]=U+$+1>>1,h[g+1+0]=h[g+2+64]=$+V+1>>1,h[g+2+0]=h[g+3+64]=V+J+1>>1,h[g+3+0]=J+ie+1>>1,h[g+0+96]=jt(I,j,w),h[g+0+64]=jt(j,w,U),h[g+0+32]=h[g+1+96]=jt(w,U,$),h[g+1+32]=h[g+2+96]=jt(U,$,V),h[g+2+32]=h[g+3+96]=jt($,V,J),h[g+3+32]=jt(V,J,ie)}function Aa(h,g){var w=h[g+0-32],j=h[g+1-32],I=h[g+2-32],U=h[g+3-32],$=h[g+4-32],V=h[g+5-32],J=h[g+6-32],ie=h[g+7-32];h[g+0+0]=w+j+1>>1,h[g+1+0]=h[g+0+64]=j+I+1>>1,h[g+2+0]=h[g+1+64]=I+U+1>>1,h[g+3+0]=h[g+2+64]=U+$+1>>1,h[g+0+32]=jt(w,j,I),h[g+1+32]=h[g+0+96]=jt(j,I,U),h[g+2+32]=h[g+1+96]=jt(I,U,$),h[g+3+32]=h[g+2+96]=jt(U,$,V),h[g+3+64]=jt($,V,J),h[g+3+96]=jt(V,J,ie)}function Xi(h,g){var w=h[g-1+0],j=h[g-1+32],I=h[g-1+64],U=h[g-1+96];h[g+0+0]=w+j+1>>1,h[g+2+0]=h[g+0+32]=j+I+1>>1,h[g+2+32]=h[g+0+64]=I+U+1>>1,h[g+1+0]=jt(w,j,I),h[g+3+0]=h[g+1+32]=jt(j,I,U),h[g+3+32]=h[g+1+64]=jt(I,U,U),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=U}function Ka(h,g){var w=h[g-1+0],j=h[g-1+32],I=h[g-1+64],U=h[g-1+96],$=h[g-1-32],V=h[g+0-32],J=h[g+1-32],ie=h[g+2-32];h[g+0+0]=h[g+2+32]=w+$+1>>1,h[g+0+32]=h[g+2+64]=j+w+1>>1,h[g+0+64]=h[g+2+96]=I+j+1>>1,h[g+0+96]=U+I+1>>1,h[g+3+0]=jt(V,J,ie),h[g+2+0]=jt($,V,J),h[g+1+0]=h[g+3+32]=jt(w,$,V),h[g+1+32]=h[g+3+64]=jt(j,w,$),h[g+1+64]=h[g+3+96]=jt(I,j,w),h[g+1+96]=jt(U,I,j)}function Is(h,g){var w;for(w=0;8>w;++w)s(h,g+32*w,h,g-32,8)}function Qi(h,g){var w;for(w=0;8>w;++w)a(h,g,h[g-1],8),g+=32}function kn(h,g,w){var j;for(j=0;8>j;++j)a(g,w+32*j,h,8)}function Zi(h,g){var w,j=8;for(w=0;8>w;++w)j+=h[g+w-32]+h[g-1+32*w];kn(j>>4,h,g)}function Pa(h,g){var w,j=4;for(w=0;8>w;++w)j+=h[g+w-32];kn(j>>3,h,g)}function Ja(h,g){var w,j=4;for(w=0;8>w;++w)j+=h[g-1+32*w];kn(j>>3,h,g)}function Ca(h,g){kn(128,h,g)}function Os(h,g,w){var j=h[g-w],I=h[g+0],U=3*(I-j)+Fi[1020+h[g-2*w]-h[g+w]],$=Co[112+(U+4>>3)];h[g-w]=ls[255+j+Co[112+(U+3>>3)]],h[g+0]=ls[255+I-$]}function Ea(h,g,w,j){var I=h[g+0],U=h[g+w];return Qs[255+h[g-2*w]-h[g-w]]>j||Qs[255+U-I]>j}function ea(h,g,w,j){return 4*Qs[255+h[g-w]-h[g+0]]+Qs[255+h[g-2*w]-h[g+w]]<=j}function vn(h,g,w,j,I){var U=h[g-3*w],$=h[g-2*w],V=h[g-w],J=h[g+0],ie=h[g+w],xe=h[g+2*w],Ce=h[g+3*w];return 4*Qs[255+V-J]+Qs[255+$-ie]>j?0:Qs[255+h[g-4*w]-U]<=I&&Qs[255+U-$]<=I&&Qs[255+$-V]<=I&&Qs[255+Ce-xe]<=I&&Qs[255+xe-ie]<=I&&Qs[255+ie-J]<=I}function as(h,g,w,j){var I=2*j+1;for(j=0;16>j;++j)ea(h,g+j,w,I)&&Os(h,g+j,w)}function Ks(h,g,w,j){var I=2*j+1;for(j=0;16>j;++j)ea(h,g+j*w,1,I)&&Os(h,g+j*w,1)}function Xa(h,g,w,j){var I;for(I=3;0<I;--I)as(h,g+=4*w,w,j)}function ta(h,g,w,j){var I;for(I=3;0<I;--I)Ks(h,g+=4,w,j)}function on(h,g,w,j,I,U,$,V){for(U=2*U+1;0<I--;){if(vn(h,g,w,U,$))if(Ea(h,g,w,V))Os(h,g,w);else{var J=h,ie=g,xe=w,Ce=J[ie-2*xe],le=J[ie-xe],ke=J[ie+0],Pe=J[ie+xe],Fe=J[ie+2*xe],Le=27*(Oe=Fi[1020+3*(ke-le)+Fi[1020+Ce-Pe]])+63>>7,Ie=18*Oe+63>>7,Oe=9*Oe+63>>7;J[ie-3*xe]=ls[255+J[ie-3*xe]+Oe],J[ie-2*xe]=ls[255+Ce+Ie],J[ie-xe]=ls[255+le+Le],J[ie+0]=ls[255+ke-Le],J[ie+xe]=ls[255+Pe-Ie],J[ie+2*xe]=ls[255+Fe-Oe]}g+=j}}function Fs(h,g,w,j,I,U,$,V){for(U=2*U+1;0<I--;){if(vn(h,g,w,U,$))if(Ea(h,g,w,V))Os(h,g,w);else{var J=h,ie=g,xe=w,Ce=J[ie-xe],le=J[ie+0],ke=J[ie+xe],Pe=Co[112+(4+(Fe=3*(le-Ce))>>3)],Fe=Co[112+(Fe+3>>3)],Le=Pe+1>>1;J[ie-2*xe]=ls[255+J[ie-2*xe]+Le],J[ie-xe]=ls[255+Ce+Fe],J[ie+0]=ls[255+le-Pe],J[ie+xe]=ls[255+ke-Le]}g+=j}}function Ur(h,g,w,j,I,U){on(h,g,w,1,16,j,I,U)}function C(h,g,w,j,I,U){on(h,g,1,w,16,j,I,U)}function ve(h,g,w,j,I,U){var $;for($=3;0<$;--$)Fs(h,g+=4*w,w,1,16,j,I,U)}function v(h,g,w,j,I,U){var $;for($=3;0<$;--$)Fs(h,g+=4,1,w,16,j,I,U)}function k(h,g,w,j,I,U,$,V){on(h,g,I,1,8,U,$,V),on(w,j,I,1,8,U,$,V)}function F(h,g,w,j,I,U,$,V){on(h,g,1,I,8,U,$,V),on(w,j,1,I,8,U,$,V)}function te(h,g,w,j,I,U,$,V){Fs(h,g+4*I,I,1,8,U,$,V),Fs(w,j+4*I,I,1,8,U,$,V)}function fe(h,g,w,j,I,U,$,V){Fs(h,g+4,1,I,8,U,$,V),Fs(w,j+4,1,I,8,U,$,V)}function _e(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Tt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Me(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Re(){this.ua=0,this.Wa=new Lt,this.vb=new Lt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new z}function Ge(){this.xb=this.a=0,this.l=new Vi,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Re,this.ab=0,this.gc=u(4,Me),this.Oc=0}function Qe(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Nt(h,g,w,j,I,U,$){for(h=h==null?0:h[g+0],g=0;g<$;++g)I[U+g]=h+w[j+g]&255,h=I[U+g]}function Ft(h,g,w,j,I,U,$){var V;if(h==null)Nt(null,null,w,j,I,U,$);else for(V=0;V<$;++V)I[U+V]=h[g+V]+w[j+V]&255}function rr(h,g,w,j,I,U,$){if(h==null)Nt(null,null,w,j,I,U,$);else{var V,J=h[g+0],ie=J,xe=J;for(V=0;V<$;++V)ie=xe+(J=h[g+V])-ie,xe=w[j+V]+(-256&ie?0>ie?0:255:ie)&255,ie=J,I[U+V]=xe}}function nr(h,g,w,j){var I=g.width,U=g.o;if(e(h!=null&&g!=null),0>w||0>=j||w+j>U)return null;if(!h.Cc){if(h.ga==null){var $;if(h.ga=new Qe,($=h.ga==null)||($=g.width*g.o,e(h.Gb.length==0),h.Gb=o($),h.Uc=0,h.Gb==null?$=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,$=1),$=!$),!$){$=h.ga;var V=h.Fa,J=h.P,ie=h.qc,xe=h.mb,Ce=h.nb,le=J+1,ke=ie-1,Pe=$.l;if(e(V!=null&&xe!=null&&g!=null),Vn[0]=null,Vn[1]=Nt,Vn[2]=Ft,Vn[3]=rr,$.ca=xe,$.tb=Ce,$.c=g.width,$.i=g.height,e(0<$.c&&0<$.i),1>=ie)g=0;else if($.$a=3&V[J+0],$.Z=V[J+0]>>2&3,$.Lc=V[J+0]>>4&3,J=V[J+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||J)g=0;else if(Pe.put=_t,Pe.ac=es,Pe.bc=Mn,Pe.ma=$,Pe.width=g.width,Pe.height=g.height,Pe.Da=g.Da,Pe.v=g.v,Pe.va=g.va,Pe.j=g.j,Pe.o=g.o,$.$a)e:{e($.$a==1),g=oi();t:for(;;){if(g==null){g=0;break e}if(e($!=null),$.mc=g,g.c=$.c,g.i=$.i,g.l=$.l,g.l.ma=$,g.l.width=$.c,g.l.height=$.i,g.a=0,ce(g.m,V,le,ke),!ns($.c,$.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&Un(g.s)?($.ic=1,V=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(V),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):($.ic=0,g=Vs(g,$.c)),!g))break t;g=1;break e}$.mc=null,g=0}else g=ke>=$.c*$.i;$=!g}if($)return null;h.ga.Lc!=1?h.Ga=0:j=U-w}e(h.ga!=null),e(w+j<=U);e:{if(g=(V=h.ga).c,U=V.l.o,V.$a==0){if(le=h.rc,ke=h.Vc,Pe=h.Fa,J=h.P+1+w*g,ie=h.mb,xe=h.nb+w*g,e(J<=h.P+h.qc),V.Z!=0)for(e(Vn[V.Z]!=null),$=0;$<j;++$)Vn[V.Z](le,ke,Pe,J,ie,xe,g),le=ie,ke=xe,xe+=g,J+=g;else for($=0;$<j;++$)s(ie,xe,Pe,J,g),le=ie,ke=xe,xe+=g,J+=g;h.rc=le,h.Vc=ke}else{if(e(V.mc!=null),g=w+j,e(($=V.mc)!=null),e(g<=$.i),$.C>=g)g=1;else if(V.ic||Jt(),V.ic){V=$.V,le=$.Ba,ke=$.c;var Fe=$.i,Le=(Pe=1,J=$.$/ke,ie=$.$%ke,xe=$.m,Ce=$.s,$.$),Ie=ke*Fe,Oe=ke*g,Be=Ce.wc,qe=Le<Oe?br(Ce,ie,J):null;e(Le<=Ie),e(g<=Fe),e(Un(Ce));t:for(;;){for(;!xe.h&&Le<Oe;){if(ie&Be||(qe=br(Ce,ie,J)),e(qe!=null),we(xe),256>(Fe=dr(qe.G[0],qe.H[0],xe)))V[le+Le]=Fe,++Le,++ie>=ke&&(ie=0,++J<=g&&!(J%16)&&Jr($,J));else{if(!(280>Fe)){Pe=0;break t}Fe=mn(Fe-256,xe);var pt,nt=dr(qe.G[4],qe.H[4],xe);if(we(xe),!(Le>=(nt=ts(ke,nt=mn(nt,xe)))&&Ie-Le>=Fe)){Pe=0;break t}for(pt=0;pt<Fe;++pt)V[le+Le+pt]=V[le+Le+pt-nt];for(Le+=Fe,ie+=Fe;ie>=ke;)ie-=ke,++J<=g&&!(J%16)&&Jr($,J);Le<Oe&&ie&Be&&(qe=br(Ce,ie,J))}e(xe.h==oe(xe))}Jr($,J>g?g:J);break t}!Pe||xe.h&&Le<Ie?(Pe=0,$.a=xe.h?5:3):$.$=Le,g=Pe}else g=zr($,$.V,$.Ba,$.c,$.i,g,li);if(!g){j=0;break e}}w+j>=U&&(h.Cc=1),j=1}if(!j)return null;if(h.Cc&&((j=h.ga)!=null&&(j.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*I}function wr(h,g,w,j,I,U){for(;0<I--;){var $,V=h,J=g+(w?1:0),ie=h,xe=g+(w?0:3);for($=0;$<j;++$){var Ce=ie[xe+4*$];Ce!=255&&(Ce*=32897,V[J+4*$+0]=V[J+4*$+0]*Ce>>23,V[J+4*$+1]=V[J+4*$+1]*Ce>>23,V[J+4*$+2]=V[J+4*$+2]*Ce>>23)}g+=U}}function _r(h,g,w,j,I){for(;0<j--;){var U;for(U=0;U<w;++U){var $=h[g+2*U+0],V=15&(ie=h[g+2*U+1]),J=4369*V,ie=(240&ie|ie>>4)*J>>16;h[g+2*U+0]=(240&$|$>>4)*J>>16&240|(15&$|$<<4)*J>>16>>4&15,h[g+2*U+1]=240&ie|V}g+=I}}function Qr(h,g,w,j,I,U,$,V){var J,ie,xe=255;for(ie=0;ie<I;++ie){for(J=0;J<j;++J){var Ce=h[g+J];U[$+4*J]=Ce,xe&=Ce}g+=w,$+=V}return xe!=255}function Js(h,g,w,j,I){var U;for(U=0;U<I;++U)w[j+U]=h[g+U]>>8}function Jt(){ao=wr,Mc=_r,ol=Qr,Uc=Js}function At(h,g,w){G[h]=function(j,I,U,$,V,J,ie,xe,Ce,le,ke,Pe,Fe,Le,Ie,Oe,Be){var qe,pt=Be-1>>1,nt=V[J+0]|ie[xe+0]<<16,$t=Ce[le+0]|ke[Pe+0]<<16;e(j!=null);var lt=3*nt+$t+131074>>2;for(g(j[I+0],255&lt,lt>>16,Fe,Le),U!=null&&(lt=3*$t+nt+131074>>2,g(U[$+0],255&lt,lt>>16,Ie,Oe)),qe=1;qe<=pt;++qe){var Qt=V[J+qe]|ie[xe+qe]<<16,Vr=Ce[le+qe]|ke[Pe+qe]<<16,Wt=nt+Qt+$t+Vr+524296,st=Wt+2*(Qt+$t)>>3;lt=st+nt>>1,nt=(Wt=Wt+2*(nt+Vr)>>3)+Qt>>1,g(j[I+2*qe-1],255&lt,lt>>16,Fe,Le+(2*qe-1)*w),g(j[I+2*qe-0],255&nt,nt>>16,Fe,Le+(2*qe-0)*w),U!=null&&(lt=Wt+$t>>1,nt=st+Vr>>1,g(U[$+2*qe-1],255&lt,lt>>16,Ie,Oe+(2*qe-1)*w),g(U[$+2*qe+0],255&nt,nt>>16,Ie,Oe+(2*qe+0)*w)),nt=Qt,$t=Vr}1&Be||(lt=3*nt+$t+131074>>2,g(j[I+Be-1],255&lt,lt>>16,Fe,Le+(Be-1)*w),U!=null&&(lt=3*$t+nt+131074>>2,g(U[$+Be-1],255&lt,lt>>16,Ie,Oe+(Be-1)*w)))}}function pr(){xs[Wl]=Wd,xs[Fa]=Ra,xs[ju]=Hd,xs[ll]=Do,xs[cl]=uo,xs[Nr]=pl,xs[Hl]=Yc,xs[Eo]=Ra,xs[oo]=Do,xs[ul]=uo,xs[dl]=pl}function $r(h){return h&-16384?0>h?0:255:h>>Ma}function Tn(h,g){return $r((19077*h>>8)+(26149*g>>8)-14234)}function Sn(h,g,w){return $r((19077*h>>8)-(6419*g>>8)-(13320*w>>8)+8708)}function ln(h,g){return $r((19077*h>>8)+(33050*g>>8)-17685)}function Rs(h,g,w,j,I){j[I+0]=Tn(h,w),j[I+1]=Sn(h,g,w),j[I+2]=ln(h,g)}function Dn(h,g,w,j,I){j[I+0]=ln(h,g),j[I+1]=Sn(h,g,w),j[I+2]=Tn(h,w)}function Qa(h,g,w,j,I){var U=Sn(h,g,w);g=U<<3&224|ln(h,g)>>3,j[I+0]=248&Tn(h,w)|U>>5,j[I+1]=g}function Za(h,g,w,j,I){var U=240&ln(h,g)|15;j[I+0]=240&Tn(h,w)|Sn(h,g,w)>>4,j[I+1]=U}function nl(h,g,w,j,I){j[I+0]=255,Rs(h,g,w,j,I+1)}function sl(h,g,w,j,I){Dn(h,g,w,j,I),j[I+3]=255}function os(h,g,w,j,I){Rs(h,g,w,j,I),j[I+3]=255}function gi(h,g,w){G[h]=function(j,I,U,$,V,J,ie,xe,Ce){for(var le=xe+(-2&Ce)*w;xe!=le;)g(j[I+0],U[$+0],V[J+0],ie,xe),g(j[I+1],U[$+0],V[J+0],ie,xe+w),I+=2,++$,++J,xe+=2*w;1&Ce&&g(j[I+0],U[$+0],V[J+0],ie,xe)}}function Ti(h,g,w){return w==0?h==0?g==0?6:5:g==0?4:0:w}function ql(h,g,w,j,I){switch(h>>>30){case 3:so(g,w,j,I,0);break;case 2:Wr(g,w,j,I);break;case 1:sr(g,w,j,I)}}function Ms(h,g){var w,j,I=g.M,U=g.Nb,$=h.oc,V=h.pc+40,J=h.oc,ie=h.pc+584,xe=h.oc,Ce=h.pc+600;for(w=0;16>w;++w)$[V+32*w-1]=129;for(w=0;8>w;++w)J[ie+32*w-1]=129,xe[Ce+32*w-1]=129;for(0<I?$[V-1-32]=J[ie-1-32]=xe[Ce-1-32]=129:(a($,V-32-1,127,21),a(J,ie-32-1,127,9),a(xe,Ce-32-1,127,9)),j=0;j<h.za;++j){var le=g.ya[g.aa+j];if(0<j){for(w=-1;16>w;++w)s($,V+32*w-4,$,V+32*w+12,4);for(w=-1;8>w;++w)s(J,ie+32*w-4,J,ie+32*w+4,4),s(xe,Ce+32*w-4,xe,Ce+32*w+4,4)}var ke=h.Gd,Pe=h.Hd+j,Fe=le.ad,Le=le.Hc;if(0<I&&(s($,V-32,ke[Pe].y,0,16),s(J,ie-32,ke[Pe].f,0,8),s(xe,Ce-32,ke[Pe].ea,0,8)),le.Za){var Ie=$,Oe=V-32+16;for(0<I&&(j>=h.za-1?a(Ie,Oe,ke[Pe].y[15],4):s(Ie,Oe,ke[Pe+1].y,0,4)),w=0;4>w;w++)Ie[Oe+128+w]=Ie[Oe+256+w]=Ie[Oe+384+w]=Ie[Oe+0+w];for(w=0;16>w;++w,Le<<=2)Ie=$,Oe=V+Kc[w],Zs[le.Ob[w]](Ie,Oe),ql(Le,Fe,16*+w,Ie,Oe)}else if(Ie=Ti(j,I,le.Ob[0]),cs[Ie]($,V),Le!=0)for(w=0;16>w;++w,Le<<=2)ql(Le,Fe,16*+w,$,V+Kc[w]);for(w=le.Gc,Ie=Ti(j,I,le.Dd),vs[Ie](J,ie),vs[Ie](xe,Ce),Le=Fe,Ie=J,Oe=ie,255&(le=0|w)&&(170&le?gs(Le,256,Ie,Oe):mr(Le,256,Ie,Oe)),le=xe,Le=Ce,255&(w>>=8)&&(170&w?gs(Fe,320,le,Le):mr(Fe,320,le,Le)),I<h.Ub-1&&(s(ke[Pe].y,0,$,V+480,16),s(ke[Pe].f,0,J,ie+224,8),s(ke[Pe].ea,0,xe,Ce+224,8)),w=8*U*h.B,ke=h.sa,Pe=h.ta+16*j+16*U*h.R,Fe=h.qa,le=h.ra+8*j+w,Le=h.Ha,Ie=h.Ia+8*j+w,w=0;16>w;++w)s(ke,Pe+w*h.R,$,V+32*w,16);for(w=0;8>w;++w)s(Fe,le+w*h.B,J,ie+32*w,8),s(Le,Ie+w*h.B,xe,Ce+32*w,8)}}function La(h,g,w,j,I,U,$,V,J){var ie=[0],xe=[0],Ce=0,le=J!=null?J.kd:0,ke=J??new je;if(h==null||12>w)return 7;ke.data=h,ke.w=g,ke.ha=w,g=[g],w=[w],ke.gb=[ke.gb];e:{var Pe=g,Fe=w,Le=ke.gb;if(e(h!=null),e(Fe!=null),e(Le!=null),Le[0]=0,12<=Fe[0]&&!t(h,Pe[0],"RIFF")){if(t(h,Pe[0]+8,"WEBP")){Le=3;break e}var Ie=Xe(h,Pe[0]+4);if(12>Ie||4294967286<Ie){Le=3;break e}if(le&&Ie>Fe[0]-8){Le=7;break e}Le[0]=Ie,Pe[0]+=12,Fe[0]-=12}Le=0}if(Le!=0)return Le;for(Ie=0<ke.gb[0],w=w[0];;){e:{var Oe=h;Fe=g,Le=w;var Be=ie,qe=xe,pt=Pe=[0];if((lt=Ce=[Ce])[0]=0,8>Le[0])Le=7;else{if(!t(Oe,Fe[0],"VP8X")){if(Xe(Oe,Fe[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var nt=Xe(Oe,Fe[0]+8),$t=1+Ve(Oe,Fe[0]+12);if(2147483648<=$t*(Oe=1+Ve(Oe,Fe[0]+15))){Le=3;break e}pt!=null&&(pt[0]=nt),Be!=null&&(Be[0]=$t),qe!=null&&(qe[0]=Oe),Fe[0]+=18,Le[0]-=18,lt[0]=1}Le=0}}if(Ce=Ce[0],Pe=Pe[0],Le!=0)return Le;if(Fe=!!(2&Pe),!Ie&&Ce)return 3;if(U!=null&&(U[0]=!!(16&Pe)),$!=null&&($[0]=Fe),V!=null&&(V[0]=0),$=ie[0],Pe=xe[0],Ce&&Fe&&J==null){Le=0;break}if(4>w){Le=7;break}if(Ie&&Ce||!Ie&&!Ce&&!t(h,g[0],"ALPH")){w=[w],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{nt=h,Le=g,Ie=w;var lt=ke.gb;Be=ke.na,qe=ke.P,pt=ke.Sa,$t=22,e(nt!=null),e(Ie!=null),Oe=Le[0];var Qt=Ie[0];for(e(Be!=null),e(pt!=null),Be[0]=null,qe[0]=null,pt[0]=0;;){if(Le[0]=Oe,Ie[0]=Qt,8>Qt){Le=7;break e}var Vr=Xe(nt,Oe+4);if(4294967286<Vr){Le=3;break e}var Wt=8+Vr+1&-2;if($t+=Wt,0<lt&&$t>lt){Le=3;break e}if(!t(nt,Oe,"VP8 ")||!t(nt,Oe,"VP8L")){Le=0;break e}if(Qt[0]<Wt){Le=7;break e}t(nt,Oe,"ALPH")||(Be[0]=nt,qe[0]=Oe+8,pt[0]=Vr),Oe+=Wt,Qt-=Wt}}if(w=w[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],Le!=0)break}w=[w],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(lt=h,Le=g,Ie=w,Be=ke.gb[0],qe=ke.Ja,pt=ke.xa,nt=Le[0],Oe=!t(lt,nt,"VP8 "),$t=!t(lt,nt,"VP8L"),e(lt!=null),e(Ie!=null),e(qe!=null),e(pt!=null),8>Ie[0])Le=7;else{if(Oe||$t){if(lt=Xe(lt,nt+4),12<=Be&&lt>Be-12){Le=3;break e}if(le&&lt>Ie[0]-8){Le=7;break e}qe[0]=lt,Le[0]+=8,Ie[0]-=8,pt[0]=$t}else pt[0]=5<=Ie[0]&&lt[nt+0]==47&&!(lt[nt+4]>>5),qe[0]=Ie[0];Le=0}if(w=w[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],g=g[0],Le!=0)break;if(4294967286<ke.Ja)return 3;if(V==null||Fe||(V[0]=ke.xa?2:1),$=[$],Pe=[Pe],ke.xa){if(5>w){Le=7;break}V=$,le=Pe,Fe=U,h==null||5>w?h=0:5<=w&&h[g+0]==47&&!(h[g+4]>>5)?(Ie=[0],lt=[0],Be=[0],ce(qe=new W,h,g,w),hs(qe,Ie,lt,Be)?(V!=null&&(V[0]=Ie[0]),le!=null&&(le[0]=lt[0]),Fe!=null&&(Fe[0]=Be[0]),h=1):h=0):h=0}else{if(10>w){Le=7;break}V=Pe,h==null||10>w||!Gi(h,g+3,w-3)?h=0:(le=h[g+0]|h[g+1]<<8|h[g+2]<<16,Fe=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=ke.Ja||!Fe||!h?h=0:($&&($[0]=Fe),V&&(V[0]=h),h=1))}if(!h||($=$[0],Pe=Pe[0],Ce&&(ie[0]!=$||xe[0]!=Pe)))return 3;J!=null&&(J[0]=ke,J.offset=g-J.w,e(4294967286>g-J.w),e(J.offset==J.ha-w));break}return Le==0||Le==7&&Ce&&J==null?(U!=null&&(U[0]|=ke.na!=null&&0<ke.na.length),j!=null&&(j[0]=$),I!=null&&(I[0]=Pe),0):Le}function No(h,g,w){var j=g.width,I=g.height,U=0,$=0,V=j,J=I;if(g.Da=h!=null&&0<h.Da,g.Da&&(V=h.cd,J=h.bd,U=h.v,$=h.j,11>w||(U&=-2,$&=-2),0>U||0>$||0>=V||0>=J||U+V>j||$+J>I))return 0;if(g.v=U,g.j=$,g.va=U+V,g.o=$+J,g.U=V,g.T=J,g.da=h!=null&&0<h.da,g.da){if(!xt(V,J,w=[h.ib],U=[h.hb]))return 0;g.ib=w[0],g.hb=U[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*j/4&&g.hb<3*I/4,g.Kb=0),1}function ko(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function ra(h,g,w,j){if(j==null||0>=h||0>=g)return 2;if(w!=null){if(w.Da){var I=w.cd,U=w.bd,$=-2&w.v,V=-2&w.j;if(0>$||0>V||0>=I||0>=U||$+I>h||V+U>g)return 2;h=I,g=U}if(w.da){if(!xt(h,g,I=[w.ib],U=[w.hb]))return 2;h=I[0],g=U[0]}}j.width=h,j.height=g;e:{var J=j.width,ie=j.height;if(h=j.S,0>=J||0>=ie||!(h>=Wl&&13>h))h=2;else{if(0>=j.Rd&&j.sd==null){$=U=I=g=0;var xe=(V=J*ml[h])*ie;if(11>h||(U=(ie+1)/2*(g=(J+1)/2),h==12&&($=(I=J)*ie)),(ie=o(xe+2*U+$))==null){h=1;break e}j.sd=ie,11>h?((J=j.f.RGBA).eb=ie,J.fb=0,J.A=V,J.size=xe):((J=j.f.kb).y=ie,J.O=0,J.fa=V,J.Fd=xe,J.f=ie,J.N=0+xe,J.Ab=g,J.Cd=U,J.ea=ie,J.W=0+xe+U,J.Db=g,J.Ed=U,h==12&&(J.F=ie,J.J=0+xe+2*U),J.Tc=$,J.lb=I)}if(g=1,I=j.S,U=j.width,$=j.height,I>=Wl&&13>I)if(11>I)h=j.f.RGBA,g&=(V=Math.abs(h.A))*($-1)+U<=h.size,g&=V>=U*ml[I],g&=h.eb!=null;else{h=j.f.kb,V=(U+1)/2,xe=($+1)/2,J=Math.abs(h.fa),ie=Math.abs(h.Ab);var Ce=Math.abs(h.Db),le=Math.abs(h.lb),ke=le*($-1)+U;g&=J*($-1)+U<=h.Fd,g&=ie*(xe-1)+V<=h.Cd,g=(g&=Ce*(xe-1)+V<=h.Ed)&J>=U&ie>=V&Ce>=V,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,I==12&&(g&=le>=U,g&=ke<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||w!=null&&w.fd&&(h=ko(j)),h}var Xs=64,Us=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bs=24,Ta=32,Di=8,na=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(h){return h},G.Predictor2=function(h,g,w){return g[w+0]},G.Predictor3=function(h,g,w){return g[w+1]},G.Predictor4=function(h,g,w){return g[w-1]},G.Predictor5=function(h,g,w){return mt(mt(h,g[w+1]),g[w+0])},G.Predictor6=function(h,g,w){return mt(h,g[w-1])},G.Predictor7=function(h,g,w){return mt(h,g[w+0])},G.Predictor8=function(h,g,w){return mt(g[w-1],g[w+0])},G.Predictor9=function(h,g,w){return mt(g[w+0],g[w+1])},G.Predictor10=function(h,g,w){return mt(mt(h,g[w-1]),mt(g[w+0],g[w+1]))},G.Predictor11=function(h,g,w){var j=g[w+0];return 0>=It(j>>24&255,h>>24&255,(g=g[w-1])>>24&255)+It(j>>16&255,h>>16&255,g>>16&255)+It(j>>8&255,h>>8&255,g>>8&255)+It(255&j,255&h,255&g)?j:h},G.Predictor12=function(h,g,w){var j=g[w+0];return(qt((h>>24&255)+(j>>24&255)-((g=g[w-1])>>24&255))<<24|qt((h>>16&255)+(j>>16&255)-(g>>16&255))<<16|qt((h>>8&255)+(j>>8&255)-(g>>8&255))<<8|qt((255&h)+(255&j)-(255&g)))>>>0},G.Predictor13=function(h,g,w){var j=g[w-1];return(yt((h=mt(h,g[w+0]))>>24&255,j>>24&255)<<24|yt(h>>16&255,j>>16&255)<<16|yt(h>>8&255,j>>8&255)<<8|yt(255&h,255&j))>>>0};var sa=G.PredictorAdd0;G.PredictorAdd1=Yt,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var Ii=G.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Zr,eo=G.ColorIndexInverseTransform,Oi=G.MapARGB,vi=G.VP8LColorIndexInverseTransformAlpha,to=G.MapAlpha,ro=G.VP8LPredictorsAdd=[];ro.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var So,jo,ia,Da,Ia,no,Oa,so,Wr,gs,sr,mr,Hr,cn,xi,il,Ao,aa,zl,Po,$l,Rc,al,io,ao,Mc,ol,Uc,Bc=o(511),qc=o(2041),zc=o(225),$c=o(767),Wc=0,Fi=qc,Co=zc,ls=$c,Qs=Bc,Wl=0,Fa=1,ju=2,ll=3,cl=4,Nr=5,Hl=6,Eo=7,oo=8,ul=9,dl=10,hl=[2,3,7],Vl=[3,3,11],lo=[280,256,256,256,40],Au=[0,1,1,1,0],Bd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],qd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gl=8,Lo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],co=null,Hc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Vc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Cu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Eu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$d=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Gc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cs=[],Zs=[],vs=[],Ri=1,To=2,Vn=[],xs=[];At("UpsampleRgbLinePair",Rs,3),At("UpsampleBgrLinePair",Dn,3),At("UpsampleRgbaLinePair",os,4),At("UpsampleBgraLinePair",sl,4),At("UpsampleArgbLinePair",nl,4),At("UpsampleRgba4444LinePair",Za,2),At("UpsampleRgb565LinePair",Qa,2);var Wd=G.UpsampleRgbLinePair,Hd=G.UpsampleBgrLinePair,Ra=G.UpsampleRgbaLinePair,Do=G.UpsampleBgraLinePair,uo=G.UpsampleArgbLinePair,pl=G.UpsampleRgba4444LinePair,Yc=G.UpsampleRgb565LinePair,oa=16,yi=1<<oa-1,hr=-227,gr=482,Ma=6,In=0,ys=o(256),ho=o(256),Io=o(256),bs=o(256),Yl=o(gr-hr),Lu=o(gr-hr);gi("YuvToRgbRow",Rs,3),gi("YuvToBgrRow",Dn,3),gi("YuvToRgbaRow",os,4),gi("YuvToBgraRow",sl,4),gi("YuvToArgbRow",nl,4),gi("YuvToRgba4444Row",Za,2),gi("YuvToRgb565Row",Qa,2);var Kc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fo=[0,2,8],Tu=[8,7,6,4,4,2,2,2,1,1,1,1],la=1;this.WebPDecodeRGBA=function(h,g,w,j,I){var U=Fa,$=new _e,V=new Bt;$.ba=V,V.S=U,V.width=[V.width],V.height=[V.height];var J=V.width,ie=V.height,xe=new St;if(xe==null||h==null)var Ce=2;else e(xe!=null),Ce=La(h,g,w,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(Ce!=0?J=0:(J!=null&&(J[0]=xe.width[0]),ie!=null&&(ie[0]=xe.height[0]),J=1),J){V.width=V.width[0],V.height=V.height[0],j!=null&&(j[0]=V.width),I!=null&&(I[0]=V.height);e:{if(j=new Vi,(I=new je).data=h,I.w=g,I.ha=w,I.kd=1,g=[0],e(I!=null),((h=La(I.data,I.w,I.ha,null,null,null,g,null,I))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(e($!=null),j.data=I.data,j.w=I.w+I.offset,j.ha=I.ha-I.offset,j.put=_t,j.ac=es,j.bc=Mn,j.ma=$,I.xa){if((h=oi())==null){$=1;break e}if((function(le,ke){var Pe=[0],Fe=[0],Le=[0];t:for(;;){if(le==null)return 0;if(ke==null)return le.a=2,0;if(le.l=ke,le.a=0,ce(le.m,ke.data,ke.w,ke.ha),!hs(le.m,Pe,Fe,Le)){le.a=3;break t}if(le.xb=To,ke.width=Pe[0],ke.height=Fe[0],!ns(Pe[0],Fe[0],1,le,null))break t;return 1}return e(le.a!=0),0})(h,j)){if(j=(g=ra(j.width,j.height,$.Oa,$.ba))==0){t:{j=h;r:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((w=j.l)!=null),e((I=w.ma)!=null),j.xb!=0){if(j.ca=I.ba,j.tb=I.tb,e(j.ca!=null),!No(I.Oa,w,ll)){j.a=2;break r}if(!Vs(j,w.width)||w.da)break r;if((w.da||kt(j.ca.S))&&Jt(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Jt()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!ee(j.s.vb,j.s.Wa.Xa)){j.a=1;break r}j.xb=0}if(!zr(j,j.V,j.Ba,j.c,j.i,w.o,Es))break r;I.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(g=h.a)}else g=h.a}else{if((h=new Na)==null){$=1;break e}if(h.Fa=I.na,h.P=I.P,h.qc=I.Sa,zn(h,j)){if((g=ra(j.width,j.height,$.Oa,$.ba))==0){if(h.Aa=0,w=$.Oa,e((I=h)!=null),w!=null){if(0<(J=0>(J=w.Md)?0:100<J?255:255*J/100)){for(ie=xe=0;4>ie;++ie)12>(Ce=I.pb[ie]).lc&&(Ce.ia=J*Tu[0>Ce.lc?0:Ce.lc]>>3),xe|=Ce.ia;xe&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=w.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function(le,ke){if(le==null)return 0;if(ke==null)return Mr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!zn(le,ke))return 0;if(e(le.cb),ke.ac==null||ke.ac(ke)){ke.ob&&(le.L=0);var Pe=fo[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=ke.v-Pe>>4,le.zb=ke.j-Pe>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=ke.o+15+Pe>>4,le.Hb=ke.va+15+Pe>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Fe=le.ed;for(Pe=0;4>Pe;++Pe){var Le;if(le.Qa.Cb){var Ie=le.Qa.Lb[Pe];le.Qa.Fb||(Ie+=Fe.Tb)}else Ie=Fe.Tb;for(Le=0;1>=Le;++Le){var Oe=le.gd[Pe][Le],Be=Ie;if(Fe.Pc&&(Be+=Fe.vd[0],Le&&(Be+=Fe.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var qe=Be;0<Fe.wb&&(qe=4<Fe.wb?qe>>2:qe>>1)>9-Fe.wb&&(qe=9-Fe.wb),1>qe&&(qe=1),Oe.dd=qe,Oe.tc=2*Be+qe,Oe.ld=40<=Be?2:15<=Be?1:0}else Oe.tc=0;Oe.La=Le}}}Pe=0}else Mr(le,6,"Frame setup failed"),Pe=le.a;if(Pe=Pe==0){if(Pe){le.$c=0,0<le.Aa||(le.Ic=la);t:{Pe=le.Ic,Fe=4*(qe=le.za);var pt=32*qe,nt=qe+1,$t=0<le.L?qe*(0<le.Aa?2:1):0,lt=(le.Aa==2?2:1)*qe;if((Oe=Fe+832+(Le=3*(16*Pe+fo[le.L])/2*pt)+(Ie=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Oe)Pe=0;else{if(Oe>le.Vb){if(le.Vb=0,le.Ec=o(Oe),le.Fc=0,le.Ec==null){Pe=Mr(le,1,"no memory during frame initialization.");break t}le.Vb=Oe}Oe=le.Ec,Be=le.Fc,le.Ac=Oe,le.Bc=Be,Be+=Fe,le.Gd=u(pt,qn),le.Hd=0,le.rb=u(nt+1,Ls),le.sb=1,le.wa=$t?u($t,ss):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=qe),e(!0),le.oc=Oe,le.pc=Be,Be+=832,le.ya=u(lt,_a),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=qe),le.R=16*qe,le.B=8*qe,qe=(pt=fo[le.L])*le.R,pt=pt/2*le.B,le.sa=Oe,le.ta=Be+qe,le.qa=le.sa,le.ra=le.ta+16*Pe*le.R+pt,le.Ha=le.qa,le.Ia=le.ra+8*Pe*le.B+pt,le.$c=0,Be+=Le,le.mb=Ie?Oe:null,le.nb=Ie?Be:null,e(Be+Ie<=le.Fc+le.Vb),Yi(le),a(le.Ac,le.Bc,0,Fe),Pe=1}}if(Pe){if(ke.ka=0,ke.y=le.sa,ke.O=le.ta,ke.f=le.qa,ke.N=le.ra,ke.ea=le.Ha,ke.Vd=le.Ia,ke.fa=le.R,ke.Rc=le.B,ke.F=null,ke.J=0,!Wc){for(Pe=-255;255>=Pe;++Pe)Bc[255+Pe]=0>Pe?-Pe:Pe;for(Pe=-1020;1020>=Pe;++Pe)qc[1020+Pe]=-128>Pe?-128:127<Pe?127:Pe;for(Pe=-112;112>=Pe;++Pe)zc[112+Pe]=-16>Pe?-16:15<Pe?15:Pe;for(Pe=-255;510>=Pe;++Pe)$c[255+Pe]=0>Pe?0:255<Pe?255:Pe;Wc=1}Oa=di,so=ui,gs=ps,sr=Ki,mr=er,Wr=Sa,Hr=Ur,cn=C,xi=k,il=F,Ao=ve,aa=v,zl=te,Po=fe,$l=as,Rc=Ks,al=Xa,io=ta,Zs[0]=Ya,Zs[1]=ja,Zs[2]=Ys,Zs[3]=rl,Zs[4]=is,Zs[5]=_o,Zs[6]=mi,Zs[7]=Aa,Zs[8]=Ka,Zs[9]=Xi,cs[0]=Gs,cs[1]=wo,cs[2]=Li,cs[3]=pi,cs[4]=Hn,cs[5]=ms,cs[6]=Ji,vs[0]=Zi,vs[1]=fi,vs[2]=Is,vs[3]=Qi,vs[4]=Ja,vs[5]=Pa,vs[6]=Ca,Pe=1}else Pe=0}Pe&&(Pe=(function(Qt,Vr){for(Qt.M=0;Qt.M<Qt.Va;++Qt.M){var Wt,st=Qt.Jc[Qt.M&Qt.Xb],Ze=Qt.m,en=Qt;for(Wt=0;Wt<en.za;++Wt){var Dt=Ze,Xt=en,Pr=Xt.Ac,jn=Xt.Bc+4*Wt,un=Xt.zc,Br=Xt.ya[Xt.aa+Wt];if(Xt.Qa.Bb?Br.$b=me(Dt,Xt.Pa.jb[0])?2+me(Dt,Xt.Pa.jb[2]):me(Dt,Xt.Pa.jb[1]):Br.$b=0,Xt.kc&&(Br.Ad=me(Dt,Xt.Bd)),Br.Za=!me(Dt,145)+0,Br.Za){var xn=Br.Ob,An=0;for(Xt=0;4>Xt;++Xt){var Dr,tr=un[0+Xt];for(Dr=0;4>Dr;++Dr){tr=zd[Pr[jn+Dr]][tr];for(var ir=Cu[me(Dt,tr[0])];0<ir;)ir=Cu[2*ir+me(Dt,tr[ir])];tr=-ir,Pr[jn+Dr]=tr}s(xn,An,Pr,jn,4),An+=4,un[0+Xt]=tr}}else tr=me(Dt,156)?me(Dt,128)?1:3:me(Dt,163)?2:0,Br.Ob[0]=tr,a(Pr,jn,tr,4),a(un,0,tr,4);Br.Dd=me(Dt,142)?me(Dt,114)?me(Dt,183)?1:3:2:0}if(en.m.Ka)return Mr(Qt,7,"Premature end-of-partition0 encountered.");for(;Qt.ja<Qt.za;++Qt.ja){if(en=st,Dt=(Ze=Qt).rb[Ze.sb-1],Pr=Ze.rb[Ze.sb+Ze.ja],Wt=Ze.ya[Ze.aa+Ze.ja],jn=Ze.kc?Wt.Ad:0)Dt.la=Pr.la=0,Wt.Za||(Dt.Na=Pr.Na=0),Wt.Hc=0,Wt.Gc=0,Wt.ia=0;else{var Ir,ar;if(Dt=Pr,Pr=en,jn=Ze.Pa.Xc,un=Ze.ya[Ze.aa+Ze.ja],Br=Ze.pb[un.$b],Xt=un.ad,xn=0,An=Ze.rb[Ze.sb-1],tr=Dr=0,a(Xt,xn,0,384),un.Za)var Gr=0,Yr=jn[3];else{ir=o(16);var kr=Dt.Na+An.Na;if(kr=co(Pr,jn[1],kr,Br.Eb,0,ir,0),Dt.Na=An.Na=(0<kr)+0,1<kr)Oa(ir,0,Xt,xn);else{var Gn=ir[0]+3>>3;for(ir=0;256>ir;ir+=16)Xt[xn+ir]=Gn}Gr=1,Yr=jn[0]}var vr=15&Dt.la,Sr=15&An.la;for(ir=0;4>ir;++ir){var dn=1&Sr;for(Gn=ar=0;4>Gn;++Gn)vr=vr>>1|(dn=(kr=co(Pr,Yr,kr=dn+(1&vr),Br.Sc,Gr,Xt,xn))>Gr)<<7,ar=ar<<2|(3<kr?3:1<kr?2:Xt[xn+0]!=0),xn+=16;vr>>=4,Sr=Sr>>1|dn<<7,Dr=(Dr<<8|ar)>>>0}for(Yr=vr,Gr=Sr>>4,Ir=0;4>Ir;Ir+=2){for(ar=0,vr=Dt.la>>4+Ir,Sr=An.la>>4+Ir,ir=0;2>ir;++ir){for(dn=1&Sr,Gn=0;2>Gn;++Gn)kr=dn+(1&vr),vr=vr>>1|(dn=0<(kr=co(Pr,jn[2],kr,Br.Qc,0,Xt,xn)))<<3,ar=ar<<2|(3<kr?3:1<kr?2:Xt[xn+0]!=0),xn+=16;vr>>=2,Sr=Sr>>1|dn<<5}tr|=ar<<4*Ir,Yr|=vr<<4<<Ir,Gr|=(240&Sr)<<Ir}Dt.la=Yr,An.la=Gr,un.Hc=Dr,un.Gc=tr,un.ia=43690&tr?0:Br.ia,jn=!(Dr|tr)}if(0<Ze.L&&(Ze.wa[Ze.Y+Ze.ja]=Ze.gd[Wt.$b][Wt.Za],Ze.wa[Ze.Y+Ze.ja].La|=!jn),en.Ka)return Mr(Qt,7,"Premature end-of-file encountered.")}if(Yi(Qt),Ze=Vr,en=1,Wt=(st=Qt).D,Dt=0<st.L&&st.M>=st.zb&&st.M<=st.Va,st.Aa==0)t:{if(Wt.M=st.M,Wt.uc=Dt,Ms(st,Wt),en=1,Wt=(ar=st.D).Nb,Dt=(tr=fo[st.L])*st.R,Pr=tr/2*st.B,ir=16*Wt*st.R,Gn=8*Wt*st.B,jn=st.sa,un=st.ta-Dt+ir,Br=st.qa,Xt=st.ra-Pr+Gn,xn=st.Ha,An=st.Ia-Pr+Gn,Sr=(vr=ar.M)==0,Dr=vr>=st.Va-1,st.Aa==2&&Ms(st,ar),ar.uc)for(dn=(kr=st).D.M,e(kr.D.uc),ar=kr.yb;ar<kr.Hb;++ar){Gr=ar,Yr=dn;var On=(ws=(nn=kr).D).Nb;Ir=nn.R;var ws=ws.wa[ws.Y+Gr],tn=nn.sa,rn=nn.ta+16*On*Ir+16*Gr,Yn=ws.dd,jr=ws.tc;if(jr!=0)if(e(3<=jr),nn.L==1)0<Gr&&Rc(tn,rn,Ir,jr+4),ws.La&&io(tn,rn,Ir,jr),0<Yr&&$l(tn,rn,Ir,jr+4),ws.La&&al(tn,rn,Ir,jr);else{var Kn=nn.B,ei=nn.qa,bi=nn.ra+8*On*Kn+8*Gr,Pn=nn.Ha,nn=nn.Ia+8*On*Kn+8*Gr;On=ws.ld,0<Gr&&(cn(tn,rn,Ir,jr+4,Yn,On),il(ei,bi,Pn,nn,Kn,jr+4,Yn,On)),ws.La&&(aa(tn,rn,Ir,jr,Yn,On),Po(ei,bi,Pn,nn,Kn,jr,Yn,On)),0<Yr&&(Hr(tn,rn,Ir,jr+4,Yn,On),xi(ei,bi,Pn,nn,Kn,jr+4,Yn,On)),ws.La&&(Ao(tn,rn,Ir,jr,Yn,On),zl(ei,bi,Pn,nn,Kn,jr,Yn,On))}}if(st.ia&&alert("todo:DitherRow"),Ze.put!=null){if(ar=16*vr,vr=16*(vr+1),Sr?(Ze.y=st.sa,Ze.O=st.ta+ir,Ze.f=st.qa,Ze.N=st.ra+Gn,Ze.ea=st.Ha,Ze.W=st.Ia+Gn):(ar-=tr,Ze.y=jn,Ze.O=un,Ze.f=Br,Ze.N=Xt,Ze.ea=xn,Ze.W=An),Dr||(vr-=tr),vr>Ze.o&&(vr=Ze.o),Ze.F=null,Ze.J=null,st.Fa!=null&&0<st.Fa.length&&ar<vr&&(Ze.J=nr(st,Ze,ar,vr-ar),Ze.F=st.mb,Ze.F==null&&Ze.F.length==0)){en=Mr(st,3,"Could not decode alpha data.");break t}ar<Ze.j&&(tr=Ze.j-ar,ar=Ze.j,e(!(1&tr)),Ze.O+=st.R*tr,Ze.N+=st.B*(tr>>1),Ze.W+=st.B*(tr>>1),Ze.F!=null&&(Ze.J+=Ze.width*tr)),ar<vr&&(Ze.O+=Ze.v,Ze.N+=Ze.v>>1,Ze.W+=Ze.v>>1,Ze.F!=null&&(Ze.J+=Ze.v),Ze.ka=ar-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=vr-ar,en=Ze.put(Ze))}Wt+1!=st.Ic||Dr||(s(st.sa,st.ta-Dt,jn,un+16*st.R,Dt),s(st.qa,st.ra-Pr,Br,Xt+8*st.B,Pr),s(st.Ha,st.Ia-Pr,xn,An+8*st.B,Pr))}if(!en)return Mr(Qt,6,"Output aborted.")}return 1})(le,ke)),ke.bc!=null&&ke.bc(ke),Pe&=1}return Pe?(le.cb=0,Pe):0})(h,j)||(g=h.a)}}else g=h.a}g==0&&$.Oa!=null&&$.Oa.fd&&(g=ko($.ba))}$=g}U=$!=0?null:11>U?V.f.RGBA.eb:V.f.kb.y}else U=null;return U};var ml=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(G,ne){for(var D="",q=0;q<4;q++)D+=String.fromCharCode(G[ne++]);return D}function x(G,ne){return G[ne+0]|G[ne+1]<<8}function _(G,ne){return(G[ne+0]|G[ne+1]<<8|G[ne+2]<<16)>>>0}function S(G,ne){return(G[ne+0]|G[ne+1]<<8|G[ne+2]<<16|G[ne+3]<<24)>>>0}new f;var y=[0],E=[0],L=[],T=new f,A=n,Y=(function(G,ne){var D={},q=0,z=!1,O=0,Q=0;if(D.frames=[],!(function(P,W){for(var re=0;re<4;re++)if(P[W+re]!="RIFF".charCodeAt(re))return!0;return!1})(G,ne)){for(S(G,ne+=4),ne+=8;ne<G.length;){var ae=m(G,ne),se=S(G,ne+=4);ne+=4;var M=se+(1&se);switch(ae){case"VP8 ":case"VP8L":D.frames[q]===void 0&&(D.frames[q]={}),(X=D.frames[q]).src_off=z?Q:ne-8,X.src_size=O+se+8,q++,z&&(z=!1,O=0,Q=0);break;case"VP8X":(X=D.header={}).feature_flags=G[ne];var ce=ne+4;X.canvas_width=1+_(G,ce),ce+=3,X.canvas_height=1+_(G,ce),ce+=3;break;case"ALPH":z=!0,O=M+8,Q=ne-8;break;case"ANIM":(X=D.header).bgcolor=S(G,ne),ce=ne+4,X.loop_count=x(G,ce),ce+=2;break;case"ANMF":var be,X;(X=D.frames[q]={}).offset_x=2*_(G,ne),ne+=3,X.offset_y=2*_(G,ne),ne+=3,X.width=1+_(G,ne),ne+=3,X.height=1+_(G,ne),ne+=3,X.duration=_(G,ne),ne+=3,be=G[ne++],X.dispose=1&be,X.blend=be>>1&1}ae!="ANMF"&&(ne+=M)}return D}})(A,0);Y.response=A,Y.rgbaoutput=!0,Y.dataurl=!1;var B=Y.header?Y.header:null,H=Y.frames?Y.frames:null;if(B){B.loop_counter=B.loop_count,y=[B.canvas_height],E=[B.canvas_width];for(var ue=0;ue<H.length&&H[ue].blend!=0;ue++);}var de=H[0],Z=T.WebPDecodeRGBA(A,de.src_off,de.src_size,E,y);de.rgba=Z,de.imgwidth=E[0],de.imgheight=y[0];for(var K=0;K<E[0]*y[0]*4;K++)L[K]=Z[K];return this.width=E,this.height=y,this.data=L,this}(function(n){var e,t,s,a,o,u,d,f,m,x=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new f,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new u,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new u,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,f=this.internal.Matrix,m=new x}]);var _=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=P;Object.defineProperty(this,"pdf",{get:function(){return W}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ee){re=!!ee}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(ee){oe=!!ee}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(ee){isNaN(ee)||(he=ee)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(ee){isNaN(ee)||(we=ee)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(ee){var Ke;typeof ee=="number"?Ke=[ee,ee,ee,ee]:((Ke=new Array(4))[0]=ee[0],Ke[1]=ee.length>=2?ee[1]:Ke[0],Ke[2]=ee.length>=3?ee[2]:Ke[0],Ke[3]=ee.length>=4?ee[3]:Ke[1]),m.margin=Ke}});var Ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ne},set:function(ee){Ne=ee}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(ee){Ae=ee}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(ee){me=ee}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(ee){ee instanceof x&&(m=ee)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(ee){m.path=ee}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(ee){Ue=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Ke;Ke=S(ee),this.ctx.fillStyle=Ke.style,this.ctx.isFillTransparent=Ke.a===0,this.ctx.fillOpacity=Ke.a,this.pdf.setFillColor(Ke.r,Ke.g,Ke.b,{a:Ke.a}),this.pdf.setTextColor(Ke.r,Ke.g,Ke.b,{a:Ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Ke=S(ee);this.ctx.strokeStyle=Ke.style,this.ctx.isStrokeTransparent=Ke.a===0,this.ctx.strokeOpacity=Ke.a,Ke.a===0?this.pdf.setDrawColor(255,255,255):(Ke.a,this.pdf.setDrawColor(Ke.r,Ke.g,Ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var ze=null,Ve=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(ee){ze=null,Ve=null,Xe=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Ke;if(this.ctx.font=ee,(Ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var Lt=Ke[1];Ke[2];var xt=Ke[3],$e=Ke[4];Ke[5];var ct=Ke[6],et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(et==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:et==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var vt=(function(it){var Ar,Gt,zt=[],Ut=it.trim();if(Ut==="")return sf;if(Ut in Tm)return[Tm[Ut]];for(;Ut!=="";){switch(Gt=null,Ar=(Ut=Im(Ut)).charAt(0)){case'"':case"'":Gt=Xb(Ut.substring(1),Ar);break;default:Gt=Qb(Ut)}if(Gt===null||(zt.push(Gt[0]),(Ut=Im(Gt[1]))!==""&&Ut.charAt(0)!==","))return sf;Ut=Ut.replace(/^,/,"")}return zt})(ct);if(this.fontFaces){var mt=(function(it,Ar){var Gt=it.getFontList(),zt=JSON.stringify(Gt);if(ze===null||Ve!==zt){var Ut=(function(yr){var bt=[];return Object.keys(yr).forEach(function(ur){yr[ur].forEach(function(kt){var Ot=null;switch(kt){case"bold":Ot={family:ur,weight:"bold"};break;case"italic":Ot={family:ur,style:"italic"};break;case"bolditalic":Ot={family:ur,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:ur}}Ot!==null&&(Ot.ref={name:ur,style:kt},bt.push(Ot))})}),bt})(Gt);ze=(function(yr){for(var bt={},ur=0;ur<yr.length;++ur){var kt=nf(yr[ur]),Ot=kt.family,lr=kt.stretch,Bt=kt.style,St=kt.weight;bt[Ot]=bt[Ot]||{},bt[Ot][lr]=bt[Ot][lr]||{},bt[Ot][lr][Bt]=bt[Ot][lr][Bt]||{},bt[Ot][lr][Bt][St]=kt}return bt})(Ut.concat(Ar)),Ve=zt}return ze})(this.pdf,this.fontFaces),qt=vt.map(function(it){return{family:it,stretch:"normal",weight:xt,style:Lt}}),yt=(function(it,Ar,Gt){for(var zt=(Gt=Gt||{}).defaultFontFamily||"times",Ut=Object.assign({},Jb,Gt.genericFontFamilies||{}),yr=null,bt=null,ur=0;ur<Ar.length;++ur)if(Ut[(yr=nf(Ar[ur])).family]&&(yr.family=Ut[yr.family]),it.hasOwnProperty(yr.family)){bt=it[yr.family];break}if(!(bt=bt||it[zt]))throw new Error("Could not find a font-family for the rule '"+Dm(yr)+"' and default family '"+zt+"'.");if(bt=(function(kt,Ot){if(Ot[kt])return Ot[kt];var lr=If[kt],Bt=lr<=If.normal?-1:1,St=Lm(Ot,o1,lr,Bt);if(!St)throw new Error("Could not find a matching font-stretch value for "+kt);return St})(yr.stretch,bt),bt=(function(kt,Ot){if(Ot[kt])return Ot[kt];for(var lr=a1[kt],Bt=0;Bt<lr.length;++Bt)if(Ot[lr[Bt]])return Ot[lr[Bt]];throw new Error("Could not find a matching font-style for "+kt)})(yr.style,bt),!(bt=(function(kt,Ot){if(Ot[kt])return Ot[kt];if(kt===400&&Ot[500])return Ot[500];if(kt===500&&Ot[400])return Ot[400];var lr=Kb[kt],Bt=Lm(Ot,l1,lr,kt<400?-1:1);if(!Bt)throw new Error("Could not find a matching font-weight for value "+kt);return Bt})(yr.weight,bt)))throw new Error("Failed to resolve a font for the rule '"+Dm(yr)+"'.");return bt})(mt,qt);this.pdf.setFont(yt.ref.name,yt.ref.style)}else{var It="";(xt==="bold"||parseInt(xt,10)>=700||Lt==="bold")&&(It="bold"),Lt==="italic"&&(It+="italic"),It.length===0&&(It="normal");for(var Yt="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<vt.length;ot++){if(this.pdf.internal.getFont(vt[ot],It,{noFallback:!0,disableWarning:!0})!==void 0){Yt=vt[ot];break}if(It==="bolditalic"&&this.pdf.internal.getFont(vt[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=vt[ot],It="bold";else if(this.pdf.internal.getFont(vt[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=vt[ot],It="normal";break}}if(Yt===""){for(var ft=0;ft<vt.length;ft++)if(Kt[vt[ft]]){Yt=Kt[vt[ft]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,It)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};_.prototype.setLineDash=function(P){this.lineDash=P},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){H.call(this,"fill",!1)},_.prototype.stroke=function(){H.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(P,W){if(isNaN(P)||isNaN(W))throw Er.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new u(P,W));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new u(P,W)},_.prototype.closePath=function(){var P=new u(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&xr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){P=new u(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(P.x,P.y)},_.prototype.lineTo=function(P,W){if(isNaN(P)||isNaN(W))throw Er.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new u(P,W));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new u(re.x,re.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},_.prototype.quadraticCurveTo=function(P,W,re,oe){if(isNaN(re)||isNaN(oe)||isNaN(P)||isNaN(W))throw Er.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new u(re,oe)),we=this.ctx.transform.applyToPoint(new u(P,W));this.path.push({type:"qct",x1:we.x,y1:we.y,x:he.x,y:he.y}),this.ctx.lastPoint=new u(he.x,he.y)},_.prototype.bezierCurveTo=function(P,W,re,oe,he,we){if(isNaN(he)||isNaN(we)||isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe))throw Er.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ne=this.ctx.transform.applyToPoint(new u(he,we)),Ae=this.ctx.transform.applyToPoint(new u(P,W)),me=this.ctx.transform.applyToPoint(new u(re,oe));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:me.x,y2:me.y,x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new u(Ne.x,Ne.y)},_.prototype.arc=function(P,W,re,oe,he,we){if(isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe)||isNaN(he))throw Er.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var Ne=this.ctx.transform.applyToPoint(new u(P,W));P=Ne.x,W=Ne.y;var Ae=this.ctx.transform.applyToPoint(new u(0,re)),me=this.ctx.transform.applyToPoint(new u(0,0));re=Math.sqrt(Math.pow(Ae.x-me.x,2)+Math.pow(Ae.y-me.y,2))}Math.abs(he-oe)>=2*Math.PI&&(oe=0,he=2*Math.PI),this.path.push({type:"arc",x:P,y:W,radius:re,startAngle:oe,endAngle:he,counterclockwise:we})},_.prototype.arcTo=function(P,W,re,oe,he){throw new Error("arcTo not implemented.")},_.prototype.rect=function(P,W,re,oe){if(isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe))throw Er.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,W),this.lineTo(P+re,W),this.lineTo(P+re,W+oe),this.lineTo(P,W+oe),this.lineTo(P,W),this.lineTo(P+re,W),this.lineTo(P,W)},_.prototype.fillRect=function(P,W,re,oe){if(isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe))throw Er.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,W,re,oe),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},_.prototype.strokeRect=function(P,W,re,oe){if(isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe))throw Er.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(P,W,re,oe),this.stroke())},_.prototype.clearRect=function(P,W,re,oe){if(isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe))throw Er.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,W,re,oe))},_.prototype.save=function(P){P=typeof P!="boolean"||P;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},_.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(W),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(P){var W,re,oe,he;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))W=0,re=0,oe=0,he=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(we!==null)W=parseInt(we[1]),re=parseInt(we[2]),oe=parseInt(we[3]),he=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)W=parseInt(we[1]),re=parseInt(we[2]),oe=parseInt(we[3]),he=parseFloat(we[4]);else{if(he=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ne=new Zg(P);P=Ne.ok?Ne.toHex():"#000000"}P.length===4?(W=P.substring(1,2),W+=W,re=P.substring(2,3),re+=re,oe=P.substring(3,4),oe+=oe):(W=P.substring(1,3),re=P.substring(3,5),oe=P.substring(5,7)),W=parseInt(W,16),re=parseInt(re,16),oe=parseInt(oe,16)}}return{r:W,g:re,b:oe,a:he,style:P}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(P,W,re,oe){if(isNaN(W)||isNaN(re)||typeof P!="string")throw Er.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!y.call(this)){var he=M(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;q.call(this,{text:P,x:W,y:re,scale:we,angle:he,align:this.textAlign,maxWidth:oe})}},_.prototype.strokeText=function(P,W,re,oe){if(isNaN(W)||isNaN(re)||typeof P!="string")throw Er.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){oe=isNaN(oe)?void 0:oe;var he=M(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;q.call(this,{text:P,x:W,y:re,scale:we,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:oe})}},_.prototype.measureText=function(P){if(typeof P!="string")throw Er.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,re=this.pdf.internal.scaleFactor,oe=W.internal.getFontSize(),he=W.getStringUnitWidth(P)*oe/W.internal.scaleFactor;return new function(we){var Ne=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ne}}),this}({width:he*=Math.round(96*re/72*1e4)/1e4})},_.prototype.scale=function(P,W){if(isNaN(P)||isNaN(W))throw Er.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new f(P,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},_.prototype.rotate=function(P){if(isNaN(P))throw Er.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new f(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},_.prototype.translate=function(P,W){if(isNaN(P)||isNaN(W))throw Er.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new f(1,0,0,1,P,W);this.ctx.transform=this.ctx.transform.multiply(re)},_.prototype.transform=function(P,W,re,oe,he,we){if(isNaN(P)||isNaN(W)||isNaN(re)||isNaN(oe)||isNaN(he)||isNaN(we))throw Er.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ne=new f(P,W,re,oe,he,we);this.ctx.transform=this.ctx.transform.multiply(Ne)},_.prototype.setTransform=function(P,W,re,oe,he,we){P=isNaN(P)?1:P,W=isNaN(W)?0:W,re=isNaN(re)?0:re,oe=isNaN(oe)?1:oe,he=isNaN(he)?0:he,we=isNaN(we)?0:we,this.ctx.transform=new f(P,W,re,oe,he,we)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(P,W,re,oe,he,we,Ne,Ae,me){var Ue=this.pdf.getImageProperties(P),ze=1,Ve=1,Xe=1,ee=1;oe!==void 0&&Ae!==void 0&&(Xe=Ae/oe,ee=me/he,ze=Ue.width/oe*Ae/oe,Ve=Ue.height/he*me/he),we===void 0&&(we=W,Ne=re,W=0,re=0),oe!==void 0&&Ae===void 0&&(Ae=oe,me=he),oe===void 0&&Ae===void 0&&(Ae=Ue.width,me=Ue.height);var Ke=this.ctx.transform.decompose(),Lt=M(Ke.rotate.shx),xt=new f,$e=(xt=(xt=(xt=xt.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new d(we-W*Xe,Ne-re*ee,oe*ze,he*Ve));if(this.autoPaging){for(var ct,et=T.call(this,$e),vt=[],mt=0;mt<et.length;mt+=1)vt.indexOf(et[mt])===-1&&vt.push(et[mt]);B(vt);for(var qt=vt[0],yt=vt[vt.length-1],It=qt;It<yt+1;It++){this.pdf.setPage(It);var Yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Kt=It===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=It===1?0:ot+(It-2)*ft;if(this.ctx.clip_path.length!==0){var Ar=this.path;ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(ct,this.posX+this.margin[3],-it+Kt+this.ctx.prevPageLastElemOffset),ue.call(this,"fill",!0),this.path=Ar}var Gt=JSON.parse(JSON.stringify($e));Gt=Y([Gt],this.posX+this.margin[3],-it+Kt+this.ctx.prevPageLastElemOffset)[0];var zt=(It>qt||It<yt)&&L.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,ft,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,Lt),zt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Lt)};var T=function(P,W,re){var oe=[];W=W||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":oe.push(Math.floor((P.y+he)/re)+1);break;case"arc":oe.push(Math.floor((P.y+he-P.radius)/re)+1),oe.push(Math.floor((P.y+he+P.radius)/re)+1);break;case"qct":var we=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);oe.push(Math.floor((we.y+he)/re)+1),oe.push(Math.floor((we.y+we.h+he)/re)+1);break;case"bct":var Ne=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);oe.push(Math.floor((Ne.y+he)/re)+1),oe.push(Math.floor((Ne.y+Ne.h+he)/re)+1);break;case"rect":oe.push(Math.floor((P.y+he)/re)+1),oe.push(Math.floor((P.y+P.h+he)/re)+1)}for(var Ae=0;Ae<oe.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<oe[Ae];)A.call(this);return oe},A=function(){var P=this.fillStyle,W=this.strokeStyle,re=this.font,oe=this.lineCap,he=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=W,this.font=re,this.lineCap=oe,this.lineWidth=he,this.lineJoin=we},Y=function(P,W,re){for(var oe=0;oe<P.length;oe++)switch(P[oe].type){case"bct":P[oe].x2+=W,P[oe].y2+=re;case"qct":P[oe].x1+=W,P[oe].y1+=re;default:P[oe].x+=W,P[oe].y+=re}return P},B=function(P){return P.sort(function(W,re){return W-re})},H=function(P,W){var re=this.fillStyle,oe=this.strokeStyle,he=this.lineCap,we=this.lineWidth,Ne=Math.abs(we*this.ctx.transform.scaleX),Ae=this.lineJoin;if(this.autoPaging){for(var me,Ue,ze=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),Xe=[],ee=0;ee<Ve.length;ee++)if(Ve[ee].x!==void 0)for(var Ke=T.call(this,Ve[ee]),Lt=0;Lt<Ke.length;Lt+=1)Xe.indexOf(Ke[Lt])===-1&&Xe.push(Ke[Lt]);for(var xt=0;xt<Xe.length;xt++)for(;this.pdf.internal.getNumberOfPages()<Xe[xt];)A.call(this);B(Xe);for(var $e=Xe[0],ct=Xe[Xe.length-1],et=$e;et<ct+1;et++){this.pdf.setPage(et),this.fillStyle=re,this.strokeStyle=oe,this.lineCap=he,this.lineWidth=Ne,this.lineJoin=Ae;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=et===1?this.posY+this.margin[0]:this.margin[0],qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=et===1?0:qt+(et-2)*yt;if(this.ctx.clip_path.length!==0){var Yt=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(me,this.posX+this.margin[3],-It+mt+this.ctx.prevPageLastElemOffset),ue.call(this,P,!0),this.path=Yt}if(Ue=JSON.parse(JSON.stringify(ze)),this.path=Y(Ue,this.posX+this.margin[3],-It+mt+this.ctx.prevPageLastElemOffset),W===!1||et===0){var Kt=(et>$e||et<ct)&&L.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,yt,null).clip().discardPath()),ue.call(this,P,W),Kt&&this.pdf.restoreGraphicsState()}this.lineWidth=we}this.path=ze}else this.lineWidth=Ne,ue.call(this,P,W),this.lineWidth=we},ue=function(P,W){if((P!=="stroke"||W||!E.call(this))&&(P==="stroke"||W||!y.call(this))){for(var re,oe,he=[],we=this.path,Ne=0;Ne<we.length;Ne++){var Ae=we[Ne];switch(Ae.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:Ae,deltas:[],abs:[]});break;case"lt":var me=he.length;if(we[Ne-1]&&!isNaN(we[Ne-1].x)&&(re=[Ae.x-we[Ne-1].x,Ae.y-we[Ne-1].y],me>0)){for(;me>=0;me--)if(he[me-1].close!==!0&&he[me-1].begin!==!0){he[me-1].deltas.push(re),he[me-1].abs.push(Ae);break}}break;case"bct":re=[Ae.x1-we[Ne-1].x,Ae.y1-we[Ne-1].y,Ae.x2-we[Ne-1].x,Ae.y2-we[Ne-1].y,Ae.x-we[Ne-1].x,Ae.y-we[Ne-1].y],he[he.length-1].deltas.push(re);break;case"qct":var Ue=we[Ne-1].x+2/3*(Ae.x1-we[Ne-1].x),ze=we[Ne-1].y+2/3*(Ae.y1-we[Ne-1].y),Ve=Ae.x+2/3*(Ae.x1-Ae.x),Xe=Ae.y+2/3*(Ae.y1-Ae.y),ee=Ae.x,Ke=Ae.y;re=[Ue-we[Ne-1].x,ze-we[Ne-1].y,Ve-we[Ne-1].x,Xe-we[Ne-1].y,ee-we[Ne-1].x,Ke-we[Ne-1].y],he[he.length-1].deltas.push(re);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(Ae)}}oe=W?null:P==="stroke"?"stroke":"fill";for(var Lt=!1,xt=0;xt<he.length;xt++)if(he[xt].arc)for(var $e=he[xt].abs,ct=0;ct<$e.length;ct++){var et=$e[ct];et.type==="arc"?K.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,W,!Lt):z.call(this,et.x,et.y),Lt=!0}else if(he[xt].close===!0)this.pdf.internal.out("h"),Lt=!1;else if(he[xt].begin!==!0){var vt=he[xt].start.x,mt=he[xt].start.y;O.call(this,he[xt].deltas,vt,mt),Lt=!0}oe&&G.call(this,oe),W&&ne.call(this)}},de=function(P){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-re;case"top":return P+W-re;case"hanging":return P+W-2*re;case"middle":return P+W/2-re;default:return P}},Z=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(W,re){this.colorStops.push([W,re])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(P,W,re,oe,he,we,Ne,Ae,me){for(var Ue=ae.call(this,re,oe,he,we),ze=0;ze<Ue.length;ze++){var Ve=Ue[ze];ze===0&&(me?D.call(this,Ve.x1+P,Ve.y1+W):z.call(this,Ve.x1+P,Ve.y1+W)),Q.call(this,P,W,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}Ae?ne.call(this):G.call(this,Ne)},G=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ne=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,W){this.pdf.internal.out(t(P)+" "+s(W)+" m")},q=function(P){var W;switch(P.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var re,oe,he,we=this.pdf.getTextDimensions(P.text),Ne=de.call(this,P.y),Ae=Z.call(this,Ne)-we.h,me=this.ctx.transform.applyToPoint(new u(P.x,Ne));if(this.autoPaging){var Ue=this.ctx.transform.decompose(),ze=new f;ze=(ze=(ze=ze.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale);for(var Ve=this.ctx.transform.applyToRectangle(new d(P.x,Ne,we.w,we.h)),Xe=ze.applyToRectangle(new d(P.x,Ae,we.w,we.h)),ee=T.call(this,Xe),Ke=[],Lt=0;Lt<ee.length;Lt+=1)Ke.indexOf(ee[Lt])===-1&&Ke.push(ee[Lt]);B(Ke);for(var xt=Ke[0],$e=Ke[Ke.length-1],ct=xt;ct<$e+1;ct++){this.pdf.setPage(ct);var et=ct===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[2],qt=mt-this.margin[0],yt=this.pdf.internal.pageSize.width-this.margin[1],It=yt-this.margin[3],Yt=ct===1?0:vt+(ct-2)*qt;if(this.ctx.clip_path.length!==0){var Kt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(re,this.posX+this.margin[3],-1*Yt+et),ue.call(this,"fill",!0),this.path=Kt}var ot=Y([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Yt+et+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*P.scale),he=this.lineWidth,this.lineWidth=he*P.scale);var ft=this.autoPaging!=="text";if(ft||ot.y+ot.h<=mt){if(ft||ot.y>=et&&ot.x<=yt){var it=ft?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||yt-ot.x)[0],Ar=Y([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Yt+et+this.ctx.prevPageLastElemOffset)[0],Gt=ft&&(ct>xt||ct<$e)&&L.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,qt,null).clip().discardPath()),this.pdf.text(it,Ar.x,Ar.y,{angle:P.angle,align:W,renderingMode:P.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else ot.y<mt&&(this.ctx.prevPageLastElemOffset+=mt-ot.y);P.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=he)}}else P.scale>=.01&&(oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(oe*P.scale),he=this.lineWidth,this.lineWidth=he*P.scale),this.pdf.text(P.text,me.x+this.posX,me.y+this.posY,{angle:P.angle,align:W,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(oe),this.lineWidth=he)},z=function(P,W,re,oe){re=re||0,oe=oe||0,this.pdf.internal.out(t(P+re)+" "+s(W+oe)+" l")},O=function(P,W,re){return this.pdf.lines(P,W,re,null,null)},Q=function(P,W,re,oe,he,we,Ne,Ae){this.pdf.internal.out([e(a(re+P)),e(o(oe+W)),e(a(he+P)),e(o(we+W)),e(a(Ne+P)),e(o(Ae+W)),"c"].join(" "))},ae=function(P,W,re,oe){for(var he=2*Math.PI,we=Math.PI/2;W>re;)W-=he;var Ne=Math.abs(re-W);Ne<he&&oe&&(Ne=he-Ne);for(var Ae=[],me=oe?-1:1,Ue=W;Ne>1e-5;){var ze=Ue+me*Math.min(Ne,we);Ae.push(se.call(this,P,Ue,ze)),Ne-=Math.abs(ze-Ue),Ue=ze}return Ae},se=function(P,W,re){var oe=(re-W)/2,he=P*Math.cos(oe),we=P*Math.sin(oe),Ne=he,Ae=-we,me=Ne*Ne+Ae*Ae,Ue=me+Ne*he+Ae*we,ze=4/3*(Math.sqrt(2*me*Ue)-Ue)/(Ne*we-Ae*he),Ve=Ne-ze*Ae,Xe=Ae+ze*Ne,ee=Ve,Ke=-Xe,Lt=oe+W,xt=Math.cos(Lt),$e=Math.sin(Lt);return{x1:P*Math.cos(W),y1:P*Math.sin(W),x2:Ve*xt-Xe*$e,y2:Ve*$e+Xe*xt,x3:ee*xt-Ke*$e,y3:ee*$e+Ke*xt,x4:P*Math.cos(re),y4:P*Math.sin(re)}},M=function(P){return 180*P/Math.PI},ce=function(P,W,re,oe,he,we){var Ne=P+.5*(re-P),Ae=W+.5*(oe-W),me=he+.5*(re-he),Ue=we+.5*(oe-we),ze=Math.min(P,he,Ne,me),Ve=Math.max(P,he,Ne,me),Xe=Math.min(W,we,Ae,Ue),ee=Math.max(W,we,Ae,Ue);return new d(ze,Xe,Ve-ze,ee-Xe)},be=function(P,W,re,oe,he,we,Ne,Ae){var me,Ue,ze,Ve,Xe,ee,Ke,Lt,xt,$e,ct,et,vt,mt,qt=re-P,yt=oe-W,It=he-re,Yt=we-oe,Kt=Ne-he,ot=Ae-we;for(Ue=0;Ue<41;Ue++)xt=(Ke=(ze=P+(me=Ue/40)*qt)+me*((Xe=re+me*It)-ze))+me*(Xe+me*(he+me*Kt-Xe)-Ke),$e=(Lt=(Ve=W+me*yt)+me*((ee=oe+me*Yt)-Ve))+me*(ee+me*(we+me*ot-ee)-Lt),Ue==0?(ct=xt,et=$e,vt=xt,mt=$e):(ct=Math.min(ct,xt),et=Math.min(et,$e),vt=Math.max(vt,xt),mt=Math.max(mt,$e));return new d(Math.round(ct),Math.round(et),Math.round(vt-ct),Math.round(mt-et))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,W,re=(P=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:W}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(wt.API),(function(n){var e=function(u){var d,f,m,x,_,S,y,E,L,T;for(f=[],m=0,x=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;x>m;m+=4)(_=(u.charCodeAt(m)<<24)+(u.charCodeAt(m+1)<<16)+(u.charCodeAt(m+2)<<8)+u.charCodeAt(m+3))!==0?(S=(_=((_=((_=((_=(_-(T=_%85))/85)-(L=_%85))/85)-(E=_%85))/85)-(y=_%85))/85)%85,f.push(S+33,y+33,E+33,L+33,T+33)):f.push(122);return(function(A,Y){for(var B=Y;B>0;B--)A.pop()})(f,d.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var d,f,m,x,_,S=String,y="length",E=255,L="charCodeAt",T="slice",A="replace";for(u[T](-2),u=u[T](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),m=[],x=0,_=(u+=d="uuuuu"[T](u[y]%5||5))[y];_>x;x+=5)f=52200625*(u[L](x)-33)+614125*(u[L](x+1)-33)+7225*(u[L](x+2)-33)+85*(u[L](x+3)-33)+(u[L](x+4)-33),m.push(E&f>>24,E&f>>16,E&f>>8,E&f);return(function(Y,B){for(var H=B;H>0;H--)Y.pop()})(m,d[y]),S.fromCharCode.apply(S,m)},s=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var f="",m=0;m<u.length;m+=2)f+=String.fromCharCode("0x"+(u[m]+u[m+1]));return f},o=function(u){for(var d=new Uint8Array(u.length),f=u.length;f--;)d[f]=u.charCodeAt(f);return(d=Af(d)).reduce(function(m,x){return m+String.fromCharCode(x)},"")};n.processDataByFilters=function(u,d){var f=0,m=u||"",x=[];for(typeof(d=d||[])=="string"&&(d=[d]),f=0;f<d.length;f+=1)switch(d[f]){case"ASCII85Decode":case"/ASCII85Decode":m=t(m),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=e(m),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=a(m),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=s(m),x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[f]+'" is not implemented')}return{data:m,reverseChain:x.reverse().join(" ")}}})(wt.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(f,m,x){var _=new XMLHttpRequest,S=0,y=function(E){var L=E.length,T=[],A=String.fromCharCode;for(S=0;S<L;S+=1)T.push(A(255&E.charCodeAt(S)));return T.join("")};if(_.open("GET",f,!m),_.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(_.onload=function(){_.status===200?x(y(this.responseText)):x(void 0)}),_.send(null),m&&_.status===200)return y(_.responseText)})(a,o,u)}catch{}return d})(e,t,s)},n.loadImageFile=n.loadFile})(wt.API),(function(n){function e(){return(Mt.html2canvas?Promise.resolve(Mt.html2canvas):Zo(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Mt.DOMPurify?Promise.resolve(Mt.DOMPurify):Zo(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var f=xr(d);return f==="undefined"?"undefined":f==="string"||d instanceof String?"string":f==="number"||d instanceof Number?"number":f==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(d,f){var m=document.createElement(d);for(var x in f.className&&(m.className=f.className),f.innerHTML&&f.dompurify&&(m.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)m.style[x]=f.style[x];return m},o=function d(f,m){for(var x=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),_=f.firstChild;_;_=_.nextSibling)m!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||x.appendChild(d(_,m));return f.nodeType===1&&(f.nodeName==="CANVAS"?(x.width=f.width,x.height=f.height,x.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(x.value=f.value),x.addEventListener("load",function(){x.scrollTop=f.scrollTop,x.scrollLeft=f.scrollLeft},!0)),x},u=function d(f){var m=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),x=d.convert(Promise.resolve(),m);return(x=x.setProgress(1,d,1,[d])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,f){return d.__proto__=f||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,f){return this.then(function(){switch(f=f||(function(m){switch(s(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),f){case"string":return this.then(t).then(function(m){return this.set({src:a("div",{innerHTML:d,dompurify:m})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,f(this.prop.container,m)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var m=this.opt.jsPDF,x=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=x,x)for(var y=0;y<x.length;++y){var E=x[y],L=E.src.find(function(T){return T.format==="truetype"});L&&m.addFont(L.url,E.ref.name,E.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,m.context2d.save(!0),f(this.prop.container,S)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,f,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(d,f):this.outputPdf(d,f)},u.prototype.outputPdf=function(d,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,f)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(s(d)!=="object")return this;var f=Object.keys(d||{}).map(function(m){if(m in u.template.prop)return function(){this.prop[m]=d[m]};switch(m){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[m]=d[m]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(d,f){return this.then(function(){var m=d in u.template.prop?this.prop[d]:this.opt[d];return f?f(m):m})},u.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function f(m,x){return Math.floor(m*x/72*96)}return this.then(function(){(d=d||wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:f(d.inner.width,d.k),height:f(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,f,m,x){return d!=null&&(this.progress.val=d),f!=null&&(this.progress.state=f),m!=null&&(this.progress.n=m),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,f,m,x){return this.setProgress(d?this.progress.val+d:null,f||null,m?this.progress.n+m:null,x?this.progress.stack.concat(x):null)},u.prototype.then=function(d,f){var m=this;return this.thenCore(d,f,function(x,_){return m.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(S){return m.updateProgress(null,x),S}).then(x,_).then(function(S){return m.updateProgress(1),S})})},u.prototype.thenCore=function(d,f,m){m=m||Promise.prototype.then;var x=this;d&&(d=d.bind(x)),f&&(f=f.bind(x));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?x:u.convert(Object.assign({},x),Promise.prototype),S=m.call(_,d,f);return u.convert(S,x.__proto__)},u.prototype.thenExternal=function(d,f){return Promise.prototype.then.call(this,d,f)},u.prototype.thenList=function(d){var f=this;return d.forEach(function(m){f=f.thenCore(m)}),f},u.prototype.catch=function(d){d&&(d=d.bind(this));var f=Promise.prototype.catch.call(this,d);return u.convert(f,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,wt.getPageSize=function(d,f,m){if(xr(d)==="object"){var x=d;d=x.orientation,f=x.unit||f,m=x.format||m}f=f||"mm",m=m||"a4",d=(""+(d||"P")).toLowerCase();var _,S=(""+m).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+f}var E,L=0,T=0;if(y.hasOwnProperty(S))L=y[S][1]/_,T=y[S][0]/_;else try{L=m[1],T=m[0]}catch{throw new Error("Invalid format: "+m)}if(d==="p"||d==="portrait")d="p",T>L&&(E=T,T=L,L=E);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",L>T&&(E=T,T=L,L=E)}return{width:T,height:L,unit:f,k:_,orientation:d}},n.html=function(d,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(nf):null;var m=new u(f);return f.worker?m:m.from(d).doCallback()}})(wt.API),wt.API.addJS=function(n){return Fm=n,this.internal.events.subscribe("postPutResources",function(){xd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Om=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Fm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xd!==void 0&&Om!==void 0&&this.internal.out("/Names <</JavaScript "+xd+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],d=s.exec(u);if(d!=null){var f=d[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,x=[];for(o=0;o<m;o++){var _=t.internal.newObject();x.push(_);var S=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<x.length;o++)t.internal.write("(page_"+(o+1)+")"+x[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var m=0;m<s.children.length;m++)this.renderItems(s.children[m])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(wt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,d){var f,m=this.decode.DCT_DECODE,x=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(_){for(var S,y=256*_.charCodeAt(4)+_.charCodeAt(5),E=_.length,L={width:0,height:0,numcomponents:1},T=4;T<E;T+=2){if(T+=y,e.indexOf(_.charCodeAt(T+1))!==-1){S=256*_.charCodeAt(T+5)+_.charCodeAt(T+6),L={width:256*_.charCodeAt(T+7)+_.charCodeAt(T+8),height:S,numcomponents:_.charCodeAt(T+9)};break}y=256*_.charCodeAt(T+2)+_.charCodeAt(T+3)}return L})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}x={data:t,width:f.width,height:f.height,colorSpace:d,bitsPerComponent:8,filter:m,index:s,alias:a}}return x}})(wt.API),wt.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=Ob(n,{checkCrc:!0}),u=o.width,d=o.height,f=o.channels,m=o.palette,x=o.depth;a=m&&f===1?(function(K){for(var G=K.width,ne=K.height,D=K.data,q=K.palette,z=K.depth,O=!1,Q=[],ae=[],se=void 0,M=!1,ce=0,be=0;be<q.length;be++){var X=Bp(q[be],4),P=X[0],W=X[1],re=X[2],oe=X[3];Q.push(P,W,re),oe!=null&&(oe===0?(ce++,ae.length<1&&ae.push(be)):oe<255&&(M=!0))}if(M||ce>1){O=!0,ae=void 0;var he=G*ne;se=new Uint8Array(he);for(var we=new DataView(D.buffer),Ne=0;Ne<he;Ne++){var Ae=af(we,Ne,z),me=Bp(q[Ae],4)[3];se[Ne]=me}}else ce===0&&(ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:O?8:void 0,colorBytes:D,alphaBytes:se,needSMask:O,palette:Q,mask:ae}})(o):f===2||f===4?(function(K){for(var G=K.data,ne=K.width,D=K.height,q=K.channels,z=K.depth,O=q===2?"DeviceGray":"DeviceRGB",Q=q-1,ae=ne*D,se=Q,M=ae*se,ce=1*ae,be=Math.ceil(M*z/8),X=Math.ceil(ce*z/8),P=new Uint8Array(be),W=new Uint8Array(X),re=new DataView(G.buffer),oe=new DataView(P.buffer),he=new DataView(W.buffer),we=!1,Ne=0;Ne<ae;Ne++){for(var Ae=Ne*q,me=0;me<se;me++)Hm(oe,af(re,Ae+me,z),Ne*se+me,z);var Ue=af(re,Ae+se,z);Ue<(1<<z)-1&&(we=!0),Hm(he,Ue,1*Ne,z)}return{colorSpace:O,colorsPerPixel:Q,sMaskBitsPerComponent:we?z:void 0,colorBytes:P,alphaBytes:W,needSMask:we}})(o):(function(K){var G=K.data,ne=K.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ne,colorsPerPixel:ne==="DeviceGray"?1:3,colorBytes:G instanceof Uint16Array?(function(D){for(var q=D.length,z=new Uint8Array(2*q),O=new DataView(z.buffer,z.byteOffset,z.byteLength),Q=0;Q<q;Q++)O.setUint16(2*Q,D[Q],!1);return z})(G):G,needSMask:!1}})(o);var _,S,y,E=a,L=E.colorSpace,T=E.colorsPerPixel,A=E.sMaskBitsPerComponent,Y=E.colorBytes,B=E.alphaBytes,H=E.needSMask,ue=E.palette,de=E.mask,Z=null;return s!==wt.API.image_compression.NONE&&typeof Af=="function"?(Z=(function(K){var G;switch(K){case wt.API.image_compression.FAST:G=11;break;case wt.API.image_compression.MEDIUM:G=13;break;case wt.API.image_compression.SLOW:G=14;break;default:G=12}return G})(s),_=this.decode.FLATE_DECODE,S="/Predictor ".concat(Z," /Colors ").concat(T," /BitsPerComponent ").concat(x," /Columns ").concat(u),n=Bm(Y,Math.ceil(u*T*x/8),T,x,s),H&&(y=Bm(B,Math.ceil(u*A/8),1,A,s))):(_=void 0,S=void 0,n=Y,H&&(y=B)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:n,index:e,filter:_,decodeParameters:S,transparency:de,palette:ue,sMask:y,predictor:Z,width:u,height:d,bitsPerComponent:x,sMaskBitsPerComponent:A,colorSpace:L}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new r5(e),u=o.width,d=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var m={data:f,width:u,height:d},x=new of(100).encode(m,100);return n.processJPEG.call(this,x,t,s,a)},n.processGIF87A=n.processGIF89A})(wt.API),ga.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ga.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Er.log("bit decode error:"+t)}},ga.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var f=this.palette[o>>7-d&1];this.data[u+4*d]=f.blue,this.data[u+4*d+1]=f.green,this.data[u+4*d+2]=f.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ga.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,d=o>>4,f=15&o,m=this.palette[d];if(this.data[u]=m.blue,this.data[u+1]=m.green,this.data[u+2]=m.red,this.data[u+3]=255,2*a+1>=this.width)break;m=this.palette[f],this.data[u+4]=m.blue,this.data[u+4+1]=m.green,this.data[u+4+2]=m.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},ga.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ga.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,m=o>>15?255:0,x=s*this.width*4+4*a;this.data[x]=f,this.data[x+1]=d,this.data[x+2]=u,this.data[x+3]=m}this.pos+=n}},ga.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,m=(u>>11)/e*255|0,x=a*this.width*4+4*o;this.data[x]=m,this.data[x+1]=f,this.data[x+2]=d,this.data[x+3]=255}this.pos+=n}},ga.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},ga.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=u}},ga.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new ga(e,!1),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},m=new of(100).encode(f,100);return n.processJPEG.call(this,m,t,s,a)}})(wt.API),Gm.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Gm(e),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},m=new of(100).encode(f,100);return n.processJPEG.call(this,m,t,s,a)}})(wt.API),wt.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),d=0,f=0,m=0;m<a;m+=4){var x=s[m],_=s[m+1],S=s[m+2],y=s[m+3];o[d++]=x,o[d++]=_,o[d++]=S,u[f++]=y}var E=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},wt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_c=wt.API,yd=_c.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:a.metadata.Unicode.widths,f=d.fof?d.fof:1,m=e.kerning?e.kerning:a.metadata.Unicode.kerning,x=m.fof?m.fof:1,_=e.doKerning!==!1,S=0,y=n.length,E=0,L=d[0]||f,T=[];for(t=0;t<y;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?T.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(S=_&&xr(m[s])==="object"&&!isNaN(parseInt(m[s][E],10))?m[s][E]/x:0,T.push((d[s]||L)/f+S)),E=s;return T},Rm=_c.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return _c.processArabic&&(n=_c.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:yd.apply(this,arguments).reduce(function(o,u){return o+u},0)},Mm=function(n,e,t,s){for(var a=[],o=0,u=n.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;a.push(n.slice(0,o));var f=o;for(d=0;o!==u;)d+e[o]>s&&(a.push(n.slice(f,o)),d=0,f=o),d+=e[o],o++;return f!==o&&a.push(n.slice(f,o)),a},Um=function(n,e,t){t||(t={});var s,a,o,u,d,f,m,x=[],_=[x],S=t.textIndent||0,y=0,E=0,L=n.split(" "),T=yd.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?L[0].length+2:t.lineIndent||0){var A=Array(f).join(" "),Y=[];L.map(function(H){(H=H.split(/\s*\n/)).length>1?Y=Y.concat(H.map(function(ue,de){return(de&&ue.length?`
`:"")+ue})):Y.push(H[0])}),L=Y,f=Rm.apply(this,[A,t])}for(o=0,u=L.length;o<u;o++){var B=0;if(s=L[o],f&&s[0]==`
`&&(s=s.substr(1),B=1),S+y+(E=(a=yd.apply(this,[s,t])).reduce(function(H,ue){return H+ue},0))>e||B){if(E>e){for(d=Mm.apply(this,[s,a,e-(S+y),e]),x.push(d.shift()),x=[d.pop()];d.length;)_.push([d.shift()]);E=a.slice(s.length-(x[0]?x[0].length:0)).reduce(function(H,ue){return H+ue},0)}else x=[s];_.push(x),S=E+f,y=T}else x.push(s),S+=y+E,y=T}return m=f?function(H,ue){return(ue?A:"")+H.join(" ")}:function(H){return H.join(" ")},_.map(m)},_c.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var _=this.internal.getFont(x.fontName,x.fontStyle),S="Unicode";return _.metadata[S]?{widths:_.metadata[S].widths||{0:1},kerning:_.metadata[S].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var d,f,m=[];for(d=0,f=s.length;d<f;d++)m=m.concat(Um.apply(this,[s[d],u,o]));return m},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(S){return"0x"+parseInt(S,10).toString(16)},d=n.__fontmetrics__.compress=function(S){var y,E,L,T,A=["{"];for(var Y in S){if(y=S[Y],isNaN(parseInt(Y,10))?E="'"+Y+"'":(Y=parseInt(Y,10),E=(E=u(Y).slice(2)).slice(0,-1)+a[E.slice(-1)]),typeof y=="number")y<0?(L=u(y).slice(3),T="-"):(L=u(y).slice(2),T=""),L=T+L.slice(0,-1)+a[L.slice(-1)];else{if(xr(y)!=="object")throw new Error("Don't know what to do with value type "+xr(y)+".");L=d(y)}A.push(E+L)}return A.push("}"),A.join("")},f=n.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,E,L,T,A={},Y=1,B=A,H=[],ue="",de="",Z=S.length-1,K=1;K<Z;K+=1)(T=S[K])=="'"?y?(L=y.join(""),y=void 0):y=[]:y?y.push(T):T=="{"?(H.push([B,L]),B={},L=void 0):T=="}"?((E=H.pop())[0][E[1]]=B,L=void 0,B=E[0]):T=="-"?Y=-1:L===void 0?s.hasOwnProperty(T)?(ue+=s[T],L=parseInt(ue,16)*Y,Y=1,ue=""):ue+=T:s.hasOwnProperty(T)?(de+=s[T],B[L]=parseInt(de,16)*Y,Y=1,L=void 0,de=""):de+=T;return A},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},_={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(S){var y=S.font,E=_.Unicode[y.postScriptName];E&&(y.metadata.Unicode={},y.metadata.Unicode.widths=E.widths,y.metadata.Unicode.kerning=E.kerning);var L=x.Unicode[y.postScriptName];L&&(y.metadata.Unicode.encoding=L,y.encoding=L.codePages[0])}])})(wt.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(_d(d)),u.metadata=n.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(wt),wt.API.addSvgAsImage=function(n,e,t,s,a,o,u,d){if(isNaN(e)||isNaN(t))throw Er.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Er.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var m=f.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,f.width,f.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(Mt.canvg?Promise.resolve(Mt.canvg):Zo(()=>import("./index.es-8MD70xOd.js"),[])).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(m,n,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(x)}).then(function(){_.addImage(f.toDataURL("image/jpeg",1),e,t,s,a,u,d)})},wt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},wt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),f=[],m=0,x=0,_=0;function S(E,L){var T,A=!1;for(T=0;T<E.length;T+=1)E[T]===L&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var y=d.length;for(_=0;_<y;_+=1)t[d[_]].value=t[d[_]].defaultValue,t[d[_]].explicitSet=!1}if(xr(n)==="object"){for(a in n)if(o=n[a],S(d,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&S(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(m=0;m<o.length;m+=1)if(s=!0,o[m].length===1&&typeof o[m][0]=="number")f.push(String(o[m]-1));else if(o[m].length>1){for(x=0;x<o[m].length;x+=1)typeof o[m][x]!="number"&&(s=!1);s===!0&&f.push([o[m][0]-1,o[m][1]-1].join(" "))}t[a].value="["+f.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,L=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?L.push("/"+E+" /"+t[E].value):L.push("/"+E+" "+t[E].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+u.length+d.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+d+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(wt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var d,f=u.metadata.Unicode.widths,m=["","0","00","000","0000"],x=[""],_=0,S=o.length;_<S;++_){if(d=u.metadata.characterToGlyph(o.charCodeAt(_)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(_),f.indexOf(d)==-1&&(f.push(d),f.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return x.join("");d=d.toString(16),x.push(m[4-d.length],d)}return x.join("")},s=function(o){var u,d,f,m,x,_,S;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],_=0,S=(d=Object.keys(o).sort(function(y,E){return y-E})).length;_<S;_++)u=d[_],f.length>=100&&(x+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(m=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+m+">"));return f.length&&(x+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),x+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,m=u.newObject,x=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var _=d.metadata.Unicode.widths,S=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",E=0;E<S.length;E++)y+=String.fromCharCode(S[E]);var L=m();x({data:y,addLength1:!0,objectId:L}),f("endobj");var T=m();x({data:s(d.metadata.toUnicode),addLength1:!0,objectId:T}),f("endobj");var A=m();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+jc(d.fontName)),f("/FontFile2 "+L+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/Flags "+d.metadata.flags),f("/StemV "+d.metadata.stemV),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f(">>"),f("endobj");var Y=m();f("<<"),f("/Type /Font"),f("/BaseFont /"+jc(d.fontName)),f("/FontDescriptor "+A+" 0 R"),f("/W "+n.API.PDFObject.convert(_)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+d.encoding+")"),f(">>"),f(">>"),f("endobj"),d.objectNumber=m(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+T+" 0 R"),f("/BaseFont /"+jc(d.fontName)),f("/Encoding /"+d.encoding),f("/DescendantFonts ["+Y+" 0 R]"),f(">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,m=u.newObject,x=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var _=d.metadata.rawData,S="",y=0;y<_.length;y++)S+=String.fromCharCode(_[y]);var E=m();x({data:S,addLength1:!0,objectId:E}),f("endobj");var L=m();x({data:s(d.metadata.toUnicode),addLength1:!0,objectId:L}),f("endobj");var T=m();f("<<"),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f("/StemV "+d.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+E+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/FontName /"+jc(d.fontName)),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f(">>"),f("endobj"),d.objectNumber=m();for(var A=0;A<d.metadata.hmtx.widths.length;A++)d.metadata.hmtx.widths[A]=parseInt(d.metadata.hmtx.widths[A]*(1e3/d.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+jc(d.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,d=o.text||"",f=o.x,m=o.y,x=o.options||{},_=o.mutex||{},S=_.pdfEscape,y=_.activeFontKey,E=_.fonts,L=y,T="",A=0,Y="",B=E[L].encoding;if(E[L].encoding!=="Identity-H")return{text:d,x:f,y:m,options:x,mutex:_};for(Y=d,L=y,Array.isArray(d)&&(Y=d[0]),A=0;A<Y.length;A+=1)E[L].metadata.hasOwnProperty("cmap")&&(u=E[L].metadata.cmap.unicode.codeMap[Y[A].charCodeAt(0)]),u||Y[A].charCodeAt(0)<256&&E[L].metadata.hasOwnProperty("Unicode")?T+=Y[A]:T+="";var H="";return parseInt(L.slice(1))<14||B==="WinAnsiEncoding"?H=S(T,L).split("").map(function(ue){return ue.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(H=t(T,E[L])),_.isHex=!0,{text:H,x:f,y:m,options:x,mutex:_}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var m=0;for(m=0;m<u.length;m+=1)Array.isArray(u[m])&&u[m].length===3?d.push([a(Object.assign({},f,{text:u[m][0]})).text,u[m][1],u[m][2]]):d.push(a(Object.assign({},f,{text:u[m]})).text);o.text=d}else o.text=a(Object.assign({},f,{text:u})).text}])})(wt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(wt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,d,f,m,x,_=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Y=!1,B=0;this.__bidiEngine__={};var H=function(D){var q=D.charCodeAt(),z=q>>8,O=L[z];return O!==void 0?_[256*O+(255&q)]:z===252||z===253?"AL":A.test(z)?"L":z===8?"R":"N"},ue=function(D){for(var q,z=0;z<D.length;z++){if((q=H(D.charAt(z)))==="L")return!1;if(q==="R")return!0}return!1},de=function(D,q,z,O){var Q,ae,se,M,ce=q[O];switch(ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Y=!1;break;case"N":case"AN":break;case"EN":Y&&(ce="AN");break;case"AL":Y=!0,ce="R";break;case"WS":case"BN":ce="N";break;case"CS":O<1||O+1>=q.length||(Q=z[O-1])!=="EN"&&Q!=="AN"||(ae=q[O+1])!=="EN"&&ae!=="AN"?ce="N":Y&&(ae="AN"),ce=ae===Q?ae:"N";break;case"ES":ce=(Q=O>0?z[O-1]:"B")==="EN"&&O+1<q.length&&q[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&z[O-1]==="EN"){ce="EN";break}if(Y){ce="N";break}for(se=O+1,M=q.length;se<M&&q[se]==="ET";)se++;ce=se<M&&q[se]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(M=q.length,se=O+1;se<M&&q[se]==="NSM";)se++;if(se<M){var be=D[O],X=be>=1425&&be<=2303||be===64286;if(Q=q[se],X&&(Q==="R"||Q==="AL")){ce="R";break}}}ce=O<1||(Q=q[O-1])==="B"?"N":z[O-1];break;case"B":Y=!1,a=!0,ce=B;break;case"S":o=!0,ce="N"}return ce},Z=function(D,q,z){var O=D.split("");return z&&K(O,z,{hiLevel:B}),O.reverse(),q&&q.reverse(),O.join("")},K=function(D,q,z){var O,Q,ae,se,M,ce=-1,be=D.length,X=0,P=[],W=B?y:S,re=[];for(Y=!1,a=!1,o=!1,Q=0;Q<be;Q++)re[Q]=H(D[Q]);for(ae=0;ae<be;ae++){if(M=X,P[ae]=de(D,re,P,ae),O=240&(X=W[M][E[P[ae]]]),X&=15,q[ae]=se=W[X][5],O>0)if(O===16){for(Q=ce;Q<ae;Q++)q[Q]=1;ce=-1}else ce=-1;if(W[X][6])ce===-1&&(ce=ae);else if(ce>-1){for(Q=ce;Q<ae;Q++)q[Q]=se;ce=-1}re[ae]==="B"&&(q[ae]=0),z.hiLevel|=se}o&&(function(oe,he,we){for(var Ne=0;Ne<we;Ne++)if(oe[Ne]==="S"){he[Ne]=B;for(var Ae=Ne-1;Ae>=0&&oe[Ae]==="WS";Ae--)he[Ae]=B}})(re,q,be)},G=function(D,q,z,O,Q){if(!(Q.hiLevel<D)){if(D===1&&B===1&&!a)return q.reverse(),void(z&&z.reverse());for(var ae,se,M,ce,be=q.length,X=0;X<be;){if(O[X]>=D){for(M=X+1;M<be&&O[M]>=D;)M++;for(ce=X,se=M-1;ce<se;ce++,se--)ae=q[ce],q[ce]=q[se],q[se]=ae,z&&(ae=z[ce],z[ce]=z[se],z[se]=ae);X=M}X++}}},ne=function(D,q,z){var O=D.split(""),Q={hiLevel:B};return z||(z=[]),K(O,z,Q),(function(ae,se,M){if(M.hiLevel!==0&&x)for(var ce,be=0;be<ae.length;be++)se[be]===1&&(ce=T.indexOf(ae[be]))>=0&&(ae[be]=T[ce+1])})(O,z,Q),G(2,O,q,z,Q),G(1,O,q,z,Q),O.join("")};return this.__bidiEngine__.doBidiReorder=function(D,q,z){if((function(Q,ae){if(ae)for(var se=0;se<Q.length;se++)ae[se]=se;d===void 0&&(d=ue(Q)),m===void 0&&(m=ue(Q))})(D,q),u||!f||m)if(u&&f&&d^m)B=d?1:0,D=Z(D,q,z);else if(!u&&f&&m)B=d?1:0,D=ne(D,q,z),D=Z(D,q);else if(!u||d||f||m){if(u&&!f&&d^m)D=Z(D,q),d?(B=0,D=ne(D,q,z)):(B=1,D=ne(D,q,z),D=Z(D,q));else if(u&&d&&!f&&m)B=1,D=ne(D,q,z),D=Z(D,q);else if(!u&&!f&&d^m){var O=x;d?(B=1,D=ne(D,q,z),B=0,x=!1,D=ne(D,q,z),x=O):(B=0,D=ne(D,q,z),D=Z(D,q),B=1,x=!1,D=ne(D,q,z),x=O,D=Z(D,q))}}else B=0,D=ne(D,q,z);else B=d?1:0,D=ne(D,q,z);return D},this.__bidiEngine__.setOptions=function(D){D&&(u=D.isInputVisual,f=D.isOutputVisual,d=D.isInputRtl,m=D.isOutputRtl,x=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(u=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?u.push([t.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):u.push([t.doBidiReorder(a[d])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(wt),wt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new el(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new v5(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new n5(this.contents),this.head=new i5(this),this.name=new u5(this),this.cmap=new u1(this),this.toUnicode={},this.hhea=new a5(this),this.maxp=new d5(this),this.hmtx=new h5(this),this.post=new l5(this),this.os2=new o5(this),this.loca=new g5(this),this.glyf=new f5(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,f,m;for(m=[],u=0,d=(f=this.bbox).length;u<d;u++)e=f[u],m.push(Math.round(e*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var wa,el=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,d,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*d+f},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),n5=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,d,f,m,x,_,S,y,E,L;for(L in y=Object.keys(t).length,f=Math.log(2),_=16*Math.floor(Math.log(y)/f),u=Math.floor(_/f),x=16*y-_,(a=new el).writeInt(this.scalarType),a.writeShort(y),a.writeShort(_),a.writeShort(u),a.writeShort(x),o=16*y,m=a.pos+o,d=null,E=[],t)for(S=t[L],a.writeString(L),a.writeInt(n(S)),a.writeInt(m),a.writeInt(S.length),E=E.concat(S),L==="head"&&(d=m),m+=S.length;m%4;)E.push(0),m++;return a.write(E),s=2981146554-n(a.data),a.pos=d+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=d1.call(t);t.length%4;)t.push(0);for(o=new el(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),s5={}.hasOwnProperty,Va=function(n,e){for(var t in e)s5.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};wa=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var i5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new el).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Ym=(function(){function n(e,t){var s,a,o,u,d,f,m,x,_,S,y,E,L,T,A,Y,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(y=e.readUInt16(),S=y/2,e.pos+=6,o=(function(){var H,ue;for(ue=[],f=H=0;0<=S?H<S:H>S;f=0<=S?++H:--H)ue.push(e.readUInt16());return ue})(),e.pos+=2,L=(function(){var H,ue;for(ue=[],f=H=0;0<=S?H<S:H>S;f=0<=S?++H:--H)ue.push(e.readUInt16());return ue})(),m=(function(){var H,ue;for(ue=[],f=H=0;0<=S?H<S:H>S;f=0<=S?++H:--H)ue.push(e.readUInt16());return ue})(),x=(function(){var H,ue;for(ue=[],f=H=0;0<=S?H<S:H>S;f=0<=S?++H:--H)ue.push(e.readUInt16());return ue})(),a=(this.length-e.pos+this.offset)/2,d=(function(){var H,ue;for(ue=[],f=H=0;0<=a?H<a:H>a;f=0<=a?++H:--H)ue.push(e.readUInt16());return ue})(),f=A=0,B=o.length;A<B;f=++A)for(T=o[f],s=Y=E=L[f];E<=T?Y<=T:Y>=T;s=E<=T?++Y:--Y)x[f]===0?u=s+m[f]:(u=d[x[f]/2+(s-E)-(S-f)]||0)!==0&&(u+=m[f]),this.codeMap[s]=65535&u}e.pos=_}return n.encode=function(e,t){var s,a,o,u,d,f,m,x,_,S,y,E,L,T,A,Y,B,H,ue,de,Z,K,G,ne,D,q,z,O,Q,ae,se,M,ce,be,X,P,W,re,oe,he,we,Ne,Ae,me,Ue,ze;switch(O=new el,u=Object.keys(e).sort(function(Ve,Xe){return Ve-Xe}),t){case"macroman":for(L=0,T=(function(){var Ve=[];for(E=0;E<256;++E)Ve.push(0);return Ve})(),Y={0:0},o={},Q=0,ce=u.length;Q<ce;Q++)Y[Ae=e[a=u[Q]]]==null&&(Y[Ae]=++L),o[a]={old:e[a],new:Y[e[a]]},T[a]=Y[e[a]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(T),{charMap:o,subtable:O.data,maxGlyphID:L+1};case"unicode":for(q=[],_=[],B=0,Y={},s={},A=m=null,ae=0,be=u.length;ae<be;ae++)Y[ue=e[a=u[ae]]]==null&&(Y[ue]=++B),s[a]={old:ue,new:Y[ue]},d=Y[ue]-a,A!=null&&d===m||(A&&_.push(A),q.push(a),m=d),A=a;for(A&&_.push(A),_.push(65535),q.push(65535),ne=2*(G=q.length),K=2*Math.pow(Math.log(G)/Math.LN2,2),S=Math.log(K/2)/Math.LN2,Z=2*G-K,f=[],de=[],y=[],E=se=0,X=q.length;se<X;E=++se){if(D=q[E],x=_[E],D===65535){f.push(0),de.push(0);break}if(D-(z=s[D].new)>=32768)for(f.push(0),de.push(2*(y.length+G-E)),a=M=D;D<=x?M<=x:M>=x;a=D<=x?++M:--M)y.push(s[a].new);else f.push(z-D),de.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*G+2*y.length),O.writeUInt16(0),O.writeUInt16(ne),O.writeUInt16(K),O.writeUInt16(S),O.writeUInt16(Z),we=0,P=_.length;we<P;we++)a=_[we],O.writeUInt16(a);for(O.writeUInt16(0),Ne=0,W=q.length;Ne<W;Ne++)a=q[Ne],O.writeUInt16(a);for(me=0,re=f.length;me<re;me++)d=f[me],O.writeUInt16(d);for(Ue=0,oe=de.length;Ue<oe;Ue++)H=de[Ue],O.writeUInt16(H);for(ze=0,he=y.length;ze<he;ze++)L=y[ze],O.writeUInt16(L);return{charMap:s,subtable:O.data,maxGlyphID:B+1}}},n})(),u1=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Ym(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Ym.encode(e,t),(a=new el).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),a5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),o5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),l5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,d,f;for(f=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)f.push(e.readUInt32());return f}).call(this)}},n})(),c5=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},u5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,d,f,m,x,_,S;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(f={},o=x=0,_=s.length;x<_;o=++x)a=s[o],e.pos=a.offset,m=e.readString(a.length),u=new c5(m,a),f[S=a.nameID]==null&&(f[S]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},n})(),d5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),h5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,d,f;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var m,x;for(x=[],t=m=0;0<=a?m<a:m>a;t=0<=a?++m:--m)x.push(e.readInt16());return x})(),this.widths=(function(){var m,x,_,S;for(S=[],m=0,x=(_=this.metrics).length;m<x;m++)o=_[m],S.push(o.advance);return S}).call(this),s=this.widths[this.widths.length-1],f=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)f.push(this.widths.push(s));return f},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),d1=[].slice,f5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,d,f,m,x,_;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(d=new el(t.read(a))).readShort(),m=d.readShort(),_=d.readShort(),f=d.readShort(),x=d.readShort(),this.cache[e]=u===-1?new m5(d,m,_,f,x):new p5(d,u,m,_,f,x),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,d,f;for(u=[],o=[],d=0,f=t.length;d<f;d++)a=e[t[d]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),p5=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),m5=(function(){function n(e,t,s,a,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new el(d1.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),g5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Va(n,wa),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var d=this.offsets[u],f=this.offsets[u+1]-d;f>0&&(a+=f)}for(var m=new Array(4*s.length),x=0;x<s.length;++x)m[4*x+3]=255&s[x],m[4*x+2]=(65280&s[x])>>8,m[4*x+1]=(16711680&s[x])>>16,m[4*x]=(4278190080&s[x])>>24;return m},n})(),v5=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,d,f;for(a={},u=0,d=e.length;u<d;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))s=f[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,d,f,m,x,_,S,y,E,L,T,A;for(a in s=u1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},A=s.charMap)y[(f=A[a]).old]=f.new;for(E in S=s.maxGlyphID,u)E in y||(y[E]=S++);return x=(function(Y){var B,H;for(B in H={},Y)H[Y[B]]=B;return H})(y),_=Object.keys(x).sort(function(Y,B){return Y-B}),L=(function(){var Y,B,H;for(H=[],Y=0,B=_.length;Y<B;Y++)d=_[Y],H.push(x[d]);return H})(),o=this.font.glyf.encode(u,L,y),m=this.font.loca.encode(o.offsets,L),T={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},n})();wt.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var d,f,m;for(m=[],d=0,f=t.length;d<f;d++)s=t[d],m.push(e.convert(s));return m})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();function Km(n){const e=new Date(n);return Number.isNaN(e.getTime())?new Date().toISOString().slice(0,10):e.toISOString().slice(0,10)}function x5(n){if(!n)return"N/A";const e=n.toLowerCase();return e==="dog"?"Dog":e==="cat"?"Cat":n}function h1(n){const e=parseFloat(String(n||"").replace(/[^0-9.\-]/g,""));return Number.isFinite(e)?e:0}function y5(n){return`$${h1(n).toFixed(2)}`}function b5(n){return`$${(Number.isFinite(n)?n:0).toFixed(2)}`}function w5(n,e){const t=new wt({unit:"pt",format:"letter"}),s=56,a=556,o=a-s;let u=64;const d=de=>{t.setFont("helvetica","bold"),t.setFontSize(18),t.text(de,s,u),u+=18,t.setDrawColor(64),t.setLineWidth(1),t.line(s,u+10,a,u+10),u+=24},f=(de,Z)=>{t.setFont("helvetica","bold"),t.setFontSize(11),t.text(de,s,u),t.setFont("helvetica","normal"),t.setFontSize(11),t.text(Z||"",s+160,u),u+=18},m=de=>{t.setFont("helvetica","bold"),t.setFontSize(13),t.text(de,s,u),u+=14};d("Pet Insurance Claim Form"),m("Insurance Information"),f("Company",e?.insuranceCompany||"N/A"),f("Policy Number",e?.policyNumber||"N/A"),f("Invoice Number",n.invoiceNumber||"N/A"),u+=8,m("Pet Owner Information"),f("Owner Name",e?.ownerName||"N/A"),f("Phone",e?.ownerPhone||"N/A"),u+=8,m("Pet Information"),f("Pet Name",n.petName||e?.name||"N/A"),f("Species",x5(e?.species)),u+=8,m("Veterinary Clinic"),f("Clinic Name",n.clinicName||"N/A"),f("Clinic Address",n.clinicAddress||"N/A"),u+=8,m("Service Details"),f("Date of Service",n.dateOfService||Km(new Date().toISOString())),f("Diagnosis / Reason",n.diagnosis||"N/A"),u+=8,m("Itemized Charges");const x=Math.floor(o*.7),_=s,S=a,y=14;t.setFont("helvetica","bold"),t.text("Description",_,u),t.text("Amount",S,u,{align:"right"}),u+=14,t.setDrawColor(200),t.line(s,u,a,u),u+=10,n.lineItems.forEach(de=>{const Z=de.description||"",K=y5(de.amount);t.setFont("helvetica","normal"),t.setFontSize(11);const G=t.splitTextToSize(Z,x);t.setFont("courier","normal"),t.text(K,S,u,{align:"right"}),t.setFont("helvetica","normal"),G.forEach((ne,D)=>{t.text(ne,_,u+D*y)}),u+=Math.max(y,G.length*y),u+=2}),n.lineItems.length===0&&(t.setFont("helvetica","normal"),t.text("No items",_,u),u+=16),u+=6,t.setDrawColor(64),t.line(s,u,a,u),u+=14,t.setFont("helvetica","bold"),t.text("Total",_,u),t.setFont("courier","bold"),t.text(b5(h1(n.totalAmount)),S,u,{align:"right"}),u+=24,t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(120);const E=742;t.setTextColor(40),t.setFont("helvetica","bold"),t.text("Filing Deadline Reminder",s,E),t.setFont("helvetica","normal"),t.setTextColor(80),t.setFontSize(9);const T=t.splitTextToSize("Most pet insurance requires claims to be filed within 60180 days of service. This is a general reminder only. Always verify your specific deadline with your insurance provider.",a-s);t.text(T,s,E+14),t.setTextColor(120),t.text("Generated by Pet Claim Helper - petclaimhelper.com",s,760);const A=Km(n.dateOfService||new Date().toISOString()),Y=(n.petName||e?.name||"Pet").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),B=(e?.insuranceCompany||"Insurance").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),H=`${Y}_${B}_claim_${A}.pdf`,ue=new Blob([t.output("arraybuffer")],{type:"application/pdf"});return{filename:H,blob:ue}}function _5(n,e){const t={clinicName:n.clinicName,clinicAddress:n.clinicAddress,petName:n.petName,dateOfService:n.dateOfService,totalAmount:n.subtotal,diagnosis:n.diagnosis,lineItems:n.lineItems,invoiceNumber:n.invoiceNumber};return w5(t,e)}function f1({open:n,onClose:e,onSaved:t,userId:s,pets:a,defaultPetId:o,medicationId:u,editMode:d=!1}){const[f,m]=ge.useState(""),[x,_]=ge.useState(""),[S,y]=ge.useState(""),[E,L]=ge.useState("1x daily"),[T,A]=ge.useState(["07:00"]),[Y,B]=ge.useState("7"),[H,ue]=ge.useState(7),[de,Z]=ge.useState(!1),[K,G]=ge.useState(null),[ne,D]=ge.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),q=ge.useRef(!1);ge.useEffect(()=>{if(n&&!q.current){d&&u?(Z(!0),rt.from("medications").select("*").eq("id",u).single().then(({data:se,error:M})=>{if(M||!se){G("Failed to load medication data"),Z(!1);return}if(m(se.pet_id||""),_(se.medication_name||""),y(se.dosage||""),L(se.frequency||"1x daily"),A(Array.isArray(se.reminder_times)&&se.reminder_times.length>0?se.reminder_times:["07:00"]),se.start_date&&se.end_date){const ce=new Date(se.start_date),be=new Date(se.end_date),X=Math.round((be.getTime()-ce.getTime())/(1e3*60*60*24))+1;[7,10,14,30].includes(X)?B(String(X)):(B("custom"),ue(X))}Z(!1),G(null)}).catch(()=>{G("Failed to load medication"),Z(!1)})):(m(o||(a[0]?.id??"")),_(""),y(""),L("1x daily"),A(["07:00"]),B("7"),ue(7),Z(!1),G(null));try{console.log("[AddMedicationForm] Form opened. Initial timezone (from Intl):",ne)}catch{}s&&rt.from("profiles").select("timezone").eq("id",s).single().then(({data:se})=>{const M=se&&se.timezone?String(se.timezone):"";try{console.log("[AddMedicationForm] Profile timezone loaded:",M||"(empty)")}catch{}M&&D(M)}).catch(()=>{})}q.current=n},[n,o,a,s,ne,d,u]),ge.useEffect(()=>{if(!n)return;const se=document.body.style.overflow;document.body.style.overflow="hidden";const M=ce=>{ce.key==="Escape"&&e()};return window.addEventListener("keydown",M),()=>{document.body.style.overflow=se,window.removeEventListener("keydown",M)}},[n,e]),ge.useEffect(()=>{E==="1x daily"&&A(["07:00"]),E==="2x daily"&&A(["07:00","19:00"]),E==="3x daily"&&A(["08:00","14:00","20:00"])},[E]);const z=ge.useMemo(()=>E==="1x daily"?1:E==="2x daily"?2:3,[E]),O=(se,M)=>{const ce=(M||"").slice(0,5),be=[...T];be[se]=ce,A(be)},Q=()=>{const se=new Date,M=se.getFullYear(),ce=String(se.getMonth()+1).padStart(2,"0"),be=String(se.getDate()).padStart(2,"0"),X=`${M}-${ce}-${be}`;let P=Y==="custom"?Math.max(1,Number(H||1)):Number(Y);(!Number.isFinite(P)||P<1)&&(P=1);const W=new Date(se.getTime());W.setDate(W.getDate()+(P-1));const re=W.getFullYear(),oe=String(W.getMonth()+1).padStart(2,"0"),he=String(W.getDate()).padStart(2,"0"),we=`${re}-${oe}-${he}`;return{start:X,end:we}},ae=async se=>{if(se.preventDefault(),!s){G("You must be logged in.");return}if(!f){G("Please select a pet.");return}if(!x.trim()){G("Enter medication name.");return}if(T.some(M=>!/^\d{2}:\d{2}$/.test(M))){G("Please select valid reminder times.");return}if(T.length!==z){G("Reminder times do not match selected frequency.");return}Z(!0),G(null);try{const{start:M,end:ce}=Q(),be=ne||Intl.DateTimeFormat().resolvedOptions().timeZone;try{console.log("[AddMedicationForm] Submitting. Detected timezone:",be),console.log("[AddMedicationForm] Times selected (will store as PST, no UTC conversion):",T)}catch{}const X=T.filter(Boolean);try{console.log("[AddMedicationForm] Times to store in PST:",X)}catch{}if(d&&u){const P={medication_name:x.trim(),dosage:S.trim()||null,frequency:E,reminder_times:X,end_date:ce},{error:W}=await rt.from("medications").update(P).eq("id",u).eq("user_id",s);if(W)throw W;t&&t(u)}else{const P={user_id:s,pet_id:f,claim_id:null,medication_name:x.trim(),dosage:S.trim()||null,frequency:E,reminder_times:X,start_date:M,end_date:ce};try{console.log("[AddMedicationForm] Payload.reminder_times (storing in PST):",P.reminder_times)}catch{}const{data:W,error:re}=await rt.from("medications").insert(P).select("id").single();try{console.log("[AddMedicationForm] Supabase insert completed. Error:",re||null)}catch{}if(re)throw re;const oe=W?.id;t&&t(oe)}e()}catch(M){G(M?.message||"Failed to save medication")}finally{Z(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:se=>se.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:d?"Edit Medication":"Add Medication"}),l.jsx("button",{type:"button",className:"text-sm",onClick:e,children:"Close"})]}),K&&l.jsx("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:K}),l.jsxs("form",{className:"mt-4 space-y-4",onSubmit:ae,children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet",d&&l.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(cannot be changed)"})]}),l.jsxs("select",{value:f,onChange:se=>m(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",disabled:d,children:[l.jsx("option",{value:"",children:" Select "}),a.map(se=>l.jsxs("option",{value:se.id,children:[se.name," (",se.species,")"]},se.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Medication name"}),l.jsx("input",{value:x,onChange:se=>_(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"Amoxicillin"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Dosage"}),l.jsx("input",{value:S,onChange:se=>y(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"1 pill"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Frequency"}),l.jsxs("select",{value:E,onChange:se=>L(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{children:"1x daily"}),l.jsx("option",{children:"2x daily"}),l.jsx("option",{children:"3x daily"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Duration"}),l.jsxs("select",{value:Y,onChange:se=>B(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"10",children:"10 days"}),l.jsx("option",{value:"14",children:"14 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"custom",children:"Custom"})]})]})]}),Y==="custom"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Custom days"}),l.jsx("input",{type:"number",min:1,value:H,onChange:se=>ue(Number(se.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Reminder times"}),l.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:Array.from({length:z}).map((se,M)=>l.jsx("input",{type:"time",value:T[M]||"",onChange:ce=>O(M,ce.target.value),className:"w-full min-w-[140px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"},M))})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",onClick:e,className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:de,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:de?"Saving":d?"Update Medication":"Save Medication"})]})]})]})}):null}const wu=[{display:" Select ",value:""},{display:"Not Insured",value:""},{display:"Trupanion (90 days)",value:"Trupanion",deadlineDays:90},{display:"Nationwide (365 days)",value:"Nationwide",deadlineDays:365},{display:"Healthy Paws (90 days)",value:"Healthy Paws",deadlineDays:90},{display:"Pumpkin (270 days)",value:"Pumpkin",deadlineDays:270},{display:"Spot (270 days)",value:"Spot",deadlineDays:270},{display:"Figo (180 days)",value:"Figo",deadlineDays:180},{display:"Pets Best (90 days)",value:"Pets Best",deadlineDays:90},{display:"ASPCA (90 days)",value:"ASPCA",deadlineDays:90}];function Ac(n){const e=wu.find(t=>t.display===n);return e?e.value:n===" Select "||n==="Not Insured"?"":n.replace(/\s*\(\d+\s*days?\).*$/i,"").trim()}function N5(n){if(!n||n==="")return"Not Insured";const e=wu.find(t=>t.value===n);return e?e.display:n}function k5({open:n,onClose:e,userId:t,userEmail:s}){const[a,o]=ge.useState(!1),[u,d]=ge.useState(null),[f,m]=ge.useState(""),[x,_]=ge.useState(""),[S,y]=ge.useState(""),[E,L]=ge.useState("Not Insured"),[T,A]=ge.useState(""),[Y,B]=ge.useState(""),[H,ue]=ge.useState("");ge.useEffect(()=>{n&&(o(!1),d(null),m(""),_(""),y(""),L("Not Insured"),A(""),B(""),ue(""))},[n]);const de=ge.useMemo(()=>f.trim().length>0&&x.trim().length>0&&!!S&&E.length>0,[f,x,S,E]);ge.useEffect(()=>{if(!n)return;const K=document.body.style.overflow;document.body.style.overflow="hidden";const G=ne=>{ne.key==="Escape"&&e()};return window.addEventListener("keydown",G),()=>{document.body.style.overflow=K,window.removeEventListener("keydown",G)}},[n,e]);const Z=async()=>{o(!0),d(null);try{const K={id:t,full_name:f.trim(),email:s||"",onboarding_complete:!0},{error:G}=await rt.from("profiles").upsert(K,{onConflict:"id"}).select();if(G)throw G;let ne=null;if(Y&&H){const z=String(Y).padStart(2,"0");ne=`${H}-${z}-01`}const D=Ac(E),q={user_id:t,name:x.trim(),species:S||"other",insurance_company:D||null,monthly_premium:T===""?null:parseFloat(T),coverage_start_date:ne};await Cx(q),localStorage.setItem("justCompletedOnboarding","true"),e()}catch(K){d(K?.message||"Failed to save your info. Please try again.")}finally{o(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-6 shadow-2xl max-h-[calc(100vh-40px)] overflow-y-auto",onClick:K=>K.stopPropagation(),children:[u&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:u}),l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Pet Claim Helper! "}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Quick setup - then we'll handle the insurance headaches for you."}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:f,onChange:K=>m(K.target.value),placeholder:"John Smith",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:x,onChange:K=>_(K.target.value),placeholder:"Max",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:S,onChange:K=>y(K.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Insurance Company ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:E,onChange:K=>L(K.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:wu.map(K=>l.jsx("option",{value:K.display,children:K.display},K.display))})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Optional"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Track your complete pet expenses"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Monthly Premium (USD)"}),l.jsx("input",{type:"number",min:0,value:T,onChange:K=>A(K.target.value),placeholder:"50",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Coverage Start"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:Y,onChange:K=>B(K.target.value),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:"Month"}),l.jsx("option",{value:"1",children:"January"}),l.jsx("option",{value:"2",children:"February"}),l.jsx("option",{value:"3",children:"March"}),l.jsx("option",{value:"4",children:"April"}),l.jsx("option",{value:"5",children:"May"}),l.jsx("option",{value:"6",children:"June"}),l.jsx("option",{value:"7",children:"July"}),l.jsx("option",{value:"8",children:"August"}),l.jsx("option",{value:"9",children:"September"}),l.jsx("option",{value:"10",children:"October"}),l.jsx("option",{value:"11",children:"November"}),l.jsx("option",{value:"12",children:"December"})]}),l.jsxs("select",{value:H,onChange:K=>ue(K.target.value),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(K,G)=>new Date().getFullYear()-G).map(K=>l.jsx("option",{value:K,children:K},K))]})]})]})]}),l.jsx("div",{className:"mt-3 text-center",children:l.jsx("button",{type:"button",onClick:()=>{A(""),B(""),ue("")},className:"text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:"Skip for now"})})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!de||a,onClick:Z,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",children:a?"Saving":"Get Started"})]})]})]})}):null}function S5({userId:n,refreshToken:e,period:t}){const[s,a]=ge.useState(!1),[o,u]=ge.useState(null),[d,f]=ge.useState([]),[m,x]=ge.useState([]);ge.useEffect(()=>{console.log("[FinancialSummary]  useEffect triggered | userId:",n,"| refreshToken:",e),n&&(a(!0),u(null),console.log("[FinancialSummary]  Fetching claims and pets from database..."),Promise.all([rt.from("claims").select("id, pet_id, total_amount, reimbursed_amount, filing_status, expense_category, service_date, created_at, deductible_applied, user_coinsurance_payment, insurance_reimbursement").eq("user_id",n),rt.from("pets").select("id, name, species, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",n)]).then(([T,A])=>{if(T.error)throw T.error;if(A.error)throw A.error;console.log("[FinancialSummary] claims fetched:",T.data),console.log("[FinancialSummary] pets fetched:",A.data),f(T.data||[]),x(A.data||[])}).catch(T=>u(T?.message||"Failed to load financial data")).finally(()=>a(!1)))},[n,e]);const _=ge.useMemo(()=>{const T={};for(const A of m)T[A.id]=A;return T},[m]),S=T=>{if(!T)return null;const A=String(T).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!A)return null;const Y=Number(A[1]),B=Number(A[2])-1,H=Number(A[3]),ue=new Date(Y,B,H);return isNaN(ue.getTime())?null:ue},y=(T,A)=>{const Y=Number(T.monthly_premium)||0;if(Y===0)return{total:0,monthsCount:0,context:"No insurance"};const B=S(T.coverage_start_date||null);if(!B)return{total:0,monthsCount:0,context:"No coverage start date"};const H=new Date,ue=H.getFullYear(),de=H.getMonth(),Z=A!==null?A:null;if(Z!==null){if(B.getFullYear()>Z)return{total:0,monthsCount:0,context:`coverage started ${B.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`};if(Z>ue)return{total:0,monthsCount:0,context:"future year"};const Q=new Date(Z,0,1),ae=new Date(Z,11,31),se=B>Q?B:Q,M=Z===ue?new Date(ue,de,H.getDate()):ae,ce=(M.getFullYear()-se.getFullYear())*12+(M.getMonth()-se.getMonth()),be=se.getDate(),P=M.getDate()>=be?1:0,W=Math.max(0,ce+P),re=Y*W;let oe="";if(B.getFullYear()===Z&&B.getMonth()>0){const he=B.toLocaleDateString("en-US",{month:"short"}),we=M.toLocaleDateString("en-US",{month:"short",year:"numeric"});oe=`${he} - ${we}`}else Z===ue&&W<12?oe=`Jan - ${M.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`:oe=`${Z}`;return{total:re,monthsCount:W,context:oe}}const K=(H.getFullYear()-B.getFullYear())*12+(H.getMonth()-B.getMonth()),G=B.getDate(),D=H.getDate()>=G?1:0,q=Math.max(0,K+D),z=Y*q,O=`since ${B.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;return{total:z,monthsCount:q,context:O}},E=ge.useMemo(()=>{const T=new Date().getFullYear(),A=(()=>{const ne=String(t||"").toLowerCase();return ne==="2024"||ne==="2025"||ne==="2026"?Number(ne):ne==="all"?null:T})(),Y=new Date,B=m.reduce((ne,D)=>{const q=y(D,A);return ne+q.total},0);let H=0,ue=0,de=0,Z=0,K=0;for(const ne of d){const D=ne.service_date?S(ne.service_date)||new Date(ne.service_date):null;if(!D||isNaN(D.getTime())||A!==null&&D.getFullYear()!==A||D>Y)continue;const q=String(ne.expense_category||"").toLowerCase(),z=String(ne.filing_status||"").toLowerCase(),O=Number(ne.total_amount)||0,Q=Math.max(0,Number(ne.reimbursed_amount)||0);q==="not_insured"||q==="not insured"?H+=O:q==="insured"&&z==="paid"?(ue+=Q,Z+=O,de+=Math.max(0,O-Q)):q==="insured"&&(Z+=O,de+=Math.max(0,O-Q)),z==="submitted"&&(K+=O)}const G=B+H+de;return{premiumsYTD:B,nonInsuredTotal:H,insurancePaidBack:ue,userShareCoveredClaims:de,insuredBillsTotal:Z,definiteTotal:G,pendingTotal:K}},[d,m,t]),L=ge.useMemo(()=>{const T=new Date().getFullYear(),A=(()=>{const ue=String(t||"").toLowerCase();return ue==="2024"||ue==="2025"||ue==="2026"?Number(ue):ue==="all"?null:T})(),Y=new Date,B={};for(const ue of m){const de=y(ue,A);B[ue.id]={claimed:0,reimbursed:0,premiums:de.total,nonInsured:0,pendingBills:0,filedClaims:0}}const H=[...d].sort((ue,de)=>{const Z=ue.service_date&&(S(ue.service_date)?.getTime()||new Date(ue.service_date).getTime())||0,K=de.service_date&&(S(de.service_date)?.getTime()||new Date(de.service_date).getTime())||0;return Z-K});for(const ue of H){const de=String(ue.expense_category||"").toLowerCase(),Z=ue.pet_id||"";if(!B[Z])continue;const K=Number(ue.total_amount)||0;if(K<=0)continue;const G=ue.service_date?S(ue.service_date)||new Date(ue.service_date):null;if(!(!G||isNaN(G.getTime()))&&!(A!==null&&G.getFullYear()!==A)){if(de==="insured"){const ne=String(ue.filing_status||"not_submitted").toLowerCase(),D=ne==="filed"?"submitted":ne;D==="not_submitted"||D==="not_filed"?B[Z].pendingBills+=1:(D==="submitted"||D==="paid"||D==="denied"||D==="approved")&&(B[Z].filedClaims+=1)}if(de==="not_insured"||de==="not insured")G<=Y&&(B[Z].nonInsured+=K);else{B[Z].claimed+=K;const ne=Math.max(0,Number(ue.reimbursed_amount)||0);B[Z].reimbursed+=ne}}}return console.log("[FinancialSummary] perPet calc (premiums + bills - reimbursed)",B),B},[d,m,_,t]);return n?l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Financial Summary"}),s&&l.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Loading"}),o&&l.jsx("div",{className:"mt-2 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&!o&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:` ${String(t||"").toLowerCase()==="all"?"ALL TIME":String(t||new Date().getFullYear())} TOTAL`}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Spent on all pets (including premiums)"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",(E.premiumsYTD+E.nonInsuredTotal+E.insuredBillsTotal).toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"- Insurance Reimbursed"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",E.insurancePaidBack.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"= Your Net Cost"}),l.jsxs("div",{className:"text-2xl font-bold",children:["$",E.definiteTotal.toFixed(2)]})]})]})]})})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:"YOUR OUT-OF-POCKET BREAKDOWN"}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Insurance Premiums ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Monthly insurance cost)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.premiumsYTD.toFixed(2)]})]}),(()=>{const T=new Date().getFullYear(),A=(()=>{const B=String(t||"").toLowerCase();return B==="2024"||B==="2025"||B==="2026"?Number(B):B==="all"?null:T})(),Y=m.map(B=>{const H=y(B,A);return{pet:B,...H}}).filter(B=>B.total>0||Number(B.pet.monthly_premium)>0);return Y.length===0?null:l.jsx("div",{className:"ml-4 mt-2 space-y-1 text-xs text-slate-500",children:Y.map(({pet:B,total:H,monthsCount:ue,context:de})=>{const Z=Number(B.monthly_premium)||0;return Z===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",B.name,": No insurance"]}),l.jsx("div",{})]},B.id):H===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",B.name,": $0 (",de,")"]}),l.jsx("div",{})]},B.id):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",B.name,": $",Z.toFixed(2),"/mo  ",ue," = $",H.toFixed(2)," (",de,")"]}),l.jsx("div",{})]},B.id)})})})()]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Non-Insured Vet Visits ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Not covered by insurance)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.nonInsuredTotal.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Amount You Paid (for covered claims)"}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.userShareCoveredClaims.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"Total You Paid"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold font-mono",children:["$",E.definiteTotal.toFixed(2)]})]})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:` PER-PET BREAKDOWN (${String(t||"").toLowerCase()==="all"?"All Time":String(t||new Date().getFullYear())})`}),m.length===0&&l.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No pets yet. Add a pet to see per-pet costs."}),l.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(T=>{const A=L[T.id]||{claimed:0,reimbursed:0,premiums:0,nonInsured:0,pendingBills:0,filedClaims:0};T.species==="cat"||T.species;const Y=T.species==="cat"?"":T.species==="dog"?"":"",B=A.premiums+(A.nonInsured||0)+A.claimed-A.reimbursed,H=(A.nonInsured||0)+A.reimbursed+A.claimed>0;return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-100 min-w-0",children:[l.jsx("span",{children:Y}),l.jsxs("span",{className:"font-semibold truncate",title:`${T.name} (${T.species})`,children:[T.name," (",T.species,")"]})]}),l.jsx("div",{className:"mt-3 text-sm",children:H?l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"YOUR COSTS"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Premiums (attributed)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.premiums.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Vet Bills (insured + non-insured)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Subtotal Paid"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.premiums+A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsx("div",{className:"pt-3 text-xs font-semibold text-slate-500",children:"INSURANCE COVERAGE"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Reimbursements Received"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.reimbursed.toFixed(2)]})]}),l.jsxs("div",{className:"pt-3 border-t-2 border-slate-300 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("span",{className:"font-mono font-bold text-lg",children:["$",B.toFixed(2)]})]}),l.jsx("div",{className:"text-xs text-slate-500",children:A.pendingBills>0?`(${A.pendingBills} bill${A.pendingBills===1?"":"s"} pending submission)`:A.filedClaims>0?`(${A.filedClaims} claim${A.filedClaims===1?"":"s"} filed)`:""})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("div",{className:"font-mono font-bold text-lg",children:["$",B.toFixed(2)]})]}),l.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"(No vet bills this year)"})]})})]},T.id)})})]})]}):null}function j5({medicationId:n,userId:e,onClose:t,onDoseRecorded:s}){const[a,o]=ge.useState(!0),[u,d]=ge.useState(!1),[f,m]=ge.useState(null),[x,_]=ge.useState(null),[S,y]=ge.useState(!1),[E,L]=ge.useState(null),[T,A]=ge.useState(""),[Y,B]=ge.useState(0),[H,ue]=ge.useState(null),de=ge.useMemo(()=>E?Array.isArray(E.reminder_times)&&E.reminder_times.length>0?E.reminder_times.length:E.frequency==="1x daily"?1:E.frequency==="2x daily"?2:3:0,[E]),Z=ge.useMemo(()=>{if(!E)return 0;const Q=new Date(E.start_date),ae=E.end_date?new Date(E.end_date):null,se=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),M=ae?new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()):null;return(M?Math.max(1,Math.round((M.getTime()-se.getTime())/(1e3*60*60*24))+1):1)*de},[E,de]),K=ge.useMemo(()=>Z>0?Math.min(Math.round(Y/Z*100),100):0,[Y,Z]),G=ge.useMemo(()=>{if(!E||!E.end_date)return 0;const Q=new Date,ae=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),[se,M,ce]=E.end_date.split("-").map(Number),be=new Date(se,M-1,ce);return Math.max(0,Math.round((be.getTime()-ae.getTime())/(1e3*60*60*24))+1)},[E]),ne=ge.useMemo(()=>!E||!E.end_date?"":E.end_date,[E]),D=async()=>{o(!0),m(null);try{const{data:Q,error:ae}=await rt.from("medications").select("*").eq("id",n).single();if(ae)throw ae;const se={id:Q.id,user_id:Q.user_id,pet_id:Q.pet_id,medication_name:Q.medication_name,dosage:Q.dosage??null,frequency:Q.frequency,reminder_times:Array.isArray(Q.reminder_times)?Q.reminder_times:[],start_date:Q.start_date,end_date:Q.end_date??null};if(L(se),Q.pet_id){const{data:P,error:W}=await rt.from("pets").select("name").eq("id",Q.pet_id).single();!W&&P?.name&&A(P.name)}const{count:M,error:ce}=await rt.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",n).eq("status","given");if(ce)throw ce;B(M||0);const{data:be,error:X}=await rt.from("medication_doses").select("given_time").eq("medication_id",n).eq("status","given").order("given_time",{ascending:!1}).limit(1).single();!X&&be?.given_time?ue(be.given_time):ue(null)}catch(Q){m(Q?.message||"Failed to load medication")}finally{o(!1)}};ge.useEffect(()=>{D()},[n]),ge.useEffect(()=>{const Q=document.body.style.overflow;document.body.style.overflow="hidden";const ae=se=>{se.key==="Escape"&&t()};return window.addEventListener("keydown",ae),()=>{document.body.style.overflow=Q,window.removeEventListener("keydown",ae)}},[t]);const q=Q=>{const[ae,se]=Q.split(":").map(be=>parseInt(be,10));if(!Number.isFinite(ae)||!Number.isFinite(se))return Q;const M=ae===0?12:ae>12?ae-12:ae,ce=ae>=12?"PM":"AM";return`${M}:${String(se).padStart(2,"0")} ${ce}`},z=Q=>{if(!Q)return"No doses recorded yet";const ae=new Date(Q),se=new Date,M=new Date(se);M.setDate(M.getDate()-1);const ce=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()),be=new Date(se.getFullYear(),se.getMonth(),se.getDate()),X=new Date(M.getFullYear(),M.getMonth(),M.getDate());let P="";ce.getTime()===be.getTime()?P="Today":ce.getTime()===X.getTime()?P="Yesterday":P=ae.toLocaleDateString("en-US",{month:"short",day:"numeric"});const W=ae.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${P} ${W}`},O=async()=>{if(!e){m("You must be logged in to record a dose.");return}if(Y>=Z){m("All doses have been recorded for this medication");return}const Q=Y+1>=Z;d(!0),m(null);try{const se=new Date().toISOString(),{error:M}=await rt.from("medication_doses").insert({medication_id:n,user_id:e,scheduled_time:se,given_time:se,status:"given"});if(M)throw M;B(ce=>ce+1),ue(se),Q?y(!0):(_("Dose recorded "),setTimeout(()=>{t()},2e3)),s&&s()}catch(ae){m(ae?.message||"Failed to record dose")}finally{d(!1)}};return S&&E?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:()=>{},children:l.jsx("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900 p-8 shadow-2xl",onClick:Q=>Q.stopPropagation(),children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-200 mb-2",children:"Great job!"}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-1",children:["You've completed ",l.jsx("span",{className:"font-semibold",children:E.medication_name})]}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-4",children:["for ",l.jsx("span",{className:"font-semibold",children:T}),"!"]}),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 text-sm text-blue-800 dark:text-blue-200",children:" Consider following up with your vet if needed."}),l.jsx("button",{type:"button",onClick:()=>{y(!1),t()},className:"mt-6 w-full h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold",children:"Got it"})]})})}):l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:Q=>Q.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Track Dose"}),l.jsx("button",{type:"button",className:"text-sm",onClick:t,children:"Close"})]}),a&&l.jsx("div",{className:"mt-4 text-sm text-slate-600",children:"Loading"}),f&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:f}),!a&&E&&l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Pet: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:T||""})]}),l.jsx("div",{className:"text-lg font-semibold",children:E.medication_name}),E.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:E.dosage}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Frequency: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:E.frequency})]}),l.jsxs("div",{className:"mt-2 rounded-lg border border-slate-200 dark:border-slate-800 p-3 text-sm space-y-1.5",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${Y}/${Z} doses (${K}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",G]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",ne]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Last dose given:"})," ",z(H)]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Reminder times:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(E.reminder_times)?E.reminder_times:[]).map((Q,ae)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:q(Q)},ae))})]})]}),x&&l.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:x}),Y>=Z?l.jsx("div",{className:"pt-2",children:l.jsxs("div",{className:"rounded-lg bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 p-4 text-center",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-emerald-800 dark:text-emerald-200",children:"All doses completed!"}),l.jsx("div",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"This medication course is finished."})]})}):l.jsx("div",{className:"pt-2 flex flex-col sm:flex-row gap-3 sm:justify-end",children:l.jsx("button",{type:"button",disabled:u||!e,onClick:O,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:u?"Saving":" MARK AS GIVEN"})})]})]})})}function A5({userId:n,pets:e,refreshKey:t}){const[s,a]=ge.useState(!1),[o,u]=ge.useState(null),[d,f]=ge.useState([]),[m,x]=ge.useState({}),[_,S]=ge.useState(!1),[y,E]=ge.useState(null),[L,T]=ge.useState(null),[A,Y]=ge.useState(!1),[B,H]=ge.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),ue=ge.useMemo(()=>{const O={};for(const Q of e)O[Q.id]=Q;return O},[e]),de=async()=>{if(n){a(!0),u(null);try{try{const{data:M}=await rt.from("profiles").select("timezone").eq("id",n).single(),ce=M&&M.timezone?String(M.timezone):"";ce&&H(ce)}catch{}const{data:O,error:Q}=await rt.from("medications").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(Q)throw Q;const ae=(O||[]).map(M=>({...M,reminder_times:Array.isArray(M.reminder_times)?M.reminder_times:[]}));f(ae);const se=ae.map(M=>M.id);if(se.length>0){const{data:M,error:ce}=await rt.from("medication_doses").select("id, medication_id, user_id, scheduled_time, given_time, status").in("medication_id",se).eq("user_id",n).eq("status","given");if(ce)throw ce;const be={};for(const X of M||[])be[X.medication_id]=(be[X.medication_id]||0)+1;x(be)}else x({})}catch(O){u(O?.message||"Failed to load medications")}finally{a(!1)}}};ge.useEffect(()=>{de()},[n,t]);const Z=O=>Array.isArray(O.reminder_times)&&O.reminder_times.length>0?O.reminder_times.length:O.frequency==="1x daily"?1:O.frequency==="2x daily"?2:3,K=O=>{const[Q,ae]=O.split(":");let se=Number(Q);const M=se>=12?"PM":"AM";return se=se%12,se===0&&(se=12),`${se}:${ae} ${M}`},G=(O,Q)=>{const ae=new Date(O.getFullYear(),O.getMonth(),O.getDate()),se=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),M=Math.round((ae.getTime()-se.getTime())/(1e3*60*60*24));let ce;M===0?O.getTime()<=Q.getTime()?ce="Tomorrow":ce="Today":M===1?ce="Tomorrow":ce=O.toLocaleDateString("en-US",{month:"short",day:"numeric"});const be=O.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${ce} ${be}`},ne=O=>{const Q=new Date(O.start_date),ae=O.end_date?new Date(O.end_date):null,se=new Date,M=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),ce=ae?new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()):null,be=new Date(se.getFullYear(),se.getMonth(),se.getDate()),X=ce?Math.max(1,Math.round((ce.getTime()-M.getTime())/(1e3*60*60*24))+1):1,P=Z(O),W=X*P,re=m[O.id]||0,oe=W>0?Math.min(Math.round(re/W*100),100):0,he=ce?Math.max(0,Math.round((ce.getTime()-be.getTime())/(1e3*60*60*24))+1):0,we=O.reminder_times&&O.reminder_times.length>0?O.reminder_times.filter(Boolean):O.frequency==="1x daily"?["07:00"]:O.frequency==="2x daily"?["07:00","19:00"]:["08:00","14:00","20:00"];let Ne=null;const Ae=new Date;let me=new Date(Ae.getFullYear(),Ae.getMonth(),Ae.getDate());for(let Ue=0;Ue<7;Ue++){if(me<M){me.setDate(me.getDate()+1);continue}if(ce&&me>ce)break;for(const ze of we){const[Ve,Xe]=ze.split(":").map(Ke=>Number(Ke)),ee=new Date(me.getFullYear(),me.getMonth(),me.getDate(),Ve,Xe,0);if(ee.getTime()>Ae.getTime()){Ne=ee;break}}if(Ne)break;me.setDate(me.getDate()+1)}return{totalDoses:W,given:re,pct:oe,daysRemaining:he,nextDoseLabel:Ne?G(Ne,Ae):ce&&be>ce?"Completed":"",endLabel:ce?ce.toISOString().slice(0,10):""}},{active:D,completed:q}=ge.useMemo(()=>{const O=new Date,Q=new Date(O.getFullYear(),O.getMonth(),O.getDate()),ae=[],se=[];for(const M of d){const[ce,be,X]=M.start_date.split("-").map(Number),P=new Date(ce,be-1,X),W=M.end_date?(()=>{const[we,Ne,Ae]=M.end_date.split("-").map(Number);return new Date(we,Ne-1,Ae)})():null,re=ne(M),oe=re.given>=re.totalDoses||W&&Q>W,he=Q>=P&&!oe;oe?se.push(M):he&&ae.push(M)}return{active:ae,completed:se}},[d,m]),z=ge.useMemo(()=>{const O={};for(const Q of D)O[Q.pet_id]||(O[Q.pet_id]=[]),O[Q.pet_id].push(Q);return O},[D]);return l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Medications"}),l.jsx("button",{type:"button",onClick:()=>S(!0),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm",disabled:!n,children:"+ ADD MEDICATION"})]}),s&&l.jsx("div",{className:"mt-4 text-sm text-slate-500",children:"Loading medications"}),o&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&d.length===0&&l.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 text-sm text-slate-600",children:'No medications yet. Click "+ ADD MEDICATION" to create one.'}),l.jsx("div",{className:"mt-4 space-y-6",children:Object.entries(z).map(([O,Q])=>{const ae=ue[O];return l.jsxs("div",{children:[l.jsxs("div",{className:"text-base font-semibold mb-2 flex items-center gap-3 h-12 px-4",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:ae?.color||(ae?.species==="dog"?"#3B82F6":ae?.species==="cat"?"#F97316":"#6B7280")}}),l.jsx("span",{className:"font-semibold",children:ae?`${ae.name} (${ae.species})`:"Unknown Pet"})]}),Q.length===0?l.jsx("div",{className:"ml-4 text-sm text-slate-500 dark:text-slate-400",children:"No active medications"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(se=>{const M=ne(se);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm cursor-pointer hover:shadow-md",onClick:()=>T(se.id),children:[l.jsx("div",{className:"flex items-start justify-between gap-2",children:l.jsx("div",{className:"text-lg font-semibold",children:se.medication_name})}),l.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-700 cursor-pointer",onClick:ce=>{ce.stopPropagation(),E(se.id)},title:"Edit medication","aria-label":"Edit medication",children:"Edit"}),l.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-700 cursor-pointer",onClick:async ce=>{if(ce.stopPropagation(),!!confirm(`Are you sure you want to delete ${se.medication_name}?`))try{let be=!1;try{be=(await fetch(`/api/medications/${se.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}catch{}if(!be){const{error:X}=await rt.from("medications").delete().eq("id",se.id).eq("user_id",n);if(X)throw X}f(X=>X.filter(P=>P.id!==se.id));try{alert("Medication deleted successfully")}catch{}}catch(be){console.error("[medications] delete error",be);try{alert("Failed to delete medication")}catch{}}},title:"Delete medication","aria-label":"Delete medication",children:"Delete"})]}),se.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:se.dosage}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:se.frequency}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Array.isArray(se.reminder_times)?se.reminder_times:[]).map((ce,be)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:K(ce)},be))}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${M.given}/${M.totalDoses} doses (${M.pct}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Next dose:"})," ",M.nextDoseLabel]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",M.daysRemaining]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",M.endLabel]})]})]},se.id)})})]},O)})}),q.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsxs("button",{type:"button",onClick:()=>Y(!A),className:"flex items-center gap-2 text-base font-semibold hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:[l.jsx("svg",{className:`w-4 h-4 transition-transform ${A?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),l.jsxs("span",{children:["Completed Medications (",q.length,")"]})]}),A&&l.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(O=>{const Q=ne(O),ae=ue[O.pet_id],se=O.end_date||new Date().toISOString().slice(0,10);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 p-4 shadow-sm opacity-75",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"text-lg font-semibold",children:O.medication_name}),l.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:" Completed"})]}),O.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:O.dosage}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Pet:"})," ",ae?.name||"Unknown"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${Q.given}/${Q.totalDoses} doses`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Completed:"})," ",se]})]})]},O.id)})})]}),l.jsx(f1,{open:_||!!y,onClose:()=>{S(!1),E(null)},onSaved:()=>{S(!1),E(null),de()},userId:n,pets:e,medicationId:y,editMode:!!y}),L&&l.jsx(j5,{medicationId:L,userId:n,onClose:()=>T(null),onDoseRecorded:()=>de()})]})}function P5({medicationId:n,userId:e,onClose:t}){const[s,a]=ge.useState(null),[o,u]=ge.useState(null),[d,f]=ge.useState(!0),[m,x]=ge.useState(!1),[_,S]=ge.useState(!1),[y,E]=ge.useState(null),[L,T]=ge.useState(null),[A,Y]=ge.useState(null),[B,H]=ge.useState(null),[ue,de]=ge.useState(null);ge.useEffect(()=>{if(console.log("[DoseMarkingPage] useEffect triggered",{medicationId:n,userId:e,success:_,loading:d,error:y}),_){console.log("[DoseMarkingPage] Already successful, skipping reload");return}const q=new URLSearchParams(window.location.search).get("token");q&&(T(q),console.log("[DoseMarkingPage] Magic link token detected:",q.slice(0,8)+"...")),console.log("[DoseMarkingPage] Calling loadMedicationDetails with token:",q?q.slice(0,8)+"...":"null"),Z(q)},[n,e,_]);async function Z(D=null){console.log("[DoseMarkingPage] loadMedicationDetails called",{tokenFromUrl:D,magicToken:L,medicationId:n,success:_,loading:d});try{const q=D||L,z=n.length===8&&!n.includes("-"),O=n.includes("-");if(console.log("[DoseMarkingPage] Detecting format",{isShortCode:z,isUUID:O,effectiveToken:q?q.slice(0,8)+"...":"null"}),z){console.log("[DoseMarkingPage] Loading via short code:",n);const{data:M,error:ce}=await rt.from("medication_doses").select("*, medications(*, pets(name, species))").eq("short_code",n).single();if(ce||!M){console.error("[DoseMarkingPage] Short code lookup failed:",ce?.message,ce?.code),E("This link is invalid or has expired. Please check for a newer SMS."),f(!1);return}console.log("[DoseMarkingPage]  Dose found via short code:",M.id),a(M.medications),u(M.medications?.pets),Y(M.medication_id),H(n),f(!1);return}if(q){console.log("[DoseMarkingPage] Loading via legacy token:",q.slice(0,8)+"...");const{data:M,error:ce}=await rt.from("medication_doses").select("*, medications(*, pets(name, species))").eq("one_time_token",q).single();if(ce||!M){console.error("[DoseMarkingPage] Token validation failed:",ce?.message,ce?.code),console.error("[DoseMarkingPage] Full error:",JSON.stringify(ce)),E("This link is invalid or has expired. Please check for a newer SMS."),f(!1);return}console.log("[DoseMarkingPage]  Dose found via token:",M.id),console.log("[DoseMarkingPage] Full dose data:",JSON.stringify(M,null,2)),console.log("[DoseMarkingPage] Medications object:",M.medications),console.log("[DoseMarkingPage] Pets object:",M.medications?.pets),a(M.medications),u(M.medications?.pets),f(!1),console.log("[DoseMarkingPage]  Medication name:",M.medications?.medication_name||"MISSING"),console.log("[DoseMarkingPage]  Pet name:",M.medications?.pets?.name||"MISSING");return}if(!e){E("Please log in to mark medication as given"),f(!1);return}const{data:Q,error:ae}=await rt.from("medications").select("*, pets(name, species)").eq("id",n).eq("user_id",e).single();if(ae||!Q){E("Medication not found"),f(!1);return}a(Q),u(Q.pets),(await K())?.isComplete&&E("This medication course is already complete!"),f(!1)}catch(q){console.error("Error loading medication:",q),E("Failed to load medication details"),f(!1)}}async function K(){try{const D=A||n,{data:q,error:z}=await rt.from("medication_doses").select("*").eq("medication_id",D).order("scheduled_time",{ascending:!0});if(z||!q)return console.error("[DoseMarkingPage] Failed to fetch doses for stats:",z),null;let O=0;if(s?.start_date&&s?.end_date&&s?.reminder_times){const[W,re,oe]=s.start_date.split("-").map(Number),he=new Date(W,re-1,oe),[we,Ne,Ae]=s.end_date.split("-").map(Number),me=new Date(we,Ne-1,Ae),Ue=Math.floor((me.getTime()-he.getTime())/(1e3*60*60*24))+1,ze=s.reminder_times&&Array.isArray(s.reminder_times)?s.reminder_times.length:1;O=Ue*ze,console.log("[DoseMarkingPage] Progress calculation:",{startDate:s.start_date,endDate:s.end_date,totalDays:Ue,dosesPerDay:ze,totalExpectedDoses:O,dosesInDB:q.length})}else O=q.length,console.warn("[DoseMarkingPage] Missing medication dates, falling back to DB count");const Q=q.filter(W=>W.status==="given").length,ae=O-Q,se=O>0?Math.min(Math.round(Q/O*100),100):0,M=Q>=O&&O>0,ce=q.find(W=>W.status==="pending");let be=null;if(ce&&!M){const W=new Date(ce.scheduled_time),re=new Date,oe=new Date(re);oe.setDate(oe.getDate()+1);const he=W.toDateString()===re.toDateString(),we=W.toDateString()===oe.toDateString(),Ne=W.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});he?be=`Today ${Ne}`:we?be=`Tomorrow ${Ne}`:be=`${W.toLocaleDateString("en-US",{weekday:"short"})} ${Ne}`}let X=null;if(s?.end_date&&!M){const W=new Date(s.end_date),re=new Date;re.setHours(0,0,0,0),W.setHours(0,0,0,0);const oe=W.getTime()-re.getTime(),he=Math.ceil(oe/(1e3*60*60*24));X=he>=0?he:0}const P={givenCount:Q,totalCount:O,remainingCount:ae,percentage:se,nextDoseTime:be,daysRemaining:X,isComplete:M};return de(P),P}catch(D){return console.error("[DoseMarkingPage] Error calculating progress stats:",D),null}}async function G(){if(!B&&!L&&!e){E("Please log in to mark medication as given");return}x(!0),E(null);try{if(B){console.log("[DoseMarkingPage] SHORT CODE: Bypassing backend, using Supabase directly");const{data:M,error:ce}=await rt.from("medication_doses").select("*").eq("short_code",B).single();if(ce||!M){console.error("[DoseMarkingPage] Invalid short code:",ce),E("Invalid link. Please check your recent SMS."),x(!1);return}if(console.log("[DoseMarkingPage] Found dose:",M.id,"Status:",M.status),M.status==="given"){console.log("[DoseMarkingPage] Dose already marked as given - redirecting to success"),window.location.href=`/dose-success?pet=${encodeURIComponent(o?.name||"Your pet")}&med=${encodeURIComponent(s?.medication_name||"medication")}&count=1&total=1`;return}const{count:be,error:X}=await rt.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",M.medication_id).eq("status","given");if(X){console.error("[DoseMarkingPage] Error counting doses:",X),E("Error checking medication status"),x(!1);return}if(s){const oe=new Date(s.start_date),he=new Date(s.end_date),Ne=Math.max(1,Math.round((he.getTime()-oe.getTime())/(1e3*60*60*24))+1)*(s.times_per_day||1);if((be||0)>=Ne){console.log("[DoseMarkingPage] All doses already complete:",{givenCount:be,totalExpectedDoses:Ne}),E("All doses have been recorded for this medication"),x(!1);return}}console.log("[DoseMarkingPage] Marking dose as given via Supabase...");const{error:P}=await rt.from("medication_doses").update({status:"given",given_time:new Date().toISOString()}).eq("id",M.id);if(P){console.error("[DoseMarkingPage] Failed to update dose:",P),E("Failed to mark dose as given. Please try again."),x(!1);return}console.log("[DoseMarkingPage]  Dose marked as given via Supabase"),console.log("[DoseMarkingPage] Calculating progress stats...");let W=null;try{const oe=K(),he=new Promise((we,Ne)=>setTimeout(()=>Ne(new Error("Stats timeout")),3e3));W=await Promise.race([oe,he]),console.log("[DoseMarkingPage] Stats calculated:",W)}catch(oe){console.error("[DoseMarkingPage] Stats calculation failed/timeout:",oe)}const re=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",count:String(W?.givenCount||1),total:String(W?.totalCount||1)});W?.nextDoseTime&&re.set("next",W.nextDoseTime),console.log("[DoseMarkingPage] Redirecting to success page"),window.location.href=`/dose-success?${re.toString()}`;return}console.log("[DoseMarkingPage] Using backend API for:",L?"magic token":"session auth");const D=L?{token:L}:{userId:e},z=`http://localhost:8787/api/medications/${A||n}/mark-given`;console.log("[DoseMarkingPage] Calling API:",z);const O=new AbortController,Q=setTimeout(()=>O.abort(),1e4);let ae;try{ae=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D),signal:O.signal}),clearTimeout(Q)}catch(M){clearTimeout(Q),console.error("[DoseMarkingPage] API call failed or timeout:",M),M.name==="AbortError"?E("Request timeout. Please try again or close this tab."):E("Network error. Please check your connection or close this tab."),x(!1);return}console.log("[DoseMarkingPage] API response status:",ae.status);let se;try{se=await ae.json(),console.log("[DoseMarkingPage] API response body:",se)}catch(M){console.error("[DoseMarkingPage] Failed to parse response:",M),E("Something went wrong. Please try again or close this tab."),x(!1);return}if(!ae.ok||!se.ok){console.error("[DoseMarkingPage] API call failed:",{status:ae.status,result:se}),E(se.error||"Failed to mark dose as given"),x(!1);return}if(console.log("[DoseMarkingPage]  Successfully marked as given"),(B||L)&&!e){console.log("[DoseMarkingPage] Redirecting to static success page"),console.log("[DoseMarkingPage] Calculating progress stats...");let M=null;try{const be=K(),X=new Promise((P,W)=>setTimeout(()=>W(new Error("Stats calculation timeout")),3e3));M=await Promise.race([be,X]),console.log("[DoseMarkingPage] Stats calculated:",M)}catch(be){console.error("[DoseMarkingPage] Stats calculation failed/timeout:",be)}const ce=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",count:String(M?.givenCount||1),total:String(M?.totalCount||1)});M?.nextDoseTime&&ce.set("next",M.nextDoseTime),console.log("[DoseMarkingPage] Redirecting to:",`/dose-success?${ce.toString()}`),window.location.href=`/dose-success?${ce.toString()}`;return}await K(),S(!0),x(!1)}catch(D){console.error("Error marking dose:",D),E("Failed to mark dose as given"),x(!1)}}function ne(){t()}return d?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading medication details..."})]})})}):y&&!s?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:y}),l.jsx("button",{onClick:t,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})}):_?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:ue?.isComplete?"All doses complete!":`Dose ${ue?.givenCount||1} of ${ue?.totalCount||1} complete`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[o?.name||"Your pet","  ",s?.medication_name||"Medication"]}),ue&&l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6 text-left",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${ue.percentage}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[ue.percentage,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ue.isComplete?" Treatment complete!":ue.remainingCount===1?"Just 1 more dose!":`${ue.remainingCount} doses to go`})]})]}),!ue.isComplete&&l.jsxs("div",{className:"space-y-3",children:[ue.nextDoseTime&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:ue.nextDoseTime})]}),ue.daysRemaining!==null&&ue.daysRemaining>=0&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Days remaining:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:ue.daysRemaining===0?"Last day":ue.daysRemaining===1?"1 day":`${ue.daysRemaining} days`})]})]})]}),(B||L)&&!e?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:ue?.nextDoseTime?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center mb-2",children:" All done! You can close this tab now."}),l.jsxs("p",{className:"text-blue-700 text-xs text-center",children:[" Next reminder: ",ue.nextDoseTime]})]}):ue?.isComplete?l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" Treatment complete! You can close this tab."}):l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" All done! You can close this tab now."})}):l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-800 text-sm",children:" Your pet's medication has been recorded. You're all set!"})}),l.jsx("button",{onClick:()=>{if((B||L)&&!e){window.close();return}t(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold",children:(B||L)&&!e?"Done":"View Dashboard"})]})})}):l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mark Medication as Given?"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pet:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:o?.name}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medication:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:s?.medication_name}),s?.dosage&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dosage:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.dosage})]})]}),y&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:y})}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:G,disabled:m,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Marking..."]}):l.jsx(l.Fragment,{children:" Yes, I gave it"})}),l.jsx("button",{onClick:ne,disabled:m,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip this dose"})]})]})})})}function C5(){const n=new URLSearchParams(window.location.search),e=n.get("pet")||"Your pet",t=n.get("med")||"medication",s=parseInt(n.get("count")||"1"),a=parseInt(n.get("total")||"1"),o=n.get("next")||null,u=a>0?Math.min(Math.round(s/a*100),100):0,d=a-s,f=s>=a;return l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:f?"All doses recorded!":`Dose ${s} of ${a} recorded`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[e,"  ",t]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${u}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[u,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f?" Treatment complete!":d===1?"Just 1 more dose!":`${d} doses to go`})]})]}),!f&&o&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:o})]})]}),o&&!f&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:l.jsxs("p",{className:"text-blue-700 text-sm text-center",children:[" Next reminder: ",o]})}),l.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-2",children:[l.jsx("p",{className:"text-gray-800 font-medium text-center mb-2",children:"You're all set!"}),l.jsx("p",{className:"text-gray-600 text-sm text-center",children:"Use your back button or close this window to return to your messages."})]})]})})})}function Of(){return Of=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Of.apply(null,arguments)}function E5(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)!==-1)continue;t[s]=n[s]}return t}function L5(n,e){if(n==null)return{};var t,s,a=E5(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)t=o[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}function T5(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function D5(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ff(n,e){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Ff(n,e)}function I5(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ff(n,e)}function Fd(n){return Fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fd(n)}function p1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p1=function(){return!!n})()}function O5(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function F5(n,e){if(e&&(xr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O5(n)}function R5(n){var e=p1();return function(){var t,s=Fd(n);if(e){var a=Fd(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return F5(this,t)}}var lf={exports:{}},cf,Jm;function M5(){if(Jm)return cf;Jm=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cf=n,cf}var uf,Xm;function U5(){if(Xm)return uf;Xm=1;var n=M5();function e(){}function t(){}return t.resetWarningCache=e,uf=function(){function s(u,d,f,m,x,_){if(_!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}s.isRequired=s;function a(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},uf}var Qm;function B5(){return Qm||(Qm=1,lf.exports=U5()()),lf.exports}var q5=B5();const ji=_u(q5);function Fl(n,e,t){this.x=n,this.y=e,this.time=t||new Date().getTime()}Fl.prototype.velocityFrom=function(n){return this.time!==n.time?this.distanceTo(n)/(this.time-n.time):1};Fl.prototype.distanceTo=function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))};Fl.prototype.equals=function(n){return this.x===n.x&&this.y===n.y&&this.time===n.time};function Yf(n,e,t,s){this.startPoint=n,this.control1=e,this.control2=t,this.endPoint=s}Yf.prototype.length=function(){for(var n=10,e=0,t=void 0,s=void 0,a=0;a<=n;a+=1){var o=a/n,u=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var f=u-t,m=d-s;e+=Math.sqrt(f*f+m*m)}t=u,s=d}return e};Yf.prototype._point=function(n,e,t,s,a){return e*(1-n)*(1-n)*(1-n)+3*t*(1-n)*(1-n)*n+3*s*(1-n)*n*n+a*n*n*n};function z5(n,e,t){var s,a,o,u=null,d=0;t||(t={});var f=function(){d=t.leading===!1?0:Date.now(),u=null,o=n.apply(s,a),u||(s=a=null)};return function(){var m=Date.now();!d&&t.leading===!1&&(d=m);var x=e-(m-d);return s=this,a=arguments,x<=0||x>e?(u&&(clearTimeout(u),u=null),d=m,o=n.apply(s,a),u||(s=a=null)):!u&&t.trailing!==!1&&(u=setTimeout(f,x)),o}}function Lr(n,e){var t=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=z5(Lr.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Lr.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=n,this._ctx=n.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(t._mouseButtonDown=!0,t._strokeBegin(a))},this._handleMouseMove=function(a){t._mouseButtonDown&&t._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var o=a.changedTouches[0];t._strokeBegin(o)}},this._handleTouchMove=function(a){a.preventDefault();var o=a.targetTouches[0];t._strokeMoveUpdate(o)},this._handleTouchEnd=function(a){var o=a.target===t._canvas;o&&(a.preventDefault(),t._strokeEnd(a))},this.on()}Lr.prototype.clear=function(){var n=this._ctx,e=this._canvas;n.fillStyle=this.backgroundColor,n.clearRect(0,0,e.width,e.height),n.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Lr.prototype.fromDataURL=function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=t.ratio||window.devicePixelRatio||1,o=t.width||this._canvas.width/a,u=t.height||this._canvas.height/a;this._reset(),s.src=n,s.onload=function(){e._ctx.drawImage(s,0,0,o,u)},this._isEmpty=!1};Lr.prototype.toDataURL=function(n){var e;switch(n){case"image/svg+xml":return this._toSVG();default:for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[n].concat(s))}};Lr.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Lr.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Lr.prototype.isEmpty=function(){return this._isEmpty};Lr.prototype._strokeBegin=function(n){this._data.push([]),this._reset(),this._strokeUpdate(n),typeof this.onBegin=="function"&&this.onBegin(n)};Lr.prototype._strokeUpdate=function(n){var e=n.clientX,t=n.clientY,s=this._createPoint(e,t),a=this._data[this._data.length-1],o=a&&a[a.length-1],u=o&&s.distanceTo(o)<this.minDistance;if(!(o&&u)){var d=this._addPoint(s),f=d.curve,m=d.widths;f&&m&&this._drawCurve(f,m.start,m.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};Lr.prototype._strokeEnd=function(n){var e=this.points.length>2,t=this.points[0];if(!e&&t&&this._drawDot(t),t){var s=this._data[this._data.length-1],a=s[s.length-1];t.equals(a)||s.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(n)};Lr.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Lr.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Lr.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Lr.prototype._createPoint=function(n,e,t){var s=this._canvas.getBoundingClientRect();return new Fl(n-s.left,e-s.top,t||new Date().getTime())};Lr.prototype._addPoint=function(n){var e=this.points,t=void 0;if(e.push(n),e.length>2){e.length===3&&e.unshift(e[0]),t=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=t.c2;t=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=t.c1,o=new Yf(e[1],s,a,e[2]),u=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:u}}return{}};Lr.prototype._calculateCurveControlPoints=function(n,e,t){var s=n.x-e.x,a=n.y-e.y,o=e.x-t.x,u=e.y-t.y,d={x:(n.x+e.x)/2,y:(n.y+e.y)/2},f={x:(e.x+t.x)/2,y:(e.y+t.y)/2},m=Math.sqrt(s*s+a*a),x=Math.sqrt(o*o+u*u),_=d.x-f.x,S=d.y-f.y,y=x/(m+x),E={x:f.x+_*y,y:f.y+S*y},L=e.x-E.x,T=e.y-E.y;return{c1:new Fl(d.x+L,d.y+T),c2:new Fl(f.x+L,f.y+T)}};Lr.prototype._calculateCurveWidths=function(n){var e=n.startPoint,t=n.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(a);return s.start=this._lastWidth,s.end=o,this._lastVelocity=a,this._lastWidth=o,s};Lr.prototype._strokeWidth=function(n){return Math.max(this.maxWidth/(n+1),this.minWidth)};Lr.prototype._drawPoint=function(n,e,t){var s=this._ctx;s.moveTo(n,e),s.arc(n,e,t,0,2*Math.PI,!1),this._isEmpty=!1};Lr.prototype._drawCurve=function(n,e,t){var s=this._ctx,a=t-e,o=Math.floor(n.length());s.beginPath();for(var u=0;u<o;u+=1){var d=u/o,f=d*d,m=f*d,x=1-d,_=x*x,S=_*x,y=S*n.startPoint.x;y+=3*_*d*n.control1.x,y+=3*x*f*n.control2.x,y+=m*n.endPoint.x;var E=S*n.startPoint.y;E+=3*_*d*n.control1.y,E+=3*x*f*n.control2.y,E+=m*n.endPoint.y;var L=e+m*a;this._drawPoint(y,E,L)}s.closePath(),s.fill()};Lr.prototype._drawDot=function(n){var e=this._ctx,t=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(n.x,n.y,t),e.closePath(),e.fill()};Lr.prototype._fromData=function(n,e,t){for(var s=0;s<n.length;s+=1){var a=n[s];if(a.length>1)for(var o=0;o<a.length;o+=1){var u=a[o],d=new Fl(u.x,u.y,u.time),f=u.color;if(o===0)this.penColor=f,this._reset(),this._addPoint(d);else if(o!==a.length-1){var m=this._addPoint(d),x=m.curve,_=m.widths;x&&_&&e(x,_,f)}}else{this._reset();var S=a[0];t(S)}}};Lr.prototype._toSVG=function(){var n=this,e=this._data,t=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,o=0,u=t.width/s,d=t.height/s,f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS(null,"width",t.width),f.setAttributeNS(null,"height",t.height),this._fromData(e,function(A,Y,B){var H=document.createElement("path");if(!isNaN(A.control1.x)&&!isNaN(A.control1.y)&&!isNaN(A.control2.x)&&!isNaN(A.control2.y)){var ue="M "+A.startPoint.x.toFixed(3)+","+A.startPoint.y.toFixed(3)+" "+("C "+A.control1.x.toFixed(3)+","+A.control1.y.toFixed(3)+" ")+(A.control2.x.toFixed(3)+","+A.control2.y.toFixed(3)+" ")+(A.endPoint.x.toFixed(3)+","+A.endPoint.y.toFixed(3));H.setAttribute("d",ue),H.setAttribute("stroke-width",(Y.end*2.25).toFixed(3)),H.setAttribute("stroke",B),H.setAttribute("fill","none"),H.setAttribute("stroke-linecap","round"),f.appendChild(H)}},function(A){var Y=document.createElement("circle"),B=typeof n.dotSize=="function"?n.dotSize():n.dotSize;Y.setAttribute("r",B),Y.setAttribute("cx",A.x),Y.setAttribute("cy",A.y),Y.setAttribute("fill",A.color),f.appendChild(Y)});var m="data:image/svg+xml;base64,",x='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+o+" "+u+" "+d+'"')+(' width="'+u+'"')+(' height="'+d+'"')+">",_=f.innerHTML;if(_===void 0){var S=document.createElement("dummy"),y=f.childNodes;S.innerHTML="";for(var E=0;E<y.length;E+=1)S.appendChild(y[E].cloneNode(!0));_=S.innerHTML}var L="</svg>",T=x+_+L;return m+btoa(T)};Lr.prototype.fromData=function(n){var e=this;this.clear(),this._fromData(n,function(t,s){return e._drawCurve(t,s.start,s.end)},function(t){return e._drawDot(t)}),this._data=n};Lr.prototype.toData=function(){return this._data};var Ad={exports:{}},$5=Ad.exports,Zm;function W5(){return Zm||(Zm=1,(function(n,e){(function(t,s){n.exports=s()})($5,function(){return(function(t){function s(o){if(a[o])return a[o].exports;var u=a[o]={exports:{},id:o,loaded:!1};return t[o].call(u.exports,u,u.exports,s),u.loaded=!0,u.exports}var a={};return s.m=t,s.c=a,s.p="",s(0)})([function(t,s){function a(m){var x=m.getContext("2d"),_=m.width,S=m.height,y=x.getImageData(0,0,_,S).data,E=d(!0,_,S,y),L=d(!1,_,S,y),T=f(!0,_,S,y),A=f(!1,_,S,y),Y=A-T+1,B=L-E+1,H=x.getImageData(T,E,Y,B);return m.width=Y,m.height=B,x.clearRect(0,0,Y,B),x.putImageData(H,0,0),m}function o(m,x,_,S){return{red:S[4*(_*x+m)],green:S[4*(_*x+m)+1],blue:S[4*(_*x+m)+2],alpha:S[4*(_*x+m)+3]}}function u(m,x,_,S){return o(m,x,_,S).alpha}function d(m,x,_,S){for(var y=m?1:-1,E=m?0:_-1,L=E;m?L<_:L>-1;L+=y)for(var T=0;T<x;T++)if(u(T,L,x,S))return L;return null}function f(m,x,_,S){for(var y=m?1:-1,E=m?0:x-1,L=E;m?L<x:L>-1;L+=y)for(var T=0;T<_;T++)if(u(L,T,x,S))return L;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Ad)),Ad.exports}var H5=W5();const V5=_u(H5);var G5=["canvasProps","clearOnResize"],Su=(function(n){I5(t,n);var e=R5(t);function t(){var s;D5(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=e.call.apply(e,[this].concat(o)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(d){s._canvas=d,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var d=s.props;d.canvasProps,d.clearOnResize;var f=L5(d,G5);return f},s.componentDidMount=function(){var d=s.getCanvas();s._sigPad=new Lr(d,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var d=s.getCanvas(),f=document.createElement("canvas");return f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0),V5(f)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var d,f,m=(d=s.props.canvasProps)!==null&&d!==void 0?d:{},x=m.width,_=m.height;if(!(typeof x<"u"&&typeof _<"u")){var S=s.getCanvas(),y=Math.max((f=window.devicePixelRatio)!==null&&f!==void 0?f:1,1);typeof x>"u"&&(S.width=S.offsetWidth*y),typeof _>"u"&&(S.height=S.offsetHeight*y),S.getContext("2d").scale(y,y),s.clear()}},s.render=function(){var d=s.props.canvasProps;return Mf.createElement("canvas",Of({ref:s.setRef},d))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(d,f){return s.getSignaturePad().fromDataURL(d,f)},s.toDataURL=function(d,f){return s.getSignaturePad().toDataURL(d,f)},s.fromData=function(d){return s.getSignaturePad().fromData(d)},s.toData=function(){return s.getSignaturePad().toData()},s}return T5(t)})(ge.Component);Su.propTypes={velocityFilterWeight:ji.number,minWidth:ji.number,maxWidth:ji.number,minDistance:ji.number,dotSize:ji.oneOfType([ji.number,ji.func]),penColor:ji.string,throttle:ji.number,onEnd:ji.func,onBegin:ji.func,canvasProps:ji.object,clearOnResize:ji.bool};Su.defaultProps={clearOnResize:!0};Su.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function Y5({open:n,onClose:e,insurerName:t,petId:s,petName:a,claimId:o,missingFields:u,existingData:d={},suggestedValues:f={},onComplete:m}){console.log("[MissingFieldsModal] Component rendered with petName:",a);const[x,_]=ge.useState({}),[S,y]=ge.useState(null),[E,L]=ge.useState(!1),T=ge.useRef({});ge.useEffect(()=>{const Z={};u.forEach(K=>{f[K.field]?Z[K.field]=f[K.field]:d[K.field]&&(Z[K.field]=d[K.field])}),_(Z)},[u,d,f]);const A=(Z,K)=>{console.log("[MissingFieldsModal] setFieldValue called:",{fieldName:Z,value:K,type:typeof K}),_(G=>{const ne={...G,[Z]:K};return console.log("[MissingFieldsModal] Updated formData:",ne),ne}),y(null)},Y=Z=>Z.conditional?x[Z.conditional.field]===Z.conditional.value:!0,B=ge.useMemo(()=>(console.log("[MissingFieldsModal] Filtering fields, formData:",x),u.filter(Z=>{const K=Y(Z);return console.log(`[MissingFieldsModal] Field ${Z.field}: ${K?"VISIBLE":"HIDDEN"}`,Z.conditional?`(conditional: ${Z.conditional.field} === "${Z.conditional.value}")`:""),K})),[u,x]),H=Z=>{console.log("[MissingFieldsModal] replacePlaceholders called with:",Z,"petName:",a);const K=Z.replace(/{petName}/g,a||"your pet");return console.log("[MissingFieldsModal] replacePlaceholders result:",K),K},ue=Z=>Z.type==="signature"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[H(Z.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),Z.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:H(Z.description)}),l.jsxs("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!x[Z.field]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Su,{ref:K=>{T.current[Z.field]=K},canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onEnd:()=>{const K=T.current[Z.field];K&&!K.isEmpty()&&A(Z.field,K.toDataURL("image/png"))}})]}),x[Z.field]&&l.jsx("button",{type:"button",onClick:()=>{T.current[Z.field]?.clear(),A(Z.field,null)},className:"mt-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})]},Z.field):Z.type==="text"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[H(Z.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),Z.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:H(Z.description)}),l.jsx("input",{type:"text",placeholder:Z.placeholder,value:x[Z.field]||"",onChange:K=>A(Z.field,K.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"}),Z.aiExtract&&f[Z.field]&&l.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[" Suggested from diagnosis: ",f[Z.field]]})]},Z.field):Z.type==="textarea"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[H(Z.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),Z.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:H(Z.description)}),l.jsx("textarea",{rows:Z.rows||3,placeholder:Z.placeholder,value:x[Z.field]||"",onChange:K=>A(Z.field,K.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},Z.field):Z.type==="date"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[H(Z.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),Z.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:H(Z.description)}),l.jsx("input",{type:"date",value:x[Z.field]||"",onChange:K=>A(Z.field,K.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},Z.field):Z.type==="phone"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[H(Z.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),Z.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:H(Z.description)}),l.jsx("input",{type:"tel",placeholder:Z.placeholder||"(555) 123-4567",value:x[Z.field]||"",onChange:K=>A(Z.field,K.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},Z.field):Z.type==="radio"&&Z.options?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[H(Z.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),Z.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:H(Z.description)}),l.jsx("div",{className:"space-y-2",children:Z.options.map(K=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[l.jsx("input",{type:"radio",name:Z.field,value:K,checked:x[Z.field]===K,onChange:G=>A(Z.field,G.target.value),className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${x[Z.field]===K?"bg-emerald-500 border-emerald-500":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:x[Z.field]===K&&l.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:K})]},K))})]},Z.field):null,de=async Z=>{Z.preventDefault(),y(null),console.log("[MissingFieldsModal] handleSubmit called"),console.log("[MissingFieldsModal] Current formData:",x),console.log("[MissingFieldsModal] Visible fields:",B.map(ne=>ne.field));const K={},G=B.every(ne=>{if(!ne.required)return K[ne.field]=!0,!0;const D=x[ne.field],q=!(!D||typeof D=="string"&&D.trim()==="");return K[ne.field]=q,console.log(`[MissingFieldsModal] Field ${ne.field}:`,{value:D,type:typeof D,isFilled:q,required:ne.required}),!!q});if(console.log("[MissingFieldsModal] Validation results:",K),console.log("[MissingFieldsModal] All filled?",G),!G){const ne=Object.entries(K).filter(([D,q])=>!q).map(([D])=>D);console.log("[MissingFieldsModal] Missing fields:",ne),y("Please fill out all required fields");return}L(!0);try{await m(x)}catch{y("Failed to save data. Please try again."),L(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl max-h-[calc(100vh-80px)] overflow-y-auto",onClick:Z=>Z.stopPropagation(),children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Quick Questions for ",t]}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:[" We need a few details to submit your claim. These fields are required by ",t,"."]}),l.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400",children:[`This is the only time we'll ask  we save everything for future claims. Your vet can help with pet details. Search "`,t,'" in your email to find your policy number.']})]}),S&&l.jsx("div",{className:"mb-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:S}),l.jsxs("form",{onSubmit:de,children:[B.map(Z=>ue(Z)),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" This information will be saved for future claims"})}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,disabled:E,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:E,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50",children:E?"Saving...":"Continue to Submit"})]})]})]})}):null}const K5=["demo@petclaimhelper.com","drsarah@petclaimhelper.com","david@mybenefitexperience.com","larrysecrets@gmail.com"],J5=["pumpkin","spot","healthy paws","nationwide","trupanion","pets best","figo","aspca"];function X5({claim:n,pet:e,userId:t,onClose:s,onSuccess:a}){const[o,u]=ge.useState("validating"),[d,f]=ge.useState(null),[m,x]=ge.useState(null),[_,S]=ge.useState(!1),[y,E]=ge.useState(null),[L,T]=ge.useState(null),A=e?.insurance_company||"Nationwide",Y=n.total_amount?`$${parseFloat(n.total_amount).toFixed(2)}`:"$0.00",B=()=>{const K=(y?.email||"").toLowerCase(),G=A.toLowerCase(),ne=K5.some(q=>q.toLowerCase()===K),D=J5.some(q=>G.includes(q.toLowerCase()));return ne||!D};ge.useEffect(()=>{async function K(){try{u("validating"),console.log("[ClaimSubmissionModal] Starting validation..."),console.log("[ClaimSubmissionModal] claim:",n),console.log("[ClaimSubmissionModal] pet:",e),console.log("[ClaimSubmissionModal] pet.insurance_company:",e?.insurance_company);const{data:G,error:ne}=await rt.from("profiles").select("*").eq("id",t).single();if(ne)throw ne;E(G);const D=e?.insurance_company?.toLowerCase()||"";if(console.log("[ClaimSubmissionModal] insurerName:",D),!D||D==="not insured"||D==="none"){console.log("[ClaimSubmissionModal] No insurance company found"),x("Pet does not have an insurance company set. Please update pet information in Settings."),u("missing-data");return}const{data:{session:q}}=await rt.auth.getSession();if(!q?.access_token){x("Please log in to submit claims"),u("error");return}const z="http://localhost:8787";console.log("[ClaimSubmissionModal] Calling validation API:",`${z}/api/claims/validate-fields`),console.log("[ClaimSubmissionModal] Request body:",{claimId:n.id,userId:t,insurer:D});const O=await fetch(`${z}/api/claims/validate-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q.access_token}`},body:JSON.stringify({claimId:n.id,userId:t,insurer:D})});console.log("[ClaimSubmissionModal] Response status:",O.status),console.log("[ClaimSubmissionModal] Response ok:",O.ok),console.log("[ClaimSubmissionModal] Response headers:",{"content-type":O.headers.get("content-type"),"content-length":O.headers.get("content-length")});const Q=await O.text();console.log("[ClaimSubmissionModal] Response text (first 500 chars):",Q.substring(0,500));let ae;try{ae=JSON.parse(Q),console.log("[ClaimSubmissionModal] Validation response:",ae)}catch(se){throw console.error("[ClaimSubmissionModal] Failed to parse JSON response:",se),console.error("[ClaimSubmissionModal] Full response text:",Q),new Error(`API returned non-JSON response (status ${O.status}): ${Q.substring(0,200)}`)}if(!ae.ok){console.error("[ClaimSubmissionModal] Validation failed:",ae.error),x(`Error validating claim requirements: ${ae.error}`),u("error");return}if(console.log("[Validation] Result:",ae),ae.missingFields&&ae.missingFields.length>0){console.log("[ClaimSubmissionModal] Missing fields detected:",ae.missingFields),T({insurerName:e.insurance_company,missingFields:ae.missingFields,existingData:ae.existingData||{},suggestedValues:ae.suggestedValues||{}}),u("collect-missing-fields");return}console.log("[ClaimSubmissionModal] All fields present, proceeding to confirm"),u("confirm")}catch(G){console.error("[Validation] Error:",G),x(`Failed to validate claim: ${G.message}`),u("error")}}K()},[t,e,n]);const H=[];async function ue(){console.log("[Preview] ========== PREVIEW PDF CLICKED =========="),console.log("[Preview] User Agent:",navigator.userAgent),console.log("[Preview] Window width:",window.innerWidth);try{S(!0);const K="http://localhost:8787",{data:{session:G}}=await rt.auth.getSession();if(!G?.access_token)throw new Error("Not authenticated");const ne=n.pdf_path?"?merged=true":"";console.log("[Preview] Fetching PDF from:",`${K}/api/claims/${n.id}/preview-pdf${ne}`);const D=await fetch(`${K}/api/claims/${n.id}/preview-pdf${ne}`,{headers:{Authorization:`Bearer ${G.access_token}`}});if(console.log("[Preview] Response status:",D.status),console.log("[Preview] Response content-type:",D.headers.get("content-type")),!D.ok)if(D.headers.get("content-type")?.includes("application/json")){const ae=await D.json();console.error("[Preview] Server returned error:",ae);let se=ae.error||"Failed to generate preview";throw ae.details&&(se+=`

Details: ${ae.details}`),ae.fallback==="claim-form-only"?se+=`

The claim form was generated but the vet invoice could not be retrieved from storage.`:ae.fallback==="merge-failed"&&(se+=`

Both files exist but could not be merged into a single PDF.`),new Error(se)}else throw new Error("Failed to generate preview");const q=await D.blob();console.log("[Preview] PDF blob size:",q.size),console.log("[Preview] PDF blob type:",q.type);const z=URL.createObjectURL(q);console.log("[Preview] Blob URL created:",z),console.log("[Preview]  PDF fetched successfully, size:",q.size,"bytes");const O=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768;if(console.log("[Preview] Mobile detected:",O),O){console.log("[Preview] Using mobile-specific PDF handling");const Q=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(console.log("[Preview] Is iOS:",Q),Q)console.log("[Preview] Opening PDF in same window (iOS)"),window.location.href=z;else{console.log("[Preview] Attempting download (Android)");const ae=document.createElement("a");ae.href=z,ae.download=`claim-${e.name}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),console.log("[Preview] Download triggered")}}else{console.log("[Preview] Opening PDF in new tab (desktop)");const Q=window.open(z,"_blank","noopener,noreferrer");console.log("[Preview] New window opened:",!!Q),n.pdf_path?console.log("[Preview] Opened merged PDF (claim form + vet invoice)"):console.log("[Preview] Opened claim form PDF (no vet invoice attached)")}}catch(K){console.error("[Preview PDF] ERROR:",K),console.error("[Preview PDF] Error stack:",K.stack),alert(`Could not generate preview: ${K.message}`)}finally{console.log("[Preview] Cleaning up, setting loading to false"),S(!1)}}async function de(){u("submitting"),x(null);try{const{data:{session:K}}=await rt.auth.getSession();if(!K?.access_token){x("Please log in to submit claims"),u("error");return}const ne=await fetch("http://localhost:8787/api/claims/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K.access_token}`},body:JSON.stringify({claimId:n.id,userId:t})}),D=await ne.json();if(!ne.ok||!D.ok)throw new Error(D.error||"Failed to submit claim");console.log("[ClaimSubmission] Success:",D),f(D.messageId),u("success")}catch(K){console.error("[ClaimSubmission] Error:",K),x(K.message||"Failed to submit claim"),u("error")}}async function Z(K){try{u("validating");const{data:{session:G}}=await rt.auth.getSession();if(!G?.access_token){x("Please log in to save claim information"),u("error");return}const D=await fetch(`http://localhost:8787/api/claims/${n.id}/save-collected-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${G.access_token}`},body:JSON.stringify({collectedData:K})}),q=await D.json();if(!D.ok||!q.ok){x("Failed to save claim information"),u("error");return}console.log("[Save Fields] Success:",q),u("confirm")}catch(G){console.error("[Save Fields] Error:",G),x("Failed to save claim information"),u("error")}}if(o==="validating")return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Validating Requirements..."}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Checking if all required information is complete"})]})});if(o==="collect-missing-fields"&&L)return l.jsx(Y5,{open:!0,onClose:s,insurerName:L.insurerName,petId:e.id,petName:e.name,claimId:n.id,missingFields:L.missingFields,existingData:L.existingData,suggestedValues:L.suggestedValues,onComplete:Z});if(o==="missing-data"){const K=()=>{s(),window.location.hash="#settings"};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full",children:[l.jsx("div",{className:"text-orange-500 text-6xl mb-4 text-center",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Missing Required Information"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-center",children:"Please complete your profile and pet information before submitting claims."}),l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-3",children:"Missing:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 space-y-1.5",children:m?.split(`
`).slice(1).map((G,ne)=>l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),l.jsx("span",{children:G.replace("- ","")})]},ne))})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How to complete:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:"1. Go to Settings (click button below)"}),l.jsx("li",{children:"2. Fill in your signature, insurance info, and address"}),l.jsx("li",{children:"3. Update your pet's breed and date of birth"}),l.jsx("li",{children:"4. Return here and submit your claim"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:K,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Go to Settings"})]})]})})}return o==="submitting"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Submitting Claim..."}),l.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Generating PDF and sending to ",A]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Creating claim form PDF..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Sending email to insurance company..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Updating claim status..."})]})]})]})}):o==="success"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Claim Submitted!"}),l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Your claim for ",l.jsx("strong",{children:e?.name||"your pet"})," has been automatically submitted to ",l.jsx("strong",{children:A}),"."]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"What happens next:"}),l.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-400 space-y-1",children:[l.jsxs("li",{children:[" Claim form PDF sent to ",A]}),l.jsx("li",{children:" Copy sent to your email (BCC)"}),l.jsx("li",{className:"ml-4 text-xs",children:" Don't see it? Check your spam or junk folder"}),l.jsx("li",{children:' Claim status updated to "Submitted"'}),l.jsx("li",{children:" Insurance company will review (typically 5-10 business days)"})]})]}),d&&l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6",children:l.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 font-mono break-all",children:["Tracking ID: ",d.slice(0,20),"..."]})}),l.jsx("button",{onClick:()=>{a(d),s()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold w-full",children:"Done"})]})}):o==="error"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Submission Failed"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"We couldn't submit your claim automatically."}),l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:l.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[l.jsx("strong",{children:"Error:"})," ",m]})}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Next steps:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:" Try again in a few minutes"}),l.jsx("li",{children:" Or manually mark as submitted after filing yourself"}),l.jsx("li",{children:" Contact support if the problem persists"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>u("confirm"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Auto-Submit Claim to ",A,"?"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Review the claim details before submitting"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:"Claim Summary"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pet:"}),l.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e?.name||"Unknown"," (",e?.species||"Pet",")"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Clinic:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.clinic_name||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Service Date:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.service_date||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagnosis:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-right max-w-xs line-clamp-2",children:n.visit_title||n.diagnosis||"N/A"})]}),l.jsxs("div",{className:"pt-3 border-t border-blue-200 dark:border-blue-700 flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-semibold",children:"Total Amount:"}),l.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Y})]})]})]}),H.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-1",children:"Missing Information"}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"The following information is missing from your claim:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 list-disc list-inside",children:H.map((K,G)=>l.jsx("li",{children:K},G))}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-2",children:"You can still submit, but the insurance company may request additional information."})]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("button",{onClick:ue,disabled:_,className:"w-full py-3 px-4 border-2 border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Generating Preview..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Preview Claim Form PDF"]})}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Review before submitting"})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"What will happen:"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"1."}),l.jsx("span",{children:"Generate professional claim form PDF with all details"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"2."}),l.jsxs("span",{children:["Email claim form to ",l.jsx("strong",{children:A})," at their claims processing address"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"3."}),l.jsx("span",{children:"Send you a copy (BCC) so you have a record"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"4."}),l.jsx("span",{children:'Update claim status to "Submitted" in your dashboard'})]})]})]}),B()&&l.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Test Mode Active"}),l.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["This submission will be sent to ",l.jsx("strong",{children:"larry@uglydogadventures.com"})," for testing, not to the actual insurance company. Perfect for testing!"]})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:de,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all",children:[" Submit to ",A]}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})})}function Q5({userId:n,initialSignature:e,onSave:t}){const s=ge.useRef(null),[a,o]=ge.useState(e||null),[u,d]=ge.useState(!1),[f,m]=ge.useState(null),[x,_]=ge.useState(!1);ge.useEffect(()=>{e&&o(e)},[e]);const S=()=>{s.current?.clear(),_(!1),m(null)},y=async()=>{if(!s.current||s.current.isEmpty()){m({type:"error",text:"Please draw your signature first"});return}d(!0),m(null);try{const T=s.current.toDataURL("image/png"),{error:A}=await rt.from("profiles").update({signature:T}).eq("id",n);if(A)throw A;o(T),m({type:"success",text:"Signature saved successfully!"}),t&&t(T),setTimeout(()=>m(null),3e3)}catch(T){console.error("Error saving signature:",T),m({type:"error",text:"Failed to save signature. Please try again."})}finally{d(!1)}},E=()=>{o(null),_(!1),setTimeout(()=>{s.current?.clear()},0)},L=()=>{_(!0),m(null)};return l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Signature"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will be used on your insurance claim forms"})]}),a?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-green-800",children:"Signature Saved"}),l.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),l.jsx("div",{className:"bg-white rounded border border-green-300 p-4",children:l.jsx("img",{src:a,alt:"Your signature",className:"max-w-full h-auto",style:{maxHeight:"120px"}})})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[!x&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-gray-400 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Su,{ref:s,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(249, 250, 251)",penColor:"rgb(0, 0, 0)",onBegin:L})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:S,disabled:!x||u,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear"}),l.jsx("button",{onClick:y,disabled:!x||u,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:u?"Saving...":"Save Signature"})]}),f&&l.jsx("div",{className:`p-3 rounded-lg text-sm ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:f.text})]}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-800",children:[l.jsx("strong",{children:"Note:"})," Your signature will be included on all insurance claim submissions. Make sure it matches the signature on file with your insurance company."]})})]})}const Z5={dry:4,wet:2,"freeze-dried":9,raw:2,cooked:2.5};function ew(){const n=z=>{if(!z)return null;const O=String(z).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!O)return null;const Q=Number(O[1]),ae=Number(O[2])-1,se=Number(O[3]),M=new Date(Q,ae,se);return isNaN(M.getTime())?null:M},[e,t]=ge.useState([]),[s,a]=ge.useState([]),[o,u]=ge.useState([]),[d,f]=ge.useState(!0),[m,x]=ge.useState(null),[_,S]=ge.useState("all"),[y,E]=ge.useState("all"),[L,T]=ge.useState("email"),[A,Y]=ge.useState("asc"),[B,H]=ge.useState(null);ge.useEffect(()=>{ue()},[]);async function ue(){try{f(!0),x(null);const{data:z,error:O}=await rt.from("profiles").select("*").order("created_at",{ascending:!1});if(O)throw O;const Q=z.filter(me=>{const Ue=(me.email||"").toLowerCase();return!Ue.includes("larry")&&!Ue.includes("uglydogadventures")&&!Ue.includes("dogstrainedright")}),ae=new Set(Q.map(me=>me.id)),{data:se,error:M}=await rt.from("pets").select("*");if(M)throw M;const ce=se.filter(me=>ae.has(me.user_id)),{data:be,error:X}=await rt.from("claims").select("*");if(X)throw X;const P=be.filter(me=>ae.has(me.user_id)),W=Q.map(me=>{const Ue=ce.filter(ee=>ee.user_id===me.id),ze=P.filter(ee=>ee.user_id===me.id),Ve=ze.reduce((ee,Ke)=>ee+(Ke.total_amount||0),0);let Xe="inactive";return ze.length>0?Xe="active":Ue.length>0&&(Xe="pet-only"),{profile:me,pets:Ue,claims:ze,petsCount:Ue.length,claimsCount:ze.length,totalClaimAmount:Ve,lastActive:me.updated_at||me.created_at,status:Xe}}),re=P.map(me=>{const Ue=Q.find(Ve=>Ve.id===me.user_id),ze=ce.find(Ve=>Ve.id===me.pet_id);return{...me,userEmail:Ue?.email||"Unknown",userName:Ue?.full_name||"Unknown",petName:ze?.name||"Unknown",insuranceCompany:ze?.insurance_company||"Unknown"}}),{data:oe,error:he}=await rt.from("food_entries").select(`
          *,
          pets!inner (
            id,
            name,
            user_id,
            profiles!inner (
              id,
              email
            )
          )
        `);if(he)throw he;const we=(oe||[]).filter(me=>{const Ue=(me.pets?.profiles?.email||"").toLowerCase();return!Ue.includes("larry")&&!Ue.includes("uglydogadventures")&&!Ue.includes("dogstrainedright")}),Ne=new Date,Ae=we.map(me=>{const Ue=me.pets?.name||"Unknown",ze=me.pets?.profiles?.email||"Unknown",Ve=Z5[me.food_type]||4,ee=me.bag_size_lbs*Ve/me.cups_per_day,Lt=me.bag_cost/ee*30,xt=new Date(me.start_date),$e=Math.floor((Ne.getTime()-xt.getTime())/(1e3*60*60*24)),ct=Math.max(0,Math.floor(ee-$e));let et="Stocked";return ct<3?et="Urgent":ct<7&&(et="Order Soon"),{...me,userEmail:ze,petName:Ue,monthlyCost:Lt,daysLeft:ct,status:et}});t(W),a(re),u(Ae)}catch(z){console.error("Error loading admin data:",z),x(z.message)}finally{f(!1)}}const de=ge.useMemo(()=>{const z=e.filter(oe=>oe.status==="active").length,O=e.filter(oe=>oe.status==="inactive").length,Q=e.reduce((oe,he)=>oe+he.petsCount,0),ae=s.length,se=s.reduce((oe,he)=>oe+(he.total_amount||0),0),M=s.filter(oe=>oe.filing_status==="draft").length,ce=s.filter(oe=>oe.filing_status==="submitted").length,be=s.filter(oe=>oe.filing_status==="paid").length,X={};s.forEach(oe=>{const he=oe.insuranceCompany||"Unknown";X[he]=(X[he]||0)+1});const P=o.length,W=new Set(o.map(oe=>oe.userEmail)).size,re=o.reduce((oe,he)=>oe+he.monthlyCost,0);return{totalUsers:e.length,activeUsers:z,inactiveUsers:O,totalPets:Q,totalClaims:ae,totalAmount:se,draftClaims:M,submittedClaims:ce,paidClaims:be,insuranceBreakdown:X,totalFoodEntries:P,usersTrackingFood:W,totalMonthlyFoodSpend:re}},[e,s,o]),Z=ge.useMemo(()=>{const z=new Map;o.forEach(Q=>{const ae=z.get(Q.userEmail);if(ae){ae.foodsTracked+=1,ae.totalMonthlySpend+=Q.monthlyCost,Q.is_subscription&&(ae.subscriptions+=1),(Q.status==="Order Soon"||Q.status==="Urgent")&&(ae.alerts+=1);const se=new Date(Q.updated_at||Q.created_at),M=new Date(ae.mostRecentActivity);se>M&&(ae.mostRecentActivity=Q.updated_at||Q.created_at);const ce=new Date(ae.firstEntryDate);se<ce&&(ae.firstEntryDate=Q.created_at)}else z.set(Q.userEmail,{email:Q.userEmail,foodsTracked:1,petsWithFood:0,totalMonthlySpend:Q.monthlyCost,firstEntryDate:Q.created_at,mostRecentActivity:Q.updated_at||Q.created_at,subscriptions:Q.is_subscription?1:0,alerts:Q.status==="Order Soon"||Q.status==="Urgent"?1:0})});const O=new Map;return o.forEach(Q=>{O.has(Q.userEmail)||O.set(Q.userEmail,new Set),O.get(Q.userEmail).add(Q.petName)}),z.forEach((Q,ae)=>{Q.petsWithFood=O.get(ae)?.size||0}),Array.from(z.values()).sort((Q,ae)=>new Date(ae.mostRecentActivity).getTime()-new Date(Q.mostRecentActivity).getTime())},[o]),K=ge.useMemo(()=>[...e].sort((O,Q)=>{let ae,se;switch(L){case"email":ae=O.profile.email,se=Q.profile.email;break;case"name":ae=O.profile.full_name||"",se=Q.profile.full_name||"";break;case"petsCount":ae=O.petsCount,se=Q.petsCount;break;case"claimsCount":ae=O.claimsCount,se=Q.claimsCount;break;case"lastActive":ae=new Date(O.lastActive).getTime(),se=new Date(Q.lastActive).getTime();break;default:return 0}return ae<se?A==="asc"?-1:1:ae>se?A==="asc"?1:-1:0}),[e,L,A]),G=ge.useMemo(()=>s.filter(z=>!(_!=="all"&&z.filing_status!==_||y!=="all"&&z.insuranceCompany!==y)),[s,_,y]);function ne(z){L===z?Y(A==="asc"?"desc":"asc"):(T(z),Y("asc"))}function D(z){switch(z){case"active":return"bg-green-100 text-green-800";case"pet-only":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function q(z){switch(z){case"submitted":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800"}}return d?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):m?l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading admin data"}),l.jsx("p",{className:"text-red-600 mt-2",children:m})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"System overview and user management"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Users"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:de.totalUsers}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-green-600",children:["Active: ",de.activeUsers]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-red-600",children:["Inactive: ",de.inactiveUsers]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Pets"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:de.totalPets}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Across all users"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Claims"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:de.totalClaims}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Draft: ",de.draftClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-blue-600",children:["Submitted: ",de.submittedClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-green-600",children:["Paid: ",de.paidClaims]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Amount"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",de.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All claims combined"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg shadow p-6 border border-emerald-200",children:[l.jsx("h3",{className:"text-sm font-medium text-emerald-700 uppercase",children:" Food Entries"}),l.jsx("p",{className:"text-3xl font-bold text-emerald-900 mt-2",children:de.totalFoodEntries}),l.jsx("p",{className:"text-sm text-emerald-600 mt-2",children:"Total tracked foods"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg shadow p-6 border border-emerald-200",children:[l.jsx("h3",{className:"text-sm font-medium text-emerald-700 uppercase",children:" Users Tracking Food"}),l.jsx("p",{className:"text-3xl font-bold text-emerald-900 mt-2",children:de.usersTrackingFood}),l.jsx("p",{className:"text-sm text-emerald-600 mt-2",children:"Active food trackers"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg shadow p-6 border border-emerald-200",children:[l.jsx("h3",{className:"text-sm font-medium text-emerald-700 uppercase",children:" Monthly Food Spend"}),l.jsxs("p",{className:"text-3xl font-bold text-emerald-900 mt-2",children:["$",de.totalMonthlyFoodSpend.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("p",{className:"text-sm text-emerald-600 mt-2",children:"All users combined"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsxs("div",{className:"px-6 py-4 border-b",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Food Tracking Users"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"User engagement and activity summary"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Foods Tracked"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pets w/ Food"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monthly Spend"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"First Entry"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recent Activity"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscriptions"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alerts"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(z=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:z.foodsTracked}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:z.petsWithFood}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",z.totalMonthlySpend.toFixed(2)]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(z.firstEntryDate).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(z.mostRecentActivity).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:z.subscriptions>0?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:z.subscriptions}):l.jsx("span",{className:"text-gray-400",children:"0"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:z.alerts>0?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:z.alerts}):l.jsx("span",{className:"text-gray-400",children:"0"})})]},z.email))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Z.length," ",Z.length===1?"user":"users"," tracking food"]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsxs("div",{className:"px-6 py-4 border-b",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Food Tracking Activity"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Detailed per-food entry view"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Food Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Food Type"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monthly Cost"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Left"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(z=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.userEmail}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.food_name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:z.food_type}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",z.monthlyCost.toFixed(2)]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:z.daysLeft}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${z.status==="Urgent"?"bg-red-100 text-red-800":z.status==="Order Soon"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:z.status})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:z.is_subscription?l.jsx("span",{className:"text-emerald-600 font-semibold",children:"Yes"}):l.jsx("span",{className:"text-gray-400",children:"No"})})]},z.id))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Total entries: ",o.length]}),l.jsxs("span",{className:"font-semibold text-gray-900",children:["Total monthly spend: $",o.reduce((z,O)=>z+O.monthlyCost,0).toFixed(2)]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims by Insurance Company"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(de.insuranceBreakdown).map(([z,O])=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:z}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:O})]},z))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Users"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ne("email"),children:["Email ",L==="email"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ne("name"),children:["Name ",L==="name"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ne("petsCount"),children:["Pets ",L==="petsCount"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ne("claimsCount"),children:["Claims ",L==="claimsCount"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>ne("lastActive"),children:["Last Active ",L==="lastActive"&&(A==="asc"?"":"")]}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(z=>l.jsxs(Mf.Fragment,{children:[l.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>H(B===z.profile.id?null:z.profile.id),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.profile.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.profile.full_name||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:z.petsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:z.claimsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(z.lastActive).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D(z.status)}`,children:z.status})})]}),B===z.profile.id&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"User Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",z.profile.phone_number||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Timezone:"})," ",z.profile.timezone||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"SMS Opt-in:"})," ",z.profile.sms_opt_in?"Yes":"No"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Email Reminders:"})," ",z.profile.email_reminders?"Yes":"No"]})]})]}),z.pets.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Pets (",z.pets.length,")"]}),l.jsx("div",{className:"space-y-2",children:z.pets.map(O=>l.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[l.jsxs("div",{className:"font-medium",children:[O.name," - ",O.species]}),l.jsxs("div",{className:"text-gray-600",children:[O.insurance_company,"  Policy: ",O.policy_number||"Not set"]})]},O.id))})]}),z.claims.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Recent Claims (",z.claims.length,") - Total: $",z.totalClaimAmount.toFixed(2)]}),l.jsxs("div",{className:"space-y-2",children:[z.claims.slice(0,5).map(O=>l.jsx("div",{className:"bg-white border rounded p-3 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:O.clinic_name||"Unknown Clinic"}),l.jsxs("div",{className:"text-gray-600",children:[O.service_date&&n(O.service_date)?.toLocaleDateString()||"No date","  $",O.total_amount?.toFixed(2)||"0.00"]})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${q(O.filing_status||"draft")}`,children:O.filing_status||"draft"})]})},O.id)),z.claims.length>5&&l.jsxs("div",{className:"text-sm text-gray-600",children:["+ ",z.claims.length-5," more claims"]})]})]})]})})})]},z.profile.id))})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Claims"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("select",{value:_,onChange:z=>S(z.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"paid",children:"Paid"})]}),l.jsxs("select",{value:y,onChange:z=>E(z.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Insurance"}),Object.keys(de.insuranceBreakdown).map(z=>l.jsx("option",{value:z,children:z},z))]})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Date"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insurance"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PDF"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(z=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm text-gray-900",children:z.userName}),l.jsx("div",{className:"text-sm text-gray-500",children:z.userEmail})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.service_date&&n(z.service_date)?.toLocaleDateString()||"-"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",z.total_amount?.toFixed(2)||"0.00"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${q(z.filing_status||"draft")}`,children:z.filing_status||"draft"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.insuranceCompany}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:z.pdf_path?l.jsx("span",{className:"text-green-600",children:""}):l.jsx("span",{className:"text-gray-400",children:"-"})})]},z.id))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Showing ",G.length," of ",s.length," claims"]}),l.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",G.reduce((z,O)=>z+(O.total_amount||0),0).toFixed(2)]})]})})]})]})}function tw({onBack:n}){const[e,t]=ge.useState(""),[s,a]=ge.useState(!1),[o,u]=ge.useState(!1),[d,f]=ge.useState(null),m=async x=>{x.preventDefault(),a(!0),f(null);try{const{error:_}=await rt.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(_)throw _;u(!0)}catch(_){f(_?.message||"Failed to send reset email")}finally{a(!1)}};return o?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:[l.jsx("div",{className:"font-medium mb-1",children:"Check your email"}),l.jsxs("div",{className:"text-sm",children:["We've sent a password reset link to ",l.jsx("span",{className:"font-mono",children:e})]})]}),l.jsx("button",{type:"button",onClick:n,className:"text-sm text-emerald-600 hover:text-emerald-700",children:" Back to login"})]}):l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Reset Password"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),d&&l.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm",children:d}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:x=>t(x.target.value),required:!0,placeholder:"you@example.com",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",children:s?"Sending...":"Send Reset Link"}),l.jsx("button",{type:"button",onClick:n,className:"text-sm text-emerald-600 hover:text-emerald-700",children:" Back to login"})]})}function rw(){const[n,e]=ge.useState(""),[t,s]=ge.useState(""),[a,o]=ge.useState(!1),[u,d]=ge.useState(!1),[f,m]=ge.useState(null),[x,_]=ge.useState(!1),S=async y=>{if(y.preventDefault(),o(!0),m(null),n!==t){m("Passwords do not match"),o(!1);return}if(n.length<6){m("Password must be at least 6 characters"),o(!1);return}try{const{error:E}=await rt.auth.updateUser({password:n});if(E)throw E;d(!0),setTimeout(()=>{window.location.href="/"},2e3)}catch(E){m(E?.message||"Failed to reset password")}finally{o(!1)}};return u?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:[l.jsx("div",{className:"font-medium mb-1",children:" Password Updated"}),l.jsx("div",{className:"text-sm",children:"Your password has been successfully reset. Redirecting to login..."})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Set New Password"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your new password below."})]}),f&&l.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm",children:f}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:"password",type:x?"text":"password",value:n,onChange:y=>e(y.target.value),required:!0,placeholder:"Enter new password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm pr-10"}),l.jsx("button",{type:"button",onClick:()=>_(!x),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 text-xs",children:x?"Hide":"Show"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",type:x?"text":"password",value:t,onChange:y=>s(y.target.value),required:!0,placeholder:"Confirm new password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",children:a?"Updating...":"Reset Password"})]})})})}async function eg(n){console.log("[createClaim] inserting",n);const{data:e,error:t}=await rt.from("claims").insert(n).select("*").single();if(t)throw t;return e}async function $i(n){try{console.log("[listClaims] START - userId=",n);const{data:e,error:t}=await rt.from("claims").select("*, pets(id, name, species, insurance_company, filing_deadline_days)").eq("user_id",n).order("service_date",{ascending:!1});if(console.log("[listClaims] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[listClaims] ERROR:",t),t;return console.log("[listClaims] SUCCESS - count=",e?.length||0),e}catch(e){throw console.error("[listClaims] EXCEPTION:",e),e}}async function Ko(n,e){const{error:t}=await rt.from("claims").update(e).eq("id",n);if(t)throw t}async function nw(n){const{error:e}=await rt.from("claims").delete().eq("id",n);if(e)throw e}function sw(n){const e=n.replace(/\D/g,"");return e.length!==10?n:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}function m1(n){const e=n.replace(/\D/g,"");return e.length!==10?"":`+1${e}`}function g1(n,e=""){const s=n.replace(/\D/g,"").slice(0,10);return s.length===0?"":s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`}const df=["pumpkin","spot","healthy paws","nationwide","trupanion","pets best","figo","aspca"],hf=["demo@petclaimhelper.com","drsarah@petclaimhelper.com","david@mybenefitexperience.com","larry@uglydogadventures.com","larrysecrets@gmail.com"];function iw(){const n=window.location.pathname,e=n.match(/^\/dose\/([a-zA-Z0-9-]+)$/i);if(console.log("[App Router] Path:",n,"DoseMatch:",e),n==="/dose-success")return console.log("[App Router] Rendering static success page"),l.jsx(C5,{});if(n==="/reset-password")return console.log("[App Router] Rendering reset password page"),l.jsx(rw,{});if(e){const t=e[1];return console.log("[App Router] Rendering standalone dose page for code:",t),l.jsx(P5,{medicationId:t,userId:null,onClose:()=>{console.log("[App Router] Dose marking closed")}})}return console.log("[App Router] Rendering full app"),l.jsx(aw,{})}function aw(){const n=ge.useRef(null),[e,t]=ge.useState(null),[s,a]=ge.useState(!1),[o,u]=ge.useState(!1),[d,f]=ge.useState(!1),[m,x]=ge.useState(null),[_,S]=ge.useState(null),[y,E]=ge.useState([]),[L,T]=ge.useState(null),A=ge.useMemo(()=>y.find(C=>C.id===L)??null,[y,L]),[Y,B]=ge.useState(""),[H,ue]=ge.useState(""),[de,Z]=ge.useState("insured"),[K,G]=ge.useState(!1),[ne,D]=ge.useState({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:"",healthy_paws_pet_id:"",spot_account_number:"",figo_policy_number:""}),[q,z]=ge.useState(null),[O,Q]=ge.useState(null),[ae,se]=ge.useState(""),[M,ce]=ge.useState(""),[be,X]=ge.useState(""),[P,W]=ge.useState(""),[re,oe]=ge.useState(""),[he,we]=ge.useState(""),[Ne,Ae]=ge.useState(null),[me,Ue]=ge.useState(null),[ze,Ve]=ge.useState("login"),[Xe,ee]=ge.useState(null),[Ke,Lt]=ge.useState([]),[xt,$e]=ge.useState(!1),[ct,et]=ge.useState(null),vt=ge.useRef(null),mt=ge.useRef(null),[qt,yt]=ge.useState([]),[It,Yt]=ge.useState(0),[Kt,ot]=ge.useState(!1),[ft,it]=ge.useState("all"),[Ar,Gt]=ge.useState("app"),[zt,Ut]=ge.useState(!1),[yr,bt]=ge.useState(()=>{const C=new Date;return new Date(C.getFullYear(),C.getMonth(),1)}),[ur,kt]=ge.useState({amount:0,petCount:0,daysInMonth:30}),[Ot,lr]=ge.useState(!1),[Bt,St]=ge.useState(!1),[Tt,Ps]=ge.useState(null),[an,Cs]=ge.useState(null),[es,_t]=ge.useState(""),[Mn,hs]=ge.useState(""),[mn,ts]=ge.useState(""),[dr,Tr]=ge.useState(""),[br,rs]=ge.useState([]),[Es,Un]=ge.useState("insured"),[Hs,Jr]=ge.useState(!1),[zr,gn]=ge.useState(null),[oi,ns]=ge.useState(""),[Vs,li]=ge.useState(ci()),[Hi,Ci]=ge.useState(!1),[Bl,fr]=ge.useState(null),[Bn,Ei]=ge.useState(null),[ss,Ls]=ge.useState(!1),[Ga,_a]=ge.useState([]),[fs,qn]=ge.useState([]);function ci(){const C=new Date,ve=C.getFullYear(),v=String(C.getMonth()+1).padStart(2,"0"),k=String(C.getDate()).padStart(2,"0");return`${ve}-${v}-${k}`}const[Rr,Vi]=ge.useState(null),Na=C=>{Vi({message:C}),setTimeout(()=>Vi(null),2500)},[Mr,Gi]=ge.useState(null),[zn,Ts]=ge.useState(!1),[Yi,Ds]=ge.useState(0),[Xr,$n]=ge.useState(!1),[ka,Sa]=ge.useState(null),[ui,ps]=ge.useState(null),[Ki,er]=ge.useState(null),[di,hi]=ge.useState(null),[ja,fi]=ge.useState(null);ge.useEffect(()=>{_&&requestAnimationFrame(()=>{document.body.offsetHeight})},[_]),ge.useEffect(()=>{if(console.log("[VISIT TITLE DEBUG] useEffect triggered",{extracted:_,diagnosis:_?.diagnosis,currentVisitTitle:H}),_){const C=_.diagnosis?.trim()||"Vet visit";console.log("[VISIT TITLE DEBUG] Setting visitTitle to:",C),ue(C)}},[_]);const[wo,Li]=ge.useState(!1),pi=C=>C.trim().toLowerCase(),Wn=(C,ve)=>{const v=pi(C),k=pi(ve),F=v.length,te=k.length;if(F===0)return te;if(te===0)return F;const fe=Array.from({length:F+1},()=>Array(te+1).fill(0));for(let _e=0;_e<=F;_e++)fe[_e][0]=_e;for(let _e=0;_e<=te;_e++)fe[0][_e]=_e;for(let _e=1;_e<=F;_e++)for(let je=1;je<=te;je++){const Me=v[_e-1]===k[je-1]?0:1;fe[_e][je]=Math.min(fe[_e-1][je]+1,fe[_e][je-1]+1,fe[_e-1][je-1]+Me)}return fe[F][te]},Gs=(C,ve)=>{const v=pi(C),k=pi(ve);if(!v||!k)return 0;if(v===k)return 1;if(v.includes(k)||k.includes(v))return .92;const F=Wn(v,k),te=Math.max(v.length,k.length);return 1-F/(te||1)},Hn=(C,ve)=>{const v=Array(C.length).fill(null),k=new Set;return C.forEach((F,te)=>{const _e=ve.map(je=>({id:je.id,score:Gs(F.petName||"",je.name||"")})).sort((je,Me)=>Me.score-je.score).find(je=>je.score>=.8&&!k.has(je.id));_e&&(v[te]=_e.id,k.add(_e.id))}),v};ge.useEffect(()=>{try{console.log("[auth] calling getSession()")}catch{}rt.auth.getSession().then(async({data:ve})=>{try{console.log("[auth] getSession() result:",{hasSession:!!ve?.session,userId:ve?.session?.user?.id||null})}catch{}const v=ve.session;if(v?.user){Ae(v.user.email??null),Ue(v.user.id),Ve("app"),Ip(v.user.id,v.user.email??null).catch(()=>{});try{const k=Intl.DateTimeFormat().resolvedOptions().timeZone;Dp(k).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",v.user.id)}catch{}Promise.all([lu(v.user.id),rt.from("profiles").select("onboarding_complete").eq("id",v.user.id).single()]).then(([k,F])=>{E(k);const te=F.data?.onboarding_complete??!1;fr(te),(k||[]).length===0&&!te&&Ci(!0)}).catch(k=>{console.error("[auth] dbLoadPets failed:",k),E([])}),$i(v.user.id).then(yt).catch(k=>{console.error("[auth] listClaims failed:",k),yt([])})}else{try{console.log("[auth] getSession() no session found - showing login")}catch{}Ve("login")}}).catch(ve=>{try{console.error("[auth] getSession() error:",ve)}catch{}Ve("login")});const{data:C}=rt.auth.onAuthStateChange(async(ve,v)=>{try{console.log("[auth] onAuthStateChange:",{event:ve,hasSession:!!v,userId:v?.user?.id||null})}catch{}if(v?.user){Ae(v.user.email??null),Ue(v.user.id),Ve("app"),Ip(v.user.id,v.user.email??null).catch(()=>{});try{const k=localStorage.getItem("pending_sms_consent");if(k){console.log("[auth] Found pending SMS consent, saving to database...");const F=JSON.parse(k);let te=null;try{te=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,console.log("[auth] IP address fetched:",te)}catch(Me){console.log("[auth] Could not fetch IP address:",Me)}const fe={user_id:v.user.id,phone_number:F.phone_number,consented:F.consented,consent_text:F.consent_text,ip_address:te};console.log("[auth] Inserting SMS consent data:",fe);const{data:_e,error:je}=await rt.from("sms_consent").insert(fe).select();je?(console.error("[auth] Failed to save SMS consent:",je),console.error("[auth] Consent error details:",JSON.stringify(je,null,2))):(console.log("[auth] SMS consent saved successfully!",_e),localStorage.removeItem("pending_sms_consent"),console.log("[auth] Cleared pending SMS consent from localStorage"))}}catch(k){console.error("[auth] Error processing pending SMS consent:",k)}try{const k=Intl.DateTimeFormat().resolvedOptions().timeZone;Dp(k).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",v.user.id)}catch{}Promise.all([lu(v.user.id),rt.from("profiles").select("onboarding_complete").eq("id",v.user.id).single()]).then(([k,F])=>{E(k);const te=F.data?.onboarding_complete??!1;fr(te),(k||[]).length===0&&!te&&Ci(!0)}).catch(k=>{console.error("[auth] dbLoadPets failed:",k),E([])}),$i(v.user.id).then(yt).catch(k=>{console.error("[auth] listClaims failed:",k),yt([])})}else{Ae(null),Ue(null),E([]);try{console.log("[auth] onAuthStateChange - signed out, clearing state")}catch{}Ve("login")}});return()=>{C.subscription.unsubscribe()}},[]),ge.useEffect(()=>{if(!me){Ut(!1);return}rt.from("profiles").select("is_admin").eq("id",me).single().then(({data:C,error:ve})=>{if(ve){console.error("[admin] Failed to load admin status:",ve),Ut(!1);return}Ut(C?.is_admin===!0)}).catch(()=>Ut(!1))},[me]),ge.useEffect(()=>{y&&y.length===1&&T(C=>C||y[0].id)},[y]),ge.useEffect(()=>{if(localStorage.getItem("justCompletedOnboarding")==="true"&&y&&y.length>0)if(y.some(v=>!v.photo_url)){Li(!0);const v=setTimeout(()=>{Li(!1),localStorage.removeItem("justCompletedOnboarding")},5e3),k=()=>{Li(!1),localStorage.removeItem("justCompletedOnboarding"),document.removeEventListener("click",k)};return document.addEventListener("click",k),()=>{clearTimeout(v),document.removeEventListener("click",k)}}else localStorage.removeItem("justCompletedOnboarding")},[y]),ge.useEffect(()=>{try{localStorage.removeItem("pch.finPeriod")}catch{}},[]),ge.useEffect(()=>{Yt(C=>(console.log("[App]  Incrementing dataRefreshToken:",C,"",C+1,"| pets count:",y.length),C+1))},[qt,y,ft]),ge.useEffect(()=>{Tt&&(Cs(Tt.pet_id||null),_t(Tt.service_date||""),ts(Tt.visit_title||""),hs(Tt.diagnosis||""),Tr(Tt.visit_notes||""),rs(Array.isArray(Tt.line_items)?Tt.line_items:[]),Un(Tt.expense_category||"insured"))},[Tt]);const ms=()=>{const C=ne.name.trim();if(!C)return;if(!ae||ae==="Not Insured"||ae===" Select ")ne.insuranceCompany="",ne.filing_deadline_days="",ne.policyNumber="";else if(ae==="Custom Insurance"){const F=be.trim(),te=Number(P);if(!F){alert("Enter custom insurance company name");return}if(!Number.isFinite(te)||te<1||te>365){alert("Deadline must be 1-365 days");return}ne.insuranceCompany=F,ne.filing_deadline_days=te}else ne.insuranceCompany=Ac(ae),ne.filing_deadline_days=vn(Ac(ae))||90;console.log(" [addPet] STEP 1 - Form values from newPet:"),console.log("  - newPet.spot_account_number:",ne.spot_account_number),console.log("  - After trim:",(ne.spot_account_number||"").trim()),console.log("  - Final value:",(ne.spot_account_number||"").trim()||null);const ve=globalThis.crypto?.randomUUID?.()??String(Date.now()),v={id:ve,name:C,species:ne.species,insuranceCompany:ne.insuranceCompany||"",policyNumber:(ne.policyNumber||"").trim(),ownerName:"",ownerPhone:"",filing_deadline_days:ne.filing_deadline_days,monthly_premium:ne.monthly_premium===""?null:Number(ne.monthly_premium),deductible_per_claim:ne.deductible_per_claim===""?null:Number(ne.deductible_per_claim),insurance_pays_percentage:ne.insurance_pays_percentage===""?null:Number(ne.insurance_pays_percentage)/100,annual_coverage_limit:null,coverage_start_date:ne.coverage_start_date||null,healthy_paws_pet_id:(ne.healthy_paws_pet_id||"").trim()||null,spot_account_number:(ne.spot_account_number||"").trim()||null,figo_policy_number:(ne.figo_policy_number||"").trim()||null};console.log(" [addPet] STEP 2 - Created PetProfile object:"),console.log("  - created.spot_account_number:",v.spot_account_number),console.log("  - Full created object:",v);const k=[...y,v];if(E(k),me?(console.log(" [addPet] STEP 3 - Calling dbUpsertPet with userId:",me),Uh(me,v).then(()=>{console.log(" [addPet] STEP 4 - dbUpsertPet SUCCESS")}).catch(F=>{console.error(" [addPet] STEP 4 - dbUpsertPet ERROR:",F)})):console.log(" [addPet] STEP 3 - SKIPPED dbUpsertPet (no userId)"),ct!==null){const F=[...Ke];F[ct]=ve,Lt(F),et(null)}else T(ve);G(!1),D({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:"",healthy_paws_pet_id:"",spot_account_number:"",figo_policy_number:""}),se(""),X(""),W("")},Ji=C=>{z(C.id),Q({name:C.name,species:C.species,insuranceCompany:C.insuranceCompany,filing_deadline_days:C.filing_deadline_days||"",monthly_premium:C.monthly_premium??"",deductible_per_claim:C.deductible_per_claim??"",coverage_start_date:C.coverage_start_date||"",insurance_pays_percentage:C.insurance_pays_percentage!=null?Math.round(Number(C.insurance_pays_percentage)*100):"",policyNumber:C.policyNumber||"",healthy_paws_pet_id:C.healthy_paws_pet_id||"",spot_account_number:C.spot_account_number||"",pumpkin_account_number:C.pumpkin_account_number||"",figo_policy_number:C.figo_policy_number||""}),!C.insuranceCompany||C.insuranceCompany===""?ce("Not Insured"):ce(N5(C.insuranceCompany))},jt=async()=>{if(console.log("[saveEdit]  Save started",{editingPetId:q,editPet:O}),!q||!O)return;let C="",ve="";if(!M||M==="Not Insured"||M===" Select ")C="",ve="";else if(M==="Custom Insurance"){const F=re.trim(),te=Number(he);if(!F){alert("Enter custom insurance company name");return}if(!Number.isFinite(te)||te<1||te>365){alert("Deadline must be 1-365 days");return}C=F,ve=te}else C=Ac(M),ve=vn(C)||90;const v=y.map(F=>F.id===q?{...F,name:O.name.trim(),species:O.species,insuranceCompany:C,policyNumber:(O.policyNumber||"").trim(),ownerName:F.ownerName||"",ownerPhone:F.ownerPhone||"",filing_deadline_days:ve,monthly_premium:O.monthly_premium===""?null:Number(O.monthly_premium),deductible_per_claim:O.deductible_per_claim===""?null:Number(O.deductible_per_claim),coverage_start_date:O.coverage_start_date||null,insurance_pays_percentage:O.insurance_pays_percentage===""?null:Number(O.insurance_pays_percentage)/100,annual_coverage_limit:F.annual_coverage_limit??null,healthy_paws_pet_id:O.healthy_paws_pet_id||null,spot_account_number:O.spot_account_number||null,pumpkin_account_number:O.pumpkin_account_number||null,figo_policy_number:O.figo_policy_number||null}:F),k=v.find(F=>F.id===q);if(console.log("[saveEdit]  Pet data to save:",k),me){const F=v.find(te=>te.id===q);if(F)try{console.log("[saveEdit]  Starting dbUpsertPet..."),await Uh(me,F),console.log("[saveEdit]  dbUpsertPet complete"),console.log("[saveEdit]  Starting dbLoadPets...");const te=await lu(me);console.log("[saveEdit]  dbLoadPets complete, got",te.length,"pets"),console.log("[saveEdit]  Refreshed pet data:",te.find(fe=>fe.id===q)),E(te),console.log("[saveEdit]  State updated with fresh DB data"),Yt(fe=>(console.log("[saveEdit]  Forcing dataRefreshToken increment:",fe,"",fe+1),fe+1)),console.log("[saveEdit]  Financial Summary refresh triggered")}catch(te){console.error("[saveEdit]  Error:",te),E(v)}}else E(v);z(null),Q(null),console.log("[saveEdit]  Save complete")},Ys=()=>n.current?.click(),rl=async()=>{try{console.log("[auth] signOut() called")}catch{}const{error:C}=await rt.auth.signOut();try{console.log("[auth] signOut() result:",C||null)}catch{}try{const{data:ve}=await rt.auth.getSession();console.log("[auth] post-signOut getSession():",{hasSession:!!ve?.session})}catch{}},Ya=C=>{if(console.log("[MOBILE DEBUG] ========== processFile CALLED =========="),console.log("[MOBILE DEBUG] file:",C),console.log("[MOBILE DEBUG] file type:",C?.type),console.log("[MOBILE DEBUG] file size:",C?.size),!C){console.log("[MOBILE DEBUG] No file provided, setting selectedFile to null"),t(null);return}if(!(C.type.startsWith("image/")||C.type==="application/pdf")){console.log("[MOBILE DEBUG] File type not allowed:",C.type),t(null);return}const v=C.type.startsWith("image/"),k=v?URL.createObjectURL(C):void 0;console.log("[MOBILE DEBUG] Setting selectedFile:",{fileName:C.name,fileType:C.type,isImage:v,objectUrl:k}),t({file:C,objectUrl:k}),S(null),x(null)},is=ge.useCallback(C=>{console.log("[MOBILE DEBUG] ========== handleChange CALLED =========="),console.log("[MOBILE DEBUG] e.target.files:",C.target.files),console.log("[MOBILE DEBUG] e.target.files?.[0]:",C.target.files?.[0]),Ya(C.target.files?.[0]),C.target.value=""},[]),mi=C=>{C.preventDefault(),C.stopPropagation(),a(!0)},_o=C=>{C.preventDefault(),C.stopPropagation(),a(!0)},Aa=C=>{C.preventDefault(),C.stopPropagation(),a(!1)},Xi=C=>{C.preventDefault(),C.stopPropagation(),a(!1);const ve=C.dataTransfer;if(!ve)return;const v=ve.files?.[0]??null;Ya(v)},Ka=ge.useMemo(()=>{if(!e)return"";const{size:C}=e.file,ve=1024,v=ve*1024;return C<ve?`${C} B`:C<v?`${(C/ve).toFixed(1)} KB`:`${(C/v).toFixed(2)} MB`},[e]),Is=C=>{const ve=typeof C?.clinicName=="string"?C.clinicName:typeof C?.clinic_name=="string"?C.clinic_name:"",v=typeof C?.clinicAddress=="string"?C.clinicAddress:typeof C?.clinic_address=="string"?C.clinic_address:"",k=typeof C?.clinicPhone=="string"?C.clinicPhone:typeof C?.clinic_phone=="string"?C.clinic_phone:void 0,F=typeof C?.petName=="string"?C.petName:typeof C?.pet_name=="string"?C.pet_name:"",te=typeof C?.dateOfService=="string"?C.dateOfService:typeof C?.service_date=="string"?C.service_date:"",fe=typeof C?.totalAmount=="string"?C.totalAmount:C?.total_amount!=null?String(C.total_amount):"",_e=typeof C?.invoiceNumber=="string"?C.invoiceNumber:typeof C?.invoice_number=="string"?C.invoice_number:void 0,Me=(Array.isArray(C?.lineItems)?C.lineItems:Array.isArray(C?.line_items)?C.line_items:[]).map(Re=>({description:typeof Re?.description=="string"?Re.description:"",amount:typeof Re?.amount=="string"?Re.amount:Re?.amount!=null?String(Re.amount):""}));return{clinicName:ve,clinicAddress:v,clinicPhone:k,petName:F,dateOfService:te,totalAmount:fe,diagnosis:typeof C?.diagnosis=="string"?C.diagnosis:"",lineItems:Me,invoiceNumber:_e}},Qi=C=>{if(!C||!Array.isArray(C.pets))return null;const ve=C.pets.map(v=>({petName:typeof v?.petName=="string"?v.petName:"",petSpecies:typeof v?.petSpecies=="string"?v.petSpecies:void 0,lineItems:Array.isArray(v?.lineItems)?v.lineItems.map(k=>({description:typeof k?.description=="string"?k.description:"",amount:typeof k?.amount=="string"?k.amount:String(k?.amount??"")})):[],subtotal:typeof v?.subtotal=="string"?v.subtotal:void 0}));return{clinicName:typeof C?.clinicName=="string"?C.clinicName:"",clinicAddress:typeof C?.clinicAddress=="string"?C.clinicAddress:"",clinicPhone:typeof C?.clinicPhone=="string"?C.clinicPhone:typeof C?.clinic_phone=="string"?C.clinic_phone:void 0,dateOfService:typeof C?.dateOfService=="string"?C.dateOfService:"",diagnosis:typeof C?.diagnosis=="string"?C.diagnosis:"",pets:ve,invoiceNumber:typeof C?.invoiceNumber=="string"?C.invoiceNumber:void 0}},kn=C=>{const ve=(C||"").replace(/[^0-9.\-]/g,""),v=parseFloat(ve);return Number.isFinite(v)?v:0},Zi=C=>`$${C.reduce((v,k)=>v+kn(k.amount),0).toFixed(2)}`,Pa=async(C,ve,v)=>{try{console.log("[uploadClaimPdf] Starting upload...",{uid:C,claimId:ve,blobSize:v.size,blobType:v.type,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)});let k=v;v instanceof File||(console.log("[uploadClaimPdf] Converting Blob to File for better mobile compatibility"),k=new File([v],`${ve}.pdf`,{type:"application/pdf"}));const F=`${C}/${ve}.pdf`;console.log("[uploadClaimPdf] Uploading to path:",F);const{error:te}=await rt.storage.from("claim-pdfs").upload(F,k,{upsert:!0,contentType:"application/pdf"});if(te)throw console.error("[uploadClaimPdf]  Supabase storage error:",te),new Error(`Storage upload failed: ${te.message}`);console.log("[uploadClaimPdf]  Storage upload successful, updating claim record...");const fe=await Ko(ve,{pdf_path:F});console.log("[uploadClaimPdf]  Claim record updated with pdf_path:",F,"Result:",fe);const{data:_e,error:je}=await rt.from("claims").select("pdf_path").eq("id",ve).single();if(je)console.error("[uploadClaimPdf]   Could not verify pdf_path update:",je);else{if(_e?.pdf_path!==F)throw console.error("[uploadClaimPdf]  pdf_path verification FAILED - expected:",F,"got:",_e?.pdf_path),new Error("Failed to update claim record with pdf_path");console.log("[uploadClaimPdf]  Verified pdf_path was saved correctly:",_e.pdf_path)}return F}catch(k){throw console.error("[uploadClaimPdf]  CRITICAL ERROR - Invoice will NOT be attached:",k),k}},Ja=async(C,ve)=>{if(!me){fi("Please log in to upload photos");return}const v=5*1024*1024;if(ve.size>v){fi("Photo must be smaller than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(ve.type)){fi("Please upload a PNG or JPEG image");return}hi(C),fi(null);try{const F=ve.name.split(".").pop()||"jpg",te=Date.now(),fe=`${me}/${C}-${te}.${F}`,{error:_e}=await rt.storage.from("pet-photos").upload(fe,ve,{upsert:!0,contentType:ve.type});if(_e)throw _e;const{data:je}=rt.storage.from("pet-photos").getPublicUrl(fe);if(!je?.publicUrl)throw new Error("Failed to get public URL");const Me=y.find(Qe=>Qe.id===C);if(!Me)throw new Error("Pet not found");const Re={...Me,photo_url:je.publicUrl};await Uh(me,Re);const Ge=await lu(me);E(Ge),Na("Photo uploaded successfully!")}catch(F){console.error("[uploadPetPhoto] error",F),fi(F?.message||"Failed to upload photo. Please try again.")}finally{hi(null)}},Ca=async(C,ve)=>{const v=ve.target.files?.[0];v&&(await Ja(C,v),ve.target.value="")},[Os,Ea]=ge.useState(!1),ea=async()=>{if(console.log("[MOBILE DEBUG] ========== handleProcess CALLED =========="),console.log("[MOBILE DEBUG] selectedFile:",e),console.log("[MOBILE DEBUG] typeof selectedFile:",typeof e),console.log("[MOBILE DEBUG] selectedFile?.file:",e?.file),!e){console.log("[MOBILE DEBUG]  EARLY RETURN - No selectedFile!");return}u(!0),x(null);try{console.log("[extract] starting server-side extraction, file type:",e.file.type),console.log("[extract] file size:",e.file.size),console.log("[extract] file name:",e.file.name);const C="https://pet-claim-helper.onrender.com",ve=new FormData;ve.append("file",e.file);const v=new AbortController,F=setTimeout(()=>{try{v.abort()}catch{}},9e4),te=await fetch(`${C}/api/extract-pdf`,{method:"POST",body:ve,signal:v.signal});if(clearTimeout(F),!te.ok){const Re=await te.text().catch(()=>"");throw new Error(Re||`Server error (${te.status})`)}const fe=await te.json();if(console.log("[MOBILE DEBUG] Full JSON response:",JSON.stringify(fe,null,2)),!fe||fe.ok!==!0||!fe.data)throw console.error("[extract] bad response shape",fe),new Error("Invalid extraction response");const _e=fe.data;if(console.log("[MOBILE DEBUG] Parsed data from server:",JSON.stringify(_e,null,2)),!_e)throw console.error("[extract] empty parsed data from server response"),new Error("Could not parse JSON from server response.");const je=Qi(_e);if(je&&je.pets.length>1){console.log("[MOBILE DEBUG] Multi-pet extraction detected:",je),ee(je),S(null);const Re=Hn(je.pets,y);Lt(Re);return}const Me=Is(_e);console.log("[MOBILE DEBUG] Normalized extraction result:",JSON.stringify(Me,null,2)),console.log("[VISIT TITLE DEBUG] Extracted diagnosis value:",Me.diagnosis),A&&(Me.petName=A.name),console.log("[MOBILE DEBUG] Final extraction being set to state:",JSON.stringify(Me,null,2)),console.log("[VISIT TITLE DEBUG] About to call setExtracted with diagnosis:",Me.diagnosis),S(Me),ee(null)}catch(C){const ve=String(C?.message||""),k=String(C?.name||"")==="AbortError"||/aborted|timeout/i.test(ve),F=/NetworkError|Failed to fetch|TypeError: Failed to fetch/i.test(ve),te=C?.error&&(C.error.message||C.error?.error?.message)||ve;x(k?"Extraction timed out. Mobile networks can be slow  please try again. We now wait up to 90 seconds.":F?"Network error during extraction. Please check your connection and try again.":te||"AI extraction failed. Please try again."),console.error("[extract] error:",{name:C?.name,message:C?.message,cause:C?.cause});const fe={clinicName:"",clinicAddress:"",clinicPhone:"",petName:A?A.name:"",dateOfService:"",totalAmount:"",diagnosis:"",lineItems:[]};S(fe),ee(null)}finally{u(!1)}},vn=C=>{const ve=C.pets?.filing_deadline_days;return typeof ve=="number"&&ve>0?ve:90},as=C=>{if(!C.service_date)return null;const ve=String(C.service_date).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!ve)return null;const v=Number(ve[1]),k=Number(ve[2])-1,F=Number(ve[3]),te=new Date(v,k,F);return Number.isNaN(te.getTime())?null:te},Ks=C=>{const ve=as(C);if(!ve)return null;const v=new Date(ve.getTime());v.setDate(v.getDate()+vn(C));const k=new Date,F=v.getTime()-k.getTime();return Math.ceil(F/(1e3*60*60*24))},Xa=C=>{switch((C||"not_submitted").toLowerCase()){case"filed":case"submitted":return{text:"Claim - Filed",cls:"bg-emerald-50 text-emerald-700"};case"approved":return{text:"Approved",cls:"bg-emerald-50 text-emerald-700"};case"paid":return{text:"Paid",cls:"bg-emerald-50 text-emerald-700"};case"denied":return{text:"Denied",cls:"bg-rose-50 text-rose-700"};case"not_filed":default:return{text:"Bill - Pending Submission",cls:"bg-blue-50 text-blue-700"}}},ta=C=>{const ve=Ks(C),v=(C.filing_status||"not_submitted").toLowerCase(),k=v==="filed"?"submitted":v;return k==="denied"?{text:" Claim Denied",cls:"bg-red-100 text-red-800 border border-red-300 font-semibold"}:k==="approved"?{text:" Approved",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:k==="paid"?{text:" Paid",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:k==="submitted"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:ve===null?{text:"No date",cls:"bg-slate-100 text-slate-600"}:ve<0?{text:" DEADLINE PASSED - Submit now!",cls:"bg-red-100 text-red-800 border border-red-300 font-bold"}:ve<5?{text:` URGENT - ${ve} days`,cls:"bg-red-100 text-red-800 border border-red-300 font-bold animate-pulse"}:ve<=14?{text:` Due soon - ${ve} days`,cls:"bg-orange-100 text-orange-800 border border-orange-300 font-semibold"}:ve<=29?{text:` Due soon - ${ve} days`,cls:"bg-yellow-100 text-yellow-800 border border-yellow-300 font-semibold"}:{text:` Plenty of time - ${ve} days`,cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}},on=C=>`$${(typeof C=="number"&&Number.isFinite(C)?C:0).toFixed(2)}`,Fs=ge.useMemo(()=>{const C=[...qt];return C.sort((ve,v)=>{const k=as(ve)?.getTime()||0;return(as(v)?.getTime()||0)-k}),C},[qt]),Ur=ge.useMemo(()=>{const C=qt.length,ve=qt.filter(fe=>String(fe.expense_category||"insured").toLowerCase()==="insured"),v=ve.filter(fe=>["not_filed","not_submitted"].includes(String(fe.filing_status||"not_submitted").toLowerCase())),k=v.reduce((fe,_e)=>fe+(Number(_e.total_amount)||0),0),F=ve.filter(fe=>["filed","submitted"].includes(String(fe.filing_status||"").toLowerCase())).length,te=v.filter(fe=>{const _e=Ks(fe);return _e!==null&&_e>=1&&_e<=14}).length;return{total:C,notFiledCount:v.length,notFiledSum:k,filedPending:F,expiringSoon:te}},[qt]);return ge.useMemo(()=>{const C=Jt=>{if(!Jt)return null;const At=String(Jt).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!At)return null;const pr=Number(At[1]),$r=Number(At[2])-1,Tn=Number(At[3]),Sn=new Date(pr,$r,Tn);return Number.isNaN(Sn.getTime())?null:Sn},ve=Jt=>{const At=C(Jt);if(!At)return 0;const pr=new Date;if(ft==="2026"){if(At.getFullYear()>2026)return 0;const ln=At.getFullYear()<2026?0:At.getMonth(),Rs=pr.getFullYear()===2026?pr.getMonth():11;return Math.max(0,Rs-ln+1)}if(ft==="2025"){if(At.getFullYear()>2025)return 0;const ln=At.getFullYear()<2025?0:At.getMonth(),Rs=pr.getFullYear()===2025?pr.getMonth():11;return Math.max(0,Rs-ln+1)}if(ft==="2024"){if(At.getFullYear()>2024)return 0;const ln=At.getFullYear()<2024?0:At.getMonth();return Math.max(0,11-ln+1)}const $r=pr,Tn=($r.getFullYear()-At.getFullYear())*12+($r.getMonth()-At.getMonth())+1;return Math.max(0,Tn)},v=qt.filter(Jt=>{const At=Jt.service_date?C(Jt.service_date):null;if(!At||Number.isNaN(At.getTime()))return!1;if(ft==="all")return!0;if(ft==="2026")return At.getFullYear()===2026;if(ft==="2025")return At.getFullYear()===2025;if(ft==="2024")return At.getFullYear()===2024;if(ft==="last12"){const pr=new Date,$r=new Date(pr.getTime());return $r.setDate($r.getDate()-365),At>=$r&&At<=pr}return!0}),k={insured:{sum:0,count:0},not_insured:{sum:0,count:0},maybe_insured:{sum:0,count:0}};let F=0,te=0,fe=0,_e=0;const je={};let Me=0,Re=0;const Ge=new Date;let Qe=0,Nt=0,Ft=0,rr=0,nr=0,wr=0;for(const Jt of v){const At=Number(Jt.total_amount||0),pr=String(Jt.filing_status||"not_filed").toLowerCase(),$r=Jt.expense_category||"insured",Tn=C(Jt.service_date);if(_e+=At,k[$r].sum+=At,k[$r].count+=1,pr==="paid"){const ln=Number(Jt.reimbursed_amount||0);F+=ln,$r==="insured"&&(wr+=Math.max(0,At-ln))}else(pr==="filed"||pr==="approved")&&(te+=At);if((pr==="denied"||$r==="not_insured")&&(fe+=At),$r!=="insured"&&(rr+=At),pr==="approved"&&(Me+=At),Tn&&!Number.isNaN(Tn.getTime())){if(Tn<=Ge&&(Qe+=At,pr==="paid")){const ln=Number(Jt.reimbursed_amount||0);Re+=ln,Nt+=ln}Tn<=Ge&&pr==="submitted"&&$r==="insured"&&(nr+=At)}const Sn=Jt.pets?.name||"Unknown Pet";je[Sn]||(je[Sn]={sum:0,count:0}),je[Sn].sum+=At,je[Sn].count+=1}for(const Jt of y){const At=Number(Jt.monthly_premium||0);At>0&&(Ft+=At*ve(Jt.coverage_start_date||null))}for(const Jt of v){const At=String(Jt.filing_status||"").toLowerCase(),pr=String(Jt.expense_category||"").toLowerCase();At==="paid"&&pr==="insured"&&(Number(Jt.total_amount||0),Math.max(0,Number(Jt.deductible_applied)||0),Math.max(0,Number(Jt.reimbursed_amount)||0))}const _r=Ft+rr+wr,Qr=Math.max(0,Qe-Nt);return{byCategory:k,reimbursed:F,awaiting:te,outOfPocket:fe,grandTotal:_e,perPet:je,awaitingInsured:Me,periodSpent:_r,periodReimbursed:Re,periodNet:_r,definiteTotal:_r,pendingTotal:nr,spentOnAllPets:Qe,reimbursedPaidPeriod:Nt,netCostPeriod:Qr}},[qt,ft]),l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100",children:[Rr&&l.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:l.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm shadow-lg border border-slate-700",children:Rr.message})}),l.jsx("header",{className:"px-4 pt-2 pb-3 md:py-8 bg-gradient-to-b from-white/50 to-transparent dark:from-slate-900/50",children:l.jsxs("div",{className:"mx-auto max-w-6xl",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center mb-1 md:mb-6",children:[l.jsx("img",{src:"/pch-logo.png",alt:"Pet Cost Helper",className:"w-[70vw] max-w-[320px] md:w-[90vw] md:max-w-[500px] h-auto object-contain mt-1 mb-0 md:mt-0 md:mb-0"}),(()=>{const C=y.some(v=>{const k=v.insuranceCompany?.toLowerCase()||"";return df.some(F=>k.includes(F))}),ve=Ne&&hf.includes(Ne.toLowerCase());return C||ve?null:l.jsx("div",{className:"w-full px-4 mt-4 mb-3 md:mt-6 md:mb-4 animate-fade-in",children:l.jsx("div",{className:"max-w-3xl mx-auto",children:l.jsx("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-[2px] shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02]",children:l.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl px-6 py-4 md:px-8 md:py-5",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 md:gap-4",children:[l.jsx("span",{className:"text-3xl md:text-4xl animate-pulse",children:""}),l.jsxs("div",{className:"text-center md:text-left",children:[l.jsx("div",{className:"font-bold text-lg md:text-xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Coming Soon: Auto-Submit Claims"}),l.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mt-1",children:"One-click submission. Track payments. Never miss deadlines."})]})]})})})})})})(),l.jsx("div",{className:"text-base md:text-lg font-bold text-gray-500 dark:text-gray-400 text-center max-w-xl px-4 leading-snug mt-1 mb-3 md:mt-0 md:mb-0",children:l.jsx("div",{children:"Never miss a claim. Track every dollar."})})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 flex-wrap mt-2 md:mt-0",children:[ze==="app"&&l.jsxs("button",{type:"button",onClick:()=>mt.current?.scrollIntoView({behavior:"smooth"}),className:"relative inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:["Bills (",qt.length,")",Ur.expiringSoon>0&&l.jsx("span",{className:"ml-2 inline-block h-2 w-2 rounded-full bg-rose-500","aria-hidden":!0})]}),ze==="app"&&l.jsx("button",{type:"button",onClick:()=>Gt(C=>C==="app"?"settings":"app"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Settings"}),ze==="app"&&l.jsx("button",{type:"button",onClick:async()=>{if(Ar==="medications")Gt("app");else{if(ka===null&&me){const{data:C}=await rt.from("profiles").select("phone").eq("id",me).single(),ve=C?.phone||null;Sa(!!ve),ve||$n(!0)}else ka===!1&&$n(!0);Gt("medications")}},className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Medications"}),ze==="app"&&zt&&l.jsx("button",{type:"button",onClick:()=>Gt(C=>C==="admin"?"app":"admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Admin Dashboard"}),ze==="app"&&l.jsx("a",{href:`mailto:support@petclaimhelper.com?subject=Pet Cost Helper Support Request&body=Hi Pet Cost Helper Team,%0D%0A%0D%0AI need help with:%0D%0A%0D%0A----%0D%0AUser: ${Ne||"Not logged in"}%0D%0AUser ID: ${me||"N/A"}`,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",title:"Need help? Contact support",children:" Contact Support"}),Ne&&l.jsxs("span",{className:"hidden sm:inline text-xs text-slate-600 dark:text-slate-300",children:["Logged in as: ",Ne]}),Ne&&l.jsx("button",{onClick:rl,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:"Logout"})]})]})}),l.jsxs("main",{className:"px-6",children:[ze==="app"&&Ar==="settings"&&l.jsx(cw,{userId:me,userEmail:Ne,onClose:()=>Gt("app"),onDefaultExpenseChange:C=>Z(C),onDefaultPeriodChange:C=>it(C)}),ze==="app"&&Ar==="medications"&&l.jsx("section",{className:"mx-auto mt-8 max-w-6xl px-2",children:l.jsx(A5,{userId:me,pets:y,refreshKey:Yi})}),ze==="app"&&Ar==="admin"&&l.jsx(l.Fragment,{children:zt?l.jsx(ew,{}):l.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[l.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),l.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),l.jsx("button",{onClick:()=>Gt("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),ze!=="app"&&l.jsxs("section",{className:"mx-auto max-w-md mt-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("button",{type:"button",onClick:()=>Ve("signup"),className:["flex-1 px-6 py-3 text-sm rounded-t-xl transition-all font-semibold",ze==="signup"?"bg-teal-600 text-white shadow-lg scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"].join(" "),children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Create Account"})]})}),l.jsx("button",{type:"button",onClick:()=>Ve("login"),className:["flex-1 px-6 py-3 text-sm rounded-t-xl transition-all font-semibold",ze==="login"?"bg-emerald-600 text-white shadow-lg scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"].join(" "),children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Sign In"})]})})]}),l.jsxs("div",{className:"rounded-2xl rounded-tl-none rounded-tr-none border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-xl overflow-hidden",children:[l.jsx("div",{className:["px-6 py-4 text-white font-semibold",ze==="signup"?"bg-gradient-to-r from-teal-500 to-cyan-600":"bg-gradient-to-r from-emerald-500 to-green-600"].join(" "),children:l.jsx("div",{className:"flex items-center gap-2 text-base",children:ze==="signup"?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Get Started - Create Your Account"})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Welcome Back!"})]})})}),l.jsx("div",{className:"p-6",children:l.jsx(ow,{mode:ze,onSwitch:C=>Ve(C)})})]})]}),ze==="app"&&l.jsxs("section",{className:"mx-auto max-w-4xl",ref:vt,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Your Pets"}),l.jsx("button",{type:"button",onClick:()=>G(C=>!C),className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-1.5 text-sm hover:shadow",children:"+ Add Pet"})]}),ja&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-800 dark:text-red-200 flex items-start justify-between",children:[l.jsx("span",{children:ja}),l.jsx("button",{onClick:()=>fi(null),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:""})]}),K&&l.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 p-4 max-w-2xl mx-auto",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{id:"pet-name",value:ne.name,onChange:C=>D({...ne,name:C.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-species",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{id:"pet-species",value:ne.species,onChange:C=>D({...ne,species:C.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsx("select",{id:"pet-insurance",value:ae,onChange:C=>{const ve=C.target.value;se(ve);const v=Ac(ve),k=vn(v);ve==="Not Insured"||ve===" Select "?D({...ne,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):ve==="Custom Insurance"?D({...ne,insuranceCompany:"",filing_deadline_days:""}):v&&D({...ne,insuranceCompany:v,filing_deadline_days:k||90})},className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:wu.map(C=>l.jsx("option",{value:C.display,children:C.display},C.display))})]}),ae==="Healthy Paws (90 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-healthy-paws-id",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"pet-healthy-paws-id",value:ne.healthy_paws_pet_id||"",onChange:C=>D({...ne,healthy_paws_pet_id:C.target.value}),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),ae==="Spot (270 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-spot-account-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Account Number"}),l.jsx("input",{id:"pet-spot-account-number",value:ne.spot_account_number||"",onChange:C=>D({...ne,spot_account_number:C.target.value}),placeholder:"e.g., 12345678",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),ae==="Figo (180 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-figo-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{id:"pet-figo-policy-number",value:ne.figo_policy_number||"",onChange:C=>D({...ne,figo_policy_number:C.target.value}),placeholder:"e.g., FG123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),ae&&ae!=="Not Insured"&&ae!==" Select "&&ae!=="Spot (270 days)"&&ae!=="Figo (180 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{id:"pet-policy-number",value:ne.policyNumber||"",onChange:C=>D({...ne,policyNumber:C.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),ae&&ae!=="Not Insured"&&ae!==" Select "&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-premium",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"pet-premium",type:"number",min:0,value:String(ne.monthly_premium??""),onChange:C=>D({...ne,monthly_premium:C.target.value===""?"":Number(C.target.value)}),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-deductible",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"pet-deductible",type:"number",min:0,value:String(ne.deductible_per_claim??""),onChange:C=>D({...ne,deductible_per_claim:C.target.value===""?"":Number(C.target.value)}),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-pays",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),l.jsx("input",{id:"pet-insurance-pays",type:"number",min:50,max:100,value:String(ne.insurance_pays_percentage??""),onChange:C=>D({...ne,insurance_pays_percentage:C.target.value===""?"":Number(C.target.value)}),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-coverage-start",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),l.jsx("input",{id:"pet-coverage-start",type:"date",value:ne.coverage_start_date||"",onChange:C=>D({...ne,coverage_start_date:C.target.value}),onClick:C=>C.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:ms,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",children:"Save Pet"}),l.jsx("button",{type:"button",onClick:()=>G(!1),className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.length===0&&l.jsx("div",{className:"col-span-full text-sm text-slate-500 dark:text-slate-400",children:'No pets saved yet. Click "+ Add Pet" to create one.'}),y.map(C=>l.jsxs("div",{className:["rounded-xl border p-6 text-left bg-white dark:bg-slate-900/60 shadow-sm relative",L===C.id?"border-emerald-400":"border-slate-200 dark:border-slate-800"].join(" "),style:{border:`2px solid ${C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280")}`},children:[l.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[l.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:ve=>Ca(C.id,ve),className:"sr-only",id:`photo-upload-${C.id}`,disabled:di===C.id}),l.jsx("label",{htmlFor:`photo-upload-${C.id}`,className:["inline-flex items-center justify-center w-8 h-8 rounded-full cursor-pointer transition-all",C.species==="dog"?"bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",di===C.id?"opacity-50 cursor-not-allowed":""].join(" "),title:C.photo_url?"Change Photo":"Add Photo",children:di===C.id?l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),wo&&!C.photo_url&&y.indexOf(C)===0&&l.jsxs("div",{className:"absolute -top-16 -right-2 pointer-events-none animate-bounce",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg shadow-xl whitespace-nowrap text-sm font-medium",children:["Upload the cutest picture of ",C.name,"! "]}),l.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-pink-500"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-center mb-4",children:C.photo_url?l.jsx("img",{src:C.photo_url,alt:`${C.name}'s photo`,className:"w-32 h-32 rounded-full object-cover border-4 shadow-lg transition-transform hover:scale-105",style:{borderColor:C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280")}}):l.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center text-6xl border-4 shadow-lg",style:{borderColor:C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280"),backgroundColor:C.species==="dog"?"#EFF6FF":C.species==="cat"?"#FFF7ED":"#F3F4F6"},children:C.species==="dog"?"":C.species==="cat"?"":""})}),l.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:l.jsxs("div",{className:"flex-1 text-center",children:[l.jsxs("div",{className:"text-base font-semibold flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:C.color||(C.species==="dog"?"#3B82F6":C.species==="cat"?"#F97316":"#6B7280")}}),C.name]}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 capitalize",children:C.species})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-3",children:[l.jsx("button",{type:"button",onClick:()=>T(C.id),className:["inline-flex items-center justify-center rounded-lg px-3 py-1.5 h-12 text-sm hover:shadow w-full sm:w-auto whitespace-nowrap",L===C.id?C.species==="dog"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white":"border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900"].join(" "),children:L===C.id?"Selected":"Use This Pet"}),l.jsx("button",{type:"button",onClick:()=>Ji(C),className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-sm text-slate-700 dark:text-slate-200 w-full sm:w-auto px-3 whitespace-nowrap",children:"Edit"})]})]}),l.jsx("div",{className:"mt-4 text-sm text-slate-700 dark:text-slate-300 space-y-1.5",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Insurance:"}),(()=>{const ve=C.insuranceCompany||"Not Insured",v=ve.toLowerCase().includes("nationwide"),k=ve.toLowerCase().includes("healthy paws"),F=ve.toLowerCase().includes("trupanion"),te=ve.toLowerCase().includes("pumpkin"),fe=ve.toLowerCase().includes("spot"),_e=ve.toLowerCase().includes("figo"),je=ve.toLowerCase().includes("pets best"),Me=ve.toLowerCase().includes("not insured")||ve.toLowerCase().includes("none");let Re="bg-slate-100 dark:bg-slate-800",Ge="text-slate-700 dark:text-slate-300",Qe="border-slate-200 dark:border-slate-700";return v?(Re="bg-blue-50 dark:bg-blue-950",Ge="text-blue-700 dark:text-blue-300",Qe="border-blue-200 dark:border-blue-800"):k?(Re="bg-green-50 dark:bg-green-950",Ge="text-green-700 dark:text-green-300",Qe="border-green-200 dark:border-green-800"):F?(Re="bg-purple-50 dark:bg-purple-950",Ge="text-purple-700 dark:text-purple-300",Qe="border-purple-200 dark:border-purple-800"):te?(Re="bg-orange-50 dark:bg-orange-950",Ge="text-orange-600 dark:text-orange-300",Qe="border-orange-200 dark:border-orange-800"):fe?(Re="bg-orange-50 dark:bg-orange-950",Ge="text-orange-600 dark:text-orange-400",Qe="border-orange-200 dark:border-orange-800"):_e?(Re="bg-teal-50 dark:bg-teal-950",Ge="text-teal-600 dark:text-teal-300",Qe="border-teal-200 dark:border-teal-800"):je?(Re="bg-cyan-50 dark:bg-cyan-950",Ge="text-cyan-700 dark:text-cyan-300",Qe="border-cyan-200 dark:border-cyan-800"):Me&&(Re="bg-slate-100 dark:bg-slate-800",Ge="text-slate-600 dark:text-slate-400",Qe="border-slate-300 dark:border-slate-700"),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${Re} ${Ge} ${Qe}`,children:[v&&"",k&&"",F&&"",te&&"",fe&&"",_e&&"",je&&"",Me&&"",ve]})})()]})}),q===C.id&&O&&l.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-800 p-3 max-w-3xl mx-auto overflow-x-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-name",className:"block text-xs",children:"Pet Name"}),l.jsx("input",{id:"edit-pet-name",value:O.name,onChange:ve=>Q({...O,name:ve.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-species",className:"block text-xs",children:"Species"}),l.jsxs("select",{id:"edit-pet-species",value:O.species,onChange:ve=>Q({...O,species:ve.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("select",{id:"edit-pet-insurance",value:M,onChange:ve=>{const v=ve.target.value;ce(v);const k=Ac(v),F=vn(k);v==="Not Insured"||v===" Select "?Q({...O,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):k&&Q({...O,insuranceCompany:k,filing_deadline_days:F||90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:wu.map(ve=>l.jsx("option",{value:ve.display,children:ve.display},ve.display))})]}),M==="Not Insured"&&l.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:l.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}),M==="Healthy Paws (90 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-healthy-paws-id",className:"block text-xs text-slate-500",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"edit-pet-healthy-paws-id",value:O.healthy_paws_pet_id||"",onChange:ve=>Q({...O,healthy_paws_pet_id:ve.target.value}),placeholder:"e.g., 1400806-1",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),M==="Spot (270 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-spot-account-number",className:"block text-xs text-slate-500",children:"Account Number"}),l.jsx("input",{id:"edit-pet-spot-account-number",value:O.spot_account_number||"",onChange:ve=>Q({...O,spot_account_number:ve.target.value}),placeholder:"e.g., 12345678",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),M==="Pumpkin (270 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-pumpkin-account-number",className:"block text-xs text-slate-500",children:"Pumpkin Account Number"}),l.jsx("input",{id:"edit-pet-pumpkin-account-number",value:O.pumpkin_account_number||"",onChange:ve=>Q({...O,pumpkin_account_number:ve.target.value}),placeholder:"e.g., 12345678",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),M==="Figo (180 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-figo-policy-number",className:"block text-xs text-slate-500",children:"Figo Policy Number"}),l.jsx("input",{id:"edit-pet-figo-policy-number",value:O.figo_policy_number||"",onChange:ve=>Q({...O,figo_policy_number:ve.target.value}),placeholder:"e.g., FG123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),M&&M!=="Not Insured"&&M!==" Select "&&M!=="Spot (270 days)"&&M!=="Pumpkin (270 days)"&&M!=="Figo (180 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"edit-pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),l.jsx("input",{id:"edit-pet-policy-number",value:O.policyNumber||"",onChange:ve=>Q({...O,policyNumber:ve.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),M!=="Not Insured"&&M!==" Select "&&M&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"edit-pet-premium",type:"number",step:"0.01",placeholder:"e.g., 38.00",value:String(O.monthly_premium??""),onChange:ve=>Q({...O,monthly_premium:ve.target.value===""?"":Number(ve.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Monthly insurance premium cost"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"edit-pet-deductible",type:"number",step:"0.01",placeholder:"e.g., 250.00",value:String(O.deductible_per_claim??""),onChange:ve=>Q({...O,deductible_per_claim:ve.target.value===""?"":Number(ve.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),l.jsx("input",{id:"edit-pet-insurance-pays",type:"number",min:0,max:100,placeholder:"80",value:String(O.insurance_pays_percentage??""),onChange:ve=>Q({...O,insurance_pays_percentage:ve.target.value===""?"":Number(ve.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),l.jsx("input",{id:"edit-pet-coverage-start",type:"date",value:O.coverage_start_date||"",onChange:ve=>Q({...O,coverage_start_date:ve.target.value}),className:"mt-1 w-full min-w-[220px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When did your coverage start?"})]})]})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:jt,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save"}),l.jsx("button",{type:"button",onClick:()=>{if(!q)return;const v=y.find(F=>F.id===q)?.name||"this pet";if(!confirm(` Delete ${v}?

This will NOT delete bills for this pet, but you won't be able to file new bills.

This cannot be undone!`))return;const k=y.filter(F=>F.id!==q);E(k),me&&Px(me,q).catch(F=>{console.error("[deletePet] error",F)}),z(null),Q(null)},className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",children:"Delete"}),l.jsx("button",{type:"button",onClick:()=>{z(null),Q(null)},className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]})]},C.id))]})]}),ze==="app"&&l.jsxs("section",{className:"mx-auto max-w-3xl text-center mt-8 px-2",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Upload Vet Bill"}),l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:["rounded-2xl border bg-white dark:bg-slate-900/60 shadow-sm p-6 sm:p-8 transition-colors",s?"border-emerald-400 ring-2 ring-emerald-400/60 dark:ring-emerald-400/50 bg-emerald-50/40 dark:bg-emerald-900/10":"border-slate-200 dark:border-slate-800"].join(" "),onDragEnter:_o,onDragOver:mi,onDragLeave:Aa,onDrop:Xi,children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",onClick:Ys,className:"group relative w-full sm:w-auto h-16 rounded-xl border border-slate-300/70 dark:border-slate-700 bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 hover:from-white hover:to-white px-5 text-base sm:text-sm text-slate-800 dark:text-slate-100 shadow hover:shadow-lg transition",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("svg",{className:"h-6 w-6 text-emerald-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),l.jsx("span",{className:"font-medium",children:"Upload Vet Bill (PDF or Photo)"})]})}),l.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"or drag & drop here"}),l.jsx("input",{ref:n,type:"file",accept:"image/*,application/pdf",onChange:is,className:"sr-only"}),e&&l.jsxs("div",{className:"mt-6 w-full text-left",children:[l.jsx("div",{className:"flex items-start justify-between gap-4",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Ka})]})}),e.objectUrl&&l.jsx("div",{className:"mt-4",children:l.jsx("img",{src:e.objectUrl,alt:"Selected preview",className:"max-h-80 w-full object-contain rounded-lg border border-slate-200 dark:border-slate-800",onLoad:()=>{e.objectUrl&&URL.revokeObjectURL(e.objectUrl)}})}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("button",{type:"button",onClick:C=>{console.log("[MOBILE DEBUG] ========== PROCESS BILL BUTTON CLICKED =========="),console.log("[MOBILE DEBUG] Event:",C),console.log("[MOBILE DEBUG] isProcessing:",o),ea()},disabled:o,className:"inline-flex items-center justify-center w-full h-14 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 text-base sm:text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[o&&l.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),"Process Bill"]}),o&&l.jsxs("div",{className:"mt-4 flex flex-col items-center text-sm text-slate-700 dark:text-slate-300",children:[l.jsxs("svg",{className:"h-6 w-6 animate-spin mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),l.jsx("div",{children:" Extracting bill data..."})]})]})]})]})})})]},"upload-section"),ze==="app"&&Xe&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Multiple Pets Detected"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We found charges for multiple pets on this bill:"}),l.jsx("ul",{className:"mt-2 text-sm list-disc pl-6 text-slate-700 dark:text-slate-200",children:Xe.pets.map((C,ve)=>l.jsxs("li",{children:[C.petName||`Pet ${ve+1}`," (",C.petSpecies||"Pet",")  ",Zi(C.lineItems)]},ve))}),l.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"We'll create a separate bill for each pet."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("p",{className:"text-sm font-medium",children:"Match each pet to your saved profiles (or add new ones):"}),Xe.pets.map((C,ve)=>l.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 justify-between",children:[l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-sm font-medium",children:C.petName||`Pet ${ve+1}`}),l.jsx("div",{className:"text-xs text-slate-500",children:C.petSpecies||"Pet"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",value:Ke[ve]||"",onChange:v=>{const k=[...Ke];k[ve]=v.target.value||null,Lt(k)},children:[l.jsx("option",{value:"",children:"Select saved pet"}),y.map(v=>l.jsxs("option",{value:v.id,children:[v.name," (",v.species,")"]},v.id))]}),!Ke[ve]&&l.jsx("button",{type:"button",className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-xs hover:shadow",onClick:()=>{et(ve),G(!0);const v=(C.petSpecies||"").toLowerCase(),k=v.includes("cat")?"cat":v.includes("dog")?"dog":ne.species;D(F=>({...F,name:C.petName||"",species:k})),vt.current?.scrollIntoView({behavior:"smooth"})},children:"+ Add New Pet"})]})]})},ve))]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",disabled:Ke.some(C=>!C),onClick:async()=>{const C=[];for(let ve=0;ve<Xe.pets.length;ve++){const v=Xe.pets[ve],k=Ke[ve],F=y.find(Re=>Re.id===k)||null,te=v.subtotal||Zi(v.lineItems),{filename:fe,blob:_e}=_5({clinicName:Xe.clinicName,clinicAddress:Xe.clinicAddress,dateOfService:Xe.dateOfService,diagnosis:Xe.diagnosis,petName:v.petName,lineItems:v.lineItems,subtotal:te,invoiceNumber:Xe.invoiceNumber},F);if(me)try{const Re=parseFloat(String(te).replace(/[^0-9.\-]/g,""))||null,Ge=Number(F?.filing_deadline_days)||90,Nt=(nr=>{if(!nr)return null;const wr=String(nr).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!wr)return null;const _r=Number(wr[1]),Qr=Number(wr[2])-1,Js=Number(wr[3]),Jt=new Date(_r,Qr,Js);return Number.isNaN(Jt.getTime())?null:Jt})(Xe.dateOfService),Ft=Nt?new Date(Nt.getTime()):null;Ft&&Ft.setDate(Ft.getDate()+Ge);const rr=await eg({user_id:me,pet_id:F?F.id:null,service_date:Xe.dateOfService||null,invoice_number:Xe.invoiceNumber||null,clinic_name:Xe.clinicName||null,clinic_address:Xe.clinicAddress||null,clinic_phone:Xe.clinicPhone||null,diagnosis:Xe.diagnosis||null,total_amount:Re,line_items:v.lineItems,filing_status:"not_filed",filing_deadline_days:Ge});rr?.id&&await Pa(me,rr.id,_e)}catch(Re){console.error("[createClaim multi] error",Re)}const je=URL.createObjectURL(_e),Me=document.createElement("a");Me.href=je,Me.download=fe,document.body.appendChild(Me),Me.click(),Me.remove(),URL.revokeObjectURL(je),C.push({name:fe,amount:te})}me&&$i(me).then(yt).catch(()=>{}),ot(!0),alert(` ${C.length} bills generated and downloaded!
`+C.map(ve=>`- ${ve.name} (${ve.amount})`).join(`
`)+`

Email each bill to your insurance company.`)},children:"Generate Bills"})})]})}),_&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{S(null),ee(null),t(null),x(null),B(""),ue(""),Z("insured")},children:" Cancel"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Extracted Details"})]}),l.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"What was this visit for? (Visit Title)"}),l.jsx("input",{value:H,onChange:C=>ue(C.target.value),placeholder:"e.g., Annual checkup, Emergency visit, Teeth cleaning",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Edit if needed"})]}),(()=>{if(!_||!Array.isArray(_.lineItems))return null;const C=_.lineItems.map(k=>kn(k.amount));return _.lineItems.length>0&&C.every(k=>!Number.isFinite(k)||k===0)?l.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:[l.jsx("div",{className:"font-semibold",children:" NO PRICES FOUND"}),l.jsx("div",{className:"mt-1",children:"This appears to be a vaccination certificate or record, not an invoice."}),l.jsx("div",{className:"mt-1",children:"Please upload the actual bill/receipt with itemized charges and prices."}),l.jsx("div",{className:"mt-1 text-amber-800/80",children:"Insurance companies require invoices showing what you paid."})]}):null})(),l.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Review and edit any field if needed."}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Name"}),l.jsx("input",{value:_.clinicName,onChange:C=>S({..._,clinicName:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Address"}),l.jsx("input",{value:_.clinicAddress,onChange:C=>S({..._,clinicAddress:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Phone"}),l.jsx("input",{value:_.clinicPhone||"",onChange:C=>S({..._,clinicPhone:C.target.value}),placeholder:"(XXX) XXX-XXXX",type:"tel",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),l.jsx("input",{value:_.petName,onChange:C=>S({..._,petName:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Date of Service"}),l.jsx("input",{type:"date",value:_.dateOfService,onChange:C=>S({..._,dateOfService:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Invoice Number"}),l.jsx("input",{value:_.invoiceNumber||"",onChange:C=>S({..._,invoiceNumber:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Total Amount"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx("span",{className:"text-slate-500 text-sm",children:"$"})}),l.jsx("input",{value:_.totalAmount,onChange:C=>S({..._,totalAmount:C.target.value}),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 pl-7 pr-3 py-2 text-sm"})]})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Diagnosis / Reason"}),l.jsx("textarea",{value:_.diagnosis,onChange:C=>S({..._,diagnosis:C.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",rows:3})]})]}),A&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Pet Insurance"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("input",{value:A.insuranceCompany,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Policy Number"}),l.jsx("input",{value:A.policyNumber,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-sm text-emerald-700 dark:text-emerald-300 hover:underline",onClick:()=>S({..._,lineItems:[..._.lineItems,{description:"",amount:""}]}),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-3 space-y-3",children:_.lineItems.map((C,ve)=>l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3",children:[l.jsx("div",{className:"sm:col-span-8",children:l.jsx("input",{placeholder:"Description",value:C.description,onChange:v=>{const k=[..._.lineItems];k[ve]={...k[ve],description:v.target.value},S({..._,lineItems:k})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-3",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx("span",{className:"text-slate-500 text-sm",children:"$"})}),l.jsx("input",{placeholder:"Amount",value:C.amount,onChange:v=>{const k=[..._.lineItems];k[ve]={...k[ve],amount:v.target.value},S({..._,lineItems:k})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 pl-7 pr-3 py-2 text-sm"})]})}),l.jsx("div",{className:"sm:col-span-1 flex items-center",children:l.jsx("button",{type:"button",className:"text-slate-500 hover:text-rose-600 text-sm",onClick:()=>{const v=_.lineItems.filter((k,F)=>F!==ve);S({..._,lineItems:v})},"aria-label":"Remove item",children:""})})]},ve))})]}),l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-blue-50/60 dark:bg-blue-900/10 p-4",children:[l.jsxs("label",{htmlFor:"visit-notes",className:"block text-sm font-semibold mb-2",children:[" Visit Notes ",l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(Optional but recommended)"})]}),l.jsx("textarea",{id:"visit-notes",value:Y,onChange:C=>B(C.target.value),placeholder:"What was discussed at this vet visit? (e.g., 'Annual checkup - vet noted minor eye redness from outdoor play, cleared up in 2 days')",rows:3,className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),l.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:[" ",l.jsx("strong",{children:"Why this matters:"})," Documenting what was discussed protects you from casual comments being misinterpreted later as pre-existing conditions."]})]}),A&&A.insuranceCompany&&A.insuranceCompany.trim()!==""&&A.insuranceCompany.toLowerCase()!=="not insured"&&de!=="not_insured"&&(()=>{const C=Number(A?.filing_deadline_days)||90,ve=_e=>{if(!_e)return null;const je=String(_e).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!je)return null;const Me=Number(je[1]),Re=Number(je[2])-1,Ge=Number(je[3]),Qe=new Date(Me,Re,Ge);return Number.isNaN(Qe.getTime())?null:Qe},v=ve(_.dateOfService),k=v?new Date(v.getTime()):null;k&&k.setDate(k.getDate()+C);const F=new Date,te=k?Math.ceil((k.getTime()-F.getTime())/(1e3*60*60*24)):null,fe=te===null?{wrap:"bg-slate-50 border-slate-200",title:"text-slate-900"}:te>=60?{wrap:"bg-emerald-50 border-emerald-200",title:"text-emerald-900"}:te>=30?{wrap:"bg-yellow-50 border-yellow-200",title:"text-yellow-900"}:te>=15?{wrap:"bg-orange-50 border-orange-200",title:"text-orange-900"}:{wrap:"bg-rose-50 border-rose-200",title:"text-rose-900"};if(te!==null&&te<0){const _e=v?Math.floor((F.getTime()-v.getTime())/864e5):0,je=Math.floor(_e/365),Me=Math.max(1,Math.floor(_e%365/30)),Re=je>=1?je===1?"over 1 year ago":`over ${je} years ago`:`over ${Me} months ago`;return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm bg-rose-50 border-rose-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold text-rose-900",children:" DEADLINE PASSED"}),l.jsxs("div",{className:"mt-2 text-sm text-rose-900",children:["This bill is from ",_.dateOfService||""," (",Re,")."]}),l.jsx("div",{className:"mt-2 text-sm text-rose-900",children:"Most insurers won't accept bills this old."}),l.jsx("div",{className:"mt-1 text-xs text-rose-900/80",children:"Contact your insurance company to verify if you can still file."})]})}return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm",fe.wrap].join(" "),children:[l.jsx("div",{className:["text-sm font-semibold flex items-center gap-2",fe.title].join(" "),children:l.jsx("span",{children:" FILING DEADLINE REMINDER"})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Service Date"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:_.dateOfService&&ve(_.dateOfService)?.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Insurance"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:A?A.insuranceCompany:""})]})]}),l.jsx("div",{className:"mt-3 text-sm",children:l.jsx("div",{className:"text-slate-700",children:" Most insurers require filing within 60180 days of service."})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Estimated Deadline"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:k?k.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Days Remaining"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base",children:te===null?"":`${te} days`})]})]}),l.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"This is a general reminder. Always verify your specific policy deadline."})]})})(),A&&A.insuranceCompany&&A.insuranceCompany.trim()!==""&&A.insuranceCompany.toLowerCase()!=="not insured"&&l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expense Category"}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"insured",checked:de==="insured",onChange:()=>Z("insured")}),l.jsx("span",{children:"Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"not_insured",checked:de==="not_insured",onChange:()=>Z("not_insured")}),l.jsx("span",{children:"Not Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"maybe_insured",checked:de==="maybe_insured",onChange:()=>Z("maybe_insured")}),l.jsx("span",{children:"Maybe Insured"})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{S(null),ee(null),t(null),x(null),B(""),ue(""),Z("insured")},children:" Cancel"}),!o&&l.jsx("button",{type:"button",disabled:d,className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",onClick:async()=>{if(!d){if(!A){Jr(!0);return}f(!0);try{const C=Number(A?.filing_deadline_days)||90,v=(fe=>{if(!fe)return null;const _e=String(fe).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!_e)return null;const je=Number(_e[1]),Me=Number(_e[2])-1,Re=Number(_e[3]),Ge=new Date(je,Me,Re);return Number.isNaN(Ge.getTime())?null:Ge})(_.dateOfService),k=v?new Date(v.getTime()):null;k&&k.setDate(k.getDate()+C);let F=null;if(me)try{const fe=parseFloat(String(_.totalAmount).replace(/[^0-9.\-]/g,""))||null;if(F=await eg({user_id:me,pet_id:A?A.id:null,service_date:_.dateOfService||null,invoice_number:_.invoiceNumber||null,clinic_name:_.clinicName||null,clinic_address:_.clinicAddress||null,clinic_phone:_.clinicPhone||null,visit_title:H||null,diagnosis:_.diagnosis||null,total_amount:fe,line_items:_.lineItems,filing_status:"not_submitted",filing_deadline_days:C,visit_notes:Y||null,expense_category:de}),console.log("[createClaim single] Checking for vet bill upload...",{hasClaimId:!!F?.id,hasSelectedFile:!!e,hasFile:!!e?.file,selectedFileType:e?.file?.type}),F?.id&&e?.file)try{console.log("[createClaim single] Uploading vet bill PDF to storage..."),await Pa(me,F.id,e.file),console.log("[createClaim single]  Uploaded vet bill PDF for claim:",F.id)}catch(_e){console.error("[createClaim single]  Failed to upload vet bill:",_e),alert(` Warning: Failed to attach vet invoice.

The claim was created but the invoice file could not be uploaded. You may need to attach it manually when submitting.

Error: ${_e instanceof Error?_e.message:String(_e)}`)}else console.warn("[createClaim single]   No vet bill PDF to upload - selectedFile or file is missing")}catch(fe){console.error("[createClaim single] error",fe)}const te={claimId:F?.id||null,petName:A?.name||"Unknown",species:A?.species||"",amount:kn(String(_.totalAmount||"")),serviceDate:_.dateOfService||null,insurance:A?.insuranceCompany||"",deadlineDate:k?k.toISOString().slice(0,10):null,deadlineDays:C};Ei(te),Gi(F?.id||null),console.log("[LOOKS GOOD CLICKED] Showing success modal",{claimId:F?.id}),S(null)}finally{f(!1)}}},children:d?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Looks Good"})]})]})},JSON.stringify(_)),ze==="app"&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Financial Summary"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("label",{className:"mr-2 text-slate-600",children:"Show expenses for:"}),l.jsxs("select",{value:ft,onChange:C=>it(C.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[l.jsx("option",{value:"all",children:"All Time"}),l.jsx("option",{value:"2026",children:"2026"}),l.jsx("option",{value:"2025",children:"2025"}),l.jsx("option",{value:"2024",children:"2024"}),l.jsx("option",{value:"last12",children:"Last 12 Months"})]})]})]}),l.jsx(S5,{userId:me,refreshToken:It,period:ft})]}),ze==="app"&&qt.length>0&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Vet Bills"})}),(()=>{const C=y.some(v=>{const k=v.insuranceCompany?.toLowerCase()||"";return df.some(F=>k.includes(F))}),ve=Ne&&hf.includes(Ne.toLowerCase());return C||ve?null:l.jsx("div",{className:"mt-4 mb-4 p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:l.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[l.jsx("span",{className:"text-3xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:"Auto-Submit Coming Soon!"}),l.jsx("p",{className:"text-sm text-blue-100",children:"Soon we'll file claims directly with your insurance company. No more manual work!"})]})]})})})(),l.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Total bills"}),l.jsx("div",{className:"text-lg font-semibold",children:Ur.total})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Bills pending submission"}),l.jsxs("div",{className:"text-lg font-semibold",children:[Ur.notFiledCount," ",l.jsxs("span",{className:"text-sm text-slate-500",children:["(",on(Ur.notFiledSum),")"]})]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims filed"}),l.jsx("div",{className:"text-lg font-semibold",children:Ur.filedPending})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims expiring soon (< 15 days)"}),l.jsx("div",{className:"text-lg font-semibold",children:Ur.expiringSoon})]})]}),l.jsx("div",{ref:mt,className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full overflow-x-hidden",style:{overscrollBehaviorX:"none"},children:Fs.map(C=>{const ve=C.pets||{},v=ve?.color||(ve?.species==="cat"?"#F97316":ve?.species==="dog"?"#3B82F6":"#6B7280");Ks(C);const k=(()=>{const je=as(C);if(!je)return null;const Me=new Date(je.getTime());return Me.setDate(Me.getDate()+vn(C)),Me})(),F=ta(C),te=Xa(C.filing_status),fe=String(C.expense_category||"insured")==="not_insured",_e=(()=>{const je=C.expense_category||"insured",Me=ve?.insurance_company||"";return je==="insured"?{text:Me?`Insured  ${Me}`:"Insured",cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}:je==="not_insured"?{text:"Not Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}:{text:Me?`Maybe Insured  ${Me}`:"Maybe Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}})();return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900 shadow-sm min-h-[180px] w-full",style:{border:`2px solid ${v}`,touchAction:"pan-y",overscrollBehaviorX:"none"},children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:v+"20"},children:l.jsx("span",{className:"text-slate-700",children:ve.species==="cat"?"":""})}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 break-words line-clamp-2",children:(()=>{const je=(C.visit_title&&String(C.visit_title)||C.diagnosis&&String(C.diagnosis)||"").trim();return je?`${ve.name||"Pet"}  ${je}`:ve.name||"Pet"})()})})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:[l.jsx("span",{className:"mr-1",children:""}),C.clinic_name||""]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${_e.cls}`,children:_e.text}),!fe&&l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${te.cls}`,children:te.text})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Service Date"}),l.jsx("div",{className:"font-medium",children:C.service_date&&as(C)?.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-500",children:"Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:on(C.total_amount)}),String(C.filing_status||"").toLowerCase()==="paid"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:(()=>{const je=Number(C.total_amount||0),Me=Number(C.reimbursed_amount||0),Re=je>0?Math.round(Me/je*100):0;return`Claimed: ${on(je)}  Received: ${on(Me)} (${Re}%)`})()})}),C.paid_date&&l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:`Date Paid: ${new Date(C.paid_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}`})})]})]}),(()=>{const je=String(C.filing_status||"").toLowerCase();if(!(!!C.filed_date&&(je==="filed"||je==="paid")))return null;const Re=(()=>{const Qe=String(C.filed_date||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);if(Qe)return new Date(Number(Qe[1]),Number(Qe[2])-1,Number(Qe[3])).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const Nt=C.filed_date?new Date(C.filed_date):null;return Nt?Nt.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})();return l.jsxs("div",{className:"col-span-2 mt-1 text-[11px] text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Filed: ",Re]})]})})(),fe?l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Info"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:" Self-paid vet bill"})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Filing Deadline"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:k?k.toISOString().slice(0,10):""})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${F.cls}`,children:F.text})})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 flex flex-wrap items-start sm:items-center justify-between gap-2",children:[(()=>{const je=String(C.filing_status||"not_submitted").toLowerCase(),Me=je==="filed"?"submitted":je==="not_filed"?"not_submitted":je;if(fe)return l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-600",children:" Not insured - No filing required"})});if(Me==="not_submitted"){const Re=(()=>{if(!Ne)return!1;const Ge=Ne.toLowerCase(),Qe=C.pets?.insurance_company?.toLowerCase()||"";return hf.includes(Ge)?!0:df.some(Nt=>Qe.includes(Nt))})();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[Re&&l.jsx("button",{type:"button",className:`
                                      text-xs px-2 py-1 rounded font-semibold whitespace-nowrap flex items-center gap-1.5
                                      transition-all duration-200 ease-out
                                      ${Ki===C.id?"scale-95 bg-gradient-to-r from-teal-600 via-teal-500 to-teal-600 bg-[length:200%_100%] animate-[shimmer_1.5s_ease-in-out_infinite]":"bg-blue-600 hover:bg-blue-700 active:scale-95"}
                                      text-white
                                    `,onClick:async()=>{navigator.vibrate&&navigator.vibrate(10),er(C.id),await new Promise(Ge=>setTimeout(Ge,1e3)),ps(C),await new Promise(Ge=>setTimeout(Ge,200)),er(null)},title:"Automatically generate PDF and email to insurance company",children:Ki===C.id?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"animate-pulse",children:"Preparing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Auto-Submit"]})}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",onClick:async()=>{try{const Ge=ci(),Nt=prompt("Enter filed date (YYYY-MM-DD):",Ge)||Ge;await Ko(C.id,{filing_status:"filed",filed_date:Nt}),yt(Ft=>Ft.map(rr=>rr.id===C.id?{...rr,filing_status:"filed",filed_date:Nt}:rr));try{alert(" Claim marked as submitted")}catch{}if(await new Promise(Ft=>setTimeout(Ft,500)),me){const Ft=await $i(me);yt(Ft)}}catch(Ge){console.error("[mark filed] error",Ge)}},title:"Manually mark as submitted (if you filed yourself)",children:"Mark Submitted"})]}),["insured","maybe"].includes(String(C.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"not_submitted",onChange:async Ge=>{try{const Qe=Ge.target.value,Nt=Qe==="submitted"?"filed":Qe==="not_submitted"?"not_filed":Qe;await Ko(C.id,{filing_status:Nt}),yt(Ft=>Ft.map(rr=>rr.id===C.id?{...rr,filing_status:Nt}:rr));try{alert(" Status updated")}catch{}await new Promise(Ft=>setTimeout(Ft,400)),me&&$i(me).then(yt)}catch(Qe){console.error("[edit status] error",Qe)}},children:[l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]}),!Re&&l.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-950/30 border-l-4 border-blue-400 rounded",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"text-2xl mr-2",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Coming Soon: Auto-Submit"}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"We'll file claims directly with your insurance company - no more manual work!"})]})]})})]})}return Me==="submitted"?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"What happened with this claim?"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{gn(C);const Re=C.total_amount&&Number.isFinite(Number(C.total_amount))?String(Number(C.total_amount).toFixed(2)):"";ns(Re),li(ci())},children:"Payment Received? Mark as Paid"}),l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800",onClick:async()=>{try{await Ko(C.id,{filing_status:"denied"}),yt(Re=>Re.map(Ge=>Ge.id===C.id?{...Ge,filing_status:"denied"}:Ge));try{alert(" Claim marked as denied")}catch{}me&&$i(me).then(yt)}catch(Re){console.error("[deny claim] error",Re)}},children:"Deny Claim"})]}),["insured","maybe"].includes(String(C.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"submitted",onChange:async Re=>{try{const Ge=Re.target.value,Qe=Ge==="submitted"?"filed":Ge==="not_submitted"?"not_filed":Ge;await Ko(C.id,{filing_status:Qe}),yt(Nt=>Nt.map(Ft=>Ft.id===C.id?{...Ft,filing_status:Qe}:Ft));try{alert(" Status updated")}catch{}me&&$i(me).then(yt)}catch(Ge){console.error("[edit status] error",Ge)}},children:[l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]})]}):null})(),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[C.pdf_path&&l.jsx("a",{href:"#",onClick:async je=>{je.preventDefault();try{const{data:Me}=await rt.storage.from("claim-pdfs").createSignedUrl(C.pdf_path,60);Me?.signedUrl&&window.open(Me.signedUrl,"_blank")}catch(Me){console.error("[view pdf] error",Me)}},className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",children:"View PDF"}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800 shrink-0 whitespace-nowrap",onClick:async()=>{if(confirm("Delete this bill?"))try{await nw(C.id),me&&$i(me).then(yt)}catch(je){console.error("[delete claim] error",je)}},children:"Delete"})]})]})]},C.id)})}),Fs.length===0&&l.jsx("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 p-6 text-center text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900",children:"No vet bills yet. Upload your first bill to get started!"})]}),ze==="app"&&l.jsxs("footer",{className:"mx-auto max-w-3xl text-center py-10 text-xs text-slate-500 dark:text-slate-400",children:[" ",new Date().getFullYear()," Pet Cost Helper"]})]}),xt&&l.jsx(lw,{userId:me,userEmail:Ne,onClose:()=>$e(!1)}),Hs&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Jr(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-rose-200 bg-white p-6",onClick:C=>C.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold text-rose-700",children:" Please Select a Pet"}),l.jsx("div",{className:"mt-2 text-sm text-rose-800",children:"You haven't selected a pet for this bill yet."}),l.jsx("div",{className:"mt-1 text-sm text-rose-800",children:"Please go back and click 'Use This Pet' for the pet you want to add this bill for."}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",onClick:()=>Jr(!1),children:"Go Back"})})]})}),Tt&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Ps(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-2xl rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 flex flex-col max-h-[85vh]",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Edit Bill"}),l.jsx("button",{className:"text-sm",onClick:()=>Ps(null),children:"Close"})]}),["filed","paid"].includes(String(Tt.filing_status||"").toLowerCase())&&l.jsx("div",{className:"mx-5 mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:" This claim has been filed. Changes may require resubmitting to insurance."}),l.jsx("div",{className:"p-5 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Pet"}),l.jsxs("select",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:an||"",onChange:C=>Cs(C.target.value),children:[l.jsx("option",{value:"",children:""}),y.map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Service Date"}),l.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:es,onChange:C=>_t(C.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Title"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:mn,onChange:C=>ts(C.target.value),placeholder:"e.g., Annual checkup, Teeth cleaning"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Diagnosis / Reason"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Mn,onChange:C=>hs(C.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Notes"}),l.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:dr,onChange:C=>Tr(C.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-xs text-emerald-700",onClick:()=>rs([...br,{description:"",amount:""}]),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-2 space-y-2",children:br.map((C,ve)=>l.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[l.jsx("input",{className:"col-span-8 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Description",value:C.description,onChange:v=>{const k=[...br];k[ve]={...k[ve],description:v.target.value},rs(k)}}),l.jsx("input",{className:"col-span-3 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Amount",value:C.amount,onChange:v=>{const k=[...br];k[ve]={...k[ve],amount:v.target.value},rs(k)}}),l.jsx("button",{className:"col-span-1 text-xs",onClick:()=>{const v=br.filter((k,F)=>F!==ve);rs(v)},children:""})]},ve))})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Expense Category"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Es==="insured",onChange:()=>Un("insured")})," Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Es==="not_insured",onChange:()=>Un("not_insured")})," Not Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Es==="maybe_insured",onChange:()=>Un("maybe_insured")})," Maybe"]})]})]})]})}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Ps(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{if(Tt)try{if(await Ko(Tt.id,{pet_id:an||Tt.pet_id,service_date:es||null,visit_title:mn||null,diagnosis:Mn||null,visit_notes:dr||null,line_items:br,expense_category:Es}),me){const C=await $i(me);yt(C)}Ps(null),alert("Bill updated")}catch(C){console.error("[update claim] error",C),alert("Error updating bill")}},children:"Save Changes"})]})]})}),zr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>gn(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Mark as Paid"}),l.jsx("button",{className:"text-sm",onClick:()=>gn(null),children:"Close"})]}),l.jsxs("div",{className:"p-5 text-sm space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Claimed Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:on(zr.total_amount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Reimbursed Amount"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",placeholder:"0.00",value:oi,onChange:C=>ns(C.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Date Received"}),l.jsx("input",{type:"date",value:Vs,onChange:C=>li(C.target.value),max:ci(),placeholder:"YYYY-MM-DD",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2"})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-500",children:"Difference"}),l.jsx("div",{className:"font-mono font-semibold",children:(()=>{const C=Number(zr.total_amount||0),ve=Number(oi||0),v=C-ve;return on(v)})()})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>gn(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{try{const C=Number(oi);if(!Number.isFinite(C)||C<0){alert("Please enter a valid reimbursed amount");return}if(!Vs){alert("Please select the date received");return}const ve=new Date(Vs).toISOString().slice(0,10),v=Number(zr.total_amount||0),k=zr.pet_id||null,F=zr.service_date?Number(String(zr.service_date).slice(0,4)):null,te=F&&k?qt.some(Re=>Re.id!==zr.id&&Re.pet_id===k&&String(Re.expense_category||"").toLowerCase()==="insured"&&String(Re.filing_status||"").toLowerCase()==="paid"&&Re.service_date&&String(Re.service_date).slice(0,4)===String(F)&&Number(Re.deductible_applied||0)>0):!1,fe=k?y.find(Re=>Re.id===k):null,_e=Math.max(0,Number(fe?.deductible_per_claim||0)),je=Math.min(v,te?0:_e),Me=Math.max(0,v-je-C);if(await Ko(zr.id,{filing_status:"paid",reimbursed_amount:C,paid_date:ve,deductible_applied:je,user_coinsurance_payment:Me}),me){const Re=await $i(me);yt(Re)}gn(null),ns(""),li(ci()),alert("Claim marked as paid")}catch(C){console.error("[mark paid] error",C),alert("Error saving paid status")}},children:"Save"})]})]})}),ss&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Ls(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:C=>C.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Select Medications Prescribed"}),l.jsxs("div",{className:"mt-3 space-y-2 max-h-[50vh] overflow-y-auto",children:[Ga.length===0&&l.jsx("div",{className:"text-sm text-slate-600",children:"No active medications found"}),Ga.map(C=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors",children:[l.jsx("input",{type:"checkbox",checked:fs.includes(C.id),onChange:ve=>{const v=ve.target.checked;qn(k=>v?[...k,C.id]:k.filter(F=>F!==C.id))},className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${fs.includes(C.id)?"bg-emerald-500 border-emerald-500":"bg-white border-gray-300"}`,children:fs.includes(C.id)&&l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:"text-sm font-medium",children:C.medication_name}),C.dosage&&l.jsx("div",{className:"text-xs text-slate-500",children:C.dosage})]})]},C.id))]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",className:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-700",onClick:()=>Ts(!0),children:"+ Add New Medication"})}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>Ls(!1),children:"Cancel"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{Mr&&fs.length>0&&await Ko(Mr,{medication_ids:fs}),Ls(!1),Na("Medications saved ")}catch(C){console.error("[med select -> link meds] error",C),Ls(!1),Na("Medications saved ")}},children:"Confirm"})]})]})}),zn&&l.jsx(f1,{open:zn,onClose:()=>Ts(!1),onSaved:async C=>{try{if(me&&A){const ve=ci(),{data:v}=await rt.from("medications").select("*").eq("user_id",me).eq("pet_id",A.id).lte("start_date",ve).or(`end_date.is.null,end_date.gte.${ve}`);_a(Array.isArray(v)?v:[]),C&&!fs.includes(C)&&qn(k=>[...k,C])}}catch{}},userId:me,pets:y,defaultPetId:A?.id||null}),ui&&me&&l.jsx(X5,{claim:ui,pet:ui.pets||{},userId:me,onClose:()=>ps(null),onSuccess:async C=>{if(console.log("[Auto-Submit] Success! Message ID:",C),ps(null),me){const ve=await $i(me);yt(ve)}Na(" Claim submitted to insurance!")}}),l.jsx(k5,{open:Hi,onClose:()=>{if(Ci(!1),me&&lu(me).then(E).catch(()=>{}),localStorage.getItem("justCompletedOnboarding")!=="true")return;const ve=localStorage.getItem("pch_added_to_homescreen"),v=localStorage.getItem("pch_homescreen_dismissed_at");if(ve!=="true"){if(v){const k=new Date(v);if((Date.now()-k.getTime())/(1e3*60*60*24)<3)return}setTimeout(()=>{window.AddToHomeScreenInstance&&(window.AddToHomeScreenInstance.clearModalDisplayCount(),window.AddToHomeScreenInstance.show("en"))},500)}},userId:me||"",userEmail:Ne}),Xr&&l.jsx(uw,{userId:me,onClose:()=>$n(!1),onSave:C=>{Sa(!0),$n(!1)}}),Bn&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Ei(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 bg-white p-0 overflow-hidden",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"p-6 bg-emerald-50 dark:bg-emerald-900/20 border-b border-emerald-200 dark:border-emerald-800 flex flex-col items-center text-center",children:[l.jsx("div",{className:"h-14 w-14 rounded-full bg-emerald-600 text-white flex items-center justify-center text-2xl shadow animate-pulse",children:""}),l.jsx("div",{className:"mt-3 text-lg font-semibold text-emerald-800 dark:text-emerald-200",children:"Vet Bill Saved Successfully!"}),l.jsx("div",{className:"mt-1 text-xs text-emerald-900/80 dark:text-emerald-300/80",children:"Your vet bill was saved. You can submit it to insurance when ready."})]}),l.jsxs("div",{className:"p-6 text-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Pet:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100 font-semibold",children:[Bn.petName," (",Bn.species,")"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Amount:"})," ",l.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-slate-100",children:on(Bn.amount||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Date:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Bn.serviceDate||""})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Insurance:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Bn.insurance||"Not Insured"})]}),Bn.insurance&&Bn.insurance.trim()!==""&&l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Filing Deadline:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[Bn.deadlineDate||""," (",(()=>{if(!Bn.deadlineDate)return"";const C=new Date;C.setHours(0,0,0,0);const ve=new Date(Bn.deadlineDate);ve.setHours(0,0,0,0);const v=ve.getTime()-C.getTime(),k=Math.ceil(v/(1e3*60*60*24));return k>0?`${k} days remaining`:"overdue"})(),")"]})]})]}),l.jsx("div",{className:"mt-5 flex justify-center",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 text-sm font-medium w-full sm:w-auto",onClick:async()=>{Ei(null),S(null),ee(null),t(null),x(null),B(""),ue(""),Z("insured");try{if(me){const C=await $i(me);yt(C)}}catch{}ot(!1)},children:"Done"})})]})]})}),l.jsx("footer",{className:"mt-12 pb-8 text-center",children:l.jsx("p",{className:"text-xs text-slate-400",children:" Your data is encrypted and never shared"})})]})}function ow({mode:n,onSwitch:e}){const[t,s]=ge.useState(""),[a,o]=ge.useState(""),[u,d]=ge.useState(!1),[f,m]=ge.useState(null),[x,_]=ge.useState(!1),[S,y]=ge.useState(null),[E,L]=ge.useState(!1),T=async A=>{A.preventDefault(),d(!0),m(null);try{try{console.log("[auth] handleSubmit start:",{mode:n,emailPreview:t.replace(/(.).+(@.+)/,"$1***$2")})}catch{}if(n==="signup"){const{data:Y,error:B}=await rt.auth.signUp({email:t,password:a});try{console.log("[auth] signUp result:",{hasUser:!!Y?.user,hasSession:!!Y?.session,error:B||null})}catch{}if(B)throw B;y(t)}else{const{data:Y,error:B}=await rt.auth.signInWithPassword({email:t,password:a});try{console.log("[auth] signInWithPassword result:",{hasUser:!!Y?.user,hasSession:!!Y?.session,error:B||null})}catch{}if(B)throw B;try{const{data:H}=await rt.auth.getSession();console.log("[auth] post-login getSession():",{hasSession:!!H?.session,userId:H?.session?.user?.id||null});const ue=typeof window<"u"?window.localStorage?.getItem("pch.auth"):null;console.log("[auth] localStorage pch.auth present:",!!ue)}catch{}}}catch(Y){m(Y?.message||"Authentication failed")}finally{d(!1)}};return E&&n==="login"?l.jsx(tw,{onBack:()=>L(!1)}):l.jsxs("form",{onSubmit:T,className:"space-y-4",children:[S&&l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:[l.jsx("div",{className:"font-medium",children:"Account created!"}),l.jsxs("div",{className:"text-[13px] mt-1",children:["Please check your email at ",l.jsx("span",{className:"font-mono",children:S})," to verify your account. You won't be able to log in until you confirm your email address."]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-email",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Email"}),l.jsx("input",{id:"auth-email",type:"email",value:t,onChange:A=>s(A.target.value),placeholder:n==="signup"?"Enter your email to get started":"Enter your email",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-password",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{id:"auth-password",type:x?"text":"password",value:a,onChange:A=>o(A.target.value),placeholder:n==="signup"?"Create a password (6+ characters)":"Enter your password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 pr-10 text-sm",required:!0}),l.jsx("button",{type:"button",onClick:()=>_(A=>!A),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400","aria-label":x?"Hide password":"Show password",title:x?"Hide password":"Show password",children:x?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a21.87 21.87 0 0 1 5.06-7.94"}),l.jsx("path",{d:"M10.58 10.58a2 2 0 1 0 2.83 2.83"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 4.12A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8a21.87 21.87 0 0 1-2.16 3.19"})]}):l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),n==="login"&&l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"button",onClick:()=>L(!0),className:"text-xs text-emerald-600 hover:text-emerald-700",children:"Forgot password?"})}),f&&l.jsx("p",{className:"text-xs text-rose-600",children:f}),n==="signup"&&l.jsx("p",{className:"text-xs text-center text-slate-500",children:" Your data is encrypted and never shared"}),l.jsx("button",{type:"submit",disabled:u,className:["w-full inline-flex items-center justify-center rounded-lg text-white px-4 py-2.5 text-sm font-semibold disabled:opacity-60 transition-colors",n==="signup"?"bg-teal-600 hover:bg-teal-700":"bg-emerald-600 hover:bg-emerald-700"].join(" "),children:u?"Please wait":n==="login"?"Log In":"Sign Up"}),l.jsx("div",{className:"text-center pt-2 border-t border-slate-200",children:l.jsx("p",{className:"text-xs text-slate-600",children:n==="signup"?l.jsxs(l.Fragment,{children:["Already have an account?"," ",l.jsx("button",{type:"button",onClick:()=>e("login"),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Sign in instead "})]}):l.jsxs(l.Fragment,{children:["New here?"," ",l.jsx("button",{type:"button",onClick:()=>e("signup"),className:"text-teal-600 hover:text-teal-700 font-medium",children:"Create an account "})]})})})]})}function lw({userId:n,userEmail:e,onClose:t}){const[s,a]=ge.useState(e||"");return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:o=>o.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-userid",className:"block text-sm font-medium mb-1",children:"User ID"}),l.jsx("input",{id:"settings-userid",type:"text",value:n||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-email",className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{id:"settings-email",type:"email",value:s,onChange:o=>a(o.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]}),l.jsx("button",{onClick:t,className:"mt-6 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium",children:"Close"})]})})}function cw({userId:n,userEmail:e,onClose:t,onDefaultExpenseChange:s,onDefaultPeriodChange:a}){const[o,u]=ge.useState(!1),[d,f]=ge.useState(""),[m,x]=ge.useState(""),[_,S]=ge.useState(""),[y,E]=ge.useState(""),[L,T]=ge.useState(""),[A,Y]=ge.useState(""),[B,H]=ge.useState(null);ge.useEffect(()=>{n&&(async()=>{u(!0);try{const{data:de,error:Z}=await rt.from("profiles").select("*").eq("id",n).single();if(Z)throw Z;de&&(f(de.full_name||""),x(de.phone?sw(de.phone):""),S(de.address||""),E(de.city||""),T(de.state||""),Y(de.zip||""),H(de.signature||null))}catch(de){console.error("[settings load] error",de)}finally{u(!1)}})()},[n]);const ue=async()=>{if(n){u(!0);try{const de=m1(m),{error:Z}=await rt.from("profiles").upsert({id:n,email:e||"",full_name:d,phone:de||null,address:_||null,city:y||null,state:L||null,zip:A||null});if(Z)throw Z;alert("Profile saved successfully!"),t()}catch(de){console.error("[save profile] error",de),alert("Error saving profile")}finally{u(!1)}}};return l.jsxs("section",{className:"mx-auto max-w-3xl mt-6 pb-12",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),l.jsx("button",{type:"button",onClick:t,className:"text-sm text-slate-600 dark:text-slate-300",children:"Close"})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Profile Information"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Manage your personal information"}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Email"}),l.jsx("input",{value:e||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:d,onChange:de=>f(de.target.value),placeholder:"John Smith",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Street Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:_,onChange:de=>S(de.target.value),placeholder:"123 Main St",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[l.jsxs("div",{className:"col-span-6",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:y,onChange:de=>E(de.target.value),placeholder:"San Francisco",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["State ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:L,onChange:de=>T(de.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm uppercase"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["ZIP ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:A,onChange:de=>Y(de.target.value),placeholder:"94105",maxLength:10,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:m,onChange:de=>x(g1(de.target.value,m)),placeholder:"(123) 456-7890",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Q5,{userId:n,initialSignature:B,onSave:de=>H(de)})}),l.jsxs("div",{className:"mt-4 sticky bottom-4 bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-lg",children:[l.jsx("button",{type:"button",onClick:ue,disabled:o,className:"w-full inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 text-sm font-medium disabled:opacity-60 transition-colors",children:o?"Saving...":"Save Profile"}),l.jsxs("p",{className:"mt-2 text-xs text-center text-slate-500",children:[l.jsx("span",{className:"text-red-500",children:"*"})," Required fields for claim submission"]})]})]})}function uw({userId:n,onClose:e,onSave:t}){const[s,a]=ge.useState(""),[o,u]=ge.useState(!1),[d,f]=ge.useState(!1),[m,x]=ge.useState(null),_=async()=>{if(!(!n||!s.trim()||!o)){f(!0),x(null);try{const S=m1(s);if(!S)throw new Error("Invalid phone number");const{error:y}=await rt.from("profiles").update({phone:S,sms_opt_in:!0}).eq("id",n);if(y)throw y;let E=null;try{E=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}const{error:L}=await rt.from("sms_consent").insert({user_id:n,phone_number:S,consented:!0,consent_text:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support.",ip_address:E});L&&console.error("[SmsIntroModal] Failed to save SMS consent:",L),t(S)}catch(S){x(S?.message||"Failed to save phone number")}finally{f(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:S=>S.stopPropagation(),children:[m&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:m}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Never forget a dose"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Get a friendly text when it's medication time"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Phone Number"}),l.jsx("input",{type:"tel",value:s,onChange:S=>a(g1(S.target.value,s)),placeholder:"(555) 123-4567",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o,onChange:S=>u(S.target.checked),className:"mt-0.5 w-4 h-4 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support."})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors text-sm",children:"Skip for now"}),l.jsx("button",{type:"button",disabled:!s.trim()||!o||d,onClick:_,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-4 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200 text-sm font-medium",children:d?"Saving":"Enable Reminders"})]})]})})}i2.createRoot(document.getElementById("root")).render(l.jsx(Mf.StrictMode,{children:l.jsx(iw,{})}));export{xr as _,dw as c,_u as g};
