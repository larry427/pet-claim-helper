(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Y1(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var Ph={exports:{}},cu={},Ch={exports:{}},Qt={};var J0;function K1(){if(J0)return Qt;J0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.iterator;function S(Y){return Y===null||typeof Y!="object"?null:(Y=w&&Y[w]||Y["@@iterator"],typeof Y=="function"?Y:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function L(Y,P,F){this.props=Y,this.context=P,this.refs=C,this.updater=F||y}L.prototype.isReactComponent={},L.prototype.setState=function(Y,P){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,P,"setState")},L.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function A(){}A.prototype=L.prototype;function U(Y,P,F){this.props=Y,this.context=P,this.refs=C,this.updater=F||y}var R=U.prototype=new A;R.constructor=U,E(R,L.prototype),R.isPureReactComponent=!0;var z=Array.isArray,he=Object.prototype.hasOwnProperty,le={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function $(Y,P,F){var V,ie={},ue=null,me=null;if(P!=null)for(V in P.ref!==void 0&&(me=P.ref),P.key!==void 0&&(ue=""+P.key),P)he.call(P,V)&&!ee.hasOwnProperty(V)&&(ie[V]=P[V]);var ye=arguments.length-2;if(ye===1)ie.children=F;else if(1<ye){for(var xe=Array(ye),ge=0;ge<ye;ge++)xe[ge]=arguments[ge+2];ie.children=xe}if(Y&&Y.defaultProps)for(V in ye=Y.defaultProps,ye)ie[V]===void 0&&(ie[V]=ye[V]);return{$$typeof:n,type:Y,key:ue,ref:me,props:ie,_owner:le.current}}function J(Y,P){return{$$typeof:n,type:Y.type,key:P,ref:Y.ref,props:Y.props,_owner:Y._owner}}function ne(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function O(Y){var P={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(F){return P[F]})}var T=/\/+/g;function te(Y,P){return typeof Y=="object"&&Y!==null&&Y.key!=null?O(""+Y.key):P.toString(36)}function H(Y,P,F,V,ie){var ue=typeof Y;(ue==="undefined"||ue==="boolean")&&(Y=null);var me=!1;if(Y===null)me=!0;else switch(ue){case"string":case"number":me=!0;break;case"object":switch(Y.$$typeof){case n:case e:me=!0}}if(me)return me=Y,ie=ie(me),Y=V===""?"."+te(me,0):V,z(ie)?(F="",Y!=null&&(F=Y.replace(T,"$&/")+"/"),H(ie,P,F,"",function(ge){return ge})):ie!=null&&(ne(ie)&&(ie=J(ie,F+(!ie.key||me&&me.key===ie.key?"":(""+ie.key).replace(T,"$&/")+"/")+Y)),P.push(ie)),1;if(me=0,V=V===""?".":V+":",z(Y))for(var ye=0;ye<Y.length;ye++){ue=Y[ye];var xe=V+te(ue,ye);me+=H(ue,P,F,xe,ie)}else if(xe=S(Y),typeof xe=="function")for(Y=xe.call(Y),ye=0;!(ue=Y.next()).done;)ue=ue.value,xe=V+te(ue,ye++),me+=H(ue,P,F,xe,ie);else if(ue==="object")throw P=String(Y),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return me}function Q(Y,P,F){if(Y==null)return Y;var V=[],ie=0;return H(Y,V,"","",function(ue){return P.call(F,ue,ie++)}),V}function X(Y){if(Y._status===-1){var P=Y._result;P=P(),P.then(function(F){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=F)},function(F){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=F)}),Y._status===-1&&(Y._status=0,Y._result=P)}if(Y._status===1)return Y._result.default;throw Y._result}var pe={current:null},G={transition:null},ce={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:G,ReactCurrentOwner:le};function ve(){throw Error("act(...) is not supported in production builds of React.")}return Qt.Children={map:Q,forEach:function(Y,P,F){Q(Y,function(){P.apply(this,arguments)},F)},count:function(Y){var P=0;return Q(Y,function(){P++}),P},toArray:function(Y){return Q(Y,function(P){return P})||[]},only:function(Y){if(!ne(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Qt.Component=L,Qt.Fragment=t,Qt.Profiler=a,Qt.PureComponent=U,Qt.StrictMode=s,Qt.Suspense=p,Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Qt.act=ve,Qt.cloneElement=function(Y,P,F){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var V=E({},Y.props),ie=Y.key,ue=Y.ref,me=Y._owner;if(P!=null){if(P.ref!==void 0&&(ue=P.ref,me=le.current),P.key!==void 0&&(ie=""+P.key),Y.type&&Y.type.defaultProps)var ye=Y.type.defaultProps;for(xe in P)he.call(P,xe)&&!ee.hasOwnProperty(xe)&&(V[xe]=P[xe]===void 0&&ye!==void 0?ye[xe]:P[xe])}var xe=arguments.length-2;if(xe===1)V.children=F;else if(1<xe){ye=Array(xe);for(var ge=0;ge<xe;ge++)ye[ge]=arguments[ge+2];V.children=ye}return{$$typeof:n,type:Y.type,key:ie,ref:ue,props:V,_owner:me}},Qt.createContext=function(Y){return Y={$$typeof:u,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},Qt.createElement=$,Qt.createFactory=function(Y){var P=$.bind(null,Y);return P.type=Y,P},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(Y){return{$$typeof:d,render:Y}},Qt.isValidElement=ne,Qt.lazy=function(Y){return{$$typeof:x,_payload:{_status:-1,_result:Y},_init:X}},Qt.memo=function(Y,P){return{$$typeof:g,type:Y,compare:P===void 0?null:P}},Qt.startTransition=function(Y){var P=G.transition;G.transition={};try{Y()}finally{G.transition=P}},Qt.unstable_act=ve,Qt.useCallback=function(Y,P){return pe.current.useCallback(Y,P)},Qt.useContext=function(Y){return pe.current.useContext(Y)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(Y){return pe.current.useDeferredValue(Y)},Qt.useEffect=function(Y,P){return pe.current.useEffect(Y,P)},Qt.useId=function(){return pe.current.useId()},Qt.useImperativeHandle=function(Y,P,F){return pe.current.useImperativeHandle(Y,P,F)},Qt.useInsertionEffect=function(Y,P){return pe.current.useInsertionEffect(Y,P)},Qt.useLayoutEffect=function(Y,P){return pe.current.useLayoutEffect(Y,P)},Qt.useMemo=function(Y,P){return pe.current.useMemo(Y,P)},Qt.useReducer=function(Y,P,F){return pe.current.useReducer(Y,P,F)},Qt.useRef=function(Y){return pe.current.useRef(Y)},Qt.useState=function(Y){return pe.current.useState(Y)},Qt.useSyncExternalStore=function(Y,P,F){return pe.current.useSyncExternalStore(Y,P,F)},Qt.useTransition=function(){return pe.current.useTransition()},Qt.version="18.3.1",Qt}var X0;function Rf(){return X0||(X0=1,Ch.exports=K1()),Ch.exports}var Q0;function J1(){if(Q0)return cu;Q0=1;var n=Rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,g){var x,w={},S=null,y=null;g!==void 0&&(S=""+g),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(y=p.ref);for(x in p)s.call(p,x)&&!o.hasOwnProperty(x)&&(w[x]=p[x]);if(d&&d.defaultProps)for(x in p=d.defaultProps,p)w[x]===void 0&&(w[x]=p[x]);return{$$typeof:e,type:d,key:S,ref:y,props:w,_owner:a.current}}return cu.Fragment=t,cu.jsx=u,cu.jsxs=u,cu}var Z0;function X1(){return Z0||(Z0=1,Ph.exports=J1()),Ph.exports}var l=X1(),fe=Rf();const Md=Nu(fe);var od={},Eh={exports:{}},ii={},Lh={exports:{}},Dh={};var ep;function Q1(){return ep||(ep=1,(function(n){function e(G,ce){var ve=G.length;G.push(ce);e:for(;0<ve;){var Y=ve-1>>>1,P=G[Y];if(0<a(P,ce))G[Y]=ce,G[ve]=P,ve=Y;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ce=G[0],ve=G.pop();if(ve!==ce){G[0]=ve;e:for(var Y=0,P=G.length,F=P>>>1;Y<F;){var V=2*(Y+1)-1,ie=G[V],ue=V+1,me=G[ue];if(0>a(ie,ve))ue<P&&0>a(me,ie)?(G[Y]=me,G[ue]=ve,Y=ue):(G[Y]=ie,G[V]=ve,Y=V);else if(ue<P&&0>a(me,ve))G[Y]=me,G[ue]=ve,Y=ue;else break e}}return ce}function a(G,ce){var ve=G.sortIndex-ce.sortIndex;return ve!==0?ve:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],g=[],x=1,w=null,S=3,y=!1,E=!1,C=!1,L=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(G){for(var ce=t(g);ce!==null;){if(ce.callback===null)s(g);else if(ce.startTime<=G)s(g),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(g)}}function z(G){if(C=!1,R(G),!E)if(t(p)!==null)E=!0,X(he);else{var ce=t(g);ce!==null&&pe(z,ce.startTime-G)}}function he(G,ce){E=!1,C&&(C=!1,A($),$=-1),y=!0;var ve=S;try{for(R(ce),w=t(p);w!==null&&(!(w.expirationTime>ce)||G&&!O());){var Y=w.callback;if(typeof Y=="function"){w.callback=null,S=w.priorityLevel;var P=Y(w.expirationTime<=ce);ce=n.unstable_now(),typeof P=="function"?w.callback=P:w===t(p)&&s(p),R(ce)}else s(p);w=t(p)}if(w!==null)var F=!0;else{var V=t(g);V!==null&&pe(z,V.startTime-ce),F=!1}return F}finally{w=null,S=ve,y=!1}}var le=!1,ee=null,$=-1,J=5,ne=-1;function O(){return!(n.unstable_now()-ne<J)}function T(){if(ee!==null){var G=n.unstable_now();ne=G;var ce=!0;try{ce=ee(!0,G)}finally{ce?te():(le=!1,ee=null)}}else le=!1}var te;if(typeof U=="function")te=function(){U(T)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=T,te=function(){Q.postMessage(null)}}else te=function(){L(T,0)};function X(G){ee=G,le||(le=!0,te())}function pe(G,ce){$=L(function(){G(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,X(he))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(G){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var ve=S;S=ce;try{return G()}finally{S=ve}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ve=S;S=G;try{return ce()}finally{S=ve}},n.unstable_scheduleCallback=function(G,ce,ve){var Y=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Y+ve:Y):ve=Y,G){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ve+P,G={id:x++,callback:ce,priorityLevel:G,startTime:ve,expirationTime:P,sortIndex:-1},ve>Y?(G.sortIndex=ve,e(g,G),t(p)===null&&G===t(g)&&(C?(A($),$=-1):C=!0,pe(z,ve-Y))):(G.sortIndex=P,e(p,G),E||y||(E=!0,X(he))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var ce=S;return function(){var ve=S;S=ce;try{return G.apply(this,arguments)}finally{S=ve}}}})(Dh)),Dh}var tp;function Z1(){return tp||(tp=1,Lh.exports=Q1()),Lh.exports}var rp;function e2(){if(rp)return ii;rp=1;var n=Rf(),e=Z1();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(a[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},w={};function S(r){return p.call(w,r)?!0:p.call(x,r)?!1:g.test(r)?w[r]=!0:(x[r]=!0,!1)}function y(r,i,c,m){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function E(r,i,c,m){if(i===null||typeof i>"u"||y(r,i,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(r,i,c,m,b,k,B){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=r,this.type=i,this.sanitizeURL=k,this.removeEmptyString=B}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new C(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function U(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(A,U);L[i]=new C(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(A,U);L[i]=new C(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(A,U);L[i]=new C(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function R(r,i,c,m){var b=L.hasOwnProperty(i)?L[i]:null;(b!==null?b.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(E(i,c,b,m)&&(c=null),m||b===null?S(i)&&(c===null?r.removeAttribute(i):r.setAttribute(i,""+c)):b.mustUseProperty?r[b.propertyName]=c===null?b.type===3?!1:"":c:(i=b.attributeName,m=b.attributeNamespace,c===null?r.removeAttribute(i):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,m?r.setAttributeNS(m,i,c):r.setAttribute(i,c))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),le=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),O=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),G=Symbol.iterator;function ce(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var ve=Object.assign,Y;function P(r){if(Y===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);Y=i&&i[1]||""}return`
`+Y+r}var F=!1;function V(r,i){if(!r||F)return"";F=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Le){var m=Le}Reflect.construct(r,[],i)}else{try{i.call()}catch(Le){m=Le}r.call(i.prototype)}else{try{throw Error()}catch(Le){m=Le}r()}}catch(Le){if(Le&&m&&typeof Le.stack=="string"){for(var b=Le.stack.split(`
`),k=m.stack.split(`
`),B=b.length-1,de=k.length-1;1<=B&&0<=de&&b[B]!==k[de];)de--;for(;1<=B&&0<=de;B--,de--)if(b[B]!==k[de]){if(B!==1||de!==1)do if(B--,de--,0>de||b[B]!==k[de]){var _e=`
`+b[B].replace(" at new "," at ");return r.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",r.displayName)),_e}while(1<=B&&0<=de);break}}}finally{F=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?P(r):""}function ie(r){switch(r.tag){case 5:return P(r.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return r=V(r.type,!1),r;case 11:return r=V(r.type.render,!1),r;case 1:return r=V(r.type,!0),r;default:return""}}function ue(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ee:return"Fragment";case le:return"Portal";case J:return"Profiler";case $:return"StrictMode";case te:return"Suspense";case H:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case ne:return(r._context.displayName||"Context")+".Provider";case T:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Q:return i=r.displayName||null,i!==null?i:ue(r.type)||"Memo";case X:i=r._payload,r=r._init;try{return ue(r(i))}catch{}}return null}function me(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(i);case 8:return i===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ye(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ge(r){var i=xe(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),m=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,k=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return b.call(this)},set:function(B){m=""+B,k.call(this,B)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(B){m=""+B},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ie(r){r._valueTracker||(r._valueTracker=ge(r))}function Re(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return r&&(m=xe(r)?r.checked?"true":"false":r.value),r=m,r!==c?(i.setValue(r),!0):!1}function We(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ve(r,i){var c=i.checked;return ve({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function re(r,i){var c=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;c=ye(i.value!=null?i.value:c),r._wrapperState={initialChecked:m,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ye(r,i){i=i.checked,i!=null&&R(r,"checked",i,!1)}function bt(r,i){Ye(r,i);var c=ye(i.value),m=i.type;if(c!=null)m==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ze(r,i.type,c):i.hasOwnProperty("defaultValue")&&ze(r,i.type,ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ot(r,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,c||i===r.value||(r.value=i),r.defaultValue=i}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function ze(r,i,c){(i!=="number"||We(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var st=Array.isArray;function et(r,i,c,m){if(r=r.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<r.length;c++)b=i.hasOwnProperty("$"+r[c].value),r[c].selected!==b&&(r[c].selected=b),b&&m&&(r[c].defaultSelected=!0)}else{for(c=""+ye(c),i=null,b=0;b<r.length;b++){if(r[b].value===c){r[b].selected=!0,m&&(r[b].defaultSelected=!0);return}i!==null||r[b].disabled||(i=r[b])}i!==null&&(i.selected=!0)}}function yt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ve({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function vt(r,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(t(92));if(st(c)){if(1<c.length)throw Error(t(93));c=c[0]}i=c}i==null&&(i=""),c=i}r._wrapperState={initialValue:ye(c)}}function Ut(r,i){var c=ye(i.value),m=ye(i.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),i.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),m!=null&&(r.defaultValue=""+m)}function wt(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function It(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ht(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?It(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Vt,lt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,m,b){MSApp.execUnsafeLocalFunction(function(){return r(i,c,m,b)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Vt=Vt||document.createElement("div"),Vt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Vt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function mt(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ar=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(r){Ar.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),it[i]=it[r]})});function Kt(r,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||it.hasOwnProperty(r)&&it[r]?(""+i).trim():i+"px"}function Et(r,i){r=r.style;for(var c in i)if(i.hasOwnProperty(c)){var m=c.indexOf("--")===0,b=Kt(c,i[c],m);c==="float"&&(c="cssFloat"),m?r.setProperty(c,b):r[c]=b}}var Lt=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(r,i){if(i){if(Lt[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ht(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function kt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ft=null,cr=null,Bt=null;function St(r){if(r=Do(r)){if(typeof Ft!="function")throw Error(t(280));var i=r.stateNode;i&&(i=vl(i),Ft(r.stateNode,r.type,i))}}function nr(r){cr?Bt?Bt.push(r):Bt=[r]:cr=r}function Ji(){if(cr){var r=cr,i=Bt;if(Bt=cr=null,St(r),i)for(r=0;r<i.length;r++)St(i[r])}}function tr(r,i){return r(i)}function Fn(){}var Jn=!1;function Nt(r,i,c){if(Jn)return r(i,c);Jn=!0;try{return tr(r,i,c)}finally{Jn=!1,(cr!==null||Bt!==null)&&(Fn(),Ji())}}function Rn(r,i){var c=r.stateNode;if(c===null)return null;var m=vl(c);if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(t(231,i,typeof c));return c}var ds=!1;if(d)try{var hn={};Object.defineProperty(hn,"passive",{get:function(){ds=!0}}),window.addEventListener("test",hn,hn),window.removeEventListener("test",hn,hn)}catch{ds=!1}function Xn(r,i,c,m,b,k,B,de,_e){var Le=Array.prototype.slice.call(arguments,3);try{i.apply(c,Le)}catch(Ge){this.onError(Ge)}}var hr=!1,Tr=null,Ur=!1,zs=null,Qn={onError:function(r){hr=!0,Tr=r}};function An(r,i,c,m,b,k,B,de,_e){hr=!1,Tr=null,Xn.apply(Qn,arguments)}function Zn(r,i,c,m,b,k,B,de,_e){if(An.apply(this,arguments),hr){if(hr){var Le=Tr;hr=!1,Tr=null}else throw Error(t(198));Ur||(Ur=!0,zs=Le)}}function Hr(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function hs(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Pn(r){if(Hr(r)!==r)throw Error(t(188))}function Cn(r){var i=r.alternate;if(!i){if(i=Hr(r),i===null)throw Error(t(188));return i!==r?null:r}for(var c=r,m=i;;){var b=c.return;if(b===null)break;var k=b.alternate;if(k===null){if(m=b.return,m!==null){c=m;continue}break}if(b.child===k.child){for(k=b.child;k;){if(k===c)return Pn(b),r;if(k===m)return Pn(b),i;k=k.sibling}throw Error(t(188))}if(c.return!==m.return)c=b,m=k;else{for(var B=!1,de=b.child;de;){if(de===c){B=!0,c=b,m=k;break}if(de===m){B=!0,m=b,c=k;break}de=de.sibling}if(!B){for(de=k.child;de;){if(de===c){B=!0,c=k,m=b;break}if(de===m){B=!0,m=k,c=b;break}de=de.sibling}if(!B)throw Error(t(189))}}if(c.alternate!==m)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?r:i}function En(r){return r=Cn(r),r!==null?$s(r):null}function $s(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=$s(r);if(i!==null)return i;r=r.sibling}return null}var li=e.unstable_scheduleCallback,ci=e.unstable_cancelCallback,Ei=e.unstable_shouldYield,nl=e.unstable_requestPaint,fr=e.unstable_now,sl=e.unstable_getCurrentPriorityLevel,Xi=e.unstable_ImmediatePriority,Pr=e.unstable_UserBlockingPriority,Ws=e.unstable_NormalPriority,xo=e.unstable_LowPriority,ui=e.unstable_IdlePriority,Li=null,es=null;function di(r){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Li,r,void 0,(r.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:qr,Ps=Math.log,yo=Math.LN2;function qr(r){return r>>>=0,r===0?32:31-(Ps(r)/yo|0)|0}var Hs=64,Mn=4194304;function Vs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Di(r,i){var c=r.pendingLanes;if(c===0)return 0;var m=0,b=r.suspendedLanes,k=r.pingedLanes,B=c&268435455;if(B!==0){var de=B&~b;de!==0?m=Vs(de):(k&=B,k!==0&&(m=Vs(k)))}else B=c&~b,B!==0?m=Vs(B):k!==0&&(m=Vs(k));if(m===0)return 0;if(i!==0&&i!==m&&(i&b)===0&&(b=m&-m,k=i&-i,b>=k||b===16&&(k&4194240)!==0))return i;if((m&4)!==0&&(m|=c&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)c=31-Br(i),b=1<<c,m|=r[c],i&=~b;return m}function Un(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(r,i){for(var c=r.suspendedLanes,m=r.pingedLanes,b=r.expirationTimes,k=r.pendingLanes;0<k;){var B=31-Br(k),de=1<<B,_e=b[B];_e===-1?((de&c)===0||(de&m)!==0)&&(b[B]=Un(de,i)):_e<=i&&(r.expiredLanes|=de),k&=~de}}function Cs(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Va(){var r=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),r}function Ti(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function Oi(r,i,c){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Br(i),r[i]=c}function Es(r,i){var c=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<c;){var b=31-Br(c),k=1<<b;i[b]=0,m[b]=-1,r[b]=-1,c&=~k}}function Ii(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var m=31-Br(c),b=1<<m;b&i|r[m]&i&&(r[m]|=i),c&=~b}}var Jt=0;function Fi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var hi,Qi,Ga,Ya,Ls,Sa=!1,bn=[],ts=null,Bn=null,fs=null,Zi=new Map,jt=new Map,Gs=[],il="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bo(r,i){switch(r){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":Zi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(i.pointerId)}}function rs(r,i,c,m,b,k){return r===null||r.nativeEvent!==k?(r={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:k,targetContainers:[b]},i!==null&&(i=Do(i),i!==null&&Qi(i)),r):(r.eventSystemFlags|=m,i=r.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),r)}function Ys(r,i,c,m,b){switch(i){case"focusin":return ts=rs(ts,r,i,c,m,b),!0;case"dragenter":return Bn=rs(Bn,r,i,c,m,b),!0;case"mouseover":return fs=rs(fs,r,i,c,m,b),!0;case"pointerover":var k=b.pointerId;return Zi.set(k,rs(Zi.get(k)||null,r,i,c,m,b)),!0;case"gotpointercapture":return k=b.pointerId,jt.set(k,rs(jt.get(k)||null,r,i,c,m,b)),!0}return!1}function wo(r){var i=Fa(r.target);if(i!==null){var c=Hr(i);if(c!==null){if(i=c.tag,i===13){if(i=hs(c),i!==null){r.blockedOn=i,Ls(r.priority,function(){Ga(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ja(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=sa(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var m=new c.constructor(c.type,c);dr=m,c.target.dispatchEvent(m),dr=null}else return i=Do(c),i!==null&&Qi(i),r.blockedOn=c,!1;i.shift()}return!0}function ea(r,i,c){ja(r)&&c.delete(i)}function Ka(){Sa=!1,ts!==null&&ja(ts)&&(ts=null),Bn!==null&&ja(Bn)&&(Bn=null),fs!==null&&ja(fs)&&(fs=null),Zi.forEach(ea),jt.forEach(ea)}function Ds(r,i){r.blockedOn===i&&(r.blockedOn=null,Sa||(Sa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ka)))}function ta(r){function i(b){return Ds(b,r)}if(0<bn.length){Ds(bn[0],r);for(var c=1;c<bn.length;c++){var m=bn[c];m.blockedOn===r&&(m.blockedOn=null)}}for(ts!==null&&Ds(ts,r),Bn!==null&&Ds(Bn,r),fs!==null&&Ds(fs,r),Zi.forEach(i),jt.forEach(i),c=0;c<Gs.length;c++)m=Gs[c],m.blockedOn===r&&(m.blockedOn=null);for(;0<Gs.length&&(c=Gs[0],c.blockedOn===null);)wo(c),c.blockedOn===null&&Gs.shift()}var qn=z.ReactCurrentBatchConfig,Aa=!0;function ra(r,i,c,m){var b=Jt,k=qn.transition;qn.transition=null;try{Jt=1,na(r,i,c,m)}finally{Jt=b,qn.transition=k}}function Pa(r,i,c,m){var b=Jt,k=qn.transition;qn.transition=null;try{Jt=4,na(r,i,c,m)}finally{Jt=b,qn.transition=k}}function na(r,i,c,m){if(Aa){var b=sa(r,i,c,m);if(b===null)pl(r,i,m,ps,c),bo(r,m);else if(Ys(b,r,i,c,m))m.stopPropagation();else if(bo(r,m),i&4&&-1<il.indexOf(r)){for(;b!==null;){var k=Do(b);if(k!==null&&hi(k),k=sa(r,i,c,m),k===null&&pl(r,i,m,ps,c),k===b)break;b=k}b!==null&&m.stopPropagation()}else pl(r,i,m,null,c)}}var ps=null;function sa(r,i,c,m){if(ps=null,r=kt(m),r=Fa(r),r!==null)if(i=Hr(r),i===null)r=null;else if(c=i.tag,c===13){if(r=hs(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return ps=r,null}function Ca(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sl()){case Xi:return 1;case Pr:return 4;case Ws:case xo:return 16;case ui:return 536870912;default:return 16}default:return 16}}var Ts=null,fi=null,pi=null;function mi(){if(pi)return pi;var r,i=fi,c=i.length,m,b="value"in Ts?Ts.value:Ts.textContent,k=b.length;for(r=0;r<c&&i[r]===b[r];r++);var B=c-r;for(m=1;m<=B&&i[c-m]===b[k-m];m++);return pi=b.slice(r,1<m?1-m:void 0)}function gi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ms(){return!0}function Ks(){return!1}function Or(r){function i(c,m,b,k,B){this._reactName=c,this._targetInst=b,this.type=m,this.nativeEvent=k,this.target=B,this.currentTarget=null;for(var de in r)r.hasOwnProperty(de)&&(c=r[de],this[de]=c?c(k):k[de]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?ms:Ks,this.isPropagationStopped=Ks,this}return ve(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),i}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Or(ns),h=ve({},ns,{view:0,detail:0}),N=Or(h),D,M,se,be=ve({},h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zt,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==se&&(se&&r.type==="mousemove"?(D=r.screenX-se.screenX,M=r.screenY-se.screenY):M=D=0,se=r),D)},movementY:function(r){return"movementY"in r?r.movementY:M}}),Se=Or(be),Te=ve({},be,{dataTransfer:0}),De=Or(Te),$e=ve({},h,{relatedTarget:0}),qe=Or($e),Xe=ve({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),ft=Or(Xe),Gt=ve({},ns,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Dt=Or(Gt),rr=ve({},ns,{data:0}),wr=Or(rr),Cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ss={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},is={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Js(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=is[r])?!!i[r]:!1}function Zt(){return Js}var Tt=ve({},h,{key:function(r){if(r.key){var i=Cr[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=gi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ss[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zt,charCode:function(r){return r.type==="keypress"?gi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),pr=Or(Tt),zr=ve({},be,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ln=Or(zr),fn=ve({},h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zt}),mr=Or(fn),Xs=ve({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ja=Or(Xs),al=ve({},be,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ol=Or(al),as=[9,13,27,32],vi=d&&"CompositionEvent"in window,Ri=null;d&&"documentMode"in document&&(Ri=document.documentMode);var $l=d&&"TextEvent"in window&&!Ri,Is=d&&(!vi||Ri&&8<Ri&&11>=Ri),Ea=" ",_o=!1;function No(r,i){switch(r){case"keyup":return as.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ia(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qs=!1;function Fs(r,i){switch(r){case"compositionend":return ia(i);case"keypress":return i.which!==32?null:(_o=!0,Ea);case"textInput":return r=i.data,r===Ea&&_o?null:r;default:return null}}function Rs(r,i){if(Qs)return r==="compositionend"||!vi&&No(r,i)?(r=mi(),pi=fi=Ts=null,Qs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Is&&i.locale!=="ko"?null:i.data;default:return null}}var La={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mi(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!La[r.type]:i==="textarea"}function aa(r,i,c,m){nr(m),i=Yl(i,"onChange"),0<i.length&&(c=new Os("onChange","change",null,c,m),r.push({event:c,listeners:i}))}var oa=null,Ui=null;function Zr(r){hl(r,0)}function Xa(r){var i=oo(r);if(Re(i))return r}function Bi(r,i){if(r==="change")return i}var xi=!1;if(d){var Qa;if(d){var Za="oninput"in document;if(!Za){var ko=document.createElement("div");ko.setAttribute("oninput","return;"),Za=typeof ko.oninput=="function"}Qa=Za}else Qa=!1;xi=Qa&&(!document.documentMode||9<document.documentMode)}function So(){oa&&(oa.detachEvent("onpropertychange",la),Ui=oa=null)}function la(r){if(r.propertyName==="value"&&Xa(Ui)){var i=[];aa(i,Ui,r,kt(r)),Nt(Zr,i)}}function Da(r,i,c){r==="focusin"?(So(),oa=i,Ui=c,oa.attachEvent("onpropertychange",la)):r==="focusout"&&So()}function Ta(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Xa(Ui)}function eo(r,i){if(r==="click")return Xa(i)}function Oa(r,i){if(r==="input"||r==="change")return Xa(i)}function to(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Gr=typeof Object.is=="function"?Object.is:to;function gs(r,i){if(Gr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var b=c[m];if(!p.call(i,b)||!Gr(r[b],i[b]))return!1}return!0}function ir(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function vr(r,i){var c=ir(r);r=0;for(var m;c;){if(c.nodeType===3){if(m=r+c.textContent.length,r<=i&&m>=i)return{node:c,offset:i-r};r=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ir(c)}}function Yr(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Yr(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function an(){for(var r=window,i=We();i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=We(r.document)}return i}function yi(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function ll(r){var i=an(),c=r.focusedElem,m=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&Yr(c.ownerDocument.documentElement,c)){if(m!==null&&yi(c)){if(i=m.start,r=m.end,r===void 0&&(r=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(r,c.value.length);else if(r=(i=c.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var b=c.textContent.length,k=Math.min(m.start,b);m=m.end===void 0?k:Math.min(m.end,b),!r.extend&&k>m&&(b=m,m=k,k=b),b=vr(c,k);var B=vr(c,m);b&&B&&(r.rangeCount!==1||r.anchorNode!==b.node||r.anchorOffset!==b.offset||r.focusNode!==B.node||r.focusOffset!==B.offset)&&(i=i.createRange(),i.setStart(b.node,b.offset),r.removeAllRanges(),k>m?(r.addRange(i),r.extend(B.node,B.offset)):(i.setEnd(B.node,B.offset),r.addRange(i)))}}for(i=[],r=c;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)r=i[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var jo=d&&"documentMode"in document&&11>=document.documentMode,ca=null,Wl=null,Ao=null,Hl=!1;function Uc(r,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Hl||ca==null||ca!==We(m)||(m=ca,"selectionStart"in m&&yi(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ao&&gs(Ao,m)||(Ao=m,m=Yl(Wl,"onSelect"),0<m.length&&(i=new Os("onSelect","select",null,i,c),r.push({event:i,listeners:m}),i.target=ca)))}function cl(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var ro={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},no={},Bc={};d&&(Bc=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function ul(r){if(no[r])return no[r];if(!ro[r])return r;var i=ro[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Bc)return no[r]=i[c];return r}var qc=ul("animationend"),zc=ul("animationiteration"),$c=ul("animationstart"),Wc=ul("transitionend"),Hc=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(r,i){Hc.set(r,i),o(i,[r])}for(var Po=0;Po<Vc.length;Po++){var os=Vc[Po],Zs=os.toLowerCase(),Vl=os[0].toUpperCase()+os.slice(1);qi(Zs,"on"+Vl)}qi(qc,"onAnimationEnd"),qi(zc,"onAnimationIteration"),qi($c,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Wc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Au=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function dl(r,i,c){var m=r.type||"unknown-event";r.currentTarget=c,Zn(m,i,void 0,r),r.currentTarget=null}function hl(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var m=r[c],b=m.event;m=m.listeners;e:{var k=void 0;if(i)for(var B=m.length-1;0<=B;B--){var de=m[B],_e=de.instance,Le=de.currentTarget;if(de=de.listener,_e!==k&&b.isPropagationStopped())break e;dl(b,de,Le),k=_e}else for(B=0;B<m.length;B++){if(de=m[B],_e=de.instance,Le=de.currentTarget,de=de.listener,_e!==k&&b.isPropagationStopped())break e;dl(b,de,Le),k=_e}}}if(Ur)throw r=zs,Ur=!1,zs=null,r}function _r(r,i){var c=i[xs];c===void 0&&(c=i[xs]=new Set);var m=r+"__bubble";c.has(m)||(fl(i,r,2,!1),c.add(m))}function Gl(r,i,c){var m=0;i&&(m|=4),fl(c,r,m,i)}var Co="_reactListening"+Math.random().toString(36).slice(2);function so(r){if(!r[Co]){r[Co]=!0,s.forEach(function(c){c!=="selectionchange"&&(Au.has(c)||Gl(c,!1,r),Gl(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Co]||(i[Co]=!0,Gl("selectionchange",!1,i))}}function fl(r,i,c,m){switch(Ca(i)){case 1:var b=ra;break;case 4:b=Pa;break;default:b=na}c=b.bind(null,i,c,r),b=void 0,!ds||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),m?b!==void 0?r.addEventListener(i,c,{capture:!0,passive:b}):r.addEventListener(i,c,!0):b!==void 0?r.addEventListener(i,c,{passive:b}):r.addEventListener(i,c,!1)}function pl(r,i,c,m,b){var k=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var B=m.tag;if(B===3||B===4){var de=m.stateNode.containerInfo;if(de===b||de.nodeType===8&&de.parentNode===b)break;if(B===4)for(B=m.return;B!==null;){var _e=B.tag;if((_e===3||_e===4)&&(_e=B.stateNode.containerInfo,_e===b||_e.nodeType===8&&_e.parentNode===b))return;B=B.return}for(;de!==null;){if(B=Fa(de),B===null)return;if(_e=B.tag,_e===5||_e===6){m=k=B;continue e}de=de.parentNode}}m=m.return}Nt(function(){var Le=k,Ge=kt(c),Ke=[];e:{var He=Hc.get(r);if(He!==void 0){var tt=Os,ut=r;switch(r){case"keypress":if(gi(c)===0)break e;case"keydown":case"keyup":tt=pr;break;case"focusin":ut="focus",tt=qe;break;case"focusout":ut="blur",tt=qe;break;case"beforeblur":case"afterblur":tt=qe;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Se;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=De;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=mr;break;case qc:case zc:case $c:tt=ft;break;case Wc:tt=Ja;break;case"scroll":tt=N;break;case"wheel":tt=ol;break;case"copy":case"cut":case"paste":tt=Dt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Ln}var pt=(i&4)!==0,gn=!pt&&r==="scroll",Pe=pt?He!==null?He+"Capture":null:He;pt=[];for(var ke=Le,Ee;ke!==null;){Ee=ke;var Je=Ee.stateNode;if(Ee.tag===5&&Je!==null&&(Ee=Je,Pe!==null&&(Je=Rn(ke,Pe),Je!=null&&pt.push(ml(ke,Je,Ee)))),gn)break;ke=ke.return}0<pt.length&&(He=new tt(He,ut,null,c,Ge),Ke.push({event:He,listeners:pt}))}}if((i&7)===0){e:{if(He=r==="mouseover"||r==="pointerover",tt=r==="mouseout"||r==="pointerout",He&&c!==dr&&(ut=c.relatedTarget||c.fromElement)&&(Fa(ut)||ut[zn]))break e;if((tt||He)&&(He=Ge.window===Ge?Ge:(He=Ge.ownerDocument)?He.defaultView||He.parentWindow:window,tt?(ut=c.relatedTarget||c.toElement,tt=Le,ut=ut?Fa(ut):null,ut!==null&&(gn=Hr(ut),ut!==gn||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(tt=null,ut=Le),tt!==ut)){if(pt=Se,Je="onMouseLeave",Pe="onMouseEnter",ke="mouse",(r==="pointerout"||r==="pointerover")&&(pt=Ln,Je="onPointerLeave",Pe="onPointerEnter",ke="pointer"),gn=tt==null?He:oo(tt),Ee=ut==null?He:oo(ut),He=new pt(Je,ke+"leave",tt,c,Ge),He.target=gn,He.relatedTarget=Ee,Je=null,Fa(Ge)===Le&&(pt=new pt(Pe,ke+"enter",ut,c,Ge),pt.target=Ee,pt.relatedTarget=gn,Je=pt),gn=Je,tt&&ut)t:{for(pt=tt,Pe=ut,ke=0,Ee=pt;Ee;Ee=io(Ee))ke++;for(Ee=0,Je=Pe;Je;Je=io(Je))Ee++;for(;0<ke-Ee;)pt=io(pt),ke--;for(;0<Ee-ke;)Pe=io(Pe),Ee--;for(;ke--;){if(pt===Pe||Pe!==null&&pt===Pe.alternate)break t;pt=io(pt),Pe=io(Pe)}pt=null}else pt=null;tt!==null&&Pu(Ke,He,tt,pt,!1),ut!==null&&gn!==null&&Pu(Ke,gn,ut,pt,!0)}}e:{if(He=Le?oo(Le):window,tt=He.nodeName&&He.nodeName.toLowerCase(),tt==="select"||tt==="input"&&He.type==="file")var xt=Bi;else if(Mi(He))if(xi)xt=Oa;else{xt=Ta;var At=Da}else(tt=He.nodeName)&&tt.toLowerCase()==="input"&&(He.type==="checkbox"||He.type==="radio")&&(xt=eo);if(xt&&(xt=xt(r,Le))){aa(Ke,xt,c,Ge);break e}At&&At(r,He,Le),r==="focusout"&&(At=He._wrapperState)&&At.controlled&&He.type==="number"&&ze(He,"number",He.value)}switch(At=Le?oo(Le):window,r){case"focusin":(Mi(At)||At.contentEditable==="true")&&(ca=At,Wl=Le,Ao=null);break;case"focusout":Ao=Wl=ca=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,Uc(Ke,c,Ge);break;case"selectionchange":if(jo)break;case"keydown":case"keyup":Uc(Ke,c,Ge)}var Pt;if(vi)e:{switch(r){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else Qs?No(r,c)&&(Rt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Rt="onCompositionStart");Rt&&(Is&&c.locale!=="ko"&&(Qs||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Qs&&(Pt=mi()):(Ts=Ge,fi="value"in Ts?Ts.value:Ts.textContent,Qs=!0)),At=Yl(Le,Rt),0<At.length&&(Rt=new wr(Rt,r,null,c,Ge),Ke.push({event:Rt,listeners:At}),Pt?Rt.data=Pt:(Pt=ia(c),Pt!==null&&(Rt.data=Pt)))),(Pt=$l?Fs(r,c):Rs(r,c))&&(Le=Yl(Le,"onBeforeInput"),0<Le.length&&(Ge=new wr("onBeforeInput","beforeinput",null,c,Ge),Ke.push({event:Ge,listeners:Le}),Ge.data=Pt))}hl(Ke,i)})}function ml(r,i,c){return{instance:r,listener:i,currentTarget:c}}function Yl(r,i){for(var c=i+"Capture",m=[];r!==null;){var b=r,k=b.stateNode;b.tag===5&&k!==null&&(b=k,k=Rn(r,c),k!=null&&m.unshift(ml(r,k,b)),k=Rn(r,i),k!=null&&m.push(ml(r,k,b))),r=r.return}return m}function io(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Pu(r,i,c,m,b){for(var k=i._reactName,B=[];c!==null&&c!==m;){var de=c,_e=de.alternate,Le=de.stateNode;if(_e!==null&&_e===m)break;de.tag===5&&Le!==null&&(de=Le,b?(_e=Rn(c,k),_e!=null&&B.unshift(ml(c,_e,de))):b||(_e=Rn(c,k),_e!=null&&B.push(ml(c,_e,de)))),c=c.return}B.length!==0&&r.push({event:i,listeners:B})}var zd=/\r\n?/g,$d=/\u0000|\uFFFD/g;function Cu(r){return(typeof r=="string"?r:""+r).replace(zd,`
`).replace($d,"")}function Kl(r,i,c){if(i=Cu(i),Cu(r)!==i&&c)throw Error(t(425))}function Eo(){}var gl=null,ao=null;function Gc(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,Eu=typeof clearTimeout=="function"?clearTimeout:void 0,Lu=typeof Promise=="function"?Promise:void 0,Wd=typeof queueMicrotask=="function"?queueMicrotask:typeof Lu<"u"?function(r){return Lu.resolve(null).then(r).catch(Hd)}:Yc;function Hd(r){setTimeout(function(){throw r})}function Kc(r,i){var c=i,m=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(m===0){r.removeChild(b),ta(i);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=b}while(c);ta(i)}function ls(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function ei(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}var vs=Math.random().toString(36).slice(2),zi="__reactFiber$"+vs,Lo="__reactProps$"+vs,zn="__reactContainer$"+vs,xs="__reactEvents$"+vs,Vd="__reactListeners$"+vs,Gd="__reactHandles$"+vs;function Fa(r){var i=r[zi];if(i)return i;for(var c=r.parentNode;c;){if(i=c[zn]||c[zi]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=ei(r);r!==null;){if(c=r[zi])return c;r=ei(r)}return i}r=c,c=r.parentNode}return null}function Do(r){return r=r[zi]||r[zn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function oo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function vl(r){return r[Lo]||null}var Jc=[],ua=-1;function bi(r){return{current:r}}function gr(r){0>ua||(r.current=Jc[ua],Jc[ua]=null,ua--)}function xr(r,i){ua++,Jc[ua]=r.current,r.current=i}var Ra={},Dn=bi(Ra),ys=bi(!1),lo=Ra;function To(r,i){var c=r.type.contextTypes;if(!c)return Ra;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var b={},k;for(k in c)b[k]=i[k];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=b),b}function bs(r){return r=r.childContextTypes,r!=null}function Jl(){gr(ys),gr(Dn)}function Du(r,i,c){if(Dn.current!==Ra)throw Error(t(168));xr(Dn,i),xr(ys,c)}function Xc(r,i,c){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var b in m)if(!(b in i))throw Error(t(108,me(r)||"Unknown",b));return ve({},c,m)}function co(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ra,lo=Dn.current,xr(Dn,r),xr(ys,ys.current),!0}function Tu(r,i,c){var m=r.stateNode;if(!m)throw Error(t(169));c?(r=Xc(r,i,lo),m.__reactInternalMemoizedMergedChildContext=r,gr(ys),gr(Dn),xr(Dn,r)):gr(ys),xr(ys,c)}var da=null,xl=!1,f=!1;function v(r){da===null?da=[r]:da.push(r)}function _(r){xl=!0,v(r)}function j(){if(!f&&da!==null){f=!0;var r=0,i=Jt;try{var c=da;for(Jt=1;r<c.length;r++){var m=c[r];do m=m(!0);while(m!==null)}da=null,xl=!1}catch(b){throw da!==null&&(da=da.slice(r+1)),li(Xi,j),b}finally{Jt=i,f=!1}}return null}var I=[],q=0,W=null,K=0,Z=[],ae=0,we=null,Ae=1,oe="";function Ne(r,i){I[q++]=K,I[q++]=W,W=r,K=i}function je(r,i,c){Z[ae++]=Ae,Z[ae++]=oe,Z[ae++]=we,we=r;var m=Ae;r=oe;var b=32-Br(m)-1;m&=~(1<<b),c+=1;var k=32-Br(i)+b;if(30<k){var B=b-b%5;k=(m&(1<<B)-1).toString(32),m>>=B,b-=B,Ae=1<<32-Br(i)+b|c<<b|m,oe=k+r}else Ae=1<<k|c<<b|m,oe=r}function Me(r){r.return!==null&&(Ne(r,1),je(r,1,0))}function Ce(r){for(;r===W;)W=I[--q],I[q]=null,K=I[--q],I[q]=null;for(;r===we;)we=Z[--ae],Z[ae]=null,oe=Z[--ae],Z[ae]=null,Ae=Z[--ae],Z[ae]=null}var Oe=null,Fe=null,Ue=!1,Be=null;function gt(r,i){var c=Gi(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=r,i=r.deletions,i===null?(r.deletions=[c],r.flags|=16):i.push(c)}function rt(r,i){switch(r.tag){case 5:var c=r.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Oe=r,Fe=ls(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Oe=r,Fe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=we!==null?{id:Ae,overflow:oe}:null,r.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=Gi(18,null,null,0),c.stateNode=i,c.return=r,r.child=c,Oe=r,Fe=null,!0):!1;default:return!1}}function qt(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ct(r){if(Ue){var i=Fe;if(i){var c=i;if(!rt(r,i)){if(qt(r))throw Error(t(418));i=ls(c.nextSibling);var m=Oe;i&&rt(r,i)?gt(m,c):(r.flags=r.flags&-4097|2,Ue=!1,Oe=r)}}else{if(qt(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ue=!1,Oe=r}}}function Xt(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Oe=r}function Kr(r){if(r!==Oe)return!1;if(!Ue)return Xt(r),Ue=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Gc(r.type,r.memoizedProps)),i&&(i=Fe)){if(qt(r))throw zt(),Error(t(418));for(;i;)gt(r,i),i=ls(i.nextSibling)}if(Xt(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(i===0){Fe=ls(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}r=r.nextSibling}Fe=null}}else Fe=Oe?ls(r.stateNode.nextSibling):null;return!0}function zt(){for(var r=Fe;r;)r=ls(r.nextSibling)}function nt(){Fe=Oe=null,Ue=!1}function Qe(r){Be===null?Be=[r]:Be.push(r)}var en=z.ReactCurrentBatchConfig;function Ot(r,i,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var m=c.stateNode}if(!m)throw Error(t(147,r));var b=m,k=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===k?i.ref:(i=function(B){var de=b.refs;B===null?delete de[k]:de[k]=B},i._stringRef=k,i)}if(typeof r!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,r))}return r}function Yt(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function jr(r){var i=r._init;return i(r._payload)}function wn(r){function i(Pe,ke){if(r){var Ee=Pe.deletions;Ee===null?(Pe.deletions=[ke],Pe.flags|=16):Ee.push(ke)}}function c(Pe,ke){if(!r)return null;for(;ke!==null;)i(Pe,ke),ke=ke.sibling;return null}function m(Pe,ke){for(Pe=new Map;ke!==null;)ke.key!==null?Pe.set(ke.key,ke):Pe.set(ke.index,ke),ke=ke.sibling;return Pe}function b(Pe,ke){return Pe=$o(Pe,ke),Pe.index=0,Pe.sibling=null,Pe}function k(Pe,ke,Ee){return Pe.index=Ee,r?(Ee=Pe.alternate,Ee!==null?(Ee=Ee.index,Ee<ke?(Pe.flags|=2,ke):Ee):(Pe.flags|=2,ke)):(Pe.flags|=1048576,ke)}function B(Pe){return r&&Pe.alternate===null&&(Pe.flags|=2),Pe}function de(Pe,ke,Ee,Je){return ke===null||ke.tag!==6?(ke=_h(Ee,Pe.mode,Je),ke.return=Pe,ke):(ke=b(ke,Ee),ke.return=Pe,ke)}function _e(Pe,ke,Ee,Je){var xt=Ee.type;return xt===ee?Ge(Pe,ke,Ee.props.children,Je,Ee.key):ke!==null&&(ke.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===X&&jr(xt)===ke.type)?(Je=b(ke,Ee.props),Je.ref=Ot(Pe,ke,Ee),Je.return=Pe,Je):(Je=Zu(Ee.type,Ee.key,Ee.props,null,Pe.mode,Je),Je.ref=Ot(Pe,ke,Ee),Je.return=Pe,Je)}function Le(Pe,ke,Ee,Je){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Ee.containerInfo||ke.stateNode.implementation!==Ee.implementation?(ke=Nh(Ee,Pe.mode,Je),ke.return=Pe,ke):(ke=b(ke,Ee.children||[]),ke.return=Pe,ke)}function Ge(Pe,ke,Ee,Je,xt){return ke===null||ke.tag!==7?(ke=jl(Ee,Pe.mode,Je,xt),ke.return=Pe,ke):(ke=b(ke,Ee),ke.return=Pe,ke)}function Ke(Pe,ke,Ee){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=_h(""+ke,Pe.mode,Ee),ke.return=Pe,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case he:return Ee=Zu(ke.type,ke.key,ke.props,null,Pe.mode,Ee),Ee.ref=Ot(Pe,null,ke),Ee.return=Pe,Ee;case le:return ke=Nh(ke,Pe.mode,Ee),ke.return=Pe,ke;case X:var Je=ke._init;return Ke(Pe,Je(ke._payload),Ee)}if(st(ke)||ce(ke))return ke=jl(ke,Pe.mode,Ee,null),ke.return=Pe,ke;Yt(Pe,ke)}return null}function He(Pe,ke,Ee,Je){var xt=ke!==null?ke.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return xt!==null?null:de(Pe,ke,""+Ee,Je);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case he:return Ee.key===xt?_e(Pe,ke,Ee,Je):null;case le:return Ee.key===xt?Le(Pe,ke,Ee,Je):null;case X:return xt=Ee._init,He(Pe,ke,xt(Ee._payload),Je)}if(st(Ee)||ce(Ee))return xt!==null?null:Ge(Pe,ke,Ee,Je,null);Yt(Pe,Ee)}return null}function tt(Pe,ke,Ee,Je,xt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Pe=Pe.get(Ee)||null,de(ke,Pe,""+Je,xt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case he:return Pe=Pe.get(Je.key===null?Ee:Je.key)||null,_e(ke,Pe,Je,xt);case le:return Pe=Pe.get(Je.key===null?Ee:Je.key)||null,Le(ke,Pe,Je,xt);case X:var At=Je._init;return tt(Pe,ke,Ee,At(Je._payload),xt)}if(st(Je)||ce(Je))return Pe=Pe.get(Ee)||null,Ge(ke,Pe,Je,xt,null);Yt(ke,Je)}return null}function ut(Pe,ke,Ee,Je){for(var xt=null,At=null,Pt=ke,Rt=ke=0,Gn=null;Pt!==null&&Rt<Ee.length;Rt++){Pt.index>Rt?(Gn=Pt,Pt=null):Gn=Pt.sibling;var ur=He(Pe,Pt,Ee[Rt],Je);if(ur===null){Pt===null&&(Pt=Gn);break}r&&Pt&&ur.alternate===null&&i(Pe,Pt),ke=k(ur,ke,Rt),At===null?xt=ur:At.sibling=ur,At=ur,Pt=Gn}if(Rt===Ee.length)return c(Pe,Pt),Ue&&Ne(Pe,Rt),xt;if(Pt===null){for(;Rt<Ee.length;Rt++)Pt=Ke(Pe,Ee[Rt],Je),Pt!==null&&(ke=k(Pt,ke,Rt),At===null?xt=Pt:At.sibling=Pt,At=Pt);return Ue&&Ne(Pe,Rt),xt}for(Pt=m(Pe,Pt);Rt<Ee.length;Rt++)Gn=tt(Pt,Pe,Rt,Ee[Rt],Je),Gn!==null&&(r&&Gn.alternate!==null&&Pt.delete(Gn.key===null?Rt:Gn.key),ke=k(Gn,ke,Rt),At===null?xt=Gn:At.sibling=Gn,At=Gn);return r&&Pt.forEach(function(Wo){return i(Pe,Wo)}),Ue&&Ne(Pe,Rt),xt}function pt(Pe,ke,Ee,Je){var xt=ce(Ee);if(typeof xt!="function")throw Error(t(150));if(Ee=xt.call(Ee),Ee==null)throw Error(t(151));for(var At=xt=null,Pt=ke,Rt=ke=0,Gn=null,ur=Ee.next();Pt!==null&&!ur.done;Rt++,ur=Ee.next()){Pt.index>Rt?(Gn=Pt,Pt=null):Gn=Pt.sibling;var Wo=He(Pe,Pt,ur.value,Je);if(Wo===null){Pt===null&&(Pt=Gn);break}r&&Pt&&Wo.alternate===null&&i(Pe,Pt),ke=k(Wo,ke,Rt),At===null?xt=Wo:At.sibling=Wo,At=Wo,Pt=Gn}if(ur.done)return c(Pe,Pt),Ue&&Ne(Pe,Rt),xt;if(Pt===null){for(;!ur.done;Rt++,ur=Ee.next())ur=Ke(Pe,ur.value,Je),ur!==null&&(ke=k(ur,ke,Rt),At===null?xt=ur:At.sibling=ur,At=ur);return Ue&&Ne(Pe,Rt),xt}for(Pt=m(Pe,Pt);!ur.done;Rt++,ur=Ee.next())ur=tt(Pt,Pe,Rt,ur.value,Je),ur!==null&&(r&&ur.alternate!==null&&Pt.delete(ur.key===null?Rt:ur.key),ke=k(ur,ke,Rt),At===null?xt=ur:At.sibling=ur,At=ur);return r&&Pt.forEach(function(G1){return i(Pe,G1)}),Ue&&Ne(Pe,Rt),xt}function gn(Pe,ke,Ee,Je){if(typeof Ee=="object"&&Ee!==null&&Ee.type===ee&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case he:e:{for(var xt=Ee.key,At=ke;At!==null;){if(At.key===xt){if(xt=Ee.type,xt===ee){if(At.tag===7){c(Pe,At.sibling),ke=b(At,Ee.props.children),ke.return=Pe,Pe=ke;break e}}else if(At.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===X&&jr(xt)===At.type){c(Pe,At.sibling),ke=b(At,Ee.props),ke.ref=Ot(Pe,At,Ee),ke.return=Pe,Pe=ke;break e}c(Pe,At);break}else i(Pe,At);At=At.sibling}Ee.type===ee?(ke=jl(Ee.props.children,Pe.mode,Je,Ee.key),ke.return=Pe,Pe=ke):(Je=Zu(Ee.type,Ee.key,Ee.props,null,Pe.mode,Je),Je.ref=Ot(Pe,ke,Ee),Je.return=Pe,Pe=Je)}return B(Pe);case le:e:{for(At=Ee.key;ke!==null;){if(ke.key===At)if(ke.tag===4&&ke.stateNode.containerInfo===Ee.containerInfo&&ke.stateNode.implementation===Ee.implementation){c(Pe,ke.sibling),ke=b(ke,Ee.children||[]),ke.return=Pe,Pe=ke;break e}else{c(Pe,ke);break}else i(Pe,ke);ke=ke.sibling}ke=Nh(Ee,Pe.mode,Je),ke.return=Pe,Pe=ke}return B(Pe);case X:return At=Ee._init,gn(Pe,ke,At(Ee._payload),Je)}if(st(Ee))return ut(Pe,ke,Ee,Je);if(ce(Ee))return pt(Pe,ke,Ee,Je);Yt(Pe,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,ke!==null&&ke.tag===6?(c(Pe,ke.sibling),ke=b(ke,Ee),ke.return=Pe,Pe=ke):(c(Pe,ke),ke=_h(Ee,Pe.mode,Je),ke.return=Pe,Pe=ke),B(Pe)):c(Pe,ke)}return gn}var on=wn(!0),$r=wn(!1),pn=bi(null),_n=null,Ir=null,er=null;function ar(){er=Ir=_n=null}function Fr(r){var i=pn.current;gr(pn),r._currentValue=i}function or(r,i,c){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===c)break;r=r.return}}function Jr(r,i){_n=r,er=Ir=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(ri=!0),r.firstContext=null)}function Xr(r){var i=r._currentValue;if(er!==r)if(r={context:r,memoizedValue:i,next:null},Ir===null){if(_n===null)throw Error(t(308));Ir=r,_n.dependencies={lanes:0,firstContext:r}}else Ir=Ir.next=r;return i}var Nr=null;function $n(r){Nr===null?Nr=[r]:Nr.push(r)}function yr(r,i,c,m){var b=i.interleaved;return b===null?(c.next=c,$n(i)):(c.next=b.next,b.next=c),i.interleaved=c,kr(r,m)}function kr(r,i){r.lanes|=i;var c=r.alternate;for(c!==null&&(c.lanes|=i),c=r,r=r.return;r!==null;)r.childLanes|=i,c=r.alternate,c!==null&&(c.childLanes|=i),c=r,r=r.return;return c.tag===3?c.stateNode:null}var ln=!1;function Tn(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ws(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function tn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function rn(r,i,c){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(lr&2)!==0){var b=m.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),m.pending=i,kr(r,c)}return b=m.interleaved,b===null?(i.next=i,$n(m)):(i.next=b.next,b.next=i),m.interleaved=i,kr(r,c)}function Wn(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,c|=m,i.lanes=c,Ii(r,c)}}function Sr(r,i){var c=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var b=null,k=null;if(c=c.firstBaseUpdate,c!==null){do{var B={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};k===null?b=k=B:k=k.next=B,c=c.next}while(c!==null);k===null?b=k=i:k=k.next=i}else b=k=i;c={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:k,shared:m.shared,effects:m.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}function Hn(r,i,c,m){var b=r.updateQueue;ln=!1;var k=b.firstBaseUpdate,B=b.lastBaseUpdate,de=b.shared.pending;if(de!==null){b.shared.pending=null;var _e=de,Le=_e.next;_e.next=null,B===null?k=Le:B.next=Le,B=_e;var Ge=r.alternate;Ge!==null&&(Ge=Ge.updateQueue,de=Ge.lastBaseUpdate,de!==B&&(de===null?Ge.firstBaseUpdate=Le:de.next=Le,Ge.lastBaseUpdate=_e))}if(k!==null){var Ke=b.baseState;B=0,Ge=Le=_e=null,de=k;do{var He=de.lane,tt=de.eventTime;if((m&He)===He){Ge!==null&&(Ge=Ge.next={eventTime:tt,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var ut=r,pt=de;switch(He=i,tt=c,pt.tag){case 1:if(ut=pt.payload,typeof ut=="function"){Ke=ut.call(tt,Ke,He);break e}Ke=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=pt.payload,He=typeof ut=="function"?ut.call(tt,Ke,He):ut,He==null)break e;Ke=ve({},Ke,He);break e;case 2:ln=!0}}de.callback!==null&&de.lane!==0&&(r.flags|=64,He=b.effects,He===null?b.effects=[de]:He.push(de))}else tt={eventTime:tt,lane:He,tag:de.tag,payload:de.payload,callback:de.callback,next:null},Ge===null?(Le=Ge=tt,_e=Ke):Ge=Ge.next=tt,B|=He;if(de=de.next,de===null){if(de=b.shared.pending,de===null)break;He=de,de=He.next,He.next=null,b.lastBaseUpdate=He,b.shared.pending=null}}while(!0);if(Ge===null&&(_e=Ke),b.baseState=_e,b.firstBaseUpdate=Le,b.lastBaseUpdate=Ge,i=b.shared.interleaved,i!==null){b=i;do B|=b.lane,b=b.next;while(b!==i)}else k===null&&(b.shared.lanes=0);_l|=B,r.lanes=B,r.memoizedState=Ke}}function ti(r,i,c){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],b=m.callback;if(b!==null){if(m.callback=null,m=c,typeof b!="function")throw Error(t(191,b));b.call(m)}}}var wi={},Nn=bi(wi),nn=bi(wi),Ma=bi(wi);function ha(r){if(r===wi)throw Error(t(174));return r}function Oo(r,i){switch(xr(Ma,i),xr(nn,r),xr(Nn,wi),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ht(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ht(i,r)}gr(Nn),xr(Nn,i)}function $i(){gr(Nn),gr(nn),gr(Ma)}function Ou(r){ha(Ma.current);var i=ha(Nn.current),c=Ht(i,r.type);i!==c&&(xr(nn,r),xr(Nn,c))}function Qc(r){nn.current===r&&(gr(Nn),gr(nn))}var Er=bi(0);function _i(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zc=[];function eu(){for(var r=0;r<Zc.length;r++)Zc[r]._workInProgressVersionPrimary=null;Zc.length=0}var Xl=z.ReactCurrentDispatcher,Ql=z.ReactCurrentBatchConfig,Wi=0,Rr=null,cn=null,sn=null,Io=!1,fa=!1,Fo=0,Yd=0;function mn(){throw Error(t(321))}function Zl(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Gr(r[c],i[c]))return!1;return!0}function yl(r,i,c,m,b,k){if(Wi=k,Rr=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Xl.current=r===null||r.memoizedState===null?y1:b1,r=c(m,b),fa){k=0;do{if(fa=!1,Fo=0,25<=k)throw Error(t(301));k+=1,sn=cn=null,i.updateQueue=null,Xl.current=w1,r=c(m,b)}while(fa)}if(Xl.current=Uu,i=cn!==null&&cn.next!==null,Wi=0,sn=cn=Rr=null,Io=!1,i)throw Error(t(300));return r}function Hi(){var r=Fo!==0;return Fo=0,r}function Ni(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Rr.memoizedState=sn=r:sn=sn.next=r,sn}function Ms(){if(cn===null){var r=Rr.alternate;r=r!==null?r.memoizedState:null}else r=cn.next;var i=sn===null?Rr.memoizedState:sn.next;if(i!==null)sn=i,cn=r;else{if(r===null)throw Error(t(310));cn=r,r={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},sn===null?Rr.memoizedState=sn=r:sn=sn.next=r}return sn}function bl(r,i){return typeof i=="function"?i(r):i}function ec(r){var i=Ms(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var m=cn,b=m.baseQueue,k=c.pending;if(k!==null){if(b!==null){var B=b.next;b.next=k.next,k.next=B}m.baseQueue=b=k,c.pending=null}if(b!==null){k=b.next,m=m.baseState;var de=B=null,_e=null,Le=k;do{var Ge=Le.lane;if((Wi&Ge)===Ge)_e!==null&&(_e=_e.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),m=Le.hasEagerState?Le.eagerState:r(m,Le.action);else{var Ke={lane:Ge,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};_e===null?(de=_e=Ke,B=m):_e=_e.next=Ke,Rr.lanes|=Ge,_l|=Ge}Le=Le.next}while(Le!==null&&Le!==k);_e===null?B=m:_e.next=de,Gr(m,i.memoizedState)||(ri=!0),i.memoizedState=m,i.baseState=B,i.baseQueue=_e,c.lastRenderedState=m}if(r=c.interleaved,r!==null){b=r;do k=b.lane,Rr.lanes|=k,_l|=k,b=b.next;while(b!==r)}else b===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ua(r){var i=Ms(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var m=c.dispatch,b=c.pending,k=i.memoizedState;if(b!==null){c.pending=null;var B=b=b.next;do k=r(k,B.action),B=B.next;while(B!==b);Gr(k,i.memoizedState)||(ri=!0),i.memoizedState=k,i.baseQueue===null&&(i.baseState=k),c.lastRenderedState=k}return[k,m]}function Iu(){}function tu(r,i){var c=Rr,m=Ms(),b=i(),k=!Gr(m.memoizedState,b);if(k&&(m.memoizedState=b,ri=!0),m=m.queue,nc(Ru.bind(null,c,m,r),[r]),m.getSnapshot!==i||k||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Us(9,ru.bind(null,c,m,b,i),void 0,null),Vn===null)throw Error(t(349));(Wi&30)!==0||Fu(c,i,b)}return b}function Fu(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=Rr.updateQueue,i===null?(i={lastEffect:null,stores:null},Rr.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function ru(r,i,c,m){i.value=c,i.getSnapshot=m,Ro(i)&&tc(r)}function Ru(r,i,c){return c(function(){Ro(i)&&tc(r)})}function Ro(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Gr(r,c)}catch{return!0}}function tc(r){var i=kr(r,1);i!==null&&xa(i,r,1,-1)}function wl(r){var i=Ni();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:r},i.queue=r,r=r.dispatch=x1.bind(null,Rr,r),[i.memoizedState,r]}function Us(r,i,c,m){return r={tag:r,create:i,destroy:c,deps:m,next:null},i=Rr.updateQueue,i===null?(i={lastEffect:null,stores:null},Rr.updateQueue=i,i.lastEffect=r.next=r):(c=i.lastEffect,c===null?i.lastEffect=r.next=r:(m=c.next,c.next=r,r.next=m,i.lastEffect=r)),r}function pa(){return Ms().memoizedState}function ki(r,i,c,m){var b=Ni();Rr.flags|=r,b.memoizedState=Us(1|i,c,void 0,m===void 0?null:m)}function uo(r,i,c,m){var b=Ms();m=m===void 0?null:m;var k=void 0;if(cn!==null){var B=cn.memoizedState;if(k=B.destroy,m!==null&&Zl(m,B.deps)){b.memoizedState=Us(i,c,k,m);return}}Rr.flags|=r,b.memoizedState=Us(1|i,c,k,m)}function rc(r,i){return ki(8390656,8,r,i)}function nc(r,i){return uo(2048,8,r,i)}function Mu(r,i){return uo(4,2,r,i)}function sc(r,i){return uo(4,4,r,i)}function ic(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Yf(r,i,c){return c=c!=null?c.concat([r]):null,uo(4,4,ic.bind(null,i,r),c)}function Kd(){}function Kf(r,i){var c=Ms();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&Zl(i,m[1])?m[0]:(c.memoizedState=[r,i],r)}function Jf(r,i){var c=Ms();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&Zl(i,m[1])?m[0]:(r=r(),c.memoizedState=[r,i],r)}function Xf(r,i,c){return(Wi&21)===0?(r.baseState&&(r.baseState=!1,ri=!0),r.memoizedState=c):(Gr(c,i)||(c=Va(),Rr.lanes|=c,_l|=c,r.baseState=!0),i)}function g1(r,i){var c=Jt;Jt=c!==0&&4>c?c:4,r(!0);var m=Ql.transition;Ql.transition={};try{r(!1),i()}finally{Jt=c,Ql.transition=m}}function Qf(){return Ms().memoizedState}function v1(r,i,c){var m=qo(r);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},Zf(r))e0(i,c);else if(c=yr(r,i,c,m),c!==null){var b=qs();xa(c,r,m,b),t0(c,i,m)}}function x1(r,i,c){var m=qo(r),b={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zf(r))e0(i,b);else{var k=r.alternate;if(r.lanes===0&&(k===null||k.lanes===0)&&(k=i.lastRenderedReducer,k!==null))try{var B=i.lastRenderedState,de=k(B,c);if(b.hasEagerState=!0,b.eagerState=de,Gr(de,B)){var _e=i.interleaved;_e===null?(b.next=b,$n(i)):(b.next=_e.next,_e.next=b),i.interleaved=b;return}}catch{}finally{}c=yr(r,i,b,m),c!==null&&(b=qs(),xa(c,r,m,b),t0(c,i,m))}}function Zf(r){var i=r.alternate;return r===Rr||i!==null&&i===Rr}function e0(r,i){fa=Io=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function t0(r,i,c){if((c&4194240)!==0){var m=i.lanes;m&=r.pendingLanes,c|=m,i.lanes=c,Ii(r,c)}}var Uu={readContext:Xr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},y1={readContext:Xr,useCallback:function(r,i){return Ni().memoizedState=[r,i===void 0?null:i],r},useContext:Xr,useEffect:rc,useImperativeHandle:function(r,i,c){return c=c!=null?c.concat([r]):null,ki(4194308,4,ic.bind(null,i,r),c)},useLayoutEffect:function(r,i){return ki(4194308,4,r,i)},useInsertionEffect:function(r,i){return ki(4,2,r,i)},useMemo:function(r,i){var c=Ni();return i=i===void 0?null:i,r=r(),c.memoizedState=[r,i],r},useReducer:function(r,i,c){var m=Ni();return i=c!==void 0?c(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=v1.bind(null,Rr,r),[m.memoizedState,r]},useRef:function(r){var i=Ni();return r={current:r},i.memoizedState=r},useState:wl,useDebugValue:Kd,useDeferredValue:function(r){return Ni().memoizedState=r},useTransition:function(){var r=wl(!1),i=r[0];return r=g1.bind(null,r[1]),Ni().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,c){var m=Rr,b=Ni();if(Ue){if(c===void 0)throw Error(t(407));c=c()}else{if(c=i(),Vn===null)throw Error(t(349));(Wi&30)!==0||Fu(m,i,c)}b.memoizedState=c;var k={value:c,getSnapshot:i};return b.queue=k,rc(Ru.bind(null,m,k,r),[r]),m.flags|=2048,Us(9,ru.bind(null,m,k,c,i),void 0,null),c},useId:function(){var r=Ni(),i=Vn.identifierPrefix;if(Ue){var c=oe,m=Ae;c=(m&~(1<<32-Br(m)-1)).toString(32)+c,i=":"+i+"R"+c,c=Fo++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=Yd++,i=":"+i+"r"+c.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},b1={readContext:Xr,useCallback:Kf,useContext:Xr,useEffect:nc,useImperativeHandle:Yf,useInsertionEffect:Mu,useLayoutEffect:sc,useMemo:Jf,useReducer:ec,useRef:pa,useState:function(){return ec(bl)},useDebugValue:Kd,useDeferredValue:function(r){var i=Ms();return Xf(i,cn.memoizedState,r)},useTransition:function(){var r=ec(bl)[0],i=Ms().memoizedState;return[r,i]},useMutableSource:Iu,useSyncExternalStore:tu,useId:Qf,unstable_isNewReconciler:!1},w1={readContext:Xr,useCallback:Kf,useContext:Xr,useEffect:nc,useImperativeHandle:Yf,useInsertionEffect:Mu,useLayoutEffect:sc,useMemo:Jf,useReducer:Ua,useRef:pa,useState:function(){return Ua(bl)},useDebugValue:Kd,useDeferredValue:function(r){var i=Ms();return cn===null?i.memoizedState=r:Xf(i,cn.memoizedState,r)},useTransition:function(){var r=Ua(bl)[0],i=Ms().memoizedState;return[r,i]},useMutableSource:Iu,useSyncExternalStore:tu,useId:Qf,unstable_isNewReconciler:!1};function ma(r,i){if(r&&r.defaultProps){i=ve({},i),r=r.defaultProps;for(var c in r)i[c]===void 0&&(i[c]=r[c]);return i}return i}function Jd(r,i,c,m){i=r.memoizedState,c=c(m,i),c=c==null?i:ve({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Bu={isMounted:function(r){return(r=r._reactInternals)?Hr(r)===r:!1},enqueueSetState:function(r,i,c){r=r._reactInternals;var m=qs(),b=qo(r),k=tn(m,b);k.payload=i,c!=null&&(k.callback=c),i=rn(r,k,b),i!==null&&(xa(i,r,b,m),Wn(i,r,b))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var m=qs(),b=qo(r),k=tn(m,b);k.tag=1,k.payload=i,c!=null&&(k.callback=c),i=rn(r,k,b),i!==null&&(xa(i,r,b,m),Wn(i,r,b))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=qs(),m=qo(r),b=tn(c,m);b.tag=2,i!=null&&(b.callback=i),i=rn(r,b,m),i!==null&&(xa(i,r,m,c),Wn(i,r,m))}};function r0(r,i,c,m,b,k,B){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,k,B):i.prototype&&i.prototype.isPureReactComponent?!gs(c,m)||!gs(b,k):!0}function n0(r,i,c){var m=!1,b=Ra,k=i.contextType;return typeof k=="object"&&k!==null?k=Xr(k):(b=bs(i)?lo:Dn.current,m=i.contextTypes,k=(m=m!=null)?To(r,b):Ra),i=new i(c,k),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Bu,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=b,r.__reactInternalMemoizedMaskedChildContext=k),i}function s0(r,i,c,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==r&&Bu.enqueueReplaceState(i,i.state,null)}function Xd(r,i,c,m){var b=r.stateNode;b.props=c,b.state=r.memoizedState,b.refs={},Tn(r);var k=i.contextType;typeof k=="object"&&k!==null?b.context=Xr(k):(k=bs(i)?lo:Dn.current,b.context=To(r,k)),b.state=r.memoizedState,k=i.getDerivedStateFromProps,typeof k=="function"&&(Jd(r,i,k,c),b.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(i=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),i!==b.state&&Bu.enqueueReplaceState(b,b.state,null),Hn(r,c,b,m),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308)}function ac(r,i){try{var c="",m=i;do c+=ie(m),m=m.return;while(m);var b=c}catch(k){b=`
Error generating stack: `+k.message+`
`+k.stack}return{value:r,source:i,stack:b,digest:null}}function Qd(r,i,c){return{value:r,source:null,stack:c??null,digest:i??null}}function Zd(r,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var _1=typeof WeakMap=="function"?WeakMap:Map;function i0(r,i,c){c=tn(-1,c),c.tag=3,c.payload={element:null};var m=i.value;return c.callback=function(){Gu||(Gu=!0,ph=m),Zd(r,i)},c}function a0(r,i,c){c=tn(-1,c),c.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var b=i.value;c.payload=function(){return m(b)},c.callback=function(){Zd(r,i)}}var k=r.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(c.callback=function(){Zd(r,i),typeof m!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var B=i.stack;this.componentDidCatch(i.value,{componentStack:B!==null?B:""})}),c}function o0(r,i,c){var m=r.pingCache;if(m===null){m=r.pingCache=new _1;var b=new Set;m.set(i,b)}else b=m.get(i),b===void 0&&(b=new Set,m.set(i,b));b.has(c)||(b.add(c),r=F1.bind(null,r,i,c),i.then(r,r))}function l0(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function c0(r,i,c,m,b){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=tn(-1,1),i.tag=2,rn(c,i,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=b,r)}var N1=z.ReactCurrentOwner,ri=!1;function Bs(r,i,c,m){i.child=r===null?$r(i,null,c,m):on(i,r.child,c,m)}function u0(r,i,c,m,b){c=c.render;var k=i.ref;return Jr(i,b),m=yl(r,i,c,m,k,b),c=Hi(),r!==null&&!ri?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,ho(r,i,b)):(Ue&&c&&Me(i),i.flags|=1,Bs(r,i,m,b),i.child)}function d0(r,i,c,m,b){if(r===null){var k=c.type;return typeof k=="function"&&!wh(k)&&k.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=k,h0(r,i,k,m,b)):(r=Zu(c.type,null,m,i,i.mode,b),r.ref=i.ref,r.return=i,i.child=r)}if(k=r.child,(r.lanes&b)===0){var B=k.memoizedProps;if(c=c.compare,c=c!==null?c:gs,c(B,m)&&r.ref===i.ref)return ho(r,i,b)}return i.flags|=1,r=$o(k,m),r.ref=i.ref,r.return=i,i.child=r}function h0(r,i,c,m,b){if(r!==null){var k=r.memoizedProps;if(gs(k,m)&&r.ref===i.ref)if(ri=!1,i.pendingProps=m=k,(r.lanes&b)!==0)(r.flags&131072)!==0&&(ri=!0);else return i.lanes=r.lanes,ho(r,i,b)}return eh(r,i,c,m,b)}function f0(r,i,c){var m=i.pendingProps,b=m.children,k=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},xr(lc,Si),Si|=c;else{if((c&1073741824)===0)return r=k!==null?k.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,xr(lc,Si),Si|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=k!==null?k.baseLanes:c,xr(lc,Si),Si|=m}else k!==null?(m=k.baseLanes|c,i.memoizedState=null):m=c,xr(lc,Si),Si|=m;return Bs(r,i,b,c),i.child}function p0(r,i){var c=i.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function eh(r,i,c,m,b){var k=bs(c)?lo:Dn.current;return k=To(i,k),Jr(i,b),c=yl(r,i,c,m,k,b),m=Hi(),r!==null&&!ri?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~b,ho(r,i,b)):(Ue&&m&&Me(i),i.flags|=1,Bs(r,i,c,b),i.child)}function m0(r,i,c,m,b){if(bs(c)){var k=!0;co(i)}else k=!1;if(Jr(i,b),i.stateNode===null)zu(r,i),n0(i,c,m),Xd(i,c,m,b),m=!0;else if(r===null){var B=i.stateNode,de=i.memoizedProps;B.props=de;var _e=B.context,Le=c.contextType;typeof Le=="object"&&Le!==null?Le=Xr(Le):(Le=bs(c)?lo:Dn.current,Le=To(i,Le));var Ge=c.getDerivedStateFromProps,Ke=typeof Ge=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ke||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(de!==m||_e!==Le)&&s0(i,B,m,Le),ln=!1;var He=i.memoizedState;B.state=He,Hn(i,m,B,b),_e=i.memoizedState,de!==m||He!==_e||ys.current||ln?(typeof Ge=="function"&&(Jd(i,c,Ge,m),_e=i.memoizedState),(de=ln||r0(i,c,de,m,He,_e,Le))?(Ke||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(i.flags|=4194308)):(typeof B.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=_e),B.props=m,B.state=_e,B.context=Le,m=de):(typeof B.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{B=i.stateNode,ws(r,i),de=i.memoizedProps,Le=i.type===i.elementType?de:ma(i.type,de),B.props=Le,Ke=i.pendingProps,He=B.context,_e=c.contextType,typeof _e=="object"&&_e!==null?_e=Xr(_e):(_e=bs(c)?lo:Dn.current,_e=To(i,_e));var tt=c.getDerivedStateFromProps;(Ge=typeof tt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(de!==Ke||He!==_e)&&s0(i,B,m,_e),ln=!1,He=i.memoizedState,B.state=He,Hn(i,m,B,b);var ut=i.memoizedState;de!==Ke||He!==ut||ys.current||ln?(typeof tt=="function"&&(Jd(i,c,tt,m),ut=i.memoizedState),(Le=ln||r0(i,c,Le,m,He,ut,_e)||!1)?(Ge||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(m,ut,_e),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(m,ut,_e)),typeof B.componentDidUpdate=="function"&&(i.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof B.componentDidUpdate!="function"||de===r.memoizedProps&&He===r.memoizedState||(i.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||de===r.memoizedProps&&He===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=ut),B.props=m,B.state=ut,B.context=_e,m=Le):(typeof B.componentDidUpdate!="function"||de===r.memoizedProps&&He===r.memoizedState||(i.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||de===r.memoizedProps&&He===r.memoizedState||(i.flags|=1024),m=!1)}return th(r,i,c,m,k,b)}function th(r,i,c,m,b,k){p0(r,i);var B=(i.flags&128)!==0;if(!m&&!B)return b&&Tu(i,c,!1),ho(r,i,k);m=i.stateNode,N1.current=i;var de=B&&typeof c.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&B?(i.child=on(i,r.child,null,k),i.child=on(i,null,de,k)):Bs(r,i,de,k),i.memoizedState=m.state,b&&Tu(i,c,!0),i.child}function g0(r){var i=r.stateNode;i.pendingContext?Du(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Du(r,i.context,!1),Oo(r,i.containerInfo)}function v0(r,i,c,m,b){return nt(),Qe(b),i.flags|=256,Bs(r,i,c,m),i.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function nh(r){return{baseLanes:r,cachePool:null,transitions:null}}function x0(r,i,c){var m=i.pendingProps,b=Er.current,k=!1,B=(i.flags&128)!==0,de;if((de=B)||(de=r!==null&&r.memoizedState===null?!1:(b&2)!==0),de?(k=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(b|=1),xr(Er,b&1),r===null)return ct(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(B=m.children,r=m.fallback,k?(m=i.mode,k=i.child,B={mode:"hidden",children:B},(m&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=B):k=ed(B,m,0,null),r=jl(r,m,c,null),k.return=i,r.return=i,k.sibling=r,i.child=k,i.child.memoizedState=nh(c),i.memoizedState=rh,r):sh(i,B));if(b=r.memoizedState,b!==null&&(de=b.dehydrated,de!==null))return k1(r,i,B,m,de,b,c);if(k){k=m.fallback,B=i.mode,b=r.child,de=b.sibling;var _e={mode:"hidden",children:m.children};return(B&1)===0&&i.child!==b?(m=i.child,m.childLanes=0,m.pendingProps=_e,i.deletions=null):(m=$o(b,_e),m.subtreeFlags=b.subtreeFlags&14680064),de!==null?k=$o(de,k):(k=jl(k,B,c,null),k.flags|=2),k.return=i,m.return=i,m.sibling=k,i.child=m,m=k,k=i.child,B=r.child.memoizedState,B=B===null?nh(c):{baseLanes:B.baseLanes|c,cachePool:null,transitions:B.transitions},k.memoizedState=B,k.childLanes=r.childLanes&~c,i.memoizedState=rh,m}return k=r.child,r=k.sibling,m=$o(k,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=c),m.return=i,m.sibling=null,r!==null&&(c=i.deletions,c===null?(i.deletions=[r],i.flags|=16):c.push(r)),i.child=m,i.memoizedState=null,m}function sh(r,i){return i=ed({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function qu(r,i,c,m){return m!==null&&Qe(m),on(i,r.child,null,c),r=sh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function k1(r,i,c,m,b,k,B){if(c)return i.flags&256?(i.flags&=-257,m=Qd(Error(t(422))),qu(r,i,B,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(k=m.fallback,b=i.mode,m=ed({mode:"visible",children:m.children},b,0,null),k=jl(k,b,B,null),k.flags|=2,m.return=i,k.return=i,m.sibling=k,i.child=m,(i.mode&1)!==0&&on(i,r.child,null,B),i.child.memoizedState=nh(B),i.memoizedState=rh,k);if((i.mode&1)===0)return qu(r,i,B,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var de=m.dgst;return m=de,k=Error(t(419)),m=Qd(k,m,void 0),qu(r,i,B,m)}if(de=(B&r.childLanes)!==0,ri||de){if(m=Vn,m!==null){switch(B&-B){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(m.suspendedLanes|B))!==0?0:b,b!==0&&b!==k.retryLane&&(k.retryLane=b,kr(r,b),xa(m,r,b,-1))}return bh(),m=Qd(Error(t(421))),qu(r,i,B,m)}return b.data==="$?"?(i.flags|=128,i.child=r.child,i=R1.bind(null,r),b._reactRetry=i,null):(r=k.treeContext,Fe=ls(b.nextSibling),Oe=i,Ue=!0,Be=null,r!==null&&(Z[ae++]=Ae,Z[ae++]=oe,Z[ae++]=we,Ae=r.id,oe=r.overflow,we=i),i=sh(i,m.children),i.flags|=4096,i)}function y0(r,i,c){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),or(r.return,i,c)}function ih(r,i,c,m,b){var k=r.memoizedState;k===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:b}:(k.isBackwards=i,k.rendering=null,k.renderingStartTime=0,k.last=m,k.tail=c,k.tailMode=b)}function b0(r,i,c){var m=i.pendingProps,b=m.revealOrder,k=m.tail;if(Bs(r,i,m.children,c),m=Er.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&y0(r,c,i);else if(r.tag===19)y0(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(xr(Er,m),(i.mode&1)===0)i.memoizedState=null;else switch(b){case"forwards":for(c=i.child,b=null;c!==null;)r=c.alternate,r!==null&&_i(r)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),ih(i,!1,b,c,k);break;case"backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(r=b.alternate,r!==null&&_i(r)===null){i.child=b;break}r=b.sibling,b.sibling=c,c=b,b=r}ih(i,!0,c,null,k);break;case"together":ih(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function ho(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),_l|=i.lanes,(c&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,c=$o(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=$o(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function S1(r,i,c){switch(i.tag){case 3:g0(i),nt();break;case 5:Ou(i);break;case 1:bs(i.type)&&co(i);break;case 4:Oo(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,b=i.memoizedProps.value;xr(pn,m._currentValue),m._currentValue=b;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(xr(Er,Er.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?x0(r,i,c):(xr(Er,Er.current&1),r=ho(r,i,c),r!==null?r.sibling:null);xr(Er,Er.current&1);break;case 19:if(m=(c&i.childLanes)!==0,(r.flags&128)!==0){if(m)return b0(r,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),xr(Er,Er.current),m)break;return null;case 22:case 23:return i.lanes=0,f0(r,i,c)}return ho(r,i,c)}var w0,ah,_0,N0;w0=function(r,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},ah=function(){},_0=function(r,i,c,m){var b=r.memoizedProps;if(b!==m){r=i.stateNode,ha(Nn.current);var k=null;switch(c){case"input":b=Ve(r,b),m=Ve(r,m),k=[];break;case"select":b=ve({},b,{value:void 0}),m=ve({},m,{value:void 0}),k=[];break;case"textarea":b=yt(r,b),m=yt(r,m),k=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Eo)}sr(c,m);var B;c=null;for(Le in b)if(!m.hasOwnProperty(Le)&&b.hasOwnProperty(Le)&&b[Le]!=null)if(Le==="style"){var de=b[Le];for(B in de)de.hasOwnProperty(B)&&(c||(c={}),c[B]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(a.hasOwnProperty(Le)?k||(k=[]):(k=k||[]).push(Le,null));for(Le in m){var _e=m[Le];if(de=b?.[Le],m.hasOwnProperty(Le)&&_e!==de&&(_e!=null||de!=null))if(Le==="style")if(de){for(B in de)!de.hasOwnProperty(B)||_e&&_e.hasOwnProperty(B)||(c||(c={}),c[B]="");for(B in _e)_e.hasOwnProperty(B)&&de[B]!==_e[B]&&(c||(c={}),c[B]=_e[B])}else c||(k||(k=[]),k.push(Le,c)),c=_e;else Le==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,de=de?de.__html:void 0,_e!=null&&de!==_e&&(k=k||[]).push(Le,_e)):Le==="children"?typeof _e!="string"&&typeof _e!="number"||(k=k||[]).push(Le,""+_e):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(a.hasOwnProperty(Le)?(_e!=null&&Le==="onScroll"&&_r("scroll",r),k||de===_e||(k=[])):(k=k||[]).push(Le,_e))}c&&(k=k||[]).push("style",c);var Le=k;(i.updateQueue=Le)&&(i.flags|=4)}},N0=function(r,i,c,m){c!==m&&(i.flags|=4)};function nu(r,i){if(!Ue)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function _s(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,m=0;if(i)for(var b=r.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=m,r.childLanes=c,i}function j1(r,i,c){var m=i.pendingProps;switch(Ce(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(i),null;case 1:return bs(i.type)&&Jl(),_s(i),null;case 3:return m=i.stateNode,$i(),gr(ys),gr(Dn),eu(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(Kr(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Be!==null&&(vh(Be),Be=null))),ah(r,i),_s(i),null;case 5:Qc(i);var b=ha(Ma.current);if(c=i.type,r!==null&&i.stateNode!=null)_0(r,i,c,m,b),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(t(166));return _s(i),null}if(r=ha(Nn.current),Kr(i)){m=i.stateNode,c=i.type;var k=i.memoizedProps;switch(m[zi]=i,m[Lo]=k,r=(i.mode&1)!==0,c){case"dialog":_r("cancel",m),_r("close",m);break;case"iframe":case"object":case"embed":_r("load",m);break;case"video":case"audio":for(b=0;b<Ia.length;b++)_r(Ia[b],m);break;case"source":_r("error",m);break;case"img":case"image":case"link":_r("error",m),_r("load",m);break;case"details":_r("toggle",m);break;case"input":re(m,k),_r("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!k.multiple},_r("invalid",m);break;case"textarea":vt(m,k),_r("invalid",m)}sr(c,k),b=null;for(var B in k)if(k.hasOwnProperty(B)){var de=k[B];B==="children"?typeof de=="string"?m.textContent!==de&&(k.suppressHydrationWarning!==!0&&Kl(m.textContent,de,r),b=["children",de]):typeof de=="number"&&m.textContent!==""+de&&(k.suppressHydrationWarning!==!0&&Kl(m.textContent,de,r),b=["children",""+de]):a.hasOwnProperty(B)&&de!=null&&B==="onScroll"&&_r("scroll",m)}switch(c){case"input":Ie(m),ot(m,k,!0);break;case"textarea":Ie(m),wt(m);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(m.onclick=Eo)}m=b,i.updateQueue=m,m!==null&&(i.flags|=4)}else{B=b.nodeType===9?b:b.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=It(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=B.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=B.createElement(c,{is:m.is}):(r=B.createElement(c),c==="select"&&(B=r,m.multiple?B.multiple=!0:m.size&&(B.size=m.size))):r=B.createElementNS(r,c),r[zi]=i,r[Lo]=m,w0(r,i,!1,!1),i.stateNode=r;e:{switch(B=ht(c,m),c){case"dialog":_r("cancel",r),_r("close",r),b=m;break;case"iframe":case"object":case"embed":_r("load",r),b=m;break;case"video":case"audio":for(b=0;b<Ia.length;b++)_r(Ia[b],r);b=m;break;case"source":_r("error",r),b=m;break;case"img":case"image":case"link":_r("error",r),_r("load",r),b=m;break;case"details":_r("toggle",r),b=m;break;case"input":re(r,m),b=Ve(r,m),_r("invalid",r);break;case"option":b=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},b=ve({},m,{value:void 0}),_r("invalid",r);break;case"textarea":vt(r,m),b=yt(r,m),_r("invalid",r);break;default:b=m}sr(c,b),de=b;for(k in de)if(de.hasOwnProperty(k)){var _e=de[k];k==="style"?Et(r,_e):k==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&lt(r,_e)):k==="children"?typeof _e=="string"?(c!=="textarea"||_e!=="")&&mt(r,_e):typeof _e=="number"&&mt(r,""+_e):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?_e!=null&&k==="onScroll"&&_r("scroll",r):_e!=null&&R(r,k,_e,B))}switch(c){case"input":Ie(r),ot(r,m,!1);break;case"textarea":Ie(r),wt(r);break;case"option":m.value!=null&&r.setAttribute("value",""+ye(m.value));break;case"select":r.multiple=!!m.multiple,k=m.value,k!=null?et(r,!!m.multiple,k,!1):m.defaultValue!=null&&et(r,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(r.onclick=Eo)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return _s(i),null;case 6:if(r&&i.stateNode!=null)N0(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(t(166));if(c=ha(Ma.current),ha(Nn.current),Kr(i)){if(m=i.stateNode,c=i.memoizedProps,m[zi]=i,(k=m.nodeValue!==c)&&(r=Oe,r!==null))switch(r.tag){case 3:Kl(m.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Kl(m.nodeValue,c,(r.mode&1)!==0)}k&&(i.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[zi]=i,i.stateNode=m}return _s(i),null;case 13:if(gr(Er),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ue&&Fe!==null&&(i.mode&1)!==0&&(i.flags&128)===0)zt(),nt(),i.flags|=98560,k=!1;else if(k=Kr(i),m!==null&&m.dehydrated!==null){if(r===null){if(!k)throw Error(t(318));if(k=i.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[zi]=i}else nt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_s(i),k=!1}else Be!==null&&(vh(Be),Be=null),k=!0;if(!k)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Er.current&1)!==0?On===0&&(On=3):bh())),i.updateQueue!==null&&(i.flags|=4),_s(i),null);case 4:return $i(),ah(r,i),r===null&&so(i.stateNode.containerInfo),_s(i),null;case 10:return Fr(i.type._context),_s(i),null;case 17:return bs(i.type)&&Jl(),_s(i),null;case 19:if(gr(Er),k=i.memoizedState,k===null)return _s(i),null;if(m=(i.flags&128)!==0,B=k.rendering,B===null)if(m)nu(k,!1);else{if(On!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(B=_i(r),B!==null){for(i.flags|=128,nu(k,!1),m=B.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=c,c=i.child;c!==null;)k=c,r=m,k.flags&=14680066,B=k.alternate,B===null?(k.childLanes=0,k.lanes=r,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=B.childLanes,k.lanes=B.lanes,k.child=B.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=B.memoizedProps,k.memoizedState=B.memoizedState,k.updateQueue=B.updateQueue,k.type=B.type,r=B.dependencies,k.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return xr(Er,Er.current&1|2),i.child}r=r.sibling}k.tail!==null&&fr()>cc&&(i.flags|=128,m=!0,nu(k,!1),i.lanes=4194304)}else{if(!m)if(r=_i(B),r!==null){if(i.flags|=128,m=!0,c=r.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),nu(k,!0),k.tail===null&&k.tailMode==="hidden"&&!B.alternate&&!Ue)return _s(i),null}else 2*fr()-k.renderingStartTime>cc&&c!==1073741824&&(i.flags|=128,m=!0,nu(k,!1),i.lanes=4194304);k.isBackwards?(B.sibling=i.child,i.child=B):(c=k.last,c!==null?c.sibling=B:i.child=B,k.last=B)}return k.tail!==null?(i=k.tail,k.rendering=i,k.tail=i.sibling,k.renderingStartTime=fr(),i.sibling=null,c=Er.current,xr(Er,m?c&1|2:c&1),i):(_s(i),null);case 22:case 23:return yh(),m=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(Si&1073741824)!==0&&(_s(i),i.subtreeFlags&6&&(i.flags|=8192)):_s(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function A1(r,i){switch(Ce(i),i.tag){case 1:return bs(i.type)&&Jl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return $i(),gr(ys),gr(Dn),eu(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Qc(i),null;case 13:if(gr(Er),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));nt()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return gr(Er),null;case 4:return $i(),null;case 10:return Fr(i.type._context),null;case 22:case 23:return yh(),null;case 24:return null;default:return null}}var $u=!1,Ns=!1,P1=typeof WeakSet=="function"?WeakSet:Set,at=null;function oc(r,i){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){un(r,i,m)}else c.current=null}function oh(r,i,c){try{c()}catch(m){un(r,i,m)}}var k0=!1;function C1(r,i){if(gl=Aa,r=an(),yi(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var b=m.anchorOffset,k=m.focusNode;m=m.focusOffset;try{c.nodeType,k.nodeType}catch{c=null;break e}var B=0,de=-1,_e=-1,Le=0,Ge=0,Ke=r,He=null;t:for(;;){for(var tt;Ke!==c||b!==0&&Ke.nodeType!==3||(de=B+b),Ke!==k||m!==0&&Ke.nodeType!==3||(_e=B+m),Ke.nodeType===3&&(B+=Ke.nodeValue.length),(tt=Ke.firstChild)!==null;)He=Ke,Ke=tt;for(;;){if(Ke===r)break t;if(He===c&&++Le===b&&(de=B),He===k&&++Ge===m&&(_e=B),(tt=Ke.nextSibling)!==null)break;Ke=He,He=Ke.parentNode}Ke=tt}c=de===-1||_e===-1?null:{start:de,end:_e}}else c=null}c=c||{start:0,end:0}}else c=null;for(ao={focusedElem:r,selectionRange:c},Aa=!1,at=i;at!==null;)if(i=at,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,at=r;else for(;at!==null;){i=at;try{var ut=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var pt=ut.memoizedProps,gn=ut.memoizedState,Pe=i.stateNode,ke=Pe.getSnapshotBeforeUpdate(i.elementType===i.type?pt:ma(i.type,pt),gn);Pe.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Ee=i.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Je){un(i,i.return,Je)}if(r=i.sibling,r!==null){r.return=i.return,at=r;break}at=i.return}return ut=k0,k0=!1,ut}function su(r,i,c){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&r)===r){var k=b.destroy;b.destroy=void 0,k!==void 0&&oh(i,c,k)}b=b.next}while(b!==m)}}function Wu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&r)===r){var m=c.create;c.destroy=m()}c=c.next}while(c!==i)}}function lh(r){var i=r.ref;if(i!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof i=="function"?i(r):i.current=r}}function S0(r){var i=r.alternate;i!==null&&(r.alternate=null,S0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[zi],delete i[Lo],delete i[xs],delete i[Vd],delete i[Gd])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function j0(r){return r.tag===5||r.tag===3||r.tag===4}function A0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||j0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ch(r,i,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(r,i):c.insertBefore(r,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(r,c)):(i=c,i.appendChild(r)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Eo));else if(m!==4&&(r=r.child,r!==null))for(ch(r,i,c),r=r.sibling;r!==null;)ch(r,i,c),r=r.sibling}function uh(r,i,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(uh(r,i,c),r=r.sibling;r!==null;)uh(r,i,c),r=r.sibling}var cs=null,ga=!1;function Mo(r,i,c){for(c=c.child;c!==null;)P0(r,i,c),c=c.sibling}function P0(r,i,c){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Li,c)}catch{}switch(c.tag){case 5:Ns||oc(c,i);case 6:var m=cs,b=ga;cs=null,Mo(r,i,c),cs=m,ga=b,cs!==null&&(ga?(r=cs,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):cs.removeChild(c.stateNode));break;case 18:cs!==null&&(ga?(r=cs,c=c.stateNode,r.nodeType===8?Kc(r.parentNode,c):r.nodeType===1&&Kc(r,c),ta(r)):Kc(cs,c.stateNode));break;case 4:m=cs,b=ga,cs=c.stateNode.containerInfo,ga=!0,Mo(r,i,c),cs=m,ga=b;break;case 0:case 11:case 14:case 15:if(!Ns&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var k=b,B=k.destroy;k=k.tag,B!==void 0&&((k&2)!==0||(k&4)!==0)&&oh(c,i,B),b=b.next}while(b!==m)}Mo(r,i,c);break;case 1:if(!Ns&&(oc(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(de){un(c,i,de)}Mo(r,i,c);break;case 21:Mo(r,i,c);break;case 22:c.mode&1?(Ns=(m=Ns)||c.memoizedState!==null,Mo(r,i,c),Ns=m):Mo(r,i,c);break;default:Mo(r,i,c)}}function C0(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new P1),i.forEach(function(m){var b=M1.bind(null,r,m);c.has(m)||(c.add(m),m.then(b,b))})}}function va(r,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var b=c[m];try{var k=r,B=i,de=B;e:for(;de!==null;){switch(de.tag){case 5:cs=de.stateNode,ga=!1;break e;case 3:cs=de.stateNode.containerInfo,ga=!0;break e;case 4:cs=de.stateNode.containerInfo,ga=!0;break e}de=de.return}if(cs===null)throw Error(t(160));P0(k,B,b),cs=null,ga=!1;var _e=b.alternate;_e!==null&&(_e.return=null),b.return=null}catch(Le){un(b,i,Le)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)E0(i,r),i=i.sibling}function E0(r,i){var c=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(va(i,r),Ba(r),m&4){try{su(3,r,r.return),Wu(3,r)}catch(pt){un(r,r.return,pt)}try{su(5,r,r.return)}catch(pt){un(r,r.return,pt)}}break;case 1:va(i,r),Ba(r),m&512&&c!==null&&oc(c,c.return);break;case 5:if(va(i,r),Ba(r),m&512&&c!==null&&oc(c,c.return),r.flags&32){var b=r.stateNode;try{mt(b,"")}catch(pt){un(r,r.return,pt)}}if(m&4&&(b=r.stateNode,b!=null)){var k=r.memoizedProps,B=c!==null?c.memoizedProps:k,de=r.type,_e=r.updateQueue;if(r.updateQueue=null,_e!==null)try{de==="input"&&k.type==="radio"&&k.name!=null&&Ye(b,k),ht(de,B);var Le=ht(de,k);for(B=0;B<_e.length;B+=2){var Ge=_e[B],Ke=_e[B+1];Ge==="style"?Et(b,Ke):Ge==="dangerouslySetInnerHTML"?lt(b,Ke):Ge==="children"?mt(b,Ke):R(b,Ge,Ke,Le)}switch(de){case"input":bt(b,k);break;case"textarea":Ut(b,k);break;case"select":var He=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!k.multiple;var tt=k.value;tt!=null?et(b,!!k.multiple,tt,!1):He!==!!k.multiple&&(k.defaultValue!=null?et(b,!!k.multiple,k.defaultValue,!0):et(b,!!k.multiple,k.multiple?[]:"",!1))}b[Lo]=k}catch(pt){un(r,r.return,pt)}}break;case 6:if(va(i,r),Ba(r),m&4){if(r.stateNode===null)throw Error(t(162));b=r.stateNode,k=r.memoizedProps;try{b.nodeValue=k}catch(pt){un(r,r.return,pt)}}break;case 3:if(va(i,r),Ba(r),m&4&&c!==null&&c.memoizedState.isDehydrated)try{ta(i.containerInfo)}catch(pt){un(r,r.return,pt)}break;case 4:va(i,r),Ba(r);break;case 13:va(i,r),Ba(r),b=r.child,b.flags&8192&&(k=b.memoizedState!==null,b.stateNode.isHidden=k,!k||b.alternate!==null&&b.alternate.memoizedState!==null||(fh=fr())),m&4&&C0(r);break;case 22:if(Ge=c!==null&&c.memoizedState!==null,r.mode&1?(Ns=(Le=Ns)||Ge,va(i,r),Ns=Le):va(i,r),Ba(r),m&8192){if(Le=r.memoizedState!==null,(r.stateNode.isHidden=Le)&&!Ge&&(r.mode&1)!==0)for(at=r,Ge=r.child;Ge!==null;){for(Ke=at=Ge;at!==null;){switch(He=at,tt=He.child,He.tag){case 0:case 11:case 14:case 15:su(4,He,He.return);break;case 1:oc(He,He.return);var ut=He.stateNode;if(typeof ut.componentWillUnmount=="function"){m=He,c=He.return;try{i=m,ut.props=i.memoizedProps,ut.state=i.memoizedState,ut.componentWillUnmount()}catch(pt){un(m,c,pt)}}break;case 5:oc(He,He.return);break;case 22:if(He.memoizedState!==null){T0(Ke);continue}}tt!==null?(tt.return=He,at=tt):T0(Ke)}Ge=Ge.sibling}e:for(Ge=null,Ke=r;;){if(Ke.tag===5){if(Ge===null){Ge=Ke;try{b=Ke.stateNode,Le?(k=b.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(de=Ke.stateNode,_e=Ke.memoizedProps.style,B=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,de.style.display=Kt("display",B))}catch(pt){un(r,r.return,pt)}}}else if(Ke.tag===6){if(Ge===null)try{Ke.stateNode.nodeValue=Le?"":Ke.memoizedProps}catch(pt){un(r,r.return,pt)}}else if((Ke.tag!==22&&Ke.tag!==23||Ke.memoizedState===null||Ke===r)&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===r)break e;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===r)break e;Ge===Ke&&(Ge=null),Ke=Ke.return}Ge===Ke&&(Ge=null),Ke.sibling.return=Ke.return,Ke=Ke.sibling}}break;case 19:va(i,r),Ba(r),m&4&&C0(r);break;case 21:break;default:va(i,r),Ba(r)}}function Ba(r){var i=r.flags;if(i&2){try{e:{for(var c=r.return;c!==null;){if(j0(c)){var m=c;break e}c=c.return}throw Error(t(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(mt(b,""),m.flags&=-33);var k=A0(r);uh(r,k,b);break;case 3:case 4:var B=m.stateNode.containerInfo,de=A0(r);ch(r,de,B);break;default:throw Error(t(161))}}catch(_e){un(r,r.return,_e)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function E1(r,i,c){at=r,L0(r)}function L0(r,i,c){for(var m=(r.mode&1)!==0;at!==null;){var b=at,k=b.child;if(b.tag===22&&m){var B=b.memoizedState!==null||$u;if(!B){var de=b.alternate,_e=de!==null&&de.memoizedState!==null||Ns;de=$u;var Le=Ns;if($u=B,(Ns=_e)&&!Le)for(at=b;at!==null;)B=at,_e=B.child,B.tag===22&&B.memoizedState!==null?O0(b):_e!==null?(_e.return=B,at=_e):O0(b);for(;k!==null;)at=k,L0(k),k=k.sibling;at=b,$u=de,Ns=Le}D0(r)}else(b.subtreeFlags&8772)!==0&&k!==null?(k.return=b,at=k):D0(r)}}function D0(r){for(;at!==null;){var i=at;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ns||Wu(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!Ns)if(c===null)m.componentDidMount();else{var b=i.elementType===i.type?c.memoizedProps:ma(i.type,c.memoizedProps);m.componentDidUpdate(b,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var k=i.updateQueue;k!==null&&ti(i,k,m);break;case 3:var B=i.updateQueue;if(B!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}ti(i,B,c)}break;case 5:var de=i.stateNode;if(c===null&&i.flags&4){c=de;var _e=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&c.focus();break;case"img":_e.src&&(c.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Le=i.alternate;if(Le!==null){var Ge=Le.memoizedState;if(Ge!==null){var Ke=Ge.dehydrated;Ke!==null&&ta(Ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ns||i.flags&512&&lh(i)}catch(He){un(i,i.return,He)}}if(i===r){at=null;break}if(c=i.sibling,c!==null){c.return=i.return,at=c;break}at=i.return}}function T0(r){for(;at!==null;){var i=at;if(i===r){at=null;break}var c=i.sibling;if(c!==null){c.return=i.return,at=c;break}at=i.return}}function O0(r){for(;at!==null;){var i=at;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{Wu(4,i)}catch(_e){un(i,c,_e)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var b=i.return;try{m.componentDidMount()}catch(_e){un(i,b,_e)}}var k=i.return;try{lh(i)}catch(_e){un(i,k,_e)}break;case 5:var B=i.return;try{lh(i)}catch(_e){un(i,B,_e)}}}catch(_e){un(i,i.return,_e)}if(i===r){at=null;break}var de=i.sibling;if(de!==null){de.return=i.return,at=de;break}at=i.return}}var L1=Math.ceil,Hu=z.ReactCurrentDispatcher,dh=z.ReactCurrentOwner,Vi=z.ReactCurrentBatchConfig,lr=0,Vn=null,kn=null,us=0,Si=0,lc=bi(0),On=0,iu=null,_l=0,Vu=0,hh=0,au=null,ni=null,fh=0,cc=1/0,fo=null,Gu=!1,ph=null,Uo=null,Yu=!1,Bo=null,Ku=0,ou=0,mh=null,Ju=-1,Xu=0;function qs(){return(lr&6)!==0?fr():Ju!==-1?Ju:Ju=fr()}function qo(r){return(r.mode&1)===0?1:(lr&2)!==0&&us!==0?us&-us:en.transition!==null?(Xu===0&&(Xu=Va()),Xu):(r=Jt,r!==0||(r=window.event,r=r===void 0?16:Ca(r.type)),r)}function xa(r,i,c,m){if(50<ou)throw ou=0,mh=null,Error(t(185));Oi(r,c,m),((lr&2)===0||r!==Vn)&&(r===Vn&&((lr&2)===0&&(Vu|=c),On===4&&zo(r,us)),si(r,m),c===1&&lr===0&&(i.mode&1)===0&&(cc=fr()+500,xl&&j()))}function si(r,i){var c=r.callbackNode;Vr(r,i);var m=Di(r,r===Vn?us:0);if(m===0)c!==null&&ci(c),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(c!=null&&ci(c),i===1)r.tag===0?_(F0.bind(null,r)):v(F0.bind(null,r)),Wd(function(){(lr&6)===0&&j()}),c=null;else{switch(Fi(m)){case 1:c=Xi;break;case 4:c=Pr;break;case 16:c=Ws;break;case 536870912:c=ui;break;default:c=Ws}c=W0(c,I0.bind(null,r))}r.callbackPriority=i,r.callbackNode=c}}function I0(r,i){if(Ju=-1,Xu=0,(lr&6)!==0)throw Error(t(327));var c=r.callbackNode;if(uc()&&r.callbackNode!==c)return null;var m=Di(r,r===Vn?us:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||i)i=Qu(r,m);else{i=m;var b=lr;lr|=2;var k=M0();(Vn!==r||us!==i)&&(fo=null,cc=fr()+500,kl(r,i));do try{O1();break}catch(de){R0(r,de)}while(!0);ar(),Hu.current=k,lr=b,kn!==null?i=0:(Vn=null,us=0,i=On)}if(i!==0){if(i===2&&(b=Cs(r),b!==0&&(m=b,i=gh(r,b))),i===1)throw c=iu,kl(r,0),zo(r,m),si(r,fr()),c;if(i===6)zo(r,m);else{if(b=r.current.alternate,(m&30)===0&&!D1(b)&&(i=Qu(r,m),i===2&&(k=Cs(r),k!==0&&(m=k,i=gh(r,k))),i===1))throw c=iu,kl(r,0),zo(r,m),si(r,fr()),c;switch(r.finishedWork=b,r.finishedLanes=m,i){case 0:case 1:throw Error(t(345));case 2:Sl(r,ni,fo);break;case 3:if(zo(r,m),(m&130023424)===m&&(i=fh+500-fr(),10<i)){if(Di(r,0)!==0)break;if(b=r.suspendedLanes,(b&m)!==m){qs(),r.pingedLanes|=r.suspendedLanes&b;break}r.timeoutHandle=Yc(Sl.bind(null,r,ni,fo),i);break}Sl(r,ni,fo);break;case 4:if(zo(r,m),(m&4194240)===m)break;for(i=r.eventTimes,b=-1;0<m;){var B=31-Br(m);k=1<<B,B=i[B],B>b&&(b=B),m&=~k}if(m=b,m=fr()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*L1(m/1960))-m,10<m){r.timeoutHandle=Yc(Sl.bind(null,r,ni,fo),m);break}Sl(r,ni,fo);break;case 5:Sl(r,ni,fo);break;default:throw Error(t(329))}}}return si(r,fr()),r.callbackNode===c?I0.bind(null,r):null}function gh(r,i){var c=au;return r.current.memoizedState.isDehydrated&&(kl(r,i).flags|=256),r=Qu(r,i),r!==2&&(i=ni,ni=c,i!==null&&vh(i)),r}function vh(r){ni===null?ni=r:ni.push.apply(ni,r)}function D1(r){for(var i=r;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var b=c[m],k=b.getSnapshot;b=b.value;try{if(!Gr(k(),b))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zo(r,i){for(i&=~hh,i&=~Vu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var c=31-Br(i),m=1<<c;r[c]=-1,i&=~m}}function F0(r){if((lr&6)!==0)throw Error(t(327));uc();var i=Di(r,0);if((i&1)===0)return si(r,fr()),null;var c=Qu(r,i);if(r.tag!==0&&c===2){var m=Cs(r);m!==0&&(i=m,c=gh(r,m))}if(c===1)throw c=iu,kl(r,0),zo(r,i),si(r,fr()),c;if(c===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Sl(r,ni,fo),si(r,fr()),null}function xh(r,i){var c=lr;lr|=1;try{return r(i)}finally{lr=c,lr===0&&(cc=fr()+500,xl&&j())}}function Nl(r){Bo!==null&&Bo.tag===0&&(lr&6)===0&&uc();var i=lr;lr|=1;var c=Vi.transition,m=Jt;try{if(Vi.transition=null,Jt=1,r)return r()}finally{Jt=m,Vi.transition=c,lr=i,(lr&6)===0&&j()}}function yh(){Si=lc.current,gr(lc)}function kl(r,i){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,Eu(c)),kn!==null)for(c=kn.return;c!==null;){var m=c;switch(Ce(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Jl();break;case 3:$i(),gr(ys),gr(Dn),eu();break;case 5:Qc(m);break;case 4:$i();break;case 13:gr(Er);break;case 19:gr(Er);break;case 10:Fr(m.type._context);break;case 22:case 23:yh()}c=c.return}if(Vn=r,kn=r=$o(r.current,null),us=Si=i,On=0,iu=null,hh=Vu=_l=0,ni=au=null,Nr!==null){for(i=0;i<Nr.length;i++)if(c=Nr[i],m=c.interleaved,m!==null){c.interleaved=null;var b=m.next,k=c.pending;if(k!==null){var B=k.next;k.next=b,m.next=B}c.pending=m}Nr=null}return r}function R0(r,i){do{var c=kn;try{if(ar(),Xl.current=Uu,Io){for(var m=Rr.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}Io=!1}if(Wi=0,sn=cn=Rr=null,fa=!1,Fo=0,dh.current=null,c===null||c.return===null){On=1,iu=i,kn=null;break}e:{var k=r,B=c.return,de=c,_e=i;if(i=us,de.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Le=_e,Ge=de,Ke=Ge.tag;if((Ge.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var He=Ge.alternate;He?(Ge.updateQueue=He.updateQueue,Ge.memoizedState=He.memoizedState,Ge.lanes=He.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var tt=l0(B);if(tt!==null){tt.flags&=-257,c0(tt,B,de,k,i),tt.mode&1&&o0(k,Le,i),i=tt,_e=Le;var ut=i.updateQueue;if(ut===null){var pt=new Set;pt.add(_e),i.updateQueue=pt}else ut.add(_e);break e}else{if((i&1)===0){o0(k,Le,i),bh();break e}_e=Error(t(426))}}else if(Ue&&de.mode&1){var gn=l0(B);if(gn!==null){(gn.flags&65536)===0&&(gn.flags|=256),c0(gn,B,de,k,i),Qe(ac(_e,de));break e}}k=_e=ac(_e,de),On!==4&&(On=2),au===null?au=[k]:au.push(k),k=B;do{switch(k.tag){case 3:k.flags|=65536,i&=-i,k.lanes|=i;var Pe=i0(k,_e,i);Sr(k,Pe);break e;case 1:de=_e;var ke=k.type,Ee=k.stateNode;if((k.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Uo===null||!Uo.has(Ee)))){k.flags|=65536,i&=-i,k.lanes|=i;var Je=a0(k,de,i);Sr(k,Je);break e}}k=k.return}while(k!==null)}B0(c)}catch(xt){i=xt,kn===c&&c!==null&&(kn=c=c.return);continue}break}while(!0)}function M0(){var r=Hu.current;return Hu.current=Uu,r===null?Uu:r}function bh(){(On===0||On===3||On===2)&&(On=4),Vn===null||(_l&268435455)===0&&(Vu&268435455)===0||zo(Vn,us)}function Qu(r,i){var c=lr;lr|=2;var m=M0();(Vn!==r||us!==i)&&(fo=null,kl(r,i));do try{T1();break}catch(b){R0(r,b)}while(!0);if(ar(),lr=c,Hu.current=m,kn!==null)throw Error(t(261));return Vn=null,us=0,On}function T1(){for(;kn!==null;)U0(kn)}function O1(){for(;kn!==null&&!Ei();)U0(kn)}function U0(r){var i=$0(r.alternate,r,Si);r.memoizedProps=r.pendingProps,i===null?B0(r):kn=i,dh.current=null}function B0(r){var i=r;do{var c=i.alternate;if(r=i.return,(i.flags&32768)===0){if(c=j1(c,i,Si),c!==null){kn=c;return}}else{if(c=A1(c,i),c!==null){c.flags&=32767,kn=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{On=6,kn=null;return}}if(i=i.sibling,i!==null){kn=i;return}kn=i=r}while(i!==null);On===0&&(On=5)}function Sl(r,i,c){var m=Jt,b=Vi.transition;try{Vi.transition=null,Jt=1,I1(r,i,c,m)}finally{Vi.transition=b,Jt=m}return null}function I1(r,i,c,m){do uc();while(Bo!==null);if((lr&6)!==0)throw Error(t(327));c=r.finishedWork;var b=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var k=c.lanes|c.childLanes;if(Es(r,k),r===Vn&&(kn=Vn=null,us=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Yu||(Yu=!0,W0(Ws,function(){return uc(),null})),k=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||k){k=Vi.transition,Vi.transition=null;var B=Jt;Jt=1;var de=lr;lr|=4,dh.current=null,C1(r,c),E0(c,r),ll(ao),Aa=!!gl,ao=gl=null,r.current=c,E1(c),nl(),lr=de,Jt=B,Vi.transition=k}else r.current=c;if(Yu&&(Yu=!1,Bo=r,Ku=b),k=r.pendingLanes,k===0&&(Uo=null),di(c.stateNode),si(r,fr()),i!==null)for(m=r.onRecoverableError,c=0;c<i.length;c++)b=i[c],m(b.value,{componentStack:b.stack,digest:b.digest});if(Gu)throw Gu=!1,r=ph,ph=null,r;return(Ku&1)!==0&&r.tag!==0&&uc(),k=r.pendingLanes,(k&1)!==0?r===mh?ou++:(ou=0,mh=r):ou=0,j(),null}function uc(){if(Bo!==null){var r=Fi(Ku),i=Vi.transition,c=Jt;try{if(Vi.transition=null,Jt=16>r?16:r,Bo===null)var m=!1;else{if(r=Bo,Bo=null,Ku=0,(lr&6)!==0)throw Error(t(331));var b=lr;for(lr|=4,at=r.current;at!==null;){var k=at,B=k.child;if((at.flags&16)!==0){var de=k.deletions;if(de!==null){for(var _e=0;_e<de.length;_e++){var Le=de[_e];for(at=Le;at!==null;){var Ge=at;switch(Ge.tag){case 0:case 11:case 15:su(8,Ge,k)}var Ke=Ge.child;if(Ke!==null)Ke.return=Ge,at=Ke;else for(;at!==null;){Ge=at;var He=Ge.sibling,tt=Ge.return;if(S0(Ge),Ge===Le){at=null;break}if(He!==null){He.return=tt,at=He;break}at=tt}}}var ut=k.alternate;if(ut!==null){var pt=ut.child;if(pt!==null){ut.child=null;do{var gn=pt.sibling;pt.sibling=null,pt=gn}while(pt!==null)}}at=k}}if((k.subtreeFlags&2064)!==0&&B!==null)B.return=k,at=B;else e:for(;at!==null;){if(k=at,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:su(9,k,k.return)}var Pe=k.sibling;if(Pe!==null){Pe.return=k.return,at=Pe;break e}at=k.return}}var ke=r.current;for(at=ke;at!==null;){B=at;var Ee=B.child;if((B.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=B,at=Ee;else e:for(B=ke;at!==null;){if(de=at,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:Wu(9,de)}}catch(xt){un(de,de.return,xt)}if(de===B){at=null;break e}var Je=de.sibling;if(Je!==null){Je.return=de.return,at=Je;break e}at=de.return}}if(lr=b,j(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Li,r)}catch{}m=!0}return m}finally{Jt=c,Vi.transition=i}}return!1}function q0(r,i,c){i=ac(c,i),i=i0(r,i,1),r=rn(r,i,1),i=qs(),r!==null&&(Oi(r,1,i),si(r,i))}function un(r,i,c){if(r.tag===3)q0(r,r,c);else for(;i!==null;){if(i.tag===3){q0(i,r,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Uo===null||!Uo.has(m))){r=ac(c,r),r=a0(i,r,1),i=rn(i,r,1),r=qs(),i!==null&&(Oi(i,1,r),si(i,r));break}}i=i.return}}function F1(r,i,c){var m=r.pingCache;m!==null&&m.delete(i),i=qs(),r.pingedLanes|=r.suspendedLanes&c,Vn===r&&(us&c)===c&&(On===4||On===3&&(us&130023424)===us&&500>fr()-fh?kl(r,0):hh|=c),si(r,i)}function z0(r,i){i===0&&((r.mode&1)===0?i=1:(i=Mn,Mn<<=1,(Mn&130023424)===0&&(Mn=4194304)));var c=qs();r=kr(r,i),r!==null&&(Oi(r,i,c),si(r,c))}function R1(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),z0(r,c)}function M1(r,i){var c=0;switch(r.tag){case 13:var m=r.stateNode,b=r.memoizedState;b!==null&&(c=b.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(i),z0(r,c)}var $0;$0=function(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps||ys.current)ri=!0;else{if((r.lanes&c)===0&&(i.flags&128)===0)return ri=!1,S1(r,i,c);ri=(r.flags&131072)!==0}else ri=!1,Ue&&(i.flags&1048576)!==0&&je(i,K,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;zu(r,i),r=i.pendingProps;var b=To(i,Dn.current);Jr(i,c),b=yl(null,i,m,r,b,c);var k=Hi();return i.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,bs(m)?(k=!0,co(i)):k=!1,i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Tn(i),b.updater=Bu,i.stateNode=b,b._reactInternals=i,Xd(i,m,r,c),i=th(null,i,m,!0,k,c)):(i.tag=0,Ue&&k&&Me(i),Bs(null,i,b,c),i=i.child),i;case 16:m=i.elementType;e:{switch(zu(r,i),r=i.pendingProps,b=m._init,m=b(m._payload),i.type=m,b=i.tag=B1(m),r=ma(m,r),b){case 0:i=eh(null,i,m,r,c);break e;case 1:i=m0(null,i,m,r,c);break e;case 11:i=u0(null,i,m,r,c);break e;case 14:i=d0(null,i,m,ma(m.type,r),c);break e}throw Error(t(306,m,""))}return i;case 0:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ma(m,b),eh(r,i,m,b,c);case 1:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ma(m,b),m0(r,i,m,b,c);case 3:e:{if(g0(i),r===null)throw Error(t(387));m=i.pendingProps,k=i.memoizedState,b=k.element,ws(r,i),Hn(i,m,null,c);var B=i.memoizedState;if(m=B.element,k.isDehydrated)if(k={element:m,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},i.updateQueue.baseState=k,i.memoizedState=k,i.flags&256){b=ac(Error(t(423)),i),i=v0(r,i,m,c,b);break e}else if(m!==b){b=ac(Error(t(424)),i),i=v0(r,i,m,c,b);break e}else for(Fe=ls(i.stateNode.containerInfo.firstChild),Oe=i,Ue=!0,Be=null,c=$r(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(nt(),m===b){i=ho(r,i,c);break e}Bs(r,i,m,c)}i=i.child}return i;case 5:return Ou(i),r===null&&ct(i),m=i.type,b=i.pendingProps,k=r!==null?r.memoizedProps:null,B=b.children,Gc(m,b)?B=null:k!==null&&Gc(m,k)&&(i.flags|=32),p0(r,i),Bs(r,i,B,c),i.child;case 6:return r===null&&ct(i),null;case 13:return x0(r,i,c);case 4:return Oo(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=on(i,null,m,c):Bs(r,i,m,c),i.child;case 11:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ma(m,b),u0(r,i,m,b,c);case 7:return Bs(r,i,i.pendingProps,c),i.child;case 8:return Bs(r,i,i.pendingProps.children,c),i.child;case 12:return Bs(r,i,i.pendingProps.children,c),i.child;case 10:e:{if(m=i.type._context,b=i.pendingProps,k=i.memoizedProps,B=b.value,xr(pn,m._currentValue),m._currentValue=B,k!==null)if(Gr(k.value,B)){if(k.children===b.children&&!ys.current){i=ho(r,i,c);break e}}else for(k=i.child,k!==null&&(k.return=i);k!==null;){var de=k.dependencies;if(de!==null){B=k.child;for(var _e=de.firstContext;_e!==null;){if(_e.context===m){if(k.tag===1){_e=tn(-1,c&-c),_e.tag=2;var Le=k.updateQueue;if(Le!==null){Le=Le.shared;var Ge=Le.pending;Ge===null?_e.next=_e:(_e.next=Ge.next,Ge.next=_e),Le.pending=_e}}k.lanes|=c,_e=k.alternate,_e!==null&&(_e.lanes|=c),or(k.return,c,i),de.lanes|=c;break}_e=_e.next}}else if(k.tag===10)B=k.type===i.type?null:k.child;else if(k.tag===18){if(B=k.return,B===null)throw Error(t(341));B.lanes|=c,de=B.alternate,de!==null&&(de.lanes|=c),or(B,c,i),B=k.sibling}else B=k.child;if(B!==null)B.return=k;else for(B=k;B!==null;){if(B===i){B=null;break}if(k=B.sibling,k!==null){k.return=B.return,B=k;break}B=B.return}k=B}Bs(r,i,b.children,c),i=i.child}return i;case 9:return b=i.type,m=i.pendingProps.children,Jr(i,c),b=Xr(b),m=m(b),i.flags|=1,Bs(r,i,m,c),i.child;case 14:return m=i.type,b=ma(m,i.pendingProps),b=ma(m.type,b),d0(r,i,m,b,c);case 15:return h0(r,i,i.type,i.pendingProps,c);case 17:return m=i.type,b=i.pendingProps,b=i.elementType===m?b:ma(m,b),zu(r,i),i.tag=1,bs(m)?(r=!0,co(i)):r=!1,Jr(i,c),n0(i,m,b),Xd(i,m,b,c),th(null,i,m,!0,r,c);case 19:return b0(r,i,c);case 22:return f0(r,i,c)}throw Error(t(156,i.tag))};function W0(r,i){return li(r,i)}function U1(r,i,c,m){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,i,c,m){return new U1(r,i,c,m)}function wh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function B1(r){if(typeof r=="function")return wh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===T)return 11;if(r===Q)return 14}return 2}function $o(r,i){var c=r.alternate;return c===null?(c=Gi(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Zu(r,i,c,m,b,k){var B=2;if(m=r,typeof r=="function")wh(r)&&(B=1);else if(typeof r=="string")B=5;else e:switch(r){case ee:return jl(c.children,b,k,i);case $:B=8,b|=8;break;case J:return r=Gi(12,c,i,b|2),r.elementType=J,r.lanes=k,r;case te:return r=Gi(13,c,i,b),r.elementType=te,r.lanes=k,r;case H:return r=Gi(19,c,i,b),r.elementType=H,r.lanes=k,r;case pe:return ed(c,b,k,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ne:B=10;break e;case O:B=9;break e;case T:B=11;break e;case Q:B=14;break e;case X:B=16,m=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Gi(B,c,i,b),i.elementType=r,i.type=m,i.lanes=k,i}function jl(r,i,c,m){return r=Gi(7,r,m,i),r.lanes=c,r}function ed(r,i,c,m){return r=Gi(22,r,m,i),r.elementType=pe,r.lanes=c,r.stateNode={isHidden:!1},r}function _h(r,i,c){return r=Gi(6,r,null,i),r.lanes=c,r}function Nh(r,i,c){return i=Gi(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function q1(r,i,c,m,b){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ti(0),this.expirationTimes=Ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function kh(r,i,c,m,b,k,B,de,_e){return r=new q1(r,i,c,de,_e),i===1?(i=1,k===!0&&(i|=8)):i=0,k=Gi(3,null,null,i),r.current=k,k.stateNode=r,k.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tn(k),r}function z1(r,i,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:m==null?null:""+m,children:r,containerInfo:i,implementation:c}}function H0(r){if(!r)return Ra;r=r._reactInternals;e:{if(Hr(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(bs(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var c=r.type;if(bs(c))return Xc(r,c,i)}return i}function V0(r,i,c,m,b,k,B,de,_e){return r=kh(c,m,!0,r,b,k,B,de,_e),r.context=H0(null),c=r.current,m=qs(),b=qo(c),k=tn(m,b),k.callback=i??null,rn(c,k,b),r.current.lanes=b,Oi(r,b,m),si(r,m),r}function td(r,i,c,m){var b=i.current,k=qs(),B=qo(b);return c=H0(c),i.context===null?i.context=c:i.pendingContext=c,i=tn(k,B),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=rn(b,i,B),r!==null&&(xa(r,b,B,k),Wn(r,b,B)),B}function rd(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function G0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function Sh(r,i){G0(r,i),(r=r.alternate)&&G0(r,i)}function $1(){return null}var Y0=typeof reportError=="function"?reportError:function(r){console.error(r)};function jh(r){this._internalRoot=r}nd.prototype.render=jh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));td(r,i,null,null)},nd.prototype.unmount=jh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Nl(function(){td(null,r,null,null)}),i[zn]=null}};function nd(r){this._internalRoot=r}nd.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ya();r={blockedOn:null,target:r,priority:i};for(var c=0;c<Gs.length&&i!==0&&i<Gs[c].priority;c++);Gs.splice(c,0,r),c===0&&wo(r)}};function Ah(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function sd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function K0(){}function W1(r,i,c,m,b){if(b){if(typeof m=="function"){var k=m;m=function(){var Le=rd(B);k.call(Le)}}var B=V0(i,m,r,0,null,!1,!1,"",K0);return r._reactRootContainer=B,r[zn]=B.current,so(r.nodeType===8?r.parentNode:r),Nl(),B}for(;b=r.lastChild;)r.removeChild(b);if(typeof m=="function"){var de=m;m=function(){var Le=rd(_e);de.call(Le)}}var _e=kh(r,0,!1,null,null,!1,!1,"",K0);return r._reactRootContainer=_e,r[zn]=_e.current,so(r.nodeType===8?r.parentNode:r),Nl(function(){td(i,_e,c,m)}),_e}function id(r,i,c,m,b){var k=c._reactRootContainer;if(k){var B=k;if(typeof b=="function"){var de=b;b=function(){var _e=rd(B);de.call(_e)}}td(i,B,r,b)}else B=W1(c,i,r,b,m);return rd(B)}hi=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var c=Vs(i.pendingLanes);c!==0&&(Ii(i,c|1),si(i,fr()),(lr&6)===0&&(cc=fr()+500,j()))}break;case 13:Nl(function(){var m=kr(r,1);if(m!==null){var b=qs();xa(m,r,1,b)}}),Sh(r,1)}},Qi=function(r){if(r.tag===13){var i=kr(r,134217728);if(i!==null){var c=qs();xa(i,r,134217728,c)}Sh(r,134217728)}},Ga=function(r){if(r.tag===13){var i=qo(r),c=kr(r,i);if(c!==null){var m=qs();xa(c,r,i,m)}Sh(r,i)}},Ya=function(){return Jt},Ls=function(r,i){var c=Jt;try{return Jt=r,i()}finally{Jt=c}},Ft=function(r,i,c){switch(i){case"input":if(bt(r,c),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==r&&m.form===r.form){var b=vl(m);if(!b)throw Error(t(90));Re(m),bt(m,b)}}}break;case"textarea":Ut(r,c);break;case"select":i=c.value,i!=null&&et(r,!!c.multiple,i,!1)}},tr=xh,Fn=Nl;var H1={usingClientEntryPoint:!1,Events:[Do,oo,vl,nr,Ji,xh]},lu={findFiberByHostInstance:Fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V1={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=En(r),r===null?null:r.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{Li=ad.inject(V1),es=ad}catch{}}return ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H1,ii.createPortal=function(r,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ah(i))throw Error(t(200));return z1(r,i,null,c)},ii.createRoot=function(r,i){if(!Ah(r))throw Error(t(299));var c=!1,m="",b=Y0;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=kh(r,1,!1,null,null,c,!1,m,b),r[zn]=i.current,so(r.nodeType===8?r.parentNode:r),new jh(i)},ii.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=En(i),r=r===null?null:r.stateNode,r},ii.flushSync=function(r){return Nl(r)},ii.hydrate=function(r,i,c){if(!sd(i))throw Error(t(200));return id(null,r,i,!0,c)},ii.hydrateRoot=function(r,i,c){if(!Ah(r))throw Error(t(405));var m=c!=null&&c.hydratedSources||null,b=!1,k="",B=Y0;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(k=c.identifierPrefix),c.onRecoverableError!==void 0&&(B=c.onRecoverableError)),i=V0(i,null,r,1,c??null,b,!1,k,B),r[zn]=i.current,so(r),m)for(r=0;r<m.length;r++)c=m[r],b=c._getVersion,b=b(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,b]:i.mutableSourceEagerHydrationData.push(c,b);return new nd(i)},ii.render=function(r,i,c){if(!sd(i))throw Error(t(200));return id(null,r,i,!1,c)},ii.unmountComponentAtNode=function(r){if(!sd(r))throw Error(t(40));return r._reactRootContainer?(Nl(function(){id(null,null,r,!1,function(){r._reactRootContainer=null,r[zn]=null})}),!0):!1},ii.unstable_batchedUpdates=xh,ii.unstable_renderSubtreeIntoContainer=function(r,i,c,m){if(!sd(c))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return id(r,i,c,!1,m)},ii.version="18.3.1-next-f1338f8080-20240426",ii}var np;function t2(){if(np)return Eh.exports;np=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Eh.exports=e2(),Eh.exports}var sp;function r2(){if(sp)return od;sp=1;var n=t2();return od.createRoot=n.createRoot,od.hydrateRoot=n.hydrateRoot,od}var n2=r2();const s2=Nu(n2),i2="modulepreload",a2=function(n){return"/"+n},ip={},Zo=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");a=p(t.map(g=>{if(g=a2(g),g in ip)return;ip[g]=!0;const x=g.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${w}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":i2,x||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),x)return new Promise((y,E)=>{S.addEventListener("load",y),S.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},o2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Zo(async()=>{const{default:s}=await Promise.resolve().then(()=>Rc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Mf extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ap extends Mf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class op extends Mf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lp extends Mf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ff;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ff||(ff={}));var l2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};class c2{constructor(e,{headers:t={},customFetch:s,region:a=ff.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=o2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return l2(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:o,method:u,body:d,signal:p}=s;let g={},{region:x}=s;x||(x=this.region);const w=new URL(`${this.url}/${t}`);x&&x!=="any"&&(g["x-region"]=x,w.searchParams.set("forceFunctionRegion",x));let S;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",S=d):typeof d=="string"?(g["Content-Type"]="text/plain",S=d):typeof FormData<"u"&&d instanceof FormData?S=d:(g["Content-Type"]="application/json",S=JSON.stringify(d)));const y=yield this.fetch(w.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:S,signal:p}).catch(A=>{throw A.name==="AbortError"?A:new ap(A)}),E=y.headers.get("x-relay-error");if(E&&E==="true")throw new op(y);if(!y.ok)throw new lp(y);let C=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),L;return C==="application/json"?L=yield y.json():C==="application/octet-stream"?L=yield y.blob():C==="text/event-stream"?L=y:C==="multipart/form-data"?L=yield y.formData():L=yield y.text(),{data:L,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ap(o)}:{data:null,error:o,response:o instanceof lp||o instanceof op?o.context:void 0}}})}}var Yn={},dc={},hc={},fc={},pc={},mc={},u2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fc=u2();const d2=Fc.fetch,eg=Fc.fetch.bind(Fc),tg=Fc.Headers,h2=Fc.Request,f2=Fc.Response,Rc=Object.freeze(Object.defineProperty({__proto__:null,Headers:tg,Request:h2,Response:f2,default:eg,fetch:d2},Symbol.toStringTag,{value:"Module"})),p2=Y1(Rc);var ld={},cp;function rg(){if(cp)return ld;cp=1,Object.defineProperty(ld,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return ld.default=n,ld}var up;function ng(){if(up)return mc;up=1;var n=mc&&mc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mc,"__esModule",{value:!0});const e=n(p2),t=n(rg());class s{constructor(o){var u,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(u=o.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=new Headers(this.headers),this.headers.set(o,u),this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var x,w,S,y;let E=null,C=null,L=null,A=g.status,U=g.statusText;if(g.ok){if(this.method!=="HEAD"){const le=await g.text();le===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?C=le:C=JSON.parse(le))}const z=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),he=(S=g.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");z&&he&&he.length>1&&(L=parseInt(he[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,L=null,A=406,U="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const z=await g.text();try{E=JSON.parse(z),Array.isArray(E)&&g.status===404&&(C=[],E=null,A=200,U="OK")}catch{g.status===404&&z===""?(A=204,U="No Content"):E={message:z}}if(E&&this.isMaybeSingle&&(!((y=E?.details)===null||y===void 0)&&y.includes("0 rows"))&&(E=null,A=200,U="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:C,count:L,status:A,statusText:U}});return this.shouldThrowOnError||(p=p.catch(g=>{var x,w,S;return{error:{message:`${(x=g?.name)!==null&&x!==void 0?x:"FetchError"}: ${g?.message}`,details:`${(w=g?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(S=g?.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),p.then(o,u)}returns(){return this}overrideTypes(){return this}}return mc.default=s,mc}var dp;function sg(){if(dp)return pc;dp=1;var n=pc&&pc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pc,"__esModule",{value:!0});const e=n(ng());class t extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:d,referencedTable:p=d}={}){const g=p?`${p}.order`:"order",x=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${x?`${x},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"offset":`${d}.offset`,g=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(g,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:d=!1,wal:p=!1,format:g="text"}={}){var x;const w=[a?"analyze":null,o?"verbose":null,u?"settings":null,d?"buffers":null,p?"wal":null].filter(Boolean).join("|"),S=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${S}"; options=${w};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return pc.default=t,pc}var hp;function Uf(){if(hp)return fc;hp=1;var n=fc&&fc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fc,"__esModule",{value:!0});const e=n(sg());class t extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const g=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${p}fts${g}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return fc.default=t,fc}var fp;function ig(){if(fp)return hc;fp=1;var n=hc&&hc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hc,"__esModule",{value:!0});const e=n(Uf());class t{constructor(a,{headers:o={},schema:u,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=u,this.fetch=d}select(a,o){const{head:u=!1,count:d}=o??{},p=u?"HEAD":"GET";let g=!1;const x=(a??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",x),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:u=!0}={}){var d;const p="POST";if(o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(g.length>0){const x=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:d,defaultToNull:p=!0}={}){var g;const x="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((S,y)=>S.concat(Object.keys(y)),[]);if(w.length>0){const S=[...new Set(w)].map(y=>`"${y}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:o}={}){var u;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var o;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return hc.default=t,hc}var pp;function m2(){if(pp)return dc;pp=1;var n=dc&&dc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(dc,"__esModule",{value:!0});const e=n(ig()),t=n(Uf());class s{constructor(o,{headers:u={},schema:d,fetch:p}={}){this.url=o,this.headers=new Headers(u),this.schemaName=d,this.fetch=p}from(o){const u=new URL(`${this.url}/${o}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,u={},{head:d=!1,get:p=!1,count:g}={}){var x;let w;const S=new URL(`${this.url}/rpc/${o}`);let y;d||p?(w=d?"HEAD":"GET",Object.entries(u).filter(([C,L])=>L!==void 0).map(([C,L])=>[C,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([C,L])=>{S.searchParams.append(C,L)})):(w="POST",y=u);const E=new Headers(this.headers);return g&&E.set("Prefer",`count=${g}`),new t.default({method:w,url:S,headers:E,schema:this.schemaName,body:y,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return dc.default=s,dc}var mp;function g2(){if(mp)return Yn;mp=1;var n=Yn&&Yn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.PostgrestError=Yn.PostgrestBuilder=Yn.PostgrestTransformBuilder=Yn.PostgrestFilterBuilder=Yn.PostgrestQueryBuilder=Yn.PostgrestClient=void 0;const e=n(m2());Yn.PostgrestClient=e.default;const t=n(ig());Yn.PostgrestQueryBuilder=t.default;const s=n(Uf());Yn.PostgrestFilterBuilder=s.default;const a=n(sg());Yn.PostgrestTransformBuilder=a.default;const o=n(ng());Yn.PostgrestBuilder=o.default;const u=n(rg());return Yn.PostgrestError=u.default,Yn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},Yn}var v2=g2();const x2=Nu(v2),{PostgrestClient:y2,PostgrestQueryBuilder:gw,PostgrestFilterBuilder:vw,PostgrestTransformBuilder:xw,PostgrestBuilder:yw,PostgrestError:bw}=x2;class b2{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const w2="2.75.0",_2=`realtime-js/${w2}`,N2="1.0.0",pf=1e4,k2=1e3,S2=100;var pu;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(pu||(pu={}));var In;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(In||(In={}));var wa;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(wa||(wa={}));var mf;(function(n){n.websocket="websocket"})(mf||(mf={}));var Dl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Dl||(Dl={}));class j2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2);let u=this.HEADER_LENGTH+2;const d=s.decode(e.slice(u,u+a));u=u+a;const p=s.decode(e.slice(u,u+o));u=u+o;const g=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:p,payload:g}}}class ag{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Mr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Mr||(Mr={}));const gp=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=A2(u,n,e,a),o),{}):{}},A2=(n,e,t,s)=>{const a=e.find(d=>d.name===n),o=a?.type,u=t[n];return o&&!s.includes(o)?og(o,u):gf(u)},og=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return L2(e,t)}switch(n){case Mr.bool:return P2(e);case Mr.float4:case Mr.float8:case Mr.int2:case Mr.int4:case Mr.int8:case Mr.numeric:case Mr.oid:return C2(e);case Mr.json:case Mr.jsonb:return E2(e);case Mr.timestamp:return D2(e);case Mr.abstime:case Mr.date:case Mr.daterange:case Mr.int4range:case Mr.int8range:case Mr.money:case Mr.reltime:case Mr.text:case Mr.time:case Mr.timestamptz:case Mr.timetz:case Mr.tsrange:case Mr.tstzrange:return gf(e);default:return gf(e)}},gf=n=>n,P2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},C2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},E2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},L2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let o;const u=n.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>og(e,d))}return n},D2=n=>typeof n=="string"?n.replace(" ","T"):n,lg=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Th{constructor(e,t,s={},a=pf){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(vp||(vp={}));class mu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mu.syncState(this.state,a,o,u),this.pendingDiffs.forEach(p=>{this.state=mu.syncDiff(this.state,p,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=mu.syncDiff(this.state,a,o,u),d())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),u=this.transformState(t),d={},p={};return this.map(o,(g,x)=>{u[g]||(p[g]=x)}),this.map(u,(g,x)=>{const w=o[g];if(w){const S=x.map(L=>L.presence_ref),y=w.map(L=>L.presence_ref),E=x.filter(L=>y.indexOf(L.presence_ref)<0),C=w.filter(L=>S.indexOf(L.presence_ref)<0);E.length>0&&(d[g]=E),C.length>0&&(p[g]=C)}else d[g]=x}),this.syncDiff(o,{joins:d,leaves:p},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,p)=>{var g;const x=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(p),x.length>0){const w=e[d].map(y=>y.presence_ref),S=x.filter(y=>w.indexOf(y.presence_ref)<0);e[d].unshift(...S)}s(d,x,p)}),this.map(u,(d,p)=>{let g=e[d];if(!g)return;const x=p.map(w=>w.presence_ref);g=g.filter(w=>x.indexOf(w.presence_ref)<0),e[d]=g,a(d,g,p),g.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xp;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(xp||(xp={}));var gu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(gu||(gu={}));var go;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(go||(go={}));class Bf{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=In.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Th(this,wa.join,this.params,this.timeout),this.rejoinTimer=new ag(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=In.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=In.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wa.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new mu(this),this.broadcastEndpointURL=lg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==In.closed){const{config:{broadcast:u,presence:d,private:p}}=this.params,g=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[gu.PRESENCE]&&this.bindings[gu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},S={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:x}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(go.CHANNEL_ERROR,y)),this._onClose(()=>e?.(go.CLOSED)),this.updateJoinPayload(Object.assign({config:S},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var E;if(this.socket.setAuth(),y===void 0){e?.(go.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,L=(E=C?.length)!==null&&E!==void 0?E:0,A=[];for(let U=0;U<L;U++){const R=C[U],{filter:{event:z,schema:he,table:le,filter:ee}}=R,$=y&&y[U];if($&&$.event===z&&$.schema===he&&$.table===le&&$.filter===ee)A.push(Object.assign(Object.assign({},R),{id:$.id}));else{this.unsubscribe(),this.state=In.errored,e?.(go.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(go.SUBSCRIBED);return}}).receive("error",y=>{this.state=In.errored,e?.(go.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(go.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===In.joined&&e===gu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,p;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||p===void 0)&&p.ack)&&o("ok"),g.receive("ok",()=>o("ok")),g.receive("error",()=>o("error")),g.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=In.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wa.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Th(this,wa.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=In.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Th(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>S2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const u=e.toLocaleLowerCase(),{close:d,error:p,leave:g,join:x}=wa;if(s&&[d,p,g,x].indexOf(u)>=0&&s!==this._joinRef())return;let S=this._onMessage(u,t,s);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var E,C,L;return((E=y.filter)===null||E===void 0?void 0:E.event)==="*"||((L=(C=y.filter)===null||C===void 0?void 0:C.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===u}).map(y=>y.callback(S,s)):(o=this.bindings[u])===null||o===void 0||o.filter(y=>{var E,C,L,A,U,R;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const z=y.id,he=(E=y.filter)===null||E===void 0?void 0:E.event;return z&&((C=t.ids)===null||C===void 0?void 0:C.includes(z))&&(he==="*"||he?.toLocaleLowerCase()===((L=t.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const z=(U=(A=y?.filter)===null||A===void 0?void 0:A.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return z==="*"||z===((R=t?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:C,table:L,commit_timestamp:A,type:U,errors:R}=E;S=Object.assign(Object.assign({},{schema:C,table:L,commit_timestamp:A,eventType:U,new:{},old:{},errors:R}),this._getPayloadRecords(E))}y.callback(S,s)})}_isClosed(){return this.state===In.closed}_isJoined(){return this.state===In.joined}_isJoining(){return this.state===In.joining}_isLeaving(){return this.state===In.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Bf.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(wa.close,{},e)}_onError(e){this._on(wa.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=In.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=gp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=gp(e.columns,e.old_record)),t}}const Oh=()=>{},cd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},T2=[1e3,2e3,5e3,1e4],O2=1e4,I2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pf,this.transport=null,this.heartbeatIntervalMs=cd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oh,this.ref=0,this.reconnectTimer=null,this.logger=Oh,this.conn=null,this.sendBuffer=[],this.serializer=new j2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...u)=>Zo(async()=>{const{default:d}=await Promise.resolve().then(()=>Rc);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...u)=>o(...u)},!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${mf.websocket}`,this.httpEndpoint=lg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=b2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:N2}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case pu.connecting:return Dl.Connecting;case pu.open:return Dl.Open;case pu.closing:return Dl.Closing;default:return Dl.Closed}}isConnected(){return this.connectionState()===Dl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new Bf(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,u=()=>{this.encode(e,d=>{var p;(p=this.conn)===null||p===void 0||p.send(d)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(k2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},cd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:u}=t,d=u?`(${u})`:"",p=o.status||"";this.log("receive",`${p} ${s} ${a} ${d}`.trim(),o),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(a,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(wa.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([I2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:_2};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(wa.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new ag(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,u,d,p,g,x;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:pf,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:cd.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Oh,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(w=>T2[w-1]||O2),this.encode=(g=e?.encode)!==null&&g!==void 0?g:((w,S)=>S(JSON.stringify(w))),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class qf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class R2 extends qf{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vf extends qf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var M2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};const cg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Zo(async()=>{const{default:s}=await Promise.resolve().then(()=>Rc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},U2=()=>M2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zo(()=>Promise.resolve().then(()=>Rc),void 0)).Response:Response}),xf=n=>{if(Array.isArray(n))return n.map(t=>xf(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=xf(s)}),e},B2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Bl=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};const Ih=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),q2=(n,e,t)=>Bl(void 0,void 0,void 0,function*(){const s=yield U2();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{const o=n.status||500,u=a?.statusCode||o+"";e(new R2(Ih(a),o,u))}).catch(a=>{e(new vf(Ih(a),a))}):e(new vf(Ih(n),n))}),z2=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||!s?a:(B2(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function ku(n,e,t,s,a,o){return Bl(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(t,z2(e,s,a,o)).then(p=>{if(!p.ok)throw p;return s?.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>q2(p,d,s))})})}function Cd(n,e,t,s){return Bl(this,void 0,void 0,function*(){return ku(n,"GET",e,t,s)})}function $a(n,e,t,s,a){return Bl(this,void 0,void 0,function*(){return ku(n,"POST",e,s,a,t)})}function yf(n,e,t,s,a){return Bl(this,void 0,void 0,function*(){return ku(n,"PUT",e,s,a,t)})}function $2(n,e,t,s){return Bl(this,void 0,void 0,function*(){return ku(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function ug(n,e,t,s,a){return Bl(this,void 0,void 0,function*(){return ku(n,"DELETE",e,s,a,t)})}var W2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};class H2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return W2(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}}var V2=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};class G2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new H2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return V2(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}}var ai=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};const Y2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class K2{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=cg(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return ai(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},yp),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),p&&o.append("metadata",this.encodeMetadata(p)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl),p&&o.append("metadata",this.encodeMetadata(p))):(o=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,p&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const g=this._removeEmptyFolders(t),x=this._getFinalPath(g),w=yield(e=="PUT"?yf:$a)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jn(o))return{data:null,error:o};throw o}})}upload(e,t,s){return ai(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return ai(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let p;const g=Object.assign({upsert:yp.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",g.cacheControl)):(p=s,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType);const w=yield yf(this.fetch,d.toString(),p,{headers:x});return{data:{path:o,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(jn(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,t){return ai(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield $a(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+o.url),d=u.searchParams.get("token");if(!d)throw new qf("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}update(e,t,s){return ai(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ai(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}copy(e,t,s){return ai(this,void 0,void 0,function*(){try{return{data:{path:(yield $a(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return ai(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield $a(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return ai(this,void 0,void 0,function*(){try{const a=yield $a(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),u=o?`?${o}`:"",d=this._getFinalPath(e),p=()=>Cd(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new G2(p,this.shouldThrowOnError)}info(e){return ai(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Cd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xf(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}exists(e){return ai(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield $2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s)&&s instanceof vf){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const d=typeof t?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(t?.transform||{});p!==""&&a.push(p);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${g}`)}}}remove(e){return ai(this,void 0,void 0,function*(){try{return{data:yield ug(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}list(e,t,s){return ai(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Y2),t),{prefix:e||""});return{data:yield $a(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}listV2(e,t){return ai(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield $a(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const J2="2.75.0",X2={"X-Client-Info":`storage-js/${J2}`};var gc=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};class Q2{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X2),t),this.fetch=cg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return gc(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}getBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}createBucket(e){return gc(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield $a(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return gc(this,void 0,void 0,function*(){try{return{data:yield yf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}emptyBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield ug(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}}class Z2 extends Q2{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new K2(this.url,this.headers,e,this.fetch)}}const ev="2.75.0";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";const tv={"X-Client-Info":`supabase-js-${fu}/${ev}`},rv={headers:tv},nv={schema:"public"},sv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iv={};var av=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};const ov=n=>{let e;return n?e=n:typeof fetch>"u"?e=eg:e=fetch,(...t)=>e(...t)},lv=()=>typeof Headers>"u"?tg:Headers,cv=(n,e,t)=>{const s=ov(t),a=lv();return(o,u)=>av(void 0,void 0,void 0,function*(){var d;const p=(d=yield e())!==null&&d!==void 0?d:n;let g=new a(u?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),s(o,Object.assign(Object.assign({},u),{headers:g}))})};var uv=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};function dv(n){return n.endsWith("/")?n:n+"/"}function hv(n,e){var t,s;const{db:a,auth:o,realtime:u,global:d}=n,{db:p,auth:g,realtime:x,global:w}=e,S={db:Object.assign(Object.assign({},p),a),auth:Object.assign(Object.assign({},g),o),realtime:Object.assign(Object.assign({},x),u),storage:{},global:Object.assign(Object.assign(Object.assign({},w),d),{headers:Object.assign(Object.assign({},(t=w?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>uv(this,void 0,void 0,function*(){return""})};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}function fv(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dg="2.75.0",Sc=30*1e3,bf=3,Fh=bf*Sc,pv="http://localhost:9999",mv="supabase.auth.token",gv={"X-Client-Info":`gotrue-js/${dg}`},wf="X-Supabase-Api-Version",hg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xv=600*1e3;class yu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ct(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class yv extends yu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function bv(n){return Ct(n)&&n.name==="AuthApiError"}class Tl extends yu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class rl extends yu{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Jo extends rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wv(n){return Ct(n)&&n.name==="AuthSessionMissingError"}class vc extends rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ud extends rl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dd extends rl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _v(n){return Ct(n)&&n.name==="AuthImplicitGrantRedirectError"}class bp extends rl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _f extends rl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rh(n){return Ct(n)&&n.name==="AuthRetryableFetchError"}class wp extends rl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Nf extends rl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_p=` 	
\r=`.split(""),Nv=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<_p.length;e+=1)n[_p[e].charCodeAt(0)]=-2;for(let e=0;e<Ed.length;e+=1)n[Ed[e].charCodeAt(0)]=e;return n})();function Np(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ed[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ed[s]),e.queuedBits-=6}}function fg(n,e,t){const s=Nv[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function kp(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{jv(u,s,t)};for(let u=0;u<n.length;u+=1)fg(n.charCodeAt(u),a,o);return e.join("")}function kv(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Sv(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}kv(s,e)}}function jv(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Lc(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)fg(n.charCodeAt(a),t,s);return new Uint8Array(e)}function Av(n){const e=[];return Sv(n,t=>e.push(t)),new Uint8Array(e)}function Il(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>Np(a,t,s)),Np(null,t,s),e.join("")}function Pv(n){return Math.round(Date.now()/1e3)+n}function Cv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Pi=()=>typeof window<"u"&&typeof document<"u",Al={tested:!1,writable:!1},pg=()=>{if(!Pi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Al.tested)return Al.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Al.tested=!0,Al.writable=!0}catch{Al.tested=!0,Al.writable=!1}return Al.writable};function Ev(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const mg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Zo(async()=>{const{default:s}=await Promise.resolve().then(()=>Rc);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Lv=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",jc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Pl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ho=async(n,e)=>{await n.removeItem(e)};class Ud{constructor(){this.promise=new Ud.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ud.promiseConstructor=Promise;function Mh(n){const e=n.split(".");if(e.length!==3)throw new Nf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!vv.test(e[s]))throw new Nf("JWT not in base64url format");return{header:JSON.parse(kp(e[0])),payload:JSON.parse(kp(e[1])),signature:Lc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dv(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Tv(n,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await n(o);if(!e(o,null,u)){s(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function Ov(n){return("0"+n.toString(16)).substr(-2)}function Iv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Ov).join("")}async function Fv(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function Rv(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Fv(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xc(n,e,t=!1){const s=Iv();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await jc(n,`${e}-code-verifier`,a);const o=await Rv(s);return[o,s===o?"plain":"s256"]}const Mv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Uv(n){const e=n.headers.get(wf);if(!e||!e.match(Mv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Bv(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function qv(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yc(n){if(!zv.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sp(n){return JSON.parse(JSON.stringify(n))}var $v=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const Cl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Wv=[502,503,504];async function jp(n){var e;if(!Lv(n))throw new _f(Cl(n),0);if(Wv.includes(n.status))throw new _f(Cl(n),n.status);let t;try{t=await n.json()}catch(o){throw new Tl(Cl(o),o)}let s;const a=Uv(n);if(a&&a.getTime()>=hg["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new wp(Cl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Jo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new wp(Cl(t),n.status,t.weak_password.reasons);throw new yv(Cl(t),n.status||500,s)}const Hv=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Wt(n,e,t,s){var a;const o=Object.assign({},s?.headers);o[wf]||(o[wf]=hg["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await Vv(n,e,t+d,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(p):{data:Object.assign({},p),error:null}}async function Vv(n,e,t,s,a,o){const u=Hv(e,s,a,o);let d;try{d=await n(t,Object.assign({},u))}catch(p){throw console.error(p),new _f(Cl(p),0)}if(d.ok||await jp(d),s?.noResolveJson)return d;try{return await d.json()}catch(p){await jp(p)}}function ba(n){var e;let t=null;Kv(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Pv(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Ap(n){const e=ba(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Xo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Gv(n){return{data:n,error:null}}function Yv(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=n,u=$v(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},p=Object.assign({},u);return{data:{properties:d,user:p},error:null}}function Pp(n){return n}function Kv(n){return n.access_token&&n.refresh_token&&n.expires_in}const Bh=["global","local","others"];var Jv=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class Xv{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=mg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Bh[0]){if(Bh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bh.join(", ")}`);try{return await Wt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ct(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Wt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Xo})}catch(s){if(Ct(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Jv(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await Wt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Yv,redirectTo:t?.redirectTo})}catch(t){if(Ct(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xo})}catch(t){if(Ct(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,u,d,p;try{const g={nextPage:null,lastPage:0,total:0},x=await Wt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Pp});if(x.error)throw x.error;const w=await x.json(),S=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(p=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return y.length>0&&(y.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(E.split(";")[1].split("=")[1]);g[`${L}Page`]=C}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(Ct(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){yc(e);try{return await Wt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xo})}catch(t){if(Ct(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){yc(e);try{return await Wt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Xo})}catch(s){if(Ct(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){yc(e);try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Xo})}catch(s){if(Ct(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){yc(e.userId);try{const{data:t,error:s}=await Wt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _deleteFactor(e){yc(e.userId),yc(e.id);try{return{data:await Wt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,u,d,p;try{const g={nextPage:null,lastPage:0,total:0},x=await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Pp});if(x.error)throw x.error;const w=await x.json(),S=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(p=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return y.length>0&&(y.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(E.split(";")[1].split("=")[1]);g[`${L}Page`]=C}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(Ct(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Wt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Wt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Wt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}}function Cp(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const bc={debug:!!(globalThis&&pg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Qv extends gg{}async function Zv(n,e,t){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),bc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Qv(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(bc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function ex(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function tx(n){return parseInt(n,16)}function rx(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function nx(n){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:p,resources:g,scheme:x,uri:w,version:S}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=vg(n.address),E=x?`${x}://${s}`:s,C=n.statement?`${n.statement}
`:"",L=`${E} wants you to sign in with your Ethereum account:
${y}

${C}`;let A=`URI: ${w}
Version: ${S}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),p&&(A+=`
Request ID: ${p}`),g){let U=`
Resources:`;for(const R of g){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);U+=`
- ${R}`}A+=U}return`${L}
${A}`}class Sn extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Ld extends Sn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function sx({error:n,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Sn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(yg(u)){if(o.rp.id!==u)return new Sn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function ix({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Sn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(yg(s)){if(t.rpId!==s)return new Sn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var xg=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class ax{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ox=new ax;function lx(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,a=xg(n,["challenge","user","excludeCredentials"]),o=Lc(e).buffer,u=Object.assign(Object.assign({},t),{id:Lc(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let p=0;p<s.length;p++){const g=s[p];d.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Lc(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function cx(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=xg(n,["challenge","allowCredentials"]),a=Lc(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Lc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function ux(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Il(new Uint8Array(n.response.attestationObject)),clientDataJSON:Il(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dx(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Il(new Uint8Array(a.authenticatorData)),clientDataJSON:Il(new Uint8Array(a.clientDataJSON)),signature:Il(new Uint8Array(a.signature)),userHandle:a.userHandle?Il(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Ep(){var n,e;return!!(Pi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function hx(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ld("Browser returned unexpected credential type",e)}:{data:null,error:new Ld("Empty credential response",e)}}catch(e){return{data:null,error:sx({error:e,options:n})}}}async function fx(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ld("Browser returned unexpected credential type",e)}:{data:null,error:new Ld("Empty credential response",e)}}catch(e){return{data:null,error:ix({error:e,options:n})}}}const px={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},mx={userVerification:"preferred",hints:["security-key"]};function Dd(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of n)if(a)for(const o in a){const u=a[o];if(u!==void 0)if(Array.isArray(u))s[o]=u;else if(t(u))s[o]=u;else if(e(u)){const d=s[o];e(d)?s[o]=Dd(d,u):s[o]=Dd(u)}else s[o]=u}return s}function gx(n,e){return Dd(px,n,e||{})}function vx(n,e){return Dd(mx,n,e||{})}class xx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const p=a??ox.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:g}=u.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(u.webauthn.type){case"create":{const g=gx(u.webauthn.credential_options.publicKey,o?.create),{data:x,error:w}=await hx({publicKey:g,signal:p});return x?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}case"request":{const g=vx(u.webauthn.credential_options.publicKey,o?.request),{data:x,error:w}=await fx(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:g,signal:p}));return x?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}}}catch(u){return Ct(u)?{data:null,error:u}:{data:null,error:new Tl("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!t)return{data:null,error:new yu("rpId is required for WebAuthn authentication")};try{if(!Ep())return{data:null,error:new Tl("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!u)return{data:null,error:d};const{webauthn:p}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:p.type,rpId:t,rpOrigins:s,credential_response:p.credential_response}})}catch(u){return Ct(u)?{data:null,error:u}:{data:null,error:new Tl("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!t)return{data:null,error:new yu("rpId is required for WebAuthn registration")};try{if(!Ep())return{data:null,error:new Tl("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(x=>{var w;return(w=x.data)===null||w===void 0?void 0:w.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:d};const{data:p,error:g}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return p?this._verify({factorId:u.id,challengeId:p.challengeId,webauthn:{rpId:t,rpOrigins:s,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(u){return Ct(u)?{data:null,error:u}:{data:null,error:new Tl("Unexpected error in register",u)}}}}ex();const yx={url:pv,storageKey:mv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Lp(n,e,t){return await t()}const wc={};class bu{get jwks(){var e,t;return(t=(e=wc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){wc[this.storageKey]=Object.assign(Object.assign({},wc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=wc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wc[this.storageKey]=Object.assign(Object.assign({},wc[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bu.nextInstanceID,bu.nextInstanceID+=1,this.instanceID>0&&Pi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},yx),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Xv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=mg(a.fetch),this.lock=a.lock||Lp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Pi()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Zv:this.lock=Lp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xx(this)},this.persistSession?(a.storage?this.storage=a.storage:pg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cp(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Cp(this.memoryStorage)),Pi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ev(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Pi()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),_v(o)){const p=(e=o.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ct(t)?{error:t}:{error:new Tl("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ba}),{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const p=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(o){if(Ct(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:x,password:w,options:S}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await xc(this.storage,this.storageKey)),o=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:x,password:w,data:(t=S?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:y,code_challenge_method:E},xform:ba})}else if("phone"in e){const{phone:x,password:w,options:S}=e;o=await Wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:w,data:(s=S?.data)!==null&&s!==void 0?s:{},channel:(a=S?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:ba})}else throw new ud("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return{data:{user:null,session:null},error:d};const p=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(o){if(Ct(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:d}=e;t=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ap})}else if("phone"in e){const{phone:o,password:u,options:d}=e;t=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ap})}else throw new ud("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new vc}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Ct(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,u,d,p,g,x,w,S;let y,E;if("message"in e)y=e.message,E=e.signature;else{const{chain:C,wallet:L,statement:A,options:U}=e;let R;if(Pi())if(typeof L=="object")R=L;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")R=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=L}const z=new URL((t=U?.url)!==null&&t!==void 0?t:window.location.href),he=await R.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!he||he.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=vg(he[0]);let ee=(s=U?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!ee){const J=await R.request({method:"eth_chainId"});ee=tx(J)}const $={domain:z.host,address:le,statement:A,uri:z.href,version:"1",chainId:ee,nonce:(a=U?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=U?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=U?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(x=U?.signInWithEthereum)===null||x===void 0?void 0:x.resources};y=nx($),E=await R.request({method:"personal_sign",params:[rx(y),le]})}try{const{data:C,error:L}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:E},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ba});if(L)throw L;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new vc}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:L})}catch(C){if(Ct(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var t,s,a,o,u,d,p,g,x,w,S,y;let E,C;if("message"in e)E=e.message,C=e.signature;else{const{chain:L,wallet:A,statement:U,options:R}=e;let z;if(Pi())if(typeof A=="object")z=A;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))z=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=A}const he=new URL((t=R?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in z&&z.signIn){const le=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:he.host,uri:he.href}),U?{statement:U}:null));let ee;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")ee=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)ee=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)E=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),C=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${he.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${he.href}`,`Issued At: ${(a=(s=R?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=R?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((g=R?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((w=(x=R?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||w===void 0)&&w.length?["Resources",...R.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const le=await z.signMessage(new TextEncoder().encode(E),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=le}}try{const{data:L,error:A}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Il(C)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ba});if(A)throw A;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new vc}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:A})}catch(L){if(Ct(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(e){const t=await Pl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:u}=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ba});if(await Ho(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new vc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(Ct(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:u}=e,d=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ba}),{data:p,error:g}=d;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new vc}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(t){if(Ct(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,o,u;try{if("email"in e){const{email:d,options:p}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await xc(this.storage,this.storageKey));const{error:w}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=p?.data)!==null&&t!==void 0?t:{},create_user:(s=p?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in e){const{phone:d,options:p}=e,{data:g,error:x}=await Wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=p?.data)!==null&&a!==void 0?a:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(u=p?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:x}}throw new ud("You must provide either an email or phone number.")}catch(d){if(Ct(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Wt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ba});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,g=u.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(a){if(Ct(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await xc(this.storage,this.storageKey)),await Wt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:Gv})}catch(o){if(Ct(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Jo;const{error:a}=await Wt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Ct(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:u}=await Wt(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:u,error:d}=await Wt(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new ud("You must provide either an email or phone number and a type")}catch(t){if(Ct(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Pl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Fh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await Pl(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Uh()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(p,g,x)=>(!u&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,x))})}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xo}):await this._useSession(async t=>{var s,a,o;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jo}:await Wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Xo})})}catch(t){if(Ct(t))return wv(t)&&(await this._removeSession(),await Ho(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Jo;const u=a.session;let d=null,p=null;this.flowType==="pkce"&&e.email!=null&&([d,p]=await xc(this.storage,this.storageKey));const{data:g,error:x}=await Wt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:p}),jwt:u.access_token,xform:Xo});if(x)throw x;return u.user=g.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Ct(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Jo;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:u}=Mh(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:d,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:p}=await this._getUser(e.access_token);if(p)throw p;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Ct(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Jo;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ct(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Pi())throw new dd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new bp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bp("No code detected.");const{data:U,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:d,expires_at:p,token_type:g}=e;if(!o||!d||!u||!g)throw new dd("No session defined in URL");const x=Math.round(Date.now()/1e3),w=parseInt(d);let S=x+w;p&&(S=parseInt(p));const y=S-x;y*1e3<=Sc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${w}s`);const E=S-w;x-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,x):x-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,x);const{data:C,error:L}=await this._getUser(o);if(L)throw L;const A={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:S,refresh_token:u,token_type:g,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(s){if(Ct(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Pl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{error:o};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(bv(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Ho(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Cv(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await xc(this.storage,this.storageKey,!0));try{return await Wt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Ct(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var u,d,p,g,x;const{data:w,error:S}=o;if(S)throw S;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Wt(this.fetch,"GET",y,{headers:this.headers,jwt:(x=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return Pi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Ct(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:u,provider:d,token:p,access_token:g,nonce:x}=e,w=await Wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:p,access_token:g,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ba}),{data:S,error:y}=w;return y?{data:{user:null,session:null},error:y}:!S||!S.session||!S.user?{data:{user:null,session:null},error:new vc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),{data:S,error:y})}catch(a){if(Ct(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)throw u;return await Wt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Tv(async a=>(a>0&&await Dv(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Wt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ba})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Rh(o)&&Date.now()+u-s<Sc})}catch(s){if(this._debug(t,"error",s),Ct(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Pi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Pl(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Pl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await jc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Uh()}else if(a&&!a.user&&!a.user){const u=await Pl(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Ho(this.storage,this.storageKey+"-user"),await jc(this.storage,this.storageKey,a)):a.user=Uh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Fh;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Fh}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Rh(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Jo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ud;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Jo;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),Ct(o)){const u={data:null,error:o};return Rh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(p){o.push(p)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await jc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=Sp(a);await jc(this.storage,this.storageKey,o)}else{const a=Sp(t);await jc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ho(this.storage,this.storageKey),await Ho(this.storage,this.storageKey+"-code-verifier"),await Ho(this.storage,this.storageKey+"-user"),this.userStorage&&await Ho(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Sc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Sc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Sc}ms, refresh threshold is ${bf} ticks`),a<=bf&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await xc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?{data:null,error:o}:await Wt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await Wt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(e.factorType==="totp"&&p.type==="totp"&&(!((a=p?.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ux(e.webauthn.credential_response):dx(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:p}=await Wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:p})})}catch(t){if(Ct(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const u=await Wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:lx(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:cx(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ct(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Mh(a.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const x=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+xv>a)return s;const{data:o,error:u}=await Wt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:y,error:E}=await this.getSession();if(E||!y.session)return{data:null,error:E};s=y.session.access_token}const{header:a,payload:o,signature:u,raw:{header:d,payload:p}}=Mh(s);t?.allowExpired||Bv(o.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!g){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:o,header:a,signature:u},error:null}}const x=qv(a.alg),w=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,w,u,Av(`${d}.${p}`)))throw new Nf("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(Ct(s))return{data:null,error:s};throw s}}}bu.nextInstanceID=0;const bx=bu;class wx extends bx{constructor(e){super(e)}}var _x=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(x){try{g(s.next(x))}catch(w){u(w)}}function p(x){try{g(s.throw(x))}catch(w){u(w)}}function g(x){x.done?o(x.value):a(x.value).then(d,p)}g((s=s.apply(n,e||[])).next())})};class Nx{constructor(e,t,s){var a,o,u;this.supabaseUrl=e,this.supabaseKey=t;const d=fv(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const p=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:nv,realtime:iv,auth:Object.assign(Object.assign({},sv),{storageKey:p}),global:rv},x=hv(s??{},g);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(w,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=cv(t,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new y2(new URL("rest/v1",d).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Z2(this.storageUrl.href,this.headers,this.fetch,s?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new c2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return _x(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:u,flowType:d,lock:p,debug:g},x,w){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wx({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),x),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,flowType:d,lock:p,debug:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new F2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kx=(n,e,t)=>new Nx(n,e,t);function Sx(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Sx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wd="https://hyrgqrgeshkgvsfwnzzu.supabase.co",El="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5cmdxcmdlc2hrZ3ZzZnduenp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwMjcxOTksImV4cCI6MjA4MjM4NzE5OX0.PrMmAu9e2sMn-UG9-U9lCBSoces0vxUQobI1FndAjI8";try{console.log("[supabase] initializing client",{urlPresent:!!wd,keyPresent:!!El,urlPreview:wd?`${wd.slice(0,20)}...`:null,keyLength:El?.length||0,keyFirst50:El?`${El.slice(0,50)}...`:null,keyLast20:El?`...${El.slice(-20)}`:null})}catch{}const jx=typeof window<"u"?window.localStorage:void 0,Ze=kx(wd,El,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:jx,storageKey:"pch.auth"}});async function Dp(n){try{const{data:e,error:t}=await Ze.auth.getUser();if(t||!e?.user?.id)return{ok:!1,updated:!1,error:t?.message||"No authenticated user"};const s=e.user.id,{data:a,error:o}=await Ze.from("profiles").select("timezone").eq("id",s).single();if(o)return{ok:!1,updated:!1,error:o.message};const u=String(a?.timezone||"").trim();if(u)return{ok:!0,updated:!1,timezone:u};const d=String(n||"").trim();if(!d)return{ok:!1,updated:!1,error:"Empty timezone provided"};const{error:p}=await Ze.from("profiles").update({timezone:d}).eq("id",s);return p?{ok:!1,updated:!1,error:p.message}:{ok:!0,updated:!0,timezone:d}}catch(e){return{ok:!1,updated:!1,error:e?.message||String(e)}}}async function uu(n){try{console.log("[dbLoadPets] START - userId=",n);const{data:e,error:t}=await Ze.from("pets").select("id, name, species, color, photo_url, insurance_company, policy_number, owner_name, owner_phone, filing_deadline_days, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit, healthy_paws_pet_id, pumpkin_account_number, spot_account_number, figo_policy_number, breed, gender, date_of_birth").eq("user_id",n).order("created_at",{ascending:!0});if(console.log("[dbLoadPets] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[dbLoadPets] ERROR:",t),t;const s=(e||[]).map(a=>({id:a.id,name:a.name,species:a.species,color:a.color||(a.species==="dog"?"#3B82F6":a.species==="cat"?"#F97316":"#6B7280"),photo_url:a.photo_url||null,insuranceCompany:a.insurance_company,policyNumber:a.policy_number,ownerName:a.owner_name,ownerPhone:a.owner_phone,filing_deadline_days:a.filing_deadline_days,monthly_premium:a.monthly_premium??null,deductible_per_claim:a.deductible_per_claim??null,coverage_start_date:a.coverage_start_date||null,insurance_pays_percentage:a.insurance_pays_percentage??null,annual_coverage_limit:a.annual_coverage_limit??null,healthy_paws_pet_id:a.healthy_paws_pet_id||null,pumpkin_account_number:a.pumpkin_account_number||null,spot_account_number:a.spot_account_number||null,figo_policy_number:a.figo_policy_number||null,breed:a.breed||null,gender:a.gender||null,date_of_birth:a.date_of_birth||null}));return console.log("[dbLoadPets] SUCCESS - count=",s.length,"pets:",s),s}catch(e){throw console.error("[dbLoadPets] EXCEPTION:",e),e}}async function qh(n,e){const t=e.color||(e.species==="dog"?"#3B82F6":e.species==="cat"?"#F97316":"#6B7280"),s={id:e.id,user_id:n,name:e.name,species:e.species,color:t,photo_url:e.photo_url||null,insurance_company:e.insuranceCompany,policy_number:e.policyNumber,owner_name:e.ownerName||"",owner_phone:e.ownerPhone||"",filing_deadline_days:e.filing_deadline_days||e.filingDeadlineDays||null,monthly_premium:e.monthly_premium??null,deductible_per_claim:e.deductible_per_claim??null,coverage_start_date:e.coverage_start_date||null,insurance_pays_percentage:e.insurance_pays_percentage??null,annual_coverage_limit:e.annual_coverage_limit??null,healthy_paws_pet_id:e.healthy_paws_pet_id||null,pumpkin_account_number:e.pumpkin_account_number||null,spot_account_number:e.spot_account_number||null,figo_policy_number:e.figo_policy_number||null,breed:e.breed||null,gender:e.gender||null,date_of_birth:e.date_of_birth||null};console.log(" [dbUpsertPet] BEFORE Supabase call:"),console.log("  - userId:",n),console.log("  - payload.spot_account_number:",s.spot_account_number),console.log("  - Full payload:",s);const{data:a,error:o}=await Ze.from("pets").upsert(s,{onConflict:"id"}).select();if(console.log(" [dbUpsertPet] AFTER Supabase call:"),console.log("  - data:",a),console.log("  - error:",o),o)throw o}async function Ax(n,e){console.log("[dbDeletePet] userId=",n,"petId=",e);const{error:t}=await Ze.from("pets").delete().eq("user_id",n).eq("id",e);if(t)throw t}async function Tp(n,e){const t={id:n,email:e??null};console.log("[dbEnsureProfile] upserting profile",t);const{error:s}=await Ze.from("profiles").upsert(t,{onConflict:"id"}).select();if(s)throw s}async function Px(n){console.log("[createPet] received payload:",n);const{data:e,error:t}=await Ze.from("pets").insert([{user_id:n.user_id,name:n.name,species:n.species,color:n.color??null,photo_url:n.photo_url??null,insurance_company:n.insurance_company??null,policy_number:n.policy_number??null,healthy_paws_pet_id:n.healthy_paws_pet_id??null,spot_account_number:n.spot_account_number??null,breed:n.breed??null,weight_lbs:n.weight_lbs??null,monthly_premium:n.monthly_premium??null,deductible_per_claim:n.deductible_per_claim??null,coverage_start_date:n.coverage_start_date??null,annual_coverage_limit:n.annual_coverage_limit??null,insurance_pays_percentage:n.insurance_pays_percentage??null,filing_deadline_days:n.filing_deadline_days??null}]).select("*").single();if(console.log("[createPet] insert result:",{data:e,error:t}),t)throw t;return e}function br(n){"@babel/helpers - typeof";return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(n)}var _a=Uint8Array,Ci=Uint16Array,zf=Int32Array,$f=new _a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wf=new _a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Op=new _a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bg=function(n,e){for(var t=new Ci(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new zf(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},wg=bg($f,2),Cx=wg.b,kf=wg.r;Cx[28]=258,kf[258]=28;var Ex=bg(Wf,0),Ip=Ex.r,Sf=new Ci(32768);for(var Wr=0;Wr<32768;++Wr){var Vo=(Wr&43690)>>1|(Wr&21845)<<1;Vo=(Vo&52428)>>2|(Vo&13107)<<2,Vo=(Vo&61680)>>4|(Vo&3855)<<4,Sf[Wr]=((Vo&65280)>>8|(Vo&255)<<8)>>1}var vu=(function(n,e,t){for(var s=n.length,a=0,o=new Ci(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new Ci(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var d;if(t){d=new Ci(1<<e);var p=15-e;for(a=0;a<s;++a)if(n[a])for(var g=a<<4|n[a],x=e-n[a],w=u[n[a]-1]++<<x,S=w|(1<<x)-1;w<=S;++w)d[Sf[w]>>p]=g}else for(d=new Ci(s),a=0;a<s;++a)n[a]&&(d[a]=Sf[u[n[a]-1]++]>>15-n[a]);return d}),Rl=new _a(288);for(var Wr=0;Wr<144;++Wr)Rl[Wr]=8;for(var Wr=144;Wr<256;++Wr)Rl[Wr]=9;for(var Wr=256;Wr<280;++Wr)Rl[Wr]=7;for(var Wr=280;Wr<288;++Wr)Rl[Wr]=8;var Td=new _a(32);for(var Wr=0;Wr<32;++Wr)Td[Wr]=5;var Lx=vu(Rl,9,0),Dx=vu(Td,5,0),_g=function(n){return(n+7)/8|0},Tx=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new _a(n.subarray(e,t))},po=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},du=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},zh=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:kg,l:0};if(a==1){var u=new _a(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(he,le){return he.f-le.f}),t.push({s:-1,f:25001});var d=t[0],p=t[1],g=0,x=1,w=2;for(t[0]={s:-1,f:d.f+p.f,l:d,r:p};x!=a-1;)d=t[t[g].f<t[w].f?g++:w++],p=t[g!=x&&t[g].f<t[w].f?g++:w++],t[x++]={s:-1,f:d.f+p.f,l:d,r:p};for(var S=o[0].s,s=1;s<a;++s)o[s].s>S&&(S=o[s].s);var y=new Ci(S+1),E=jf(t[x-1],y,0);if(E>e){var s=0,C=0,L=E-e,A=1<<L;for(o.sort(function(le,ee){return y[ee.s]-y[le.s]||le.f-ee.f});s<a;++s){var U=o[s].s;if(y[U]>e)C+=A-(1<<E-y[U]),y[U]=e;else break}for(C>>=L;C>0;){var R=o[s].s;y[R]<e?C-=1<<e-y[R]++-1:++s}for(;s>=0&&C;--s){var z=o[s].s;y[z]==e&&(--y[z],++C)}E=e}return{t:new _a(y),l:E}},jf=function(n,e,t){return n.s==-1?Math.max(jf(n.l,e,t+1),jf(n.r,e,t+1)):e[n.s]=t},Fp=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ci(++e),s=0,a=n[0],o=1,u=function(p){t[s++]=p},d=1;d<=e;++d)if(n[d]==a&&d!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[d]}return{c:t.subarray(0,s),n:e}},hu=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},Ng=function(n,e,t){var s=t.length,a=_g(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},Rp=function(n,e,t,s,a,o,u,d,p,g,x){po(e,x++,t),++a[256];for(var w=zh(a,15),S=w.t,y=w.l,E=zh(o,15),C=E.t,L=E.l,A=Fp(S),U=A.c,R=A.n,z=Fp(C),he=z.c,le=z.n,ee=new Ci(19),$=0;$<U.length;++$)++ee[U[$]&31];for(var $=0;$<he.length;++$)++ee[he[$]&31];for(var J=zh(ee,7),ne=J.t,O=J.l,T=19;T>4&&!ne[Op[T-1]];--T);var te=g+5<<3,H=hu(a,Rl)+hu(o,Td)+u,Q=hu(a,S)+hu(o,C)+u+14+3*T+hu(ee,ne)+2*ee[16]+3*ee[17]+7*ee[18];if(p>=0&&te<=H&&te<=Q)return Ng(e,x,n.subarray(p,p+g));var X,pe,G,ce;if(po(e,x,1+(Q<H)),x+=2,Q<H){X=vu(S,y,0),pe=S,G=vu(C,L,0),ce=C;var ve=vu(ne,O,0);po(e,x,R-257),po(e,x+5,le-1),po(e,x+10,T-4),x+=14;for(var $=0;$<T;++$)po(e,x+3*$,ne[Op[$]]);x+=3*T;for(var Y=[U,he],P=0;P<2;++P)for(var F=Y[P],$=0;$<F.length;++$){var V=F[$]&31;po(e,x,ve[V]),x+=ne[V],V>15&&(po(e,x,F[$]>>5&127),x+=F[$]>>12)}}else X=Lx,pe=Rl,G=Dx,ce=Td;for(var $=0;$<d;++$){var ie=s[$];if(ie>255){var V=ie>>18&31;du(e,x,X[V+257]),x+=pe[V+257],V>7&&(po(e,x,ie>>23&31),x+=$f[V]);var ue=ie&31;du(e,x,G[ue]),x+=ce[ue],ue>3&&(du(e,x,ie>>5&8191),x+=Wf[ue])}else du(e,x,X[ie]),x+=pe[ie]}return du(e,x,X[256]),x+pe[256]},Ox=new zf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kg=new _a(0),Ix=function(n,e,t,s,a,o){var u=o.z||n.length,d=new _a(s+u+5*(1+Math.ceil(u/7e3))+a),p=d.subarray(s,d.length-a),g=o.l,x=(o.r||0)&7;if(e){x&&(p[0]=o.r>>3);for(var w=Ox[e-1],S=w>>13,y=w&8191,E=(1<<t)-1,C=o.p||new Ci(32768),L=o.h||new Ci(E+1),A=Math.ceil(t/3),U=2*A,R=function(Ve){return(n[Ve]^n[Ve+1]<<A^n[Ve+2]<<U)&E},z=new zf(25e3),he=new Ci(288),le=new Ci(32),ee=0,$=0,J=o.i||0,ne=0,O=o.w||0,T=0;J+2<u;++J){var te=R(J),H=J&32767,Q=L[te];if(C[H]=Q,L[te]=H,O<=J){var X=u-J;if((ee>7e3||ne>24576)&&(X>423||!g)){x=Rp(n,p,0,z,he,le,$,ne,T,J-T,x),ne=ee=$=0,T=J;for(var pe=0;pe<286;++pe)he[pe]=0;for(var pe=0;pe<30;++pe)le[pe]=0}var G=2,ce=0,ve=y,Y=H-Q&32767;if(X>2&&te==R(J-Y))for(var P=Math.min(S,X)-1,F=Math.min(32767,J),V=Math.min(258,X);Y<=F&&--ve&&H!=Q;){if(n[J+G]==n[J+G-Y]){for(var ie=0;ie<V&&n[J+ie]==n[J+ie-Y];++ie);if(ie>G){if(G=ie,ce=Y,ie>P)break;for(var ue=Math.min(Y,ie-2),me=0,pe=0;pe<ue;++pe){var ye=J-Y+pe&32767,xe=C[ye],ge=ye-xe&32767;ge>me&&(me=ge,Q=ye)}}}H=Q,Q=C[H],Y+=H-Q&32767}if(ce){z[ne++]=268435456|kf[G]<<18|Ip[ce];var Ie=kf[G]&31,Re=Ip[ce]&31;$+=$f[Ie]+Wf[Re],++he[257+Ie],++le[Re],O=J+G,++ee}else z[ne++]=n[J],++he[n[J]]}}for(J=Math.max(J,O);J<u;++J)z[ne++]=n[J],++he[n[J]];x=Rp(n,p,g,z,he,le,$,ne,T,J-T,x),g||(o.r=x&7|p[x/8|0]<<3,x-=7,o.h=L,o.p=C,o.i=J,o.w=O)}else{for(var J=o.w||0;J<u+g;J+=65535){var We=J+65535;We>=u&&(p[x/8|0]=g,We=u),x=Ng(p,x+1,n.subarray(J,We))}o.i=u}return Tx(d,0,s+_g(x)+a)},Sg=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Fx=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new _a(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return Ix(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},jg=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Rx=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=Sg();a.p(e.dictionary),jg(n,2,a.d())}};function Af(n,e){e||(e={});var t=Sg();t.p(n);var s=Fx(n,e,e.dictionary?6:2,4);return Rx(s,e),jg(s,s.length-4,t.d()),s}var Mx=typeof TextDecoder<"u"&&new TextDecoder,Ux=0;try{Mx.decode(kg,{stream:!0}),Ux=1}catch{}function Bx(n){if(Array.isArray(n))return n}function qx(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,d=[],p=!0,g=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(p=(s=o.call(t)).done)&&(d.push(s.value),d.length!==e);p=!0);}catch(x){g=!0,a=x}finally{try{if(!p&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(g)throw a}}return d}}function Mp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function zx(n,e){if(n){if(typeof n=="string")return Mp(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Mp(n,e):void 0}}function $x(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Up(n,e){return Bx(n)||qx(n,e)||zx(n,e)||$x()}function Bp(n,e="utf8"){return new TextDecoder(e).decode(n)}const Wx=new TextEncoder;function Hx(n){return Wx.encode(n)}const Vx=1024*8,Gx=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),$h={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Hf{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Vx,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Hf)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=$h[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===Gx&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+s));d.reverse();const p=new $h[t](d.buffer);return this.offset+=s,p.reverse(),p}const u=new $h[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Bp(this.readBytes(e))}decodeText(e=1,t="utf8"){return Bp(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Hx(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Mc(n){let e=n.length;for(;--e>=0;)n[e]=0}const Yx=3,Kx=258,Ag=29,Jx=256,Xx=Jx+1+Ag,Pg=30,Qx=512,Zx=new Array((Xx+2)*2);Mc(Zx);const ey=new Array(Pg*2);Mc(ey);const ty=new Array(Qx);Mc(ty);const ry=new Array(Kx-Yx+1);Mc(ry);const ny=new Array(Ag);Mc(ny);const sy=new Array(Pg);Mc(sy);const iy=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Pf=iy;const ay=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},oy=new Uint32Array(ay()),ly=(n,e,t,s)=>{const a=oy,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var qa=ly,Cf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Cg={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const cy=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var uy=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)cy(t,s)&&(n[s]=t[s])}}return n},dy=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},Eg={assign:uy,flattenChunks:dy};let Lg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Lg=!1}const wu=new Uint8Array(256);for(let n=0;n<256;n++)wu[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;wu[254]=wu[254]=1;var hy=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,d=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,a=0;o<d;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const fy=(n,e)=>{if(e<65534&&n.subarray&&Lg)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var py=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let d=wu[u];if(d>4){o[a++]=65533,s+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&s<t;)u=u<<6|n[s++]&63,d--;if(d>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return fy(o,a)},my=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+wu[n[t]]>e?t:e},Ef={string2buf:hy,buf2string:py,utf8border:my};function gy(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var vy=gy;const hd=16209,xy=16191;var yy=function(e,t){let s,a,o,u,d,p,g,x,w,S,y,E,C,L,A,U,R,z,he,le,ee,$,J,ne;const O=e.state;s=e.next_in,J=e.input,a=s+(e.avail_in-5),o=e.next_out,ne=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),p=O.dmax,g=O.wsize,x=O.whave,w=O.wnext,S=O.window,y=O.hold,E=O.bits,C=O.lencode,L=O.distcode,A=(1<<O.lenbits)-1,U=(1<<O.distbits)-1;e:do{E<15&&(y+=J[s++]<<E,E+=8,y+=J[s++]<<E,E+=8),R=C[y&A];t:for(;;){if(z=R>>>24,y>>>=z,E-=z,z=R>>>16&255,z===0)ne[o++]=R&65535;else if(z&16){he=R&65535,z&=15,z&&(E<z&&(y+=J[s++]<<E,E+=8),he+=y&(1<<z)-1,y>>>=z,E-=z),E<15&&(y+=J[s++]<<E,E+=8,y+=J[s++]<<E,E+=8),R=L[y&U];r:for(;;){if(z=R>>>24,y>>>=z,E-=z,z=R>>>16&255,z&16){if(le=R&65535,z&=15,E<z&&(y+=J[s++]<<E,E+=8,E<z&&(y+=J[s++]<<E,E+=8)),le+=y&(1<<z)-1,le>p){e.msg="invalid distance too far back",O.mode=hd;break e}if(y>>>=z,E-=z,z=o-u,le>z){if(z=le-z,z>x&&O.sane){e.msg="invalid distance too far back",O.mode=hd;break e}if(ee=0,$=S,w===0){if(ee+=g-z,z<he){he-=z;do ne[o++]=S[ee++];while(--z);ee=o-le,$=ne}}else if(w<z){if(ee+=g+w-z,z-=w,z<he){he-=z;do ne[o++]=S[ee++];while(--z);if(ee=0,w<he){z=w,he-=z;do ne[o++]=S[ee++];while(--z);ee=o-le,$=ne}}}else if(ee+=w-z,z<he){he-=z;do ne[o++]=S[ee++];while(--z);ee=o-le,$=ne}for(;he>2;)ne[o++]=$[ee++],ne[o++]=$[ee++],ne[o++]=$[ee++],he-=3;he&&(ne[o++]=$[ee++],he>1&&(ne[o++]=$[ee++]))}else{ee=o-le;do ne[o++]=ne[ee++],ne[o++]=ne[ee++],ne[o++]=ne[ee++],he-=3;while(he>2);he&&(ne[o++]=ne[ee++],he>1&&(ne[o++]=ne[ee++]))}}else if((z&64)===0){R=L[(R&65535)+(y&(1<<z)-1)];continue r}else{e.msg="invalid distance code",O.mode=hd;break e}break}}else if((z&64)===0){R=C[(R&65535)+(y&(1<<z)-1)];continue t}else if(z&32){O.mode=xy;break e}else{e.msg="invalid literal/length code",O.mode=hd;break e}break}}while(s<a&&o<d);he=E>>3,s-=he,E-=he<<3,y&=(1<<E)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<d?257+(d-o):257-(o-d),O.hold=y,O.bits=E};const _c=15,qp=852,zp=592,$p=0,Wh=1,Wp=2,by=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wy=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_y=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ny=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ky=(n,e,t,s,a,o,u,d)=>{const p=d.bits;let g=0,x=0,w=0,S=0,y=0,E=0,C=0,L=0,A=0,U=0,R,z,he,le,ee,$=null,J;const ne=new Uint16Array(_c+1),O=new Uint16Array(_c+1);let T=null,te,H,Q;for(g=0;g<=_c;g++)ne[g]=0;for(x=0;x<s;x++)ne[e[t+x]]++;for(y=p,S=_c;S>=1&&ne[S]===0;S--);if(y>S&&(y=S),S===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(w=1;w<S&&ne[w]===0;w++);for(y<w&&(y=w),L=1,g=1;g<=_c;g++)if(L<<=1,L-=ne[g],L<0)return-1;if(L>0&&(n===$p||S!==1))return-1;for(O[1]=0,g=1;g<_c;g++)O[g+1]=O[g]+ne[g];for(x=0;x<s;x++)e[t+x]!==0&&(u[O[e[t+x]]++]=x);if(n===$p?($=T=u,J=20):n===Wh?($=by,T=wy,J=257):($=_y,T=Ny,J=0),U=0,x=0,g=w,ee=o,E=y,C=0,he=-1,A=1<<y,le=A-1,n===Wh&&A>qp||n===Wp&&A>zp)return 1;for(;;){te=g-C,u[x]+1<J?(H=0,Q=u[x]):u[x]>=J?(H=T[u[x]-J],Q=$[u[x]-J]):(H=96,Q=0),R=1<<g-C,z=1<<E,w=z;do z-=R,a[ee+(U>>C)+z]=te<<24|H<<16|Q|0;while(z!==0);for(R=1<<g-1;U&R;)R>>=1;if(R!==0?(U&=R-1,U+=R):U=0,x++,--ne[g]===0){if(g===S)break;g=e[t+u[x]]}if(g>y&&(U&le)!==he){for(C===0&&(C=y),ee+=w,E=g-C,L=1<<E;E+C<S&&(L-=ne[E+C],!(L<=0));)E++,L<<=1;if(A+=1<<E,n===Wh&&A>qp||n===Wp&&A>zp)return 1;he=U&le,a[he]=y<<24|E<<16|ee-o|0}}return U!==0&&(a[ee+U]=g-C<<24|64<<16|0),d.bits=y,0};var xu=ky;const Sy=0,Dg=1,Tg=2,{Z_FINISH:Hp,Z_BLOCK:jy,Z_TREES:fd,Z_OK:Ml,Z_STREAM_END:Ay,Z_NEED_DICT:Py,Z_STREAM_ERROR:Ki,Z_DATA_ERROR:Og,Z_MEM_ERROR:Ig,Z_BUF_ERROR:Cy,Z_DEFLATED:Vp}=Cg,Bd=16180,Gp=16181,Yp=16182,Kp=16183,Jp=16184,Xp=16185,Qp=16186,Zp=16187,em=16188,tm=16189,Od=16190,mo=16191,Hh=16192,rm=16193,Vh=16194,nm=16195,sm=16196,im=16197,am=16198,pd=16199,md=16200,om=16201,lm=16202,cm=16203,um=16204,dm=16205,Gh=16206,hm=16207,fm=16208,Qr=16209,Fg=16210,Rg=16211,Ey=852,Ly=592,Dy=15,Ty=Dy,pm=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Oy(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ql=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Bd||e.mode>Rg?1:0},Mg=n=>{if(ql(n))return Ki;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Bd,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Ey),e.distcode=e.distdyn=new Int32Array(Ly),e.sane=1,e.back=-1,Ml},Ug=n=>{if(ql(n))return Ki;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Mg(n)},Bg=(n,e)=>{let t;if(ql(n))return Ki;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ki:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Ug(n))},qg=(n,e)=>{if(!n)return Ki;const t=new Oy;n.state=t,t.strm=n,t.window=null,t.mode=Bd;const s=Bg(n,e);return s!==Ml&&(n.state=null),s},Iy=n=>qg(n,Ty);let mm=!0,Yh,Kh;const Fy=n=>{if(mm){Yh=new Int32Array(512),Kh=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(xu(Dg,n.lens,0,288,Yh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;xu(Tg,n.lens,0,32,Kh,0,n.work,{bits:5}),mm=!1}n.lencode=Yh,n.lenbits=9,n.distcode=Kh,n.distbits=5},zg=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},Ry=(n,e)=>{let t,s,a,o,u,d,p,g,x,w,S,y,E,C,L=0,A,U,R,z,he,le,ee,$;const J=new Uint8Array(4);let ne,O;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ql(n)||!n.output||!n.input&&n.avail_in!==0)return Ki;t=n.state,t.mode===mo&&(t.mode=Hh),u=n.next_out,a=n.output,p=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,g=t.hold,x=t.bits,w=d,S=p,$=Ml;e:for(;;)switch(t.mode){case Bd:if(t.wrap===0){t.mode=Hh;break}for(;x<16;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(t.wrap&2&&g===35615){t.wbits===0&&(t.wbits=15),t.check=0,J[0]=g&255,J[1]=g>>>8&255,t.check=qa(t.check,J,2,0),g=0,x=0,t.mode=Gp;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((g&255)<<8)+(g>>8))%31){n.msg="incorrect header check",t.mode=Qr;break}if((g&15)!==Vp){n.msg="unknown compression method",t.mode=Qr;break}if(g>>>=4,x-=4,ee=(g&15)+8,t.wbits===0&&(t.wbits=ee),ee>15||ee>t.wbits){n.msg="invalid window size",t.mode=Qr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=g&512?tm:mo,g=0,x=0;break;case Gp:for(;x<16;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(t.flags=g,(t.flags&255)!==Vp){n.msg="unknown compression method",t.mode=Qr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Qr;break}t.head&&(t.head.text=g>>8&1),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,t.check=qa(t.check,J,2,0)),g=0,x=0,t.mode=Yp;case Yp:for(;x<32;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}t.head&&(t.head.time=g),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,J[2]=g>>>16&255,J[3]=g>>>24&255,t.check=qa(t.check,J,4,0)),g=0,x=0,t.mode=Kp;case Kp:for(;x<16;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}t.head&&(t.head.xflags=g&255,t.head.os=g>>8),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,t.check=qa(t.check,J,2,0)),g=0,x=0,t.mode=Jp;case Jp:if(t.flags&1024){for(;x<16;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}t.length=g,t.head&&(t.head.extra_len=g),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,t.check=qa(t.check,J,2,0)),g=0,x=0}else t.head&&(t.head.extra=null);t.mode=Xp;case Xp:if(t.flags&1024&&(y=t.length,y>d&&(y=d),y&&(t.head&&(ee=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+y),ee)),t.flags&512&&t.wrap&4&&(t.check=qa(t.check,s,y,o)),d-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=Qp;case Qp:if(t.flags&2048){if(d===0)break e;y=0;do ee=s[o+y++],t.head&&ee&&t.length<65536&&(t.head.name+=String.fromCharCode(ee));while(ee&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=qa(t.check,s,y,o)),d-=y,o+=y,ee)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Zp;case Zp:if(t.flags&4096){if(d===0)break e;y=0;do ee=s[o+y++],t.head&&ee&&t.length<65536&&(t.head.comment+=String.fromCharCode(ee));while(ee&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=qa(t.check,s,y,o)),d-=y,o+=y,ee)break e}else t.head&&(t.head.comment=null);t.mode=em;case em:if(t.flags&512){for(;x<16;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(t.wrap&4&&g!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Qr;break}g=0,x=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=mo;break;case tm:for(;x<32;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}n.adler=t.check=pm(g),g=0,x=0,t.mode=Od;case Od:if(t.havedict===0)return n.next_out=u,n.avail_out=p,n.next_in=o,n.avail_in=d,t.hold=g,t.bits=x,Py;n.adler=t.check=1,t.mode=mo;case mo:if(e===jy||e===fd)break e;case Hh:if(t.last){g>>>=x&7,x-=x&7,t.mode=Gh;break}for(;x<3;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}switch(t.last=g&1,g>>>=1,x-=1,g&3){case 0:t.mode=rm;break;case 1:if(Fy(t),t.mode=pd,e===fd){g>>>=2,x-=2;break e}break;case 2:t.mode=sm;break;case 3:n.msg="invalid block type",t.mode=Qr}g>>>=2,x-=2;break;case rm:for(g>>>=x&7,x-=x&7;x<32;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if((g&65535)!==(g>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Qr;break}if(t.length=g&65535,g=0,x=0,t.mode=Vh,e===fd)break e;case Vh:t.mode=nm;case nm:if(y=t.length,y){if(y>d&&(y=d),y>p&&(y=p),y===0)break e;a.set(s.subarray(o,o+y),u),d-=y,o+=y,p-=y,u+=y,t.length-=y;break}t.mode=mo;break;case sm:for(;x<14;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(t.nlen=(g&31)+257,g>>>=5,x-=5,t.ndist=(g&31)+1,g>>>=5,x-=5,t.ncode=(g&15)+4,g>>>=4,x-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Qr;break}t.have=0,t.mode=im;case im:for(;t.have<t.ncode;){for(;x<3;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}t.lens[T[t.have++]]=g&7,g>>>=3,x-=3}for(;t.have<19;)t.lens[T[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ne={bits:t.lenbits},$=xu(Sy,t.lens,0,19,t.lencode,0,t.work,ne),t.lenbits=ne.bits,$){n.msg="invalid code lengths set",t.mode=Qr;break}t.have=0,t.mode=am;case am:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[g&(1<<t.lenbits)-1],A=L>>>24,U=L>>>16&255,R=L&65535,!(A<=x);){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(R<16)g>>>=A,x-=A,t.lens[t.have++]=R;else{if(R===16){for(O=A+2;x<O;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(g>>>=A,x-=A,t.have===0){n.msg="invalid bit length repeat",t.mode=Qr;break}ee=t.lens[t.have-1],y=3+(g&3),g>>>=2,x-=2}else if(R===17){for(O=A+3;x<O;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}g>>>=A,x-=A,ee=0,y=3+(g&7),g>>>=3,x-=3}else{for(O=A+7;x<O;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}g>>>=A,x-=A,ee=0,y=11+(g&127),g>>>=7,x-=7}if(t.have+y>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Qr;break}for(;y--;)t.lens[t.have++]=ee}}if(t.mode===Qr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Qr;break}if(t.lenbits=9,ne={bits:t.lenbits},$=xu(Dg,t.lens,0,t.nlen,t.lencode,0,t.work,ne),t.lenbits=ne.bits,$){n.msg="invalid literal/lengths set",t.mode=Qr;break}if(t.distbits=6,t.distcode=t.distdyn,ne={bits:t.distbits},$=xu(Tg,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ne),t.distbits=ne.bits,$){n.msg="invalid distances set",t.mode=Qr;break}if(t.mode=pd,e===fd)break e;case pd:t.mode=md;case md:if(d>=6&&p>=258){n.next_out=u,n.avail_out=p,n.next_in=o,n.avail_in=d,t.hold=g,t.bits=x,yy(n,S),u=n.next_out,a=n.output,p=n.avail_out,o=n.next_in,s=n.input,d=n.avail_in,g=t.hold,x=t.bits,t.mode===mo&&(t.back=-1);break}for(t.back=0;L=t.lencode[g&(1<<t.lenbits)-1],A=L>>>24,U=L>>>16&255,R=L&65535,!(A<=x);){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(U&&(U&240)===0){for(z=A,he=U,le=R;L=t.lencode[le+((g&(1<<z+he)-1)>>z)],A=L>>>24,U=L>>>16&255,R=L&65535,!(z+A<=x);){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}g>>>=z,x-=z,t.back+=z}if(g>>>=A,x-=A,t.back+=A,t.length=R,U===0){t.mode=dm;break}if(U&32){t.back=-1,t.mode=mo;break}if(U&64){n.msg="invalid literal/length code",t.mode=Qr;break}t.extra=U&15,t.mode=om;case om:if(t.extra){for(O=t.extra;x<O;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}t.length+=g&(1<<t.extra)-1,g>>>=t.extra,x-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=lm;case lm:for(;L=t.distcode[g&(1<<t.distbits)-1],A=L>>>24,U=L>>>16&255,R=L&65535,!(A<=x);){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if((U&240)===0){for(z=A,he=U,le=R;L=t.distcode[le+((g&(1<<z+he)-1)>>z)],A=L>>>24,U=L>>>16&255,R=L&65535,!(z+A<=x);){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}g>>>=z,x-=z,t.back+=z}if(g>>>=A,x-=A,t.back+=A,U&64){n.msg="invalid distance code",t.mode=Qr;break}t.offset=R,t.extra=U&15,t.mode=cm;case cm:if(t.extra){for(O=t.extra;x<O;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}t.offset+=g&(1<<t.extra)-1,g>>>=t.extra,x-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Qr;break}t.mode=um;case um:if(p===0)break e;if(y=S-p,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Qr;break}y>t.wnext?(y-=t.wnext,E=t.wsize-y):E=t.wnext-y,y>t.length&&(y=t.length),C=t.window}else C=a,E=u-t.offset,y=t.length;y>p&&(y=p),p-=y,t.length-=y;do a[u++]=C[E++];while(--y);t.length===0&&(t.mode=md);break;case dm:if(p===0)break e;a[u++]=t.length,p--,t.mode=md;break;case Gh:if(t.wrap){for(;x<32;){if(d===0)break e;d--,g|=s[o++]<<x,x+=8}if(S-=p,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?qa(t.check,a,S,u-S):Pf(t.check,a,S,u-S)),S=p,t.wrap&4&&(t.flags?g:pm(g))!==t.check){n.msg="incorrect data check",t.mode=Qr;break}g=0,x=0}t.mode=hm;case hm:if(t.wrap&&t.flags){for(;x<32;){if(d===0)break e;d--,g+=s[o++]<<x,x+=8}if(t.wrap&4&&g!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Qr;break}g=0,x=0}t.mode=fm;case fm:$=Ay;break e;case Qr:$=Og;break e;case Fg:return Ig;case Rg:default:return Ki}return n.next_out=u,n.avail_out=p,n.next_in=o,n.avail_in=d,t.hold=g,t.bits=x,(t.wsize||S!==n.avail_out&&t.mode<Qr&&(t.mode<Gh||e!==Hp))&&zg(n,n.output,n.next_out,S-n.avail_out),w-=n.avail_in,S-=n.avail_out,n.total_in+=w,n.total_out+=S,t.total+=S,t.wrap&4&&S&&(n.adler=t.check=t.flags?qa(t.check,a,S,n.next_out-S):Pf(t.check,a,S,n.next_out-S)),n.data_type=t.bits+(t.last?64:0)+(t.mode===mo?128:0)+(t.mode===pd||t.mode===Vh?256:0),(w===0&&S===0||e===Hp)&&$===Ml&&($=Cy),$},My=n=>{if(ql(n))return Ki;let e=n.state;return e.window&&(e.window=null),n.state=null,Ml},Uy=(n,e)=>{if(ql(n))return Ki;const t=n.state;return(t.wrap&2)===0?Ki:(t.head=e,e.done=!1,Ml)},By=(n,e)=>{const t=e.length;let s,a,o;return ql(n)||(s=n.state,s.wrap!==0&&s.mode!==Od)?Ki:s.mode===Od&&(a=1,a=Pf(a,e,t,0),a!==s.check)?Og:(o=zg(n,e,t,t),o?(s.mode=Fg,Ig):(s.havedict=1,Ml))};var qy=Ug,zy=Bg,$y=Mg,Wy=Iy,Hy=qg,Vy=Ry,Gy=My,Yy=Uy,Ky=By,Jy="pako inflate (from Nodeca project)",vo={inflateReset:qy,inflateReset2:zy,inflateResetKeep:$y,inflateInit:Wy,inflateInit2:Hy,inflate:Vy,inflateEnd:Gy,inflateGetHeader:Yy,inflateSetDictionary:Ky,inflateInfo:Jy};function Xy(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Qy=Xy;const $g=Object.prototype.toString,{Z_NO_FLUSH:Zy,Z_FINISH:eb,Z_OK:_u,Z_STREAM_END:Jh,Z_NEED_DICT:Xh,Z_STREAM_ERROR:tb,Z_DATA_ERROR:gm,Z_MEM_ERROR:rb}=Cg;function Su(n){this.options=Eg.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vy,this.strm.avail_out=0;let t=vo.inflateInit2(this.strm,e.windowBits);if(t!==_u)throw new Error(Cf[t]);if(this.header=new Qy,vo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ef.string2buf(e.dictionary):$g.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=vo.inflateSetDictionary(this.strm,e.dictionary),t!==_u)))throw new Error(Cf[t])}Su.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?eb:Zy,$g.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=vo.inflate(t,u),o===Xh&&a&&(o=vo.inflateSetDictionary(t,a),o===_u?o=vo.inflate(t,u):o===gm&&(o=Xh));t.avail_in>0&&o===Jh&&t.state.wrap>0&&n[t.next_in]!==0;)vo.inflateReset(t),o=vo.inflate(t,u);switch(o){case tb:case gm:case Xh:case rb:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===Jh))if(this.options.to==="string"){let p=Ef.utf8border(t.output,t.next_out),g=t.next_out-p,x=Ef.buf2string(t.output,p);t.next_out=g,t.avail_out=s-g,g&&t.output.set(t.output.subarray(p,p+g),0),this.onData(x)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===_u&&d===0)){if(o===Jh)return o=vo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Su.prototype.onData=function(n){this.chunks.push(n)};Su.prototype.onEnd=function(n){n===_u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Eg.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function nb(n,e){const t=new Su(e);if(t.push(n),t.err)throw t.msg||Cf[t.err];return t.result}var sb=Su,ib=nb,ab={Inflate:sb,inflate:ib};const{Inflate:ob,inflate:lb}=ab;var vm=ob,cb=lb;const Wg=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Wg[n]=e}const xm=4294967295;function ub(n,e,t){let s=n;for(let a=0;a<t;a++)s=Wg[(s^e[a])&255]^s>>>8;return s}function db(n,e){return(ub(xm,n,e)^xm)>>>0}function ym(n,e,t){const s=n.readUint32(),a=db(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Hg(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function Vg(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function Gg(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function Yg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function Kg(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+hb(e[o-a],t[o],t[o-a])&255}}function hb(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function fb(n,e,t,s,a,o){switch(n){case 0:Hg(e,t,a);break;case 1:Vg(e,t,a,o);break;case 2:Gg(e,t,s,a);break;case 3:Yg(e,t,s,a,o);break;case 4:Kg(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const pb=new Uint16Array([255]),mb=new Uint8Array(pb.buffer),gb=mb[0]===255;function vb(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*a,p=new Uint8Array(s*t*d);let g=0;for(let x=0;x<7;x++){const w=u[x],S=Math.ceil((t-w.x)/w.xStep),y=Math.ceil((s-w.y)/w.yStep);if(S<=0||y<=0)continue;const E=S*d,C=new Uint8Array(E);for(let L=0;L<y;L++){const A=e[g++],U=e.subarray(g,g+E);g+=E;const R=new Uint8Array(E);fb(A,U,R,C,E,d),C.set(R);for(let z=0;z<S;z++){const he=w.x+z*w.xStep,le=w.y+L*w.yStep;if(!(he>=t||le>=s))for(let ee=0;ee<d;ee++)p[(le*t+he)*d+ee]=R[z*d+ee]}}}if(o===16){const x=new Uint16Array(p.buffer);if(gb)for(let w=0;w<x.length;w++)x[w]=xb(x[w]);return x}else return p}function xb(n){return(n&255)<<8|n>>8&255}const yb=new Uint16Array([255]),bb=new Uint8Array(yb.buffer),wb=bb[0]===255,_b=new Uint8Array(0);function bm(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,d=Math.ceil(o/8*a*t),p=new Uint8Array(s*d);let g=_b,x=0,w,S;for(let y=0;y<s;y++){switch(w=e.subarray(x+1,x+1+d),S=p.subarray(y*d,(y+1)*d),e[x]){case 0:Hg(w,S,d);break;case 1:Vg(w,S,d,u);break;case 2:Gg(w,S,g,d);break;case 3:Yg(w,S,g,d,u);break;case 4:Kg(w,S,g,d,u);break;default:throw new Error(`Unsupported filter: ${e[x]}`)}g=S,x+=d+1}if(o===16){const y=new Uint16Array(p.buffer);if(wb)for(let E=0;E<y.length;E++)y[E]=Nb(y[E]);return y}else return p}function Nb(n){return(n&255)<<8|n>>8&255}const _d=Uint8Array.of(137,80,78,71,13,10,26,10);function wm(n){if(!kb(n.readBytes(_d.length)))throw new Error("wrong PNG signature")}function kb(n){if(n.length<_d.length)return!1;for(let e=0;e<_d.length;e++)if(n[e]!==_d[e])return!1;return!0}const Sb="tEXt",jb=0,Jg=new TextDecoder("latin1");function Ab(n){if(Cb(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const Pb=/^[\u0000-\u00FF]*$/;function Cb(n){if(!Pb.test(n))throw new Error("invalid latin1 text")}function Eb(n,e,t){const s=Xg(e);n[s]=Lb(e,t-s.length-1)}function Xg(n){for(n.mark();n.readByte()!==jb;);const e=n.offset;n.reset();const t=Jg.decode(n.readBytes(e-n.offset-1));return n.skip(1),Ab(t),t}function Lb(n,e){return Jg.decode(n.readBytes(e))}const ji={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Qh={UNKNOWN:-1,DEFLATE:0},_m={UNKNOWN:-1,ADAPTIVE:0},Zh={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},gd={NONE:0,BACKGROUND:1,PREVIOUS:2},ef={SOURCE:0,OVER:1};class Db extends Hf{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new vm,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Qh.UNKNOWN,this._filterMethod=_m.UNKNOWN,this._interlaceMethod=Zh.UNKNOWN,this._colorType=ji.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(wm(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(wm(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Sb:Eb(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ym(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ym(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Tb(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case ji.GREYSCALE:s=1;break;case ji.TRUECOLOUR:s=3;break;case ji.INDEXED_COLOUR:s=1;break;case ji.GREYSCALE_ALPHA:s=2;break;case ji.TRUECOLOUR_ALPHA:s=4;break;case ji.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Qh.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ji.GREYSCALE:case ji.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ji.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ji.UNKNOWN:case ji.GREYSCALE_ALPHA:case ji.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=Xg(this),s=this.readUint8();if(s!==Qh.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:cb(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=bm({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case gd.NONE:break;case gd.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[u+d]=0}break;case gd.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,p=(o*t.width+u)*this._png.channels;return{index:d,frameIndex:p}};switch(t.blendOp){case ef.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:p}=a(o,u);for(let g=0;g<this._png.channels;g++)e.data[d+g]=t.data[p+g]}break;case ef.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:p}=a(o,u);for(let g=0;g<this._png.channels;g++){const x=t.data[p+this._png.channels-1]/s,w=g%(this._png.channels-1)===0?1:t.data[p+g],S=Math.floor(x*w+(1-x)*e.data[d+g]);e.data[d+g]+=S}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==_m.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Zh.NO_INTERLACE)this._png.data=bm({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Zh.ADAM7)this._png.data=vb({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:gd.NONE,blendOp:ef.SOURCE,data:e}),this._inflator=new vm,this._writingDataChunks=!1}}function Tb(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Nm;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Nm||(Nm={}));function Ob(n,e){return new Db(n,e).decode()}var Mt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function tf(){Mt.console&&typeof Mt.console.log=="function"&&Mt.console.log.apply(Mt.console,arguments)}var Lr={log:tf,warn:function(n){Mt.console&&(typeof Mt.console.warn=="function"?Mt.console.warn.apply(Mt.console,arguments):tf.call(null,arguments))},error:function(n){Mt.console&&(typeof Mt.console.error=="function"?Mt.console.error.apply(Mt.console,arguments):tf(n))}};function rf(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){Ll(s.response,e,t)},s.onerror=function(){Lr.error("could not download file")},s.send()}function km(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function vd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ll=Mt.saveAs||((typeof window>"u"?"undefined":br(window))!=="object"||window!==Mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=Mt.URL||Mt.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?km(a.href)?rf(n,e,t):vd(a,a.target="_blank"):vd(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){vd(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(km(n))rf(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){vd(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:br(o)!=="object"&&(Lr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return rf(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(Mt.HTMLElement)||Mt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":br(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var x=d.result;x=u?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=x:location=x,s=null},d.readAsDataURL(n)}else{var p=Mt.URL||Mt.webkitURL,g=p.createObjectURL(n);s?s.location=g:location.href=g,s=null,setTimeout(function(){p.revokeObjectURL(g)},4e4)}});function Qg(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),p=this.g.toString(16),g=this.b.toString(16);return d.length==1&&(d="0"+d),p.length==1&&(p="0"+p),g.length==1&&(g="0"+g),"#"+d+p+g}}var Nd=Mt.atob.bind(Mt),Sm=Mt.btoa.bind(Mt);function nf(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=ks(t,s,a,o,e[0],7,-680876936),o=ks(o,t,s,a,e[1],12,-389564586),a=ks(a,o,t,s,e[2],17,606105819),s=ks(s,a,o,t,e[3],22,-1044525330),t=ks(t,s,a,o,e[4],7,-176418897),o=ks(o,t,s,a,e[5],12,1200080426),a=ks(a,o,t,s,e[6],17,-1473231341),s=ks(s,a,o,t,e[7],22,-45705983),t=ks(t,s,a,o,e[8],7,1770035416),o=ks(o,t,s,a,e[9],12,-1958414417),a=ks(a,o,t,s,e[10],17,-42063),s=ks(s,a,o,t,e[11],22,-1990404162),t=ks(t,s,a,o,e[12],7,1804603682),o=ks(o,t,s,a,e[13],12,-40341101),a=ks(a,o,t,s,e[14],17,-1502002290),t=Ss(t,s=ks(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Ss(o,t,s,a,e[6],9,-1069501632),a=Ss(a,o,t,s,e[11],14,643717713),s=Ss(s,a,o,t,e[0],20,-373897302),t=Ss(t,s,a,o,e[5],5,-701558691),o=Ss(o,t,s,a,e[10],9,38016083),a=Ss(a,o,t,s,e[15],14,-660478335),s=Ss(s,a,o,t,e[4],20,-405537848),t=Ss(t,s,a,o,e[9],5,568446438),o=Ss(o,t,s,a,e[14],9,-1019803690),a=Ss(a,o,t,s,e[3],14,-187363961),s=Ss(s,a,o,t,e[8],20,1163531501),t=Ss(t,s,a,o,e[13],5,-1444681467),o=Ss(o,t,s,a,e[2],9,-51403784),a=Ss(a,o,t,s,e[7],14,1735328473),t=js(t,s=Ss(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=js(o,t,s,a,e[8],11,-2022574463),a=js(a,o,t,s,e[11],16,1839030562),s=js(s,a,o,t,e[14],23,-35309556),t=js(t,s,a,o,e[1],4,-1530992060),o=js(o,t,s,a,e[4],11,1272893353),a=js(a,o,t,s,e[7],16,-155497632),s=js(s,a,o,t,e[10],23,-1094730640),t=js(t,s,a,o,e[13],4,681279174),o=js(o,t,s,a,e[0],11,-358537222),a=js(a,o,t,s,e[3],16,-722521979),s=js(s,a,o,t,e[6],23,76029189),t=js(t,s,a,o,e[9],4,-640364487),o=js(o,t,s,a,e[12],11,-421815835),a=js(a,o,t,s,e[15],16,530742520),t=As(t,s=js(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=As(o,t,s,a,e[7],10,1126891415),a=As(a,o,t,s,e[14],15,-1416354905),s=As(s,a,o,t,e[5],21,-57434055),t=As(t,s,a,o,e[12],6,1700485571),o=As(o,t,s,a,e[3],10,-1894986606),a=As(a,o,t,s,e[10],15,-1051523),s=As(s,a,o,t,e[1],21,-2054922799),t=As(t,s,a,o,e[8],6,1873313359),o=As(o,t,s,a,e[15],10,-30611744),a=As(a,o,t,s,e[6],15,-1560198380),s=As(s,a,o,t,e[13],21,1309151649),t=As(t,s,a,o,e[4],6,-145523070),o=As(o,t,s,a,e[11],10,-1120210379),a=As(a,o,t,s,e[2],15,718787259),s=As(s,a,o,t,e[9],21,-343485551),n[0]=Qo(t,n[0]),n[1]=Qo(s,n[1]),n[2]=Qo(a,n[2]),n[3]=Qo(o,n[3])}function qd(n,e,t,s,a,o){return e=Qo(Qo(e,n),Qo(s,o)),Qo(e<<a|e>>>32-a,t)}function ks(n,e,t,s,a,o,u){return qd(e&t|~e&s,n,e,a,o,u)}function Ss(n,e,t,s,a,o,u){return qd(e&s|t&~s,n,e,a,o,u)}function js(n,e,t,s,a,o,u){return qd(e^t^s,n,e,a,o,u)}function As(n,e,t,s,a,o,u){return qd(t^(e|~s),n,e,a,o,u)}function Zg(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)nf(s,Ib(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(nf(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,nf(s,a),s}function Ib(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var jm="0123456789abcdef".split("");function Fb(n){for(var e="",t=0;t<4;t++)e+=jm[n>>8*t+4&15]+jm[n>>8*t&15];return e}function Rb(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Lf(n){return Zg(n).map(Rb).join("")}var Mb=(function(n){for(var e=0;e<n.length;e++)n[e]=Fb(n[e]);return n.join("")})(Zg("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qo(n,e){if(Mb){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Df(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),d=[],p=0;p<256;p++)d[p]=p;var g=0;for(p=0;p<256;p++){var x=d[p];g=(g+x+u.charCodeAt(p))%256,d[p]=d[g],d[g]=x}t=n,s=d}else d=s;var w=e.length,S=0,y=0,E="";for(p=0;p<w;p++)y=(y+(x=d[S=(S+1)%256]))%256,d[S]=d[y],d[y]=x,u=d[(d[S]+d[y])%256],E+=String.fromCharCode(e.charCodeAt(p)^u);return E}var Am={print:4,modify:8,copy:16,"annot-forms":32};function Ac(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(d){if(Am.perm!==void 0)throw new Error("Invalid permission: "+d);a+=Am[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Lf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Df(this.encryptionKey,this.padding)}function Pc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function Pm(n){if(br(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(d){Mt.console&&Lr.error("jsPDF PubSub Error",d.message,d)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Id(n){if(!(this instanceof Id))return new Id(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function e1(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ol(n,e,t,s,a){if(!(this instanceof Ol))return new Ol(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,e1.call(this,s,a)}function Ec(n,e,t,s,a){if(!(this instanceof Ec))return new Ec(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,e1.call(this,s,a)}function _t(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],d=1,p=16,g="S",x=null;br(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(x=n.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(p=n.floatPrecision),g=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var w=n.putOnlyUsedFonts||!1,S={},y={internal:{},__private__:{}};y.__private__.PubSub=Pm;var E="1.3",C=y.__private__.getPdfVersion=function(){return E};y.__private__.setPdfVersion=function(h){E=h};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return L};var A=y.__private__.getPageFormat=function(h){return L[h]};a=a||"a4";var U="compat",R="advanced",z=U;function he(){this.saveGraphicsState(),re(new Nt(mt,0,0,-mt,0,ns()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),g="n",z=R}function le(){this.restoreGraphicsState(),g="S",z=U}var ee=y.__private__.combineFontStyleAndFontWeight=function(h,N){if(h=="bold"&&N=="normal"||h=="bold"&&N==400||h=="normal"&&N=="italic"||h=="bold"&&N=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return N&&(h=N==400||N==="normal"?h==="italic"?"italic":"normal":N!=700&&N!=="bold"||h!=="normal"?(N==700?"bold":N)+""+h:"bold"),h};y.advancedAPI=function(h){var N=z===U;return N&&he.call(this),typeof h!="function"||(h(this),N&&le.call(this)),this},y.compatAPI=function(h){var N=z===R;return N&&le.call(this),typeof h!="function"||(h(this),N&&he.call(this)),this},y.isAdvancedAPI=function(){return z===R};var $,J=function(h){if(z!==R)throw new Error(h+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ne=y.roundToPrecision=y.__private__.roundToPrecision=function(h,N){var D=e||N;if(isNaN(h)||isNaN(D))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return h.toFixed(D).replace(/0+$/,"")};$=y.hpf=y.__private__.hpf=typeof p=="number"?function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(h,p)}:p==="smart"?function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(h,h>-1&&h<1?16:5)}:function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(h,16)};var O=y.f2=y.__private__.f2=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.f2");return ne(h,2)},T=y.__private__.f3=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.f3");return ne(h,3)},te=y.scale=y.__private__.scale=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.scale");return z===U?h*mt:z===R?h:void 0},H=function(h){return te((function(N){return z===U?ns()-N:z===R?N:void 0})(h))};y.__private__.setPrecision=y.setPrecision=function(h){typeof parseInt(h,10)=="number"&&(e=parseInt(h,10))};var Q,X="00000000000000000000000000000000",pe=y.__private__.getFileId=function(){return X},G=y.__private__.setFileId=function(h){return X=h!==void 0&&/^[a-fA-F0-9]{32}$/.test(h)?h.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Vr=new Ac(x.userPermissions,x.userPassword,x.ownerPassword,X)),X};y.setFileId=function(h){return G(h),this},y.getFileId=function(){return pe()};var ce=y.__private__.convertDateToPDFDate=function(h){var N=h.getTimezoneOffset(),D=N<0?"+":"-",M=Math.floor(Math.abs(N/60)),se=Math.abs(N%60),be=[D,V(M),"'",V(se),"'"].join("");return["D:",h.getFullYear(),V(h.getMonth()+1),V(h.getDate()),V(h.getHours()),V(h.getMinutes()),V(h.getSeconds()),be].join("")},ve=y.__private__.convertPDFDateToDate=function(h){var N=parseInt(h.substr(2,4),10),D=parseInt(h.substr(6,2),10)-1,M=parseInt(h.substr(8,2),10),se=parseInt(h.substr(10,2),10),be=parseInt(h.substr(12,2),10),Se=parseInt(h.substr(14,2),10);return new Date(N,D,M,se,be,Se,0)},Y=y.__private__.setCreationDate=function(h){var N;if(h===void 0&&(h=new Date),h instanceof Date)N=ce(h);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(h))throw new Error("Invalid argument passed to jsPDF.setCreationDate");N=h}return Q=N},P=y.__private__.getCreationDate=function(h){var N=Q;return h==="jsDate"&&(N=ve(Q)),N};y.setCreationDate=function(h){return Y(h),this},y.getCreationDate=function(h){return P(h)};var F,V=y.__private__.padd2=function(h){return("0"+parseInt(h)).slice(-2)},ie=y.__private__.padd2Hex=function(h){return("00"+(h=h.toString())).substr(h.length)},ue=0,me=[],ye=[],xe=0,ge=[],Ie=[],Re=!1,We=ye;y.__private__.setCustomOutputDestination=function(h){Re=!0,We=h};var Ve=function(h){Re||(We=h)};y.__private__.resetCustomOutputDestination=function(){Re=!1,We=ye};var re=y.__private__.out=function(h){return h=h.toString(),xe+=h.length+1,We.push(h),We},Ye=y.__private__.write=function(h){return re(arguments.length===1?h.toString():Array.prototype.join.call(arguments," "))},bt=y.__private__.getArrayBuffer=function(h){for(var N=h.length,D=new ArrayBuffer(N),M=new Uint8Array(D);N--;)M[N]=h.charCodeAt(N);return D},ot=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return ot};var ze=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(h){return ze=z===R?h/mt:h,this};var st,et=y.__private__.getFontSize=y.getFontSize=function(){return z===U?ze:ze*mt},yt=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(h){return yt=h,this},y.__private__.getR2L=y.getR2L=function(){return yt};var vt,Ut=y.__private__.setZoomMode=function(h){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(h))st=h;else if(isNaN(h)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(h)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+h+'" is not recognized.');st=h}else st=parseInt(h,10)};y.__private__.getZoomMode=function(){return st};var wt,It=y.__private__.setPageMode=function(h){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(h)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+h+'" is not recognized.');vt=h};y.__private__.getPageMode=function(){return vt};var Ht=y.__private__.setLayoutMode=function(h){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(h)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+h+'" is not recognized.');wt=h};y.__private__.getLayoutMode=function(){return wt},y.__private__.setDisplayMode=y.setDisplayMode=function(h,N,D){return Ut(h),Ht(N),It(D),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(h){if(Object.keys(Vt).indexOf(h)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[h]},y.__private__.getDocumentProperties=function(){return Vt},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(h){for(var N in Vt)Vt.hasOwnProperty(N)&&h[N]&&(Vt[N]=h[N]);return this},y.__private__.setDocumentProperty=function(h,N){if(Object.keys(Vt).indexOf(h)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[h]=N};var lt,mt,it,Ar,Kt,Et={},Lt={},sr=[],ht={},dr={},kt={},Ft={},cr=null,Bt=0,St=[],nr=new Pm(y),Ji=n.hotfixes||[],tr={},Fn={},Jn=[],Nt=function h(N,D,M,se,be,Se){if(!(this instanceof h))return new h(N,D,M,se,be,Se);isNaN(N)&&(N=1),isNaN(D)&&(D=0),isNaN(M)&&(M=0),isNaN(se)&&(se=1),isNaN(be)&&(be=0),isNaN(Se)&&(Se=0),this._matrix=[N,D,M,se,be,Se]};Object.defineProperty(Nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(h){this._matrix[0]=h}}),Object.defineProperty(Nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(h){this._matrix[1]=h}}),Object.defineProperty(Nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(h){this._matrix[2]=h}}),Object.defineProperty(Nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(h){this._matrix[3]=h}}),Object.defineProperty(Nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(h){this._matrix[4]=h}}),Object.defineProperty(Nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(h){this._matrix[5]=h}}),Object.defineProperty(Nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(h){this._matrix[0]=h}}),Object.defineProperty(Nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(h){this._matrix[1]=h}}),Object.defineProperty(Nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(h){this._matrix[2]=h}}),Object.defineProperty(Nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(h){this._matrix[3]=h}}),Object.defineProperty(Nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(h){this._matrix[4]=h}}),Object.defineProperty(Nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(h){this._matrix[5]=h}}),Object.defineProperty(Nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Nt.prototype.join=function(h){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map($).join(h)},Nt.prototype.multiply=function(h){var N=h.sx*this.sx+h.shy*this.shx,D=h.sx*this.shy+h.shy*this.sy,M=h.shx*this.sx+h.sy*this.shx,se=h.shx*this.shy+h.sy*this.sy,be=h.tx*this.sx+h.ty*this.shx+this.tx,Se=h.tx*this.shy+h.ty*this.sy+this.ty;return new Nt(N,D,M,se,be,Se)},Nt.prototype.decompose=function(){var h=this.sx,N=this.shy,D=this.shx,M=this.sy,se=this.tx,be=this.ty,Se=Math.sqrt(h*h+N*N),Te=(h/=Se)*D+(N/=Se)*M;D-=h*Te,M-=N*Te;var De=Math.sqrt(D*D+M*M);return Te/=De,h*(M/=De)<N*(D/=De)&&(h=-h,N=-N,Te=-Te,Se=-Se),{scale:new Nt(Se,0,0,De,0,0),translate:new Nt(1,0,0,1,se,be),rotate:new Nt(h,N,-N,h,0,0),skew:new Nt(1,0,Te,1,0,0)}},Nt.prototype.toString=function(h){return this.join(" ")},Nt.prototype.inversed=function(){var h=this.sx,N=this.shy,D=this.shx,M=this.sy,se=this.tx,be=this.ty,Se=1/(h*M-N*D),Te=M*Se,De=-N*Se,$e=-D*Se,qe=h*Se;return new Nt(Te,De,$e,qe,-Te*se-$e*be,-De*se-qe*be)},Nt.prototype.applyToPoint=function(h){var N=h.x*this.sx+h.y*this.shx+this.tx,D=h.x*this.shy+h.y*this.sy+this.ty;return new ps(N,D)},Nt.prototype.applyToRectangle=function(h){var N=this.applyToPoint(h),D=this.applyToPoint(new ps(h.x+h.w,h.y+h.h));return new sa(N.x,N.y,D.x-N.x,D.y-N.y)},Nt.prototype.clone=function(){var h=this.sx,N=this.shy,D=this.shx,M=this.sy,se=this.tx,be=this.ty;return new Nt(h,N,D,M,se,be)},y.Matrix=Nt;var Rn=y.matrixMult=function(h,N){return N.multiply(h)},ds=new Nt(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=ds;var hn=function(h,N){if(!dr[h]){var D=(N instanceof Ol?"Sh":"P")+(Object.keys(ht).length+1).toString(10);N.id=D,dr[h]=D,ht[D]=N,nr.publish("addPattern",N)}};y.ShadingPattern=Ol,y.TilingPattern=Ec,y.addShadingPattern=function(h,N){return J("addShadingPattern()"),hn(h,N),this},y.beginTilingPattern=function(h){J("beginTilingPattern()"),Ts(h.boundingBox[0],h.boundingBox[1],h.boundingBox[2]-h.boundingBox[0],h.boundingBox[3]-h.boundingBox[1],h.matrix)},y.endTilingPattern=function(h,N){J("endTilingPattern()"),N.stream=Ie[F].join(`
`),hn(h,N),nr.publish("endTilingPattern",N),Jn.pop().restore()};var Xn,hr=y.__private__.newObject=function(){var h=Tr();return Ur(h,!0),h},Tr=y.__private__.newObjectDeferred=function(){return ue++,me[ue]=function(){return xe},ue},Ur=function(h,N){return N=typeof N=="boolean"&&N,me[h]=xe,N&&re(h+" 0 obj"),h},zs=y.__private__.newAdditionalObject=function(){var h={objId:Tr(),content:""};return ge.push(h),h},Qn=Tr(),An=Tr(),Zn=y.__private__.decodeColorString=function(h){var N=h.split(" ");if(N.length!==2||N[1]!=="g"&&N[1]!=="G")N.length!==5||N[4]!=="k"&&N[4]!=="K"||(N=[(1-N[0])*(1-N[3]),(1-N[1])*(1-N[3]),(1-N[2])*(1-N[3]),"r"]);else{var D=parseFloat(N[0]);N=[D,D,D,"r"]}for(var M="#",se=0;se<3;se++)M+=("0"+Math.floor(255*parseFloat(N[se])).toString(16)).slice(-2);return M},Hr=y.__private__.encodeColorString=function(h){var N;typeof h=="string"&&(h={ch1:h});var D=h.ch1,M=h.ch2,se=h.ch3,be=h.ch4,Se=h.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof D=="string"&&D.charAt(0)!=="#"){var Te=new Qg(D);if(Te.ok)D=Te.toHex();else if(!/^\d*\.?\d*$/.test(D))throw new Error('Invalid color "'+D+'" passed to jsPDF.encodeColorString.')}if(typeof D=="string"&&/^#[0-9A-Fa-f]{3}$/.test(D)&&(D="#"+D[1]+D[1]+D[2]+D[2]+D[3]+D[3]),typeof D=="string"&&/^#[0-9A-Fa-f]{6}$/.test(D)){var De=parseInt(D.substr(1),16);D=De>>16&255,M=De>>8&255,se=255&De}if(M===void 0||be===void 0&&D===M&&M===se)N=typeof D=="string"?D+" "+Se[0]:h.precision===2?O(D/255)+" "+Se[0]:T(D/255)+" "+Se[0];else if(be===void 0||br(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return["1.","1.","1.",Se[1]].join(" ");N=typeof D=="string"?[D,M,se,Se[1]].join(" "):h.precision===2?[O(D/255),O(M/255),O(se/255),Se[1]].join(" "):[T(D/255),T(M/255),T(se/255),Se[1]].join(" ")}else N=typeof D=="string"?[D,M,se,be,Se[2]].join(" "):h.precision===2?[O(D),O(M),O(se),O(be),Se[2]].join(" "):[T(D),T(M),T(se),T(be),Se[2]].join(" ");return N},hs=y.__private__.getFilters=function(){return u},Pn=y.__private__.putStream=function(h){var N=(h=h||{}).data||"",D=h.filters||hs(),M=h.alreadyAppliedFilters||[],se=h.addLength1||!1,be=N.length,Se=h.objectId,Te=function(rr){return rr};if(x!==null&&Se===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(Te=Vr.encryptor(Se,0));var De={};D===!0&&(D=["FlateEncode"]);var $e=h.additionalKeyValues||[],qe=(De=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(N,D):{data:N,reverseChain:[]}).reverseChain+(Array.isArray(M)?M.join(" "):M.toString());if(De.data.length!==0&&($e.push({key:"Length",value:De.data.length}),se===!0&&$e.push({key:"Length1",value:be})),qe.length!=0)if(qe.split("/").length-1==1)$e.push({key:"Filter",value:qe});else{$e.push({key:"Filter",value:"["+qe+"]"});for(var Xe=0;Xe<$e.length;Xe+=1)if($e[Xe].key==="DecodeParms"){for(var ft=[],Gt=0;Gt<De.reverseChain.split("/").length-1;Gt+=1)ft.push("null");ft.push($e[Xe].value),$e[Xe].value="["+ft.join(" ")+"]"}}re("<<");for(var Dt=0;Dt<$e.length;Dt++)re("/"+$e[Dt].key+" "+$e[Dt].value);re(">>"),De.data.length!==0&&(re("stream"),re(Te(De.data)),re("endstream"))},Cn=y.__private__.putPage=function(h){var N=h.number,D=h.data,M=h.objId,se=h.contentsObjId;Ur(M,!0),re("<</Type /Page"),re("/Parent "+h.rootDictionaryObjId+" 0 R"),re("/Resources "+h.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat($(h.mediaBox.bottomLeftX))+" "+parseFloat($(h.mediaBox.bottomLeftY))+" "+$(h.mediaBox.topRightX)+" "+$(h.mediaBox.topRightY)+"]"),h.cropBox!==null&&re("/CropBox ["+$(h.cropBox.bottomLeftX)+" "+$(h.cropBox.bottomLeftY)+" "+$(h.cropBox.topRightX)+" "+$(h.cropBox.topRightY)+"]"),h.bleedBox!==null&&re("/BleedBox ["+$(h.bleedBox.bottomLeftX)+" "+$(h.bleedBox.bottomLeftY)+" "+$(h.bleedBox.topRightX)+" "+$(h.bleedBox.topRightY)+"]"),h.trimBox!==null&&re("/TrimBox ["+$(h.trimBox.bottomLeftX)+" "+$(h.trimBox.bottomLeftY)+" "+$(h.trimBox.topRightX)+" "+$(h.trimBox.topRightY)+"]"),h.artBox!==null&&re("/ArtBox ["+$(h.artBox.bottomLeftX)+" "+$(h.artBox.bottomLeftY)+" "+$(h.artBox.topRightX)+" "+$(h.artBox.topRightY)+"]"),typeof h.userUnit=="number"&&h.userUnit!==1&&re("/UserUnit "+h.userUnit),nr.publish("putPage",{objId:M,pageContext:St[N],pageNumber:N,page:D}),re("/Contents "+se+" 0 R"),re(">>"),re("endobj");var be=D.join(`
`);return z===R&&(be+=`
Q`),Ur(se,!0),Pn({data:be,filters:hs(),objectId:se}),re("endobj"),M},En=y.__private__.putPages=function(){var h,N,D=[];for(h=1;h<=Bt;h++)St[h].objId=Tr(),St[h].contentsObjId=Tr();for(h=1;h<=Bt;h++)D.push(Cn({number:h,data:Ie[h],objId:St[h].objId,contentsObjId:St[h].contentsObjId,mediaBox:St[h].mediaBox,cropBox:St[h].cropBox,bleedBox:St[h].bleedBox,trimBox:St[h].trimBox,artBox:St[h].artBox,userUnit:St[h].userUnit,rootDictionaryObjId:Qn,resourceDictionaryObjId:An}));Ur(Qn,!0),re("<</Type /Pages");var M="/Kids [";for(N=0;N<Bt;N++)M+=D[N]+" 0 R ";re(M+"]"),re("/Count "+Bt),re(">>"),re("endobj"),nr.publish("postPutPages")},$s=function(h){nr.publish("putFont",{font:h,out:re,newObject:hr,putStream:Pn}),h.isAlreadyPutted!==!0&&(h.objectNumber=hr(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Pc(h.postScriptName)),re("/Subtype /Type1"),typeof h.encoding=="string"&&re("/Encoding /"+h.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},li=function(h){h.objectNumber=hr();var N=[];N.push({key:"Type",value:"/XObject"}),N.push({key:"Subtype",value:"/Form"}),N.push({key:"BBox",value:"["+[$(h.x),$(h.y),$(h.x+h.width),$(h.y+h.height)].join(" ")+"]"}),N.push({key:"Matrix",value:"["+h.matrix.toString()+"]"});var D=h.pages[1].join(`
`);Pn({data:D,additionalKeyValues:N,objectId:h.objectNumber}),re("endobj")},ci=function(h,N){N||(N=21);var D=hr(),M=(function(Se,Te){var De,$e=[],qe=1/(Te-1);for(De=0;De<1;De+=qe)$e.push(De);if($e.push(1),Se[0].offset!=0){var Xe={offset:0,color:Se[0].color};Se.unshift(Xe)}if(Se[Se.length-1].offset!=1){var ft={offset:1,color:Se[Se.length-1].color};Se.push(ft)}for(var Gt="",Dt=0,rr=0;rr<$e.length;rr++){for(De=$e[rr];De>Se[Dt+1].offset;)Dt++;var wr=Se[Dt].offset,Cr=(De-wr)/(Se[Dt+1].offset-wr),ss=Se[Dt].color,is=Se[Dt+1].color;Gt+=ie(Math.round((1-Cr)*ss[0]+Cr*is[0]).toString(16))+ie(Math.round((1-Cr)*ss[1]+Cr*is[1]).toString(16))+ie(Math.round((1-Cr)*ss[2]+Cr*is[2]).toString(16))}return Gt.trim()})(h.colors,N),se=[];se.push({key:"FunctionType",value:"0"}),se.push({key:"Domain",value:"[0.0 1.0]"}),se.push({key:"Size",value:"["+N+"]"}),se.push({key:"BitsPerSample",value:"8"}),se.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),se.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pn({data:M,additionalKeyValues:se,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:D}),re("endobj"),h.objectNumber=hr(),re("<< /ShadingType "+h.type),re("/ColorSpace /DeviceRGB");var be="/Coords ["+$(parseFloat(h.coords[0]))+" "+$(parseFloat(h.coords[1]))+" ";h.type===2?be+=$(parseFloat(h.coords[2]))+" "+$(parseFloat(h.coords[3])):be+=$(parseFloat(h.coords[2]))+" "+$(parseFloat(h.coords[3]))+" "+$(parseFloat(h.coords[4]))+" "+$(parseFloat(h.coords[5])),re(be+="]"),h.matrix&&re("/Matrix ["+h.matrix.toString()+"]"),re("/Function "+D+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Ei=function(h,N){var D=Tr(),M=hr();N.push({resourcesOid:D,objectOid:M}),h.objectNumber=M;var se=[];se.push({key:"Type",value:"/Pattern"}),se.push({key:"PatternType",value:"1"}),se.push({key:"PaintType",value:"1"}),se.push({key:"TilingType",value:"1"}),se.push({key:"BBox",value:"["+h.boundingBox.map($).join(" ")+"]"}),se.push({key:"XStep",value:$(h.xStep)}),se.push({key:"YStep",value:$(h.yStep)}),se.push({key:"Resources",value:D+" 0 R"}),h.matrix&&se.push({key:"Matrix",value:"["+h.matrix.toString()+"]"}),Pn({data:h.stream,additionalKeyValues:se,objectId:h.objectNumber}),re("endobj")},nl=function(h){for(var N in h.objectNumber=hr(),re("<<"),h)switch(N){case"opacity":re("/ca "+O(h[N]));break;case"stroke-opacity":re("/CA "+O(h[N]))}re(">>"),re("endobj")},fr=function(h){Ur(h.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var N in re("/Font <<"),Et)Et.hasOwnProperty(N)&&(w===!1||w===!0&&S.hasOwnProperty(N))&&re("/"+N+" "+Et[N].objectNumber+" 0 R");re(">>")})(),(function(){if(Object.keys(ht).length>0){for(var N in re("/Shading <<"),ht)ht.hasOwnProperty(N)&&ht[N]instanceof Ol&&ht[N].objectNumber>=0&&re("/"+N+" "+ht[N].objectNumber+" 0 R");nr.publish("putShadingPatternDict"),re(">>")}})(),(function(N){if(Object.keys(ht).length>0){for(var D in re("/Pattern <<"),ht)ht.hasOwnProperty(D)&&ht[D]instanceof y.TilingPattern&&ht[D].objectNumber>=0&&ht[D].objectNumber<N&&re("/"+D+" "+ht[D].objectNumber+" 0 R");nr.publish("putTilingPatternDict"),re(">>")}})(h.objectOid),(function(){if(Object.keys(kt).length>0){var N;for(N in re("/ExtGState <<"),kt)kt.hasOwnProperty(N)&&kt[N].objectNumber>=0&&re("/"+N+" "+kt[N].objectNumber+" 0 R");nr.publish("putGStateDict"),re(">>")}})(),(function(){for(var N in re("/XObject <<"),tr)tr.hasOwnProperty(N)&&tr[N].objectNumber>=0&&re("/"+N+" "+tr[N].objectNumber+" 0 R");nr.publish("putXobjectDict"),re(">>")})(),re(">>"),re("endobj")},sl=function(h){Lt[h.fontName]=Lt[h.fontName]||{},Lt[h.fontName][h.fontStyle]=h.id},Xi=function(h,N,D,M,se){var be={id:"F"+(Object.keys(Et).length+1).toString(10),postScriptName:h,fontName:N,fontStyle:D,encoding:M,isStandardFont:se||!1,metadata:{}};return nr.publish("addFont",{font:be,instance:this}),Et[be.id]=be,sl(be),be.id},Pr=y.__private__.pdfEscape=y.pdfEscape=function(h,N){return(function(D,M){var se,be,Se,Te,De,$e,qe,Xe,ft;if(Se=(M=M||{}).sourceEncoding||"Unicode",De=M.outputEncoding,(M.autoencode||De)&&Et[lt].metadata&&Et[lt].metadata[Se]&&Et[lt].metadata[Se].encoding&&(Te=Et[lt].metadata[Se].encoding,!De&&Et[lt].encoding&&(De=Et[lt].encoding),!De&&Te.codePages&&(De=Te.codePages[0]),typeof De=="string"&&(De=Te[De]),De)){for(qe=!1,$e=[],se=0,be=D.length;se<be;se++)(Xe=De[D.charCodeAt(se)])?$e.push(String.fromCharCode(Xe)):$e.push(D[se]),$e[se].charCodeAt(0)>>8&&(qe=!0);D=$e.join("")}for(se=D.length;qe===void 0&&se!==0;)D.charCodeAt(se-1)>>8&&(qe=!0),se--;if(!qe)return D;for($e=M.noBOM?[]:[254,255],se=0,be=D.length;se<be;se++){if((ft=(Xe=D.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+D+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$e.push(ft),$e.push(Xe-(ft<<8))}return String.fromCharCode.apply(void 0,$e)})(h,N).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ws=y.__private__.beginPage=function(h){Ie[++Bt]=[],St[Bt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(h[0]),topRightY:Number(h[1])}},Li(Bt),Ve(Ie[F])},xo=function(h,N){var D,M,se;switch(t=N||t,typeof h=="string"&&(D=A(h.toLowerCase()),Array.isArray(D)&&(M=D[0],se=D[1])),Array.isArray(h)&&(M=h[0]*mt,se=h[1]*mt),isNaN(M)&&(M=a[0],se=a[1]),(M>14400||se>14400)&&(Lr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),M=Math.min(14400,M),se=Math.min(14400,se)),a=[M,se],t.substr(0,1)){case"l":se>M&&(a=[se,M]);break;case"p":M>se&&(a=[se,M])}Ws(a),jt(fs),re(ea),ra!==0&&re(ra+" J"),Pa!==0&&re(Pa+" j"),nr.publish("addPage",{pageNumber:Bt})},ui=function(h){h>0&&h<=Bt&&(Ie.splice(h,1),St.splice(h,1),Bt--,F>Bt&&(F=Bt),this.setPage(F))},Li=function(h){h>0&&h<=Bt&&(F=h)},es=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ie.length-1},di=function(h,N,D){var M,se=void 0;return D=D||{},h=h!==void 0?h:Et[lt].fontName,N=N!==void 0?N:Et[lt].fontStyle,M=h.toLowerCase(),Lt[M]!==void 0&&Lt[M][N]!==void 0?se=Lt[M][N]:Lt[h]!==void 0&&Lt[h][N]!==void 0?se=Lt[h][N]:D.disableWarning===!1&&Lr.warn("Unable to look up font label for font '"+h+"', '"+N+"'. Refer to getFontList() for available fonts."),se||D.noFallback||(se=Lt.times[N])==null&&(se=Lt.times.normal),se},Br=y.__private__.putInfo=function(){var h=hr(),N=function(M){return M};for(var D in x!==null&&(N=Vr.encryptor(h,0)),re("<<"),re("/Producer ("+Pr(N("jsPDF "+_t.version))+")"),Vt)Vt.hasOwnProperty(D)&&Vt[D]&&re("/"+D.substr(0,1).toUpperCase()+D.substr(1)+" ("+Pr(N(Vt[D]))+")");re("/CreationDate ("+Pr(N(Q))+")"),re(">>"),re("endobj")},Ps=y.__private__.putCatalog=function(h){var N=(h=h||{}).rootDictionaryObjId||Qn;switch(hr(),re("<<"),re("/Type /Catalog"),re("/Pages "+N+" 0 R"),st||(st="fullwidth"),st){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var D=""+st;D.substr(D.length-1)==="%"&&(st=parseInt(st)/100),typeof st=="number"&&re("/OpenAction [3 0 R /XYZ null null "+O(st)+"]")}switch(wt||(wt="continuous"),wt){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}vt&&re("/PageMode /"+vt),nr.publish("putCatalog"),re(">>"),re("endobj")},yo=y.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(ue+1)),re("/Root "+ue+" 0 R"),re("/Info "+(ue-1)+" 0 R"),x!==null&&re("/Encrypt "+Vr.oid+" 0 R"),re("/ID [ <"+X+"> <"+X+"> ]"),re(">>")},qr=y.__private__.putHeader=function(){re("%PDF-"+E),re("%")},Hs=y.__private__.putXRef=function(){var h="0000000000";re("xref"),re("0 "+(ue+1)),re("0000000000 65535 f ");for(var N=1;N<=ue;N++)typeof me[N]=="function"?re((h+me[N]()).slice(-10)+" 00000 n "):me[N]!==void 0?re((h+me[N]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Mn=y.__private__.buildDocument=function(){var h;ue=0,xe=0,ye=[],me=[],ge=[],Qn=Tr(),An=Tr(),Ve(ye),nr.publish("buildDocument"),qr(),En(),(function(){nr.publish("putAdditionalObjects");for(var D=0;D<ge.length;D++){var M=ge[D];Ur(M.objId,!0),re(M.content),re("endobj")}nr.publish("postPutAdditionalObjects")})(),h=[],(function(){for(var D in Et)Et.hasOwnProperty(D)&&(w===!1||w===!0&&S.hasOwnProperty(D))&&$s(Et[D])})(),(function(){var D;for(D in kt)kt.hasOwnProperty(D)&&nl(kt[D])})(),(function(){for(var D in tr)tr.hasOwnProperty(D)&&li(tr[D])})(),(function(D){var M;for(M in ht)ht.hasOwnProperty(M)&&(ht[M]instanceof Ol?ci(ht[M]):ht[M]instanceof Ec&&Ei(ht[M],D))})(h),nr.publish("putResources"),h.forEach(fr),fr({resourcesOid:An,objectOid:Number.MAX_SAFE_INTEGER}),nr.publish("postPutResources"),x!==null&&(Vr.oid=hr(),re("<<"),re("/Filter /Standard"),re("/V "+Vr.v),re("/R "+Vr.r),re("/U <"+Vr.toHexString(Vr.U)+">"),re("/O <"+Vr.toHexString(Vr.O)+">"),re("/P "+Vr.P),re(">>"),re("endobj")),Br(),Ps();var N=xe;return Hs(),yo(),re("startxref"),re(""+N),re("%%EOF"),Ve(Ie[F]),ye.join(`
`)},Vs=y.__private__.getBlob=function(h){return new Blob([bt(h)],{type:"application/pdf"})},Di=y.output=y.__private__.output=(Xn=function(h,N){switch(typeof(N=N||{})=="string"?N={filename:N}:N.filename=N.filename||"generated.pdf",h){case void 0:return Mn();case"save":y.save(N.filename);break;case"arraybuffer":return bt(Mn());case"blob":return Vs(Mn());case"bloburi":case"bloburl":if(Mt.URL!==void 0&&typeof Mt.URL.createObjectURL=="function")return Mt.URL&&Mt.URL.createObjectURL(Vs(Mn()))||void 0;Lr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var D="",M=Mn();try{D=Sm(M)}catch{D=Sm(unescape(encodeURIComponent(M)))}return"data:application/pdf;filename="+N.filename+";base64,"+D;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var se="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';N.pdfObjectUrl&&(se=N.pdfObjectUrl,be="");var Se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+se+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(N)+");<\/script></body></html>",Te=Mt.open();return Te!==null&&Te.document.write(Se),Te}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var De='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(N.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+N.filename+'" width="500px" height="400px" /></body></html>',$e=Mt.open();if($e!==null){$e.document.write(De);var qe=this;$e.document.documentElement.querySelector("#pdfViewer").onload=function(){$e.document.title=N.filename,$e.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qe.output("bloburl"))}}return $e}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",N)+'"></iframe></body></html>',ft=Mt.open();if(ft!==null&&(ft.document.write(Xe),ft.document.title=N.filename),ft||typeof safari>"u")return ft;break;case"datauri":case"dataurl":return Mt.document.location.href=this.output("datauristring",N);default:return null}},Xn.foo=function(){try{return Xn.apply(this,arguments)}catch(D){var h=D.stack||"";~h.indexOf(" at ")&&(h=h.split(" at ")[1]);var N="Error in function "+h.split(`
`)[0].split("<")[0]+": "+D.message;if(!Mt.console)throw new Error(N);Mt.console.error(N,D),Mt.alert&&alert(N)}},Xn.foo.bar=Xn,Xn.foo),Un=function(h){return Array.isArray(Ji)===!0&&Ji.indexOf(h)>-1};switch(s){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=Un("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);mt=s}var Vr=null;Y(),G();var Cs=y.__private__.getPageInfo=y.getPageInfo=function(h){if(isNaN(h)||h%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:St[h].objId,pageNumber:h,pageContext:St[h]}},Va=y.__private__.getPageInfoByObjId=function(h){if(isNaN(h)||h%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var N in St)if(St[N].objId===h)break;return Cs(N)},Ti=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:St[F].objId,pageNumber:F,pageContext:St[F]}};y.addPage=function(){return xo.apply(this,arguments),this},y.setPage=function(){return Li.apply(this,arguments),Ve.call(this,Ie[F]),this},y.insertPage=function(h){return this.addPage(),this.movePage(F,h),this},y.movePage=function(h,N){var D,M;if(h>N){D=Ie[h],M=St[h];for(var se=h;se>N;se--)Ie[se]=Ie[se-1],St[se]=St[se-1];Ie[N]=D,St[N]=M,this.setPage(N)}else if(h<N){D=Ie[h],M=St[h];for(var be=h;be<N;be++)Ie[be]=Ie[be+1],St[be]=St[be+1];Ie[N]=D,St[N]=M,this.setPage(N)}return this},y.deletePage=function(){return ui.apply(this,arguments),this},y.__private__.text=y.text=function(h,N,D,M,se){var be,Se,Te,De,$e,qe,Xe,ft,Gt,Dt=(M=M||{}).scope||this;if(typeof h=="number"&&typeof N=="number"&&(typeof D=="string"||Array.isArray(D))){var rr=D;D=N,N=h,h=rr}if(arguments[3]instanceof Nt==0?(Te=arguments[4],De=arguments[5],br(Xe=arguments[3])==="object"&&Xe!==null||(typeof Te=="string"&&(De=Te,Te=null),typeof Xe=="string"&&(De=Xe,Xe=null),typeof Xe=="number"&&(Te=Xe,Xe=null),M={flags:Xe,angle:Te,align:De})):(J("The transform parameter of text() with a Matrix value"),Gt=se),isNaN(N)||isNaN(D)||h==null)throw new Error("Invalid arguments passed to jsPDF.text");if(h.length===0)return Dt;var wr,Cr="",ss=typeof M.lineHeightFactor=="number"?M.lineHeightFactor:Bn,is=Dt.internal.scaleFactor;function Js(ir){return ir=ir.split("	").join(Array(M.TabLen||9).join(" ")),Pr(ir,Xe)}function Zt(ir){for(var vr,Yr=ir.concat(),an=[],yi=Yr.length;yi--;)typeof(vr=Yr.shift())=="string"?an.push(vr):Array.isArray(ir)&&(vr.length===1||vr[1]===void 0&&vr[2]===void 0)?an.push(vr[0]):an.push([vr[0],vr[1],vr[2]]);return an}function Tt(ir,vr){var Yr;if(typeof ir=="string")Yr=vr(ir)[0];else if(Array.isArray(ir)){for(var an,yi,ll=ir.concat(),jo=[],ca=ll.length;ca--;)typeof(an=ll.shift())=="string"?jo.push(vr(an)[0]):Array.isArray(an)&&typeof an[0]=="string"&&(yi=vr(an[0],an[1],an[2]),jo.push([yi[0],yi[1],yi[2]]));Yr=jo}return Yr}var pr=!1,zr=!0;if(typeof h=="string")pr=!0;else if(Array.isArray(h)){var Ln=h.concat();Se=[];for(var fn,mr=Ln.length;mr--;)(typeof(fn=Ln.shift())!="string"||Array.isArray(fn)&&typeof fn[0]!="string")&&(zr=!1);pr=zr}if(pr===!1)throw new Error('Type of text must be string or Array. "'+h+'" is not recognized.');typeof h=="string"&&(h=h.match(/[\r?\n]/)?h.split(/\r\n|\r|\n/g):[h]);var Xs=ze/Dt.internal.scaleFactor,Ja=Xs*(ss-1);switch(M.baseline){case"bottom":D-=Ja;break;case"top":D+=Xs-Ja;break;case"hanging":D+=Xs-2*Ja;break;case"middle":D+=Xs/2-Ja}if((qe=M.maxWidth||0)>0&&(typeof h=="string"?h=Dt.splitTextToSize(h,qe):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(ir,vr){return ir.concat(Dt.splitTextToSize(vr,qe))},[]))),be={text:h,x:N,y:D,options:M,mutex:{pdfEscape:Pr,activeFontKey:lt,fonts:Et,activeFontSize:ze}},nr.publish("preProcessText",be),h=be.text,Te=(M=be.options).angle,Gt instanceof Nt==0&&Te&&typeof Te=="number"){Te*=Math.PI/180,M.rotationDirection===0&&(Te=-Te),z===R&&(Te=-Te);var al=Math.cos(Te),ol=Math.sin(Te);Gt=new Nt(al,ol,-ol,al,0,0)}else Te&&Te instanceof Nt&&(Gt=Te);z!==R||Gt||(Gt=ds),($e=M.charSpace||qn)!==void 0&&(Cr+=$(te($e))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ft=M.horizontalScale)!==void 0&&(Cr+=$(100*ft)+` Tz
`),M.lang;var as=-1,vi=M.renderingMode!==void 0?M.renderingMode:M.stroke,Ri=Dt.internal.getCurrentPageInfo().pageContext;switch(vi){case 0:case!1:case"fill":as=0;break;case 1:case!0:case"stroke":as=1;break;case 2:case"fillThenStroke":as=2;break;case 3:case"invisible":as=3;break;case 4:case"fillAndAddForClipping":as=4;break;case 5:case"strokeAndAddPathForClipping":as=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":as=6;break;case 7:case"addToPathForClipping":as=7}var $l=Ri.usedRenderingMode!==void 0?Ri.usedRenderingMode:-1;as!==-1?Cr+=as+` Tr
`:$l!==-1&&(Cr+=`0 Tr
`),as!==-1&&(Ri.usedRenderingMode=as),De=M.align||"left";var Is,Ea=ze*ss,_o=Dt.internal.pageSize.getWidth(),No=Et[lt];$e=M.charSpace||qn,qe=M.maxWidth||0,Xe=Object.assign({autoencode:!0,noBOM:!0},M.flags);var ia=[],Qs=function(ir){return Dt.getStringUnitWidth(ir,{font:No,charSpace:$e,fontSize:ze,doKerning:!1})*ze/is};if(Object.prototype.toString.call(h)==="[object Array]"){var Fs;Se=Zt(h),De!=="left"&&(Is=Se.map(Qs));var Rs,La=0;if(De==="right"){N-=Is[0],h=[],mr=Se.length;for(var Mi=0;Mi<mr;Mi++)Mi===0?(Rs=rs(N),Fs=Ys(D)):(Rs=te(La-Is[Mi]),Fs=-Ea),h.push([Se[Mi],Rs,Fs]),La=Is[Mi]}else if(De==="center"){N-=Is[0]/2,h=[],mr=Se.length;for(var aa=0;aa<mr;aa++)aa===0?(Rs=rs(N),Fs=Ys(D)):(Rs=te((La-Is[aa])/2),Fs=-Ea),h.push([Se[aa],Rs,Fs]),La=Is[aa]}else if(De==="left"){h=[],mr=Se.length;for(var oa=0;oa<mr;oa++)h.push(Se[oa])}else if(De==="justify"&&No.encoding==="Identity-H"){h=[],mr=Se.length,qe=qe!==0?qe:_o;for(var Ui=0,Zr=0;Zr<mr;Zr++)if(Fs=Zr===0?Ys(D):-Ea,Rs=Zr===0?rs(N):Ui,Zr<mr-1){var Xa=te((qe-Is[Zr])/(Se[Zr].split(" ").length-1)),Bi=Se[Zr].split(" ");h.push([Bi[0]+" ",Rs,Fs]),Ui=0;for(var xi=1;xi<Bi.length;xi++){var Qa=(Qs(Bi[xi-1]+" "+Bi[xi])-Qs(Bi[xi]))*is+Xa;xi==Bi.length-1?h.push([Bi[xi],Qa,0]):h.push([Bi[xi]+" ",Qa,0]),Ui-=Qa}}else h.push([Se[Zr],Rs,Fs]);h.push(["",Ui,0])}else{if(De!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(h=[],mr=Se.length,qe=qe!==0?qe:_o,Zr=0;Zr<mr;Zr++){Fs=Zr===0?Ys(D):-Ea,Rs=Zr===0?rs(N):0;var Za=Se[Zr].split(" ").length-1,ko=Za>0?(qe-Is[Zr])/Za:0;Zr<mr-1?ia.push($(te(ko))):ia.push(0),h.push([Se[Zr],Rs,Fs])}}}(typeof M.R2L=="boolean"?M.R2L:yt)===!0&&(h=Tt(h,function(ir,vr,Yr){return[ir.split("").reverse().join(""),vr,Yr]})),be={text:h,x:N,y:D,options:M,mutex:{pdfEscape:Pr,activeFontKey:lt,fonts:Et,activeFontSize:ze}},nr.publish("postProcessText",be),h=be.text,wr=be.mutex.isHex||!1;var So=Et[lt].encoding;So!=="WinAnsiEncoding"&&So!=="StandardEncoding"||(h=Tt(h,function(ir,vr,Yr){return[Js(ir),vr,Yr]})),Se=Zt(h),h=[];for(var la,Da,Ta,eo=Array.isArray(Se[0])?1:0,Oa="",to=function(ir,vr,Yr){var an="";return Yr instanceof Nt?(Yr=typeof M.angle=="number"?Rn(Yr,new Nt(1,0,0,1,ir,vr)):Rn(new Nt(1,0,0,1,ir,vr),Yr),z===R&&(Yr=Rn(new Nt(1,0,0,-1,0,0),Yr)),an=Yr.join(" ")+` Tm
`):an=$(ir)+" "+$(vr)+` Td
`,an},Gr=0;Gr<Se.length;Gr++){switch(Oa="",eo){case 1:Ta=(wr?"<":"(")+Se[Gr][0]+(wr?">":")"),la=parseFloat(Se[Gr][1]),Da=parseFloat(Se[Gr][2]);break;case 0:Ta=(wr?"<":"(")+Se[Gr]+(wr?">":")"),la=rs(N),Da=Ys(D)}ia!==void 0&&ia[Gr]!==void 0&&(Oa=ia[Gr]+` Tw
`),Gr===0?h.push(Oa+to(la,Da,Gt)+Ta):eo===0?h.push(Oa+Ta):eo===1&&h.push(Oa+to(la,Da,Gt)+Ta)}h=eo===0?h.join(` Tj
T* `):h.join(` Tj
`),h+=` Tj
`;var gs=`BT
/`;return gs+=lt+" "+ze+` Tf
`,gs+=$(ze*ss)+` TL
`,gs+=Ds+`
`,gs+=Cr,gs+=h,re(gs+="ET"),S[lt]=!0,Dt};var Oi=y.__private__.clip=y.clip=function(h){return re(h==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Oi("evenodd")},y.__private__.discardPath=y.discardPath=function(){return re("n"),this};var Es=y.__private__.isValidStyle=function(h){var N=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(h)!==-1&&(N=!0),N};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(h){return Es(h)&&(g=h),this};var Ii=y.__private__.getStyle=y.getStyle=function(h){var N=g;switch(h){case"D":case"S":N="S";break;case"F":N="f";break;case"FD":case"DF":N="B";break;case"f":case"f*":case"B":case"B*":N=h}return N},Jt=y.close=function(){return re("h"),this};y.stroke=function(){return re("S"),this},y.fill=function(h){return Fi("f",h),this},y.fillEvenOdd=function(h){return Fi("f*",h),this},y.fillStroke=function(h){return Fi("B",h),this},y.fillStrokeEvenOdd=function(h){return Fi("B*",h),this};var Fi=function(h,N){br(N)==="object"?Ga(N,h):re(h)},hi=function(h){h===null||z===R&&h===void 0||(h=Ii(h),re(h))};function Qi(h,N,D,M,se){var be=new Ec(N||this.boundingBox,D||this.xStep,M||this.yStep,this.gState,se||this.matrix);be.stream=this.stream;var Se=h+"$$"+this.cloneIndex+++"$$";return hn(Se,be),be}var Ga=function(h,N){var D=dr[h.key],M=ht[D];if(M instanceof Ol)re("q"),re(Ya(N)),M.gState&&y.setGState(M.gState),re(h.matrix.toString()+" cm"),re("/"+D+" sh"),re("Q");else if(M instanceof Ec){var se=new Nt(1,0,0,-1,0,ns());h.matrix&&(se=se.multiply(h.matrix||ds),D=Qi.call(M,h.key,h.boundingBox,h.xStep,h.yStep,se).id),re("q"),re("/Pattern cs"),re("/"+D+" scn"),M.gState&&y.setGState(M.gState),re(N),re("Q")}},Ya=function(h){switch(h){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ls=y.moveTo=function(h,N){return re($(te(h))+" "+$(H(N))+" m"),this},Sa=y.lineTo=function(h,N){return re($(te(h))+" "+$(H(N))+" l"),this},bn=y.curveTo=function(h,N,D,M,se,be){return re([$(te(h)),$(H(N)),$(te(D)),$(H(M)),$(te(se)),$(H(be)),"c"].join(" ")),this};y.__private__.line=y.line=function(h,N,D,M,se){if(isNaN(h)||isNaN(N)||isNaN(D)||isNaN(M)||!Es(se))throw new Error("Invalid arguments passed to jsPDF.line");return z===U?this.lines([[D-h,M-N]],h,N,[1,1],se||"S"):this.lines([[D-h,M-N]],h,N,[1,1]).stroke()},y.__private__.lines=y.lines=function(h,N,D,M,se,be){var Se,Te,De,$e,qe,Xe,ft,Gt,Dt,rr,wr,Cr;if(typeof h=="number"&&(Cr=D,D=N,N=h,h=Cr),M=M||[1,1],be=be||!1,isNaN(N)||isNaN(D)||!Array.isArray(h)||!Array.isArray(M)||!Es(se)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ls(N,D),Se=M[0],Te=M[1],$e=h.length,rr=N,wr=D,De=0;De<$e;De++)(qe=h[De]).length===2?(rr=qe[0]*Se+rr,wr=qe[1]*Te+wr,Sa(rr,wr)):(Xe=qe[0]*Se+rr,ft=qe[1]*Te+wr,Gt=qe[2]*Se+rr,Dt=qe[3]*Te+wr,rr=qe[4]*Se+rr,wr=qe[5]*Te+wr,bn(Xe,ft,Gt,Dt,rr,wr));return be&&Jt(),hi(se),this},y.path=function(h){for(var N=0;N<h.length;N++){var D=h[N],M=D.c;switch(D.op){case"m":Ls(M[0],M[1]);break;case"l":Sa(M[0],M[1]);break;case"c":bn.apply(this,M);break;case"h":Jt()}}return this},y.__private__.rect=y.rect=function(h,N,D,M,se){if(isNaN(h)||isNaN(N)||isNaN(D)||isNaN(M)||!Es(se))throw new Error("Invalid arguments passed to jsPDF.rect");return z===U&&(M=-M),re([$(te(h)),$(H(N)),$(te(D)),$(te(M)),"re"].join(" ")),hi(se),this},y.__private__.triangle=y.triangle=function(h,N,D,M,se,be,Se){if(isNaN(h)||isNaN(N)||isNaN(D)||isNaN(M)||isNaN(se)||isNaN(be)||!Es(Se))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[D-h,M-N],[se-D,be-M],[h-se,N-be]],h,N,[1,1],Se,!0),this},y.__private__.roundedRect=y.roundedRect=function(h,N,D,M,se,be,Se){if(isNaN(h)||isNaN(N)||isNaN(D)||isNaN(M)||isNaN(se)||isNaN(be)||!Es(Se))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Te=4/3*(Math.SQRT2-1);return se=Math.min(se,.5*D),be=Math.min(be,.5*M),this.lines([[D-2*se,0],[se*Te,0,se,be-be*Te,se,be],[0,M-2*be],[0,be*Te,-se*Te,be,-se,be],[2*se-D,0],[-se*Te,0,-se,-be*Te,-se,-be],[0,2*be-M],[0,-be*Te,se*Te,-be,se,-be]],h+se,N,[1,1],Se,!0),this},y.__private__.ellipse=y.ellipse=function(h,N,D,M,se){if(isNaN(h)||isNaN(N)||isNaN(D)||isNaN(M)||!Es(se))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*D,Se=4/3*(Math.SQRT2-1)*M;return Ls(h+D,N),bn(h+D,N-Se,h+be,N-M,h,N-M),bn(h-be,N-M,h-D,N-Se,h-D,N),bn(h-D,N+Se,h-be,N+M,h,N+M),bn(h+be,N+M,h+D,N+Se,h+D,N),hi(se),this},y.__private__.circle=y.circle=function(h,N,D,M){if(isNaN(h)||isNaN(N)||isNaN(D)||!Es(M))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(h,N,D,D,M)},y.setFont=function(h,N,D){return D&&(N=ee(N,D)),lt=di(h,N,{disableWarning:!1}),this};var ts=y.__private__.getFont=y.getFont=function(){return Et[di.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var h,N,D={};for(h in Lt)if(Lt.hasOwnProperty(h))for(N in D[h]=[],Lt[h])Lt[h].hasOwnProperty(N)&&D[h].push(N);return D},y.addFont=function(h,N,D,M,se){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?se=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(D=ee(D,M)),Xi.call(this,h,N,D,se=se||"Identity-H")};var Bn,fs=n.lineWidth||.200025,Zi=y.__private__.getLineWidth=y.getLineWidth=function(){return fs},jt=y.__private__.setLineWidth=y.setLineWidth=function(h){return fs=h,re($(te(h))+" w"),this};y.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(h,N){if(h=h||[],N=N||0,isNaN(N)||!Array.isArray(h))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return h=h.map(function(D){return $(te(D))}).join(" "),N=$(te(N)),re("["+h+"] "+N+" d"),this};var Gs=y.__private__.getLineHeight=y.getLineHeight=function(){return ze*Bn};y.__private__.getLineHeight=y.getLineHeight=function(){return ze*Bn};var il=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(h){return typeof(h=h||1.15)=="number"&&(Bn=h),this},bo=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Bn};il(n.lineHeight);var rs=y.__private__.getHorizontalCoordinate=function(h){return te(h)},Ys=y.__private__.getVerticalCoordinate=function(h){return z===R?h:St[F].mediaBox.topRightY-St[F].mediaBox.bottomLeftY-te(h)},wo=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(h){return $(rs(h))},ja=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(h){return $(Ys(h))},ea=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Zn(ea)},y.__private__.setStrokeColor=y.setDrawColor=function(h,N,D,M){return ea=Hr({ch1:h,ch2:N,ch3:D,ch4:M,pdfColorType:"draw",precision:2}),re(ea),this};var Ka=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Zn(Ka)},y.__private__.setFillColor=y.setFillColor=function(h,N,D,M){return Ka=Hr({ch1:h,ch2:N,ch3:D,ch4:M,pdfColorType:"fill",precision:2}),re(Ka),this};var Ds=n.textColor||"0 g",ta=y.__private__.getTextColor=y.getTextColor=function(){return Zn(Ds)};y.__private__.setTextColor=y.setTextColor=function(h,N,D,M){return Ds=Hr({ch1:h,ch2:N,ch3:D,ch4:M,pdfColorType:"text",precision:3}),this};var qn=n.charSpace,Aa=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(qn||0)};y.__private__.setCharSpace=y.setCharSpace=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qn=h,this};var ra=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(h){var N=y.CapJoinStyles[h];if(N===void 0)throw new Error("Line cap style of '"+h+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ra=N,re(N+" J"),this};var Pa=0;y.__private__.setLineJoin=y.setLineJoin=function(h){var N=y.CapJoinStyles[h];if(N===void 0)throw new Error("Line join style of '"+h+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pa=N,re(N+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(h){if(h=h||0,isNaN(h))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re($(te(h))+" M"),this},y.GState=Id,y.setGState=function(h){(h=typeof h=="string"?kt[Ft[h]]:na(null,h)).equals(cr)||(re("/"+h.id+" gs"),cr=h)};var na=function(h,N){if(!h||!Ft[h]){var D=!1;for(var M in kt)if(kt.hasOwnProperty(M)&&kt[M].equals(N)){D=!0;break}if(D)N=kt[M];else{var se="GS"+(Object.keys(kt).length+1).toString(10);kt[se]=N,N.id=se}return h&&(Ft[h]=N.id),nr.publish("addGState",N),N}};y.addGState=function(h,N){return na(h,N),this},y.saveGraphicsState=function(){return re("q"),sr.push({key:lt,size:ze,color:Ds}),this},y.restoreGraphicsState=function(){re("Q");var h=sr.pop();return lt=h.key,ze=h.size,Ds=h.color,cr=null,this},y.setCurrentTransformationMatrix=function(h){return re(h.toString()+" cm"),this},y.comment=function(h){return re("#"+h),this};var ps=function(h,N){var D=h||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return D},set:function(be){isNaN(be)||(D=parseFloat(be))}});var M=N||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return M},set:function(be){isNaN(be)||(M=parseFloat(be))}});var se="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return se},set:function(be){se=be.toString()}}),this},sa=function(h,N,D,M){ps.call(this,h,N),this.type="rect";var se=D||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return se},set:function(Se){isNaN(Se)||(se=parseFloat(Se))}});var be=M||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(Se){isNaN(Se)||(be=parseFloat(Se))}}),this},Ca=function(){this.page=Bt,this.currentPage=F,this.pages=Ie.slice(0),this.pagesContext=St.slice(0),this.x=it,this.y=Ar,this.matrix=Kt,this.width=pi(F),this.height=gi(F),this.outputDestination=We,this.id="",this.objectNumber=-1};Ca.prototype.restore=function(){Bt=this.page,F=this.currentPage,St=this.pagesContext,Ie=this.pages,it=this.x,Ar=this.y,Kt=this.matrix,mi(F,this.width),ms(F,this.height),We=this.outputDestination};var Ts=function(h,N,D,M,se){Jn.push(new Ca),Bt=F=0,Ie=[],it=h,Ar=N,Kt=se,Ws([D,M])};for(var fi in y.beginFormObject=function(h,N,D,M,se){return Ts(h,N,D,M,se),this},y.endFormObject=function(h){return(function(N){if(Fn[N])Jn.pop().restore();else{var D=new Ca,M="Xo"+(Object.keys(tr).length+1).toString(10);D.id=M,Fn[N]=M,tr[M]=D,nr.publish("addFormObject",D),Jn.pop().restore()}})(h),this},y.doFormObject=function(h,N){var D=tr[Fn[h]];return re("q"),re(N.toString()+" cm"),re("/"+D.id+" Do"),re("Q"),this},y.getFormObject=function(h){var N=tr[Fn[h]];return{x:N.x,y:N.y,width:N.width,height:N.height,matrix:N.matrix}},y.save=function(h,N){return h=h||"generated.pdf",(N=N||{}).returnPromise=N.returnPromise||!1,N.returnPromise===!1?(Ll(Vs(Mn()),h),typeof Ll.unload=="function"&&Mt.setTimeout&&setTimeout(Ll.unload,911),this):new Promise(function(D,M){try{var se=Ll(Vs(Mn()),h);typeof Ll.unload=="function"&&Mt.setTimeout&&setTimeout(Ll.unload,911),D(se)}catch(be){M(be.message)}})},_t.API)_t.API.hasOwnProperty(fi)&&(fi==="events"&&_t.API.events.length?(function(h,N){var D,M,se;for(se=N.length-1;se!==-1;se--)D=N[se][0],M=N[se][1],h.subscribe.apply(h,[D].concat(typeof M=="function"?[M]:M))})(nr,_t.API.events):y[fi]=_t.API[fi]);function pi(h){return St[h].mediaBox.topRightX-St[h].mediaBox.bottomLeftX}function mi(h,N){St[h].mediaBox.topRightX=N+St[h].mediaBox.bottomLeftX}function gi(h){return St[h].mediaBox.topRightY-St[h].mediaBox.bottomLeftY}function ms(h,N){St[h].mediaBox.topRightY=N+St[h].mediaBox.bottomLeftY}var Ks=y.getPageWidth=function(h){return pi(h=h||F)/mt},Or=y.setPageWidth=function(h,N){mi(h,N*mt)},ns=y.getPageHeight=function(h){return gi(h=h||F)/mt},Os=y.setPageHeight=function(h,N){ms(h,N*mt)};return y.internal={pdfEscape:Pr,getStyle:Ii,getFont:ts,getFontSize:et,getCharSpace:Aa,getTextColor:ta,getLineHeight:Gs,getLineHeightFactor:bo,getLineWidth:Zi,write:Ye,getHorizontalCoordinate:rs,getVerticalCoordinate:Ys,getCoordinateString:wo,getVerticalCoordinateString:ja,collections:{},newObject:hr,newAdditionalObject:zs,newObjectDeferred:Tr,newObjectDeferredBegin:Ur,getFilters:hs,putStream:Pn,events:nr,scaleFactor:mt,pageSize:{getWidth:function(){return Ks(F)},setWidth:function(h){Or(F,h)},getHeight:function(){return ns(F)},setHeight:function(h){Os(F,h)}},encryptionOptions:x,encryption:Vr,getEncryptor:function(h){return x!==null?Vr.encryptor(h,0):function(N){return N}},output:Di,getNumberOfPages:es,get pages(){return Ie},out:re,f2:O,f3:T,getPageInfo:Cs,getPageInfoByObjId:Va,getCurrentPageInfo:Ti,getPDFVersion:C,Point:ps,Rectangle:sa,Matrix:Nt,hasHotfix:Un},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Ks(F)},set:function(h){Or(F,h)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return ns(F)},set:function(h){Os(F,h)},enumerable:!0,configurable:!0}),(function(h){for(var N=0,D=ot.length;N<D;N++){var M=Xi.call(this,h[N][0],h[N][1],h[N][2],ot[N][3],!0);w===!1&&(S[M]=!0);var se=h[N][0].split("-");sl({id:M,fontName:se[0],fontStyle:se[1]||""})}nr.publish("addFonts",{fonts:Et,dictionary:Lt})}).call(y,ot),lt="F1",xo(a,t),nr.publish("initialized"),y}Ac.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Ac.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ac.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ac.prototype.processOwnerPassword=function(n,e){return Df(Lf(e).substr(0,5),n)},Ac.prototype.encryptor=function(n,e){var t=Lf(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Df(t,s)}},Id.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||br(n)!==br(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},_t.API={events:[]},_t.version="3.0.4";var dn=_t.API,Vf=1,zl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$t=function(n){return n.toFixed(2)},Go=function(n){return n.toFixed(5)};dn.__acroform__={};var oi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Cm=function(n){return n*Vf},za=function(n){var e=new r1,t=dt.internal.getHeight(n)||0,s=dt.internal.getWidth(n)||0;return e.BBox=[0,0,Number($t(s)),Number($t(t))],e},Ub=dn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Bb=dn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},qb=dn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},vn=dn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qb(n,e-1)},xn=dn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ub(n,e-1)},yn=dn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bb(n,e-1)},zb=dn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],d=n[3],p={};return p.lowerLeft_X=t(a)||0,p.lowerLeft_Y=s(o+d)||0,p.upperRight_X=t(a+u)||0,p.upperRight_Y=s(o)||0,[Number($t(p.lowerLeft_X)),Number($t(p.lowerLeft_Y)),Number($t(p.upperRight_X)),Number($t(p.upperRight_Y))]},$b=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Tf(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+$t(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=za(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Tf=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(O){return O.split(`
`)}):a.map(function(O){return[O]});var o=t,u=dt.internal.getHeight(n)||0;u=u<0?-u:u;var d=dt.internal.getWidth(n)||0;d=d<0?-d:d;var p=function(O,T,te){if(O+1<a.length){var H=T+" "+a[O+1][0];return xd(H,n,te).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var g,x,w=xd("3",n,o).height,S=n.multiline?u-o:(u-w)/2,y=S+=2,E=0,C=0,L=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+xd(e,n,o=12).width+", FieldWidth:"+d+`
`;break}for(var A="",U=0,R=0;R<a.length;R++)if(a.hasOwnProperty(R)){var z=!1;if(a[R].length!==1&&L!==a[R].length-1){if((w+2)*(U+2)+2>u)continue e;A+=a[R][L],z=!0,C=R,R--}else{A=(A+=a[R][L]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var he=parseInt(R),le=p(he,A,o),ee=R>=a.length-1;if(le&&!ee){A+=" ",L=0;continue}if(le||ee){if(ee)C=he;else if(n.multiline&&(w+2)*(U+2)+2>u)continue e}else{if(!n.multiline||(w+2)*(U+2)+2>u)continue e;C=he}}for(var $="",J=E;J<=C;J++){var ne=a[J];if(n.multiline){if(J===C){$+=ne[L]+" ",L=(L+1)%ne.length;continue}if(J===E){$+=ne[ne.length-1]+" ";continue}}$+=ne[0]+" "}switch($=$.substr($.length-1)==" "?$.substr(0,$.length-1):$,x=xd($,n,o).width,n.textAlign){case"right":g=d-x-2;break;case"center":g=(d-x)/2;break;default:g=2}e+=$t(g)+" "+$t(y)+` Td
`,e+="("+zl($)+`) Tj
`,e+=-$t(g)+` 0 Td
`,y=-(o+2),x=0,E=z?C:C+1,U++,A=""}break}return s.text=e,s.fontSize=o,s},xd=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Wb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Hb=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Vb=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Na.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Wb)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Vf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new n1,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&Hb(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var d=s[u],p=[],g=d.Rect;if(d.Rect&&(d.Rect=zb(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=dt.createDefaultAppearanceStream(d),br(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(p=d.getKeyValueListForStream()),d.Rect=g,d.hasAppearanceStream&&!d.appearanceStreamContent){var x=$b(d);p.push({key:"AP",value:"<</N "+x+">>"}),a.internal.acroformPlugin.xForms.push(x)}if(d.appearanceStreamContent){var w="";for(var S in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(S)){var y=d.appearanceStreamContent[S];if(w+="/"+S+" ",w+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var E=y[u];typeof E=="function"&&(E=E.call(a,d)),w+="/"+u+" "+E+" ",a.internal.acroformPlugin.xForms.indexOf(E)>=0||a.internal.acroformPlugin.xForms.push(E)}}else typeof(E=y)=="function"&&(E=E.call(a,d)),w+="/"+u+" "+E,a.internal.acroformPlugin.xForms.indexOf(E)>=0||a.internal.acroformPlugin.xForms.push(E);w+=">>"}p.push({key:"AP",value:`<<
`+w+">>"})}a.internal.putStream({additionalKeyValues:p,objectId:d.objId}),a.internal.out("endobj")}o&&(function(C,L){for(var A in C)if(C.hasOwnProperty(A)){var U=A,R=C[A];L.internal.newObjectDeferredBegin(R.objId,!0),br(R)==="object"&&typeof R.putStream=="function"&&R.putStream(),delete C[U]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},t1=dn.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),br(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+zl(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},sf=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+zl(s(n))+")"},Wa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wa.prototype.toString=function(){return this.objId+" 0 R"},Wa.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Wa.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:t1(a,this.objId,this.scope)}):a instanceof Wa?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var r1=function(){Wa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};oi(r1,Wa);var n1=function(){Wa.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+zl(t(n))+")"}},set:function(t){n=t}})};oi(n1,Wa);var Na=function n(){Wa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!vn(e,3)},set:function(A){A?this.F=xn(e,3):this.F=yn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(A){s=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(A){s[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(A){s[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(A){s[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(A){s[3]=A}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Fd)return;o="FieldObject"+n.FieldNum++}var A=function(U){return U};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+zl(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(A){p=A}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/Vf:g},set:function(A){g=A}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(A){x=A}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof Fd||this instanceof Fl))return sf(w,this.objId,this.scope)},set:function(A){A=A.toString(),w=A}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Kn==0?sf(S,this.objId,this.scope):S},set:function(A){A=A.toString(),S=this instanceof Kn==0?A.substr(0,1)==="("?Nc(A.substr(1,A.length-2)):Nc(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kn==1?Nc(S.substr(1,S.length-1)):S},set:function(A){A=A.toString(),S=this instanceof Kn==1?"/"+A:A}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Kn==0?sf(y,this.objId,this.scope):y},set:function(A){A=A.toString(),y=this instanceof Kn==0?A.substr(0,1)==="("?Nc(A.substr(1,A.length-2)):Nc(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kn==1?Nc(y.substr(1,y.length-1)):y},set:function(A){A=A.toString(),y=this instanceof Kn==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(A){A=!!A,C=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(A){E=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,1)},set:function(A){A?this.Ff=xn(this.Ff,1):this.Ff=yn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,2)},set:function(A){A?this.Ff=xn(this.Ff,2):this.Ff=yn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,3)},set:function(A){A?this.Ff=xn(this.Ff,3):this.Ff=yn(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');L=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(L){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};oi(Na,Wa);var Dc=function(){Na.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return t1(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,d){d||(d=1);for(var p,g=[];p=u.exec(o);)g.push(p[d]);return g})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,18)},set:function(t){t?this.Ff=xn(this.Ff,18):this.Ff=yn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=xn(this.Ff,19):this.Ff=yn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,20)},set:function(t){t?(this.Ff=xn(this.Ff,20),e.sort()):this.Ff=yn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,22)},set:function(t){t?this.Ff=xn(this.Ff,22):this.Ff=yn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,23)},set:function(t){t?this.Ff=xn(this.Ff,23):this.Ff=yn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,27)},set:function(t){t?this.Ff=xn(this.Ff,27):this.Ff=yn(this.Ff,27)}}),this.hasAppearanceStream=!1};oi(Dc,Na);var Tc=function(){Dc.call(this),this.fontName="helvetica",this.combo=!1};oi(Tc,Dc);var Oc=function(){Tc.call(this),this.combo=!0};oi(Oc,Tc);var kd=function(){Oc.call(this),this.edit=!0};oi(kd,Oc);var Kn=function(){Na.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,15)},set:function(t){t?this.Ff=xn(this.Ff,15):this.Ff=yn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,16)},set:function(t){t?this.Ff=xn(this.Ff,16):this.Ff=yn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,17)},set:function(t){t?this.Ff=xn(this.Ff,17):this.Ff=yn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,26)},set:function(t){t?this.Ff=xn(this.Ff,26):this.Ff=yn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+zl(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){br(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};oi(Kn,Na);var Sd=function(){Kn.call(this),this.pushButton=!0};oi(Sd,Kn);var Ic=function(){Kn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};oi(Ic,Kn);var Fd=function(){var n,e;Na.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+zl(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){br(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};oi(Fd,Na),Ic.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ic.prototype.createOption=function(n){var e=new Fd;return e.Parent=this,e.optionName=n,this.Kids.push(e),Gb.call(this.scope,e),e};var jd=function(){Kn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dt.CheckBox.createAppearanceStream()};oi(jd,Kn);var Fl=function(){Na.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,13)},set:function(e){e?this.Ff=xn(this.Ff,13):this.Ff=yn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,21)},set:function(e){e?this.Ff=xn(this.Ff,21):this.Ff=yn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,23)},set:function(e){e?this.Ff=xn(this.Ff,23):this.Ff=yn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,24)},set:function(e){e?this.Ff=xn(this.Ff,24):this.Ff=yn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,25)},set:function(e){e?this.Ff=xn(this.Ff,25):this.Ff=yn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,26)},set:function(e){e?this.Ff=xn(this.Ff,26):this.Ff=yn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};oi(Fl,Na);var Ad=function(){Fl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!vn(this.Ff,14)},set:function(n){n?this.Ff=xn(this.Ff,14):this.Ff=yn(this.Ff,14)}}),this.password=!0};oi(Ad,Fl);var dt={CheckBox:{createAppearanceStream:function(){return{N:{On:dt.CheckBox.YesNormal},D:{On:dt.CheckBox.YesPushDown,Off:dt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=za(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Tf(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+$t(dt.internal.getWidth(n))+" "+$t(dt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+$t(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=za(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=dt.internal.getHeight(n),u=dt.internal.getWidth(n),d=Tf(n,n.caption);return a.push("1 g"),a.push("0 0 "+$t(u)+" "+$t(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+$t(u-1)+" "+$t(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+$t(d.fontSize)+" Tf "+s),a.push(d.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=za(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$t(dt.internal.getWidth(n))+" "+$t(dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=dt.RadioButton.Circle.YesNormal,e.D[n]=dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=za(n);e.scope=n.scope;var t=[],s=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=dt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Go(dt.internal.getWidth(n)/2)+" "+Go(dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=za(n);e.scope=n.scope;var t=[],s=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*dt.internal.Bezier_C).toFixed(5)),u=Number((s*dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Go(dt.internal.getWidth(n)/2)+" "+Go(dt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Go(dt.internal.getWidth(n)/2)+" "+Go(dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=za(n);e.scope=n.scope;var t=[],s=dt.internal.getWidth(n)<=dt.internal.getHeight(n)?dt.internal.getWidth(n)/4:dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Go(dt.internal.getWidth(n)/2)+" "+Go(dt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=dt.RadioButton.Cross.YesNormal,e.D[n]=dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=za(n);e.scope=n.scope;var t=[],s=dt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+$t(dt.internal.getWidth(n)-2)+" "+$t(dt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push($t(s.x1.x)+" "+$t(s.x1.y)+" m"),t.push($t(s.x2.x)+" "+$t(s.x2.y)+" l"),t.push($t(s.x4.x)+" "+$t(s.x4.y)+" m"),t.push($t(s.x3.x)+" "+$t(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=za(n);e.scope=n.scope;var t=dt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+$t(dt.internal.getWidth(n))+" "+$t(dt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+$t(dt.internal.getWidth(n)-2)+" "+$t(dt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push($t(t.x1.x)+" "+$t(t.x1.y)+" m"),s.push($t(t.x2.x)+" "+$t(t.x2.y)+" l"),s.push($t(t.x4.x)+" "+$t(t.x4.y)+" m"),s.push($t(t.x3.x)+" "+$t(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=za(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$t(dt.internal.getWidth(n))+" "+$t(dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};dt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=dt.internal.getWidth(n),t=dt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},dt.internal.getWidth=function(n){var e=0;return br(n)==="object"&&(e=Cm(n.Rect[2])),e},dt.internal.getHeight=function(n){var e=0;return br(n)==="object"&&(e=Cm(n.Rect[3])),e};var Gb=dn.addField=function(n){if(Vb(this,n),!(n instanceof Na))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};dn.AcroFormChoiceField=Dc,dn.AcroFormListBox=Tc,dn.AcroFormComboBox=Oc,dn.AcroFormEditBox=kd,dn.AcroFormButton=Kn,dn.AcroFormPushButton=Sd,dn.AcroFormRadioButton=Ic,dn.AcroFormCheckBox=jd,dn.AcroFormTextField=Fl,dn.AcroFormPasswordField=Ad,dn.AcroFormAppearance=dt,dn.AcroForm={ChoiceField:Dc,ListBox:Tc,ComboBox:Oc,EditBox:kd,Button:Kn,PushButton:Sd,RadioButton:Ic,CheckBox:jd,TextField:Fl,PasswordField:Ad,Appearance:dt},_t.AcroForm={ChoiceField:Dc,ListBox:Tc,ComboBox:Oc,EditBox:kd,Button:Kn,PushButton:Sd,RadioButton:Ic,CheckBox:jd,TextField:Fl,PasswordField:Ad,Appearance:dt};_t.AcroForm;function s1(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(O,T){var te,H,Q,X,pe,G=t;if((T=T||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(le(O))for(pe in s)for(Q=s[pe],te=0;te<Q.length;te+=1){for(X=!0,H=0;H<Q[te].length;H+=1)if(Q[te][H]!==void 0&&Q[te][H]!==O[H]){X=!1;break}if(X===!0){G=pe;break}}else for(pe in s)for(Q=s[pe],te=0;te<Q.length;te+=1){for(X=!0,H=0;H<Q[te].length;H+=1)if(Q[te][H]!==void 0&&Q[te][H]!==O.charCodeAt(H)){X=!1;break}if(X===!0){G=pe;break}}return G===t&&T!==t&&(G=T),G},o=function O(T){for(var te=this.internal.write,H=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:T.width}),X.push({key:"Height",value:T.height}),T.colorSpace===A.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===A.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var pe="",G=0,ce=T.transparency.length;G<ce;G++)pe+=T.transparency[G]+" "+T.transparency[G]+" ";X.push({key:"Mask",value:"["+pe+"]"})}T.sMask!==void 0&&X.push({key:"SMask",value:T.objectId+1+" 0 R"});var ve=T.filter!==void 0?["/"+T.filter]:void 0;if(H({data:T.data,additionalKeyValues:X,alreadyAppliedFilters:ve,objectId:T.objectId}),te("endobj"),"sMask"in T&&T.sMask!==void 0){var Y,P=(Y=T.sMaskBitsPerComponent)!==null&&Y!==void 0?Y:T.bitsPerComponent,F={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:T.sMask};"filter"in T&&(F.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(T.width),F.filter=T.filter),O.call(this,F)}if(T.colorSpace===A.INDEXED){var V=this.internal.newObject();H({data:$(new Uint8Array(T.palette)),objectId:V}),te("endobj")}},u=function(){var O=this.internal.collections[e+"images"];for(var T in O)o.call(this,O[T])},d=function(){var O,T=this.internal.collections[e+"images"],te=this.internal.write;for(var H in T)te("/I"+(O=T[H]).index,O.objectId,"0","R")},p=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},g=function(){var O=this.internal.collections[e+"images"];return p.call(this),O},x=function(){return Object.keys(this.internal.collections[e+"images"]).length},w=function(O){return typeof n["process"+O.toUpperCase()]=="function"},S=function(O){return br(O)==="object"&&O.nodeType===1},y=function(O,T){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var te=""+O.getAttribute("src");if(te.indexOf("data:image/")===0)return Nd(unescape(te).split("base64,").pop());var H=n.loadFile(te,!0);if(H!==void 0)return H}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var Q;switch(T){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return Nd(O.toDataURL(Q,1).split("base64,").pop())}},E=function(O){var T=this.internal.collections[e+"images"];if(T){for(var te in T)if(O===T[te].alias)return T[te]}},C=function(O,T,te){return O||T||(O=-96,T=-96),O<0&&(O=-1*te.width*72/O/this.internal.scaleFactor),T<0&&(T=-1*te.height*72/T/this.internal.scaleFactor),O===0&&(O=T*te.width/te.height),T===0&&(T=O*te.height/te.width),[O,T]},L=function(O,T,te,H,Q,X){var pe=C.call(this,te,H,Q),G=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,ve=g.call(this);if(te=pe[0],H=pe[1],ve[Q.index]=Q,X){X*=Math.PI/180;var Y=Math.cos(X),P=Math.sin(X),F=function(ie){return ie.toFixed(4)},V=[F(Y),F(P),F(-1*P),F(Y),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,G(O),ce(T+H),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([G(te),"0","0",G(H),"0","0","cm"].join(" "))):this.internal.write([G(te),"0","0",G(H),G(O),ce(T+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},A=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=n.__addimage__.sHashCode=function(O){var T,te,H=0;if(typeof O=="string")for(te=O.length,T=0;T<te;T++)H=(H<<5)-H+O.charCodeAt(T),H|=0;else if(le(O))for(te=O.byteLength/2,T=0;T<te;T++)H=(H<<5)-H+O[T],H|=0;return H},z=n.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var T=!0;return O.length===0&&(T=!1),O.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(T=!1),T},he=n.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var T=O.indexOf(",");return T<0?null:O.substring(0,T).trim().endsWith("base64")?O.substring(T+1):null};n.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var le=n.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},ee=n.__addimage__.binaryStringToUint8Array=function(O){for(var T=O.length,te=new Uint8Array(T),H=0;H<T;H++)te[H]=O.charCodeAt(H);return te},$=n.__addimage__.arrayBufferToBinaryString=function(O){for(var T="",te=le(O)?O:new Uint8Array(O),H=0;H<te.length;H+=8192)T+=String.fromCharCode.apply(null,te.subarray(H,H+8192));return T};n.addImage=function(){var O,T,te,H,Q,X,pe,G,ce;if(typeof arguments[1]=="number"?(T=t,te=arguments[1],H=arguments[2],Q=arguments[3],X=arguments[4],pe=arguments[5],G=arguments[6],ce=arguments[7]):(T=arguments[1],te=arguments[2],H=arguments[3],Q=arguments[4],X=arguments[5],pe=arguments[6],G=arguments[7],ce=arguments[8]),br(O=arguments[0])==="object"&&!S(O)&&"imageData"in O){var ve=O;O=ve.imageData,T=ve.format||T||t,te=ve.x||te||0,H=ve.y||H||0,Q=ve.w||ve.width||Q,X=ve.h||ve.height||X,pe=ve.alias||pe,G=ve.compression||G,ce=ve.rotation||ve.angle||ce}var Y=this.internal.getFilters();if(G===void 0&&Y.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(te)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var P=J.call(this,O,T,pe,G);return L.call(this,te,H,Q,X,P,ce),this};var J=function(O,T,te,H){var Q,X,pe;if(typeof O=="string"&&a(O)===t){O=unescape(O);var G=ne(O,!1);(G!==""||(G=n.loadFile(O,!0))!==void 0)&&(O=G)}if(S(O)&&(O=y(O,T)),T=a(O,T),!w(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((pe=te)==null||pe.length===0)&&(te=(function(ce){return typeof ce=="string"||le(ce)?R(ce):le(ce.data)?R(ce.data):null})(O)),(Q=E.call(this,te))||(O instanceof Uint8Array||T==="RGBA"||(X=O,O=ee(O)),Q=this["process"+T.toUpperCase()](O,x.call(this),te,(function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in n.image_compression?ce:U.NONE})(H),X)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},ne=n.__addimage__.convertBase64ToBinaryString=function(O,T){T=typeof T!="boolean"||T;var te,H="";if(typeof O=="string"){var Q;te=(Q=he(O))!==null&&Q!==void 0?Q:O;try{H=Nd(te)}catch(X){if(T)throw z(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};n.getImageProperties=function(O){var T,te,H="";if(S(O)&&(O=y(O)),typeof O=="string"&&a(O)===t&&((H=ne(O,!1))===""&&(H=n.loadFile(O)||""),O=H),te=a(O),!w(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if(O instanceof Uint8Array||(O=ee(O)),!(T=this["process"+te.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=te,T}})(_t.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};_t.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(t.objId),g=t.pageContext.annotations,x=!1,w=0;w<g.length&&!x;w++)switch((s=g[w]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var S=0;S<g.length;S++){s=g[S];var y=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(C.objId),U=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(A(s.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+p.objId+" 0 R",o+=" /T ("+y(A(U))+") >>",C.content=o;var R=C.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+R,s.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(C.objId,"0 R",L.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var z=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(E(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var he=this.annotations._nameMap[s.options.name];s.options.pageNumber=he.page,s.options.top=he.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(E(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var le=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+le+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var d=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:p(t),y:g(s),w:p(t+a),h:g(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,d,p=this.getTextWidth(t),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var x=this.splitTextToSize(t,d).length;u=Math.ceil(g*x)}else d=p,u=g;return this.text(t,s,a,o),a+=.2*g,o.align==="center"&&(s-=p/2),o.align==="right"&&(s-=p),this.link(s,a-g,d,u,o),p},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(_t.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},d=n.__arabicParser__.isArabicEndLetter=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length<=2},p=n.__arabicParser__.isArabicAlfLetter=function(C){return u(C)&&a.indexOf(C.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length>=1};var g=n.__arabicParser__.arabicLetterHasFinalForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length>=3};var x=n.__arabicParser__.arabicLetterHasMedialForm=function(C){return u(C)&&o(C)&&e[C.charCodeAt(0)].length==4},w=n.__arabicParser__.resolveLigatures=function(C){var L=0,A=t,U="",R=0;for(L=0;L<C.length;L+=1)A[C.charCodeAt(L)]!==void 0?(R++,typeof(A=A[C.charCodeAt(L)])=="number"&&(U+=String.fromCharCode(A),A=t,R=0),L===C.length-1&&(A=t,U+=C.charAt(L-(R-1)),L-=R-1,R=0)):(A=t,U+=C.charAt(L-R),L-=R,R=0);return U};n.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&s[C.charCodeAt(0)]!==void 0};var S=n.__arabicParser__.getCorrectForm=function(C,L,A){return u(C)?o(C)===!1?-1:!g(C)||!u(L)&&!u(A)||!u(A)&&d(L)||d(C)&&!u(L)||d(C)&&p(L)||d(C)&&d(L)?0:x(C)&&u(L)&&!d(L)&&u(A)&&g(A)?3:d(C)||!u(A)?1:2:-1},y=function(C){var L=0,A=0,U=0,R="",z="",he="",le=(C=C||"").split("\\s+"),ee=[];for(L=0;L<le.length;L+=1){for(ee.push(""),A=0;A<le[L].length;A+=1)R=le[L][A],z=le[L][A-1],he=le[L][A+1],u(R)?(U=S(R,z,he),ee[L]+=U!==-1?String.fromCharCode(e[R.charCodeAt(0)][U]):R):ee[L]+=R;ee[L]=w(ee[L])}return ee.join(" ")},E=n.__arabicParser__.processArabic=n.processArabic=function(){var C,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(L)){var U=0;for(A=[],U=0;U<L.length;U+=1)Array.isArray(L[U])?A.push([y(L[U][0]),L[U][1],L[U][2]]):A.push([y(L[U])]);C=A}else C=y(L);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};n.events.push(["preProcessText",E])})(_t.API),_t.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(_t.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(C){g=C}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(C){x=C}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(C){w=C}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(C){S=C}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(C){E=C}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(p){return s.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},n.getTextDimensions=function(p,g){s.call(this);var x=(g=g||{}).fontSize||this.getFontSize(),w=g.font||this.getFont(),S=g.scaleFactor||this.internal.scaleFactor,y=0,E=0,C=0,L=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var A=g.maxWidth;A>0?typeof p=="string"?p=this.splitTextToSize(p,A):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(R,z){return R.concat(L.splitTextToSize(z,A))},[])):p=Array.isArray(p)?p:[p];for(var U=0;U<p.length;U++)y<(C=this.getStringUnitWidth(p[U],{font:w})*x)&&(y=C);return y!==0&&(E=p.length),{w:y/=S,h:Math.max((E*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/S,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var p=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var p;p=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var g=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===p.lineNumber?(p.x=(g.x||0)+(g.width||0),p.y=g.y||0):g.y+g.height+p.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=w.top,y&&S&&(this.printHeaderRow(p.lineNumber,!0),p.y+=S[0].height)):p.y=g.y+g.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,t===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-x,p.y+x,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+x,{align:"center",baseline:"top",maxWidth:p.width-x-x}):this.text(p.text,p.x+x,p.y+x,{align:"left",baseline:"top",maxWidth:p.width-x-x})),this.internal.__cell__.lastCell=p,this};n.table=function(p,g,x,w,S){if(s.call(this),!x)throw new Error("No data for PDF table.");var y,E,C,L,A=[],U=[],R=[],z={},he={},le=[],ee=[],$=(S=S||{}).autoSize||!1,J=S.printHeaders!==!1,ne=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,O=S.margins||Object.assign({width:this.getPageWidth()},e),T=typeof S.padding=="number"?S.padding:3,te=S.headerBackgroundColor||"#c8c8c8",H=S.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=ne,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=te,this.internal.__cell__.headerTextColor=H,this.setFontSize(ne),w==null)U=A=Object.keys(x[0]),R=A.map(function(){return"left"});else if(Array.isArray(w)&&br(w[0])==="object")for(A=w.map(function(ve){return ve.name}),U=w.map(function(ve){return ve.prompt||ve.name||""}),R=w.map(function(ve){return ve.align||"left"}),y=0;y<w.length;y+=1)he[w[y].name]=.7499990551181103*w[y].width;else Array.isArray(w)&&typeof w[0]=="string"&&(U=A=w,R=A.map(function(){return"left"}));if($||Array.isArray(w)&&typeof w[0]=="string")for(y=0;y<A.length;y+=1){for(z[L=A[y]]=x.map(function(ve){return ve[L]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(U[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=z[L],this.setFont(void 0,"normal"),C=0;C<E.length;C+=1)le.push(this.getTextDimensions(E[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);he[L]=Math.max.apply(null,le)+T+T,le=[]}if(J){var Q={};for(y=0;y<A.length;y+=1)Q[A[y]]={},Q[A[y]].text=U[y],Q[A[y]].align=R[y];var X=d.call(this,Q,he);ee=A.map(function(ve){return new o(p,g,he[ve],X,Q[ve].text,void 0,Q[ve].align)}),this.setTableHeaderRow(ee),this.printHeaderRow(1,!1)}var pe=w.reduce(function(ve,Y){return ve[Y.name]=Y.align,ve},{});for(y=0;y<x.length;y+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:y,data:x[y]},this);var G=d.call(this,x[y],he);for(C=0;C<A.length;C+=1){var ce=x[y][A[C]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:y,col:C,data:ce},this),u.call(this,new o(p,g,he[A[C]],G,ce,y+2,pe[A[C]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=g,this};var d=function(p,g){var x=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(p).map(function(y){var E=p[y];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,g[y]-x-x)},this).map(function(y){return this.getLineHeightFactor()*y.length*w/S+x+x},this).reduce(function(y,E){return Math.max(y,E)},0)};n.setTableHeaderRow=function(p){s.call(this),this.internal.__cell__.tableHeaderRow=p},n.printHeaderRow=function(p,g){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){x=this.internal.__cell__.tableHeaderRow[y].clone(),g&&(x.y=this.internal.__cell__.margins.top||0,S.push(x)),x.lineNumber=p;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,x),this.setTextColor(E)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}})(_t.API);var i1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Of=s1(a1),o1=[100,200,300,400,500,600,700,800,900],Yb=s1(o1);function af(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return i1[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Of[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function Em(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var Kb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Lm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dm(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Tm(n){return n.trimLeft()}function Jb(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Xb(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var yd,Om,Im,kc,bd,Fm,Rm,Mm,of=["times"];function Um(n,e,t,s,a){var o=4,u=qm;switch(a){case _t.API.image_compression.FAST:o=1,u=Bm;break;case _t.API.image_compression.MEDIUM:o=6,u=zm;break;case _t.API.image_compression.SLOW:o=9,u=$m}n=(function(p,g,x,w){for(var S,y=p.length/g,E=new Uint8Array(p.length+y),C=[Qb,Bm,qm,zm,$m],L=0;L<y;L+=1){var A=L*g,U=p.subarray(A,A+g);if(w)E.set(w(U,x,S),A+L);else{for(var R=C.length,z=[],he=0;he<R;he+=1)z[he]=C[he](U,x,S);var le=e5(z.concat());E.set(z[le],A+L)}S=U}return E})(n,e,Math.ceil(t*s/8),u);var d=Af(n,{level:o});return _t.API.__addimage__.arrayBufferToBinaryString(d)}function Qb(n){var e=Array.apply([],n);return e.unshift(0),e}function Bm(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function qm(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function zm(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,d=t&&t[o]||0;a[o+1]=n[o]+256-(u+d>>>1)&255}return a}function $m(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=Zb(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function Zb(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function e5(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function lf(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return l1(n,a)>>o&u}function Wm(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),d=(1<<s)-1,p=(e&d)<<u;(function(g,x,w){if(x+1<g.byteLength)g.setUint16(x,w,!1);else{var S=w>>8&255;g.setUint8(x,S)}})(n,o,l1(n,o)&~(d<<u)&65535|p)}function l1(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function t5(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var d=null,p=null;o&&(d=e,p=u,e+=3*u);var g=!0,x=[],w=0,S=null,y=0,E=null;for(this.width=t,this.height=s;g&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,E=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((O=n[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=n[e++];w=n[e++]|n[e++]<<8,S=n[e++],1&C||(S=null),y=C>>2&7,e++;break;case 254:for(;;){if(!((O=n[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,z=n[e++],he=z>>6&1,le=1<<1+(7&z),ee=d,$=p,J=!1;z>>7&&(J=!0,ee=e,$=le,e+=3*le);var ne=e;for(e++;;){var O;if(!((O=n[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}x.push({x:L,y:A,width:U,height:R,has_local_palette:J,palette_offset:ee,palette_size:$,data_offset:ne,data_length:e-ne,transparent_index:S,interlaced:!!he,delay:w,disposal:y});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return E},this.frameInfo=function(T){if(T<0||T>=x.length)throw new Error("Frame index out of range.");return x[T]},this.decodeAndBlitFrameBGRA=function(T,te){var H=this.frameInfo(T),Q=H.width*H.height,X=new Uint8Array(Q);Hm(n,H.data_offset,X,Q);var pe=H.palette_offset,G=H.transparent_index;G===null&&(G=256);var ce=H.width,ve=t-ce,Y=ce,P=4*(H.y*t+H.x),F=4*((H.y+H.height)*t+H.x),V=P,ie=4*ve;H.interlaced===!0&&(ie+=4*t*7);for(var ue=8,me=0,ye=X.length;me<ye;++me){var xe=X[me];if(Y===0&&(Y=ce,(V+=ie)>=F&&(ie=4*ve+4*t*(ue-1),V=P+(ce+ve)*(ue<<1),ue>>=1)),xe===G)V+=4;else{var ge=n[pe+3*xe],Ie=n[pe+3*xe+1],Re=n[pe+3*xe+2];te[V++]=Re,te[V++]=Ie,te[V++]=ge,te[V++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(T,te){var H=this.frameInfo(T),Q=H.width*H.height,X=new Uint8Array(Q);Hm(n,H.data_offset,X,Q);var pe=H.palette_offset,G=H.transparent_index;G===null&&(G=256);var ce=H.width,ve=t-ce,Y=ce,P=4*(H.y*t+H.x),F=4*((H.y+H.height)*t+H.x),V=P,ie=4*ve;H.interlaced===!0&&(ie+=4*t*7);for(var ue=8,me=0,ye=X.length;me<ye;++me){var xe=X[me];if(Y===0&&(Y=ce,(V+=ie)>=F&&(ie=4*ve+4*t*(ue-1),V=P+(ce+ve)*(ue<<1),ue>>=1)),xe===G)V+=4;else{var ge=n[pe+3*xe],Ie=n[pe+3*xe+1],Re=n[pe+3*xe+2];te[V++]=ge,te[V++]=Ie,te[V++]=Re,te[V++]=255}--Y}}}function Hm(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,d=u+1,p=a+1,g=(1<<p)-1,x=0,w=0,S=0,y=n[e++],E=new Int32Array(4096),C=null;;){for(;x<16&&y!==0;)w|=n[e++]<<x,x+=8,y===1?y=n[e++]:--y;if(x<p)break;var L=w&g;if(w>>=p,x-=p,L!==o){if(L===u)break;for(var A=L<d?L:C,U=0,R=A;R>o;)R=E[R]>>8,++U;var z=R;if(S+U+(A!==L?1:0)>s)return void Lr.log("Warning, gif stream longer than expected.");t[S++]=z;var he=S+=U;for(A!==L&&(t[S++]=z),R=A;U--;)R=E[R],t[--he]=255&R,R>>=8;C!==null&&d<4096&&(E[d++]=C<<8|z,d>=g+1&&p<12&&(++p,g=g<<1|1)),C=L}else d=u+1,g=(1<<(p=a+1))-1,C=null}return S!==s&&Lr.log("Warning, gif stream shorter than expected."),t}function cf(n){var e,t,s,a,o,u=Math.floor,d=new Array(64),p=new Array(64),g=new Array(64),x=new Array(64),w=new Array(65535),S=new Array(65535),y=new Array(64),E=new Array(64),C=[],L=0,A=7,U=new Array(64),R=new Array(64),z=new Array(64),he=new Array(256),le=new Array(2048),ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],$=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(P,F){for(var V=0,ie=0,ue=new Array,me=1;me<=16;me++){for(var ye=1;ye<=P[me];ye++)ue[F[ie]]=[],ue[F[ie]][0]=V,ue[F[ie]][1]=me,ie++,V++;V*=2}return ue}function pe(P){for(var F=P[0],V=P[1]-1;V>=0;)F&1<<V&&(L|=1<<A),V--,--A<0&&(L==255?(G(255),G(0)):G(L),A=7,L=0)}function G(P){C.push(P)}function ce(P){G(P>>8&255),G(255&P)}function ve(P,F,V,ie,ue){for(var me,ye=ue[0],xe=ue[240],ge=(function(ze,st){var et,yt,vt,Ut,wt,It,Ht,Vt,lt,mt,it=0;for(lt=0;lt<8;++lt){et=ze[it],yt=ze[it+1],vt=ze[it+2],Ut=ze[it+3],wt=ze[it+4],It=ze[it+5],Ht=ze[it+6];var Ar=et+(Vt=ze[it+7]),Kt=et-Vt,Et=yt+Ht,Lt=yt-Ht,sr=vt+It,ht=vt-It,dr=Ut+wt,kt=Ut-wt,Ft=Ar+dr,cr=Ar-dr,Bt=Et+sr,St=Et-sr;ze[it]=Ft+Bt,ze[it+4]=Ft-Bt;var nr=.707106781*(St+cr);ze[it+2]=cr+nr,ze[it+6]=cr-nr;var Ji=.382683433*((Ft=kt+ht)-(St=Lt+Kt)),tr=.5411961*Ft+Ji,Fn=1.306562965*St+Ji,Jn=.707106781*(Bt=ht+Lt),Nt=Kt+Jn,Rn=Kt-Jn;ze[it+5]=Rn+tr,ze[it+3]=Rn-tr,ze[it+1]=Nt+Fn,ze[it+7]=Nt-Fn,it+=8}for(it=0,lt=0;lt<8;++lt){et=ze[it],yt=ze[it+8],vt=ze[it+16],Ut=ze[it+24],wt=ze[it+32],It=ze[it+40],Ht=ze[it+48];var ds=et+(Vt=ze[it+56]),hn=et-Vt,Xn=yt+Ht,hr=yt-Ht,Tr=vt+It,Ur=vt-It,zs=Ut+wt,Qn=Ut-wt,An=ds+zs,Zn=ds-zs,Hr=Xn+Tr,hs=Xn-Tr;ze[it]=An+Hr,ze[it+32]=An-Hr;var Pn=.707106781*(hs+Zn);ze[it+16]=Zn+Pn,ze[it+48]=Zn-Pn;var Cn=.382683433*((An=Qn+Ur)-(hs=hr+hn)),En=.5411961*An+Cn,$s=1.306562965*hs+Cn,li=.707106781*(Hr=Ur+hr),ci=hn+li,Ei=hn-li;ze[it+40]=Ei+En,ze[it+24]=Ei-En,ze[it+8]=ci+$s,ze[it+56]=ci-$s,it++}for(lt=0;lt<64;++lt)mt=ze[lt]*st[lt],y[lt]=mt>0?mt+.5|0:mt-.5|0;return y})(P,F),Ie=0;Ie<64;++Ie)E[ee[Ie]]=ge[Ie];var Re=E[0]-V;V=E[0],Re==0?pe(ie[0]):(pe(ie[S[me=32767+Re]]),pe(w[me]));for(var We=63;We>0&&E[We]==0;)We--;if(We==0)return pe(ye),V;for(var Ve,re=1;re<=We;){for(var Ye=re;E[re]==0&&re<=We;)++re;var bt=re-Ye;if(bt>=16){Ve=bt>>4;for(var ot=1;ot<=Ve;++ot)pe(xe);bt&=15}me=32767+E[re],pe(ue[(bt<<4)+S[me]]),pe(w[me]),re++}return We!=63&&pe(ye),V}function Y(P){P=Math.min(Math.max(P,1),100),o!=P&&((function(F){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var ue=u((V[ie]*F+50)/100);ue=Math.min(Math.max(ue,1),255),d[ee[ie]]=ue}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var xe=u((me[ye]*F+50)/100);xe=Math.min(Math.max(xe,1),255),p[ee[ye]]=xe}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,Re=0;Re<8;Re++)for(var We=0;We<8;We++)g[Ie]=1/(d[ee[Ie]]*ge[Re]*ge[We]*8),x[Ie]=1/(p[ee[Ie]]*ge[Re]*ge[We]*8),Ie++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),o=P)}this.encode=function(P,F){F&&Y(F),C=new Array,L=0,A=7,ce(65496),ce(65504),ce(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),ce(1),ce(1),G(0),G(0),(function(){ce(65499),ce(132),G(0);for(var yt=0;yt<64;yt++)G(d[yt]);G(1);for(var vt=0;vt<64;vt++)G(p[vt])})(),(function(yt,vt){ce(65472),ce(17),G(8),ce(vt),ce(yt),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(P.width,P.height),(function(){ce(65476),ce(418),G(0);for(var yt=0;yt<16;yt++)G($[yt+1]);for(var vt=0;vt<=11;vt++)G(J[vt]);G(16);for(var Ut=0;Ut<16;Ut++)G(ne[Ut+1]);for(var wt=0;wt<=161;wt++)G(O[wt]);G(1);for(var It=0;It<16;It++)G(T[It+1]);for(var Ht=0;Ht<=11;Ht++)G(te[Ht]);G(17);for(var Vt=0;Vt<16;Vt++)G(H[Vt+1]);for(var lt=0;lt<=161;lt++)G(Q[lt])})(),ce(65498),ce(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var V=0,ie=0,ue=0;L=0,A=7,this.encode.displayName="_encode_";for(var me,ye,xe,ge,Ie,Re,We,Ve,re,Ye=P.data,bt=P.width,ot=P.height,ze=4*bt,st=0;st<ot;){for(me=0;me<ze;){for(Ie=ze*st+me,We=-1,Ve=0,re=0;re<64;re++)Re=Ie+(Ve=re>>3)*ze+(We=4*(7&re)),st+Ve>=ot&&(Re-=ze*(st+1+Ve-ot)),me+We>=ze&&(Re-=me+We-ze+4),ye=Ye[Re++],xe=Ye[Re++],ge=Ye[Re++],U[re]=(le[ye]+le[xe+256|0]+le[ge+512|0]>>16)-128,R[re]=(le[ye+768|0]+le[xe+1024|0]+le[ge+1280|0]>>16)-128,z[re]=(le[ye+1280|0]+le[xe+1536|0]+le[ge+1792|0]>>16)-128;V=ve(U,g,V,e,s),ie=ve(R,x,ie,t,a),ue=ve(z,x,ue,t,a),me+=32}st+=8}if(A>=0){var et=[];et[1]=A+1,et[0]=(1<<A+1)-1,pe(et)}return ce(65497),new Uint8Array(C)},n=n||50,(function(){for(var P=String.fromCharCode,F=0;F<256;F++)he[F]=P(F)})(),e=X($,J),t=X(T,te),s=X(ne,O),a=X(H,Q),(function(){for(var P=1,F=2,V=1;V<=15;V++){for(var ie=P;ie<F;ie++)S[32767+ie]=V,w[32767+ie]=[],w[32767+ie][1]=V,w[32767+ie][0]=ie;for(var ue=-(F-1);ue<=-P;ue++)S[32767+ue]=V,w[32767+ue]=[],w[32767+ue][1]=V,w[32767+ue][0]=F-1+ue;P<<=1,F<<=1}})(),(function(){for(var P=0;P<256;P++)le[P]=19595*P,le[P+256|0]=38470*P,le[P+512|0]=7471*P+32768,le[P+768|0]=-11059*P,le[P+1024|0]=-21709*P,le[P+1280|0]=32768*P+8421375,le[P+1536|0]=-27439*P,le[P+1792|0]=-5329*P})(),Y(n)}function ya(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vm(n){function e(J){if(!J)throw Error("assert :P")}function t(J,ne,O){for(var T=0;4>T;T++)if(J[ne+T]!=O.charCodeAt(T))return!0;return!1}function s(J,ne,O,T,te){for(var H=0;H<te;H++)J[ne+H]=O[T+H]}function a(J,ne,O,T){for(var te=0;te<T;te++)J[ne+te]=O}function o(J){return new Int32Array(J)}function u(J,ne){for(var O=[],T=0;T<J;T++)O.push(new ne);return O}function d(J,ne){var O=[];return(function T(te,H,Q){for(var X=Q[H],pe=0;pe<X&&(te.push(Q.length>H+1?[]:new ne),!(Q.length<H+1));pe++)T(te[pe],H+1,Q)})(O,0,J),O}var p=function(){var J=this;function ne(f,v){for(var _=1<<v-1>>>0;f&_;)_>>>=1;return _?(f&_-1)+_:f}function O(f,v,_,j,I){e(!(j%_));do f[v+(j-=_)]=I;while(0<j)}function T(f,v,_,j,I){if(e(2328>=I),512>=I)var q=o(512);else if((q=o(I))==null)return 0;return(function(W,K,Z,ae,we,Ae){var oe,Ne,je=K,Me=1<<Z,Ce=o(16),Oe=o(16);for(e(we!=0),e(ae!=null),e(W!=null),e(0<Z),Ne=0;Ne<we;++Ne){if(15<ae[Ne])return 0;++Ce[ae[Ne]]}if(Ce[0]==we)return 0;for(Oe[1]=0,oe=1;15>oe;++oe){if(Ce[oe]>1<<oe)return 0;Oe[oe+1]=Oe[oe]+Ce[oe]}for(Ne=0;Ne<we;++Ne)oe=ae[Ne],0<ae[Ne]&&(Ae[Oe[oe]++]=Ne);if(Oe[15]==1)return(ae=new te).g=0,ae.value=Ae[0],O(W,je,1,Me,ae),Me;var Fe,Ue=-1,Be=Me-1,gt=0,rt=1,qt=1,ct=1<<Z;for(Ne=0,oe=1,we=2;oe<=Z;++oe,we<<=1){if(rt+=qt<<=1,0>(qt-=Ce[oe]))return 0;for(;0<Ce[oe];--Ce[oe])(ae=new te).g=oe,ae.value=Ae[Ne++],O(W,je+gt,we,ct,ae),gt=ne(gt,oe)}for(oe=Z+1,we=2;15>=oe;++oe,we<<=1){if(rt+=qt<<=1,0>(qt-=Ce[oe]))return 0;for(;0<Ce[oe];--Ce[oe]){if(ae=new te,(gt&Be)!=Ue){for(je+=ct,Fe=1<<(Ue=oe)-Z;15>Ue&&!(0>=(Fe-=Ce[Ue]));)++Ue,Fe<<=1;Me+=ct=1<<(Fe=Ue-Z),W[K+(Ue=gt&Be)].g=Fe+Z,W[K+Ue].value=je-K-Ue}ae.g=oe-Z,ae.value=Ae[Ne++],O(W,je+(gt>>Z),we,ct,ae),gt=ne(gt,oe)}}return rt!=2*Oe[15]-1?0:Me})(f,v,_,j,I,q)}function te(){this.value=this.g=0}function H(){this.value=this.g=0}function Q(){this.G=u(5,te),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Qs,H)}function X(f,v,_,j){e(f!=null),e(v!=null),e(2147483648>j),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=v,f.pa=_,f.Jd=v,f.Yc=_+j,f.Zc=4<=j?_+j-4+1:_,ye(f)}function pe(f,v){for(var _=0;0<v--;)_|=ge(f,128)<<v;return _}function G(f,v){var _=pe(f,v);return xe(f)?-_:_}function ce(f,v,_,j){var I,q=0;for(e(f!=null),e(v!=null),e(4294967288>j),f.Sb=j,f.Ra=0,f.u=0,f.h=0,4<j&&(j=4),I=0;I<j;++I)q+=v[_+I]<<8*I;f.Ra=q,f.bb=j,f.oa=v,f.pa=_}function ve(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<La-8>>>0,++f.bb,f.u-=8;ie(f)&&(f.h=1,f.u=0)}function Y(f,v){if(e(0<=v),!f.h&&v<=Rs){var _=V(f)&Fs[v];return f.u+=v,ve(f),_}return f.h=1,f.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(f){return f.Ra>>>(f.u&La-1)>>>0}function ie(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>La}function ue(f,v){f.u=v,f.h=ie(f)}function me(f){f.u>=Mi&&(e(f.u>=Mi),ve(f))}function ye(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function xe(f){return pe(f,1)}function ge(f,v){var _=f.Ca;0>f.b&&ye(f);var j=f.b,I=_*v>>>8,q=(f.I>>>j>I)+0;for(q?(_-=I,f.I-=I+1<<j>>>0):_=I+1,j=_,I=0;256<=j;)I+=8,j>>=8;return j=7^I+aa[j],f.b-=j,f.Ca=(_<<j)-1,q}function Ie(f,v,_){f[v+0]=_>>24&255,f[v+1]=_>>16&255,f[v+2]=_>>8&255,f[v+3]=255&_}function Re(f,v){return f[v+0]|f[v+1]<<8}function We(f,v){return Re(f,v)|f[v+2]<<16}function Ve(f,v){return Re(f,v)|Re(f,v+2)<<16}function re(f,v){var _=1<<v;return e(f!=null),e(0<v),f.X=o(_),f.X==null?0:(f.Mb=32-v,f.Xa=v,1)}function Ye(f,v){e(f!=null),e(v!=null),e(f.Xa==v.Xa),s(v.X,0,f.X,0,1<<v.Xa)}function bt(){this.X=[],this.Xa=this.Mb=0}function ot(f,v,_,j){e(_!=null),e(j!=null);var I=_[0],q=j[0];return I==0&&(I=(f*q+v/2)/v),q==0&&(q=(v*I+f/2)/f),0>=I||0>=q?0:(_[0]=I,j[0]=q,1)}function ze(f,v){return f+(1<<v)-1>>>v}function st(f,v){return((4278255360&f)+(4278255360&v)>>>0&4278255360)+((16711935&f)+(16711935&v)>>>0&16711935)>>>0}function et(f,v){J[v]=function(_,j,I,q,W,K,Z){var ae;for(ae=0;ae<W;++ae){var we=J[f](K[Z+ae-1],I,q+ae);K[Z+ae]=st(_[j+ae],we)}}}function yt(){this.ud=this.hd=this.jd=0}function vt(f,v){return((4278124286&(f^v))>>>1)+(f&v)>>>0}function Ut(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function wt(f,v){return Ut(f+(f-v+.5>>1))}function It(f,v,_){return Math.abs(v-_)-Math.abs(f-_)}function Ht(f,v,_,j,I,q,W){for(j=q[W-1],_=0;_<I;++_)q[W+_]=j=st(f[v+_],j)}function Vt(f,v,_,j,I){var q;for(q=0;q<_;++q){var W=f[v+q],K=W>>8&255,Z=16711935&(Z=(Z=16711935&W)+((K<<16)+K));j[I+q]=(4278255360&W)+Z>>>0}}function lt(f,v){v.jd=255&f,v.hd=f>>8&255,v.ud=f>>16&255}function mt(f,v,_,j,I,q){var W;for(W=0;W<j;++W){var K=v[_+W],Z=K>>>8,ae=K,we=255&(we=(we=K>>>16)+((f.jd<<24>>24)*(Z<<24>>24)>>>5));ae=255&(ae=(ae+=(f.hd<<24>>24)*(Z<<24>>24)>>>5)+((f.ud<<24>>24)*(we<<24>>24)>>>5)),I[q+W]=(4278255360&K)+(we<<16)+ae}}function it(f,v,_,j,I){J[v]=function(q,W,K,Z,ae,we,Ae,oe,Ne){for(Z=Ae;Z<oe;++Z)for(Ae=0;Ae<Ne;++Ae)ae[we++]=I(K[j(q[W++])])},J[f]=function(q,W,K,Z,ae,we,Ae){var oe=8>>q.b,Ne=q.Ea,je=q.K[0],Me=q.w;if(8>oe)for(q=(1<<q.b)-1,Me=(1<<oe)-1;W<K;++W){var Ce,Oe=0;for(Ce=0;Ce<Ne;++Ce)Ce&q||(Oe=j(Z[ae++])),we[Ae++]=I(je[Oe&Me]),Oe>>=oe}else J["VP8LMapColor"+_](Z,ae,je,Me,we,Ae,W,K,Ne)}}function Ar(f,v,_,j,I){for(_=v+_;v<_;){var q=f[v++];j[I++]=q>>16&255,j[I++]=q>>8&255,j[I++]=255&q}}function Kt(f,v,_,j,I){for(_=v+_;v<_;){var q=f[v++];j[I++]=q>>16&255,j[I++]=q>>8&255,j[I++]=255&q,j[I++]=q>>24&255}}function Et(f,v,_,j,I){for(_=v+_;v<_;){var q=(W=f[v++])>>16&240|W>>12&15,W=240&W|W>>28&15;j[I++]=q,j[I++]=W}}function Lt(f,v,_,j,I){for(_=v+_;v<_;){var q=(W=f[v++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;j[I++]=q,j[I++]=W}}function sr(f,v,_,j,I){for(_=v+_;v<_;){var q=f[v++];j[I++]=255&q,j[I++]=q>>8&255,j[I++]=q>>16&255}}function ht(f,v,_,j,I,q){if(q==0)for(_=v+_;v<_;)Ie(j,((q=f[v++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),I+=32;else s(j,I,f,v,_)}function dr(f,v){J[v][0]=J[f+"0"],J[v][1]=J[f+"1"],J[v][2]=J[f+"2"],J[v][3]=J[f+"3"],J[v][4]=J[f+"4"],J[v][5]=J[f+"5"],J[v][6]=J[f+"6"],J[v][7]=J[f+"7"],J[v][8]=J[f+"8"],J[v][9]=J[f+"9"],J[v][10]=J[f+"10"],J[v][11]=J[f+"11"],J[v][12]=J[f+"12"],J[v][13]=J[f+"13"],J[v][14]=J[f+"0"],J[v][15]=J[f+"0"]}function kt(f){return f==Co||f==so||f==fl||f==pl}function Ft(){this.eb=[],this.size=this.A=this.fb=0}function cr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ft,this.f.kb=new cr,this.sd=null}function St(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function nr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ji(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function tr(f,v){var _=f.T,j=v.ba.f.RGBA,I=j.eb,q=j.fb+f.ka*j.A,W=xs[v.ba.S],K=f.y,Z=f.O,ae=f.f,we=f.N,Ae=f.ea,oe=f.W,Ne=v.cc,je=v.dc,Me=v.Mc,Ce=v.Nc,Oe=f.ka,Fe=f.ka+f.T,Ue=f.U,Be=Ue+1>>1;for(Oe==0?W(K,Z,null,null,ae,we,Ae,oe,ae,we,Ae,oe,I,q,null,null,Ue):(W(v.ec,v.fc,K,Z,Ne,je,Me,Ce,ae,we,Ae,oe,I,q-j.A,I,q,Ue),++_);Oe+2<Fe;Oe+=2)Ne=ae,je=we,Me=Ae,Ce=oe,we+=f.Rc,oe+=f.Rc,q+=2*j.A,W(K,(Z+=2*f.fa)-f.fa,K,Z,Ne,je,Me,Ce,ae,we,Ae,oe,I,q-j.A,I,q,Ue);return Z+=f.fa,f.j+Fe<f.o?(s(v.ec,v.fc,K,Z,Ue),s(v.cc,v.dc,ae,we,Be),s(v.Mc,v.Nc,Ae,oe,Be),_--):1&Fe||W(K,Z,null,null,ae,we,Ae,oe,ae,we,Ae,oe,I,q+j.A,null,null,Ue),_}function Fn(f,v,_){var j=f.F,I=[f.J];if(j!=null){var q=f.U,W=v.ba.S,K=W==hl||W==fl;v=v.ba.f.RGBA;var Z=[0],ae=f.ka;Z[0]=f.T,f.Kb&&(ae==0?--Z[0]:(--ae,I[0]-=f.width),f.j+f.ka+f.T==f.o&&(Z[0]=f.o-f.j-ae));var we=v.eb;ae=v.fb+ae*v.A,f=ul(j,I[0],f.width,q,Z,we,ae+(K?0:3),v.A),e(_==Z),f&&kt(W)&&no(we,ae,K,q,Z,v.A)}return 0}function Jn(f){var v=f.ma,_=v.ba.S,j=11>_,I=_==Ia||_==dl||_==hl||_==_r||_==12||kt(_);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!_o(v.Oa,f,I?11:12))return 0;if(I&&kt(_)&&Zt(),f.da)alert("todo:use_scaling");else{if(j){if(v.Ib=Ji,f.Kb){if(_=f.U+1>>1,v.memory=o(f.U+2*_),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+f.U,v.Mc=v.cc,v.Nc=v.dc+_,v.Ib=tr,Zt()}}else alert("todo:EmitYUV");I&&(v.Jb=Fn,j&&is())}if(j&&!Dn){for(f=0;256>f;++f)ys[f]=89858*(f-128)+bi>>ua,bs[f]=-22014*(f-128)+bi,To[f]=-45773*(f-128),lo[f]=113618*(f-128)+bi>>ua;for(f=gr;f<xr;++f)v=76283*(f-16)+bi>>ua,Jl[f-gr]=Br(v,255),Du[f-gr]=Br(v+8>>4,15);Dn=1}return 1}function Nt(f){var v=f.ma,_=f.U,j=f.T;return e(!(1&f.ka)),0>=_||0>=j?0:(_=v.Ib(f,v),v.Jb!=null&&v.Jb(f,v,_),v.Dc+=_,1)}function Rn(f){f.ma.memory=null}function ds(f,v,_,j){return Y(f,8)!=47?0:(v[0]=Y(f,14)+1,_[0]=Y(f,14)+1,j[0]=Y(f,1),Y(f,3)!=0?0:!f.h)}function hn(f,v){if(4>f)return f+1;var _=f-2>>1;return(2+(1&f)<<_)+Y(v,_)+1}function Xn(f,v){return 120<v?v-120:1<=(_=((_=$d[v-1])>>4)*f+(8-(15&_)))?_:1;var _}function hr(f,v,_){var j=V(_),I=f[v+=255&j].g-8;return 0<I&&(ue(_,_.u+8),j=V(_),v+=f[v].value,v+=j&(1<<I)-1),ue(_,_.u+f[v].g),f[v].value}function Tr(f,v,_){return _.g+=f.g,_.value+=f.value<<v>>>0,e(8>=_.g),f.g}function Ur(f,v,_){var j=f.xc;return e((v=j==0?0:f.vc[f.md*(_>>j)+(v>>j)])<f.Wb),f.Ya[v]}function zs(f,v,_,j){var I=f.ab,q=f.c*v,W=f.C;v=W+v;var K=_,Z=j;for(j=f.Ta,_=f.Ua;0<I--;){var ae=f.gc[I],we=W,Ae=v,oe=K,Ne=Z,je=(Z=j,K=_,ae.Ea);switch(e(we<Ae),e(Ae<=ae.nc),ae.hc){case 2:Zr(oe,Ne,(Ae-we)*je,Z,K);break;case 0:var Me=we,Ce=Ae,Oe=Z,Fe=K,Ue=(ct=ae).Ea;Me==0&&(oa(oe,Ne,null,null,1,Oe,Fe),Ht(oe,Ne+1,0,0,Ue-1,Oe,Fe+1),Ne+=Ue,Fe+=Ue,++Me);for(var Be=1<<ct.b,gt=Be-1,rt=ze(Ue,ct.b),qt=ct.K,ct=ct.w+(Me>>ct.b)*rt;Me<Ce;){var Xt=qt,Kr=ct,zt=1;for(Ui(oe,Ne,Oe,Fe-Ue,1,Oe,Fe);zt<Ue;){var nt=(zt&~gt)+Be;nt>Ue&&(nt=Ue),(0,Za[Xt[Kr++]>>8&15])(oe,Ne+ +zt,Oe,Fe+zt-Ue,nt-zt,Oe,Fe+zt),zt=nt}Ne+=Ue,Fe+=Ue,++Me&gt||(ct+=rt)}Ae!=ae.nc&&s(Z,K-je,Z,K+(Ae-we-1)*je,je);break;case 1:for(je=oe,Ce=Ne,Ue=(oe=ae.Ea)-(Fe=oe&~(Oe=(Ne=1<<ae.b)-1)),Me=ze(oe,ae.b),Be=ae.K,ae=ae.w+(we>>ae.b)*Me;we<Ae;){for(gt=Be,rt=ae,qt=new yt,ct=Ce+Fe,Xt=Ce+oe;Ce<ct;)lt(gt[rt++],qt),ko(qt,je,Ce,Ne,Z,K),Ce+=Ne,K+=Ne;Ce<Xt&&(lt(gt[rt++],qt),ko(qt,je,Ce,Ue,Z,K),Ce+=Ue,K+=Ue),++we&Oe||(ae+=Me)}break;case 3:if(oe==Z&&Ne==K&&0<ae.b){for(Ce=Z,oe=je=K+(Ae-we)*je-(Fe=(Ae-we)*ze(ae.Ea,ae.b)),Ne=Z,Oe=K,Me=[],Fe=(Ue=Fe)-1;0<=Fe;--Fe)Me[Fe]=Ne[Oe+Fe];for(Fe=Ue-1;0<=Fe;--Fe)Ce[oe+Fe]=Me[Fe];Xa(ae,we,Ae,Z,je,Z,K)}else Xa(ae,we,Ae,oe,Ne,Z,K)}K=j,Z=_}Z!=_&&s(j,_,K,Z,q)}function Qn(f,v){var _=f.V,j=f.Ba+f.c*f.C,I=v-f.C;if(e(v<=f.l.o),e(16>=I),0<I){var q=f.l,W=f.Ta,K=f.Ua,Z=q.width;if(zs(f,I,_,j),I=K=[K],e((_=f.C)<(j=v)),e(q.v<q.va),j>q.o&&(j=q.o),_<q.j){var ae=q.j-_;_=q.j,I[0]+=ae*Z}if(_>=j?_=0:(I[0]+=4*q.v,q.ka=_-q.j,q.U=q.va-q.v,q.T=j-_,_=1),_){if(K=K[0],11>(_=f.ca).S){var we=_.f.RGBA,Ae=(j=_.S,I=q.U,q=q.T,ae=we.eb,we.A),oe=q;for(we=we.fb+f.Ma*we.A;0<oe--;){var Ne=W,je=K,Me=I,Ce=ae,Oe=we;switch(j){case Vl:So(Ne,je,Me,Ce,Oe);break;case Ia:la(Ne,je,Me,Ce,Oe);break;case Co:la(Ne,je,Me,Ce,Oe),no(Ce,Oe,0,Me,1,0);break;case Au:eo(Ne,je,Me,Ce,Oe);break;case dl:ht(Ne,je,Me,Ce,Oe,1);break;case so:ht(Ne,je,Me,Ce,Oe,1),no(Ce,Oe,0,Me,1,0);break;case hl:ht(Ne,je,Me,Ce,Oe,0);break;case fl:ht(Ne,je,Me,Ce,Oe,0),no(Ce,Oe,1,Me,1,0);break;case _r:Da(Ne,je,Me,Ce,Oe);break;case pl:Da(Ne,je,Me,Ce,Oe),Bc(Ce,Oe,Me,1,0);break;case Gl:Ta(Ne,je,Me,Ce,Oe);break;default:e(0)}K+=Z,we+=Ae}f.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=_.height)}}f.C=v,e(f.C<=f.i)}function An(f){var v;if(0<f.ua)return 0;for(v=0;v<f.Wb;++v){var _=f.Ya[v].G,j=f.Ya[v].H;if(0<_[1][j[1]+0].g||0<_[2][j[2]+0].g||0<_[3][j[3]+0].g)return 0}return 1}function Zn(f,v,_,j,I,q){if(f.Z!=0){var W=f.qd,K=f.rd;for(e(zn[f.Z]!=null);v<_;++v)zn[f.Z](W,K,j,I,j,I,q),W=j,K=I,I+=q;f.qd=W,f.rd=K}}function Hr(f,v){var _=f.l.ma,j=_.Z==0||_.Z==1?f.l.j:f.C;if(j=f.C<j?j:f.C,e(v<=f.l.o),v>j){var I=f.l.width,q=_.ca,W=_.tb+I*j,K=f.V,Z=f.Ba+f.c*j,ae=f.gc;e(f.ab==1),e(ae[0].hc==3),xi(ae[0],j,v,K,Z,q,W),Zn(_,j,v,q,W,I)}f.C=f.Ma=v}function hs(f,v,_,j,I,q,W){var K=f.$/j,Z=f.$%j,ae=f.m,we=f.s,Ae=_+f.$,oe=Ae;I=_+j*I;var Ne=_+j*q,je=280+we.ua,Me=f.Pb?K:16777216,Ce=0<we.ua?we.Wa:null,Oe=we.wc,Fe=Ae<Ne?Ur(we,Z,K):null;e(f.C<q),e(Ne<=I);var Ue=!1;e:for(;;){for(;Ue||Ae<Ne;){var Be=0;if(K>=Me){var gt=Ae-_;e((Me=f).Pb),Me.wd=Me.m,Me.xd=gt,0<Me.s.ua&&Ye(Me.s.Wa,Me.s.vb),Me=K+Kl}if(Z&Oe||(Fe=Ur(we,Z,K)),e(Fe!=null),Fe.Qb&&(v[Ae]=Fe.qb,Ue=!0),!Ue)if(me(ae),Fe.jc){Be=ae,gt=v;var rt=Ae,qt=Fe.pd[V(Be)&Qs-1];e(Fe.jc),256>qt.g?(ue(Be,Be.u+qt.g),gt[rt]=qt.value,Be=0):(ue(Be,Be.u+qt.g-256),e(256<=qt.value),Be=qt.value),Be==0&&(Ue=!0)}else Be=hr(Fe.G[0],Fe.H[0],ae);if(ae.h)break;if(Ue||256>Be){if(!Ue)if(Fe.nd)v[Ae]=(Fe.qb|Be<<8)>>>0;else{if(me(ae),Ue=hr(Fe.G[1],Fe.H[1],ae),me(ae),gt=hr(Fe.G[2],Fe.H[2],ae),rt=hr(Fe.G[3],Fe.H[3],ae),ae.h)break;v[Ae]=(rt<<24|Ue<<16|Be<<8|gt)>>>0}if(Ue=!1,++Ae,++Z>=j&&(Z=0,++K,W!=null&&K<=q&&!(K%16)&&W(f,K),Ce!=null))for(;oe<Ae;)Be=v[oe++],Ce.X[(506832829*Be&4294967295)>>>Ce.Mb]=Be}else if(280>Be){if(Be=hn(Be-256,ae),gt=hr(Fe.G[4],Fe.H[4],ae),me(ae),gt=Xn(j,gt=hn(gt,ae)),ae.h)break;if(Ae-_<gt||I-Ae<Be)break e;for(rt=0;rt<Be;++rt)v[Ae+rt]=v[Ae+rt-gt];for(Ae+=Be,Z+=Be;Z>=j;)Z-=j,++K,W!=null&&K<=q&&!(K%16)&&W(f,K);if(e(Ae<=I),Z&Oe&&(Fe=Ur(we,Z,K)),Ce!=null)for(;oe<Ae;)Be=v[oe++],Ce.X[(506832829*Be&4294967295)>>>Ce.Mb]=Be}else{if(!(Be<je))break e;for(Ue=Be-280,e(Ce!=null);oe<Ae;)Be=v[oe++],Ce.X[(506832829*Be&4294967295)>>>Ce.Mb]=Be;Be=Ae,e(!(Ue>>>(gt=Ce).Xa)),v[Be]=gt.X[Ue],Ue=!0}Ue||e(ae.h==ie(ae))}if(f.Pb&&ae.h&&Ae<I)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Ye(f.s.vb,f.s.Wa);else{if(ae.h)break e;W?.(f,K>q?q:K),f.a=0,f.$=Ae-_}return 1}return f.a=3,0}function Pn(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var v=f.Wa;v!=null&&(v.X=null),f.vb=null,e(f!=null)}function Cn(){var f=new $e;return f==null?null:(f.a=0,f.xb=Lo,dr("Predictor","VP8LPredictors"),dr("Predictor","VP8LPredictors_C"),dr("PredictorAdd","VP8LPredictorsAdd"),dr("PredictorAdd","VP8LPredictorsAdd_C"),Zr=Vt,ko=mt,So=Ar,la=Kt,Da=Et,Ta=Lt,eo=sr,J.VP8LMapColor32b=Bi,J.VP8LMapColor8b=Qa,f)}function En(f,v,_,j,I){var q=1,W=[f],K=[v],Z=j.m,ae=j.s,we=null,Ae=0;e:for(;;){if(_)for(;q&&Y(Z,1);){var oe=W,Ne=K,je=j,Me=1,Ce=je.m,Oe=je.gc[je.ab],Fe=Y(Ce,2);if(je.Oc&1<<Fe)q=0;else{switch(je.Oc|=1<<Fe,Oe.hc=Fe,Oe.Ea=oe[0],Oe.nc=Ne[0],Oe.K=[null],++je.ab,e(4>=je.ab),Fe){case 0:case 1:Oe.b=Y(Ce,3)+2,Me=En(ze(Oe.Ea,Oe.b),ze(Oe.nc,Oe.b),0,je,Oe.K),Oe.K=Oe.K[0];break;case 3:var Ue,Be=Y(Ce,8)+1,gt=16<Be?0:4<Be?1:2<Be?2:3;if(oe[0]=ze(Oe.Ea,gt),Oe.b=gt,Ue=Me=En(Be,1,0,je,Oe.K)){var rt,qt=Be,ct=Oe,Xt=1<<(8>>ct.b),Kr=o(Xt);if(Kr==null)Ue=0;else{var zt=ct.K[0],nt=ct.w;for(Kr[0]=ct.K[0][0],rt=1;rt<1*qt;++rt)Kr[rt]=st(zt[nt+rt],Kr[rt-1]);for(;rt<4*Xt;++rt)Kr[rt]=0;ct.K[0]=null,ct.K[0]=Kr,Ue=1}}Me=Ue;break;case 2:break;default:e(0)}q=Me}}if(W=W[0],K=K[0],q&&Y(Z,1)&&!(q=1<=(Ae=Y(Z,4))&&11>=Ae)){j.a=3;break e}var Qe;if(Qe=q)t:{var en,Ot,Yt,jr=j,wn=W,on=K,$r=Ae,pn=_,_n=jr.m,Ir=jr.s,er=[null],ar=1,Fr=0,or=Cu[$r];r:for(;;){if(pn&&Y(_n,1)){var Jr=Y(_n,3)+2,Xr=ze(wn,Jr),Nr=ze(on,Jr),$n=Xr*Nr;if(!En(Xr,Nr,0,jr,er))break r;for(er=er[0],Ir.xc=Jr,en=0;en<$n;++en){var yr=er[en]>>8&65535;er[en]=yr,yr>=ar&&(ar=yr+1)}}if(_n.h)break r;for(Ot=0;5>Ot;++Ot){var kr=io[Ot];!Ot&&0<$r&&(kr+=1<<$r),Fr<kr&&(Fr=kr)}var ln=u(ar*or,te),Tn=ar,ws=u(Tn,Q);if(ws==null)var tn=null;else e(65536>=Tn),tn=ws;var rn=o(Fr);if(tn==null||rn==null||ln==null){jr.a=1;break r}var Wn=ln;for(en=Yt=0;en<ar;++en){var Sr=tn[en],Hn=Sr.G,ti=Sr.H,wi=0,Nn=1,nn=0;for(Ot=0;5>Ot;++Ot){kr=io[Ot],Hn[Ot]=Wn,ti[Ot]=Yt,!Ot&&0<$r&&(kr+=1<<$r);s:{var Ma,ha=kr,Oo=jr,$i=rn,Ou=Wn,Qc=Yt,Er=0,_i=Oo.m,Zc=Y(_i,1);if(a($i,0,0,ha),Zc){var eu=Y(_i,1)+1,Xl=Y(_i,1),Ql=Y(_i,Xl==0?1:8);$i[Ql]=1,eu==2&&($i[Ql=Y(_i,8)]=1);var Wi=1}else{var Rr=o(19),cn=Y(_i,4)+4;if(19<cn){Oo.a=3;var sn=0;break s}for(Ma=0;Ma<cn;++Ma)Rr[zd[Ma]]=Y(_i,3);var Io=void 0,fa=void 0,Fo=Oo,Yd=Rr,mn=ha,Zl=$i,yl=0,Hi=Fo.m,Ni=8,Ms=u(128,te);n:for(;T(Ms,0,7,Yd,19);){if(Y(Hi,1)){var bl=2+2*Y(Hi,3);if((Io=2+Y(Hi,bl))>mn)break n}else Io=mn;for(fa=0;fa<mn&&Io--;){me(Hi);var ec=Ms[0+(127&V(Hi))];ue(Hi,Hi.u+ec.g);var Ua=ec.value;if(16>Ua)Zl[fa++]=Ua,Ua!=0&&(Ni=Ua);else{var Iu=Ua==16,tu=Ua-16,Fu=Yl[tu],ru=Y(Hi,ml[tu])+Fu;if(fa+ru>mn)break n;for(var Ru=Iu?Ni:0;0<ru--;)Zl[fa++]=Ru}}yl=1;break n}yl||(Fo.a=3),Wi=yl}(Wi=Wi&&!_i.h)&&(Er=T(Ou,Qc,8,$i,ha)),Wi&&Er!=0?sn=Er:(Oo.a=3,sn=0)}if(sn==0)break r;if(Nn&&Pu[Ot]==1&&(Nn=Wn[Yt].g==0),wi+=Wn[Yt].g,Yt+=sn,3>=Ot){var Ro,tc=rn[0];for(Ro=1;Ro<kr;++Ro)rn[Ro]>tc&&(tc=rn[Ro]);nn+=tc}}if(Sr.nd=Nn,Sr.Qb=0,Nn&&(Sr.qb=(Hn[3][ti[3]+0].value<<24|Hn[1][ti[1]+0].value<<16|Hn[2][ti[2]+0].value)>>>0,wi==0&&256>Hn[0][ti[0]+0].value&&(Sr.Qb=1,Sr.qb+=Hn[0][ti[0]+0].value<<8)),Sr.jc=!Sr.Qb&&6>nn,Sr.jc){var wl,Us=Sr;for(wl=0;wl<Qs;++wl){var pa=wl,ki=Us.pd[pa],uo=Us.G[0][Us.H[0]+pa];256<=uo.value?(ki.g=uo.g+256,ki.value=uo.value):(ki.g=0,ki.value=0,pa>>=Tr(uo,8,ki),pa>>=Tr(Us.G[1][Us.H[1]+pa],16,ki),pa>>=Tr(Us.G[2][Us.H[2]+pa],0,ki),Tr(Us.G[3][Us.H[3]+pa],24,ki))}}}Ir.vc=er,Ir.Wb=ar,Ir.Ya=tn,Ir.yc=ln,Qe=1;break t}Qe=0}if(!(q=Qe)){j.a=3;break e}if(0<Ae){if(ae.ua=1<<Ae,!re(ae.Wa,Ae)){j.a=1,q=0;break e}}else ae.ua=0;var rc=j,nc=W,Mu=K,sc=rc.s,ic=sc.xc;if(rc.c=nc,rc.i=Mu,sc.md=ze(nc,ic),sc.wc=ic==0?-1:(1<<ic)-1,_){j.xb=zi;break e}if((we=o(W*K))==null){j.a=1,q=0;break e}q=(q=hs(j,we,0,W,K,K,null))&&!Z.h;break e}return q?(I!=null?I[0]=we:(e(we==null),e(_)),j.$=0,_||Pn(ae)):Pn(ae),q}function $s(f,v){var _=f.c*f.i,j=_+v+16*v;return e(f.c<=v),f.V=o(j),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+_+v,1)}function li(f,v){var _=f.C,j=v-_,I=f.V,q=f.Ba+f.c*_;for(e(v<=f.l.o);0<j;){var W=16<j?16:j,K=f.l.ma,Z=f.l.width,ae=Z*W,we=K.ca,Ae=K.tb+Z*_,oe=f.Ta,Ne=f.Ua;zs(f,W,I,q),qc(oe,Ne,we,Ae,ae),Zn(K,_,_+W,we,Ae,Z),j-=W,I+=W*f.c,_+=W}e(_==v),f.C=f.Ma=v}function ci(){this.ub=this.yd=this.td=this.Rb=0}function Ei(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nl(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function fr(){this.Yb=(function(){var f=[];return(function v(_,j,I){for(var q=I[j],W=0;W<q&&(_.push(I.length>j+1?[]:0),!(I.length<j+1));W++)v(_[W],j+1,I)})(f,0,[3,11]),f})()}function sl(){this.jb=o(3),this.Wc=d([4,8],fr),this.Xc=d([4,17],fr)}function Xi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Pr(){this.ld=this.La=this.dd=this.tc=0}function Ws(){this.Na=this.la=0}function xo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ui(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Li(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pr),this.Y=0,this.ya=Array(new ui),this.aa=0,this.l=new Ps}function es(){this.y=o(16),this.f=o(8),this.ea=o(8)}function di(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new ci,this.Kc=new Ei,this.ed=new Xi,this.Qa=new nl,this.Ic=this.$c=this.Aa=0,this.D=new Li,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,P),this.ia=0,this.pb=u(4,xo),this.Pa=new sl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new es),this.Hd=0,this.rb=Array(new Ws),this.sb=0,this.wa=Array(new Pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ui),this.L=this.aa=0,this.gd=d([4,2],Pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Br(f,v){return 0>f?0:f>v?v:f}function Ps(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function yo(){var f=new di;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,ao||(ao=Vs)),f}function qr(f,v,_){return f.a==0&&(f.a=v,f.sc=_,f.cb=0),0}function Hs(f,v,_){return 3<=_&&f[v+0]==157&&f[v+1]==1&&f[v+2]==42}function Mn(f,v){if(f==null)return 0;if(f.a=0,f.sc="OK",v==null)return qr(f,2,"null VP8Io passed to VP8GetHeaders()");var _=v.data,j=v.w,I=v.ha;if(4>I)return qr(f,7,"Truncated header.");var q=_[j+0]|_[j+1]<<8|_[j+2]<<16,W=f.Od;if(W.Rb=!(1&q),W.td=q>>1&7,W.yd=q>>4&1,W.ub=q>>5,3<W.td)return qr(f,3,"Incorrect keyframe parameters.");if(!W.yd)return qr(f,4,"Frame not displayable.");j+=3,I-=3;var K=f.Kc;if(W.Rb){if(7>I)return qr(f,7,"cannot parse picture header");if(!Hs(_,j,I))return qr(f,3,"Bad code word");K.c=16383&(_[j+4]<<8|_[j+3]),K.Td=_[j+4]>>6,K.i=16383&(_[j+6]<<8|_[j+5]),K.Ud=_[j+6]>>6,j+=7,I-=7,f.za=K.c+15>>4,f.Ub=K.i+15>>4,v.width=K.c,v.height=K.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,a((q=f.Pa).jb,0,255,q.jb.length),e((q=f.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,a(q.Zb,0,0,q.Zb.length),a(q.Lb,0,0,q.Lb)}if(W.ub>I)return qr(f,7,"bad partition length");X(q=f.m,_,j,W.ub),j+=W.ub,I-=W.ub,W.Rb&&(K.Ld=xe(q),K.Kd=xe(q)),K=f.Qa;var Z,ae=f.Pa;if(e(q!=null),e(K!=null),K.Cb=xe(q),K.Cb){if(K.Bb=xe(q),xe(q)){for(K.Fb=xe(q),Z=0;4>Z;++Z)K.Zb[Z]=xe(q)?G(q,7):0;for(Z=0;4>Z;++Z)K.Lb[Z]=xe(q)?G(q,6):0}if(K.Bb)for(Z=0;3>Z;++Z)ae.jb[Z]=xe(q)?pe(q,8):255}else K.Bb=0;if(q.Ka)return qr(f,3,"cannot parse segment header");if((K=f.ed).zd=xe(q),K.Tb=pe(q,6),K.wb=pe(q,3),K.Pc=xe(q),K.Pc&&xe(q)){for(ae=0;4>ae;++ae)xe(q)&&(K.vd[ae]=G(q,6));for(ae=0;4>ae;++ae)xe(q)&&(K.od[ae]=G(q,6))}if(f.L=K.Tb==0?0:K.zd?1:2,q.Ka)return qr(f,3,"cannot parse filter header");var we=I;if(I=Z=j,j=Z+we,K=we,f.Xb=(1<<pe(f.m,2))-1,we<3*(ae=f.Xb))_=7;else{for(Z+=3*ae,K-=3*ae,we=0;we<ae;++we){var Ae=_[I+0]|_[I+1]<<8|_[I+2]<<16;Ae>K&&(Ae=K),X(f.Jc[+we],_,Z,Ae),Z+=Ae,K-=Ae,I+=3}X(f.Jc[+ae],_,Z,K),_=Z<j?0:5}if(_!=0)return qr(f,_,"cannot parse partitions");for(_=pe(Z=f.m,7),I=xe(Z)?G(Z,4):0,j=xe(Z)?G(Z,4):0,K=xe(Z)?G(Z,4):0,ae=xe(Z)?G(Z,4):0,Z=xe(Z)?G(Z,4):0,we=f.Qa,Ae=0;4>Ae;++Ae){if(we.Cb){var oe=we.Zb[Ae];we.Fb||(oe+=_)}else{if(0<Ae){f.pb[Ae]=f.pb[0];continue}oe=_}var Ne=f.pb[Ae];Ne.Sc[0]=Eo[Br(oe+I,127)],Ne.Sc[1]=gl[Br(oe+0,127)],Ne.Eb[0]=2*Eo[Br(oe+j,127)],Ne.Eb[1]=101581*gl[Br(oe+K,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=Eo[Br(oe+ae,117)],Ne.Qc[1]=gl[Br(oe+Z,127)],Ne.lc=oe+Z}if(!W.Rb)return qr(f,4,"Not a key frame.");for(xe(q),W=f.Pa,_=0;4>_;++_){for(I=0;8>I;++I)for(j=0;3>j;++j)for(K=0;11>K;++K)ae=ge(q,Hd[_][I][j][K])?pe(q,8):Lu[_][I][j][K],W.Wc[_][I].Yb[j][K]=ae;for(I=0;17>I;++I)W.Xc[_][I]=W.Wc[_][Kc[I]]}return f.kc=xe(q),f.kc&&(f.Bd=pe(q,8)),f.cb=1}function Vs(f,v,_,j,I,q,W){var K=v[I].Yb[_];for(_=0;16>I;++I){if(!ge(f,K[_+0]))return I;for(;!ge(f,K[_+1]);)if(K=v[++I].Yb[0],_=0,I==16)return 16;var Z=v[I+1].Yb;if(ge(f,K[_+2])){var ae=f,we=0;if(ge(ae,(oe=K)[(Ae=_)+3]))if(ge(ae,oe[Ae+6])){for(K=0,Ae=2*(we=ge(ae,oe[Ae+8]))+(oe=ge(ae,oe[Ae+9+we])),we=0,oe=Gc[Ae];oe[K];++K)we+=we+ge(ae,oe[K]);we+=3+(8<<Ae)}else ge(ae,oe[Ae+7])?(we=7+2*ge(ae,165),we+=ge(ae,145)):we=5+ge(ae,159);else we=ge(ae,oe[Ae+4])?3+ge(ae,oe[Ae+5]):2;K=Z[2]}else we=1,K=Z[1];Z=W+Yc[I],0>(ae=f).b&&ye(ae);var Ae,oe=ae.b,Ne=(Ae=ae.Ca>>1)-(ae.I>>oe)>>31;--ae.b,ae.Ca+=Ne,ae.Ca|=1,ae.I-=(Ae+1&Ne)<<oe,q[Z]=((we^Ne)-Ne)*j[(0<I)+0]}return 16}function Di(f){var v=f.rb[f.sb-1];v.la=0,v.Na=0,a(f.zc,0,0,f.zc.length),f.ja=0}function Un(f,v,_,j,I){I=f[v+_+32*j]+(I>>3),f[v+_+32*j]=-256&I?0>I?0:255:I}function Vr(f,v,_,j,I,q){Un(f,v,0,_,j+I),Un(f,v,1,_,j+q),Un(f,v,2,_,j-q),Un(f,v,3,_,j-I)}function Cs(f){return(20091*f>>16)+f}function Va(f,v,_,j){var I,q=0,W=o(16);for(I=0;4>I;++I){var K=f[v+0]+f[v+8],Z=f[v+0]-f[v+8],ae=(35468*f[v+4]>>16)-Cs(f[v+12]),we=Cs(f[v+4])+(35468*f[v+12]>>16);W[q+0]=K+we,W[q+1]=Z+ae,W[q+2]=Z-ae,W[q+3]=K-we,q+=4,v++}for(I=q=0;4>I;++I)K=(f=W[q+0]+4)+W[q+8],Z=f-W[q+8],ae=(35468*W[q+4]>>16)-Cs(W[q+12]),Un(_,j,0,0,K+(we=Cs(W[q+4])+(35468*W[q+12]>>16))),Un(_,j,1,0,Z+ae),Un(_,j,2,0,Z-ae),Un(_,j,3,0,K-we),q++,j+=32}function Ti(f,v,_,j){var I=f[v+0]+4,q=35468*f[v+4]>>16,W=Cs(f[v+4]),K=35468*f[v+1]>>16;Vr(_,j,0,I+W,f=Cs(f[v+1]),K),Vr(_,j,1,I+q,f,K),Vr(_,j,2,I-q,f,K),Vr(_,j,3,I-W,f,K)}function Oi(f,v,_,j,I){Va(f,v,_,j),I&&Va(f,v+16,_,j+4)}function Es(f,v,_,j){to(f,v+0,_,j,1),to(f,v+32,_,j+128,1)}function Ii(f,v,_,j){var I;for(f=f[v+0]+4,I=0;4>I;++I)for(v=0;4>v;++v)Un(_,j,v,I,f)}function Jt(f,v,_,j){f[v+0]&&ir(f,v+0,_,j),f[v+16]&&ir(f,v+16,_,j+4),f[v+32]&&ir(f,v+32,_,j+128),f[v+48]&&ir(f,v+48,_,j+128+4)}function Fi(f,v,_,j){var I,q=o(16);for(I=0;4>I;++I){var W=f[v+0+I]+f[v+12+I],K=f[v+4+I]+f[v+8+I],Z=f[v+4+I]-f[v+8+I],ae=f[v+0+I]-f[v+12+I];q[0+I]=W+K,q[8+I]=W-K,q[4+I]=ae+Z,q[12+I]=ae-Z}for(I=0;4>I;++I)W=(f=q[0+4*I]+3)+q[3+4*I],K=q[1+4*I]+q[2+4*I],Z=q[1+4*I]-q[2+4*I],ae=f-q[3+4*I],_[j+0]=W+K>>3,_[j+16]=ae+Z>>3,_[j+32]=W-K>>3,_[j+48]=ae-Z>>3,j+=64}function hi(f,v,_){var j,I=v-32,q=os,W=255-f[I-1];for(j=0;j<_;++j){var K,Z=q,ae=W+f[v-1];for(K=0;K<_;++K)f[v+K]=Z[ae+f[I+K]];v+=32}}function Qi(f,v){hi(f,v,4)}function Ga(f,v){hi(f,v,8)}function Ya(f,v){hi(f,v,16)}function Ls(f,v){var _;for(_=0;16>_;++_)s(f,v+32*_,f,v-32,16)}function Sa(f,v){var _;for(_=16;0<_;--_)a(f,v,f[v-1],16),v+=32}function bn(f,v,_){var j;for(j=0;16>j;++j)a(v,_+32*j,f,16)}function ts(f,v){var _,j=16;for(_=0;16>_;++_)j+=f[v-1+32*_]+f[v+_-32];bn(j>>5,f,v)}function Bn(f,v){var _,j=8;for(_=0;16>_;++_)j+=f[v-1+32*_];bn(j>>4,f,v)}function fs(f,v){var _,j=8;for(_=0;16>_;++_)j+=f[v+_-32];bn(j>>4,f,v)}function Zi(f,v){bn(128,f,v)}function jt(f,v,_){return f+2*v+_+2>>2}function Gs(f,v){var _,j=v-32;for(j=new Uint8Array([jt(f[j-1],f[j+0],f[j+1]),jt(f[j+0],f[j+1],f[j+2]),jt(f[j+1],f[j+2],f[j+3]),jt(f[j+2],f[j+3],f[j+4])]),_=0;4>_;++_)s(f,v+32*_,j,0,j.length)}function il(f,v){var _=f[v-1],j=f[v-1+32],I=f[v-1+64],q=f[v-1+96];Ie(f,v+0,16843009*jt(f[v-1-32],_,j)),Ie(f,v+32,16843009*jt(_,j,I)),Ie(f,v+64,16843009*jt(j,I,q)),Ie(f,v+96,16843009*jt(I,q,q))}function bo(f,v){var _,j=4;for(_=0;4>_;++_)j+=f[v+_-32]+f[v-1+32*_];for(j>>=3,_=0;4>_;++_)a(f,v+32*_,j,4)}function rs(f,v){var _=f[v-1+0],j=f[v-1+32],I=f[v-1+64],q=f[v-1-32],W=f[v+0-32],K=f[v+1-32],Z=f[v+2-32],ae=f[v+3-32];f[v+0+96]=jt(j,I,f[v-1+96]),f[v+1+96]=f[v+0+64]=jt(_,j,I),f[v+2+96]=f[v+1+64]=f[v+0+32]=jt(q,_,j),f[v+3+96]=f[v+2+64]=f[v+1+32]=f[v+0+0]=jt(W,q,_),f[v+3+64]=f[v+2+32]=f[v+1+0]=jt(K,W,q),f[v+3+32]=f[v+2+0]=jt(Z,K,W),f[v+3+0]=jt(ae,Z,K)}function Ys(f,v){var _=f[v+1-32],j=f[v+2-32],I=f[v+3-32],q=f[v+4-32],W=f[v+5-32],K=f[v+6-32],Z=f[v+7-32];f[v+0+0]=jt(f[v+0-32],_,j),f[v+1+0]=f[v+0+32]=jt(_,j,I),f[v+2+0]=f[v+1+32]=f[v+0+64]=jt(j,I,q),f[v+3+0]=f[v+2+32]=f[v+1+64]=f[v+0+96]=jt(I,q,W),f[v+3+32]=f[v+2+64]=f[v+1+96]=jt(q,W,K),f[v+3+64]=f[v+2+96]=jt(W,K,Z),f[v+3+96]=jt(K,Z,Z)}function wo(f,v){var _=f[v-1+0],j=f[v-1+32],I=f[v-1+64],q=f[v-1-32],W=f[v+0-32],K=f[v+1-32],Z=f[v+2-32],ae=f[v+3-32];f[v+0+0]=f[v+1+64]=q+W+1>>1,f[v+1+0]=f[v+2+64]=W+K+1>>1,f[v+2+0]=f[v+3+64]=K+Z+1>>1,f[v+3+0]=Z+ae+1>>1,f[v+0+96]=jt(I,j,_),f[v+0+64]=jt(j,_,q),f[v+0+32]=f[v+1+96]=jt(_,q,W),f[v+1+32]=f[v+2+96]=jt(q,W,K),f[v+2+32]=f[v+3+96]=jt(W,K,Z),f[v+3+32]=jt(K,Z,ae)}function ja(f,v){var _=f[v+0-32],j=f[v+1-32],I=f[v+2-32],q=f[v+3-32],W=f[v+4-32],K=f[v+5-32],Z=f[v+6-32],ae=f[v+7-32];f[v+0+0]=_+j+1>>1,f[v+1+0]=f[v+0+64]=j+I+1>>1,f[v+2+0]=f[v+1+64]=I+q+1>>1,f[v+3+0]=f[v+2+64]=q+W+1>>1,f[v+0+32]=jt(_,j,I),f[v+1+32]=f[v+0+96]=jt(j,I,q),f[v+2+32]=f[v+1+96]=jt(I,q,W),f[v+3+32]=f[v+2+96]=jt(q,W,K),f[v+3+64]=jt(W,K,Z),f[v+3+96]=jt(K,Z,ae)}function ea(f,v){var _=f[v-1+0],j=f[v-1+32],I=f[v-1+64],q=f[v-1+96];f[v+0+0]=_+j+1>>1,f[v+2+0]=f[v+0+32]=j+I+1>>1,f[v+2+32]=f[v+0+64]=I+q+1>>1,f[v+1+0]=jt(_,j,I),f[v+3+0]=f[v+1+32]=jt(j,I,q),f[v+3+32]=f[v+1+64]=jt(I,q,q),f[v+3+64]=f[v+2+64]=f[v+0+96]=f[v+1+96]=f[v+2+96]=f[v+3+96]=q}function Ka(f,v){var _=f[v-1+0],j=f[v-1+32],I=f[v-1+64],q=f[v-1+96],W=f[v-1-32],K=f[v+0-32],Z=f[v+1-32],ae=f[v+2-32];f[v+0+0]=f[v+2+32]=_+W+1>>1,f[v+0+32]=f[v+2+64]=j+_+1>>1,f[v+0+64]=f[v+2+96]=I+j+1>>1,f[v+0+96]=q+I+1>>1,f[v+3+0]=jt(K,Z,ae),f[v+2+0]=jt(W,K,Z),f[v+1+0]=f[v+3+32]=jt(_,W,K),f[v+1+32]=f[v+3+64]=jt(j,_,W),f[v+1+64]=f[v+3+96]=jt(I,j,_),f[v+1+96]=jt(q,I,j)}function Ds(f,v){var _;for(_=0;8>_;++_)s(f,v+32*_,f,v-32,8)}function ta(f,v){var _;for(_=0;8>_;++_)a(f,v,f[v-1],8),v+=32}function qn(f,v,_){var j;for(j=0;8>j;++j)a(v,_+32*j,f,8)}function Aa(f,v){var _,j=8;for(_=0;8>_;++_)j+=f[v+_-32]+f[v-1+32*_];qn(j>>4,f,v)}function ra(f,v){var _,j=4;for(_=0;8>_;++_)j+=f[v+_-32];qn(j>>3,f,v)}function Pa(f,v){var _,j=4;for(_=0;8>_;++_)j+=f[v-1+32*_];qn(j>>3,f,v)}function na(f,v){qn(128,f,v)}function ps(f,v,_){var j=f[v-_],I=f[v+0],q=3*(I-j)+qi[1020+f[v-2*_]-f[v+_]],W=Po[112+(q+4>>3)];f[v-_]=os[255+j+Po[112+(q+3>>3)]],f[v+0]=os[255+I-W]}function sa(f,v,_,j){var I=f[v+0],q=f[v+_];return Zs[255+f[v-2*_]-f[v-_]]>j||Zs[255+q-I]>j}function Ca(f,v,_,j){return 4*Zs[255+f[v-_]-f[v+0]]+Zs[255+f[v-2*_]-f[v+_]]<=j}function Ts(f,v,_,j,I){var q=f[v-3*_],W=f[v-2*_],K=f[v-_],Z=f[v+0],ae=f[v+_],we=f[v+2*_],Ae=f[v+3*_];return 4*Zs[255+K-Z]+Zs[255+W-ae]>j?0:Zs[255+f[v-4*_]-q]<=I&&Zs[255+q-W]<=I&&Zs[255+W-K]<=I&&Zs[255+Ae-we]<=I&&Zs[255+we-ae]<=I&&Zs[255+ae-Z]<=I}function fi(f,v,_,j){var I=2*j+1;for(j=0;16>j;++j)Ca(f,v+j,_,I)&&ps(f,v+j,_)}function pi(f,v,_,j){var I=2*j+1;for(j=0;16>j;++j)Ca(f,v+j*_,1,I)&&ps(f,v+j*_,1)}function mi(f,v,_,j){var I;for(I=3;0<I;--I)fi(f,v+=4*_,_,j)}function gi(f,v,_,j){var I;for(I=3;0<I;--I)pi(f,v+=4,_,j)}function ms(f,v,_,j,I,q,W,K){for(q=2*q+1;0<I--;){if(Ts(f,v,_,q,W))if(sa(f,v,_,K))ps(f,v,_);else{var Z=f,ae=v,we=_,Ae=Z[ae-2*we],oe=Z[ae-we],Ne=Z[ae+0],je=Z[ae+we],Me=Z[ae+2*we],Ce=27*(Fe=qi[1020+3*(Ne-oe)+qi[1020+Ae-je]])+63>>7,Oe=18*Fe+63>>7,Fe=9*Fe+63>>7;Z[ae-3*we]=os[255+Z[ae-3*we]+Fe],Z[ae-2*we]=os[255+Ae+Oe],Z[ae-we]=os[255+oe+Ce],Z[ae+0]=os[255+Ne-Ce],Z[ae+we]=os[255+je-Oe],Z[ae+2*we]=os[255+Me-Fe]}v+=j}}function Ks(f,v,_,j,I,q,W,K){for(q=2*q+1;0<I--;){if(Ts(f,v,_,q,W))if(sa(f,v,_,K))ps(f,v,_);else{var Z=f,ae=v,we=_,Ae=Z[ae-we],oe=Z[ae+0],Ne=Z[ae+we],je=Po[112+(4+(Me=3*(oe-Ae))>>3)],Me=Po[112+(Me+3>>3)],Ce=je+1>>1;Z[ae-2*we]=os[255+Z[ae-2*we]+Ce],Z[ae-we]=os[255+Ae+Me],Z[ae+0]=os[255+oe-je],Z[ae+we]=os[255+Ne-Ce]}v+=j}}function Or(f,v,_,j,I,q){ms(f,v,_,1,16,j,I,q)}function ns(f,v,_,j,I,q){ms(f,v,1,_,16,j,I,q)}function Os(f,v,_,j,I,q){var W;for(W=3;0<W;--W)Ks(f,v+=4*_,_,1,16,j,I,q)}function h(f,v,_,j,I,q){var W;for(W=3;0<W;--W)Ks(f,v+=4,1,_,16,j,I,q)}function N(f,v,_,j,I,q,W,K){ms(f,v,I,1,8,q,W,K),ms(_,j,I,1,8,q,W,K)}function D(f,v,_,j,I,q,W,K){ms(f,v,1,I,8,q,W,K),ms(_,j,1,I,8,q,W,K)}function M(f,v,_,j,I,q,W,K){Ks(f,v+4*I,I,1,8,q,W,K),Ks(_,j+4*I,I,1,8,q,W,K)}function se(f,v,_,j,I,q,W,K){Ks(f,v+4,1,I,8,q,W,K),Ks(_,j+4,1,I,8,q,W,K)}function be(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new nr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Se(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Te(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function De(){this.ua=0,this.Wa=new bt,this.vb=new bt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new te}function $e(){this.xb=this.a=0,this.l=new Ps,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new De,this.ab=0,this.gc=u(4,Te),this.Oc=0}function qe(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ps,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xe(f,v,_,j,I,q,W){for(f=f==null?0:f[v+0],v=0;v<W;++v)I[q+v]=f+_[j+v]&255,f=I[q+v]}function ft(f,v,_,j,I,q,W){var K;if(f==null)Xe(null,null,_,j,I,q,W);else for(K=0;K<W;++K)I[q+K]=f[v+K]+_[j+K]&255}function Gt(f,v,_,j,I,q,W){if(f==null)Xe(null,null,_,j,I,q,W);else{var K,Z=f[v+0],ae=Z,we=Z;for(K=0;K<W;++K)ae=we+(Z=f[v+K])-ae,we=_[j+K]+(-256&ae?0>ae?0:255:ae)&255,ae=Z,I[q+K]=we}}function Dt(f,v,_,j){var I=v.width,q=v.o;if(e(f!=null&&v!=null),0>_||0>=j||_+j>q)return null;if(!f.Cc){if(f.ga==null){var W;if(f.ga=new qe,(W=f.ga==null)||(W=v.width*v.o,e(f.Gb.length==0),f.Gb=o(W),f.Uc=0,f.Gb==null?W=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,W=1),W=!W),!W){W=f.ga;var K=f.Fa,Z=f.P,ae=f.qc,we=f.mb,Ae=f.nb,oe=Z+1,Ne=ae-1,je=W.l;if(e(K!=null&&we!=null&&v!=null),zn[0]=null,zn[1]=Xe,zn[2]=ft,zn[3]=Gt,W.ca=we,W.tb=Ae,W.c=v.width,W.i=v.height,e(0<W.c&&0<W.i),1>=ae)v=0;else if(W.$a=3&K[Z+0],W.Z=K[Z+0]>>2&3,W.Lc=K[Z+0]>>4&3,Z=K[Z+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||Z)v=0;else if(je.put=Nt,je.ac=Jn,je.bc=Rn,je.ma=W,je.width=v.width,je.height=v.height,je.Da=v.Da,je.v=v.v,je.va=v.va,je.j=v.j,je.o=v.o,W.$a)e:{e(W.$a==1),v=Cn();t:for(;;){if(v==null){v=0;break e}if(e(W!=null),W.mc=v,v.c=W.c,v.i=W.i,v.l=W.l,v.l.ma=W,v.l.width=W.c,v.l.height=W.i,v.a=0,ce(v.m,K,oe,Ne),!En(W.c,W.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&An(v.s)?(W.ic=1,K=v.c*v.i,v.Ta=null,v.Ua=0,v.V=o(K),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(W.ic=0,v=$s(v,W.c)),!v))break t;v=1;break e}W.mc=null,v=0}else v=Ne>=W.c*W.i;W=!v}if(W)return null;f.ga.Lc!=1?f.Ga=0:j=q-_}e(f.ga!=null),e(_+j<=q);e:{if(v=(K=f.ga).c,q=K.l.o,K.$a==0){if(oe=f.rc,Ne=f.Vc,je=f.Fa,Z=f.P+1+_*v,ae=f.mb,we=f.nb+_*v,e(Z<=f.P+f.qc),K.Z!=0)for(e(zn[K.Z]!=null),W=0;W<j;++W)zn[K.Z](oe,Ne,je,Z,ae,we,v),oe=ae,Ne=we,we+=v,Z+=v;else for(W=0;W<j;++W)s(ae,we,je,Z,v),oe=ae,Ne=we,we+=v,Z+=v;f.rc=oe,f.Vc=Ne}else{if(e(K.mc!=null),v=_+j,e((W=K.mc)!=null),e(v<=W.i),W.C>=v)v=1;else if(K.ic||is(),K.ic){K=W.V,oe=W.Ba,Ne=W.c;var Me=W.i,Ce=(je=1,Z=W.$/Ne,ae=W.$%Ne,we=W.m,Ae=W.s,W.$),Oe=Ne*Me,Fe=Ne*v,Ue=Ae.wc,Be=Ce<Fe?Ur(Ae,ae,Z):null;e(Ce<=Oe),e(v<=Me),e(An(Ae));t:for(;;){for(;!we.h&&Ce<Fe;){if(ae&Ue||(Be=Ur(Ae,ae,Z)),e(Be!=null),me(we),256>(Me=hr(Be.G[0],Be.H[0],we)))K[oe+Ce]=Me,++Ce,++ae>=Ne&&(ae=0,++Z<=v&&!(Z%16)&&Hr(W,Z));else{if(!(280>Me)){je=0;break t}Me=hn(Me-256,we);var gt,rt=hr(Be.G[4],Be.H[4],we);if(me(we),!(Ce>=(rt=Xn(Ne,rt=hn(rt,we)))&&Oe-Ce>=Me)){je=0;break t}for(gt=0;gt<Me;++gt)K[oe+Ce+gt]=K[oe+Ce+gt-rt];for(Ce+=Me,ae+=Me;ae>=Ne;)ae-=Ne,++Z<=v&&!(Z%16)&&Hr(W,Z);Ce<Fe&&ae&Ue&&(Be=Ur(Ae,ae,Z))}e(we.h==ie(we))}Hr(W,Z>v?v:Z);break t}!je||we.h&&Ce<Oe?(je=0,W.a=we.h?5:3):W.$=Ce,v=je}else v=hs(W,W.V,W.Ba,W.c,W.i,v,li);if(!v){j=0;break e}}_+j>=q&&(f.Cc=1),j=1}if(!j)return null;if(f.Cc&&((j=f.ga)!=null&&(j.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+_*I}function rr(f,v,_,j,I,q){for(;0<I--;){var W,K=f,Z=v+(_?1:0),ae=f,we=v+(_?0:3);for(W=0;W<j;++W){var Ae=ae[we+4*W];Ae!=255&&(Ae*=32897,K[Z+4*W+0]=K[Z+4*W+0]*Ae>>23,K[Z+4*W+1]=K[Z+4*W+1]*Ae>>23,K[Z+4*W+2]=K[Z+4*W+2]*Ae>>23)}v+=q}}function wr(f,v,_,j,I){for(;0<j--;){var q;for(q=0;q<_;++q){var W=f[v+2*q+0],K=15&(ae=f[v+2*q+1]),Z=4369*K,ae=(240&ae|ae>>4)*Z>>16;f[v+2*q+0]=(240&W|W>>4)*Z>>16&240|(15&W|W<<4)*Z>>16>>4&15,f[v+2*q+1]=240&ae|K}v+=I}}function Cr(f,v,_,j,I,q,W,K){var Z,ae,we=255;for(ae=0;ae<I;++ae){for(Z=0;Z<j;++Z){var Ae=f[v+Z];q[W+4*Z]=Ae,we&=Ae}v+=_,W+=K}return we!=255}function ss(f,v,_,j,I){var q;for(q=0;q<I;++q)_[j+q]=f[v+q]>>8}function is(){no=rr,Bc=wr,ul=Cr,qc=ss}function Js(f,v,_){J[f]=function(j,I,q,W,K,Z,ae,we,Ae,oe,Ne,je,Me,Ce,Oe,Fe,Ue){var Be,gt=Ue-1>>1,rt=K[Z+0]|ae[we+0]<<16,qt=Ae[oe+0]|Ne[je+0]<<16;e(j!=null);var ct=3*rt+qt+131074>>2;for(v(j[I+0],255&ct,ct>>16,Me,Ce),q!=null&&(ct=3*qt+rt+131074>>2,v(q[W+0],255&ct,ct>>16,Oe,Fe)),Be=1;Be<=gt;++Be){var Xt=K[Z+Be]|ae[we+Be]<<16,Kr=Ae[oe+Be]|Ne[je+Be]<<16,zt=rt+Xt+qt+Kr+524296,nt=zt+2*(Xt+qt)>>3;ct=nt+rt>>1,rt=(zt=zt+2*(rt+Kr)>>3)+Xt>>1,v(j[I+2*Be-1],255&ct,ct>>16,Me,Ce+(2*Be-1)*_),v(j[I+2*Be-0],255&rt,rt>>16,Me,Ce+(2*Be-0)*_),q!=null&&(ct=zt+qt>>1,rt=nt+Kr>>1,v(q[W+2*Be-1],255&ct,ct>>16,Oe,Fe+(2*Be-1)*_),v(q[W+2*Be+0],255&rt,rt>>16,Oe,Fe+(2*Be+0)*_)),rt=Xt,qt=Kr}1&Ue||(ct=3*rt+qt+131074>>2,v(j[I+Ue-1],255&ct,ct>>16,Me,Ce+(Ue-1)*_),q!=null&&(ct=3*qt+rt+131074>>2,v(q[W+Ue-1],255&ct,ct>>16,Oe,Fe+(Ue-1)*_)))}}function Zt(){xs[Vl]=Vd,xs[Ia]=Fa,xs[Au]=Gd,xs[dl]=Do,xs[hl]=oo,xs[_r]=vl,xs[Gl]=Jc,xs[Co]=Fa,xs[so]=Do,xs[fl]=oo,xs[pl]=vl}function Tt(f){return f&-16384?0>f?0:255:f>>Ra}function pr(f,v){return Tt((19077*f>>8)+(26149*v>>8)-14234)}function zr(f,v,_){return Tt((19077*f>>8)-(6419*v>>8)-(13320*_>>8)+8708)}function Ln(f,v){return Tt((19077*f>>8)+(33050*v>>8)-17685)}function fn(f,v,_,j,I){j[I+0]=pr(f,_),j[I+1]=zr(f,v,_),j[I+2]=Ln(f,v)}function mr(f,v,_,j,I){j[I+0]=Ln(f,v),j[I+1]=zr(f,v,_),j[I+2]=pr(f,_)}function Xs(f,v,_,j,I){var q=zr(f,v,_);v=q<<3&224|Ln(f,v)>>3,j[I+0]=248&pr(f,_)|q>>5,j[I+1]=v}function Ja(f,v,_,j,I){var q=240&Ln(f,v)|15;j[I+0]=240&pr(f,_)|zr(f,v,_)>>4,j[I+1]=q}function al(f,v,_,j,I){j[I+0]=255,fn(f,v,_,j,I+1)}function ol(f,v,_,j,I){mr(f,v,_,j,I),j[I+3]=255}function as(f,v,_,j,I){fn(f,v,_,j,I),j[I+3]=255}function vi(f,v,_){J[f]=function(j,I,q,W,K,Z,ae,we,Ae){for(var oe=we+(-2&Ae)*_;we!=oe;)v(j[I+0],q[W+0],K[Z+0],ae,we),v(j[I+1],q[W+0],K[Z+0],ae,we+_),I+=2,++W,++Z,we+=2*_;1&Ae&&v(j[I+0],q[W+0],K[Z+0],ae,we)}}function Ri(f,v,_){return _==0?f==0?v==0?6:5:v==0?4:0:_}function $l(f,v,_,j,I){switch(f>>>30){case 3:to(v,_,j,I,0);break;case 2:Gr(v,_,j,I);break;case 1:ir(v,_,j,I)}}function Is(f,v){var _,j,I=v.M,q=v.Nb,W=f.oc,K=f.pc+40,Z=f.oc,ae=f.pc+584,we=f.oc,Ae=f.pc+600;for(_=0;16>_;++_)W[K+32*_-1]=129;for(_=0;8>_;++_)Z[ae+32*_-1]=129,we[Ae+32*_-1]=129;for(0<I?W[K-1-32]=Z[ae-1-32]=we[Ae-1-32]=129:(a(W,K-32-1,127,21),a(Z,ae-32-1,127,9),a(we,Ae-32-1,127,9)),j=0;j<f.za;++j){var oe=v.ya[v.aa+j];if(0<j){for(_=-1;16>_;++_)s(W,K+32*_-4,W,K+32*_+12,4);for(_=-1;8>_;++_)s(Z,ae+32*_-4,Z,ae+32*_+4,4),s(we,Ae+32*_-4,we,Ae+32*_+4,4)}var Ne=f.Gd,je=f.Hd+j,Me=oe.ad,Ce=oe.Hc;if(0<I&&(s(W,K-32,Ne[je].y,0,16),s(Z,ae-32,Ne[je].f,0,8),s(we,Ae-32,Ne[je].ea,0,8)),oe.Za){var Oe=W,Fe=K-32+16;for(0<I&&(j>=f.za-1?a(Oe,Fe,Ne[je].y[15],4):s(Oe,Fe,Ne[je+1].y,0,4)),_=0;4>_;_++)Oe[Fe+128+_]=Oe[Fe+256+_]=Oe[Fe+384+_]=Oe[Fe+0+_];for(_=0;16>_;++_,Ce<<=2)Oe=W,Fe=K+Xc[_],ei[oe.Ob[_]](Oe,Fe),$l(Ce,Me,16*+_,Oe,Fe)}else if(Oe=Ri(j,I,oe.Ob[0]),ls[Oe](W,K),Ce!=0)for(_=0;16>_;++_,Ce<<=2)$l(Ce,Me,16*+_,W,K+Xc[_]);for(_=oe.Gc,Oe=Ri(j,I,oe.Dd),vs[Oe](Z,ae),vs[Oe](we,Ae),Ce=Me,Oe=Z,Fe=ae,255&(oe=0|_)&&(170&oe?gs(Ce,256,Oe,Fe):vr(Ce,256,Oe,Fe)),oe=we,Ce=Ae,255&(_>>=8)&&(170&_?gs(Me,320,oe,Ce):vr(Me,320,oe,Ce)),I<f.Ub-1&&(s(Ne[je].y,0,W,K+480,16),s(Ne[je].f,0,Z,ae+224,8),s(Ne[je].ea,0,we,Ae+224,8)),_=8*q*f.B,Ne=f.sa,je=f.ta+16*j+16*q*f.R,Me=f.qa,oe=f.ra+8*j+_,Ce=f.Ha,Oe=f.Ia+8*j+_,_=0;16>_;++_)s(Ne,je+_*f.R,W,K+32*_,16);for(_=0;8>_;++_)s(Me,oe+_*f.B,Z,ae+32*_,8),s(Ce,Oe+_*f.B,we,Ae+32*_,8)}}function Ea(f,v,_,j,I,q,W,K,Z){var ae=[0],we=[0],Ae=0,oe=Z!=null?Z.kd:0,Ne=Z??new Se;if(f==null||12>_)return 7;Ne.data=f,Ne.w=v,Ne.ha=_,v=[v],_=[_],Ne.gb=[Ne.gb];e:{var je=v,Me=_,Ce=Ne.gb;if(e(f!=null),e(Me!=null),e(Ce!=null),Ce[0]=0,12<=Me[0]&&!t(f,je[0],"RIFF")){if(t(f,je[0]+8,"WEBP")){Ce=3;break e}var Oe=Ve(f,je[0]+4);if(12>Oe||4294967286<Oe){Ce=3;break e}if(oe&&Oe>Me[0]-8){Ce=7;break e}Ce[0]=Oe,je[0]+=12,Me[0]-=12}Ce=0}if(Ce!=0)return Ce;for(Oe=0<Ne.gb[0],_=_[0];;){e:{var Fe=f;Me=v,Ce=_;var Ue=ae,Be=we,gt=je=[0];if((ct=Ae=[Ae])[0]=0,8>Ce[0])Ce=7;else{if(!t(Fe,Me[0],"VP8X")){if(Ve(Fe,Me[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var rt=Ve(Fe,Me[0]+8),qt=1+We(Fe,Me[0]+12);if(2147483648<=qt*(Fe=1+We(Fe,Me[0]+15))){Ce=3;break e}gt!=null&&(gt[0]=rt),Ue!=null&&(Ue[0]=qt),Be!=null&&(Be[0]=Fe),Me[0]+=18,Ce[0]-=18,ct[0]=1}Ce=0}}if(Ae=Ae[0],je=je[0],Ce!=0)return Ce;if(Me=!!(2&je),!Oe&&Ae)return 3;if(q!=null&&(q[0]=!!(16&je)),W!=null&&(W[0]=Me),K!=null&&(K[0]=0),W=ae[0],je=we[0],Ae&&Me&&Z==null){Ce=0;break}if(4>_){Ce=7;break}if(Oe&&Ae||!Oe&&!Ae&&!t(f,v[0],"ALPH")){_=[_],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{rt=f,Ce=v,Oe=_;var ct=Ne.gb;Ue=Ne.na,Be=Ne.P,gt=Ne.Sa,qt=22,e(rt!=null),e(Oe!=null),Fe=Ce[0];var Xt=Oe[0];for(e(Ue!=null),e(gt!=null),Ue[0]=null,Be[0]=null,gt[0]=0;;){if(Ce[0]=Fe,Oe[0]=Xt,8>Xt){Ce=7;break e}var Kr=Ve(rt,Fe+4);if(4294967286<Kr){Ce=3;break e}var zt=8+Kr+1&-2;if(qt+=zt,0<ct&&qt>ct){Ce=3;break e}if(!t(rt,Fe,"VP8 ")||!t(rt,Fe,"VP8L")){Ce=0;break e}if(Xt[0]<zt){Ce=7;break e}t(rt,Fe,"ALPH")||(Ue[0]=rt,Be[0]=Fe+8,gt[0]=Kr),Fe+=zt,Xt-=zt}}if(_=_[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Ce!=0)break}_=[_],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(ct=f,Ce=v,Oe=_,Ue=Ne.gb[0],Be=Ne.Ja,gt=Ne.xa,rt=Ce[0],Fe=!t(ct,rt,"VP8 "),qt=!t(ct,rt,"VP8L"),e(ct!=null),e(Oe!=null),e(Be!=null),e(gt!=null),8>Oe[0])Ce=7;else{if(Fe||qt){if(ct=Ve(ct,rt+4),12<=Ue&&ct>Ue-12){Ce=3;break e}if(oe&&ct>Oe[0]-8){Ce=7;break e}Be[0]=ct,Ce[0]+=8,Oe[0]-=8,gt[0]=qt}else gt[0]=5<=Oe[0]&&ct[rt+0]==47&&!(ct[rt+4]>>5),Be[0]=Oe[0];Ce=0}if(_=_[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],v=v[0],Ce!=0)break;if(4294967286<Ne.Ja)return 3;if(K==null||Me||(K[0]=Ne.xa?2:1),W=[W],je=[je],Ne.xa){if(5>_){Ce=7;break}K=W,oe=je,Me=q,f==null||5>_?f=0:5<=_&&f[v+0]==47&&!(f[v+4]>>5)?(Oe=[0],ct=[0],Ue=[0],ce(Be=new F,f,v,_),ds(Be,Oe,ct,Ue)?(K!=null&&(K[0]=Oe[0]),oe!=null&&(oe[0]=ct[0]),Me!=null&&(Me[0]=Ue[0]),f=1):f=0):f=0}else{if(10>_){Ce=7;break}K=je,f==null||10>_||!Hs(f,v+3,_-3)?f=0:(oe=f[v+0]|f[v+1]<<8|f[v+2]<<16,Me=16383&(f[v+7]<<8|f[v+6]),f=16383&(f[v+9]<<8|f[v+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=Ne.Ja||!Me||!f?f=0:(W&&(W[0]=Me),K&&(K[0]=f),f=1))}if(!f||(W=W[0],je=je[0],Ae&&(ae[0]!=W||we[0]!=je)))return 3;Z!=null&&(Z[0]=Ne,Z.offset=v-Z.w,e(4294967286>v-Z.w),e(Z.offset==Z.ha-_));break}return Ce==0||Ce==7&&Ae&&Z==null?(q!=null&&(q[0]|=Ne.na!=null&&0<Ne.na.length),j!=null&&(j[0]=W),I!=null&&(I[0]=je),0):Ce}function _o(f,v,_){var j=v.width,I=v.height,q=0,W=0,K=j,Z=I;if(v.Da=f!=null&&0<f.Da,v.Da&&(K=f.cd,Z=f.bd,q=f.v,W=f.j,11>_||(q&=-2,W&=-2),0>q||0>W||0>=K||0>=Z||q+K>j||W+Z>I))return 0;if(v.v=q,v.j=W,v.va=q+K,v.o=W+Z,v.U=K,v.T=Z,v.da=f!=null&&0<f.da,v.da){if(!ot(K,Z,_=[f.ib],q=[f.hb]))return 0;v.ib=_[0],v.hb=q[0]}return v.ob=f!=null&&f.ob,v.Kb=f==null||!f.Sd,v.da&&(v.ob=v.ib<3*j/4&&v.hb<3*I/4,v.Kb=0),1}function No(f){if(f==null)return 2;if(11>f.S){var v=f.f.RGBA;v.fb+=(f.height-1)*v.A,v.A=-v.A}else v=f.f.kb,f=f.height,v.O+=(f-1)*v.fa,v.fa=-v.fa,v.N+=(f-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(f-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(f-1)*v.lb,v.lb=-v.lb);return 0}function ia(f,v,_,j){if(j==null||0>=f||0>=v)return 2;if(_!=null){if(_.Da){var I=_.cd,q=_.bd,W=-2&_.v,K=-2&_.j;if(0>W||0>K||0>=I||0>=q||W+I>f||K+q>v)return 2;f=I,v=q}if(_.da){if(!ot(f,v,I=[_.ib],q=[_.hb]))return 2;f=I[0],v=q[0]}}j.width=f,j.height=v;e:{var Z=j.width,ae=j.height;if(f=j.S,0>=Z||0>=ae||!(f>=Vl&&13>f))f=2;else{if(0>=j.Rd&&j.sd==null){W=q=I=v=0;var we=(K=Z*xl[f])*ae;if(11>f||(q=(ae+1)/2*(v=(Z+1)/2),f==12&&(W=(I=Z)*ae)),(ae=o(we+2*q+W))==null){f=1;break e}j.sd=ae,11>f?((Z=j.f.RGBA).eb=ae,Z.fb=0,Z.A=K,Z.size=we):((Z=j.f.kb).y=ae,Z.O=0,Z.fa=K,Z.Fd=we,Z.f=ae,Z.N=0+we,Z.Ab=v,Z.Cd=q,Z.ea=ae,Z.W=0+we+q,Z.Db=v,Z.Ed=q,f==12&&(Z.F=ae,Z.J=0+we+2*q),Z.Tc=W,Z.lb=I)}if(v=1,I=j.S,q=j.width,W=j.height,I>=Vl&&13>I)if(11>I)f=j.f.RGBA,v&=(K=Math.abs(f.A))*(W-1)+q<=f.size,v&=K>=q*xl[I],v&=f.eb!=null;else{f=j.f.kb,K=(q+1)/2,we=(W+1)/2,Z=Math.abs(f.fa),ae=Math.abs(f.Ab);var Ae=Math.abs(f.Db),oe=Math.abs(f.lb),Ne=oe*(W-1)+q;v&=Z*(W-1)+q<=f.Fd,v&=ae*(we-1)+K<=f.Cd,v=(v&=Ae*(we-1)+K<=f.Ed)&Z>=q&ae>=K&Ae>=K,v&=f.y!=null,v&=f.f!=null,v&=f.ea!=null,I==12&&(v&=oe>=q,v&=Ne<=f.Tc,v&=f.F!=null)}else v=0;f=v?0:2}}return f!=0||_!=null&&_.fd&&(f=No(j)),f}var Qs=64,Fs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rs=24,La=32,Mi=8,aa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(f){return f},J.Predictor2=function(f,v,_){return v[_+0]},J.Predictor3=function(f,v,_){return v[_+1]},J.Predictor4=function(f,v,_){return v[_-1]},J.Predictor5=function(f,v,_){return vt(vt(f,v[_+1]),v[_+0])},J.Predictor6=function(f,v,_){return vt(f,v[_-1])},J.Predictor7=function(f,v,_){return vt(f,v[_+0])},J.Predictor8=function(f,v,_){return vt(v[_-1],v[_+0])},J.Predictor9=function(f,v,_){return vt(v[_+0],v[_+1])},J.Predictor10=function(f,v,_){return vt(vt(f,v[_-1]),vt(v[_+0],v[_+1]))},J.Predictor11=function(f,v,_){var j=v[_+0];return 0>=It(j>>24&255,f>>24&255,(v=v[_-1])>>24&255)+It(j>>16&255,f>>16&255,v>>16&255)+It(j>>8&255,f>>8&255,v>>8&255)+It(255&j,255&f,255&v)?j:f},J.Predictor12=function(f,v,_){var j=v[_+0];return(Ut((f>>24&255)+(j>>24&255)-((v=v[_-1])>>24&255))<<24|Ut((f>>16&255)+(j>>16&255)-(v>>16&255))<<16|Ut((f>>8&255)+(j>>8&255)-(v>>8&255))<<8|Ut((255&f)+(255&j)-(255&v)))>>>0},J.Predictor13=function(f,v,_){var j=v[_-1];return(wt((f=vt(f,v[_+0]))>>24&255,j>>24&255)<<24|wt(f>>16&255,j>>16&255)<<16|wt(f>>8&255,j>>8&255)<<8|wt(255&f,255&j))>>>0};var oa=J.PredictorAdd0;J.PredictorAdd1=Ht,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var Ui=J.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Zr,Xa=J.ColorIndexInverseTransform,Bi=J.MapARGB,xi=J.VP8LColorIndexInverseTransformAlpha,Qa=J.MapAlpha,Za=J.VP8LPredictorsAdd=[];Za.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var ko,So,la,Da,Ta,eo,Oa,to,Gr,gs,ir,vr,Yr,an,yi,ll,jo,ca,Wl,Ao,Hl,Uc,cl,ro,no,Bc,ul,qc,zc=o(511),$c=o(2041),Wc=o(225),Hc=o(767),Vc=0,qi=$c,Po=Wc,os=Hc,Zs=zc,Vl=0,Ia=1,Au=2,dl=3,hl=4,_r=5,Gl=6,Co=7,so=8,fl=9,pl=10,ml=[2,3,7],Yl=[3,3,11],io=[280,256,256,256,40],Pu=[0,1,1,1,0],zd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$d=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Cu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Kl=8,Eo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ao=null,Gc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Eu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Lu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Hd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Kc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ls=[],ei=[],vs=[],zi=1,Lo=2,zn=[],xs=[];Js("UpsampleRgbLinePair",fn,3),Js("UpsampleBgrLinePair",mr,3),Js("UpsampleRgbaLinePair",as,4),Js("UpsampleBgraLinePair",ol,4),Js("UpsampleArgbLinePair",al,4),Js("UpsampleRgba4444LinePair",Ja,2),Js("UpsampleRgb565LinePair",Xs,2);var Vd=J.UpsampleRgbLinePair,Gd=J.UpsampleBgrLinePair,Fa=J.UpsampleRgbaLinePair,Do=J.UpsampleBgraLinePair,oo=J.UpsampleArgbLinePair,vl=J.UpsampleRgba4444LinePair,Jc=J.UpsampleRgb565LinePair,ua=16,bi=1<<ua-1,gr=-227,xr=482,Ra=6,Dn=0,ys=o(256),lo=o(256),To=o(256),bs=o(256),Jl=o(xr-gr),Du=o(xr-gr);vi("YuvToRgbRow",fn,3),vi("YuvToBgrRow",mr,3),vi("YuvToRgbaRow",as,4),vi("YuvToBgraRow",ol,4),vi("YuvToArgbRow",al,4),vi("YuvToRgba4444Row",Ja,2),vi("YuvToRgb565Row",Xs,2);var Xc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],co=[0,2,8],Tu=[8,7,6,4,4,2,2,2,1,1,1,1],da=1;this.WebPDecodeRGBA=function(f,v,_,j,I){var q=Ia,W=new be,K=new Bt;W.ba=K,K.S=q,K.width=[K.width],K.height=[K.height];var Z=K.width,ae=K.height,we=new St;if(we==null||f==null)var Ae=2;else e(we!=null),Ae=Ea(f,v,_,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ae!=0?Z=0:(Z!=null&&(Z[0]=we.width[0]),ae!=null&&(ae[0]=we.height[0]),Z=1),Z){K.width=K.width[0],K.height=K.height[0],j!=null&&(j[0]=K.width),I!=null&&(I[0]=K.height);e:{if(j=new Ps,(I=new Se).data=f,I.w=v,I.ha=_,I.kd=1,v=[0],e(I!=null),((f=Ea(I.data,I.w,I.ha,null,null,null,v,null,I))==0||f==7)&&v[0]&&(f=4),(v=f)==0){if(e(W!=null),j.data=I.data,j.w=I.w+I.offset,j.ha=I.ha-I.offset,j.put=Nt,j.ac=Jn,j.bc=Rn,j.ma=W,I.xa){if((f=Cn())==null){W=1;break e}if((function(oe,Ne){var je=[0],Me=[0],Ce=[0];t:for(;;){if(oe==null)return 0;if(Ne==null)return oe.a=2,0;if(oe.l=Ne,oe.a=0,ce(oe.m,Ne.data,Ne.w,Ne.ha),!ds(oe.m,je,Me,Ce)){oe.a=3;break t}if(oe.xb=Lo,Ne.width=je[0],Ne.height=Me[0],!En(je[0],Me[0],1,oe,null))break t;return 1}return e(oe.a!=0),0})(f,j)){if(j=(v=ia(j.width,j.height,W.Oa,W.ba))==0){t:{j=f;r:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((_=j.l)!=null),e((I=_.ma)!=null),j.xb!=0){if(j.ca=I.ba,j.tb=I.tb,e(j.ca!=null),!_o(I.Oa,_,dl)){j.a=2;break r}if(!$s(j,_.width)||_.da)break r;if((_.da||kt(j.ca.S))&&is(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&is()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!re(j.s.vb,j.s.Wa.Xa)){j.a=1;break r}j.xb=0}if(!hs(j,j.V,j.Ba,j.c,j.i,_.o,Qn))break r;I.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(v=f.a)}else v=f.a}else{if((f=new yo)==null){W=1;break e}if(f.Fa=I.na,f.P=I.P,f.qc=I.Sa,Mn(f,j)){if((v=ia(j.width,j.height,W.Oa,W.ba))==0){if(f.Aa=0,_=W.Oa,e((I=f)!=null),_!=null){if(0<(Z=0>(Z=_.Md)?0:100<Z?255:255*Z/100)){for(ae=we=0;4>ae;++ae)12>(Ae=I.pb[ae]).lc&&(Ae.ia=Z*Tu[0>Ae.lc?0:Ae.lc]>>3),we|=Ae.ia;we&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=_.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function(oe,Ne){if(oe==null)return 0;if(Ne==null)return qr(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!Mn(oe,Ne))return 0;if(e(oe.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(oe.L=0);var je=co[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=Ne.v-je>>4,oe.zb=Ne.j-je>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=Ne.o+15+je>>4,oe.Hb=Ne.va+15+je>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var Me=oe.ed;for(je=0;4>je;++je){var Ce;if(oe.Qa.Cb){var Oe=oe.Qa.Lb[je];oe.Qa.Fb||(Oe+=Me.Tb)}else Oe=Me.Tb;for(Ce=0;1>=Ce;++Ce){var Fe=oe.gd[je][Ce],Ue=Oe;if(Me.Pc&&(Ue+=Me.vd[0],Ce&&(Ue+=Me.od[0])),0<(Ue=0>Ue?0:63<Ue?63:Ue)){var Be=Ue;0<Me.wb&&(Be=4<Me.wb?Be>>2:Be>>1)>9-Me.wb&&(Be=9-Me.wb),1>Be&&(Be=1),Fe.dd=Be,Fe.tc=2*Ue+Be,Fe.ld=40<=Ue?2:15<=Ue?1:0}else Fe.tc=0;Fe.La=Ce}}}je=0}else qr(oe,6,"Frame setup failed"),je=oe.a;if(je=je==0){if(je){oe.$c=0,0<oe.Aa||(oe.Ic=da);t:{je=oe.Ic,Me=4*(Be=oe.za);var gt=32*Be,rt=Be+1,qt=0<oe.L?Be*(0<oe.Aa?2:1):0,ct=(oe.Aa==2?2:1)*Be;if((Fe=Me+832+(Ce=3*(16*je+co[oe.L])/2*gt)+(Oe=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=Fe)je=0;else{if(Fe>oe.Vb){if(oe.Vb=0,oe.Ec=o(Fe),oe.Fc=0,oe.Ec==null){je=qr(oe,1,"no memory during frame initialization.");break t}oe.Vb=Fe}Fe=oe.Ec,Ue=oe.Fc,oe.Ac=Fe,oe.Bc=Ue,Ue+=Me,oe.Gd=u(gt,es),oe.Hd=0,oe.rb=u(rt+1,Ws),oe.sb=1,oe.wa=qt?u(qt,Pr):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=Be),e(!0),oe.oc=Fe,oe.pc=Ue,Ue+=832,oe.ya=u(ct,ui),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=Be),oe.R=16*Be,oe.B=8*Be,Be=(gt=co[oe.L])*oe.R,gt=gt/2*oe.B,oe.sa=Fe,oe.ta=Ue+Be,oe.qa=oe.sa,oe.ra=oe.ta+16*je*oe.R+gt,oe.Ha=oe.qa,oe.Ia=oe.ra+8*je*oe.B+gt,oe.$c=0,Ue+=Ce,oe.mb=Oe?Fe:null,oe.nb=Oe?Ue:null,e(Ue+Oe<=oe.Fc+oe.Vb),Di(oe),a(oe.Ac,oe.Bc,0,Me),je=1}}if(je){if(Ne.ka=0,Ne.y=oe.sa,Ne.O=oe.ta,Ne.f=oe.qa,Ne.N=oe.ra,Ne.ea=oe.Ha,Ne.Vd=oe.Ia,Ne.fa=oe.R,Ne.Rc=oe.B,Ne.F=null,Ne.J=0,!Vc){for(je=-255;255>=je;++je)zc[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)$c[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)Wc[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)Hc[255+je]=0>je?0:255<je?255:je;Vc=1}Oa=Fi,to=Oi,gs=Es,ir=Ii,vr=Jt,Gr=Ti,Yr=Or,an=ns,yi=N,ll=D,jo=Os,ca=h,Wl=M,Ao=se,Hl=fi,Uc=pi,cl=mi,ro=gi,ei[0]=bo,ei[1]=Qi,ei[2]=Gs,ei[3]=il,ei[4]=rs,ei[5]=wo,ei[6]=Ys,ei[7]=ja,ei[8]=Ka,ei[9]=ea,ls[0]=ts,ls[1]=Ya,ls[2]=Ls,ls[3]=Sa,ls[4]=Bn,ls[5]=fs,ls[6]=Zi,vs[0]=Aa,vs[1]=Ga,vs[2]=Ds,vs[3]=ta,vs[4]=Pa,vs[5]=ra,vs[6]=na,je=1}else je=0}je&&(je=(function(Xt,Kr){for(Xt.M=0;Xt.M<Xt.Va;++Xt.M){var zt,nt=Xt.Jc[Xt.M&Xt.Xb],Qe=Xt.m,en=Xt;for(zt=0;zt<en.za;++zt){var Ot=Qe,Yt=en,jr=Yt.Ac,wn=Yt.Bc+4*zt,on=Yt.zc,$r=Yt.ya[Yt.aa+zt];if(Yt.Qa.Bb?$r.$b=ge(Ot,Yt.Pa.jb[0])?2+ge(Ot,Yt.Pa.jb[2]):ge(Ot,Yt.Pa.jb[1]):$r.$b=0,Yt.kc&&($r.Ad=ge(Ot,Yt.Bd)),$r.Za=!ge(Ot,145)+0,$r.Za){var pn=$r.Ob,_n=0;for(Yt=0;4>Yt;++Yt){var Ir,er=on[0+Yt];for(Ir=0;4>Ir;++Ir){er=Wd[jr[wn+Ir]][er];for(var ar=Eu[ge(Ot,er[0])];0<ar;)ar=Eu[2*ar+ge(Ot,er[ar])];er=-ar,jr[wn+Ir]=er}s(pn,_n,jr,wn,4),_n+=4,on[0+Yt]=er}}else er=ge(Ot,156)?ge(Ot,128)?1:3:ge(Ot,163)?2:0,$r.Ob[0]=er,a(jr,wn,er,4),a(on,0,er,4);$r.Dd=ge(Ot,142)?ge(Ot,114)?ge(Ot,183)?1:3:2:0}if(en.m.Ka)return qr(Xt,7,"Premature end-of-partition0 encountered.");for(;Xt.ja<Xt.za;++Xt.ja){if(en=nt,Ot=(Qe=Xt).rb[Qe.sb-1],jr=Qe.rb[Qe.sb+Qe.ja],zt=Qe.ya[Qe.aa+Qe.ja],wn=Qe.kc?zt.Ad:0)Ot.la=jr.la=0,zt.Za||(Ot.Na=jr.Na=0),zt.Hc=0,zt.Gc=0,zt.ia=0;else{var Fr,or;if(Ot=jr,jr=en,wn=Qe.Pa.Xc,on=Qe.ya[Qe.aa+Qe.ja],$r=Qe.pb[on.$b],Yt=on.ad,pn=0,_n=Qe.rb[Qe.sb-1],er=Ir=0,a(Yt,pn,0,384),on.Za)var Jr=0,Xr=wn[3];else{ar=o(16);var Nr=Ot.Na+_n.Na;if(Nr=ao(jr,wn[1],Nr,$r.Eb,0,ar,0),Ot.Na=_n.Na=(0<Nr)+0,1<Nr)Oa(ar,0,Yt,pn);else{var $n=ar[0]+3>>3;for(ar=0;256>ar;ar+=16)Yt[pn+ar]=$n}Jr=1,Xr=wn[0]}var yr=15&Ot.la,kr=15&_n.la;for(ar=0;4>ar;++ar){var ln=1&kr;for($n=or=0;4>$n;++$n)yr=yr>>1|(ln=(Nr=ao(jr,Xr,Nr=ln+(1&yr),$r.Sc,Jr,Yt,pn))>Jr)<<7,or=or<<2|(3<Nr?3:1<Nr?2:Yt[pn+0]!=0),pn+=16;yr>>=4,kr=kr>>1|ln<<7,Ir=(Ir<<8|or)>>>0}for(Xr=yr,Jr=kr>>4,Fr=0;4>Fr;Fr+=2){for(or=0,yr=Ot.la>>4+Fr,kr=_n.la>>4+Fr,ar=0;2>ar;++ar){for(ln=1&kr,$n=0;2>$n;++$n)Nr=ln+(1&yr),yr=yr>>1|(ln=0<(Nr=ao(jr,wn[2],Nr,$r.Qc,0,Yt,pn)))<<3,or=or<<2|(3<Nr?3:1<Nr?2:Yt[pn+0]!=0),pn+=16;yr>>=2,kr=kr>>1|ln<<5}er|=or<<4*Fr,Xr|=yr<<4<<Fr,Jr|=(240&kr)<<Fr}Ot.la=Xr,_n.la=Jr,on.Hc=Ir,on.Gc=er,on.ia=43690&er?0:$r.ia,wn=!(Ir|er)}if(0<Qe.L&&(Qe.wa[Qe.Y+Qe.ja]=Qe.gd[zt.$b][zt.Za],Qe.wa[Qe.Y+Qe.ja].La|=!wn),en.Ka)return qr(Xt,7,"Premature end-of-file encountered.")}if(Di(Xt),Qe=Kr,en=1,zt=(nt=Xt).D,Ot=0<nt.L&&nt.M>=nt.zb&&nt.M<=nt.Va,nt.Aa==0)t:{if(zt.M=nt.M,zt.uc=Ot,Is(nt,zt),en=1,zt=(or=nt.D).Nb,Ot=(er=co[nt.L])*nt.R,jr=er/2*nt.B,ar=16*zt*nt.R,$n=8*zt*nt.B,wn=nt.sa,on=nt.ta-Ot+ar,$r=nt.qa,Yt=nt.ra-jr+$n,pn=nt.Ha,_n=nt.Ia-jr+$n,kr=(yr=or.M)==0,Ir=yr>=nt.Va-1,nt.Aa==2&&Is(nt,or),or.uc)for(ln=(Nr=nt).D.M,e(Nr.D.uc),or=Nr.yb;or<Nr.Hb;++or){Jr=or,Xr=ln;var Tn=(ws=(nn=Nr).D).Nb;Fr=nn.R;var ws=ws.wa[ws.Y+Jr],tn=nn.sa,rn=nn.ta+16*Tn*Fr+16*Jr,Wn=ws.dd,Sr=ws.tc;if(Sr!=0)if(e(3<=Sr),nn.L==1)0<Jr&&Uc(tn,rn,Fr,Sr+4),ws.La&&ro(tn,rn,Fr,Sr),0<Xr&&Hl(tn,rn,Fr,Sr+4),ws.La&&cl(tn,rn,Fr,Sr);else{var Hn=nn.B,ti=nn.qa,wi=nn.ra+8*Tn*Hn+8*Jr,Nn=nn.Ha,nn=nn.Ia+8*Tn*Hn+8*Jr;Tn=ws.ld,0<Jr&&(an(tn,rn,Fr,Sr+4,Wn,Tn),ll(ti,wi,Nn,nn,Hn,Sr+4,Wn,Tn)),ws.La&&(ca(tn,rn,Fr,Sr,Wn,Tn),Ao(ti,wi,Nn,nn,Hn,Sr,Wn,Tn)),0<Xr&&(Yr(tn,rn,Fr,Sr+4,Wn,Tn),yi(ti,wi,Nn,nn,Hn,Sr+4,Wn,Tn)),ws.La&&(jo(tn,rn,Fr,Sr,Wn,Tn),Wl(ti,wi,Nn,nn,Hn,Sr,Wn,Tn))}}if(nt.ia&&alert("todo:DitherRow"),Qe.put!=null){if(or=16*yr,yr=16*(yr+1),kr?(Qe.y=nt.sa,Qe.O=nt.ta+ar,Qe.f=nt.qa,Qe.N=nt.ra+$n,Qe.ea=nt.Ha,Qe.W=nt.Ia+$n):(or-=er,Qe.y=wn,Qe.O=on,Qe.f=$r,Qe.N=Yt,Qe.ea=pn,Qe.W=_n),Ir||(yr-=er),yr>Qe.o&&(yr=Qe.o),Qe.F=null,Qe.J=null,nt.Fa!=null&&0<nt.Fa.length&&or<yr&&(Qe.J=Dt(nt,Qe,or,yr-or),Qe.F=nt.mb,Qe.F==null&&Qe.F.length==0)){en=qr(nt,3,"Could not decode alpha data.");break t}or<Qe.j&&(er=Qe.j-or,or=Qe.j,e(!(1&er)),Qe.O+=nt.R*er,Qe.N+=nt.B*(er>>1),Qe.W+=nt.B*(er>>1),Qe.F!=null&&(Qe.J+=Qe.width*er)),or<yr&&(Qe.O+=Qe.v,Qe.N+=Qe.v>>1,Qe.W+=Qe.v>>1,Qe.F!=null&&(Qe.J+=Qe.v),Qe.ka=or-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=yr-or,en=Qe.put(Qe))}zt+1!=nt.Ic||Ir||(s(nt.sa,nt.ta-Ot,wn,on+16*nt.R,Ot),s(nt.qa,nt.ra-jr,$r,Yt+8*nt.B,jr),s(nt.Ha,nt.Ia-jr,pn,_n+8*nt.B,jr))}if(!en)return qr(Xt,6,"Output aborted.")}return 1})(oe,Ne)),Ne.bc!=null&&Ne.bc(Ne),je&=1}return je?(oe.cb=0,je):0})(f,j)||(v=f.a)}}else v=f.a}v==0&&W.Oa!=null&&W.Oa.fd&&(v=No(W.ba))}W=v}q=W!=0?null:11>q?K.f.RGBA.eb:K.f.kb.y}else q=null;return q};var xl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(J,ne){for(var O="",T=0;T<4;T++)O+=String.fromCharCode(J[ne++]);return O}function x(J,ne){return J[ne+0]|J[ne+1]<<8}function w(J,ne){return(J[ne+0]|J[ne+1]<<8|J[ne+2]<<16)>>>0}function S(J,ne){return(J[ne+0]|J[ne+1]<<8|J[ne+2]<<16|J[ne+3]<<24)>>>0}new p;var y=[0],E=[0],C=[],L=new p,A=n,U=(function(J,ne){var O={},T=0,te=!1,H=0,Q=0;if(O.frames=[],!(function(P,F){for(var V=0;V<4;V++)if(P[F+V]!="RIFF".charCodeAt(V))return!0;return!1})(J,ne)){for(S(J,ne+=4),ne+=8;ne<J.length;){var X=g(J,ne),pe=S(J,ne+=4);ne+=4;var G=pe+(1&pe);switch(X){case"VP8 ":case"VP8L":O.frames[T]===void 0&&(O.frames[T]={}),(Y=O.frames[T]).src_off=te?Q:ne-8,Y.src_size=H+pe+8,T++,te&&(te=!1,H=0,Q=0);break;case"VP8X":(Y=O.header={}).feature_flags=J[ne];var ce=ne+4;Y.canvas_width=1+w(J,ce),ce+=3,Y.canvas_height=1+w(J,ce),ce+=3;break;case"ALPH":te=!0,H=G+8,Q=ne-8;break;case"ANIM":(Y=O.header).bgcolor=S(J,ne),ce=ne+4,Y.loop_count=x(J,ce),ce+=2;break;case"ANMF":var ve,Y;(Y=O.frames[T]={}).offset_x=2*w(J,ne),ne+=3,Y.offset_y=2*w(J,ne),ne+=3,Y.width=1+w(J,ne),ne+=3,Y.height=1+w(J,ne),ne+=3,Y.duration=w(J,ne),ne+=3,ve=J[ne++],Y.dispose=1&ve,Y.blend=ve>>1&1}X!="ANMF"&&(ne+=G)}return O}})(A,0);U.response=A,U.rgbaoutput=!0,U.dataurl=!1;var R=U.header?U.header:null,z=U.frames?U.frames:null;if(R){R.loop_counter=R.loop_count,y=[R.canvas_height],E=[R.canvas_width];for(var he=0;he<z.length&&z[he].blend!=0;he++);}var le=z[0],ee=L.WebPDecodeRGBA(A,le.src_off,le.src_size,E,y);le.rgba=ee,le.imgwidth=E[0],le.imgheight=y[0];for(var $=0;$<E[0]*y[0]*4;$++)C[$]=ee[$];return this.width=E,this.height=y,this.data=C,this}(function(n){var e,t,s,a,o,u,d,p,g,x=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new p,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new u,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new u,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,p=this.internal.Matrix,g=new x}]);var w=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=P;Object.defineProperty(this,"pdf",{get:function(){return F}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(re){V=!!re}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(re){ie=!!re}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(re){isNaN(re)||(ue=re)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(re){isNaN(re)||(me=re)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(re){var Ye;typeof re=="number"?Ye=[re,re,re,re]:((Ye=new Array(4))[0]=re[0],Ye[1]=re.length>=2?re[1]:Ye[0],Ye[2]=re.length>=3?re[2]:Ye[0],Ye[3]=re.length>=4?re[3]:Ye[1]),g.margin=Ye}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(re){ye=re}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(re){xe=re}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(re){ge=re}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(re){re instanceof x&&(g=re)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(re){g.path=re}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(re){Ie=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var Ye;Ye=S(re),this.ctx.fillStyle=Ye.style,this.ctx.isFillTransparent=Ye.a===0,this.ctx.fillOpacity=Ye.a,this.pdf.setFillColor(Ye.r,Ye.g,Ye.b,{a:Ye.a}),this.pdf.setTextColor(Ye.r,Ye.g,Ye.b,{a:Ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var Ye=S(re);this.ctx.strokeStyle=Ye.style,this.ctx.isStrokeTransparent=Ye.a===0,this.ctx.strokeOpacity=Ye.a,Ye.a===0?this.pdf.setDrawColor(255,255,255):(Ye.a,this.pdf.setDrawColor(Ye.r,Ye.g,Ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var Re=null,We=null,Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(re){Re=null,We=null,Ve=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var Ye;if(this.ctx.font=re,(Ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(re))!==null){var bt=Ye[1];Ye[2];var ot=Ye[3],ze=Ye[4];Ye[5];var st=Ye[6],et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(et==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var yt=(function(it){var Ar,Kt,Et=[],Lt=it.trim();if(Lt==="")return of;if(Lt in Lm)return[Lm[Lt]];for(;Lt!=="";){switch(Kt=null,Ar=(Lt=Tm(Lt)).charAt(0)){case'"':case"'":Kt=Jb(Lt.substring(1),Ar);break;default:Kt=Xb(Lt)}if(Kt===null||(Et.push(Kt[0]),(Lt=Tm(Kt[1]))!==""&&Lt.charAt(0)!==","))return of;Lt=Lt.replace(/^,/,"")}return Et})(st);if(this.fontFaces){var vt=(function(it,Ar){var Kt=it.getFontList(),Et=JSON.stringify(Kt);if(Re===null||We!==Et){var Lt=(function(sr){var ht=[];return Object.keys(sr).forEach(function(dr){sr[dr].forEach(function(kt){var Ft=null;switch(kt){case"bold":Ft={family:dr,weight:"bold"};break;case"italic":Ft={family:dr,style:"italic"};break;case"bolditalic":Ft={family:dr,weight:"bold",style:"italic"};break;case"":case"normal":Ft={family:dr}}Ft!==null&&(Ft.ref={name:dr,style:kt},ht.push(Ft))})}),ht})(Kt);Re=(function(sr){for(var ht={},dr=0;dr<sr.length;++dr){var kt=af(sr[dr]),Ft=kt.family,cr=kt.stretch,Bt=kt.style,St=kt.weight;ht[Ft]=ht[Ft]||{},ht[Ft][cr]=ht[Ft][cr]||{},ht[Ft][cr][Bt]=ht[Ft][cr][Bt]||{},ht[Ft][cr][Bt][St]=kt}return ht})(Lt.concat(Ar)),We=Et}return Re})(this.pdf,this.fontFaces),Ut=yt.map(function(it){return{family:it,stretch:"normal",weight:ot,style:bt}}),wt=(function(it,Ar,Kt){for(var Et=(Kt=Kt||{}).defaultFontFamily||"times",Lt=Object.assign({},Kb,Kt.genericFontFamilies||{}),sr=null,ht=null,dr=0;dr<Ar.length;++dr)if(Lt[(sr=af(Ar[dr])).family]&&(sr.family=Lt[sr.family]),it.hasOwnProperty(sr.family)){ht=it[sr.family];break}if(!(ht=ht||it[Et]))throw new Error("Could not find a font-family for the rule '"+Dm(sr)+"' and default family '"+Et+"'.");if(ht=(function(kt,Ft){if(Ft[kt])return Ft[kt];var cr=Of[kt],Bt=cr<=Of.normal?-1:1,St=Em(Ft,a1,cr,Bt);if(!St)throw new Error("Could not find a matching font-stretch value for "+kt);return St})(sr.stretch,ht),ht=(function(kt,Ft){if(Ft[kt])return Ft[kt];for(var cr=i1[kt],Bt=0;Bt<cr.length;++Bt)if(Ft[cr[Bt]])return Ft[cr[Bt]];throw new Error("Could not find a matching font-style for "+kt)})(sr.style,ht),!(ht=(function(kt,Ft){if(Ft[kt])return Ft[kt];if(kt===400&&Ft[500])return Ft[500];if(kt===500&&Ft[400])return Ft[400];var cr=Yb[kt],Bt=Em(Ft,o1,cr,kt<400?-1:1);if(!Bt)throw new Error("Could not find a matching font-weight for value "+kt);return Bt})(sr.weight,ht)))throw new Error("Failed to resolve a font for the rule '"+Dm(sr)+"'.");return ht})(vt,Ut);this.pdf.setFont(wt.ref.name,wt.ref.style)}else{var It="";(ot==="bold"||parseInt(ot,10)>=700||bt==="bold")&&(It="bold"),bt==="italic"&&(It+="italic"),It.length===0&&(It="normal");for(var Ht="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<yt.length;lt++){if(this.pdf.internal.getFont(yt[lt],It,{noFallback:!0,disableWarning:!0})!==void 0){Ht=yt[lt];break}if(It==="bolditalic"&&this.pdf.internal.getFont(yt[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ht=yt[lt],It="bold";else if(this.pdf.internal.getFont(yt[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ht=yt[lt],It="normal";break}}if(Ht===""){for(var mt=0;mt<yt.length;mt++)if(Vt[yt[mt]]){Ht=Vt[yt[mt]];break}}Ht=Ht===""?"Times":Ht,this.pdf.setFont(Ht,It)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};w.prototype.setLineDash=function(P){this.lineDash=P},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){z.call(this,"fill",!1)},w.prototype.stroke=function(){z.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(P,F){if(isNaN(P)||isNaN(F))throw Lr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new u(P,F));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new u(P,F)},w.prototype.closePath=function(){var P=new u(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&br(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){P=new u(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(P.x,P.y)},w.prototype.lineTo=function(P,F){if(isNaN(P)||isNaN(F))throw Lr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new u(P,F));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new u(V.x,V.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},w.prototype.quadraticCurveTo=function(P,F,V,ie){if(isNaN(V)||isNaN(ie)||isNaN(P)||isNaN(F))throw Lr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new u(V,ie)),me=this.ctx.transform.applyToPoint(new u(P,F));this.path.push({type:"qct",x1:me.x,y1:me.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new u(ue.x,ue.y)},w.prototype.bezierCurveTo=function(P,F,V,ie,ue,me){if(isNaN(ue)||isNaN(me)||isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie))throw Lr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new u(ue,me)),xe=this.ctx.transform.applyToPoint(new u(P,F)),ge=this.ctx.transform.applyToPoint(new u(V,ie));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:ge.x,y2:ge.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new u(ye.x,ye.y)},w.prototype.arc=function(P,F,V,ie,ue,me){if(isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie)||isNaN(ue))throw Lr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new u(P,F));P=ye.x,F=ye.y;var xe=this.ctx.transform.applyToPoint(new u(0,V)),ge=this.ctx.transform.applyToPoint(new u(0,0));V=Math.sqrt(Math.pow(xe.x-ge.x,2)+Math.pow(xe.y-ge.y,2))}Math.abs(ue-ie)>=2*Math.PI&&(ie=0,ue=2*Math.PI),this.path.push({type:"arc",x:P,y:F,radius:V,startAngle:ie,endAngle:ue,counterclockwise:me})},w.prototype.arcTo=function(P,F,V,ie,ue){throw new Error("arcTo not implemented.")},w.prototype.rect=function(P,F,V,ie){if(isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie))throw Lr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,F),this.lineTo(P+V,F),this.lineTo(P+V,F+ie),this.lineTo(P,F+ie),this.lineTo(P,F),this.lineTo(P+V,F),this.lineTo(P,F)},w.prototype.fillRect=function(P,F,V,ie){if(isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie))throw Lr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,F,V,ie),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},w.prototype.strokeRect=function(P,F,V,ie){if(isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie))throw Lr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(P,F,V,ie),this.stroke())},w.prototype.clearRect=function(P,F,V,ie){if(isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie))throw Lr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,F,V,ie))},w.prototype.save=function(P){P=typeof P!="boolean"||P;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},w.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(F),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(P){var F,V,ie,ue;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))F=0,V=0,ie=0,ue=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(me!==null)F=parseInt(me[1]),V=parseInt(me[2]),ie=parseInt(me[3]),ue=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)F=parseInt(me[1]),V=parseInt(me[2]),ie=parseInt(me[3]),ue=parseFloat(me[4]);else{if(ue=1,typeof P=="string"&&P.charAt(0)!=="#"){var ye=new Qg(P);P=ye.ok?ye.toHex():"#000000"}P.length===4?(F=P.substring(1,2),F+=F,V=P.substring(2,3),V+=V,ie=P.substring(3,4),ie+=ie):(F=P.substring(1,3),V=P.substring(3,5),ie=P.substring(5,7)),F=parseInt(F,16),V=parseInt(V,16),ie=parseInt(ie,16)}}return{r:F,g:V,b:ie,a:ue,style:P}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(P,F,V,ie){if(isNaN(F)||isNaN(V)||typeof P!="string")throw Lr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!y.call(this)){var ue=G(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;T.call(this,{text:P,x:F,y:V,scale:me,angle:ue,align:this.textAlign,maxWidth:ie})}},w.prototype.strokeText=function(P,F,V,ie){if(isNaN(F)||isNaN(V)||typeof P!="string")throw Lr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){ie=isNaN(ie)?void 0:ie;var ue=G(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;T.call(this,{text:P,x:F,y:V,scale:me,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:ie})}},w.prototype.measureText=function(P){if(typeof P!="string")throw Lr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,V=this.pdf.internal.scaleFactor,ie=F.internal.getFontSize(),ue=F.getStringUnitWidth(P)*ie/F.internal.scaleFactor;return new function(me){var ye=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this}({width:ue*=Math.round(96*V/72*1e4)/1e4})},w.prototype.scale=function(P,F){if(isNaN(P)||isNaN(F))throw Lr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new p(P,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},w.prototype.rotate=function(P){if(isNaN(P))throw Lr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new p(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},w.prototype.translate=function(P,F){if(isNaN(P)||isNaN(F))throw Lr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new p(1,0,0,1,P,F);this.ctx.transform=this.ctx.transform.multiply(V)},w.prototype.transform=function(P,F,V,ie,ue,me){if(isNaN(P)||isNaN(F)||isNaN(V)||isNaN(ie)||isNaN(ue)||isNaN(me))throw Lr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new p(P,F,V,ie,ue,me);this.ctx.transform=this.ctx.transform.multiply(ye)},w.prototype.setTransform=function(P,F,V,ie,ue,me){P=isNaN(P)?1:P,F=isNaN(F)?0:F,V=isNaN(V)?0:V,ie=isNaN(ie)?1:ie,ue=isNaN(ue)?0:ue,me=isNaN(me)?0:me,this.ctx.transform=new p(P,F,V,ie,ue,me)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(P,F,V,ie,ue,me,ye,xe,ge){var Ie=this.pdf.getImageProperties(P),Re=1,We=1,Ve=1,re=1;ie!==void 0&&xe!==void 0&&(Ve=xe/ie,re=ge/ue,Re=Ie.width/ie*xe/ie,We=Ie.height/ue*ge/ue),me===void 0&&(me=F,ye=V,F=0,V=0),ie!==void 0&&xe===void 0&&(xe=ie,ge=ue),ie===void 0&&xe===void 0&&(xe=Ie.width,ge=Ie.height);var Ye=this.ctx.transform.decompose(),bt=G(Ye.rotate.shx),ot=new p,ze=(ot=(ot=(ot=ot.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new d(me-F*Ve,ye-V*re,ie*Re,ue*We));if(this.autoPaging){for(var st,et=L.call(this,ze),yt=[],vt=0;vt<et.length;vt+=1)yt.indexOf(et[vt])===-1&&yt.push(et[vt]);R(yt);for(var Ut=yt[0],wt=yt[yt.length-1],It=Ut;It<wt+1;It++){this.pdf.setPage(It);var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=It===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=It===1?0:lt+(It-2)*mt;if(this.ctx.clip_path.length!==0){var Ar=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(st,this.posX+this.margin[3],-it+Vt+this.ctx.prevPageLastElemOffset),he.call(this,"fill",!0),this.path=Ar}var Kt=JSON.parse(JSON.stringify(ze));Kt=U([Kt],this.posX+this.margin[3],-it+Vt+this.ctx.prevPageLastElemOffset)[0];var Et=(It>Ut||It<wt)&&C.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,mt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,bt),Et&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,bt)};var L=function(P,F,V){var ie=[];F=F||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ie.push(Math.floor((P.y+ue)/V)+1);break;case"arc":ie.push(Math.floor((P.y+ue-P.radius)/V)+1),ie.push(Math.floor((P.y+ue+P.radius)/V)+1);break;case"qct":var me=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ie.push(Math.floor((me.y+ue)/V)+1),ie.push(Math.floor((me.y+me.h+ue)/V)+1);break;case"bct":var ye=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ie.push(Math.floor((ye.y+ue)/V)+1),ie.push(Math.floor((ye.y+ye.h+ue)/V)+1);break;case"rect":ie.push(Math.floor((P.y+ue)/V)+1),ie.push(Math.floor((P.y+P.h+ue)/V)+1)}for(var xe=0;xe<ie.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ie[xe];)A.call(this);return ie},A=function(){var P=this.fillStyle,F=this.strokeStyle,V=this.font,ie=this.lineCap,ue=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=F,this.font=V,this.lineCap=ie,this.lineWidth=ue,this.lineJoin=me},U=function(P,F,V){for(var ie=0;ie<P.length;ie++)switch(P[ie].type){case"bct":P[ie].x2+=F,P[ie].y2+=V;case"qct":P[ie].x1+=F,P[ie].y1+=V;default:P[ie].x+=F,P[ie].y+=V}return P},R=function(P){return P.sort(function(F,V){return F-V})},z=function(P,F){var V=this.fillStyle,ie=this.strokeStyle,ue=this.lineCap,me=this.lineWidth,ye=Math.abs(me*this.ctx.transform.scaleX),xe=this.lineJoin;if(this.autoPaging){for(var ge,Ie,Re=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),Ve=[],re=0;re<We.length;re++)if(We[re].x!==void 0)for(var Ye=L.call(this,We[re]),bt=0;bt<Ye.length;bt+=1)Ve.indexOf(Ye[bt])===-1&&Ve.push(Ye[bt]);for(var ot=0;ot<Ve.length;ot++)for(;this.pdf.internal.getNumberOfPages()<Ve[ot];)A.call(this);R(Ve);for(var ze=Ve[0],st=Ve[Ve.length-1],et=ze;et<st+1;et++){this.pdf.setPage(et),this.fillStyle=V,this.strokeStyle=ie,this.lineCap=ue,this.lineWidth=ye,this.lineJoin=xe;var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=et===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=et===1?0:Ut+(et-2)*wt;if(this.ctx.clip_path.length!==0){var Ht=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(ge,this.posX+this.margin[3],-It+vt+this.ctx.prevPageLastElemOffset),he.call(this,P,!0),this.path=Ht}if(Ie=JSON.parse(JSON.stringify(Re)),this.path=U(Ie,this.posX+this.margin[3],-It+vt+this.ctx.prevPageLastElemOffset),F===!1||et===0){var Vt=(et>ze||et<st)&&C.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,wt,null).clip().discardPath()),he.call(this,P,F),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=Re}else this.lineWidth=ye,he.call(this,P,F),this.lineWidth=me},he=function(P,F){if((P!=="stroke"||F||!E.call(this))&&(P==="stroke"||F||!y.call(this))){for(var V,ie,ue=[],me=this.path,ye=0;ye<me.length;ye++){var xe=me[ye];switch(xe.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:xe,deltas:[],abs:[]});break;case"lt":var ge=ue.length;if(me[ye-1]&&!isNaN(me[ye-1].x)&&(V=[xe.x-me[ye-1].x,xe.y-me[ye-1].y],ge>0)){for(;ge>=0;ge--)if(ue[ge-1].close!==!0&&ue[ge-1].begin!==!0){ue[ge-1].deltas.push(V),ue[ge-1].abs.push(xe);break}}break;case"bct":V=[xe.x1-me[ye-1].x,xe.y1-me[ye-1].y,xe.x2-me[ye-1].x,xe.y2-me[ye-1].y,xe.x-me[ye-1].x,xe.y-me[ye-1].y],ue[ue.length-1].deltas.push(V);break;case"qct":var Ie=me[ye-1].x+2/3*(xe.x1-me[ye-1].x),Re=me[ye-1].y+2/3*(xe.y1-me[ye-1].y),We=xe.x+2/3*(xe.x1-xe.x),Ve=xe.y+2/3*(xe.y1-xe.y),re=xe.x,Ye=xe.y;V=[Ie-me[ye-1].x,Re-me[ye-1].y,We-me[ye-1].x,Ve-me[ye-1].y,re-me[ye-1].x,Ye-me[ye-1].y],ue[ue.length-1].deltas.push(V);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(xe)}}ie=F?null:P==="stroke"?"stroke":"fill";for(var bt=!1,ot=0;ot<ue.length;ot++)if(ue[ot].arc)for(var ze=ue[ot].abs,st=0;st<ze.length;st++){var et=ze[st];et.type==="arc"?$.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,F,!bt):te.call(this,et.x,et.y),bt=!0}else if(ue[ot].close===!0)this.pdf.internal.out("h"),bt=!1;else if(ue[ot].begin!==!0){var yt=ue[ot].start.x,vt=ue[ot].start.y;H.call(this,ue[ot].deltas,yt,vt),bt=!0}ie&&J.call(this,ie),F&&ne.call(this)}},le=function(P){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-V;case"top":return P+F-V;case"hanging":return P+F-2*V;case"middle":return P+F/2-V;default:return P}},ee=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(F,V){this.colorStops.push([F,V])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var $=function(P,F,V,ie,ue,me,ye,xe,ge){for(var Ie=X.call(this,V,ie,ue,me),Re=0;Re<Ie.length;Re++){var We=Ie[Re];Re===0&&(ge?O.call(this,We.x1+P,We.y1+F):te.call(this,We.x1+P,We.y1+F)),Q.call(this,P,F,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}xe?ne.call(this):J.call(this,ye)},J=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ne=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(P,F){this.pdf.internal.out(t(P)+" "+s(F)+" m")},T=function(P){var F;switch(P.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var V,ie,ue,me=this.pdf.getTextDimensions(P.text),ye=le.call(this,P.y),xe=ee.call(this,ye)-me.h,ge=this.ctx.transform.applyToPoint(new u(P.x,ye));if(this.autoPaging){var Ie=this.ctx.transform.decompose(),Re=new p;Re=(Re=(Re=Re.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var We=this.ctx.transform.applyToRectangle(new d(P.x,ye,me.w,me.h)),Ve=Re.applyToRectangle(new d(P.x,xe,me.w,me.h)),re=L.call(this,Ve),Ye=[],bt=0;bt<re.length;bt+=1)Ye.indexOf(re[bt])===-1&&Ye.push(re[bt]);R(Ye);for(var ot=Ye[0],ze=Ye[Ye.length-1],st=ot;st<ze+1;st++){this.pdf.setPage(st);var et=st===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[2],Ut=vt-this.margin[0],wt=this.pdf.internal.pageSize.width-this.margin[1],It=wt-this.margin[3],Ht=st===1?0:yt+(st-2)*Ut;if(this.ctx.clip_path.length!==0){var Vt=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(V,this.posX+this.margin[3],-1*Ht+et),he.call(this,"fill",!0),this.path=Vt}var lt=U([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Ht+et+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*P.scale),ue=this.lineWidth,this.lineWidth=ue*P.scale);var mt=this.autoPaging!=="text";if(mt||lt.y+lt.h<=vt){if(mt||lt.y>=et&&lt.x<=wt){var it=mt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||wt-lt.x)[0],Ar=U([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Ht+et+this.ctx.prevPageLastElemOffset)[0],Kt=mt&&(st>ot||st<ze)&&C.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Ut,null).clip().discardPath()),this.pdf.text(it,Ar.x,Ar.y,{angle:P.angle,align:F,renderingMode:P.renderingMode}),Kt&&this.pdf.restoreGraphicsState()}}else lt.y<vt&&(this.ctx.prevPageLastElemOffset+=vt-lt.y);P.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ue)}}else P.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*P.scale),ue=this.lineWidth,this.lineWidth=ue*P.scale),this.pdf.text(P.text,ge.x+this.posX,ge.y+this.posY,{angle:P.angle,align:F,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ue)},te=function(P,F,V,ie){V=V||0,ie=ie||0,this.pdf.internal.out(t(P+V)+" "+s(F+ie)+" l")},H=function(P,F,V){return this.pdf.lines(P,F,V,null,null)},Q=function(P,F,V,ie,ue,me,ye,xe){this.pdf.internal.out([e(a(V+P)),e(o(ie+F)),e(a(ue+P)),e(o(me+F)),e(a(ye+P)),e(o(xe+F)),"c"].join(" "))},X=function(P,F,V,ie){for(var ue=2*Math.PI,me=Math.PI/2;F>V;)F-=ue;var ye=Math.abs(V-F);ye<ue&&ie&&(ye=ue-ye);for(var xe=[],ge=ie?-1:1,Ie=F;ye>1e-5;){var Re=Ie+ge*Math.min(ye,me);xe.push(pe.call(this,P,Ie,Re)),ye-=Math.abs(Re-Ie),Ie=Re}return xe},pe=function(P,F,V){var ie=(V-F)/2,ue=P*Math.cos(ie),me=P*Math.sin(ie),ye=ue,xe=-me,ge=ye*ye+xe*xe,Ie=ge+ye*ue+xe*me,Re=4/3*(Math.sqrt(2*ge*Ie)-Ie)/(ye*me-xe*ue),We=ye-Re*xe,Ve=xe+Re*ye,re=We,Ye=-Ve,bt=ie+F,ot=Math.cos(bt),ze=Math.sin(bt);return{x1:P*Math.cos(F),y1:P*Math.sin(F),x2:We*ot-Ve*ze,y2:We*ze+Ve*ot,x3:re*ot-Ye*ze,y3:re*ze+Ye*ot,x4:P*Math.cos(V),y4:P*Math.sin(V)}},G=function(P){return 180*P/Math.PI},ce=function(P,F,V,ie,ue,me){var ye=P+.5*(V-P),xe=F+.5*(ie-F),ge=ue+.5*(V-ue),Ie=me+.5*(ie-me),Re=Math.min(P,ue,ye,ge),We=Math.max(P,ue,ye,ge),Ve=Math.min(F,me,xe,Ie),re=Math.max(F,me,xe,Ie);return new d(Re,Ve,We-Re,re-Ve)},ve=function(P,F,V,ie,ue,me,ye,xe){var ge,Ie,Re,We,Ve,re,Ye,bt,ot,ze,st,et,yt,vt,Ut=V-P,wt=ie-F,It=ue-V,Ht=me-ie,Vt=ye-ue,lt=xe-me;for(Ie=0;Ie<41;Ie++)ot=(Ye=(Re=P+(ge=Ie/40)*Ut)+ge*((Ve=V+ge*It)-Re))+ge*(Ve+ge*(ue+ge*Vt-Ve)-Ye),ze=(bt=(We=F+ge*wt)+ge*((re=ie+ge*Ht)-We))+ge*(re+ge*(me+ge*lt-re)-bt),Ie==0?(st=ot,et=ze,yt=ot,vt=ze):(st=Math.min(st,ot),et=Math.min(et,ze),yt=Math.max(yt,ot),vt=Math.max(vt,ze));return new d(Math.round(st),Math.round(et),Math.round(yt-st),Math.round(vt-et))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,F,V=(P=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:F}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(_t.API),(function(n){var e=function(u){var d,p,g,x,w,S,y,E,C,L;for(p=[],g=0,x=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;x>g;g+=4)(w=(u.charCodeAt(g)<<24)+(u.charCodeAt(g+1)<<16)+(u.charCodeAt(g+2)<<8)+u.charCodeAt(g+3))!==0?(S=(w=((w=((w=((w=(w-(L=w%85))/85)-(C=w%85))/85)-(E=w%85))/85)-(y=w%85))/85)%85,p.push(S+33,y+33,E+33,C+33,L+33)):p.push(122);return(function(A,U){for(var R=U;R>0;R--)A.pop()})(p,d.length),String.fromCharCode.apply(String,p)+"~>"},t=function(u){var d,p,g,x,w,S=String,y="length",E=255,C="charCodeAt",L="slice",A="replace";for(u[L](-2),u=u[L](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),g=[],x=0,w=(u+=d="uuuuu"[L](u[y]%5||5))[y];w>x;x+=5)p=52200625*(u[C](x)-33)+614125*(u[C](x+1)-33)+7225*(u[C](x+2)-33)+85*(u[C](x+3)-33)+(u[C](x+4)-33),g.push(E&p>>24,E&p>>16,E&p>>8,E&p);return(function(U,R){for(var z=R;z>0;z--)U.pop()})(g,d[y]),S.fromCharCode.apply(S,g)},s=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var p="",g=0;g<u.length;g+=2)p+=String.fromCharCode("0x"+(u[g]+u[g+1]));return p},o=function(u){for(var d=new Uint8Array(u.length),p=u.length;p--;)d[p]=u.charCodeAt(p);return(d=Af(d)).reduce(function(g,x){return g+String.fromCharCode(x)},"")};n.processDataByFilters=function(u,d){var p=0,g=u||"",x=[];for(typeof(d=d||[])=="string"&&(d=[d]),p=0;p<d.length;p+=1)switch(d[p]){case"ASCII85Decode":case"/ASCII85Decode":g=t(g),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=e(g),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=a(g),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=s(g),x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=o(g),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[p]+'" is not implemented')}return{data:g,reverseChain:x.reverse().join(" ")}}})(_t.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(p,g,x){var w=new XMLHttpRequest,S=0,y=function(E){var C=E.length,L=[],A=String.fromCharCode;for(S=0;S<C;S+=1)L.push(A(255&E.charCodeAt(S)));return L.join("")};if(w.open("GET",p,!g),w.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(w.onload=function(){w.status===200?x(y(this.responseText)):x(void 0)}),w.send(null),g&&w.status===200)return y(w.responseText)})(a,o,u)}catch{}return d})(e,t,s)},n.loadImageFile=n.loadFile})(_t.API),(function(n){function e(){return(Mt.html2canvas?Promise.resolve(Mt.html2canvas):Zo(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Mt.DOMPurify?Promise.resolve(Mt.DOMPurify):Zo(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var p=br(d);return p==="undefined"?"undefined":p==="string"||d instanceof String?"string":p==="number"||d instanceof Number?"number":p==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":p==="object"?"object":"unknown"},a=function(d,p){var g=document.createElement(d);for(var x in p.className&&(g.className=p.className),p.innerHTML&&p.dompurify&&(g.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)g.style[x]=p.style[x];return g},o=function d(p,g){for(var x=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),w=p.firstChild;w;w=w.nextSibling)g!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||x.appendChild(d(w,g));return p.nodeType===1&&(p.nodeName==="CANVAS"?(x.width=p.width,x.height=p.height,x.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(x.value=p.value),x.addEventListener("load",function(){x.scrollTop=p.scrollTop,x.scrollLeft=p.scrollLeft},!0)),x},u=function d(p){var g=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),x=d.convert(Promise.resolve(),g);return(x=x.setProgress(1,d,1,[d])).set(p)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,p){return d.__proto__=p||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,p){return this.then(function(){switch(p=p||(function(g){switch(s(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),p){case"string":return this.then(t).then(function(g){return this.set({src:a("div",{innerHTML:d,dompurify:g})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(p){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,p(this.prop.container,g)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(p){var g=this.opt.jsPDF,x=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=x,x)for(var y=0;y<x.length;++y){var E=x[y],C=E.src.find(function(L){return L.format==="truetype"});C&&g.addFont(C.url,E.ref.name,E.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,g.context2d.save(!0),p(this.prop.container,S)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,p,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(d,p):this.outputPdf(d,p)},u.prototype.outputPdf=function(d,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,p)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(s(d)!=="object")return this;var p=Object.keys(d||{}).map(function(g){if(g in u.template.prop)return function(){this.prop[g]=d[g]};switch(g){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[g]=d[g]}}},this);return this.then(function(){return this.thenList(p)})},u.prototype.get=function(d,p){return this.then(function(){var g=d in u.template.prop?this.prop[d]:this.opt[d];return p?p(g):g})},u.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function p(g,x){return Math.floor(g*x/72*96)}return this.then(function(){(d=d||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:p(d.inner.width,d.k),height:p(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,p,g,x){return d!=null&&(this.progress.val=d),p!=null&&(this.progress.state=p),g!=null&&(this.progress.n=g),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,p,g,x){return this.setProgress(d?this.progress.val+d:null,p||null,g?this.progress.n+g:null,x?this.progress.stack.concat(x):null)},u.prototype.then=function(d,p){var g=this;return this.thenCore(d,p,function(x,w){return g.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(S){return g.updateProgress(null,x),S}).then(x,w).then(function(S){return g.updateProgress(1),S})})},u.prototype.thenCore=function(d,p,g){g=g||Promise.prototype.then;var x=this;d&&(d=d.bind(x)),p&&(p=p.bind(x));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?x:u.convert(Object.assign({},x),Promise.prototype),S=g.call(w,d,p);return u.convert(S,x.__proto__)},u.prototype.thenExternal=function(d,p){return Promise.prototype.then.call(this,d,p)},u.prototype.thenList=function(d){var p=this;return d.forEach(function(g){p=p.thenCore(g)}),p},u.prototype.catch=function(d){d&&(d=d.bind(this));var p=Promise.prototype.catch.call(this,d);return u.convert(p,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,_t.getPageSize=function(d,p,g){if(br(d)==="object"){var x=d;d=x.orientation,p=x.unit||p,g=x.format||g}p=p||"mm",g=g||"a4",d=(""+(d||"P")).toLowerCase();var w,S=(""+g).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+p}var E,C=0,L=0;if(y.hasOwnProperty(S))C=y[S][1]/w,L=y[S][0]/w;else try{C=g[1],L=g[0]}catch{throw new Error("Invalid format: "+g)}if(d==="p"||d==="portrait")d="p",L>C&&(E=L,L=C,C=E);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>L&&(E=L,L=C,C=E)}return{width:L,height:C,unit:p,k:w,orientation:d}},n.html=function(d,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(af):null;var g=new u(p);return p.worker?g:g.from(d).doCallback()}})(_t.API),_t.API.addJS=function(n){return Im=n,this.internal.events.subscribe("postPutResources",function(){yd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Om=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Im+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yd!==void 0&&Om!==void 0&&this.internal.out("/Names <</JavaScript "+yd+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],d=s.exec(u);if(d!=null){var p=d[1];t.internal.newObjectDeferredBegin(p,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,x=[];for(o=0;o<g;o++){var w=t.internal.newObject();x.push(w);var S=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<x.length;o++)t.internal.write("(page_"+(o+1)+")"+x[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var p=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var g=0;g<s.children.length;g++)this.renderItems(s.children[g])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(_t.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,d){var p,g=this.decode.DCT_DECODE,x=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,p=(function(w){for(var S,y=256*w.charCodeAt(4)+w.charCodeAt(5),E=w.length,C={width:0,height:0,numcomponents:1},L=4;L<E;L+=2){if(L+=y,e.indexOf(w.charCodeAt(L+1))!==-1){S=256*w.charCodeAt(L+5)+w.charCodeAt(L+6),C={width:256*w.charCodeAt(L+7)+w.charCodeAt(L+8),height:S,numcomponents:w.charCodeAt(L+9)};break}y=256*w.charCodeAt(L+2)+w.charCodeAt(L+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),p.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}x={data:t,width:p.width,height:p.height,colorSpace:d,bitsPerComponent:8,filter:g,index:s,alias:a}}return x}})(_t.API),_t.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=Ob(n,{checkCrc:!0}),u=o.width,d=o.height,p=o.channels,g=o.palette,x=o.depth;a=g&&p===1?(function($){for(var J=$.width,ne=$.height,O=$.data,T=$.palette,te=$.depth,H=!1,Q=[],X=[],pe=void 0,G=!1,ce=0,ve=0;ve<T.length;ve++){var Y=Up(T[ve],4),P=Y[0],F=Y[1],V=Y[2],ie=Y[3];Q.push(P,F,V),ie!=null&&(ie===0?(ce++,X.length<1&&X.push(ve)):ie<255&&(G=!0))}if(G||ce>1){H=!0,X=void 0;var ue=J*ne;pe=new Uint8Array(ue);for(var me=new DataView(O.buffer),ye=0;ye<ue;ye++){var xe=lf(me,ye,te),ge=Up(T[xe],4)[3];pe[ye]=ge}}else ce===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:H?8:void 0,colorBytes:O,alphaBytes:pe,needSMask:H,palette:Q,mask:X}})(o):p===2||p===4?(function($){for(var J=$.data,ne=$.width,O=$.height,T=$.channels,te=$.depth,H=T===2?"DeviceGray":"DeviceRGB",Q=T-1,X=ne*O,pe=Q,G=X*pe,ce=1*X,ve=Math.ceil(G*te/8),Y=Math.ceil(ce*te/8),P=new Uint8Array(ve),F=new Uint8Array(Y),V=new DataView(J.buffer),ie=new DataView(P.buffer),ue=new DataView(F.buffer),me=!1,ye=0;ye<X;ye++){for(var xe=ye*T,ge=0;ge<pe;ge++)Wm(ie,lf(V,xe+ge,te),ye*pe+ge,te);var Ie=lf(V,xe+pe,te);Ie<(1<<te)-1&&(me=!0),Wm(ue,Ie,1*ye,te)}return{colorSpace:H,colorsPerPixel:Q,sMaskBitsPerComponent:me?te:void 0,colorBytes:P,alphaBytes:F,needSMask:me}})(o):(function($){var J=$.data,ne=$.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ne,colorsPerPixel:ne==="DeviceGray"?1:3,colorBytes:J instanceof Uint16Array?(function(O){for(var T=O.length,te=new Uint8Array(2*T),H=new DataView(te.buffer,te.byteOffset,te.byteLength),Q=0;Q<T;Q++)H.setUint16(2*Q,O[Q],!1);return te})(J):J,needSMask:!1}})(o);var w,S,y,E=a,C=E.colorSpace,L=E.colorsPerPixel,A=E.sMaskBitsPerComponent,U=E.colorBytes,R=E.alphaBytes,z=E.needSMask,he=E.palette,le=E.mask,ee=null;return s!==_t.API.image_compression.NONE&&typeof Af=="function"?(ee=(function($){var J;switch($){case _t.API.image_compression.FAST:J=11;break;case _t.API.image_compression.MEDIUM:J=13;break;case _t.API.image_compression.SLOW:J=14;break;default:J=12}return J})(s),w=this.decode.FLATE_DECODE,S="/Predictor ".concat(ee," /Colors ").concat(L," /BitsPerComponent ").concat(x," /Columns ").concat(u),n=Um(U,Math.ceil(u*L*x/8),L,x,s),z&&(y=Um(R,Math.ceil(u*A/8),1,A,s))):(w=void 0,S=void 0,n=U,z&&(y=R)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:n,index:e,filter:w,decodeParameters:S,transparency:le,palette:he,sMask:y,predictor:ee,width:u,height:d,bitsPerComponent:x,sMaskBitsPerComponent:A,colorSpace:C}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new t5(e),u=o.width,d=o.height,p=[];o.decodeAndBlitFrameRGBA(0,p);var g={data:p,width:u,height:d},x=new cf(100).encode(g,100);return n.processJPEG.call(this,x,t,s,a)},n.processGIF87A=n.processGIF89A})(_t.API),ya.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ya.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Lr.log("bit decode error:"+t)}},ya.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var p=this.palette[o>>7-d&1];this.data[u+4*d]=p.blue,this.data[u+4*d+1]=p.green,this.data[u+4*d+2]=p.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ya.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,d=o>>4,p=15&o,g=this.palette[d];if(this.data[u]=g.blue,this.data[u+1]=g.green,this.data[u+2]=g.red,this.data[u+3]=255,2*a+1>=this.width)break;g=this.palette[p],this.data[u+4]=g.blue,this.data[u+4+1]=g.green,this.data[u+4+2]=g.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},ya.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ya.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,p=(o>>10&e)/e*255|0,g=o>>15?255:0,x=s*this.width*4+4*a;this.data[x]=p,this.data[x+1]=d,this.data[x+2]=u,this.data[x+3]=g}this.pos+=n}},ya.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,p=(u>>5&t)/t*255|0,g=(u>>11)/e*255|0,x=a*this.width*4+4*o;this.data[x]=g,this.data[x+1]=p,this.data[x+2]=d,this.data[x+3]=255}this.pos+=n}},ya.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},ya.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=u}},ya.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new ya(e,!1),u=o.width,d=o.height,p={data:o.getData(),width:u,height:d},g=new cf(100).encode(p,100);return n.processJPEG.call(this,g,t,s,a)}})(_t.API),Vm.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Vm(e),u=o.width,d=o.height,p={data:o.getData(),width:u,height:d},g=new cf(100).encode(p,100);return n.processJPEG.call(this,g,t,s,a)}})(_t.API),_t.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),d=0,p=0,g=0;g<a;g+=4){var x=s[g],w=s[g+1],S=s[g+2],y=s[g+3];o[d++]=x,o[d++]=w,o[d++]=S,u[p++]=y}var E=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},_t.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kc=_t.API,bd=kc.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:a.metadata.Unicode.widths,p=d.fof?d.fof:1,g=e.kerning?e.kerning:a.metadata.Unicode.kerning,x=g.fof?g.fof:1,w=e.doKerning!==!1,S=0,y=n.length,E=0,C=d[0]||p,L=[];for(t=0;t<y;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?L.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(S=w&&br(g[s])==="object"&&!isNaN(parseInt(g[s][E],10))?g[s][E]/x:0,L.push((d[s]||C)/p+S)),E=s;return L},Fm=kc.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return kc.processArabic&&(n=kc.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:bd.apply(this,arguments).reduce(function(o,u){return o+u},0)},Rm=function(n,e,t,s){for(var a=[],o=0,u=n.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;a.push(n.slice(0,o));var p=o;for(d=0;o!==u;)d+e[o]>s&&(a.push(n.slice(p,o)),d=0,p=o),d+=e[o],o++;return p!==o&&a.push(n.slice(p,o)),a},Mm=function(n,e,t){t||(t={});var s,a,o,u,d,p,g,x=[],w=[x],S=t.textIndent||0,y=0,E=0,C=n.split(" "),L=bd.apply(this,[" ",t])[0];if(p=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var A=Array(p).join(" "),U=[];C.map(function(z){(z=z.split(/\s*\n/)).length>1?U=U.concat(z.map(function(he,le){return(le&&he.length?`
`:"")+he})):U.push(z[0])}),C=U,p=Fm.apply(this,[A,t])}for(o=0,u=C.length;o<u;o++){var R=0;if(s=C[o],p&&s[0]==`
`&&(s=s.substr(1),R=1),S+y+(E=(a=bd.apply(this,[s,t])).reduce(function(z,he){return z+he},0))>e||R){if(E>e){for(d=Rm.apply(this,[s,a,e-(S+y),e]),x.push(d.shift()),x=[d.pop()];d.length;)w.push([d.shift()]);E=a.slice(s.length-(x[0]?x[0].length:0)).reduce(function(z,he){return z+he},0)}else x=[s];w.push(x),S=E+p,y=L}else x.push(s),S+=y+E,y=L}return g=p?function(z,he){return(he?A:"")+z.join(" ")}:function(z){return z.join(" ")},w.map(g)},kc.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var w=this.internal.getFont(x.fontName,x.fontStyle),S="Unicode";return w.metadata[S]?{widths:w.metadata[S].widths||{0:1},kerning:w.metadata[S].kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var d,p,g=[];for(d=0,p=s.length;d<p;d++)g=g.concat(Mm.apply(this,[s[d],u,o]));return g},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(S){return"0x"+parseInt(S,10).toString(16)},d=n.__fontmetrics__.compress=function(S){var y,E,C,L,A=["{"];for(var U in S){if(y=S[U],isNaN(parseInt(U,10))?E="'"+U+"'":(U=parseInt(U,10),E=(E=u(U).slice(2)).slice(0,-1)+a[E.slice(-1)]),typeof y=="number")y<0?(C=u(y).slice(3),L="-"):(C=u(y).slice(2),L=""),C=L+C.slice(0,-1)+a[C.slice(-1)];else{if(br(y)!=="object")throw new Error("Don't know what to do with value type "+br(y)+".");C=d(y)}A.push(E+C)}return A.push("}"),A.join("")},p=n.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,E,C,L,A={},U=1,R=A,z=[],he="",le="",ee=S.length-1,$=1;$<ee;$+=1)(L=S[$])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(L):L=="{"?(z.push([R,C]),R={},C=void 0):L=="}"?((E=z.pop())[0][E[1]]=R,C=void 0,R=E[0]):L=="-"?U=-1:C===void 0?s.hasOwnProperty(L)?(he+=s[L],C=parseInt(he,16)*U,U=1,he=""):he+=L:s.hasOwnProperty(L)?(le+=s[L],R[C]=parseInt(le,16)*U,U=1,C=void 0,le=""):le+=L;return A},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},w={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(S){var y=S.font,E=w.Unicode[y.postScriptName];E&&(y.metadata.Unicode={},y.metadata.Unicode.widths=E.widths,y.metadata.Unicode.kerning=E.kerning);var C=x.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])})(_t.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Nd(d)),u.metadata=n.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(_t),_t.API.addSvgAsImage=function(n,e,t,s,a,o,u,d){if(isNaN(e)||isNaN(t))throw Lr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Lr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var g=p.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,p.width,p.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return(Mt.canvg?Promise.resolve(Mt.canvg):Zo(()=>import("./index.es-bZ901yoS.js"),[])).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(g,n,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(x)}).then(function(){w.addImage(p.toDataURL("image/jpeg",1),e,t,s,a,u,d)})},_t.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},_t.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),p=[],g=0,x=0,w=0;function S(E,C){var L,A=!1;for(L=0;L<E.length;L+=1)E[L]===C&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var y=d.length;for(w=0;w<y;w+=1)t[d[w]].value=t[d[w]].defaultValue,t[d[w]].explicitSet=!1}if(br(n)==="object"){for(a in n)if(o=n[a],S(d,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&S(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(g=0;g<o.length;g+=1)if(s=!0,o[g].length===1&&typeof o[g][0]=="number")p.push(String(o[g]-1));else if(o[g].length>1){for(x=0;x<o[g].length;x+=1)typeof o[g][x]!="number"&&(s=!1);s===!0&&p.push([o[g][0]-1,o[g][1]-1].join(" "))}t[a].value="["+p.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,C=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?C.push("/"+E+" /"+t[E].value):C.push("/"+E+" "+t[E].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),g=o.length+u.length+d.length+a.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+d+p),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(_t.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var d,p=u.metadata.Unicode.widths,g=["","0","00","000","0000"],x=[""],w=0,S=o.length;w<S;++w){if(d=u.metadata.characterToGlyph(o.charCodeAt(w)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(w),p.indexOf(d)==-1&&(p.push(d),p.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return x.join("");d=d.toString(16),x.push(g[4-d.length],d)}return x.join("")},s=function(o){var u,d,p,g,x,w,S;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],w=0,S=(d=Object.keys(o).sort(function(y,E){return y-E})).length;w<S;w++)u=d[w],p.length>=100&&(x+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(g=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),p.push("<"+u+"><"+g+">"));return p.length&&(x+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),x+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,p=u.out,g=u.newObject,x=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var w=d.metadata.Unicode.widths,S=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",E=0;E<S.length;E++)y+=String.fromCharCode(S[E]);var C=g();x({data:y,addLength1:!0,objectId:C}),p("endobj");var L=g();x({data:s(d.metadata.toUnicode),addLength1:!0,objectId:L}),p("endobj");var A=g();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Pc(d.fontName)),p("/FontFile2 "+C+" 0 R"),p("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),p("/Flags "+d.metadata.flags),p("/StemV "+d.metadata.stemV),p("/ItalicAngle "+d.metadata.italicAngle),p("/Ascent "+d.metadata.ascender),p("/Descent "+d.metadata.decender),p("/CapHeight "+d.metadata.capHeight),p(">>"),p("endobj");var U=g();p("<<"),p("/Type /Font"),p("/BaseFont /"+Pc(d.fontName)),p("/FontDescriptor "+A+" 0 R"),p("/W "+n.API.PDFObject.convert(w)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+d.encoding+")"),p(">>"),p(">>"),p("endobj"),d.objectNumber=g(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+L+" 0 R"),p("/BaseFont /"+Pc(d.fontName)),p("/Encoding /"+d.encoding),p("/DescendantFonts ["+U+" 0 R]"),p(">>"),p("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,p=u.out,g=u.newObject,x=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var w=d.metadata.rawData,S="",y=0;y<w.length;y++)S+=String.fromCharCode(w[y]);var E=g();x({data:S,addLength1:!0,objectId:E}),p("endobj");var C=g();x({data:s(d.metadata.toUnicode),addLength1:!0,objectId:C}),p("endobj");var L=g();p("<<"),p("/Descent "+d.metadata.decender),p("/CapHeight "+d.metadata.capHeight),p("/StemV "+d.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+E+" 0 R"),p("/Flags 96"),p("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),p("/FontName /"+Pc(d.fontName)),p("/ItalicAngle "+d.metadata.italicAngle),p("/Ascent "+d.metadata.ascender),p(">>"),p("endobj"),d.objectNumber=g();for(var A=0;A<d.metadata.hmtx.widths.length;A++)d.metadata.hmtx.widths[A]=parseInt(d.metadata.hmtx.widths[A]*(1e3/d.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+Pc(d.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),p("endobj"),d.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,d=o.text||"",p=o.x,g=o.y,x=o.options||{},w=o.mutex||{},S=w.pdfEscape,y=w.activeFontKey,E=w.fonts,C=y,L="",A=0,U="",R=E[C].encoding;if(E[C].encoding!=="Identity-H")return{text:d,x:p,y:g,options:x,mutex:w};for(U=d,C=y,Array.isArray(d)&&(U=d[0]),A=0;A<U.length;A+=1)E[C].metadata.hasOwnProperty("cmap")&&(u=E[C].metadata.cmap.unicode.codeMap[U[A].charCodeAt(0)]),u||U[A].charCodeAt(0)<256&&E[C].metadata.hasOwnProperty("Unicode")?L+=U[A]:L+="";var z="";return parseInt(C.slice(1))<14||R==="WinAnsiEncoding"?z=S(L,C).split("").map(function(he){return he.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(z=t(L,E[C])),w.isHex=!0,{text:z,x:p,y:g,options:x,mutex:w}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],p={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var g=0;for(g=0;g<u.length;g+=1)Array.isArray(u[g])&&u[g].length===3?d.push([a(Object.assign({},p,{text:u[g][0]})).text,u[g][1],u[g][2]]):d.push(a(Object.assign({},p,{text:u[g]})).text);o.text=d}else o.text=a(Object.assign({},p,{text:u})).text}])})(_t),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(_t.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,d,p,g,x,w=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,R=0;this.__bidiEngine__={};var z=function(O){var T=O.charCodeAt(),te=T>>8,H=C[te];return H!==void 0?w[256*H+(255&T)]:te===252||te===253?"AL":A.test(te)?"L":te===8?"R":"N"},he=function(O){for(var T,te=0;te<O.length;te++){if((T=z(O.charAt(te)))==="L")return!1;if(T==="R")return!0}return!1},le=function(O,T,te,H){var Q,X,pe,G,ce=T[H];switch(ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"N":case"AN":break;case"EN":U&&(ce="AN");break;case"AL":U=!0,ce="R";break;case"WS":case"BN":ce="N";break;case"CS":H<1||H+1>=T.length||(Q=te[H-1])!=="EN"&&Q!=="AN"||(X=T[H+1])!=="EN"&&X!=="AN"?ce="N":U&&(X="AN"),ce=X===Q?X:"N";break;case"ES":ce=(Q=H>0?te[H-1]:"B")==="EN"&&H+1<T.length&&T[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&te[H-1]==="EN"){ce="EN";break}if(U){ce="N";break}for(pe=H+1,G=T.length;pe<G&&T[pe]==="ET";)pe++;ce=pe<G&&T[pe]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(G=T.length,pe=H+1;pe<G&&T[pe]==="NSM";)pe++;if(pe<G){var ve=O[H],Y=ve>=1425&&ve<=2303||ve===64286;if(Q=T[pe],Y&&(Q==="R"||Q==="AL")){ce="R";break}}}ce=H<1||(Q=T[H-1])==="B"?"N":te[H-1];break;case"B":U=!1,a=!0,ce=R;break;case"S":o=!0,ce="N"}return ce},ee=function(O,T,te){var H=O.split("");return te&&$(H,te,{hiLevel:R}),H.reverse(),T&&T.reverse(),H.join("")},$=function(O,T,te){var H,Q,X,pe,G,ce=-1,ve=O.length,Y=0,P=[],F=R?y:S,V=[];for(U=!1,a=!1,o=!1,Q=0;Q<ve;Q++)V[Q]=z(O[Q]);for(X=0;X<ve;X++){if(G=Y,P[X]=le(O,V,P,X),H=240&(Y=F[G][E[P[X]]]),Y&=15,T[X]=pe=F[Y][5],H>0)if(H===16){for(Q=ce;Q<X;Q++)T[Q]=1;ce=-1}else ce=-1;if(F[Y][6])ce===-1&&(ce=X);else if(ce>-1){for(Q=ce;Q<X;Q++)T[Q]=pe;ce=-1}V[X]==="B"&&(T[X]=0),te.hiLevel|=pe}o&&(function(ie,ue,me){for(var ye=0;ye<me;ye++)if(ie[ye]==="S"){ue[ye]=R;for(var xe=ye-1;xe>=0&&ie[xe]==="WS";xe--)ue[xe]=R}})(V,T,ve)},J=function(O,T,te,H,Q){if(!(Q.hiLevel<O)){if(O===1&&R===1&&!a)return T.reverse(),void(te&&te.reverse());for(var X,pe,G,ce,ve=T.length,Y=0;Y<ve;){if(H[Y]>=O){for(G=Y+1;G<ve&&H[G]>=O;)G++;for(ce=Y,pe=G-1;ce<pe;ce++,pe--)X=T[ce],T[ce]=T[pe],T[pe]=X,te&&(X=te[ce],te[ce]=te[pe],te[pe]=X);Y=G}Y++}}},ne=function(O,T,te){var H=O.split(""),Q={hiLevel:R};return te||(te=[]),$(H,te,Q),(function(X,pe,G){if(G.hiLevel!==0&&x)for(var ce,ve=0;ve<X.length;ve++)pe[ve]===1&&(ce=L.indexOf(X[ve]))>=0&&(X[ve]=L[ce+1])})(H,te,Q),J(2,H,T,te,Q),J(1,H,T,te,Q),H.join("")};return this.__bidiEngine__.doBidiReorder=function(O,T,te){if((function(Q,X){if(X)for(var pe=0;pe<Q.length;pe++)X[pe]=pe;d===void 0&&(d=he(Q)),g===void 0&&(g=he(Q))})(O,T),u||!p||g)if(u&&p&&d^g)R=d?1:0,O=ee(O,T,te);else if(!u&&p&&g)R=d?1:0,O=ne(O,T,te),O=ee(O,T);else if(!u||d||p||g){if(u&&!p&&d^g)O=ee(O,T),d?(R=0,O=ne(O,T,te)):(R=1,O=ne(O,T,te),O=ee(O,T));else if(u&&d&&!p&&g)R=1,O=ne(O,T,te),O=ee(O,T);else if(!u&&!p&&d^g){var H=x;d?(R=1,O=ne(O,T,te),R=0,x=!1,O=ne(O,T,te),x=H):(R=0,O=ne(O,T,te),O=ee(O,T),R=1,x=!1,O=ne(O,T,te),x=H,O=ee(O,T))}}else R=0,O=ne(O,T,te);else R=d?1:0,O=ne(O,T,te);return O},this.__bidiEngine__.setOptions=function(O){O&&(u=O.isInputVisual,p=O.isOutputVisual,d=O.isInputRtl,g=O.isOutputRtl,x=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(u=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?u.push([t.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):u.push([t.doBidiReorder(a[d])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(_t),_t.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new tl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new g5(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new r5(this.contents),this.head=new s5(this),this.name=new c5(this),this.cmap=new c1(this),this.toUnicode={},this.hhea=new i5(this),this.maxp=new u5(this),this.hmtx=new d5(this),this.post=new o5(this),this.os2=new a5(this),this.loca=new m5(this),this.glyf=new h5(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,p,g;for(g=[],u=0,d=(p=this.bbox).length;u<d;u++)e=p[u],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var ka,tl=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,d,p;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),p=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^p)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*d+p},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),r5=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,d,p,g,x,w,S,y,E,C;for(C in y=Object.keys(t).length,p=Math.log(2),w=16*Math.floor(Math.log(y)/p),u=Math.floor(w/p),x=16*y-w,(a=new tl).writeInt(this.scalarType),a.writeShort(y),a.writeShort(w),a.writeShort(u),a.writeShort(x),o=16*y,g=a.pos+o,d=null,E=[],t)for(S=t[C],a.writeString(C),a.writeInt(n(S)),a.writeInt(g),a.writeInt(S.length),E=E.concat(S),C==="head"&&(d=g),g+=S.length;g%4;)E.push(0),g++;return a.write(E),s=2981146554-n(a.data),a.pos=d+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=u1.call(t);t.length%4;)t.push(0);for(o=new tl(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),n5={}.hasOwnProperty,Ha=function(n,e){for(var t in e)n5.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};ka=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var s5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new tl).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Gm=(function(){function n(e,t){var s,a,o,u,d,p,g,x,w,S,y,E,C,L,A,U,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=e.readByte();break;case 4:for(y=e.readUInt16(),S=y/2,e.pos+=6,o=(function(){var z,he;for(he=[],p=z=0;0<=S?z<S:z>S;p=0<=S?++z:--z)he.push(e.readUInt16());return he})(),e.pos+=2,C=(function(){var z,he;for(he=[],p=z=0;0<=S?z<S:z>S;p=0<=S?++z:--z)he.push(e.readUInt16());return he})(),g=(function(){var z,he;for(he=[],p=z=0;0<=S?z<S:z>S;p=0<=S?++z:--z)he.push(e.readUInt16());return he})(),x=(function(){var z,he;for(he=[],p=z=0;0<=S?z<S:z>S;p=0<=S?++z:--z)he.push(e.readUInt16());return he})(),a=(this.length-e.pos+this.offset)/2,d=(function(){var z,he;for(he=[],p=z=0;0<=a?z<a:z>a;p=0<=a?++z:--z)he.push(e.readUInt16());return he})(),p=A=0,R=o.length;A<R;p=++A)for(L=o[p],s=U=E=C[p];E<=L?U<=L:U>=L;s=E<=L?++U:--U)x[p]===0?u=s+g[p]:(u=d[x[p]/2+(s-E)-(S-p)]||0)!==0&&(u+=g[p]),this.codeMap[s]=65535&u}e.pos=w}return n.encode=function(e,t){var s,a,o,u,d,p,g,x,w,S,y,E,C,L,A,U,R,z,he,le,ee,$,J,ne,O,T,te,H,Q,X,pe,G,ce,ve,Y,P,F,V,ie,ue,me,ye,xe,ge,Ie,Re;switch(H=new tl,u=Object.keys(e).sort(function(We,Ve){return We-Ve}),t){case"macroman":for(C=0,L=(function(){var We=[];for(E=0;E<256;++E)We.push(0);return We})(),U={0:0},o={},Q=0,ce=u.length;Q<ce;Q++)U[xe=e[a=u[Q]]]==null&&(U[xe]=++C),o[a]={old:e[a],new:U[e[a]]},L[a]=U[e[a]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(L),{charMap:o,subtable:H.data,maxGlyphID:C+1};case"unicode":for(T=[],w=[],R=0,U={},s={},A=g=null,X=0,ve=u.length;X<ve;X++)U[he=e[a=u[X]]]==null&&(U[he]=++R),s[a]={old:he,new:U[he]},d=U[he]-a,A!=null&&d===g||(A&&w.push(A),T.push(a),g=d),A=a;for(A&&w.push(A),w.push(65535),T.push(65535),ne=2*(J=T.length),$=2*Math.pow(Math.log(J)/Math.LN2,2),S=Math.log($/2)/Math.LN2,ee=2*J-$,p=[],le=[],y=[],E=pe=0,Y=T.length;pe<Y;E=++pe){if(O=T[E],x=w[E],O===65535){p.push(0),le.push(0);break}if(O-(te=s[O].new)>=32768)for(p.push(0),le.push(2*(y.length+J-E)),a=G=O;O<=x?G<=x:G>=x;a=O<=x?++G:--G)y.push(s[a].new);else p.push(te-O),le.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*J+2*y.length),H.writeUInt16(0),H.writeUInt16(ne),H.writeUInt16($),H.writeUInt16(S),H.writeUInt16(ee),me=0,P=w.length;me<P;me++)a=w[me],H.writeUInt16(a);for(H.writeUInt16(0),ye=0,F=T.length;ye<F;ye++)a=T[ye],H.writeUInt16(a);for(ge=0,V=p.length;ge<V;ge++)d=p[ge],H.writeUInt16(d);for(Ie=0,ie=le.length;Ie<ie;Ie++)z=le[Ie],H.writeUInt16(z);for(Re=0,ue=y.length;Re<ue;Re++)C=y[Re],H.writeUInt16(C);return{charMap:s,subtable:H.data,maxGlyphID:R+1}}},n})(),c1=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Gm(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Gm.encode(e,t),(a=new tl).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),i5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),a5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),o5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,d,p;for(p=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)p.push(e.readUInt32());return p}).call(this)}},n})(),l5=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},c5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,d,p,g,x,w,S;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(p={},o=x=0,w=s.length;x<w;o=++x)a=s[o],e.pos=a.offset,g=e.readString(a.length),u=new l5(g,a),p[S=a.nameID]==null&&(p[S]=[]),p[a.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},n})(),u5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),d5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,d,p;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var g,x;for(x=[],t=g=0;0<=a?g<a:g>a;t=0<=a?++g:--g)x.push(e.readInt16());return x})(),this.widths=(function(){var g,x,w,S;for(S=[],g=0,x=(w=this.metrics).length;g<x;g++)o=w[g],S.push(o.advance);return S}).call(this),s=this.widths[this.widths.length-1],p=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)p.push(this.widths.push(s));return p},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),u1=[].slice,h5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,d,p,g,x,w;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(d=new tl(t.read(a))).readShort(),g=d.readShort(),w=d.readShort(),p=d.readShort(),x=d.readShort(),this.cache[e]=u===-1?new p5(d,g,w,p,x):new f5(d,u,g,w,p,x),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,d,p;for(u=[],o=[],d=0,p=t.length;d<p;d++)a=e[t[d]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),f5=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),p5=(function(){function n(e,t,s,a,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new tl(u1.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),m5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ha(n,ka),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var d=this.offsets[u],p=this.offsets[u+1]-d;p>0&&(a+=p)}for(var g=new Array(4*s.length),x=0;x<s.length;++x)g[4*x+3]=255&s[x],g[4*x+2]=(65280&s[x])>>8,g[4*x+1]=(16711680&s[x])>>16,g[4*x]=(4278190080&s[x])>>24;return g},n})(),g5=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,d,p;for(a={},u=0,d=e.length;u<d;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in p=this.glyphsFor(t))s=p[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,d,p,g,x,w,S,y,E,C,L,A;for(a in s=c1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},A=s.charMap)y[(p=A[a]).old]=p.new;for(E in S=s.maxGlyphID,u)E in y||(y[E]=S++);return x=(function(U){var R,z;for(R in z={},U)z[U[R]]=R;return z})(y),w=Object.keys(x).sort(function(U,R){return U-R}),C=(function(){var U,R,z;for(z=[],U=0,R=w.length;U<R;U++)d=w[U],z.push(x[d]);return z})(),o=this.font.glyf.encode(u,C,y),g=this.font.loca.encode(o.offsets,C),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();_t.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var d,p,g;for(g=[],d=0,p=t.length;d<p;d++)s=t[d],g.push(e.convert(s));return g})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();function Ym(n){const e=new Date(n);return Number.isNaN(e.getTime())?new Date().toISOString().slice(0,10):e.toISOString().slice(0,10)}function v5(n){if(!n)return"N/A";const e=n.toLowerCase();return e==="dog"?"Dog":e==="cat"?"Cat":n}function d1(n){const e=parseFloat(String(n||"").replace(/[^0-9.\-]/g,""));return Number.isFinite(e)?e:0}function x5(n){return`$${d1(n).toFixed(2)}`}function y5(n){return`$${(Number.isFinite(n)?n:0).toFixed(2)}`}function b5(n,e){const t=new _t({unit:"pt",format:"letter"}),s=56,a=556,o=a-s;let u=64;const d=le=>{t.setFont("helvetica","bold"),t.setFontSize(18),t.text(le,s,u),u+=18,t.setDrawColor(64),t.setLineWidth(1),t.line(s,u+10,a,u+10),u+=24},p=(le,ee)=>{t.setFont("helvetica","bold"),t.setFontSize(11),t.text(le,s,u),t.setFont("helvetica","normal"),t.setFontSize(11),t.text(ee||"",s+160,u),u+=18},g=le=>{t.setFont("helvetica","bold"),t.setFontSize(13),t.text(le,s,u),u+=14};d("Pet Insurance Claim Form"),g("Insurance Information"),p("Company",e?.insuranceCompany||"N/A"),p("Policy Number",e?.policyNumber||"N/A"),p("Invoice Number",n.invoiceNumber||"N/A"),u+=8,g("Pet Owner Information"),p("Owner Name",e?.ownerName||"N/A"),p("Phone",e?.ownerPhone||"N/A"),u+=8,g("Pet Information"),p("Pet Name",n.petName||e?.name||"N/A"),p("Species",v5(e?.species)),u+=8,g("Veterinary Clinic"),p("Clinic Name",n.clinicName||"N/A"),p("Clinic Address",n.clinicAddress||"N/A"),u+=8,g("Service Details"),p("Date of Service",n.dateOfService||Ym(new Date().toISOString())),p("Diagnosis / Reason",n.diagnosis||"N/A"),u+=8,g("Itemized Charges");const x=Math.floor(o*.7),w=s,S=a,y=14;t.setFont("helvetica","bold"),t.text("Description",w,u),t.text("Amount",S,u,{align:"right"}),u+=14,t.setDrawColor(200),t.line(s,u,a,u),u+=10,n.lineItems.forEach(le=>{const ee=le.description||"",$=x5(le.amount);t.setFont("helvetica","normal"),t.setFontSize(11);const J=t.splitTextToSize(ee,x);t.setFont("courier","normal"),t.text($,S,u,{align:"right"}),t.setFont("helvetica","normal"),J.forEach((ne,O)=>{t.text(ne,w,u+O*y)}),u+=Math.max(y,J.length*y),u+=2}),n.lineItems.length===0&&(t.setFont("helvetica","normal"),t.text("No items",w,u),u+=16),u+=6,t.setDrawColor(64),t.line(s,u,a,u),u+=14,t.setFont("helvetica","bold"),t.text("Total",w,u),t.setFont("courier","bold"),t.text(y5(d1(n.totalAmount)),S,u,{align:"right"}),u+=24,t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(120);const E=742;t.setTextColor(40),t.setFont("helvetica","bold"),t.text("Filing Deadline Reminder",s,E),t.setFont("helvetica","normal"),t.setTextColor(80),t.setFontSize(9);const L=t.splitTextToSize("Most pet insurance requires claims to be filed within 60180 days of service. This is a general reminder only. Always verify your specific deadline with your insurance provider.",a-s);t.text(L,s,E+14),t.setTextColor(120),t.text("Generated by Pet Claim Helper - petclaimhelper.com",s,760);const A=Ym(n.dateOfService||new Date().toISOString()),U=(n.petName||e?.name||"Pet").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),R=(e?.insuranceCompany||"Insurance").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),z=`${U}_${R}_claim_${A}.pdf`,he=new Blob([t.output("arraybuffer")],{type:"application/pdf"});return{filename:z,blob:he}}function w5(n,e){const t={clinicName:n.clinicName,clinicAddress:n.clinicAddress,petName:n.petName,dateOfService:n.dateOfService,totalAmount:n.subtotal,diagnosis:n.diagnosis,lineItems:n.lineItems,invoiceNumber:n.invoiceNumber};return b5(t,e)}function h1({open:n,onClose:e,onSaved:t,userId:s,pets:a,defaultPetId:o,medicationId:u,editMode:d=!1}){const[p,g]=fe.useState(""),[x,w]=fe.useState(""),[S,y]=fe.useState(""),[E,C]=fe.useState("Once daily"),[L,A]=fe.useState(["08:00"]),[U,R]=fe.useState(1),[z,he]=fe.useState(1),[le,ee]=fe.useState("7"),[$,J]=fe.useState(7),[ne,O]=fe.useState(null),[T,te]=fe.useState(!1),[H,Q]=fe.useState(null),[X,pe]=fe.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),G=fe.useRef(!1);fe.useEffect(()=>{if(n&&!G.current){d&&u?(te(!0),Ze.from("medications").select("*").eq("id",u).single().then(({data:F,error:V})=>{if(V||!F){Q("Failed to load medication data"),te(!1);return}g(F.pet_id||""),w(F.medication_name||""),y(F.dosage||""),C(F.frequency||"Once daily"),O(F.start_date||null);const ie=F.reminder_times;if(Array.isArray(ie))A(ie.length>0?ie:["08:00"]);else if(ie&&typeof ie=="object"){const ue=ie;ue.type==="weekly"?(R(ue.dayOfWeek??1),A([ue.time??"08:00"])):ue.type==="monthly"||ue.type==="quarterly"?(he(ue.dayOfMonth??1),A([ue.time??"08:00"])):ue.type==="as_needed"&&A([])}else A(["08:00"]);if(F.end_date===null)ee("ongoing");else if(F.start_date&&F.end_date){const ue=new Date(F.start_date),me=new Date(F.end_date),ye=Math.round((me.getTime()-ue.getTime())/(1e3*60*60*24))+1;[7,14,30,90].includes(ye)?ee(String(ye)):(ee("custom"),J(ye))}te(!1),Q(null)}).catch(()=>{Q("Failed to load medication"),te(!1)})):(g(o||(a[0]?.id??"")),w(""),y(""),C("Once daily"),A(["08:00"]),R(1),he(1),ee("7"),J(7),O(null),te(!1),Q(null));try{console.log("[AddMedicationForm] Form opened. Initial timezone (from Intl):",X)}catch{}s&&Ze.from("profiles").select("timezone").eq("id",s).single().then(({data:F})=>{const V=F&&F.timezone?String(F.timezone):"";try{console.log("[AddMedicationForm] Profile timezone loaded:",V||"(empty)")}catch{}V&&pe(V)}).catch(()=>{})}G.current=n},[n,o,a,s,X,d,u]),fe.useEffect(()=>{if(!n)return;const F=document.body.style.overflow;document.body.style.overflow="hidden";const V=ie=>{ie.key==="Escape"&&e()};return window.addEventListener("keydown",V),()=>{document.body.style.overflow=F,window.removeEventListener("keydown",V)}},[n,e]),fe.useEffect(()=>{E==="Once daily"&&A(["08:00"]),E==="Twice daily"&&A(["08:00","20:00"]),E==="Three times daily"&&A(["08:00","14:00","20:00"]),E==="Weekly"&&A(["08:00"]),E==="Monthly"&&A(["08:00"]),E==="Every 3 months"&&A(["08:00"]),E==="As needed"&&A([])},[E]);const ce=fe.useMemo(()=>E==="Once daily"?1:E==="Twice daily"?2:E==="Three times daily"?3:E==="Weekly"||E==="Monthly"||E==="Every 3 months"?1:E==="As needed"?0:1,[E]),ve=(F,V)=>{const ie=(V||"").slice(0,5),ue=[...L];ue[F]=ie,A(ue)},Y=()=>{let F;if(d&&ne){const[Ve,re,Ye]=ne.split("-").map(Number);F=new Date(Ve,re-1,Ye)}else F=new Date;const V=F.getFullYear(),ie=String(F.getMonth()+1).padStart(2,"0"),ue=String(F.getDate()).padStart(2,"0"),me=`${V}-${ie}-${ue}`;if(le==="ongoing")return{start:me,end:null};let ye=le==="custom"?Math.max(1,Number($||1)):Number(le);(!Number.isFinite(ye)||ye<1)&&(ye=1);const xe=new Date(F.getTime());xe.setDate(xe.getDate()+(ye-1));const ge=xe.getFullYear(),Ie=String(xe.getMonth()+1).padStart(2,"0"),Re=String(xe.getDate()).padStart(2,"0"),We=`${ge}-${Ie}-${Re}`;return{start:me,end:We}},P=async F=>{if(F.preventDefault(),!s){Q("You must be logged in.");return}if(!p){Q("Please select a pet.");return}if(!x.trim()){Q("Enter medication name.");return}if(E!=="As needed"){if(L.some(V=>!/^\d{2}:\d{2}$/.test(V))){Q("Please select valid reminder times.");return}if(L.length!==ce){Q("Reminder times do not match selected frequency.");return}}te(!0),Q(null);try{const{start:V,end:ie}=Y(),ue=X||Intl.DateTimeFormat().resolvedOptions().timeZone;try{console.log("[AddMedicationForm] Submitting. Detected timezone:",ue),console.log("[AddMedicationForm] Times selected (will store as PST, no UTC conversion):",L)}catch{}let me;E==="Once daily"||E==="Twice daily"||E==="Three times daily"?me=L.filter(Boolean):E==="Weekly"?me={type:"weekly",dayOfWeek:U,time:L[0]||"08:00"}:E==="Monthly"?me={type:"monthly",dayOfMonth:z,time:L[0]||"08:00"}:E==="Every 3 months"?me={type:"quarterly",dayOfMonth:z,time:L[0]||"08:00"}:E==="As needed"?me={type:"as_needed"}:me=L.filter(Boolean);try{console.log("[AddMedicationForm] reminder_times to store:",me)}catch{}if(d&&u){const ye={medication_name:x.trim(),dosage:S.trim()||null,frequency:E,reminder_times:me,end_date:ie},{error:xe}=await Ze.from("medications").update(ye).eq("id",u).eq("user_id",s);if(xe)throw xe;t&&t(u)}else{const ye={user_id:s,pet_id:p,claim_id:null,medication_name:x.trim(),dosage:S.trim()||null,frequency:E,reminder_times:me,start_date:V,end_date:ie};try{console.log("[AddMedicationForm] Payload.reminder_times:",ye.reminder_times)}catch{}const{data:xe,error:ge}=await Ze.from("medications").insert(ye).select("id").single();try{console.log("[AddMedicationForm] Supabase insert completed. Error:",ge||null)}catch{}if(ge)throw ge;const Ie=xe?.id;t&&t(Ie)}e()}catch(V){Q(V?.message||"Failed to save medication")}finally{te(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:d?"Edit Medication":"Add Medication"}),l.jsx("button",{type:"button",className:"text-sm",onClick:e,children:"Close"})]}),H&&l.jsx("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:H}),l.jsxs("form",{className:"mt-4 space-y-4",onSubmit:P,children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet",d&&l.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(cannot be changed)"})]}),l.jsxs("select",{value:p,onChange:F=>g(F.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",disabled:d,children:[l.jsx("option",{value:"",children:" Select "}),a.map(F=>l.jsxs("option",{value:F.id,children:[F.name," (",F.species,")"]},F.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Medication name"}),l.jsx("input",{value:x,onChange:F=>w(F.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"Amoxicillin"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Dosage"}),l.jsx("input",{value:S,onChange:F=>y(F.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"1 pill"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Frequency"}),l.jsxs("select",{value:E,onChange:F=>C(F.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{children:"Once daily"}),l.jsx("option",{children:"Twice daily"}),l.jsx("option",{children:"Three times daily"}),l.jsx("option",{children:"Weekly"}),l.jsx("option",{children:"Monthly"}),l.jsx("option",{children:"Every 3 months"}),l.jsx("option",{children:"As needed"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Duration"}),l.jsxs("select",{value:le,onChange:F=>ee(F.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"14",children:"14 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"90",children:"90 days"}),l.jsx("option",{value:"ongoing",children:"Ongoing"}),l.jsx("option",{value:"custom",children:"Custom"})]})]})]}),le==="custom"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Custom days"}),l.jsx("input",{type:"number",min:1,value:$,onChange:F=>J(Number(F.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),E==="Weekly"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Day of week"}),l.jsxs("select",{value:U,onChange:F=>R(Number(F.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:0,children:"Sunday"}),l.jsx("option",{value:1,children:"Monday"}),l.jsx("option",{value:2,children:"Tuesday"}),l.jsx("option",{value:3,children:"Wednesday"}),l.jsx("option",{value:4,children:"Thursday"}),l.jsx("option",{value:5,children:"Friday"}),l.jsx("option",{value:6,children:"Saturday"})]})]}),(E==="Monthly"||E==="Every 3 months")&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Day of month"}),l.jsx("select",{value:z,onChange:F=>he(Number(F.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:Array.from({length:28},(F,V)=>V+1).map(F=>l.jsx("option",{value:F,children:F},F))})]}),E!=="As needed"&&l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Reminder time",ce>1?"s":""]}),l.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:Array.from({length:ce}).map((F,V)=>l.jsx("input",{type:"time",value:L[V]||"",onChange:ie=>ve(V,ie.target.value),className:"w-full min-w-[140px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"},V))})]}),E==="As needed"&&l.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"No reminders - log doses manually when needed"})}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",onClick:e,className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:T,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:T?"Saving":d?"Update Medication":"Save Medication"})]})]})]})}):null}const el=[{display:" Select ",value:""},{display:"Not Insured",value:""},{display:"Trupanion (90 days)",value:"Trupanion",deadlineDays:90},{display:"Nationwide (365 days)",value:"Nationwide",deadlineDays:365},{display:"Healthy Paws (90 days)",value:"Healthy Paws",deadlineDays:90},{display:"Pumpkin (270 days)",value:"Pumpkin",deadlineDays:270},{display:"Spot (270 days)",value:"Spot",deadlineDays:270},{display:"Figo (180 days)",value:"Figo",deadlineDays:180},{display:"Pets Best (90 days)",value:"Pets Best",deadlineDays:90},{display:"ASPCA (90 days)",value:"ASPCA",deadlineDays:90}];function Cc(n){const e=el.find(t=>t.display===n);return e?e.value:n===" Select "||n==="Not Insured"?"":n.replace(/\s*\(\d+\s*days?\).*$/i,"").trim()}function _5(n){if(!n||n==="")return"Not Insured";const e=el.find(t=>t.value===n);return e?e.display:n}function Yo(n){if(!n)return;let e=el.find(s=>s.value===n);if(e?.deadlineDays||(e=el.find(s=>s.display===n),e?.deadlineDays))return e.deadlineDays;const t=n.replace(/\s*\(\d+\s*days?\).*$/i,"").trim();if(t&&t!==n&&(e=el.find(s=>s.value===t),e?.deadlineDays))return e.deadlineDays}function N5({open:n,onClose:e,userId:t,userEmail:s}){const[a,o]=fe.useState(!1),[u,d]=fe.useState(null),[p,g]=fe.useState(""),[x,w]=fe.useState(""),[S,y]=fe.useState(""),[E,C]=fe.useState("Not Insured"),[L,A]=fe.useState(""),[U,R]=fe.useState(""),[z,he]=fe.useState("");fe.useEffect(()=>{n&&(o(!1),d(null),g(""),w(""),y(""),C("Not Insured"),A(""),R(""),he(""))},[n]);const le=fe.useMemo(()=>p.trim().length>0&&x.trim().length>0&&!!S&&E.length>0,[p,x,S,E]);fe.useEffect(()=>{if(!n)return;const $=document.body.style.overflow;document.body.style.overflow="hidden";const J=ne=>{ne.key==="Escape"&&e()};return window.addEventListener("keydown",J),()=>{document.body.style.overflow=$,window.removeEventListener("keydown",J)}},[n,e]);const ee=async()=>{o(!0),d(null);try{const $={id:t,full_name:p.trim(),email:s||"",onboarding_complete:!0},{error:J}=await Ze.from("profiles").upsert($,{onConflict:"id"}).select();if(J)throw J;let ne=null;if(U&&z){const te=String(U).padStart(2,"0");ne=`${z}-${te}-01`}const O=Cc(E),T={user_id:t,name:x.trim(),species:S||"other",insurance_company:O||null,monthly_premium:L===""?null:parseFloat(L),coverage_start_date:ne};await Px(T),localStorage.setItem("justCompletedOnboarding","true"),e()}catch($){d($?.message||"Failed to save your info. Please try again.")}finally{o(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-6 shadow-2xl max-h-[calc(100vh-40px)] overflow-y-auto",onClick:$=>$.stopPropagation(),children:[u&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:u}),l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Pet Claim Helper! "}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Quick setup - then we'll handle the insurance headaches for you."}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:p,onChange:$=>g($.target.value),placeholder:"John Smith",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:x,onChange:$=>w($.target.value),placeholder:"Max",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:S,onChange:$=>y($.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:["Insurance Company ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:E,onChange:$=>C($.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:el.map($=>l.jsx("option",{value:$.display,children:$.display},$.display))})]}),l.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Optional"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Track your complete pet expenses"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Monthly Premium (USD)"}),l.jsx("input",{type:"number",min:0,value:L,onChange:$=>A($.target.value),placeholder:"50",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Coverage Start"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{value:U,onChange:$=>R($.target.value),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:"Month"}),l.jsx("option",{value:"1",children:"January"}),l.jsx("option",{value:"2",children:"February"}),l.jsx("option",{value:"3",children:"March"}),l.jsx("option",{value:"4",children:"April"}),l.jsx("option",{value:"5",children:"May"}),l.jsx("option",{value:"6",children:"June"}),l.jsx("option",{value:"7",children:"July"}),l.jsx("option",{value:"8",children:"August"}),l.jsx("option",{value:"9",children:"September"}),l.jsx("option",{value:"10",children:"October"}),l.jsx("option",{value:"11",children:"November"}),l.jsx("option",{value:"12",children:"December"})]}),l.jsxs("select",{value:z,onChange:$=>he($.target.value),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:"Year"}),Array.from({length:10},($,J)=>new Date().getFullYear()-J).map($=>l.jsx("option",{value:$,children:$},$))]})]})]})]}),l.jsx("div",{className:"mt-3 text-center",children:l.jsx("button",{type:"button",onClick:()=>{A(""),R(""),he("")},className:"text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:"Skip for now"})})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!le||a,onClick:ee,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",children:a?"Saving":"Get Started"})]})]})]})}):null}function k5({userId:n,refreshToken:e,period:t}){const[s,a]=fe.useState(!1),[o,u]=fe.useState(null),[d,p]=fe.useState([]),[g,x]=fe.useState([]);fe.useEffect(()=>{console.log("[FinancialSummary]  useEffect triggered | userId:",n,"| refreshToken:",e),n&&(a(!0),u(null),console.log("[FinancialSummary]  Fetching claims and pets from database..."),Promise.all([Ze.from("claims").select("id, pet_id, total_amount, reimbursed_amount, filing_status, expense_category, service_date, created_at, deductible_applied, user_coinsurance_payment, insurance_reimbursement").eq("user_id",n),Ze.from("pets").select("id, name, species, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",n)]).then(([L,A])=>{if(L.error)throw L.error;if(A.error)throw A.error;console.log("[FinancialSummary] claims fetched:",L.data),console.log("[FinancialSummary] pets fetched:",A.data),p(L.data||[]),x(A.data||[])}).catch(L=>u(L?.message||"Failed to load financial data")).finally(()=>a(!1)))},[n,e]);const w=fe.useMemo(()=>{const L={};for(const A of g)L[A.id]=A;return L},[g]),S=L=>{if(!L)return null;const A=String(L).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!A)return null;const U=Number(A[1]),R=Number(A[2])-1,z=Number(A[3]),he=new Date(U,R,z);return isNaN(he.getTime())?null:he},y=(L,A)=>{const U=Number(L.monthly_premium)||0;if(U===0)return{total:0,monthsCount:0,context:"No insurance"};const R=S(L.coverage_start_date||null);if(!R)return{total:0,monthsCount:0,context:"No coverage start date"};const z=new Date,he=z.getFullYear(),le=z.getMonth(),ee=A!==null?A:null;if(ee!==null){if(R.getFullYear()>ee)return{total:0,monthsCount:0,context:`coverage started ${R.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`};if(ee>he)return{total:0,monthsCount:0,context:"future year"};const Q=new Date(ee,0,1),X=new Date(ee,11,31),pe=R>Q?R:Q,G=ee===he?new Date(he,le,z.getDate()):X,ce=(G.getFullYear()-pe.getFullYear())*12+(G.getMonth()-pe.getMonth()),ve=pe.getDate(),P=G.getDate()>=ve?1:0,F=Math.max(0,ce+P),V=U*F;let ie="";if(R.getFullYear()===ee&&R.getMonth()>0){const ue=R.toLocaleDateString("en-US",{month:"short"}),me=G.toLocaleDateString("en-US",{month:"short",year:"numeric"});ie=`${ue} - ${me}`}else ee===he&&F<12?ie=`Jan - ${G.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`:ie=`${ee}`;return{total:V,monthsCount:F,context:ie}}const $=(z.getFullYear()-R.getFullYear())*12+(z.getMonth()-R.getMonth()),J=R.getDate(),O=z.getDate()>=J?1:0,T=Math.max(0,$+O),te=U*T,H=`since ${R.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;return{total:te,monthsCount:T,context:H}},E=fe.useMemo(()=>{const L=new Date().getFullYear(),A=(()=>{const ne=String(t||"").toLowerCase();return ne==="2024"||ne==="2025"||ne==="2026"?Number(ne):ne==="all"?null:L})(),U=new Date,R=g.reduce((ne,O)=>{const T=y(O,A);return ne+T.total},0);let z=0,he=0,le=0,ee=0,$=0;for(const ne of d){const O=ne.service_date?S(ne.service_date)||new Date(ne.service_date):null;if(!O||isNaN(O.getTime())||A!==null&&O.getFullYear()!==A||O>U)continue;const T=String(ne.expense_category||"").toLowerCase(),te=String(ne.filing_status||"").toLowerCase(),H=Number(ne.total_amount)||0,Q=Math.max(0,Number(ne.reimbursed_amount)||0);T==="not_insured"||T==="not insured"?z+=H:T==="insured"&&te==="paid"?(he+=Q,ee+=H,le+=Math.max(0,H-Q)):T==="insured"&&(ee+=H,le+=Math.max(0,H-Q)),te==="submitted"&&($+=H)}const J=R+z+le;return{premiumsYTD:R,nonInsuredTotal:z,insurancePaidBack:he,userShareCoveredClaims:le,insuredBillsTotal:ee,definiteTotal:J,pendingTotal:$}},[d,g,t]),C=fe.useMemo(()=>{const L=new Date().getFullYear(),A=(()=>{const he=String(t||"").toLowerCase();return he==="2024"||he==="2025"||he==="2026"?Number(he):he==="all"?null:L})(),U=new Date,R={};for(const he of g){const le=y(he,A);R[he.id]={claimed:0,reimbursed:0,premiums:le.total,nonInsured:0,pendingBills:0,filedClaims:0}}const z=[...d].sort((he,le)=>{const ee=he.service_date&&(S(he.service_date)?.getTime()||new Date(he.service_date).getTime())||0,$=le.service_date&&(S(le.service_date)?.getTime()||new Date(le.service_date).getTime())||0;return ee-$});for(const he of z){const le=String(he.expense_category||"").toLowerCase(),ee=he.pet_id||"";if(!R[ee])continue;const $=Number(he.total_amount)||0;if($<=0)continue;const J=he.service_date?S(he.service_date)||new Date(he.service_date):null;if(!(!J||isNaN(J.getTime()))&&!(A!==null&&J.getFullYear()!==A)){if(le==="insured"){const ne=String(he.filing_status||"not_submitted").toLowerCase(),O=ne==="filed"?"submitted":ne;O==="not_submitted"||O==="not_filed"?R[ee].pendingBills+=1:(O==="submitted"||O==="paid"||O==="denied"||O==="approved")&&(R[ee].filedClaims+=1)}if(le==="not_insured"||le==="not insured")J<=U&&(R[ee].nonInsured+=$);else{R[ee].claimed+=$;const ne=Math.max(0,Number(he.reimbursed_amount)||0);R[ee].reimbursed+=ne}}}return console.log("[FinancialSummary] perPet calc (premiums + bills - reimbursed)",R),R},[d,g,w,t]);return n?l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Financial Summary"}),s&&l.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Loading"}),o&&l.jsx("div",{className:"mt-2 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&!o&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:` ${String(t||"").toLowerCase()==="all"?"ALL TIME":String(t||new Date().getFullYear())} TOTAL`}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Spent on all pets (including premiums)"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",(E.premiumsYTD+E.nonInsuredTotal+E.insuredBillsTotal).toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"- Insurance Reimbursed"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",E.insurancePaidBack.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"= Your Net Cost"}),l.jsxs("div",{className:"text-2xl font-bold",children:["$",E.definiteTotal.toFixed(2)]})]})]})]})})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:"YOUR OUT-OF-POCKET BREAKDOWN"}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Insurance Premiums ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Monthly insurance cost)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.premiumsYTD.toFixed(2)]})]}),(()=>{const L=new Date().getFullYear(),A=(()=>{const R=String(t||"").toLowerCase();return R==="2024"||R==="2025"||R==="2026"?Number(R):R==="all"?null:L})(),U=g.map(R=>{const z=y(R,A);return{pet:R,...z}}).filter(R=>R.total>0||Number(R.pet.monthly_premium)>0);return U.length===0?null:l.jsx("div",{className:"ml-4 mt-2 space-y-1 text-xs text-slate-500",children:U.map(({pet:R,total:z,monthsCount:he,context:le})=>{const ee=Number(R.monthly_premium)||0;return ee===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",R.name,": No insurance"]}),l.jsx("div",{})]},R.id):z===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",R.name,": $0 (",le,")"]}),l.jsx("div",{})]},R.id):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",R.name,": $",ee.toFixed(2),"/mo  ",he," = $",z.toFixed(2)," (",le,")"]}),l.jsx("div",{})]},R.id)})})})()]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Non-Insured Vet Visits ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Not covered by insurance)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.nonInsuredTotal.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Amount You Paid (for covered claims)"}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",E.userShareCoveredClaims.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"Total You Paid"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold font-mono",children:["$",E.definiteTotal.toFixed(2)]})]})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:` PER-PET BREAKDOWN (${String(t||"").toLowerCase()==="all"?"All Time":String(t||new Date().getFullYear())})`}),g.length===0&&l.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No pets yet. Add a pet to see per-pet costs."}),l.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(L=>{const A=C[L.id]||{claimed:0,reimbursed:0,premiums:0,nonInsured:0,pendingBills:0,filedClaims:0};L.species==="cat"||L.species;const U=L.species==="cat"?"":L.species==="dog"?"":"",R=A.premiums+(A.nonInsured||0)+A.claimed-A.reimbursed,z=(A.nonInsured||0)+A.reimbursed+A.claimed>0;return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-100 min-w-0",children:[l.jsx("span",{children:U}),l.jsxs("span",{className:"font-semibold truncate",title:`${L.name} (${L.species})`,children:[L.name," (",L.species,")"]})]}),l.jsx("div",{className:"mt-3 text-sm",children:z?l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"YOUR COSTS"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Premiums (attributed)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.premiums.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Vet Bills (insured + non-insured)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Subtotal Paid"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(A.premiums+A.claimed+(A.nonInsured||0)).toFixed(2)]})]}),l.jsx("div",{className:"pt-3 text-xs font-semibold text-slate-500",children:"INSURANCE COVERAGE"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Reimbursements Received"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",A.reimbursed.toFixed(2)]})]}),l.jsxs("div",{className:"pt-3 border-t-2 border-slate-300 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("span",{className:"font-mono font-bold text-lg",children:["$",R.toFixed(2)]})]}),l.jsx("div",{className:"text-xs text-slate-500",children:A.pendingBills>0?`(${A.pendingBills} bill${A.pendingBills===1?"":"s"} pending submission)`:A.filedClaims>0?`(${A.filedClaims} claim${A.filedClaims===1?"":"s"} filed)`:""})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("div",{className:"font-mono font-bold text-lg",children:["$",R.toFixed(2)]})]}),l.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"(No vet bills this year)"})]})})]},L.id)})})]})]}):null}function S5({medicationId:n,userId:e,onClose:t,onDoseRecorded:s}){const[a,o]=fe.useState(!0),[u,d]=fe.useState(!1),p=fe.useRef(!1),[g,x]=fe.useState(null),[w,S]=fe.useState(null),[y,E]=fe.useState(!1),[C,L]=fe.useState(null),[A,U]=fe.useState(""),[R,z]=fe.useState(0),[he,le]=fe.useState(null),ee=fe.useMemo(()=>C?Array.isArray(C.reminder_times)&&C.reminder_times.length>0?C.reminder_times.length:C.frequency==="1x daily"?1:C.frequency==="2x daily"?2:3:0,[C]),$=fe.useMemo(()=>{if(!C)return 0;const X=new Date(C.start_date),pe=C.end_date?new Date(C.end_date):null,G=new Date(X.getFullYear(),X.getMonth(),X.getDate()),ce=pe?new Date(pe.getFullYear(),pe.getMonth(),pe.getDate()):null;return(ce?Math.max(1,Math.round((ce.getTime()-G.getTime())/(1e3*60*60*24))+1):1)*ee},[C,ee]),J=fe.useMemo(()=>$>0?Math.min(Math.round(R/$*100),100):0,[R,$]),ne=fe.useMemo(()=>{if(!C||!C.end_date)return 0;const X=new Date,pe=new Date(X.getFullYear(),X.getMonth(),X.getDate()),[G,ce,ve]=C.end_date.split("-").map(Number),Y=new Date(G,ce-1,ve);return Math.max(0,Math.round((Y.getTime()-pe.getTime())/(1e3*60*60*24)))},[C]),O=fe.useMemo(()=>!C||!C.end_date?"":C.end_date,[C]),T=async()=>{console.log("[DoseTrackingPage] fetchAll starting, medicationId:",n),o(!0),x(null);try{const{data:X,error:pe}=await Ze.from("medications").select("*").eq("id",n).single();if(pe)throw pe;const G={id:X.id,user_id:X.user_id,pet_id:X.pet_id,medication_name:X.medication_name,dosage:X.dosage??null,frequency:X.frequency,reminder_times:Array.isArray(X.reminder_times)?X.reminder_times:[],start_date:X.start_date,end_date:X.end_date??null};if(L(G),X.pet_id){const{data:F,error:V}=await Ze.from("pets").select("name").eq("id",X.pet_id).single();!V&&F?.name&&U(F.name)}const{count:ce,error:ve}=await Ze.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",n).eq("status","given");if(ve)throw ve;z(ce||0);const{data:Y,error:P}=await Ze.from("medication_doses").select("given_time").eq("medication_id",n).eq("status","given").order("given_time",{ascending:!1}).limit(1).single();console.log("[DoseTrackingPage] lastDose query result:",{data:Y,error:P}),!P&&Y?.given_time?(console.log("[DoseTrackingPage] Raw given_time from database:",Y.given_time),le(Y.given_time)):(console.log("[DoseTrackingPage] No last dose found or error occurred"),le(null))}catch(X){x(X?.message||"Failed to load medication")}finally{o(!1)}};fe.useEffect(()=>{T()},[n]),fe.useEffect(()=>{const X=document.body.style.overflow;document.body.style.overflow="hidden";const pe=G=>{G.key==="Escape"&&t()};return window.addEventListener("keydown",pe),()=>{document.body.style.overflow=X,window.removeEventListener("keydown",pe)}},[t]);const te=X=>{const[pe,G]=X.split(":").map(Y=>parseInt(Y,10));if(!Number.isFinite(pe)||!Number.isFinite(G))return X;const ce=pe===0?12:pe>12?pe-12:pe,ve=pe>=12?"PM":"AM";return`${ce}:${String(G).padStart(2,"0")} ${ve}`},H=X=>{if(!X)return"No doses recorded yet";const pe=new Date(X.endsWith("Z")?X:X+"Z"),G=new Date,ce=new Date(G);ce.setDate(ce.getDate()-1);const ve=new Date(pe.getFullYear(),pe.getMonth(),pe.getDate()),Y=new Date(G.getFullYear(),G.getMonth(),G.getDate()),P=new Date(ce.getFullYear(),ce.getMonth(),ce.getDate());let F="";ve.getTime()===Y.getTime()?F="Today":ve.getTime()===P.getTime()?F="Yesterday":F=pe.toLocaleDateString("en-US",{month:"short",day:"numeric"});const V=pe.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${F} ${V}`},Q=async()=>{if(p.current){console.log("[DoseTrackingPage] Already saving, ignoring duplicate click");return}if(p.current=!0,d(!0),!e){p.current=!1,d(!1),x("You must be logged in to record a dose.");return}if(R>=$){p.current=!1,d(!1),x("All doses have been recorded for this medication");return}const X=R+1>=$;x(null);try{const G=new Date().toISOString(),ce=new Date;ce.setHours(0,0,0,0);const ve=new Date;ve.setHours(23,59,59,999);const{data:Y}=await Ze.from("medication_doses").select("id").eq("medication_id",n).eq("status","pending").gte("scheduled_time",ce.toISOString()).lte("scheduled_time",ve.toISOString()).limit(1).single();if(Y){const{error:P}=await Ze.from("medication_doses").update({status:"given",given_time:G}).eq("id",Y.id);if(P)throw P}else{const{error:P}=await Ze.from("medication_doses").insert({medication_id:n,user_id:e,scheduled_time:G,given_time:G,status:"given"});if(P)throw P}z(P=>P+1),le(G),X?E(!0):(S("Dose recorded "),setTimeout(()=>{t()},2e3)),s&&s()}catch(pe){x(pe?.message||"Failed to record dose")}finally{p.current=!1,d(!1)}};return y&&C?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",onClick:()=>{},children:l.jsx("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 dark:border-emerald-800 bg-white dark:bg-slate-900 p-8 shadow-2xl",onClick:X=>X.stopPropagation(),children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-200 mb-2",children:"Great job!"}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-1",children:["You've completed ",l.jsx("span",{className:"font-semibold",children:C.medication_name})]}),l.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 mb-4",children:["for ",l.jsx("span",{className:"font-semibold",children:A}),"!"]}),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 text-sm text-blue-800 dark:text-blue-200",children:" Consider following up with your vet if needed."}),l.jsx("button",{type:"button",onClick:()=>{E(!1),t()},className:"mt-6 w-full h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold",children:"Got it"})]})})}):l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Track Dose"}),l.jsx("button",{type:"button",className:"text-sm",onClick:t,children:"Close"})]}),a&&l.jsx("div",{className:"mt-4 text-sm text-slate-600",children:"Loading"}),g&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:g}),!a&&C&&l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Pet: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:A||""})]}),l.jsx("div",{className:"text-lg font-semibold",children:C.medication_name}),C.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:C.dosage}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Frequency: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:C.frequency})]}),l.jsxs("div",{className:"mt-2 rounded-lg border border-slate-200 dark:border-slate-800 p-3 text-sm space-y-1.5",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${R}/${$} doses (${J}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",ne]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",O]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Last dose given:"})," ",H(he)]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Reminder times:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(C.reminder_times)?C.reminder_times:[]).map((X,pe)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:te(X)},pe))})]})]}),w&&l.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:w}),R>=$?l.jsx("div",{className:"pt-2",children:l.jsxs("div",{className:"rounded-lg bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 p-4 text-center",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-emerald-800 dark:text-emerald-200",children:"All doses completed!"}),l.jsx("div",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"This medication course is finished."})]})}):l.jsx("div",{className:"pt-2 flex flex-col sm:flex-row gap-3 sm:justify-end",children:l.jsx("button",{type:"button",disabled:u||!e,onClick:Q,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:u?"Saving":" MARK AS GIVEN"})})]})]})})}function j5({userId:n,pets:e,refreshKey:t}){const[s,a]=fe.useState(!1),[o,u]=fe.useState(null),[d,p]=fe.useState([]),[g,x]=fe.useState({}),[w,S]=fe.useState(!1),[y,E]=fe.useState(null),[C,L]=fe.useState(null),[A,U]=fe.useState(!1),[R,z]=fe.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),he=fe.useMemo(()=>{const Q={};for(const X of e)Q[X.id]=X;return Q},[e]),le=async()=>{if(n){a(!0),u(null);try{try{const{data:ce}=await Ze.from("profiles").select("timezone").eq("id",n).single(),ve=ce&&ce.timezone?String(ce.timezone):"";ve&&z(ve)}catch{}const{data:Q,error:X}=await Ze.from("medications").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(X)throw X;const pe=(Q||[]).map(ce=>({...ce,reminder_times:Array.isArray(ce.reminder_times)?ce.reminder_times:[]}));p(pe);const G=pe.map(ce=>ce.id);if(G.length>0){const{data:ce,error:ve}=await Ze.from("medication_doses").select("id, medication_id, user_id, scheduled_time, given_time, status").in("medication_id",G).eq("user_id",n).eq("status","given");if(ve)throw ve;const Y={};for(const P of ce||[])Y[P.medication_id]=(Y[P.medication_id]||0)+1;x(Y)}else x({})}catch(Q){u(Q?.message||"Failed to load medications")}finally{a(!1)}}};fe.useEffect(()=>{le()},[n,t]);const ee=Q=>Array.isArray(Q.reminder_times)&&Q.reminder_times.length>0?Q.reminder_times.length:Q.frequency==="1x daily"?1:Q.frequency==="2x daily"?2:3,$=Q=>{const[X,pe]=Q.split(":");let G=Number(X);const ce=G>=12?"PM":"AM";return G=G%12,G===0&&(G=12),`${G}:${pe} ${ce}`},J=Q=>{const X=Q.toLowerCase().trim();return X==="1x daily"||X==="once daily"?"Once daily":X==="2x daily"||X==="twice daily"?"Twice daily":X==="3x daily"||X==="three times daily"?"Three times daily":Q},ne=(Q,X)=>{const pe=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),G=new Date(X.getFullYear(),X.getMonth(),X.getDate()),ce=Math.round((pe.getTime()-G.getTime())/(1e3*60*60*24));let ve;ce===0?Q.getTime()<=X.getTime()?ve="Tomorrow":ve="Today":ce===1?ve="Tomorrow":ve=Q.toLocaleDateString("en-US",{month:"short",day:"numeric"});const Y=Q.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${ve} ${Y}`},O=Q=>{const[X,pe,G]=Q.start_date.split("-").map(Number),ce=new Date(X,pe-1,G);let ve=null;if(Q.end_date){const[We,Ve,re]=Q.end_date.split("-").map(Number);ve=new Date(We,Ve-1,re)}const Y=new Date,P=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),F=ve?Math.max(1,Math.round((ve.getTime()-ce.getTime())/864e5)+1):1,V=ee(Q),ie=F*V,ue=g[Q.id]||0,me=ie>0?Math.min(Math.round(ue/ie*100),100):0,ye=ve?Math.max(0,Math.round((ve.getTime()-P.getTime())/(1e3*60*60*24))):0,xe=Q.reminder_times&&Q.reminder_times.length>0?Q.reminder_times.filter(Boolean):Q.frequency==="1x daily"?["07:00"]:Q.frequency==="2x daily"?["07:00","19:00"]:["08:00","14:00","20:00"];let ge=null;const Ie=new Date;let Re=new Date(Ie.getFullYear(),Ie.getMonth(),Ie.getDate());for(let We=0;We<7;We++){if(Re<ce){Re.setDate(Re.getDate()+1);continue}if(ve&&Re>ve)break;for(const Ve of xe){const[re,Ye]=Ve.split(":").map(ot=>Number(ot)),bt=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate(),re,Ye,0);if(bt.getTime()>Ie.getTime()){ge=bt;break}}if(ge)break;Re.setDate(Re.getDate()+1)}return{totalDoses:ie,given:ue,pct:me,daysRemaining:ye,nextDoseLabel:ge?ne(ge,Ie):ve&&P>ve?ue>=ie?"Completed":"Ended":"",endLabel:Q.end_date||""}},{active:T,completed:te}=fe.useMemo(()=>{const Q=new Date,X=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),pe=[],G=[];for(const ce of d){const[ve,Y,P]=ce.start_date.split("-").map(Number),F=new Date(ve,Y-1,P),V=ce.end_date?(()=>{const[ye,xe,ge]=ce.end_date.split("-").map(Number);return new Date(ye,xe-1,ge)})():null,ie=O(ce),ue=ie.given>=ie.totalDoses||V&&X>V,me=X>=F&&!ue;ue?G.push(ce):me&&pe.push(ce)}return{active:pe,completed:G}},[d,g]),H=fe.useMemo(()=>{const Q={};for(const X of T)Q[X.pet_id]||(Q[X.pet_id]=[]),Q[X.pet_id].push(X);return Q},[T]);return l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Medications"}),l.jsx("button",{type:"button",onClick:()=>S(!0),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm",disabled:!n,children:"+ ADD MEDICATION"})]}),s&&l.jsx("div",{className:"mt-4 text-sm text-slate-500",children:"Loading medications"}),o&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!s&&d.length===0&&l.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 text-sm text-slate-600",children:'No medications yet. Click "+ ADD MEDICATION" to create one.'}),l.jsx("div",{className:"mt-4 space-y-6",children:Object.entries(H).map(([Q,X])=>{const pe=he[Q];return l.jsxs("div",{children:[l.jsxs("div",{className:"text-base font-semibold mb-2 flex items-center gap-3 h-12 px-4",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:pe?.color||(pe?.species==="dog"?"#3B82F6":pe?.species==="cat"?"#F97316":"#6B7280")}}),l.jsx("span",{className:"font-semibold",children:pe?`${pe.name} (${pe.species})`:"Unknown Pet"})]}),X.length===0?l.jsx("div",{className:"ml-4 text-sm text-slate-500 dark:text-slate-400",children:"No active medications"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map(G=>{const ce=O(G);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm cursor-pointer hover:shadow-md",onClick:()=>L(G.id),children:[l.jsx("div",{className:"flex items-start justify-between gap-2",children:l.jsx("div",{className:"text-lg font-semibold",children:G.medication_name})}),l.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-700 cursor-pointer",onClick:ve=>{ve.stopPropagation(),E(G.id)},title:"Edit medication","aria-label":"Edit medication",children:"Edit"}),l.jsx("button",{type:"button",className:"text-xs text-red-600 hover:text-red-700 cursor-pointer",onClick:async ve=>{if(ve.stopPropagation(),!!confirm(`Are you sure you want to delete ${G.medication_name}?`))try{let Y=!1;try{Y=(await fetch(`/api/medications/${G.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}catch{}if(!Y){const{error:P}=await Ze.from("medications").delete().eq("id",G.id).eq("user_id",n);if(P)throw P}p(P=>P.filter(F=>F.id!==G.id));try{alert("Medication deleted successfully")}catch{}}catch(Y){console.error("[medications] delete error",Y);try{alert("Failed to delete medication")}catch{}}},title:"Delete medication","aria-label":"Delete medication",children:"Delete"})]}),G.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:G.dosage}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:J(G.frequency)}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:(Array.isArray(G.reminder_times)?G.reminder_times:[]).map((ve,Y)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 text-xs text-slate-700 dark:text-slate-300",children:$(ve)},Y))}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${ce.given}/${ce.totalDoses} doses (${ce.pct}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Next dose:"})," ",ce.nextDoseLabel]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",ce.daysRemaining]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",ce.endLabel]})]})]},G.id)})})]},Q)})}),te.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsxs("button",{type:"button",onClick:()=>U(!A),className:"flex items-center gap-2 text-base font-semibold hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:[l.jsx("svg",{className:`w-4 h-4 transition-transform ${A?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),l.jsxs("span",{children:["Completed Medications (",te.length,")"]})]}),A&&l.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(Q=>{const X=O(Q),pe=he[Q.pet_id],G=Q.end_date||new Date().toISOString().slice(0,10);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 p-4 shadow-sm opacity-75",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"text-lg font-semibold",children:Q.medication_name}),l.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:" Completed"})]}),Q.dosage&&l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:Q.dosage}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Pet:"})," ",pe?.name||"Unknown"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${X.given}/${X.totalDoses} doses`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Completed:"})," ",G]})]})]},Q.id)})})]}),l.jsx(h1,{open:w||!!y,onClose:()=>{S(!1),E(null)},onSaved:()=>{S(!1),E(null),le()},userId:n,pets:e,medicationId:y,editMode:!!y}),C&&l.jsx(S5,{medicationId:C,userId:n,onClose:()=>L(null),onDoseRecorded:()=>le()})]})}function A5({userId:n,pets:e,onAddMedication:t,onManage:s,refreshKey:a}){const[o,u]=fe.useState([]),[d,p]=fe.useState(!0);fe.useEffect(()=>{if(!n){p(!1);return}(async()=>{p(!0);try{const E=new Date().toISOString().split("T")[0],{data:C,error:L}=await Ze.from("medications").select("*, pets(name, species)").eq("user_id",n).or(`end_date.is.null,end_date.gte.${E}`).order("created_at",{ascending:!1}).limit(3);if(L)throw L;const A=(C||[]).map(U=>({...U,pet_name:U.pets?.name||"Unknown Pet",pet_species:U.pets?.species||"dog"}));u(A)}catch(E){console.error("Error fetching medications:",E)}finally{p(!1)}})()},[n,a]);const g=y=>{const[E,C]=y.split(":");let L=parseInt(E);const A=C,U=L>=12?"PM":"AM";return L=L%12,L===0&&(L=12),`${L}:${A} ${U}`},x=y=>{const E=new Date,C=`${String(E.getHours()).padStart(2,"0")}:${String(E.getMinutes()).padStart(2,"0")}`;E.toISOString().split("T")[0];const L=y.reminder_times;if(Array.isArray(L))return L.some(R=>{const[z,he]=R.split(":"),le=parseInt(z)*60+parseInt(he),ee=E.getHours()*60+E.getMinutes();return Math.abs(ee-le)<=60})?{label:"Due Now",color:"orange"}:L.find(R=>R>C)?{label:"Later today",color:"emerald"}:{label:"Tomorrow",color:"emerald"};if(L&&typeof L=="object"){const A=L;if(A.type==="weekly"){const U=E.getDay();return U===A.dayOfWeek&&C<A.time?{label:"Today",color:"orange"}:{label:`In ${(A.dayOfWeek-U+7)%7} days`,color:"emerald"}}else if(A.type==="monthly"){const U=E.getDate();if(U===A.dayOfMonth&&C<A.time)return{label:"Due today",color:"orange"};const R=A.dayOfMonth-U;return R>0?{label:`In ${R} days`,color:"emerald"}:{label:"Next month",color:"emerald"}}else{if(A.type==="quarterly")return{label:"Quarterly",color:"emerald"};if(A.type==="as_needed")return{label:"As needed",color:"emerald"}}}return{label:"Active",color:"green"}},w=y=>{const E=y.reminder_times;if(Array.isArray(E))return E.length===1?`Daily  ${g(E[0])}`:E.length===2?"2x daily":E.length===3?"3x daily":"Daily";if(E&&typeof E=="object"){const C=E;if(C.type==="weekly")return"Weekly";if(C.type==="monthly")return"Monthly";if(C.type==="quarterly")return"Every 3 months";if(C.type==="as_needed")return"As needed"}return y.frequency||"Daily"},S={orange:"bg-orange-100 text-orange-600",emerald:"bg-emerald-100 text-emerald-600",green:"bg-green-100 text-green-600"};return d?l.jsx("section",{className:"mx-auto max-w-4xl px-4 mt-6",children:l.jsx("div",{className:"rounded-2xl p-5 bg-gradient-to-br from-emerald-600 to-emerald-700 relative overflow-hidden",children:l.jsx("div",{className:"text-white text-center py-8",children:"Loading medications..."})})}):o.length===0?l.jsx("section",{className:"mx-auto max-w-4xl px-4 mt-6",children:l.jsx("div",{className:"rounded-2xl p-5 bg-gradient-to-br from-emerald-600 to-emerald-700 relative overflow-hidden",children:l.jsxs("div",{className:"relative z-10 text-center py-8",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Track Your Pet's Medications"}),l.jsx("p",{className:"text-emerald-50 text-sm mb-6",children:"Get SMS reminders so you never miss a dose."}),l.jsx("button",{onClick:t,className:"bg-white text-emerald-600 px-6 py-3 rounded-xl font-semibold hover:bg-emerald-50 transition-colors shadow-lg",children:"+ Add First Medication"})]})})}):l.jsx("section",{className:"mx-auto max-w-4xl px-4 mt-6",children:l.jsxs("div",{className:"rounded-2xl p-5 bg-gradient-to-br from-emerald-600 to-emerald-700 relative overflow-hidden",children:[l.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Medications"}),l.jsx("p",{className:"text-emerald-50 text-xs",children:"Never miss a dose"})]})]}),l.jsx("button",{onClick:s,className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Manage "})]}),l.jsx("div",{className:"relative z-10 space-y-3",children:o.map(y=>{const E=x(y),C=w(y),L=y.pet_species==="dog"?"":"";return l.jsx("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-xl flex-shrink-0",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-gray-800 truncate",children:y.medication_name}),l.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-600",children:[l.jsxs("span",{children:[L," ",y.pet_name]}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{children:C})]})]}),l.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${S[E.color]}`,children:E.label})]})},y.id)})}),l.jsx("button",{onClick:t,className:"relative z-10 w-full mt-3 bg-white/15 hover:bg-white/25 border-2 border-dashed border-white/40 rounded-xl py-3 text-white font-medium transition-colors",children:"+ Add Medication"})]})})}function P5({medicationId:n,userId:e,onClose:t}){const[s,a]=fe.useState(null),[o,u]=fe.useState(null),[d,p]=fe.useState(!0),[g,x]=fe.useState(!1),w=fe.useRef(!1),[S,y]=fe.useState(!1),[E,C]=fe.useState(null),[L,A]=fe.useState(null),[U,R]=fe.useState(null),[z,he]=fe.useState(null),[le,ee]=fe.useState(null),[$,J]=fe.useState(null);fe.useEffect(()=>{if(console.log("[DoseMarkingPage] useEffect triggered",{medicationId:n,userId:e,success:S,loading:d,error:E}),S){console.log("[DoseMarkingPage] Already successful, skipping reload");return}const X=new URLSearchParams(window.location.search).get("token");X&&(A(X),console.log("[DoseMarkingPage] Magic link token detected:",X.slice(0,8)+"...")),console.log("[DoseMarkingPage] Calling loadMedicationDetails with token:",X?X.slice(0,8)+"...":"null"),ne(X)},[n,e,S]),fe.useEffect(()=>{s&&U&&!S&&O()},[s,U,S]);async function ne(Q=null){console.log("[DoseMarkingPage] loadMedicationDetails called",{tokenFromUrl:Q,magicToken:L,medicationId:n,success:S,loading:d});try{const X=Q||L,pe=n.length===8&&!n.includes("-"),G=n.includes("-");if(console.log("[DoseMarkingPage] Detecting format",{isShortCode:pe,isUUID:G,effectiveToken:X?X.slice(0,8)+"...":"null"}),pe){console.log("[DoseMarkingPage] Loading via short code:",n);const{data:P,error:F}=await Ze.from("medication_doses").select("*, medications(*, pets(name, species))").eq("short_code",n).single();if(F||!P){console.error("[DoseMarkingPage] Short code lookup failed:",F?.message,F?.code),C("This link is invalid or has expired. Please check for a newer SMS."),p(!1);return}console.log("[DoseMarkingPage]  Dose found via short code:",P.id),a(P.medications),u(P.medications?.pets),R(P.medication_id),he(n),ee(P),p(!1);return}if(X){console.log("[DoseMarkingPage] Loading via legacy token:",X.slice(0,8)+"...");const{data:P,error:F}=await Ze.from("medication_doses").select("*, medications(*, pets(name, species))").eq("one_time_token",X).single();if(F||!P){console.error("[DoseMarkingPage] Token validation failed:",F?.message,F?.code),console.error("[DoseMarkingPage] Full error:",JSON.stringify(F)),C("This link is invalid or has expired. Please check for a newer SMS."),p(!1);return}console.log("[DoseMarkingPage]  Dose found via token:",P.id),console.log("[DoseMarkingPage] Full dose data:",JSON.stringify(P,null,2)),console.log("[DoseMarkingPage] Medications object:",P.medications),console.log("[DoseMarkingPage] Pets object:",P.medications?.pets),a(P.medications),u(P.medications?.pets),ee(P),p(!1),console.log("[DoseMarkingPage]  Medication name:",P.medications?.medication_name||"MISSING"),console.log("[DoseMarkingPage]  Pet name:",P.medications?.pets?.name||"MISSING");return}if(!e){C("Please log in to mark medication as given"),p(!1);return}const{data:ce,error:ve}=await Ze.from("medications").select("*, pets(name, species)").eq("id",n).eq("user_id",e).single();if(ve||!ce){C("Medication not found"),p(!1);return}a(ce),u(ce.pets),(await O())?.isComplete&&C("This medication course is already complete!"),p(!1)}catch(X){console.error("Error loading medication:",X),C("Failed to load medication details"),p(!1)}}async function O(){try{const Q=U||n,{data:X,error:pe}=await Ze.from("medication_doses").select("*").eq("medication_id",Q).order("scheduled_time",{ascending:!0});if(pe||!X)return console.error("[DoseMarkingPage] Failed to fetch doses for stats:",pe),null;let G=0;if(s?.start_date&&s?.end_date&&s?.reminder_times){const[me,ye,xe]=s.start_date.split("-").map(Number),ge=new Date(me,ye-1,xe),[Ie,Re,We]=s.end_date.split("-").map(Number),Ve=new Date(Ie,Re-1,We),re=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate()),Ye=new Date(Ve.getFullYear(),Ve.getMonth(),Ve.getDate()),bt=Math.round((Ye.getTime()-re.getTime())/864e5)+1,ot=s.reminder_times&&Array.isArray(s.reminder_times)?s.reminder_times.length:1;G=bt*ot,console.log("[DoseMarkingPage] Progress calculation:",{startDate:s.start_date,endDate:s.end_date,totalDays:bt,dosesPerDay:ot,totalExpectedDoses:G,dosesInDB:X.length})}else G=X.length,console.warn("[DoseMarkingPage] Missing medication dates, falling back to DB count");const ce=X.filter(me=>me.status==="given").length,ve=G-ce,Y=G>0?Math.min(Math.round(ce/G*100),100):0,P=ce>=G&&G>0,F=X.find(me=>me.status==="pending");let V=null;if(F&&!P){const me=new Date(F.scheduled_time.endsWith("Z")?F.scheduled_time:F.scheduled_time+"Z"),ye=new Date,xe=new Date(ye);xe.setDate(xe.getDate()+1);const ge=me.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),Ie=me.getTime()<ye.getTime(),Re=me.toDateString()===ye.toDateString(),We=me.toDateString()===xe.toDateString();Ie?Re?V=`Overdue - was ${ge}`:V="Overdue":Re?V=`Today ${ge}`:We?V=`Tomorrow ${ge}`:V=`${me.toLocaleDateString("en-US",{weekday:"short"})} ${ge}`}let ie=null;if(s?.end_date&&!P){const[me,ye,xe]=s.end_date.split("-").map(Number),ge=new Date(me,ye-1,xe),Ie=new Date,Re=new Date(Ie.getFullYear(),Ie.getMonth(),Ie.getDate()),We=ge.getTime()-Re.getTime(),Ve=Math.round(We/(1e3*60*60*24));ie=Ve>=0?Ve:0}const ue={givenCount:ce,totalCount:G,remainingCount:ve,percentage:Y,nextDoseTime:V,daysRemaining:ie,isComplete:P};return J(ue),ue}catch(Q){return console.error("[DoseMarkingPage] Error calculating progress stats:",Q),null}}async function T(){if(w.current){console.log("[DoseMarkingPage] Already marking, ignoring duplicate click");return}if(w.current=!0,x(!0),!z&&!L&&!e){w.current=!1,x(!1),C("Please log in to mark medication as given");return}C(null);try{if(z){console.log("[DoseMarkingPage] SHORT CODE: Bypassing backend, using Supabase directly");const{data:P,error:F}=await Ze.from("medication_doses").select("*").eq("short_code",z).single();if(F||!P){console.error("[DoseMarkingPage] Invalid short code:",F),C("Invalid link. Please check your recent SMS."),x(!1);return}if(console.log("[DoseMarkingPage] Found dose:",P.id,"Status:",P.status),P.status==="given"){console.log("[DoseMarkingPage] Dose already marked as given - redirecting to success"),window.location.href=`/dose-success?pet=${encodeURIComponent(o?.name||"Your pet")}&med=${encodeURIComponent(s?.medication_name||"medication")}&count=1&total=1`;return}const{count:V,error:ie}=await Ze.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",P.medication_id).eq("status","given");if(ie){console.error("[DoseMarkingPage] Error counting doses:",ie),C("Error checking medication status"),x(!1);return}if(s){const[xe,ge,Ie]=s.start_date.split("-").map(Number),Re=new Date(xe,ge-1,Ie),[We,Ve,re]=s.end_date.split("-").map(Number),Ye=new Date(We,Ve-1,re),bt=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate()),ot=new Date(Ye.getFullYear(),Ye.getMonth(),Ye.getDate()),st=Math.max(1,Math.round((ot.getTime()-bt.getTime())/864e5)+1)*(s.times_per_day||1);if((V||0)>=st){console.log("[DoseMarkingPage] All doses already complete:",{givenCount:V,totalExpectedDoses:st}),C("All doses have been recorded for this medication"),x(!1);return}}console.log("[DoseMarkingPage] Marking dose as given via Supabase...");const{error:ue}=await Ze.from("medication_doses").update({status:"given",given_time:new Date().toISOString()}).eq("id",P.id);if(ue){console.error("[DoseMarkingPage] Failed to update dose:",ue),C("Failed to mark dose as given. Please try again."),x(!1);return}console.log("[DoseMarkingPage]  Dose marked as given via Supabase"),console.log("[DoseMarkingPage] Calculating progress stats...");let me=null;try{const xe=O(),ge=new Promise((Ie,Re)=>setTimeout(()=>Re(new Error("Stats timeout")),3e3));me=await Promise.race([xe,ge]),console.log("[DoseMarkingPage] Stats calculated:",me)}catch(xe){console.error("[DoseMarkingPage] Stats calculation failed/timeout:",xe)}const ye=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",count:String(me?.givenCount||1),total:String(me?.totalCount||1)});me?.nextDoseTime&&ye.set("next",me.nextDoseTime),console.log("[DoseMarkingPage] Redirecting to success page"),window.location.href=`/dose-success?${ye.toString()}`;return}console.log("[DoseMarkingPage] Using backend API for:",L?"magic token":"session auth");const Q=L?{token:L}:{userId:e},pe=`http://localhost:8787/api/medications/${U||n}/mark-given`;console.log("[DoseMarkingPage] Calling API:",pe);const G=new AbortController,ce=setTimeout(()=>G.abort(),1e4);let ve;try{ve=await fetch(pe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q),signal:G.signal}),clearTimeout(ce)}catch(P){clearTimeout(ce),console.error("[DoseMarkingPage] API call failed or timeout:",P),P.name==="AbortError"?C("Request timeout. Please try again or close this tab."):C("Network error. Please check your connection or close this tab."),x(!1);return}console.log("[DoseMarkingPage] API response status:",ve.status);let Y;try{Y=await ve.json(),console.log("[DoseMarkingPage] API response body:",Y)}catch(P){console.error("[DoseMarkingPage] Failed to parse response:",P),C("Something went wrong. Please try again or close this tab."),x(!1);return}if(!ve.ok||!Y.ok){console.error("[DoseMarkingPage] API call failed:",{status:ve.status,result:Y}),C(Y.error||"Failed to mark dose as given"),x(!1);return}if(console.log("[DoseMarkingPage]  Successfully marked as given"),(z||L)&&!e){console.log("[DoseMarkingPage] Redirecting to static success page"),console.log("[DoseMarkingPage] Calculating progress stats...");let P=null;try{const V=O(),ie=new Promise((ue,me)=>setTimeout(()=>me(new Error("Stats calculation timeout")),3e3));P=await Promise.race([V,ie]),console.log("[DoseMarkingPage] Stats calculated:",P)}catch(V){console.error("[DoseMarkingPage] Stats calculation failed/timeout:",V)}const F=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",count:String(P?.givenCount||1),total:String(P?.totalCount||1)});P?.nextDoseTime&&F.set("next",P.nextDoseTime),console.log("[DoseMarkingPage] Redirecting to:",`/dose-success?${F.toString()}`),window.location.href=`/dose-success?${F.toString()}`;return}await O(),y(!0),w.current=!1,x(!1)}catch(Q){console.error("Error marking dose:",Q),C("Failed to mark dose as given"),w.current=!1,x(!1)}}async function te(){if(!z&&!L&&!e){C("Please log in to skip this dose");return}x(!0),C(null);try{if(z){console.log("[DoseMarkingPage] SHORT CODE: Skipping dose via Supabase directly");const{data:ve,error:Y}=await Ze.from("medication_doses").select("*").eq("short_code",z).single();if(Y||!ve){console.error("[DoseMarkingPage] Invalid short code:",Y),C("Invalid link. Please check your recent SMS."),x(!1);return}console.log("[DoseMarkingPage] Found dose:",ve.id,"Status:",ve.status),console.log("[DoseMarkingPage] Marking dose as skipped via Supabase...");const{error:P}=await Ze.from("medication_doses").update({status:"skipped",given_time:new Date().toISOString()}).eq("id",ve.id);if(P){console.error("[DoseMarkingPage] Failed to update dose:",P),C("Failed to skip dose. Please try again."),x(!1);return}console.log("[DoseMarkingPage]  Dose marked as skipped via Supabase");const F=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",skipped:"true"});console.log("[DoseMarkingPage] Redirecting to success page with skipped=true"),window.location.href=`/dose-success?${F.toString()}`;return}console.log("[DoseMarkingPage] Skipping dose for:",L?"magic token":"session auth");const Q=U||n,{data:X,error:pe}=await Ze.from("medication_doses").select("*").eq("medication_id",Q).eq("status","pending").order("scheduled_time",{ascending:!0}).limit(1);if(pe||!X||X.length===0){console.error("[DoseMarkingPage] No pending dose found:",pe),C("No pending dose found to skip."),x(!1);return}const G=X[0],{error:ce}=await Ze.from("medication_doses").update({status:"skipped",given_time:new Date().toISOString()}).eq("id",G.id);if(ce){console.error("[DoseMarkingPage] Failed to skip dose:",ce),C("Failed to skip dose. Please try again."),x(!1);return}if(console.log("[DoseMarkingPage]  Dose skipped successfully"),(z||L)&&!e){const ve=new URLSearchParams({pet:o?.name||"Your pet",med:s?.medication_name||"medication",skipped:"true"});window.location.href=`/dose-success?${ve.toString()}`;return}t(!0)}catch(Q){console.error("Error skipping dose:",Q),C("Failed to skip dose"),x(!1)}}if(d)return l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading medication details..."})]})})});if(E&&!s)return l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:E}),l.jsx("button",{onClick:t,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})});if(S)return l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:$?.isComplete?"All doses complete!":`Dose ${$?.givenCount||1} of ${$?.totalCount||1} complete`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[o?.name||"Your pet","  ",s?.medication_name||"Medication"]}),$&&l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6 text-left",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${$.percentage}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[$.percentage,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.isComplete?" Treatment complete!":$.remainingCount===1?"Just 1 more dose!":`${$.remainingCount} doses to go`})]})]}),!$.isComplete&&l.jsxs("div",{className:"space-y-3",children:[$.nextDoseTime&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:$.nextDoseTime})]}),$.daysRemaining!==null&&$.daysRemaining>=0&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Days remaining:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:$.daysRemaining===0?"Last day":$.daysRemaining===1?"1 day":`${$.daysRemaining} days`})]})]})]}),(z||L)&&!e?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:$?.nextDoseTime?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center mb-2",children:" All done! You can close this tab now."}),l.jsxs("p",{className:"text-blue-700 text-xs text-center",children:[" Next reminder: ",$.nextDoseTime]})]}):$?.isComplete?l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" Treatment complete! You can close this tab."}):l.jsx("p",{className:"text-blue-800 text-sm font-medium text-center",children:" All done! You can close this tab now."})}):l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-800 text-sm",children:" Your pet's medication has been recorded. You're all set!"})}),l.jsx("button",{onClick:()=>{if((z||L)&&!e){window.close();return}t(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold",children:(z||L)&&!e?"Done":"View Dashboard"})]})})});let H=null;if(s&&le)try{let Q=0;if(s.start_date&&s.end_date&&s.reminder_times){const[Y,P,F]=s.start_date.split("-").map(Number),V=new Date(Y,P-1,F),[ie,ue,me]=s.end_date.split("-").map(Number),ye=new Date(ie,ue-1,me),xe=new Date(V.getFullYear(),V.getMonth(),V.getDate()),ge=new Date(ye.getFullYear(),ye.getMonth(),ye.getDate()),Ie=Math.round((ge.getTime()-xe.getTime())/864e5)+1,Re=Array.isArray(s.reminder_times)?s.reminder_times.length:1;Q=Ie*Re}let X=null;if(s.end_date){const Y=new Date,P=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),[F,V,ie]=s.end_date.split("-").map(Number),me=new Date(F,V-1,ie).getTime()-P.getTime(),ye=Math.ceil(me/864e5);X=ye>=0?ye:0}let pe=null;if(le.scheduled_time){const Y=le.scheduled_time.endsWith("Z")?le.scheduled_time.slice(0,-1):le.scheduled_time;pe=new Date(Y).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}const G=($?.givenCount||0)+1,ce=Q>0?Math.min(G,Q):G,ve=Q>0?Math.round(ce/Q*100):0;H={currentDoseNumber:ce,totalDoses:Q,percentage:ve,daysRemaining:X,scheduledTime:pe}}catch(Q){console.error("[DoseMarkingPage] Error calculating progress info:",Q)}return l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mark Medication as Given?"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pet:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:o?.name}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medication:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:s?.medication_name}),s?.dosage&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dosage:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.dosage})]})]}),H&&l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-200 rounded-lg p-4 mb-6 text-left",children:[l.jsx("div",{className:"text-center mb-3",children:l.jsxs("p",{className:"text-sm font-semibold text-emerald-800",children:["Dose ",H.currentDoseNumber," of ",H.totalDoses]})}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden mb-4",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-green-600 rounded-full transition-all duration-300",style:{width:`${H.percentage}%`}})}),l.jsxs("div",{className:"space-y-2 text-sm",children:[H.scheduledTime&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-600",children:"Scheduled:"}),l.jsx("span",{className:"font-medium text-gray-800",children:H.scheduledTime})]}),H.daysRemaining!==null&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-600",children:"Days remaining:"}),l.jsx("span",{className:"font-medium text-gray-800",children:H.daysRemaining===0?"Last day":H.daysRemaining===1?"1 day":`${H.daysRemaining} days`})]})]})]}),E&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:E})}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:T,disabled:g,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Marking..."]}):l.jsx(l.Fragment,{children:" Yes, I gave it"})}),l.jsx("button",{onClick:te,disabled:g,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip this dose"})]})]})})})}function C5(){const n=new URLSearchParams(window.location.search),e=n.get("pet")||"Your pet",t=n.get("med")||"medication",s=parseInt(n.get("count")||"1"),a=parseInt(n.get("total")||"1"),o=n.get("next")||null,u=n.get("skipped")==="true",d=a>0?Math.min(Math.round(s/a*100),100):0,p=a-s,g=s>=a;return u?l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dose Skipped"}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[e,"  ",t]}),l.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-gray-700 text-sm text-center",children:"This dose has been marked as skipped. It won't count toward your progress, but we've recorded your choice."})}),l.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-2",children:[l.jsx("p",{className:"text-gray-800 font-medium text-center mb-2",children:"You're all set!"}),l.jsx("p",{className:"text-gray-600 text-sm text-center",children:"Use your back button or close this window to return to your messages."})]})]})})}):l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 shadow-xl",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:g?"All doses recorded!":`Dose ${s} of ${a} recorded`}),l.jsxs("p",{className:"text-gray-600 text-base mb-6",children:[e,"  ",t]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${d}%`}})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"text-2xl font-bold text-gray-800",children:[d,"%"]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g?" Treatment complete!":p===1?"Just 1 more dose!":`${p} doses to go`})]})]}),!g&&o&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:o})]})]}),o&&!g&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:l.jsxs("p",{className:"text-blue-700 text-sm text-center",children:[" Next reminder: ",o]})}),l.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-2",children:[l.jsx("p",{className:"text-gray-800 font-medium text-center mb-2",children:"You're all set!"}),l.jsx("p",{className:"text-gray-600 text-sm text-center",children:"Use your back button or close this window to return to your messages."})]})]})})})}function If(){return If=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},If.apply(null,arguments)}function E5(n,e){if(n==null)return{};var t={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(e.indexOf(s)!==-1)continue;t[s]=n[s]}return t}function L5(n,e){if(n==null)return{};var t,s,a=E5(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)t=o[s],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}function D5(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function T5(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ff(n,e){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Ff(n,e)}function O5(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ff(n,e)}function Rd(n){return Rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rd(n)}function f1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f1=function(){return!!n})()}function I5(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function F5(n,e){if(e&&(br(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I5(n)}function R5(n){var e=f1();return function(){var t,s=Rd(n);if(e){var a=Rd(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return F5(this,t)}}var uf={exports:{}},df,Km;function M5(){if(Km)return df;Km=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return df=n,df}var hf,Jm;function U5(){if(Jm)return hf;Jm=1;var n=M5();function e(){}function t(){}return t.resetWarningCache=e,hf=function(){function s(u,d,p,g,x,w){if(w!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}s.isRequired=s;function a(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},hf}var Xm;function B5(){return Xm||(Xm=1,uf.exports=U5()()),uf.exports}var q5=B5();const Ai=Nu(q5);function Ul(n,e,t){this.x=n,this.y=e,this.time=t||new Date().getTime()}Ul.prototype.velocityFrom=function(n){return this.time!==n.time?this.distanceTo(n)/(this.time-n.time):1};Ul.prototype.distanceTo=function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))};Ul.prototype.equals=function(n){return this.x===n.x&&this.y===n.y&&this.time===n.time};function Gf(n,e,t,s){this.startPoint=n,this.control1=e,this.control2=t,this.endPoint=s}Gf.prototype.length=function(){for(var n=10,e=0,t=void 0,s=void 0,a=0;a<=n;a+=1){var o=a/n,u=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var p=u-t,g=d-s;e+=Math.sqrt(p*p+g*g)}t=u,s=d}return e};Gf.prototype._point=function(n,e,t,s,a){return e*(1-n)*(1-n)*(1-n)+3*t*(1-n)*(1-n)*n+3*s*(1-n)*n*n+a*n*n*n};function z5(n,e,t){var s,a,o,u=null,d=0;t||(t={});var p=function(){d=t.leading===!1?0:Date.now(),u=null,o=n.apply(s,a),u||(s=a=null)};return function(){var g=Date.now();!d&&t.leading===!1&&(d=g);var x=e-(g-d);return s=this,a=arguments,x<=0||x>e?(u&&(clearTimeout(u),u=null),d=g,o=n.apply(s,a),u||(s=a=null)):!u&&t.trailing!==!1&&(u=setTimeout(p,x)),o}}function Dr(n,e){var t=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=z5(Dr.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Dr.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=n,this._ctx=n.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(t._mouseButtonDown=!0,t._strokeBegin(a))},this._handleMouseMove=function(a){t._mouseButtonDown&&t._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var o=a.changedTouches[0];t._strokeBegin(o)}},this._handleTouchMove=function(a){a.preventDefault();var o=a.targetTouches[0];t._strokeMoveUpdate(o)},this._handleTouchEnd=function(a){var o=a.target===t._canvas;o&&(a.preventDefault(),t._strokeEnd(a))},this.on()}Dr.prototype.clear=function(){var n=this._ctx,e=this._canvas;n.fillStyle=this.backgroundColor,n.clearRect(0,0,e.width,e.height),n.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Dr.prototype.fromDataURL=function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=t.ratio||window.devicePixelRatio||1,o=t.width||this._canvas.width/a,u=t.height||this._canvas.height/a;this._reset(),s.src=n,s.onload=function(){e._ctx.drawImage(s,0,0,o,u)},this._isEmpty=!1};Dr.prototype.toDataURL=function(n){var e;switch(n){case"image/svg+xml":return this._toSVG();default:for(var t=arguments.length,s=Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[n].concat(s))}};Dr.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Dr.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Dr.prototype.isEmpty=function(){return this._isEmpty};Dr.prototype._strokeBegin=function(n){this._data.push([]),this._reset(),this._strokeUpdate(n),typeof this.onBegin=="function"&&this.onBegin(n)};Dr.prototype._strokeUpdate=function(n){var e=n.clientX,t=n.clientY,s=this._createPoint(e,t),a=this._data[this._data.length-1],o=a&&a[a.length-1],u=o&&s.distanceTo(o)<this.minDistance;if(!(o&&u)){var d=this._addPoint(s),p=d.curve,g=d.widths;p&&g&&this._drawCurve(p,g.start,g.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};Dr.prototype._strokeEnd=function(n){var e=this.points.length>2,t=this.points[0];if(!e&&t&&this._drawDot(t),t){var s=this._data[this._data.length-1],a=s[s.length-1];t.equals(a)||s.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(n)};Dr.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Dr.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Dr.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Dr.prototype._createPoint=function(n,e,t){var s=this._canvas.getBoundingClientRect();return new Ul(n-s.left,e-s.top,t||new Date().getTime())};Dr.prototype._addPoint=function(n){var e=this.points,t=void 0;if(e.push(n),e.length>2){e.length===3&&e.unshift(e[0]),t=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=t.c2;t=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=t.c1,o=new Gf(e[1],s,a,e[2]),u=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:u}}return{}};Dr.prototype._calculateCurveControlPoints=function(n,e,t){var s=n.x-e.x,a=n.y-e.y,o=e.x-t.x,u=e.y-t.y,d={x:(n.x+e.x)/2,y:(n.y+e.y)/2},p={x:(e.x+t.x)/2,y:(e.y+t.y)/2},g=Math.sqrt(s*s+a*a),x=Math.sqrt(o*o+u*u),w=d.x-p.x,S=d.y-p.y,y=x/(g+x),E={x:p.x+w*y,y:p.y+S*y},C=e.x-E.x,L=e.y-E.y;return{c1:new Ul(d.x+C,d.y+L),c2:new Ul(p.x+C,p.y+L)}};Dr.prototype._calculateCurveWidths=function(n){var e=n.startPoint,t=n.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(a);return s.start=this._lastWidth,s.end=o,this._lastVelocity=a,this._lastWidth=o,s};Dr.prototype._strokeWidth=function(n){return Math.max(this.maxWidth/(n+1),this.minWidth)};Dr.prototype._drawPoint=function(n,e,t){var s=this._ctx;s.moveTo(n,e),s.arc(n,e,t,0,2*Math.PI,!1),this._isEmpty=!1};Dr.prototype._drawCurve=function(n,e,t){var s=this._ctx,a=t-e,o=Math.floor(n.length());s.beginPath();for(var u=0;u<o;u+=1){var d=u/o,p=d*d,g=p*d,x=1-d,w=x*x,S=w*x,y=S*n.startPoint.x;y+=3*w*d*n.control1.x,y+=3*x*p*n.control2.x,y+=g*n.endPoint.x;var E=S*n.startPoint.y;E+=3*w*d*n.control1.y,E+=3*x*p*n.control2.y,E+=g*n.endPoint.y;var C=e+g*a;this._drawPoint(y,E,C)}s.closePath(),s.fill()};Dr.prototype._drawDot=function(n){var e=this._ctx,t=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(n.x,n.y,t),e.closePath(),e.fill()};Dr.prototype._fromData=function(n,e,t){for(var s=0;s<n.length;s+=1){var a=n[s];if(a.length>1)for(var o=0;o<a.length;o+=1){var u=a[o],d=new Ul(u.x,u.y,u.time),p=u.color;if(o===0)this.penColor=p,this._reset(),this._addPoint(d);else if(o!==a.length-1){var g=this._addPoint(d),x=g.curve,w=g.widths;x&&w&&e(x,w,p)}}else{this._reset();var S=a[0];t(S)}}};Dr.prototype._toSVG=function(){var n=this,e=this._data,t=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,o=0,u=t.width/s,d=t.height/s,p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttributeNS(null,"width",t.width),p.setAttributeNS(null,"height",t.height),this._fromData(e,function(A,U,R){var z=document.createElement("path");if(!isNaN(A.control1.x)&&!isNaN(A.control1.y)&&!isNaN(A.control2.x)&&!isNaN(A.control2.y)){var he="M "+A.startPoint.x.toFixed(3)+","+A.startPoint.y.toFixed(3)+" "+("C "+A.control1.x.toFixed(3)+","+A.control1.y.toFixed(3)+" ")+(A.control2.x.toFixed(3)+","+A.control2.y.toFixed(3)+" ")+(A.endPoint.x.toFixed(3)+","+A.endPoint.y.toFixed(3));z.setAttribute("d",he),z.setAttribute("stroke-width",(U.end*2.25).toFixed(3)),z.setAttribute("stroke",R),z.setAttribute("fill","none"),z.setAttribute("stroke-linecap","round"),p.appendChild(z)}},function(A){var U=document.createElement("circle"),R=typeof n.dotSize=="function"?n.dotSize():n.dotSize;U.setAttribute("r",R),U.setAttribute("cx",A.x),U.setAttribute("cy",A.y),U.setAttribute("fill",A.color),p.appendChild(U)});var g="data:image/svg+xml;base64,",x='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+o+" "+u+" "+d+'"')+(' width="'+u+'"')+(' height="'+d+'"')+">",w=p.innerHTML;if(w===void 0){var S=document.createElement("dummy"),y=p.childNodes;S.innerHTML="";for(var E=0;E<y.length;E+=1)S.appendChild(y[E].cloneNode(!0));w=S.innerHTML}var C="</svg>",L=x+w+C;return g+btoa(L)};Dr.prototype.fromData=function(n){var e=this;this.clear(),this._fromData(n,function(t,s){return e._drawCurve(t,s.start,s.end)},function(t){return e._drawDot(t)}),this._data=n};Dr.prototype.toData=function(){return this._data};var Pd={exports:{}},$5=Pd.exports,Qm;function W5(){return Qm||(Qm=1,(function(n,e){(function(t,s){n.exports=s()})($5,function(){return(function(t){function s(o){if(a[o])return a[o].exports;var u=a[o]={exports:{},id:o,loaded:!1};return t[o].call(u.exports,u,u.exports,s),u.loaded=!0,u.exports}var a={};return s.m=t,s.c=a,s.p="",s(0)})([function(t,s){function a(g){var x=g.getContext("2d"),w=g.width,S=g.height,y=x.getImageData(0,0,w,S).data,E=d(!0,w,S,y),C=d(!1,w,S,y),L=p(!0,w,S,y),A=p(!1,w,S,y),U=A-L+1,R=C-E+1,z=x.getImageData(L,E,U,R);return g.width=U,g.height=R,x.clearRect(0,0,U,R),x.putImageData(z,0,0),g}function o(g,x,w,S){return{red:S[4*(w*x+g)],green:S[4*(w*x+g)+1],blue:S[4*(w*x+g)+2],alpha:S[4*(w*x+g)+3]}}function u(g,x,w,S){return o(g,x,w,S).alpha}function d(g,x,w,S){for(var y=g?1:-1,E=g?0:w-1,C=E;g?C<w:C>-1;C+=y)for(var L=0;L<x;L++)if(u(L,C,x,S))return C;return null}function p(g,x,w,S){for(var y=g?1:-1,E=g?0:x-1,C=E;g?C<x:C>-1;C+=y)for(var L=0;L<w;L++)if(u(C,L,x,S))return C;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Pd)),Pd.exports}var H5=W5();const V5=Nu(H5);var G5=["canvasProps","clearOnResize"],ju=(function(n){O5(t,n);var e=R5(t);function t(){var s;T5(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return s=e.call.apply(e,[this].concat(o)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(d){s._canvas=d,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var d=s.props;d.canvasProps,d.clearOnResize;var p=L5(d,G5);return p},s.componentDidMount=function(){var d=s.getCanvas();s._sigPad=new Dr(d,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var d=s.getCanvas(),p=document.createElement("canvas");return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),V5(p)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var d,p,g=(d=s.props.canvasProps)!==null&&d!==void 0?d:{},x=g.width,w=g.height;if(!(typeof x<"u"&&typeof w<"u")){var S=s.getCanvas(),y=Math.max((p=window.devicePixelRatio)!==null&&p!==void 0?p:1,1);typeof x>"u"&&(S.width=S.offsetWidth*y),typeof w>"u"&&(S.height=S.offsetHeight*y),S.getContext("2d").scale(y,y),s.clear()}},s.render=function(){var d=s.props.canvasProps;return Md.createElement("canvas",If({ref:s.setRef},d))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(d,p){return s.getSignaturePad().fromDataURL(d,p)},s.toDataURL=function(d,p){return s.getSignaturePad().toDataURL(d,p)},s.fromData=function(d){return s.getSignaturePad().fromData(d)},s.toData=function(){return s.getSignaturePad().toData()},s}return D5(t)})(fe.Component);ju.propTypes={velocityFilterWeight:Ai.number,minWidth:Ai.number,maxWidth:Ai.number,minDistance:Ai.number,dotSize:Ai.oneOfType([Ai.number,Ai.func]),penColor:Ai.string,throttle:Ai.number,onEnd:Ai.func,onBegin:Ai.func,canvasProps:Ai.object,clearOnResize:Ai.bool};ju.defaultProps={clearOnResize:!0};ju.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function Y5({open:n,onClose:e,insurerName:t,petId:s,petName:a,claimId:o,missingFields:u,existingData:d={},suggestedValues:p={},onComplete:g}){console.log("[MissingFieldsModal] Component rendered with petName:",a);const[x,w]=fe.useState({}),[S,y]=fe.useState(null),[E,C]=fe.useState(!1),L=fe.useRef({});fe.useEffect(()=>{const ee={};u.forEach($=>{p[$.field]?ee[$.field]=p[$.field]:d[$.field]&&(ee[$.field]=d[$.field])}),w(ee)},[u,d,p]);const A=(ee,$)=>{console.log("[MissingFieldsModal] setFieldValue called:",{fieldName:ee,value:$,type:typeof $}),w(J=>{const ne={...J,[ee]:$};return console.log("[MissingFieldsModal] Updated formData:",ne),ne}),y(null)},U=ee=>ee.conditional?x[ee.conditional.field]===ee.conditional.value:!0,R=fe.useMemo(()=>(console.log("[MissingFieldsModal] Filtering fields, formData:",x),u.filter(ee=>{const $=U(ee);return console.log(`[MissingFieldsModal] Field ${ee.field}: ${$?"VISIBLE":"HIDDEN"}`,ee.conditional?`(conditional: ${ee.conditional.field} === "${ee.conditional.value}")`:""),$})),[u,x]),z=ee=>{console.log("[MissingFieldsModal] replacePlaceholders called with:",ee,"petName:",a);const $=ee.replace(/{petName}/g,a||"your pet");return console.log("[MissingFieldsModal] replacePlaceholders result:",$),$},he=ee=>ee.type==="signature"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[z(ee.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),ee.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:z(ee.description)}),l.jsxs("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!x[ee.field]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(ju,{ref:$=>{L.current[ee.field]=$},canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onEnd:()=>{const $=L.current[ee.field];$&&!$.isEmpty()&&A(ee.field,$.toDataURL("image/png"))}})]}),x[ee.field]&&l.jsx("button",{type:"button",onClick:()=>{L.current[ee.field]?.clear(),A(ee.field,null)},className:"mt-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})]},ee.field):ee.type==="text"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[z(ee.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),ee.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:z(ee.description)}),l.jsx("input",{type:"text",placeholder:ee.placeholder,value:x[ee.field]||"",onChange:$=>A(ee.field,$.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"}),ee.aiExtract&&p[ee.field]&&l.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[" Suggested from diagnosis: ",p[ee.field]]})]},ee.field):ee.type==="textarea"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[z(ee.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),ee.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:z(ee.description)}),l.jsx("textarea",{rows:ee.rows||3,placeholder:ee.placeholder,value:x[ee.field]||"",onChange:$=>A(ee.field,$.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},ee.field):ee.type==="date"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[z(ee.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),ee.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:z(ee.description)}),l.jsx("input",{type:"date",value:x[ee.field]||"",onChange:$=>A(ee.field,$.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},ee.field):ee.type==="phone"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[z(ee.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),ee.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:z(ee.description)}),l.jsx("input",{type:"tel",placeholder:ee.placeholder||"(555) 123-4567",value:x[ee.field]||"",onChange:$=>A(ee.field,$.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},ee.field):ee.type==="radio"&&ee.options?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[z(ee.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),ee.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:z(ee.description)}),l.jsx("div",{className:"space-y-2",children:ee.options.map($=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[l.jsx("input",{type:"radio",name:ee.field,value:$,checked:x[ee.field]===$,onChange:J=>A(ee.field,J.target.value),className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${x[ee.field]===$?"bg-emerald-500 border-emerald-500":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:x[ee.field]===$&&l.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:$})]},$))})]},ee.field):null,le=async ee=>{ee.preventDefault(),y(null),console.log("[MissingFieldsModal] handleSubmit called"),console.log("[MissingFieldsModal] Current formData:",x),console.log("[MissingFieldsModal] Visible fields:",R.map(ne=>ne.field));const $={},J=R.every(ne=>{if(!ne.required)return $[ne.field]=!0,!0;const O=x[ne.field],T=!(!O||typeof O=="string"&&O.trim()==="");return $[ne.field]=T,console.log(`[MissingFieldsModal] Field ${ne.field}:`,{value:O,type:typeof O,isFilled:T,required:ne.required}),!!T});if(console.log("[MissingFieldsModal] Validation results:",$),console.log("[MissingFieldsModal] All filled?",J),!J){const ne=Object.entries($).filter(([O,T])=>!T).map(([O])=>O);console.log("[MissingFieldsModal] Missing fields:",ne),y("Please fill out all required fields");return}C(!0);try{await g(x)}catch{y("Failed to save data. Please try again."),C(!1)}};return n?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl max-h-[calc(100vh-80px)] overflow-y-auto",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Quick Questions for ",t]}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:[" We need a few details to submit your claim. These fields are required by ",t,"."]}),l.jsxs("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400",children:[`This is the only time we'll ask  we save everything for future claims. Your vet can help with pet details. Search "`,t,'" in your email to find your policy number.']})]}),S&&l.jsx("div",{className:"mb-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:S}),l.jsxs("form",{onSubmit:le,children:[R.map(ee=>he(ee)),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" This information will be saved for future claims"})}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,disabled:E,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:E,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50",children:E?"Saving...":"Continue to Submit"})]})]})]})}):null}const K5=["demo@petclaimhelper.com","drsarah@petclaimhelper.com","david@mybenefitexperience.com","larry@uglydogadventures.com"],J5=["pumpkin","spot","healthy paws","nationwide","trupanion","pets best","figo","aspca"];function X5({claim:n,pet:e,userId:t,onClose:s,onSuccess:a}){const[o,u]=fe.useState("validating"),[d,p]=fe.useState(null),[g,x]=fe.useState(null),[w,S]=fe.useState(!1),[y,E]=fe.useState(null),[C,L]=fe.useState(null),A=e?.insurance_company||"Nationwide",U=n.total_amount?`$${parseFloat(n.total_amount).toFixed(2)}`:"$0.00",R=()=>{const $=(y?.email||"").toLowerCase(),J=A.toLowerCase(),ne=K5.some(T=>T.toLowerCase()===$),O=J5.some(T=>J.includes(T.toLowerCase()));return ne||!O};fe.useEffect(()=>{async function $(){try{u("validating"),console.log("[ClaimSubmissionModal] Starting validation..."),console.log("[ClaimSubmissionModal] claim:",n),console.log("[ClaimSubmissionModal] pet:",e),console.log("[ClaimSubmissionModal] pet.insurance_company:",e?.insurance_company);const{data:J,error:ne}=await Ze.from("profiles").select("*").eq("id",t).single();if(ne)throw ne;E(J);const O=e?.insurance_company?.toLowerCase()||"";if(console.log("[ClaimSubmissionModal] insurerName:",O),!O||O==="not insured"||O==="none"){console.log("[ClaimSubmissionModal] No insurance company found"),x("Pet does not have an insurance company set. Please update pet information in Settings."),u("missing-data");return}const{data:{session:T}}=await Ze.auth.getSession();if(!T?.access_token){x("Please log in to submit claims"),u("error");return}const te="http://localhost:8787";console.log("[ClaimSubmissionModal] Calling validation API:",`${te}/api/claims/validate-fields`),console.log("[ClaimSubmissionModal] Request body:",{claimId:n.id,userId:t,insurer:O});const H=await fetch(`${te}/api/claims/validate-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T.access_token}`},body:JSON.stringify({claimId:n.id,userId:t,insurer:O})});console.log("[ClaimSubmissionModal] Response status:",H.status),console.log("[ClaimSubmissionModal] Response ok:",H.ok),console.log("[ClaimSubmissionModal] Response headers:",{"content-type":H.headers.get("content-type"),"content-length":H.headers.get("content-length")});const Q=await H.text();console.log("[ClaimSubmissionModal] Response text (first 500 chars):",Q.substring(0,500));let X;try{X=JSON.parse(Q),console.log("[ClaimSubmissionModal] Validation response:",X)}catch(pe){throw console.error("[ClaimSubmissionModal] Failed to parse JSON response:",pe),console.error("[ClaimSubmissionModal] Full response text:",Q),new Error(`API returned non-JSON response (status ${H.status}): ${Q.substring(0,200)}`)}if(!X.ok){console.error("[ClaimSubmissionModal] Validation failed:",X.error),x(`Error validating claim requirements: ${X.error}`),u("error");return}if(console.log("[Validation] Result:",X),X.missingFields&&X.missingFields.length>0){console.log("[ClaimSubmissionModal] Missing fields detected:",X.missingFields),L({insurerName:e.insurance_company,missingFields:X.missingFields,existingData:X.existingData||{},suggestedValues:X.suggestedValues||{}}),u("collect-missing-fields");return}console.log("[ClaimSubmissionModal] All fields present, proceeding to confirm"),u("confirm")}catch(J){console.error("[Validation] Error:",J),x(`Failed to validate claim: ${J.message}`),u("error")}}$()},[t,e,n]);const z=[];async function he(){console.log("[Preview] ========== PREVIEW PDF CLICKED =========="),console.log("[Preview] User Agent:",navigator.userAgent),console.log("[Preview] Window width:",window.innerWidth);try{S(!0);const $="http://localhost:8787",{data:{session:J}}=await Ze.auth.getSession();if(!J?.access_token)throw new Error("Not authenticated");const ne=n.pdf_path?"?merged=true":"";console.log("[Preview] Fetching PDF from:",`${$}/api/claims/${n.id}/preview-pdf${ne}`);const O=await fetch(`${$}/api/claims/${n.id}/preview-pdf${ne}`,{headers:{Authorization:`Bearer ${J.access_token}`}});if(console.log("[Preview] Response status:",O.status),console.log("[Preview] Response content-type:",O.headers.get("content-type")),!O.ok)if(O.headers.get("content-type")?.includes("application/json")){const X=await O.json();console.error("[Preview] Server returned error:",X);let pe=X.error||"Failed to generate preview";throw X.details&&(pe+=`

Details: ${X.details}`),X.fallback==="claim-form-only"?pe+=`

The claim form was generated but the vet invoice could not be retrieved from storage.`:X.fallback==="merge-failed"&&(pe+=`

Both files exist but could not be merged into a single PDF.`),new Error(pe)}else throw new Error("Failed to generate preview");const T=await O.blob();console.log("[Preview] PDF blob size:",T.size),console.log("[Preview] PDF blob type:",T.type);const te=URL.createObjectURL(T);console.log("[Preview] Blob URL created:",te),console.log("[Preview]  PDF fetched successfully, size:",T.size,"bytes");const H=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768;if(console.log("[Preview] Mobile detected:",H),H){console.log("[Preview] Using mobile-specific PDF handling");const Q=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(console.log("[Preview] Is iOS:",Q),Q)console.log("[Preview] Opening PDF in same window (iOS)"),window.location.href=te;else{console.log("[Preview] Attempting download (Android)");const X=document.createElement("a");X.href=te,X.download=`claim-${e.name}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(X),X.click(),document.body.removeChild(X),console.log("[Preview] Download triggered")}}else{console.log("[Preview] Opening PDF in new tab (desktop)");const Q=window.open(te,"_blank","noopener,noreferrer");console.log("[Preview] New window opened:",!!Q),n.pdf_path?console.log("[Preview] Opened merged PDF (claim form + vet invoice)"):console.log("[Preview] Opened claim form PDF (no vet invoice attached)")}}catch($){console.error("[Preview PDF] ERROR:",$),console.error("[Preview PDF] Error stack:",$.stack),alert(`Could not generate preview: ${$.message}`)}finally{console.log("[Preview] Cleaning up, setting loading to false"),S(!1)}}async function le(){u("submitting"),x(null);try{const{data:{session:$}}=await Ze.auth.getSession();if(!$?.access_token){x("Please log in to submit claims"),u("error");return}const ne=await fetch("http://localhost:8787/api/claims/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.access_token}`},body:JSON.stringify({claimId:n.id,userId:t})}),O=await ne.json();if(!ne.ok||!O.ok)throw new Error(O.error||"Failed to submit claim");console.log("[ClaimSubmission] Success:",O),p(O.messageId),u("success")}catch($){console.error("[ClaimSubmission] Error:",$),x($.message||"Failed to submit claim"),u("error")}}async function ee($){try{u("validating");const{data:{session:J}}=await Ze.auth.getSession();if(!J?.access_token){x("Please log in to save claim information"),u("error");return}const O=await fetch(`http://localhost:8787/api/claims/${n.id}/save-collected-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J.access_token}`},body:JSON.stringify({collectedData:$})}),T=await O.json();if(!O.ok||!T.ok){x("Failed to save claim information"),u("error");return}console.log("[Save Fields] Success:",T),u("confirm")}catch(J){console.error("[Save Fields] Error:",J),x("Failed to save claim information"),u("error")}}if(o==="validating")return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Validating Requirements..."}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Checking if all required information is complete"})]})});if(o==="collect-missing-fields"&&C)return l.jsx(Y5,{open:!0,onClose:s,insurerName:C.insurerName,petId:e.id,petName:e.name,claimId:n.id,missingFields:C.missingFields,existingData:C.existingData,suggestedValues:C.suggestedValues,onComplete:ee});if(o==="missing-data"){const $=()=>{s(),window.location.hash="#settings"};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full",children:[l.jsx("div",{className:"text-orange-500 text-6xl mb-4 text-center",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Missing Required Information"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-center",children:"Please complete your profile and pet information before submitting claims."}),l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-3",children:"Missing:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 space-y-1.5",children:g?.split(`
`).slice(1).map((J,ne)=>l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),l.jsx("span",{children:J.replace("- ","")})]},ne))})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How to complete:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:"1. Go to Settings (click button below)"}),l.jsx("li",{children:"2. Fill in your signature, insurance info, and address"}),l.jsx("li",{children:"3. Update your pet's breed and date of birth"}),l.jsx("li",{children:"4. Return here and submit your claim"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:$,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Go to Settings"})]})]})})}return o==="submitting"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Submitting Claim..."}),l.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Generating PDF and sending to ",A]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Creating claim form PDF..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Sending email to insurance company..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Updating claim status..."})]})]})]})}):o==="success"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Claim Submitted!"}),l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Your claim for ",l.jsx("strong",{children:e?.name||"your pet"})," has been automatically submitted to ",l.jsx("strong",{children:A}),"."]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"What happens next:"}),l.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-400 space-y-1",children:[l.jsxs("li",{children:[" Claim form PDF sent to ",A]}),l.jsx("li",{children:" Copy sent to your email (BCC)"}),l.jsx("li",{className:"ml-4 text-xs",children:" Don't see it? Check your spam or junk folder"}),l.jsx("li",{children:' Claim status updated to "Submitted"'}),l.jsx("li",{children:" Insurance company will review (typically 5-10 business days)"})]})]}),d&&l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6",children:l.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 font-mono break-all",children:["Tracking ID: ",d.slice(0,20),"..."]})}),l.jsx("button",{onClick:()=>{a(d),s()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold w-full",children:"Done"})]})}):o==="error"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Submission Failed"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"We couldn't submit your claim automatically."}),l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:l.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[l.jsx("strong",{children:"Error:"})," ",g]})}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Next steps:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:" Try again in a few minutes"}),l.jsx("li",{children:" Or manually mark as submitted after filing yourself"}),l.jsx("li",{children:" Contact support if the problem persists"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>u("confirm"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Auto-Submit Claim to ",A,"?"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Review the claim details before submitting"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:"Claim Summary"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pet:"}),l.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e?.name||"Unknown"," (",e?.species||"Pet",")"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Clinic:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.clinic_name||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Service Date:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.service_date||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagnosis:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-right max-w-xs line-clamp-2",children:n.visit_title||n.diagnosis||"N/A"})]}),l.jsxs("div",{className:"pt-3 border-t border-blue-200 dark:border-blue-700 flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-semibold",children:"Total Amount:"}),l.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:U})]})]})]}),z.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-1",children:"Missing Information"}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"The following information is missing from your claim:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 list-disc list-inside",children:z.map(($,J)=>l.jsx("li",{children:$},J))}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-2",children:"You can still submit, but the insurance company may request additional information."})]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("button",{onClick:he,disabled:w,className:"w-full py-3 px-4 border-2 border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Generating Preview..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Preview Claim Form PDF"]})}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Review before submitting"})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"What will happen:"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"1."}),l.jsx("span",{children:"Generate professional claim form PDF with all details"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"2."}),l.jsxs("span",{children:["Email claim form to ",l.jsx("strong",{children:A})," at their claims processing address"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"3."}),l.jsx("span",{children:"Send you a copy (BCC) so you have a record"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"4."}),l.jsx("span",{children:'Update claim status to "Submitted" in your dashboard'})]})]})]}),R()&&l.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Test Mode Active"}),l.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["This submission will be sent to ",l.jsx("strong",{children:"larry@uglydogadventures.com"})," for testing, not to the actual insurance company. Perfect for testing!"]})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:le,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all",children:[" Submit to ",A]}),l.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})})}function Q5({userId:n,initialSignature:e,onSave:t}){const s=fe.useRef(null),[a,o]=fe.useState(e||null),[u,d]=fe.useState(!1),[p,g]=fe.useState(null),[x,w]=fe.useState(!1);fe.useEffect(()=>{e&&o(e)},[e]);const S=()=>{s.current?.clear(),w(!1),g(null)},y=async()=>{if(!s.current||s.current.isEmpty()){g({type:"error",text:"Please draw your signature first"});return}d(!0),g(null);try{const L=s.current.toDataURL("image/png"),{error:A}=await Ze.from("profiles").update({signature:L}).eq("id",n);if(A)throw A;o(L),g({type:"success",text:"Signature saved successfully!"}),t&&t(L),setTimeout(()=>g(null),3e3)}catch(L){console.error("Error saving signature:",L),g({type:"error",text:"Failed to save signature. Please try again."})}finally{d(!1)}},E=()=>{o(null),w(!1),setTimeout(()=>{s.current?.clear()},0)},C=()=>{w(!0),g(null)};return l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Signature"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will be used on your insurance claim forms"})]}),a?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-green-800",children:"Signature Saved"}),l.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),l.jsx("div",{className:"bg-white rounded border border-green-300 p-4",children:l.jsx("img",{src:a,alt:"Your signature",className:"max-w-full h-auto",style:{maxHeight:"120px"}})})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[!x&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-gray-400 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(ju,{ref:s,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(249, 250, 251)",penColor:"rgb(0, 0, 0)",onBegin:C})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:S,disabled:!x||u,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear"}),l.jsx("button",{onClick:y,disabled:!x||u,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:u?"Saving...":"Save Signature"})]}),p&&l.jsx("div",{className:`p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:p.text})]}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-800",children:[l.jsx("strong",{children:"Note:"})," Your signature will be included on all insurance claim submissions. Make sure it matches the signature on file with your insurance company."]})})]})}const Z5={dry:4,wet:2,"freeze-dried":9,raw:2,cooked:2.5};function ew(n){if(!n)return"unknown";const e=new Date(n);if(isNaN(e.getTime()))return"unknown";const s=new Date().getTime()-e.getTime(),a=Math.floor(s/(1e3*60)),o=Math.floor(s/(1e3*60*60)),u=Math.floor(s/(1e3*60*60*24));return a<1?"just now":a<60?`${a} minute${a===1?"":"s"} ago`:o<24?`${o} hour${o===1?"":"s"} ago`:u===1?"yesterday":u<7?`${u} days ago`:u<30?`${Math.floor(u/7)} week${Math.floor(u/7)===1?"":"s"} ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function tw(){const n=T=>{if(!T)return null;const te=String(T).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!te)return null;const H=Number(te[1]),Q=Number(te[2])-1,X=Number(te[3]),pe=new Date(H,Q,X);return isNaN(pe.getTime())?null:pe},[e,t]=fe.useState([]),[s,a]=fe.useState([]),[o,u]=fe.useState([]),[d,p]=fe.useState(!0),[g,x]=fe.useState(null),[w,S]=fe.useState("all"),[y,E]=fe.useState("all"),[C,L]=fe.useState("email"),[A,U]=fe.useState("asc"),[R,z]=fe.useState(null);fe.useEffect(()=>{he()},[]);async function he(){try{p(!0),x(null);const{data:T,error:te}=await Ze.from("profiles").select("*").order("created_at",{ascending:!1});if(te)throw te;const H=T.filter(xe=>{const ge=(xe.email||"").toLowerCase();return!ge.includes("larry")&&!ge.includes("uglydogadventures")&&!ge.includes("dogstrainedright")}),Q=new Set(H.map(xe=>xe.id)),{data:X,error:pe}=await Ze.from("pets").select("*");if(pe)throw pe;const G=X.filter(xe=>Q.has(xe.user_id)),{data:ce,error:ve}=await Ze.from("claims").select("*");if(ve)throw ve;const Y=ce.filter(xe=>Q.has(xe.user_id)),P=H.map(xe=>{const ge=G.filter(Ve=>Ve.user_id===xe.id),Ie=Y.filter(Ve=>Ve.user_id===xe.id),Re=Ie.reduce((Ve,re)=>Ve+(re.total_amount||0),0);let We="inactive";return Ie.length>0?We="active":ge.length>0&&(We="pet-only"),{profile:xe,pets:ge,claims:Ie,petsCount:ge.length,claimsCount:Ie.length,totalClaimAmount:Re,lastActive:xe.updated_at||xe.created_at,status:We}}),F=Y.map(xe=>{const ge=H.find(Re=>Re.id===xe.user_id),Ie=G.find(Re=>Re.id===xe.pet_id);return{...xe,userEmail:ge?.email||"Unknown",userName:ge?.full_name||"Unknown",petName:Ie?.name||"Unknown",insuranceCompany:Ie?.insurance_company||"Unknown"}}),{data:V,error:ie}=await Ze.from("food_entries").select(`
          *,
          pets!inner (
            id,
            name,
            user_id,
            profiles!inner (
              id,
              email
            )
          )
        `);if(ie)throw ie;const ue=(V||[]).filter(xe=>{const ge=(xe.pets?.profiles?.email||"").toLowerCase();return!ge.includes("larry")&&!ge.includes("uglydogadventures")&&!ge.includes("dogstrainedright")}),me=new Date,ye=ue.map(xe=>{const ge=xe.pets?.name||"Unknown",Ie=xe.pets?.profiles?.email||"Unknown",Re=Z5[xe.food_type]||4,Ve=xe.bag_size_lbs*Re/xe.cups_per_day,Ye=xe.bag_cost/Ve*30,bt=new Date(xe.start_date),ot=Math.floor((me.getTime()-bt.getTime())/(1e3*60*60*24)),ze=Math.max(0,Math.floor(Ve-ot));let st="Stocked";return ze<3?st="Urgent":ze<7&&(st="Order Soon"),{...xe,userEmail:Ie,petName:ge,monthlyCost:Ye,daysLeft:ze,status:st}});t(P),a(F),u(ye)}catch(T){console.error("Error loading admin data:",T),x(T.message)}finally{p(!1)}}const le=fe.useMemo(()=>{const T=e.filter(V=>V.status==="active").length,te=e.filter(V=>V.status==="inactive").length,H=e.reduce((V,ie)=>V+ie.petsCount,0),Q=s.length,X=s.reduce((V,ie)=>V+(ie.total_amount||0),0),pe=s.filter(V=>V.filing_status==="draft").length,G=s.filter(V=>V.filing_status==="submitted").length,ce=s.filter(V=>V.filing_status==="paid").length,ve={};s.forEach(V=>{const ie=V.insuranceCompany||"Unknown";ve[ie]=(ve[ie]||0)+1});const Y=o.length,P=new Set(o.map(V=>V.userEmail)).size,F=o.reduce((V,ie)=>V+ie.monthlyCost,0);return{totalUsers:e.length,activeUsers:T,inactiveUsers:te,totalPets:H,totalClaims:Q,totalAmount:X,draftClaims:pe,submittedClaims:G,paidClaims:ce,insuranceBreakdown:ve,totalFoodEntries:Y,usersTrackingFood:P,totalMonthlyFoodSpend:F}},[e,s,o]);fe.useMemo(()=>{const T=new Map;o.forEach(H=>{const Q=T.get(H.userEmail);if(Q){Q.foodsTracked+=1,Q.totalMonthlySpend+=H.monthlyCost,H.is_subscription&&(Q.subscriptions+=1),(H.status==="Order Soon"||H.status==="Urgent")&&(Q.alerts+=1);const X=new Date(H.updated_at||H.created_at),pe=new Date(Q.mostRecentActivity);X>pe&&(Q.mostRecentActivity=H.updated_at||H.created_at);const G=new Date(Q.firstEntryDate);X<G&&(Q.firstEntryDate=H.created_at)}else T.set(H.userEmail,{email:H.userEmail,foodsTracked:1,petsWithFood:0,totalMonthlySpend:H.monthlyCost,firstEntryDate:H.created_at,mostRecentActivity:H.updated_at||H.created_at,subscriptions:H.is_subscription?1:0,alerts:H.status==="Order Soon"||H.status==="Urgent"?1:0})});const te=new Map;return o.forEach(H=>{te.has(H.userEmail)||te.set(H.userEmail,new Set),te.get(H.userEmail).add(H.petName)}),T.forEach((H,Q)=>{H.petsWithFood=te.get(Q)?.size||0}),Array.from(T.values()).sort((H,Q)=>new Date(Q.mostRecentActivity).getTime()-new Date(H.mostRecentActivity).getTime())},[o]);const ee=fe.useMemo(()=>[...e].sort((te,H)=>{let Q,X;switch(C){case"email":Q=te.profile.email,X=H.profile.email;break;case"name":Q=te.profile.full_name||"",X=H.profile.full_name||"";break;case"petsCount":Q=te.petsCount,X=H.petsCount;break;case"claimsCount":Q=te.claimsCount,X=H.claimsCount;break;case"lastActive":Q=new Date(te.lastActive).getTime(),X=new Date(H.lastActive).getTime();break;default:return 0}return Q<X?A==="asc"?-1:1:Q>X?A==="asc"?1:-1:0}),[e,C,A]),$=fe.useMemo(()=>s.filter(T=>!(w!=="all"&&T.filing_status!==w||y!=="all"&&T.insuranceCompany!==y)),[s,w,y]);function J(T){C===T?U(A==="asc"?"desc":"asc"):(L(T),U("asc"))}function ne(T){switch(T){case"active":return"bg-green-100 text-green-800";case"pet-only":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function O(T){switch(T){case"submitted":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800"}}return d?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):g?l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading admin data"}),l.jsx("p",{className:"text-red-600 mt-2",children:g})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"System overview and user management"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Users"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:le.totalUsers}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-green-600",children:["Active: ",le.activeUsers]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-red-600",children:["Inactive: ",le.inactiveUsers]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Pets"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:le.totalPets}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Across all users"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Claims"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:le.totalClaims}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Draft: ",le.draftClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-blue-600",children:["Submitted: ",le.submittedClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-green-600",children:["Paid: ",le.paidClaims]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Amount"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",le.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All claims combined"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsxs("div",{className:"px-6 py-4 border-b",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Claim Activity"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Latest claim submissions"})]}),l.jsxs("div",{className:"divide-y divide-gray-100",children:[s.filter(T=>["filed","submitted","paid"].includes((T.filing_status||"").toLowerCase())).sort((T,te)=>{const H=new Date(T.filed_date||T.created_at||0).getTime();return new Date(te.filed_date||te.created_at||0).getTime()-H}).slice(0,10).map(T=>{const te=(T.userEmail||"").split("@")[0],H=typeof T.total_amount=="number"?`$${T.total_amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"$0.00",Q=T.filed_date||T.created_at,X=ew(Q),G=(T.filing_status||"").toLowerCase()==="paid"?"received payment for":"filed a claim to";return l.jsx("div",{className:"px-6 py-3 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[l.jsxs("span",{className:"font-medium text-gray-900",children:[te,"@"]}),l.jsxs("span",{className:"text-gray-600",children:[" ",G," "]}),l.jsx("span",{className:"font-medium text-blue-600",children:T.insuranceCompany}),l.jsx("span",{className:"text-gray-600",children:" for "}),l.jsx("span",{className:"font-medium text-gray-900",children:T.petName}),l.jsx("span",{className:"text-gray-600",children:" ("}),l.jsx("span",{className:"font-semibold text-emerald-600",children:H}),l.jsx("span",{className:"text-gray-600",children:")"})]}),l.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap ml-4",children:X})]})},T.id)}),s.filter(T=>["filed","submitted","paid"].includes((T.filing_status||"").toLowerCase())).length===0&&l.jsx("div",{className:"px-6 py-8 text-center text-sm text-gray-500",children:"No claim submissions yet"})]})]}),!1,!1,!1,l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims by Insurance Company"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(le.insuranceBreakdown).map(([T,te])=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:T}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:te})]},T))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Users"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>J("email"),children:["Email ",C==="email"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>J("name"),children:["Name ",C==="name"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>J("petsCount"),children:["Pets ",C==="petsCount"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>J("claimsCount"),children:["Claims ",C==="claimsCount"&&(A==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>J("lastActive"),children:["Last Active ",C==="lastActive"&&(A==="asc"?"":"")]}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(T=>l.jsxs(Md.Fragment,{children:[l.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>z(R===T.profile.id?null:T.profile.id),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.profile.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.profile.full_name||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:T.petsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:T.claimsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(T.lastActive).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ne(T.status)}`,children:T.status})})]}),R===T.profile.id&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"User Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",T.profile.phone_number||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Timezone:"})," ",T.profile.timezone||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"SMS Opt-in:"})," ",T.profile.sms_opt_in?"Yes":"No"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Email Reminders:"})," ",T.profile.email_reminders?"Yes":"No"]})]})]}),T.pets.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Pets (",T.pets.length,")"]}),l.jsx("div",{className:"space-y-2",children:T.pets.map(te=>l.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[l.jsxs("div",{className:"font-medium",children:[te.name," - ",te.species]}),l.jsxs("div",{className:"text-gray-600",children:[te.insurance_company,"  Policy: ",te.policy_number||"Not set"]})]},te.id))})]}),T.claims.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Recent Claims (",T.claims.length,") - Total: $",T.totalClaimAmount.toFixed(2)]}),l.jsxs("div",{className:"space-y-2",children:[T.claims.slice(0,5).map(te=>l.jsx("div",{className:"bg-white border rounded p-3 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:te.clinic_name||"Unknown Clinic"}),l.jsxs("div",{className:"text-gray-600",children:[te.service_date&&n(te.service_date)?.toLocaleDateString()||"No date","  $",te.total_amount?.toFixed(2)||"0.00"]})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(te.filing_status||"draft")}`,children:te.filing_status||"draft"})]})},te.id)),T.claims.length>5&&l.jsxs("div",{className:"text-sm text-gray-600",children:["+ ",T.claims.length-5," more claims"]})]})]})]})})})]},T.profile.id))})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Claims"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("select",{value:w,onChange:T=>S(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"paid",children:"Paid"})]}),l.jsxs("select",{value:y,onChange:T=>E(T.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Insurance"}),Object.keys(le.insuranceBreakdown).map(T=>l.jsx("option",{value:T,children:T},T))]})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Date"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insurance"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PDF"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(T=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm text-gray-900",children:T.userName}),l.jsx("div",{className:"text-sm text-gray-500",children:T.userEmail})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.service_date&&n(T.service_date)?.toLocaleDateString()||"-"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",T.total_amount?.toFixed(2)||"0.00"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${O(T.filing_status||"draft")}`,children:T.filing_status||"draft"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.insuranceCompany}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:T.pdf_path?l.jsx("span",{className:"text-green-600",children:""}):l.jsx("span",{className:"text-gray-400",children:"-"})})]},T.id))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Showing ",$.length," of ",s.length," claims"]}),l.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",$.reduce((T,te)=>T+(te.total_amount||0),0).toFixed(2)]})]})})]})]})}function rw(){const[n,e]=fe.useState([]),[t,s]=fe.useState(!0),[a,o]=fe.useState(null),[u,d]=fe.useState(null),[p,g]=fe.useState(null);fe.useEffect(()=>{x()},[]);async function x(){try{s(!0),o(null);const{data:U,error:R}=await Ze.from("medications").select(`
          *,
          pets (id, name),
          profiles (id, email)
        `).order("created_at",{ascending:!1});if(R)throw R;const{data:z,error:he}=await Ze.from("medication_doses").select("*").order("scheduled_time",{ascending:!0});if(he)throw he;const le={};for(const ne of z||[])le[ne.medication_id]||(le[ne.medication_id]=[]),le[ne.medication_id].push(ne);const ee=new Date,$=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),J=(U||[]).map(ne=>{const O=le[ne.id]||[],T=O.filter(X=>X.status==="given").length;let te=0,H=0,Q="active";if(ne.start_date&&ne.end_date){const[X,pe,G]=ne.start_date.split("-").map(Number),ce=new Date(X,pe-1,G),[ve,Y,P]=ne.end_date.split("-").map(Number),F=new Date(ve,Y-1,P),V=Math.max(1,Math.round((F.getTime()-ce.getTime())/864e5)+1),ie=Array.isArray(ne.reminder_times)?ne.reminder_times.length:1;te=V*ie;const ue=Math.round((F.getTime()-$.getTime())/864e5);H=Math.max(0,ue),$<ce?Q="future":T>=te||$>F?Q="completed":Q="active"}return{...ne,petName:ne.pets?.name||"Unknown",userEmail:ne.profiles?.email||"Unknown",doses:O,givenCount:T,totalExpectedDoses:te,daysRemaining:H,status:Q}});e(J)}catch(U){console.error("Error loading medication admin data:",U),o(U.message)}finally{s(!1)}}const w=fe.useMemo(()=>{const U=n.length,R=n.flatMap($=>$.doses),z=R.length,he=R.filter($=>$.status==="pending").length,le=R.filter($=>$.status==="given").length,ee=R.filter($=>$.status==="skipped").length;return{totalMedications:U,totalDoses:z,pendingDoses:he,givenDoses:le,skippedDoses:ee}},[n]);async function S(U){if(confirm("Are you sure you want to delete ALL dose records for this medication? This cannot be undone.")){g(U);try{const{error:R}=await Ze.from("medication_doses").delete().eq("medication_id",U);if(R)throw R;alert("All doses deleted successfully"),await x()}catch(R){alert("Error deleting doses: "+R.message)}finally{g(null)}}}async function y(U,R){if(confirm(`Are you sure you want to delete "${R}" and ALL its dose records? This cannot be undone.`)){g(U);try{await Ze.from("medication_doses").delete().eq("medication_id",U);const{error:z}=await Ze.from("medications").delete().eq("id",U);if(z)throw z;alert("Medication deleted successfully"),await x()}catch(z){alert("Error deleting medication: "+z.message)}finally{g(null)}}}async function E(U){if(confirm("Delete this dose record?")){g(U);try{const{error:R}=await Ze.from("medication_doses").delete().eq("id",U);if(R)throw R;await x()}catch(R){alert("Error deleting dose: "+R.message)}finally{g(null)}}}function C(U){switch(U){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"future":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}function L(U){switch(U){case"given":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"skipped":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function A(U){if(!U)return"-";const R=U.endsWith("Z")?U.slice(0,-1):U;return new Date(R).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}return t?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading medication admin data..."})]})}):a?l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading data"}),l.jsx("p",{className:"text-red-600 mt-2",children:a}),l.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Medication Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Testing and debugging tools for medications"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Medications"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:w.totalMedications})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Dose Records"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:w.totalDoses})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-600 uppercase",children:"Pending Doses"}),l.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:w.pendingDoses})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-green-600 uppercase",children:"Given Doses"}),l.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:w.givenDoses})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-red-600 uppercase",children:"Skipped Doses"}),l.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:w.skippedDoses})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Medications"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Click a row to expand dose details"})]}),l.jsx("button",{onClick:x,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Refresh"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet Name"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medication"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frequency"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Left"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(U=>l.jsxs(Md.Fragment,{children:[l.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>d(u===U.id?null:U.id),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",onClick:R=>R.stopPropagation(),children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{onClick:()=>S(U.id),disabled:p===U.id,className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 disabled:opacity-50",title:"Delete all dose records",children:"Reset Doses"}),l.jsx("button",{onClick:()=>y(U.id,U.medication_name),disabled:p===U.id,className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded hover:bg-red-200 disabled:opacity-50",title:"Delete medication and all doses",children:"Delete"})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:U.userEmail}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:U.medication_name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:U.frequency}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:U.start_date}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:U.end_date||"Ongoing"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:[l.jsx("span",{className:"font-medium",children:U.givenCount}),l.jsx("span",{className:"text-gray-400",children:"/"}),l.jsx("span",{children:U.totalExpectedDoses})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:U.daysRemaining}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${C(U.status)}`,children:U.status})})]}),u===U.id&&l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"px-6 py-4 bg-gray-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"font-semibold text-gray-900",children:["Dose Records (",U.doses.length,")"]}),U.doses.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No dose records yet"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Dose ID"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Scheduled Time"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Given Time"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Short Code"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.doses.map(R=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"px-4 py-2 text-gray-600 font-mono text-xs",children:[R.id.slice(0,8),"..."]}),l.jsx("td",{className:"px-4 py-2 text-gray-900",children:A(R.scheduled_time)}),l.jsx("td",{className:"px-4 py-2",children:l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${L(R.status)}`,children:R.status})}),l.jsx("td",{className:"px-4 py-2 text-gray-600",children:A(R.given_time)}),l.jsx("td",{className:"px-4 py-2 text-gray-600 font-mono",children:R.short_code||"-"}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("button",{onClick:()=>E(R.id),disabled:p===R.id,className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded hover:bg-red-200 disabled:opacity-50",children:"Delete"})})]},R.id))})]})})]})})})]},U.id))})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",n.length," medications across all users"]})})]})]})}function nw({onBack:n}){const[e,t]=fe.useState(""),[s,a]=fe.useState(!1),[o,u]=fe.useState(!1),[d,p]=fe.useState(null),g=async x=>{x.preventDefault(),a(!0),p(null);try{const{error:w}=await Ze.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(w)throw w;u(!0)}catch(w){p(w?.message||"Failed to send reset email")}finally{a(!1)}};return o?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:[l.jsx("div",{className:"font-medium mb-1",children:"Check your email"}),l.jsxs("div",{className:"text-sm",children:["We've sent a password reset link to ",l.jsx("span",{className:"font-mono",children:e})]})]}),l.jsx("button",{type:"button",onClick:n,className:"text-sm text-emerald-600 hover:text-emerald-700",children:" Back to login"})]}):l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Reset Password"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),d&&l.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm",children:d}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:e,onChange:x=>t(x.target.value),required:!0,placeholder:"you@example.com",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",children:s?"Sending...":"Send Reset Link"}),l.jsx("button",{type:"button",onClick:n,className:"text-sm text-emerald-600 hover:text-emerald-700",children:" Back to login"})]})}function sw(){const[n,e]=fe.useState(""),[t,s]=fe.useState(""),[a,o]=fe.useState(!1),[u,d]=fe.useState(!1),[p,g]=fe.useState(null),[x,w]=fe.useState(!1),S=async y=>{if(y.preventDefault(),o(!0),g(null),n!==t){g("Passwords do not match"),o(!1);return}if(n.length<6){g("Password must be at least 6 characters"),o(!1);return}try{const{error:E}=await Ze.auth.updateUser({password:n});if(E)throw E;d(!0),setTimeout(()=>{window.location.href="/"},2e3)}catch(E){g(E?.message||"Failed to reset password")}finally{o(!1)}};return u?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:[l.jsx("div",{className:"font-medium mb-1",children:" Password Updated"}),l.jsx("div",{className:"text-sm",children:"Your password has been successfully reset. Redirecting to login..."})]})})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-100 flex items-center justify-center p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Set New Password"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your new password below."})]}),p&&l.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm",children:p}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:"password",type:x?"text":"password",value:n,onChange:y=>e(y.target.value),required:!0,placeholder:"Enter new password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm pr-10"}),l.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 text-xs",children:x?"Hide":"Show"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm Password"}),l.jsx("input",{id:"confirmPassword",type:x?"text":"password",value:t,onChange:y=>s(y.target.value),required:!0,placeholder:"Confirm new password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",children:a?"Updating...":"Reset Password"})]})})})}async function Zm(n){console.log("[createClaim] inserting",n);const{data:e,error:t}=await Ze.from("claims").insert(n).select("*").single();if(t)throw t;return e}async function Yi(n){try{console.log("[listClaims] START - userId=",n);const{data:e,error:t}=await Ze.from("claims").select("*, pets(id, name, species, insurance_company, filing_deadline_days)").eq("user_id",n).order("service_date",{ascending:!1});if(console.log("[listClaims] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[listClaims] ERROR:",t),t;return console.log("[listClaims] SUCCESS - count=",e?.length||0),e}catch(e){throw console.error("[listClaims] EXCEPTION:",e),e}}async function Ko(n,e){const{error:t}=await Ze.from("claims").update(e).eq("id",n);if(t)throw t}async function iw(n){const{error:e}=await Ze.from("claims").delete().eq("id",n);if(e)throw e}function aw(n){const e=n.replace(/\D/g,"");return e.length!==10?n:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}function p1(n){const e=n.replace(/\D/g,"");return e.length!==10?"":`+1${e}`}function m1(n,e=""){const s=n.replace(/\D/g,"").slice(0,10);return s.length===0?"":s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`}const ow=["pumpkin","spot","healthy paws","nationwide","trupanion","pets best","figo","aspca"],lw=["demo@petclaimhelper.com","drsarah@petclaimhelper.com","david@mybenefitexperience.com","larry@uglydogadventures.com"];function cw(){const n=window.location.pathname,e=n.match(/^\/dose\/([a-zA-Z0-9-]+)$/i);if(console.log("[App Router] Path:",n,"DoseMatch:",e),n==="/dose-success")return console.log("[App Router] Rendering static success page"),l.jsx(C5,{});if(n==="/reset-password")return console.log("[App Router] Rendering reset password page"),l.jsx(sw,{});if(e){const t=e[1];return console.log("[App Router] Rendering standalone dose page for code:",t),l.jsx(P5,{medicationId:t,userId:null,onClose:()=>{console.log("[App Router] Dose marking closed")}})}return console.log("[App Router] Rendering full app"),l.jsx(uw,{})}function uw(){const n=fe.useRef(null),[e,t]=fe.useState(null),[s,a]=fe.useState(!1),[o,u]=fe.useState(!1),[d,p]=fe.useState(!1),[g,x]=fe.useState(null),[w,S]=fe.useState(null),[y,E]=fe.useState([]),[C,L]=fe.useState(null),A=fe.useMemo(()=>y.find(h=>h.id===C)??null,[y,C]),[U,R]=fe.useState(""),[z,he]=fe.useState(""),[le,ee]=fe.useState("insured"),[$,J]=fe.useState(!1),[ne,O]=fe.useState({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:"",healthy_paws_pet_id:"",spot_account_number:"",figo_policy_number:""}),[T,te]=fe.useState(null),[H,Q]=fe.useState(null),[X,pe]=fe.useState(""),[G,ce]=fe.useState(""),[ve,Y]=fe.useState(""),[P,F]=fe.useState(""),[V,ie]=fe.useState(""),[ue,me]=fe.useState(""),[ye,xe]=fe.useState(null),[ge,Ie]=fe.useState(null),[Re,We]=fe.useState("login"),[Ve,re]=fe.useState(null),[Ye,bt]=fe.useState([]),[ot,ze]=fe.useState(!1),[st,et]=fe.useState(null),yt=fe.useRef(null),vt=fe.useRef(null),[Ut,wt]=fe.useState([]),[It,Ht]=fe.useState(0),[Vt,lt]=fe.useState(!1),[mt,it]=fe.useState("all"),[Ar,Kt]=fe.useState("date-desc"),[Et,Lt]=fe.useState("app"),[sr,ht]=fe.useState(!1),[dr,kt]=fe.useState(()=>{const h=new Date;return new Date(h.getFullYear(),h.getMonth(),1)}),[Ft,cr]=fe.useState({amount:0,petCount:0,daysInMonth:30}),[Bt,St]=fe.useState(!1),[nr,Ji]=fe.useState(!1),[tr,Fn]=fe.useState(null),[Jn,Nt]=fe.useState(null),[Rn,ds]=fe.useState(""),[hn,Xn]=fe.useState(""),[hr,Tr]=fe.useState(""),[Ur,zs]=fe.useState(""),[Qn,An]=fe.useState([]),[Zn,Hr]=fe.useState("insured"),[hs,Pn]=fe.useState(!1),[Cn,En]=fe.useState(null),[$s,li]=fe.useState(""),[ci,Ei]=fe.useState(Ps()),[nl,fr]=fe.useState(!1),[sl,Xi]=fe.useState(null),[Pr,Ws]=fe.useState(null),[xo,ui]=fe.useState(!1),[Li,es]=fe.useState([]),[di,Br]=fe.useState([]);function Ps(){const h=new Date,N=h.getFullYear(),D=String(h.getMonth()+1).padStart(2,"0"),M=String(h.getDate()).padStart(2,"0");return`${N}-${D}-${M}`}const[yo,qr]=fe.useState(null),Hs=h=>{qr({message:h}),setTimeout(()=>qr(null),2500)},[Mn,Vs]=fe.useState(null),[Di,Un]=fe.useState(!1),[Vr,Cs]=fe.useState(0),[Va,Ti]=fe.useState(!1),[Oi,Es]=fe.useState(null),[Ii,Jt]=fe.useState(null),[Fi,hi]=fe.useState(null),[Qi,Ga]=fe.useState(null),[Ya,Ls]=fe.useState(null);fe.useEffect(()=>{w&&requestAnimationFrame(()=>{document.body.offsetHeight})},[w]),fe.useEffect(()=>{if(console.log("[VISIT TITLE DEBUG] useEffect triggered",{extracted:w,diagnosis:w?.diagnosis,currentVisitTitle:z}),w){const h="Vet Visit";console.log("[VISIT TITLE DEBUG] Setting visitTitle to:",h),he(h)}},[w]);const[Sa,bn]=fe.useState(!1),ts=h=>h.trim().toLowerCase(),Bn=(h,N)=>{const D=ts(h),M=ts(N),se=D.length,be=M.length;if(se===0)return be;if(be===0)return se;const Se=Array.from({length:se+1},()=>Array(be+1).fill(0));for(let Te=0;Te<=se;Te++)Se[Te][0]=Te;for(let Te=0;Te<=be;Te++)Se[0][Te]=Te;for(let Te=1;Te<=se;Te++)for(let De=1;De<=be;De++){const $e=D[Te-1]===M[De-1]?0:1;Se[Te][De]=Math.min(Se[Te-1][De]+1,Se[Te][De-1]+1,Se[Te-1][De-1]+$e)}return Se[se][be]},fs=(h,N)=>{const D=ts(h),M=ts(N);if(!D||!M)return 0;if(D===M)return 1;if(D.includes(M)||M.includes(D))return .92;const se=Bn(D,M),be=Math.max(D.length,M.length);return 1-se/(be||1)},Zi=(h,N)=>{const D=Array(h.length).fill(null),M=new Set;return h.forEach((se,be)=>{const Te=N.map(De=>({id:De.id,score:fs(se.petName||"",De.name||"")})).sort((De,$e)=>$e.score-De.score).find(De=>De.score>=.8&&!M.has(De.id));Te&&(D[be]=Te.id,M.add(Te.id))}),D};fe.useEffect(()=>{try{console.log("[auth] calling getSession()")}catch{}Ze.auth.getSession().then(async({data:N})=>{try{console.log("[auth] getSession() result:",{hasSession:!!N?.session,userId:N?.session?.user?.id||null})}catch{}const D=N.session;if(D?.user){xe(D.user.email??null),Ie(D.user.id),We("app"),Tp(D.user.id,D.user.email??null).catch(()=>{});try{const M=Intl.DateTimeFormat().resolvedOptions().timeZone;Dp(M).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",D.user.id)}catch{}Promise.all([uu(D.user.id),Ze.from("profiles").select("onboarding_complete").eq("id",D.user.id).single()]).then(([M,se])=>{E(M);const be=se.data?.onboarding_complete??!1;Xi(be),(M||[]).length===0&&!be&&fr(!0)}).catch(M=>{console.error("[auth] dbLoadPets failed:",M),E([])}),Yi(D.user.id).then(wt).catch(M=>{console.error("[auth] listClaims failed:",M),wt([])})}else{try{console.log("[auth] getSession() no session found - showing login")}catch{}We("login")}}).catch(N=>{try{console.error("[auth] getSession() error:",N)}catch{}We("login")});const{data:h}=Ze.auth.onAuthStateChange(async(N,D)=>{try{console.log("[auth] onAuthStateChange:",{event:N,hasSession:!!D,userId:D?.user?.id||null})}catch{}if(D?.user){xe(D.user.email??null),Ie(D.user.id),We("app"),Tp(D.user.id,D.user.email??null).catch(()=>{});try{const M=localStorage.getItem("pending_sms_consent");if(M){console.log("[auth] Found pending SMS consent, saving to database...");const se=JSON.parse(M);let be=null;try{be=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,console.log("[auth] IP address fetched:",be)}catch($e){console.log("[auth] Could not fetch IP address:",$e)}const Se={user_id:D.user.id,phone_number:se.phone_number,consented:se.consented,consent_text:se.consent_text,ip_address:be};console.log("[auth] Inserting SMS consent data:",Se);const{data:Te,error:De}=await Ze.from("sms_consent").insert(Se).select();De?(console.error("[auth] Failed to save SMS consent:",De),console.error("[auth] Consent error details:",JSON.stringify(De,null,2))):(console.log("[auth] SMS consent saved successfully!",Te),localStorage.removeItem("pending_sms_consent"),console.log("[auth] Cleared pending SMS consent from localStorage"))}}catch(M){console.error("[auth] Error processing pending SMS consent:",M)}try{const M=Intl.DateTimeFormat().resolvedOptions().timeZone;Dp(M).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",D.user.id)}catch{}Promise.all([uu(D.user.id),Ze.from("profiles").select("onboarding_complete").eq("id",D.user.id).single()]).then(([M,se])=>{E(M);const be=se.data?.onboarding_complete??!1;Xi(be),(M||[]).length===0&&!be&&fr(!0)}).catch(M=>{console.error("[auth] dbLoadPets failed:",M),E([])}),Yi(D.user.id).then(wt).catch(M=>{console.error("[auth] listClaims failed:",M),wt([])})}else{xe(null),Ie(null),E([]);try{console.log("[auth] onAuthStateChange - signed out, clearing state")}catch{}We("login")}});return()=>{h.subscription.unsubscribe()}},[]),fe.useEffect(()=>{if(!ge){ht(!1);return}Ze.from("profiles").select("is_admin").eq("id",ge).single().then(({data:h,error:N})=>{if(N){console.error("[admin] Failed to load admin status:",N),ht(!1);return}ht(h?.is_admin===!0)}).catch(()=>ht(!1))},[ge]),fe.useEffect(()=>{y&&y.length===1&&L(h=>h||y[0].id)},[y]),fe.useEffect(()=>{if(localStorage.getItem("justCompletedOnboarding")==="true"&&y&&y.length>0)if(y.some(D=>!D.photo_url)){bn(!0);const D=setTimeout(()=>{bn(!1),localStorage.removeItem("justCompletedOnboarding")},5e3),M=()=>{bn(!1),localStorage.removeItem("justCompletedOnboarding"),document.removeEventListener("click",M)};return document.addEventListener("click",M),()=>{clearTimeout(D),document.removeEventListener("click",M)}}else localStorage.removeItem("justCompletedOnboarding")},[y]),fe.useEffect(()=>{try{localStorage.removeItem("pch.finPeriod")}catch{}},[]),fe.useEffect(()=>{Ht(h=>(console.log("[App]  Incrementing dataRefreshToken:",h,"",h+1,"| pets count:",y.length),h+1))},[Ut,y,mt]),fe.useEffect(()=>{tr&&(Nt(tr.pet_id||null),ds(tr.service_date||""),Tr(tr.visit_title||""),Xn(tr.diagnosis||""),zs(tr.visit_notes||""),An(Array.isArray(tr.line_items)?tr.line_items:[]),Hr(tr.expense_category||"insured"))},[tr]);const jt=()=>{const h=ne.name.trim();if(!h)return;if(!X||X==="Not Insured"||X===" Select ")ne.insuranceCompany="",ne.filing_deadline_days="",ne.policyNumber="";else if(X==="Custom Insurance"){const se=ve.trim(),be=Number(P);if(!se){alert("Enter custom insurance company name");return}if(!Number.isFinite(be)||be<1||be>365){alert("Deadline must be 1-365 days");return}ne.insuranceCompany=se,ne.filing_deadline_days=be}else ne.insuranceCompany=Cc(X),ne.filing_deadline_days=Yo(Cc(X))||90;console.log(" [addPet] STEP 1 - Form values from newPet:"),console.log("  - newPet.spot_account_number:",ne.spot_account_number),console.log("  - After trim:",(ne.spot_account_number||"").trim()),console.log("  - Final value:",(ne.spot_account_number||"").trim()||null);const N=globalThis.crypto?.randomUUID?.()??String(Date.now()),D={id:N,name:h,species:ne.species,insuranceCompany:ne.insuranceCompany||"",policyNumber:(ne.policyNumber||"").trim(),ownerName:"",ownerPhone:"",filing_deadline_days:ne.filing_deadline_days,monthly_premium:ne.monthly_premium===""?null:Number(ne.monthly_premium),deductible_per_claim:ne.deductible_per_claim===""?null:Number(ne.deductible_per_claim),insurance_pays_percentage:ne.insurance_pays_percentage===""?null:Number(ne.insurance_pays_percentage)/100,annual_coverage_limit:null,coverage_start_date:ne.coverage_start_date||null,healthy_paws_pet_id:(ne.healthy_paws_pet_id||"").trim()||null,spot_account_number:(ne.spot_account_number||"").trim()||null,figo_policy_number:(ne.figo_policy_number||"").trim()||null};console.log(" [addPet] STEP 2 - Created PetProfile object:"),console.log("  - created.spot_account_number:",D.spot_account_number),console.log("  - Full created object:",D);const M=[...y,D];if(E(M),ge?(console.log(" [addPet] STEP 3 - Calling dbUpsertPet with userId:",ge),qh(ge,D).then(()=>{console.log(" [addPet] STEP 4 - dbUpsertPet SUCCESS")}).catch(se=>{console.error(" [addPet] STEP 4 - dbUpsertPet ERROR:",se)})):console.log(" [addPet] STEP 3 - SKIPPED dbUpsertPet (no userId)"),st!==null){const se=[...Ye];se[st]=N,bt(se),et(null)}else L(N);J(!1),O({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:"",healthy_paws_pet_id:"",spot_account_number:"",figo_policy_number:""}),pe(""),Y(""),F("")},Gs=h=>{te(h.id),Q({name:h.name,species:h.species,insuranceCompany:h.insuranceCompany,filing_deadline_days:h.filing_deadline_days||"",monthly_premium:h.monthly_premium??"",deductible_per_claim:h.deductible_per_claim??"",coverage_start_date:h.coverage_start_date||"",insurance_pays_percentage:h.insurance_pays_percentage!=null?Math.round(Number(h.insurance_pays_percentage)*100):"",policyNumber:h.policyNumber||"",healthy_paws_pet_id:h.healthy_paws_pet_id||"",spot_account_number:h.spot_account_number||"",pumpkin_account_number:h.pumpkin_account_number||"",figo_policy_number:h.figo_policy_number||""}),!h.insuranceCompany||h.insuranceCompany===""?ce("Not Insured"):ce(_5(h.insuranceCompany))},il=async()=>{if(console.log("[saveEdit]  Save started",{editingPetId:T,editPet:H}),!T||!H)return;let h="",N="";if(!G||G==="Not Insured"||G===" Select ")h="",N="";else if(G==="Custom Insurance"){const se=V.trim(),be=Number(ue);if(!se){alert("Enter custom insurance company name");return}if(!Number.isFinite(be)||be<1||be>365){alert("Deadline must be 1-365 days");return}h=se,N=be}else h=Cc(G),N=Yo(h)||90;const D=y.map(se=>se.id===T?{...se,name:H.name.trim(),species:H.species,insuranceCompany:h,policyNumber:(H.policyNumber||"").trim(),ownerName:se.ownerName||"",ownerPhone:se.ownerPhone||"",filing_deadline_days:N,monthly_premium:H.monthly_premium===""?null:Number(H.monthly_premium),deductible_per_claim:H.deductible_per_claim===""?null:Number(H.deductible_per_claim),coverage_start_date:H.coverage_start_date||null,insurance_pays_percentage:H.insurance_pays_percentage===""?null:Number(H.insurance_pays_percentage)/100,annual_coverage_limit:se.annual_coverage_limit??null,healthy_paws_pet_id:H.healthy_paws_pet_id||null,spot_account_number:H.spot_account_number||null,pumpkin_account_number:H.pumpkin_account_number||null,figo_policy_number:H.figo_policy_number||null}:se),M=D.find(se=>se.id===T);if(console.log("[saveEdit]  Pet data to save:",M),ge){const se=D.find(be=>be.id===T);if(se)try{console.log("[saveEdit]  Starting dbUpsertPet..."),await qh(ge,se),console.log("[saveEdit]  dbUpsertPet complete"),console.log("[saveEdit]  Starting dbLoadPets...");const be=await uu(ge);console.log("[saveEdit]  dbLoadPets complete, got",be.length,"pets"),console.log("[saveEdit]  Refreshed pet data:",be.find(Se=>Se.id===T)),E(be),console.log("[saveEdit]  State updated with fresh DB data"),Ht(Se=>(console.log("[saveEdit]  Forcing dataRefreshToken increment:",Se,"",Se+1),Se+1)),console.log("[saveEdit]  Financial Summary refresh triggered")}catch(be){console.error("[saveEdit]  Error:",be),E(D)}}else E(D);te(null),Q(null),console.log("[saveEdit]  Save complete")},bo=()=>n.current?.click(),rs=async()=>{try{console.log("[auth] signOut() called")}catch{}const{error:h}=await Ze.auth.signOut();try{console.log("[auth] signOut() result:",h||null)}catch{}try{const{data:N}=await Ze.auth.getSession();console.log("[auth] post-signOut getSession():",{hasSession:!!N?.session})}catch{}},Ys=h=>{if(console.log("[MOBILE DEBUG] ========== processFile CALLED =========="),console.log("[MOBILE DEBUG] file:",h),console.log("[MOBILE DEBUG] file type:",h?.type),console.log("[MOBILE DEBUG] file size:",h?.size),!h){console.log("[MOBILE DEBUG] No file provided, setting selectedFile to null"),t(null);return}if(!(h.type.startsWith("image/")||h.type==="application/pdf")){console.log("[MOBILE DEBUG] File type not allowed:",h.type),t(null);return}const D=h.type.startsWith("image/"),M=D?URL.createObjectURL(h):void 0;console.log("[MOBILE DEBUG] Setting selectedFile:",{fileName:h.name,fileType:h.type,isImage:D,objectUrl:M}),t({file:h,objectUrl:M}),S(null),x(null)},wo=fe.useCallback(h=>{console.log("[MOBILE DEBUG] ========== handleChange CALLED =========="),console.log("[MOBILE DEBUG] e.target.files:",h.target.files),console.log("[MOBILE DEBUG] e.target.files?.[0]:",h.target.files?.[0]),Ys(h.target.files?.[0]),h.target.value=""},[]),ja=h=>{h.preventDefault(),h.stopPropagation(),a(!0)},ea=h=>{h.preventDefault(),h.stopPropagation(),a(!0)},Ka=h=>{h.preventDefault(),h.stopPropagation(),a(!1)},Ds=h=>{h.preventDefault(),h.stopPropagation(),a(!1);const N=h.dataTransfer;if(!N)return;const D=N.files?.[0]??null;Ys(D)},ta=fe.useMemo(()=>{if(!e)return"";const{size:h}=e.file,N=1024,D=N*1024;return h<N?`${h} B`:h<D?`${(h/N).toFixed(1)} KB`:`${(h/D).toFixed(2)} MB`},[e]),qn=h=>{const N=typeof h?.clinicName=="string"?h.clinicName:typeof h?.clinic_name=="string"?h.clinic_name:"",D=typeof h?.clinicAddress=="string"?h.clinicAddress:typeof h?.clinic_address=="string"?h.clinic_address:"",M=typeof h?.clinicPhone=="string"?h.clinicPhone:typeof h?.clinic_phone=="string"?h.clinic_phone:void 0,se=typeof h?.petName=="string"?h.petName:typeof h?.pet_name=="string"?h.pet_name:"",be=typeof h?.dateOfService=="string"?h.dateOfService:typeof h?.service_date=="string"?h.service_date:"",Se=typeof h?.totalAmount=="string"?h.totalAmount:h?.total_amount!=null?String(h.total_amount):"",Te=typeof h?.invoiceNumber=="string"?h.invoiceNumber:typeof h?.invoice_number=="string"?h.invoice_number:void 0,$e=(Array.isArray(h?.lineItems)?h.lineItems:Array.isArray(h?.line_items)?h.line_items:[]).map(qe=>({description:typeof qe?.description=="string"?qe.description:"",amount:typeof qe?.amount=="string"?qe.amount:qe?.amount!=null?String(qe.amount):""}));return{clinicName:N,clinicAddress:D,clinicPhone:M,petName:se,dateOfService:be,totalAmount:Se,diagnosis:typeof h?.diagnosis=="string"?h.diagnosis:"",lineItems:$e,invoiceNumber:Te}},Aa=h=>{if(!h||!Array.isArray(h.pets))return null;const N=h.pets.map(D=>({petName:typeof D?.petName=="string"?D.petName:"",petSpecies:typeof D?.petSpecies=="string"?D.petSpecies:void 0,lineItems:Array.isArray(D?.lineItems)?D.lineItems.map(M=>({description:typeof M?.description=="string"?M.description:"",amount:typeof M?.amount=="string"?M.amount:String(M?.amount??"")})):[],subtotal:typeof D?.subtotal=="string"?D.subtotal:void 0}));return{clinicName:typeof h?.clinicName=="string"?h.clinicName:"",clinicAddress:typeof h?.clinicAddress=="string"?h.clinicAddress:"",clinicPhone:typeof h?.clinicPhone=="string"?h.clinicPhone:typeof h?.clinic_phone=="string"?h.clinic_phone:void 0,dateOfService:typeof h?.dateOfService=="string"?h.dateOfService:"",diagnosis:typeof h?.diagnosis=="string"?h.diagnosis:"",pets:N,invoiceNumber:typeof h?.invoiceNumber=="string"?h.invoiceNumber:void 0}},ra=h=>{const N=(h||"").replace(/[^0-9.\-]/g,""),D=parseFloat(N);return Number.isFinite(D)?D:0},Pa=h=>`$${h.reduce((D,M)=>D+ra(M.amount),0).toFixed(2)}`,na=async(h,N,D)=>{try{console.log("[uploadClaimPdf] Starting upload...",{uid:h,claimId:N,blobSize:D.size,blobType:D.type,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)});let M=D;D instanceof File||(console.log("[uploadClaimPdf] Converting Blob to File for better mobile compatibility"),M=new File([D],`${N}.pdf`,{type:"application/pdf"}));const se=`${h}/${N}.pdf`;console.log("[uploadClaimPdf] Uploading to path:",se);const{error:be}=await Ze.storage.from("claim-pdfs").upload(se,M,{upsert:!0,contentType:"application/pdf"});if(be)throw console.error("[uploadClaimPdf]  Supabase storage error:",be),new Error(`Storage upload failed: ${be.message}`);console.log("[uploadClaimPdf]  Storage upload successful, updating claim record...");const Se=await Ko(N,{pdf_path:se});console.log("[uploadClaimPdf]  Claim record updated with pdf_path:",se,"Result:",Se);const{data:Te,error:De}=await Ze.from("claims").select("pdf_path").eq("id",N).single();if(De)console.error("[uploadClaimPdf]   Could not verify pdf_path update:",De);else{if(Te?.pdf_path!==se)throw console.error("[uploadClaimPdf]  pdf_path verification FAILED - expected:",se,"got:",Te?.pdf_path),new Error("Failed to update claim record with pdf_path");console.log("[uploadClaimPdf]  Verified pdf_path was saved correctly:",Te.pdf_path)}return se}catch(M){throw console.error("[uploadClaimPdf]  CRITICAL ERROR - Invoice will NOT be attached:",M),M}},ps=async(h,N)=>{if(!ge){Ls("Please log in to upload photos");return}const D=5*1024*1024;if(N.size>D){Ls("Photo must be smaller than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(N.type)){Ls("Please upload a PNG or JPEG image");return}Ga(h),Ls(null);try{const se=N.name.split(".").pop()||"jpg",be=Date.now(),Se=`${ge}/${h}-${be}.${se}`,{error:Te}=await Ze.storage.from("pet-photos").upload(Se,N,{upsert:!0,contentType:N.type});if(Te)throw Te;const{data:De}=Ze.storage.from("pet-photos").getPublicUrl(Se);if(!De?.publicUrl)throw new Error("Failed to get public URL");const $e=y.find(ft=>ft.id===h);if(!$e)throw new Error("Pet not found");const qe={...$e,photo_url:De.publicUrl};await qh(ge,qe);const Xe=await uu(ge);E(Xe),Hs("Photo uploaded successfully!")}catch(se){console.error("[uploadPetPhoto] error",se),Ls(se?.message||"Failed to upload photo. Please try again.")}finally{Ga(null)}},sa=async(h,N)=>{const D=N.target.files?.[0];D&&(await ps(h,D),N.target.value="")},[Ca,Ts]=fe.useState(!1),fi=async()=>{if(console.log("[MOBILE DEBUG] ========== handleProcess CALLED =========="),console.log("[MOBILE DEBUG] selectedFile:",e),console.log("[MOBILE DEBUG] typeof selectedFile:",typeof e),console.log("[MOBILE DEBUG] selectedFile?.file:",e?.file),!e){console.log("[MOBILE DEBUG]  EARLY RETURN - No selectedFile!");return}u(!0),x(null);try{console.log("[extract] starting server-side extraction, file type:",e.file.type),console.log("[extract] file size:",e.file.size),console.log("[extract] file name:",e.file.name);const h="https://pet-claim-helper.onrender.com",N=new FormData;N.append("file",e.file);const D=new AbortController,se=setTimeout(()=>{try{D.abort()}catch{}},9e4),be=await fetch(`${h}/api/extract-pdf`,{method:"POST",body:N,signal:D.signal});if(clearTimeout(se),!be.ok){const qe=await be.text().catch(()=>"");throw new Error(qe||`Server error (${be.status})`)}const Se=await be.json();if(console.log("[MOBILE DEBUG] Full JSON response:",JSON.stringify(Se,null,2)),!Se||Se.ok!==!0||!Se.data)throw console.error("[extract] bad response shape",Se),new Error("Invalid extraction response");const Te=Se.data;if(console.log("[MOBILE DEBUG] Parsed data from server:",JSON.stringify(Te,null,2)),!Te)throw console.error("[extract] empty parsed data from server response"),new Error("Could not parse JSON from server response.");const De=Aa(Te);if(De&&De.pets.length>1){console.log("[MOBILE DEBUG] Multi-pet extraction detected:",De),re(De),S(null);const qe=Zi(De.pets,y);bt(qe);return}const $e=qn(Te);console.log("[MOBILE DEBUG] Normalized extraction result:",JSON.stringify($e,null,2)),console.log("[VISIT TITLE DEBUG] Extracted diagnosis value:",$e.diagnosis),A&&($e.petName=A.name),console.log("[MOBILE DEBUG] Final extraction being set to state:",JSON.stringify($e,null,2)),console.log("[VISIT TITLE DEBUG] About to call setExtracted with diagnosis:",$e.diagnosis),S($e),re(null)}catch(h){const N=String(h?.message||""),M=String(h?.name||"")==="AbortError"||/aborted|timeout/i.test(N),se=/NetworkError|Failed to fetch|TypeError: Failed to fetch/i.test(N),be=h?.error&&(h.error.message||h.error?.error?.message)||N;x(M?"Extraction timed out. Mobile networks can be slow  please try again. We now wait up to 90 seconds.":se?"Network error during extraction. Please check your connection and try again.":be||"AI extraction failed. Please try again."),console.error("[extract] error:",{name:h?.name,message:h?.message,cause:h?.cause});const Se={clinicName:"",clinicAddress:"",clinicPhone:"",petName:A?A.name:"",dateOfService:"",totalAmount:"",diagnosis:"",lineItems:[]};S(Se),re(null)}finally{u(!1)}},pi=h=>{const N=h.pets?.insurance_company||"",D=Yo(N);if(D)return D;const M=h.pets?.filing_deadline_days;return typeof M=="number"&&M>0?M:90},mi=h=>{if(!h.service_date)return null;const N=String(h.service_date).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!N)return null;const D=Number(N[1]),M=Number(N[2])-1,se=Number(N[3]),be=new Date(D,M,se);return Number.isNaN(be.getTime())?null:be},gi=h=>{const N=mi(h);if(!N)return null;const D=new Date(N.getTime());D.setDate(D.getDate()+pi(h));const M=new Date,se=D.getTime()-M.getTime();return Math.ceil(se/(1e3*60*60*24))},ms=h=>{switch((h||"not_submitted").toLowerCase()){case"filed":case"submitted":return{text:"Claim - Filed",cls:"bg-emerald-50 text-emerald-700"};case"approved":return{text:"Approved",cls:"bg-emerald-50 text-emerald-700"};case"paid":return{text:"Paid",cls:"bg-emerald-50 text-emerald-700"};case"denied":return{text:"Denied",cls:"bg-rose-50 text-rose-700"};case"not_filed":default:return{text:"Bill - Pending Submission",cls:"bg-blue-50 text-blue-700"}}},Ks=h=>{const N=gi(h),D=(h.filing_status||"not_submitted").toLowerCase(),M=D==="filed"?"submitted":D;return M==="denied"?{text:" Claim Denied",cls:"bg-red-100 text-red-800 border border-red-300 font-semibold"}:M==="approved"?{text:" Approved",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:M==="paid"?{text:" Paid",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:M==="submitted"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:N===null?{text:"No date",cls:"bg-slate-100 text-slate-600"}:N<0?{text:" DEADLINE PASSED - Submit now!",cls:"bg-red-100 text-red-800 border border-red-300 font-bold"}:N<5?{text:` URGENT - ${N} days`,cls:"bg-red-100 text-red-800 border border-red-300 font-bold animate-pulse"}:N<=14?{text:` Due soon - ${N} days`,cls:"bg-orange-100 text-orange-800 border border-orange-300 font-semibold"}:N<=29?{text:` Due soon - ${N} days`,cls:"bg-yellow-100 text-yellow-800 border border-yellow-300 font-semibold"}:{text:` Plenty of time - ${N} days`,cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}},Or=h=>`$${(typeof h=="number"&&Number.isFinite(h)?h:0).toFixed(2)}`,ns=fe.useMemo(()=>{const h=[...Ut];return h.sort((N,D)=>{switch(Ar){case"date-desc":{const M=mi(N)?.getTime()||0;return(mi(D)?.getTime()||0)-M}case"amount-desc":{const M=Number(N.total_amount)||0;return(Number(D.total_amount)||0)-M}case"amount-asc":{const M=Number(N.total_amount)||0,se=Number(D.total_amount)||0;return M-se}case"pet-asc":{const M=(N.pets?.name||"").toLowerCase(),se=(D.pets?.name||"").toLowerCase();return M.localeCompare(se)}default:return 0}}),h},[Ut,Ar]),Os=fe.useMemo(()=>{const h=Ut.length,N=Ut.filter(Se=>String(Se.expense_category||"insured").toLowerCase()==="insured"),D=N.filter(Se=>["not_filed","not_submitted"].includes(String(Se.filing_status||"not_submitted").toLowerCase())),M=D.reduce((Se,Te)=>Se+(Number(Te.total_amount)||0),0),se=N.filter(Se=>["filed","submitted"].includes(String(Se.filing_status||"").toLowerCase())).length,be=D.filter(Se=>{const Te=gi(Se);return Te!==null&&Te>=1&&Te<=14}).length;return{total:h,notFiledCount:D.length,notFiledSum:M,filedPending:se,expiringSoon:be}},[Ut]);return fe.useMemo(()=>{const h=Zt=>{if(!Zt)return null;const Tt=String(Zt).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!Tt)return null;const pr=Number(Tt[1]),zr=Number(Tt[2])-1,Ln=Number(Tt[3]),fn=new Date(pr,zr,Ln);return Number.isNaN(fn.getTime())?null:fn},N=Zt=>{const Tt=h(Zt);if(!Tt)return 0;const pr=new Date;if(mt==="2026"){if(Tt.getFullYear()>2026)return 0;const mr=Tt.getFullYear()<2026?0:Tt.getMonth(),Xs=pr.getFullYear()===2026?pr.getMonth():11;return Math.max(0,Xs-mr+1)}if(mt==="2025"){if(Tt.getFullYear()>2025)return 0;const mr=Tt.getFullYear()<2025?0:Tt.getMonth(),Xs=pr.getFullYear()===2025?pr.getMonth():11;return Math.max(0,Xs-mr+1)}if(mt==="2024"){if(Tt.getFullYear()>2024)return 0;const mr=Tt.getFullYear()<2024?0:Tt.getMonth();return Math.max(0,11-mr+1)}const zr=pr,Ln=(zr.getFullYear()-Tt.getFullYear())*12+(zr.getMonth()-Tt.getMonth())+1;return Math.max(0,Ln)},D=Ut.filter(Zt=>{const Tt=Zt.service_date?h(Zt.service_date):null;if(!Tt||Number.isNaN(Tt.getTime()))return!1;if(mt==="all")return!0;if(mt==="2026")return Tt.getFullYear()===2026;if(mt==="2025")return Tt.getFullYear()===2025;if(mt==="2024")return Tt.getFullYear()===2024;if(mt==="last12"){const pr=new Date,zr=new Date(pr.getTime());return zr.setDate(zr.getDate()-365),Tt>=zr&&Tt<=pr}return!0}),M={insured:{sum:0,count:0},not_insured:{sum:0,count:0},maybe_insured:{sum:0,count:0}};let se=0,be=0,Se=0,Te=0;const De={};let $e=0,qe=0;const Xe=new Date;let ft=0,Gt=0,Dt=0,rr=0,wr=0,Cr=0;for(const Zt of D){const Tt=Number(Zt.total_amount||0),pr=String(Zt.filing_status||"not_filed").toLowerCase(),zr=Zt.expense_category||"insured",Ln=h(Zt.service_date);if(Te+=Tt,M[zr].sum+=Tt,M[zr].count+=1,pr==="paid"){const mr=Number(Zt.reimbursed_amount||0);se+=mr,zr==="insured"&&(Cr+=Math.max(0,Tt-mr))}else(pr==="filed"||pr==="approved")&&(be+=Tt);if((pr==="denied"||zr==="not_insured")&&(Se+=Tt),zr!=="insured"&&(rr+=Tt),pr==="approved"&&($e+=Tt),Ln&&!Number.isNaN(Ln.getTime())){if(Ln<=Xe&&(ft+=Tt,pr==="paid")){const mr=Number(Zt.reimbursed_amount||0);qe+=mr,Gt+=mr}Ln<=Xe&&pr==="submitted"&&zr==="insured"&&(wr+=Tt)}const fn=Zt.pets?.name||"Unknown Pet";De[fn]||(De[fn]={sum:0,count:0}),De[fn].sum+=Tt,De[fn].count+=1}for(const Zt of y){const Tt=Number(Zt.monthly_premium||0);Tt>0&&(Dt+=Tt*N(Zt.coverage_start_date||null))}for(const Zt of D){const Tt=String(Zt.filing_status||"").toLowerCase(),pr=String(Zt.expense_category||"").toLowerCase();Tt==="paid"&&pr==="insured"&&(Number(Zt.total_amount||0),Math.max(0,Number(Zt.deductible_applied)||0),Math.max(0,Number(Zt.reimbursed_amount)||0))}const ss=Dt+rr+Cr,is=Math.max(0,ft-Gt);return{byCategory:M,reimbursed:se,awaiting:be,outOfPocket:Se,grandTotal:Te,perPet:De,awaitingInsured:$e,periodSpent:ss,periodReimbursed:qe,periodNet:ss,definiteTotal:ss,pendingTotal:wr,spentOnAllPets:ft,reimbursedPaidPeriod:Gt,netCostPeriod:is}},[Ut,mt]),l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100",children:[yo&&l.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:l.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm shadow-lg border border-slate-700",children:yo.message})}),l.jsx("header",{className:"px-4 pt-2 pb-3 md:py-8 bg-gradient-to-b from-white/50 to-transparent dark:from-slate-900/50",children:l.jsxs("div",{className:"mx-auto max-w-6xl",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center mb-1 md:mb-6",children:[l.jsx("img",{src:"/pch-logo.png",alt:"Pet Claim Helper",className:"w-[70vw] max-w-[320px] md:w-[90vw] md:max-w-[500px] h-auto object-contain mt-1 mb-0 md:mt-0 md:mb-0"}),l.jsx("div",{className:"text-base md:text-lg font-bold text-gray-500 dark:text-gray-400 text-center max-w-xl px-4 leading-snug mt-1 mb-3 md:mt-0 md:mb-0",children:l.jsx("div",{children:"Never miss a claim. Track every dollar."})})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 flex-wrap mt-2 md:mt-0",children:[Re==="app"&&l.jsxs("button",{type:"button",onClick:()=>vt.current?.scrollIntoView({behavior:"smooth"}),className:"relative inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:["Bills (",Ut.length,")",Os.expiringSoon>0&&l.jsx("span",{className:"ml-2 inline-block h-2 w-2 rounded-full bg-rose-500","aria-hidden":!0})]}),Re==="app"&&l.jsx("button",{type:"button",onClick:()=>Lt(h=>h==="app"?"settings":"app"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Settings"}),Re==="app"&&l.jsx("button",{type:"button",onClick:async()=>{if(Et==="medications")Lt("app");else{if(Oi===null&&ge){const{data:h}=await Ze.from("profiles").select("phone").eq("id",ge).single(),N=h?.phone||null;Es(!!N),N||Ti(!0)}else Oi===!1&&Ti(!0);Lt("medications")}},className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-2 md:px-3 py-1.5 text-xs font-medium shadow-sm hover:shadow",children:" Medications"}),Re==="app"&&sr&&l.jsx("button",{type:"button",onClick:()=>Lt(h=>h==="admin"?"app":"admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Admin Dashboard"}),Re==="app"&&sr&&l.jsx("button",{type:"button",onClick:()=>Lt(h=>h==="med-admin"?"app":"med-admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Medication Admin"}),Re==="app"&&l.jsx("a",{href:`mailto:support@petclaimhelper.com?subject=Pet Claim Helper Support Request&body=Hi Pet Claim Helper Team,%0D%0A%0D%0AI need help with:%0D%0A%0D%0A----%0D%0AUser: ${ye||"Not logged in"}%0D%0AUser ID: ${ge||"N/A"}`,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",title:"Need help? Contact support",children:" Contact Support"}),ye&&l.jsxs("span",{className:"hidden sm:inline text-xs text-slate-600 dark:text-slate-300",children:["Logged in as: ",ye]}),ye&&l.jsx("button",{onClick:rs,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:"Logout"})]})]})}),l.jsxs("main",{className:"px-6",children:[Re==="app"&&Et==="settings"&&l.jsx(fw,{userId:ge,userEmail:ye,onClose:()=>Lt("app"),onDefaultExpenseChange:h=>ee(h),onDefaultPeriodChange:h=>it(h)}),Re==="app"&&Et==="medications"&&l.jsx("section",{className:"mx-auto mt-8 max-w-6xl px-2",children:l.jsx(j5,{userId:ge,pets:y,refreshKey:Vr})}),Re==="app"&&Et==="admin"&&l.jsx(l.Fragment,{children:sr?l.jsx(tw,{}):l.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[l.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),l.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),l.jsx("button",{onClick:()=>Lt("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),Re==="app"&&Et==="med-admin"&&l.jsx(l.Fragment,{children:sr?l.jsx(rw,{}):l.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[l.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),l.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),l.jsx("button",{onClick:()=>Lt("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),Re!=="app"&&l.jsxs("section",{className:"mx-auto max-w-md mt-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("button",{type:"button",onClick:()=>We("signup"),className:["flex-1 px-6 py-3 text-sm rounded-t-xl transition-all font-semibold",Re==="signup"?"bg-teal-600 text-white shadow-lg scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"].join(" "),children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Create Account"})]})}),l.jsx("button",{type:"button",onClick:()=>We("login"),className:["flex-1 px-6 py-3 text-sm rounded-t-xl transition-all font-semibold",Re==="login"?"bg-emerald-600 text-white shadow-lg scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"].join(" "),children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Sign In"})]})})]}),l.jsxs("div",{className:"rounded-2xl rounded-tl-none rounded-tr-none border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-xl overflow-hidden",children:[l.jsx("div",{className:["px-6 py-4 text-white font-semibold",Re==="signup"?"bg-gradient-to-r from-teal-500 to-cyan-600":"bg-gradient-to-r from-emerald-500 to-green-600"].join(" "),children:l.jsx("div",{className:"flex items-center gap-2 text-base",children:Re==="signup"?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Get Started - Create Your Account"})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Welcome Back!"})]})})}),l.jsx("div",{className:"p-6",children:l.jsx(dw,{mode:Re,onSwitch:h=>We(h)})})]})]}),Re==="app"&&Et==="app"&&l.jsxs("section",{className:"mx-auto max-w-4xl",ref:yt,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Your Pets"}),l.jsx("button",{type:"button",onClick:()=>J(h=>!h),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm font-medium shadow-sm hover:shadow",children:"+ Add Pet"})]}),Ya&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-800 dark:text-red-200 flex items-start justify-between",children:[l.jsx("span",{children:Ya}),l.jsx("button",{onClick:()=>Ls(null),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:""})]}),$&&l.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 p-4 max-w-2xl mx-auto",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{id:"pet-name",value:ne.name,onChange:h=>O({...ne,name:h.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"pet-species",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{id:"pet-species",value:ne.species,onChange:h=>O({...ne,species:h.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsx("select",{id:"pet-insurance",value:X,onChange:h=>{const N=h.target.value;pe(N);const D=Cc(N),M=Yo(D);N==="Not Insured"||N===" Select "?O({...ne,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):N==="Custom Insurance"?O({...ne,insuranceCompany:"",filing_deadline_days:""}):D&&O({...ne,insuranceCompany:D,filing_deadline_days:M||90})},className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:el.map(h=>l.jsx("option",{value:h.display,children:h.display},h.display))})]}),X==="Healthy Paws (90 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-healthy-paws-id",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"pet-healthy-paws-id",value:ne.healthy_paws_pet_id||"",onChange:h=>O({...ne,healthy_paws_pet_id:h.target.value}),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),X==="Spot (270 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-spot-account-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Account Number"}),l.jsx("input",{id:"pet-spot-account-number",value:ne.spot_account_number||"",onChange:h=>O({...ne,spot_account_number:h.target.value}),placeholder:"e.g., 12345678",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),X==="Figo (180 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-figo-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{id:"pet-figo-policy-number",value:ne.figo_policy_number||"",onChange:h=>O({...ne,figo_policy_number:h.target.value}),placeholder:"e.g., FG123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),X&&X!=="Not Insured"&&X!==" Select "&&X!=="Spot (270 days)"&&X!=="Figo (180 days)"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),l.jsx("input",{id:"pet-policy-number",value:ne.policyNumber||"",onChange:h=>O({...ne,policyNumber:h.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),X&&X!=="Not Insured"&&X!==" Select "&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-premium",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"pet-premium",type:"number",min:0,value:String(ne.monthly_premium??""),onChange:h=>O({...ne,monthly_premium:h.target.value===""?"":Number(h.target.value)}),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-deductible",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"pet-deductible",type:"number",min:0,value:String(ne.deductible_per_claim??""),onChange:h=>O({...ne,deductible_per_claim:h.target.value===""?"":Number(h.target.value)}),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-pays",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),l.jsx("input",{id:"pet-insurance-pays",type:"number",min:50,max:100,value:String(ne.insurance_pays_percentage??""),onChange:h=>O({...ne,insurance_pays_percentage:h.target.value===""?"":Number(h.target.value)}),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-coverage-start",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),l.jsx("input",{id:"pet-coverage-start",type:"date",value:ne.coverage_start_date||"",onChange:h=>O({...ne,coverage_start_date:h.target.value}),onClick:h=>h.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:jt,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",children:"Save Pet"}),l.jsx("button",{type:"button",onClick:()=>J(!1),className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.length===0&&l.jsx("div",{className:"col-span-full text-sm text-slate-500 dark:text-slate-400",children:'No pets saved yet. Click "+ Add Pet" to create one.'}),y.map(h=>l.jsxs("div",{className:["rounded-xl border p-4 text-left shadow-sm relative transition-all",C===h.id?"bg-emerald-50/50 dark:bg-emerald-900/10 ring-2 ring-emerald-500 shadow-md":"bg-white dark:bg-slate-900/60"].join(" "),style:{border:`${C===h.id?"3px":"2px"} solid ${C===h.id?"#10b981":h.color||(h.species==="dog"?"#3B82F6":h.species==="cat"?"#F97316":"#6B7280")}`},children:[l.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[l.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:N=>sa(h.id,N),className:"sr-only",id:`photo-upload-${h.id}`,disabled:Qi===h.id}),l.jsx("label",{htmlFor:`photo-upload-${h.id}`,className:["inline-flex items-center justify-center w-8 h-8 rounded-full cursor-pointer transition-all",h.species==="dog"?"bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",Qi===h.id?"opacity-50 cursor-not-allowed":""].join(" "),title:h.photo_url?"Change Photo":"Add Photo",children:Qi===h.id?l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),Sa&&!h.photo_url&&y.indexOf(h)===0&&l.jsxs("div",{className:"absolute -top-16 -right-2 pointer-events-none animate-bounce",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg shadow-xl whitespace-nowrap text-sm font-medium",children:["Upload the cutest picture of ",h.name,"! "]}),l.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-pink-500"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-center mb-3",children:h.photo_url?l.jsx("img",{src:h.photo_url,alt:`${h.name}'s photo`,className:"w-24 h-24 rounded-full object-cover border-4 shadow-lg transition-transform hover:scale-105",style:{borderColor:h.color||(h.species==="dog"?"#3B82F6":h.species==="cat"?"#F97316":"#6B7280")}}):l.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-5xl border-4 shadow-lg",style:{borderColor:h.color||(h.species==="dog"?"#3B82F6":h.species==="cat"?"#F97316":"#6B7280"),backgroundColor:h.species==="dog"?"#EFF6FF":h.species==="cat"?"#FFF7ED":"#F3F4F6"},children:h.species==="dog"?"":h.species==="cat"?"":""})}),l.jsx("div",{className:"flex items-start justify-between gap-3 mb-2",children:l.jsxs("div",{className:"flex-1 text-center",children:[l.jsxs("div",{className:"text-base font-semibold flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:h.color||(h.species==="dog"?"#3B82F6":h.species==="cat"?"#F97316":"#6B7280")}}),h.name]}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 capitalize",children:h.species})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>L(h.id),className:["inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium hover:shadow transition-all flex-1",C===h.id?"bg-emerald-600 hover:bg-emerald-700 text-white":"border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 hover:border-emerald-400"].join(" "),children:[C===h.id&&l.jsx("span",{className:"mr-1",children:""}),C===h.id?"Selected":"Select"]}),l.jsx("button",{type:"button",onClick:()=>Gs(h),className:"inline-flex items-center justify-center w-9 h-9 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all",title:"Edit pet",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})]}),l.jsx("div",{className:"mt-3 text-sm text-slate-700 dark:text-slate-300 space-y-1",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Insurance:"}),(()=>{const N=h.insuranceCompany||"Not Insured",D=N.toLowerCase().includes("nationwide"),M=N.toLowerCase().includes("healthy paws"),se=N.toLowerCase().includes("trupanion"),be=N.toLowerCase().includes("pumpkin"),Se=N.toLowerCase().includes("spot"),Te=N.toLowerCase().includes("figo"),De=N.toLowerCase().includes("pets best"),$e=N.toLowerCase().includes("not insured")||N.toLowerCase().includes("none");let qe="bg-slate-100 dark:bg-slate-800",Xe="text-slate-700 dark:text-slate-300",ft="border-slate-200 dark:border-slate-700";return D?(qe="bg-blue-50 dark:bg-blue-950",Xe="text-blue-700 dark:text-blue-300",ft="border-blue-200 dark:border-blue-800"):M?(qe="bg-green-50 dark:bg-green-950",Xe="text-green-700 dark:text-green-300",ft="border-green-200 dark:border-green-800"):se?(qe="bg-purple-50 dark:bg-purple-950",Xe="text-purple-700 dark:text-purple-300",ft="border-purple-200 dark:border-purple-800"):be?(qe="bg-orange-50 dark:bg-orange-950",Xe="text-orange-600 dark:text-orange-300",ft="border-orange-200 dark:border-orange-800"):Se?(qe="bg-orange-50 dark:bg-orange-950",Xe="text-orange-600 dark:text-orange-400",ft="border-orange-200 dark:border-orange-800"):Te?(qe="bg-teal-50 dark:bg-teal-950",Xe="text-teal-600 dark:text-teal-300",ft="border-teal-200 dark:border-teal-800"):De?(qe="bg-cyan-50 dark:bg-cyan-950",Xe="text-cyan-700 dark:text-cyan-300",ft="border-cyan-200 dark:border-cyan-800"):$e&&(qe="bg-slate-100 dark:bg-slate-800",Xe="text-slate-600 dark:text-slate-400",ft="border-slate-300 dark:border-slate-700"),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${qe} ${Xe} ${ft}`,children:[D&&"",M&&"",se&&"",be&&"",Se&&"",Te&&"",De&&"",$e&&"",N]})})()]})}),T===h.id&&H&&l.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-800 p-3 max-w-3xl mx-auto overflow-x-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-name",className:"block text-xs",children:"Pet Name"}),l.jsx("input",{id:"edit-pet-name",value:H.name,onChange:N=>Q({...H,name:N.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-species",className:"block text-xs",children:"Species"}),l.jsxs("select",{id:"edit-pet-species",value:H.species,onChange:N=>Q({...H,species:N.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("select",{id:"edit-pet-insurance",value:G,onChange:N=>{const D=N.target.value;ce(D);const M=Cc(D),se=Yo(M);D==="Not Insured"||D===" Select "?Q({...H,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):M&&Q({...H,insuranceCompany:M,filing_deadline_days:se||90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:el.map(N=>l.jsx("option",{value:N.display,children:N.display},N.display))})]}),G==="Not Insured"&&l.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:l.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}),G==="Healthy Paws (90 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-healthy-paws-id",className:"block text-xs text-slate-500",children:"Healthy Paws Pet ID"}),l.jsx("input",{id:"edit-pet-healthy-paws-id",value:H.healthy_paws_pet_id||"",onChange:N=>Q({...H,healthy_paws_pet_id:N.target.value}),placeholder:"e.g., 1400806-1",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),G==="Spot (270 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-spot-account-number",className:"block text-xs text-slate-500",children:"Account Number"}),l.jsx("input",{id:"edit-pet-spot-account-number",value:H.spot_account_number||"",onChange:N=>Q({...H,spot_account_number:N.target.value}),placeholder:"e.g., 12345678",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),G==="Pumpkin (270 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-pumpkin-account-number",className:"block text-xs text-slate-500",children:"Pumpkin Account Number"}),l.jsx("input",{id:"edit-pet-pumpkin-account-number",value:H.pumpkin_account_number||"",onChange:N=>Q({...H,pumpkin_account_number:N.target.value}),placeholder:"e.g., 12345678",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),G==="Figo (180 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"edit-pet-figo-policy-number",className:"block text-xs text-slate-500",children:"Figo Policy Number"}),l.jsx("input",{id:"edit-pet-figo-policy-number",value:H.figo_policy_number||"",onChange:N=>Q({...H,figo_policy_number:N.target.value}),placeholder:"e.g., FG123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),G&&G!=="Not Insured"&&G!==" Select "&&G!=="Spot (270 days)"&&G!=="Pumpkin (270 days)"&&G!=="Figo (180 days)"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"edit-pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),l.jsx("input",{id:"edit-pet-policy-number",value:H.policyNumber||"",onChange:N=>Q({...H,policyNumber:N.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),G!=="Not Insured"&&G!==" Select "&&G&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"edit-pet-premium",type:"number",step:"0.01",placeholder:"e.g., 38.00",value:String(H.monthly_premium??""),onChange:N=>Q({...H,monthly_premium:N.target.value===""?"":Number(N.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Monthly insurance premium cost"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"edit-pet-deductible",type:"number",step:"0.01",placeholder:"e.g., 250.00",value:String(H.deductible_per_claim??""),onChange:N=>Q({...H,deductible_per_claim:N.target.value===""?"":Number(N.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),l.jsx("input",{id:"edit-pet-insurance-pays",type:"number",min:0,max:100,placeholder:"80",value:String(H.insurance_pays_percentage??""),onChange:N=>Q({...H,insurance_pays_percentage:N.target.value===""?"":Number(N.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),l.jsx("input",{id:"edit-pet-coverage-start",type:"date",value:H.coverage_start_date||"",onChange:N=>Q({...H,coverage_start_date:N.target.value}),className:"mt-1 w-full min-w-[220px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When did your coverage start?"})]})]})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:il,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save"}),l.jsx("button",{type:"button",onClick:()=>{if(!T)return;const D=y.find(se=>se.id===T)?.name||"this pet";if(!confirm(` Delete ${D}?

This will NOT delete bills for this pet, but you won't be able to file new bills.

This cannot be undone!`))return;const M=y.filter(se=>se.id!==T);E(M),ge&&Ax(ge,T).catch(se=>{console.error("[deletePet] error",se)}),te(null),Q(null)},className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",children:"Delete"}),l.jsx("button",{type:"button",onClick:()=>{te(null),Q(null)},className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]})]},h.id))]})]}),Re==="app"&&Et==="app"&&l.jsx(A5,{userId:ge,pets:y,onAddMedication:()=>Un(!0),onManage:()=>Lt("medications"),refreshKey:Vr}),Re==="app"&&Et==="app"&&l.jsxs("section",{className:"mx-auto max-w-3xl text-center mt-6 px-2",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Upload Vet Bill"}),l.jsx("div",{className:"mt-3",children:l.jsx("div",{className:["rounded-2xl border bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-6 transition-colors",s?"border-emerald-400 ring-2 ring-emerald-400/60 dark:ring-emerald-400/50 bg-emerald-50/40 dark:bg-emerald-900/10":"border-slate-200 dark:border-slate-800"].join(" "),onDragEnter:ea,onDragOver:ja,onDragLeave:Ka,onDrop:Ds,children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",onClick:bo,className:"w-full sm:w-auto rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-4 text-lg font-semibold shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",children:l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[l.jsxs("svg",{className:"h-7 w-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),l.jsx("span",{children:"Upload Vet Bill"})]})}),l.jsx("p",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400",children:"PDF or Photo  Drag & drop or click to browse"}),l.jsx("input",{ref:n,type:"file",accept:"image/*,application/pdf",onChange:wo,className:"sr-only"}),e&&l.jsxs("div",{className:"mt-6 w-full text-left",children:[l.jsx("div",{className:"flex items-start justify-between gap-4",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:ta})]})}),e.objectUrl&&l.jsx("div",{className:"mt-4",children:l.jsx("img",{src:e.objectUrl,alt:"Selected preview",className:"max-h-80 w-full object-contain rounded-lg border border-slate-200 dark:border-slate-800",onLoad:()=>{e.objectUrl&&URL.revokeObjectURL(e.objectUrl)}})}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("button",{type:"button",onClick:h=>{console.log("[MOBILE DEBUG] ========== PROCESS BILL BUTTON CLICKED =========="),console.log("[MOBILE DEBUG] Event:",h),console.log("[MOBILE DEBUG] isProcessing:",o),fi()},disabled:o,className:"inline-flex items-center justify-center w-full h-14 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 text-base sm:text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[o&&l.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),"Process Bill"]}),o&&l.jsxs("div",{className:"mt-4 flex flex-col items-center text-sm text-slate-700 dark:text-slate-300",children:[l.jsxs("svg",{className:"h-6 w-6 animate-spin mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),l.jsx("div",{children:" Extracting bill data..."})]})]})]})]})})})]},"upload-section"),Re==="app"&&Ve&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Multiple Pets Detected"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We found charges for multiple pets on this bill:"}),l.jsx("ul",{className:"mt-2 text-sm list-disc pl-6 text-slate-700 dark:text-slate-200",children:Ve.pets.map((h,N)=>l.jsxs("li",{children:[h.petName||`Pet ${N+1}`," (",h.petSpecies||"Pet",")  ",Pa(h.lineItems)]},N))}),l.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"We'll create a separate bill for each pet."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("p",{className:"text-sm font-medium",children:"Match each pet to your saved profiles (or add new ones):"}),Ve.pets.map((h,N)=>l.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 justify-between",children:[l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-sm font-medium",children:h.petName||`Pet ${N+1}`}),l.jsx("div",{className:"text-xs text-slate-500",children:h.petSpecies||"Pet"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",value:Ye[N]||"",onChange:D=>{const M=[...Ye];M[N]=D.target.value||null,bt(M)},children:[l.jsx("option",{value:"",children:"Select saved pet"}),y.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.species,")"]},D.id))]}),!Ye[N]&&l.jsx("button",{type:"button",className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-xs hover:shadow",onClick:()=>{et(N),J(!0);const D=(h.petSpecies||"").toLowerCase(),M=D.includes("cat")?"cat":D.includes("dog")?"dog":ne.species;O(se=>({...se,name:h.petName||"",species:M})),yt.current?.scrollIntoView({behavior:"smooth"})},children:"+ Add New Pet"})]})]})},N))]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",disabled:Ye.some(h=>!h),onClick:async()=>{const h=[];for(let N=0;N<Ve.pets.length;N++){const D=Ve.pets[N],M=Ye[N],se=y.find(qe=>qe.id===M)||null,be=D.subtotal||Pa(D.lineItems),{filename:Se,blob:Te}=w5({clinicName:Ve.clinicName,clinicAddress:Ve.clinicAddress,dateOfService:Ve.dateOfService,diagnosis:Ve.diagnosis,petName:D.petName,lineItems:D.lineItems,subtotal:be,invoiceNumber:Ve.invoiceNumber},se);if(ge)try{const qe=parseFloat(String(be).replace(/[^0-9.\-]/g,""))||null,Xe=Yo(se?.insuranceCompany||"")||90,Gt=(wr=>{if(!wr)return null;const Cr=String(wr).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!Cr)return null;const ss=Number(Cr[1]),is=Number(Cr[2])-1,Js=Number(Cr[3]),Zt=new Date(ss,is,Js);return Number.isNaN(Zt.getTime())?null:Zt})(Ve.dateOfService),Dt=Gt?new Date(Gt.getTime()):null;Dt&&Dt.setDate(Dt.getDate()+Xe);const rr=await Zm({user_id:ge,pet_id:se?se.id:null,service_date:Ve.dateOfService||null,invoice_number:Ve.invoiceNumber||null,clinic_name:Ve.clinicName||null,clinic_address:Ve.clinicAddress||null,clinic_phone:Ve.clinicPhone||null,diagnosis:Ve.diagnosis||null,total_amount:qe,line_items:D.lineItems,filing_status:"not_filed",filing_deadline_days:Xe});rr?.id&&await na(ge,rr.id,Te)}catch(qe){console.error("[createClaim multi] error",qe)}const De=URL.createObjectURL(Te),$e=document.createElement("a");$e.href=De,$e.download=Se,document.body.appendChild($e),$e.click(),$e.remove(),URL.revokeObjectURL(De),h.push({name:Se,amount:be})}ge&&Yi(ge).then(wt).catch(()=>{}),lt(!0),alert(` ${h.length} bills generated and downloaded!
`+h.map(N=>`- ${N.name} (${N.amount})`).join(`
`)+`

Email each bill to your insurance company.`)},children:"Generate Bills"})})]})}),w&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{S(null),re(null),t(null),x(null),R(""),he(""),ee("insured")},children:" Cancel"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Extracted Details"})]}),l.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"What was this visit for? (Visit Title)"}),l.jsx("input",{value:z,onChange:h=>he(h.target.value),placeholder:"e.g., Annual checkup, Emergency visit, Teeth cleaning",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Edit if needed"})]}),(()=>{if(!w||!Array.isArray(w.lineItems))return null;const h=w.lineItems.map(M=>ra(M.amount));return w.lineItems.length>0&&h.every(M=>!Number.isFinite(M)||M===0)?l.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:[l.jsx("div",{className:"font-semibold",children:" NO PRICES FOUND"}),l.jsx("div",{className:"mt-1",children:"This appears to be a vaccination certificate or record, not an invoice."}),l.jsx("div",{className:"mt-1",children:"Please upload the actual bill/receipt with itemized charges and prices."}),l.jsx("div",{className:"mt-1 text-amber-800/80",children:"Insurance companies require invoices showing what you paid."})]}):null})(),l.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Review and edit any field if needed."}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Name"}),l.jsx("input",{value:w.clinicName,onChange:h=>S({...w,clinicName:h.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Address"}),l.jsx("input",{value:w.clinicAddress,onChange:h=>S({...w,clinicAddress:h.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Phone"}),l.jsx("input",{value:w.clinicPhone||"",onChange:h=>S({...w,clinicPhone:h.target.value}),placeholder:"(XXX) XXX-XXXX",type:"tel",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),l.jsx("input",{value:w.petName,onChange:h=>S({...w,petName:h.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Date of Service"}),l.jsx("input",{type:"date",value:w.dateOfService,onChange:h=>S({...w,dateOfService:h.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Invoice Number"}),l.jsx("input",{value:w.invoiceNumber||"",onChange:h=>S({...w,invoiceNumber:h.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Total Amount"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx("span",{className:"text-slate-500 text-sm",children:"$"})}),l.jsx("input",{value:w.totalAmount,onChange:h=>S({...w,totalAmount:h.target.value}),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 pl-7 pr-3 py-2 text-sm"})]})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Diagnosis / Reason"}),l.jsx("textarea",{value:w.diagnosis,onChange:h=>S({...w,diagnosis:h.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",rows:3})]})]}),A&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Pet Insurance"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("input",{value:A.insuranceCompany,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Policy Number"}),l.jsx("input",{value:A.policyNumber,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-sm text-emerald-700 dark:text-emerald-300 hover:underline",onClick:()=>S({...w,lineItems:[...w.lineItems,{description:"",amount:""}]}),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-3 space-y-3",children:w.lineItems.map((h,N)=>l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3",children:[l.jsx("div",{className:"sm:col-span-8",children:l.jsx("input",{placeholder:"Description",value:h.description,onChange:D=>{const M=[...w.lineItems];M[N]={...M[N],description:D.target.value},S({...w,lineItems:M})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-3",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:l.jsx("span",{className:"text-slate-500 text-sm",children:"$"})}),l.jsx("input",{placeholder:"Amount",value:h.amount,onChange:D=>{const M=[...w.lineItems];M[N]={...M[N],amount:D.target.value},S({...w,lineItems:M})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 pl-7 pr-3 py-2 text-sm"})]})}),l.jsx("div",{className:"sm:col-span-1 flex items-center",children:l.jsx("button",{type:"button",className:"text-slate-500 hover:text-rose-600 text-sm",onClick:()=>{const D=w.lineItems.filter((M,se)=>se!==N);S({...w,lineItems:D})},"aria-label":"Remove item",children:""})})]},N))})]}),l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-blue-50/60 dark:bg-blue-900/10 p-4",children:[l.jsxs("label",{htmlFor:"visit-notes",className:"block text-sm font-semibold mb-2",children:[" Visit Notes ",l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(Optional but recommended)"})]}),l.jsx("textarea",{id:"visit-notes",value:U,onChange:h=>R(h.target.value),placeholder:"What was discussed at this vet visit? (e.g., 'Annual checkup - vet noted minor eye redness from outdoor play, cleared up in 2 days')",rows:3,className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),l.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:[" ",l.jsx("strong",{children:"Why this matters:"})," Documenting what was discussed protects you from casual comments being misinterpreted later as pre-existing conditions."]})]}),A&&A.insuranceCompany&&A.insuranceCompany.trim()!==""&&A.insuranceCompany.toLowerCase()!=="not insured"&&le!=="not_insured"&&(()=>{const h=Yo(A?.insuranceCompany||"")||90,N=Te=>{if(!Te)return null;const De=String(Te).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!De)return null;const $e=Number(De[1]),qe=Number(De[2])-1,Xe=Number(De[3]),ft=new Date($e,qe,Xe);return Number.isNaN(ft.getTime())?null:ft},D=N(w.dateOfService),M=D?new Date(D.getTime()):null;M&&M.setDate(M.getDate()+h);const se=new Date,be=M?Math.ceil((M.getTime()-se.getTime())/(1e3*60*60*24)):null,Se=be===null?{wrap:"bg-slate-50 border-slate-200",title:"text-slate-900"}:be>=60?{wrap:"bg-emerald-50 border-emerald-200",title:"text-emerald-900"}:be>=30?{wrap:"bg-yellow-50 border-yellow-200",title:"text-yellow-900"}:be>=15?{wrap:"bg-orange-50 border-orange-200",title:"text-orange-900"}:{wrap:"bg-rose-50 border-rose-200",title:"text-rose-900"};if(be!==null&&be<0){const Te=D?Math.floor((se.getTime()-D.getTime())/864e5):0,De=Math.floor(Te/365),$e=Math.max(1,Math.floor(Te%365/30)),qe=De>=1?De===1?"over 1 year ago":`over ${De} years ago`:`over ${$e} months ago`;return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm bg-rose-50 border-rose-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold text-rose-900",children:" DEADLINE PASSED"}),l.jsxs("div",{className:"mt-2 text-sm text-rose-900",children:["This bill is from ",w.dateOfService||""," (",qe,")."]}),l.jsx("div",{className:"mt-2 text-sm text-rose-900",children:"Most insurers won't accept bills this old."}),l.jsx("div",{className:"mt-1 text-xs text-rose-900/80",children:"Contact your insurance company to verify if you can still file."})]})}return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm",Se.wrap].join(" "),children:[l.jsx("div",{className:["text-sm font-semibold flex items-center gap-2",Se.title].join(" "),children:l.jsx("span",{children:" FILING DEADLINE REMINDER"})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Service Date"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:w.dateOfService&&N(w.dateOfService)?.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Insurance"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:A?A.insuranceCompany:""})]})]}),l.jsx("div",{className:"mt-3 text-sm",children:l.jsxs("div",{className:"text-slate-700",children:[" ",A?.insuranceCompany?`${A.insuranceCompany} requires filing within ${h} days of service.`:"Most insurers require filing within 60180 days of service."]})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Estimated Deadline"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:M?M.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Days Remaining"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base",children:be===null?"":`${be} days`})]})]}),l.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"This is a general reminder. Always verify your specific policy deadline."})]})})(),A&&A.insuranceCompany&&A.insuranceCompany.trim()!==""&&A.insuranceCompany.toLowerCase()!=="not insured"&&l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expense Category"}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"insured",checked:le==="insured",onChange:()=>ee("insured")}),l.jsx("span",{children:"Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"not_insured",checked:le==="not_insured",onChange:()=>ee("not_insured")}),l.jsx("span",{children:"Not Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"maybe_insured",checked:le==="maybe_insured",onChange:()=>ee("maybe_insured")}),l.jsx("span",{children:"Maybe Insured"})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{S(null),re(null),t(null),x(null),R(""),he(""),ee("insured")},children:" Cancel"}),!o&&l.jsx("button",{type:"button",disabled:d,className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 disabled:cursor-not-allowed text-white px-4 py-2 text-sm font-medium",onClick:async()=>{if(!d){if(!A){Pn(!0);return}p(!0);try{const h=Yo(A?.insuranceCompany||"")||90,D=(Se=>{if(!Se)return null;const Te=String(Se).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!Te)return null;const De=Number(Te[1]),$e=Number(Te[2])-1,qe=Number(Te[3]),Xe=new Date(De,$e,qe);return Number.isNaN(Xe.getTime())?null:Xe})(w.dateOfService),M=D?new Date(D.getTime()):null;M&&M.setDate(M.getDate()+h);let se=null;if(ge)try{const Se=parseFloat(String(w.totalAmount).replace(/[^0-9.\-]/g,""))||null;if(se=await Zm({user_id:ge,pet_id:A?A.id:null,service_date:w.dateOfService||null,invoice_number:w.invoiceNumber||null,clinic_name:w.clinicName||null,clinic_address:w.clinicAddress||null,clinic_phone:w.clinicPhone||null,visit_title:z||null,diagnosis:w.diagnosis||null,total_amount:Se,line_items:w.lineItems,filing_status:"not_submitted",filing_deadline_days:h,visit_notes:U||null,expense_category:le}),console.log("[createClaim single] Checking for vet bill upload...",{hasClaimId:!!se?.id,hasSelectedFile:!!e,hasFile:!!e?.file,selectedFileType:e?.file?.type}),se?.id&&e?.file)try{console.log("[createClaim single] Uploading vet bill PDF to storage..."),await na(ge,se.id,e.file),console.log("[createClaim single]  Uploaded vet bill PDF for claim:",se.id)}catch(Te){console.error("[createClaim single]  Failed to upload vet bill:",Te),alert(` Warning: Failed to attach vet invoice.

The claim was created but the invoice file could not be uploaded. You may need to attach it manually when submitting.

Error: ${Te instanceof Error?Te.message:String(Te)}`)}else console.warn("[createClaim single]   No vet bill PDF to upload - selectedFile or file is missing")}catch(Se){console.error("[createClaim single] error",Se)}const be={claimId:se?.id||null,petName:A?.name||"Unknown",species:A?.species||"",amount:ra(String(w.totalAmount||"")),serviceDate:w.dateOfService||null,insurance:A?.insuranceCompany||"",deadlineDate:M?M.toISOString().slice(0,10):null,deadlineDays:h};Ws(be),Vs(se?.id||null),console.log("[LOOKS GOOD CLICKED] Showing success modal",{claimId:se?.id}),S(null)}finally{p(!1)}}},children:d?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Looks Good"})]})]})},JSON.stringify(w)),Re==="app"&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Financial Summary"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("label",{className:"mr-2 text-slate-600",children:"Show expenses for:"}),l.jsxs("select",{value:mt,onChange:h=>it(h.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[l.jsx("option",{value:"all",children:"All Time"}),l.jsx("option",{value:"2026",children:"2026"}),l.jsx("option",{value:"2025",children:"2025"}),l.jsx("option",{value:"2024",children:"2024"}),l.jsx("option",{value:"last12",children:"Last 12 Months"})]})]})]}),l.jsx(k5,{userId:ge,refreshToken:It,period:mt})]}),Re==="app"&&Ut.length>0&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Vet Bills"})}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Total bills"}),l.jsx("div",{className:"text-lg font-semibold",children:Os.total})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Bills pending submission"}),l.jsxs("div",{className:"text-lg font-semibold",children:[Os.notFiledCount," ",l.jsxs("span",{className:"text-sm text-slate-500",children:["(",Or(Os.notFiledSum),")"]})]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims filed"}),l.jsx("div",{className:"text-lg font-semibold",children:Os.filedPending})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims expiring soon (< 15 days)"}),l.jsx("div",{className:"text-lg font-semibold",children:Os.expiringSoon})]})]}),Ut.length>1&&l.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[l.jsx("label",{className:"text-slate-500",children:"Sort by:"}),l.jsxs("select",{value:Ar,onChange:h=>Kt(h.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[l.jsx("option",{value:"date-desc",children:"Date (newest first)"}),l.jsx("option",{value:"amount-desc",children:"Amount (high to low)"}),l.jsx("option",{value:"amount-asc",children:"Amount (low to high)"}),l.jsx("option",{value:"pet-asc",children:"Pet name (A-Z)"})]})]}),l.jsx("div",{ref:vt,className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full overflow-x-hidden",style:{overscrollBehaviorX:"none"},children:ns.map(h=>{const N=h.pets||{},D=N?.color||(N?.species==="cat"?"#F97316":N?.species==="dog"?"#3B82F6":"#6B7280");gi(h);const M=(()=>{const De=mi(h);if(!De)return null;const $e=new Date(De.getTime());return $e.setDate($e.getDate()+pi(h)),$e})(),se=Ks(h),be=ms(h.filing_status),Se=String(h.expense_category||"insured")==="not_insured",Te=(()=>{const De=h.expense_category||"insured",$e=N?.insurance_company||"";return De==="insured"?{text:$e?`Insured  ${$e}`:"Insured",cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}:De==="not_insured"?{text:"Not Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}:{text:$e?`Maybe Insured  ${$e}`:"Maybe Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}})();return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900 shadow-sm min-h-[180px] w-full",style:{border:`2px solid ${D}`,touchAction:"pan-y",overscrollBehaviorX:"none"},children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:D+"20"},children:l.jsx("span",{className:"text-slate-700",children:N.species==="cat"?"":""})}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 break-words line-clamp-2",children:(()=>{const De=(h.visit_title&&String(h.visit_title)||h.diagnosis&&String(h.diagnosis)||"").trim();return De?`${N.name||"Pet"}  ${De}`:N.name||"Pet"})()})})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:[l.jsx("span",{className:"mr-1",children:""}),h.clinic_name||""]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${Te.cls}`,children:Te.text}),!Se&&l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${be.cls}`,children:be.text})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Service Date"}),l.jsx("div",{className:"font-medium",children:h.service_date&&mi(h)?.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})||""})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-500",children:"Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:Or(h.total_amount)}),String(h.filing_status||"").toLowerCase()==="paid"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:(()=>{const De=Number(h.total_amount||0),$e=Number(h.reimbursed_amount||0),qe=De>0?Math.round($e/De*100):0;return`Claimed: ${Or(De)}  Received: ${Or($e)} (${qe}%)`})()})}),h.paid_date&&l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:`Date Paid: ${new Date(h.paid_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}`})})]})]}),(()=>{const De=String(h.filing_status||"").toLowerCase();if(!(!!h.filed_date&&(De==="filed"||De==="paid")))return null;const qe=(()=>{const ft=String(h.filed_date||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);if(ft)return new Date(Number(ft[1]),Number(ft[2])-1,Number(ft[3])).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const Gt=h.filed_date?new Date(h.filed_date):null;return Gt?Gt.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})();return l.jsxs("div",{className:"col-span-2 mt-1 text-[11px] text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Filed: ",qe]})]})})(),Se?l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Info"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:" Self-paid vet bill"})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Filing Deadline"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:M?M.toISOString().slice(0,10):""})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${se.cls}`,children:se.text})})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 flex flex-wrap items-start sm:items-center justify-between gap-2",children:[(()=>{const De=String(h.filing_status||"not_submitted").toLowerCase(),$e=De==="filed"?"submitted":De==="not_filed"?"not_submitted":De;if(Se)return l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-600",children:" Not insured - No filing required"})});if($e==="not_submitted"){const qe=(()=>{if(!ye)return!1;const Xe=ye.toLowerCase(),ft=h.pets?.insurance_company?.toLowerCase()||"";return lw.includes(Xe)?!0:ow.some(Gt=>ft.includes(Gt))})();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[qe&&l.jsx("button",{type:"button",className:`
                                      text-xs px-2 py-1 rounded font-semibold whitespace-nowrap flex items-center gap-1.5
                                      transition-all duration-200 ease-out
                                      ${Fi===h.id?"scale-95 bg-gradient-to-r from-teal-600 via-teal-500 to-teal-600 bg-[length:200%_100%] animate-[shimmer_1.5s_ease-in-out_infinite]":"bg-blue-600 hover:bg-blue-700 active:scale-95"}
                                      text-white
                                    `,onClick:async()=>{navigator.vibrate&&navigator.vibrate(10),hi(h.id),await new Promise(Xe=>setTimeout(Xe,1e3)),Jt(h),await new Promise(Xe=>setTimeout(Xe,200)),hi(null)},title:"Automatically generate PDF and email to insurance company",children:Fi===h.id?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{className:"animate-pulse",children:"Preparing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Auto-Submit"]})}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",onClick:async()=>{try{const Xe=Ps(),Gt=prompt("Enter filed date (YYYY-MM-DD):",Xe)||Xe;await Ko(h.id,{filing_status:"filed",filed_date:Gt}),wt(Dt=>Dt.map(rr=>rr.id===h.id?{...rr,filing_status:"filed",filed_date:Gt}:rr));try{alert(" Claim marked as submitted")}catch{}if(await new Promise(Dt=>setTimeout(Dt,500)),ge){const Dt=await Yi(ge);wt(Dt)}}catch(Xe){console.error("[mark filed] error",Xe)}},title:"Manually mark as submitted (if you filed yourself)",children:"Mark Submitted"})]}),["insured","maybe"].includes(String(h.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"not_submitted",onChange:async Xe=>{try{const ft=Xe.target.value,Gt=ft==="submitted"?"filed":ft==="not_submitted"?"not_filed":ft;await Ko(h.id,{filing_status:Gt}),wt(Dt=>Dt.map(rr=>rr.id===h.id?{...rr,filing_status:Gt}:rr));try{alert(" Status updated")}catch{}await new Promise(Dt=>setTimeout(Dt,400)),ge&&Yi(ge).then(wt)}catch(ft){console.error("[edit status] error",ft)}},children:[l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]})]})}return $e==="submitted"?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"What happened with this claim?"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{En(h);const qe=h.total_amount&&Number.isFinite(Number(h.total_amount))?String(Number(h.total_amount).toFixed(2)):"";li(qe),Ei(Ps())},children:"Payment Received? Mark as Paid"}),l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800",onClick:async()=>{try{await Ko(h.id,{filing_status:"denied"}),wt(qe=>qe.map(Xe=>Xe.id===h.id?{...Xe,filing_status:"denied"}:Xe));try{alert(" Claim marked as denied")}catch{}ge&&Yi(ge).then(wt)}catch(qe){console.error("[deny claim] error",qe)}},children:"Deny Claim"})]}),["insured","maybe"].includes(String(h.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"submitted",onChange:async qe=>{try{const Xe=qe.target.value,ft=Xe==="submitted"?"filed":Xe==="not_submitted"?"not_filed":Xe;await Ko(h.id,{filing_status:ft}),wt(Gt=>Gt.map(Dt=>Dt.id===h.id?{...Dt,filing_status:ft}:Dt));try{alert(" Status updated")}catch{}ge&&Yi(ge).then(wt)}catch(Xe){console.error("[edit status] error",Xe)}},children:[l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]})]}):null})(),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",onClick:()=>Fn(h),children:"Edit"}),h.pdf_path&&l.jsx("a",{href:"#",onClick:async De=>{De.preventDefault();try{const{data:$e}=await Ze.storage.from("claim-pdfs").createSignedUrl(h.pdf_path,60);$e?.signedUrl&&window.open($e.signedUrl,"_blank")}catch($e){console.error("[view pdf] error",$e)}},className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",children:"View PDF"}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800 shrink-0 whitespace-nowrap",onClick:async()=>{if(confirm("Delete this bill?"))try{await iw(h.id),ge&&Yi(ge).then(wt)}catch(De){console.error("[delete claim] error",De)}},children:"Delete"})]})]})]},h.id)})}),ns.length===0&&l.jsx("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 p-6 text-center text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900",children:"No vet bills yet. Upload your first bill to get started!"})]}),Re==="app"&&l.jsxs("footer",{className:"mx-auto max-w-3xl text-center py-10 text-xs text-slate-500 dark:text-slate-400",children:[" ",new Date().getFullYear()," Pet Claim Helper"]})]}),ot&&l.jsx(hw,{userId:ge,userEmail:ye,onClose:()=>ze(!1)}),hs&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Pn(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-rose-200 bg-white p-6",onClick:h=>h.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold text-rose-700",children:" Please Select a Pet"}),l.jsx("div",{className:"mt-2 text-sm text-rose-800",children:"You haven't selected a pet for this bill yet."}),l.jsx("div",{className:"mt-1 text-sm text-rose-800",children:"Please go back and click 'Use This Pet' for the pet you want to add this bill for."}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",onClick:()=>Pn(!1),children:"Go Back"})})]})}),tr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Fn(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-2xl rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 flex flex-col max-h-[85vh]",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Edit Bill"}),l.jsx("button",{className:"text-sm",onClick:()=>Fn(null),children:"Close"})]}),["filed","paid"].includes(String(tr.filing_status||"").toLowerCase())&&l.jsx("div",{className:"mx-5 mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:" This claim has been filed. Changes may require resubmitting to insurance."}),l.jsx("div",{className:"p-5 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Pet"}),l.jsxs("select",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Jn||"",onChange:h=>Nt(h.target.value),children:[l.jsx("option",{value:"",children:""}),y.map(h=>l.jsx("option",{value:h.id,children:h.name},h.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Service Date"}),l.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Rn,onChange:h=>ds(h.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Title"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:hr,onChange:h=>Tr(h.target.value),placeholder:"e.g., Annual checkup, Teeth cleaning"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Diagnosis / Reason"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:hn,onChange:h=>Xn(h.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Notes"}),l.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Ur,onChange:h=>zs(h.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-xs text-emerald-700",onClick:()=>An([...Qn,{description:"",amount:""}]),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-2 space-y-2",children:Qn.map((h,N)=>l.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[l.jsx("input",{className:"col-span-8 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Description",value:h.description,onChange:D=>{const M=[...Qn];M[N]={...M[N],description:D.target.value},An(M)}}),l.jsx("input",{className:"col-span-3 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Amount",value:h.amount,onChange:D=>{const M=[...Qn];M[N]={...M[N],amount:D.target.value},An(M)}}),l.jsx("button",{className:"col-span-1 text-xs",onClick:()=>{const D=Qn.filter((M,se)=>se!==N);An(D)},children:""})]},N))})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Expense Category"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Zn==="insured",onChange:()=>Hr("insured")})," Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Zn==="not_insured",onChange:()=>Hr("not_insured")})," Not Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Zn==="maybe_insured",onChange:()=>Hr("maybe_insured")})," Maybe"]})]})]})]})}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Fn(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{if(tr)try{if(await Ko(tr.id,{pet_id:Jn||tr.pet_id,service_date:Rn||null,visit_title:hr||null,diagnosis:hn||null,visit_notes:Ur||null,line_items:Qn,expense_category:Zn}),ge){const h=await Yi(ge);wt(h)}Fn(null),alert("Bill updated")}catch(h){console.error("[update claim] error",h),alert("Error updating bill")}},children:"Save Changes"})]})]})}),Cn&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>En(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Mark as Paid"}),l.jsx("button",{className:"text-sm",onClick:()=>En(null),children:"Close"})]}),l.jsxs("div",{className:"p-5 text-sm space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Claimed Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:Or(Cn.total_amount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Reimbursed Amount"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",placeholder:"0.00",value:$s,onChange:h=>li(h.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Date Received"}),l.jsx("input",{type:"date",value:ci,onChange:h=>Ei(h.target.value),max:Ps(),placeholder:"YYYY-MM-DD",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2"})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-500",children:"Difference"}),l.jsx("div",{className:"font-mono font-semibold",children:(()=>{const h=Number(Cn.total_amount||0),N=Number($s||0),D=h-N;return Or(D)})()})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>En(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{try{const h=Number($s);if(!Number.isFinite(h)||h<0){alert("Please enter a valid reimbursed amount");return}if(!ci){alert("Please select the date received");return}const N=new Date(ci).toISOString().slice(0,10),D=Number(Cn.total_amount||0),M=Cn.pet_id||null,se=Cn.service_date?Number(String(Cn.service_date).slice(0,4)):null,be=se&&M?Ut.some(qe=>qe.id!==Cn.id&&qe.pet_id===M&&String(qe.expense_category||"").toLowerCase()==="insured"&&String(qe.filing_status||"").toLowerCase()==="paid"&&qe.service_date&&String(qe.service_date).slice(0,4)===String(se)&&Number(qe.deductible_applied||0)>0):!1,Se=M?y.find(qe=>qe.id===M):null,Te=Math.max(0,Number(Se?.deductible_per_claim||0)),De=Math.min(D,be?0:Te),$e=Math.max(0,D-De-h);if(await Ko(Cn.id,{filing_status:"paid",reimbursed_amount:h,paid_date:N,deductible_applied:De,user_coinsurance_payment:$e}),ge){const qe=await Yi(ge);wt(qe)}En(null),li(""),Ei(Ps()),alert("Claim marked as paid")}catch(h){console.error("[mark paid] error",h),alert("Error saving paid status")}},children:"Save"})]})]})}),xo&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>ui(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:h=>h.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Select Medications Prescribed"}),l.jsxs("div",{className:"mt-3 space-y-2 max-h-[50vh] overflow-y-auto",children:[Li.length===0&&l.jsx("div",{className:"text-sm text-slate-600",children:"No active medications found"}),Li.map(h=>l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors",children:[l.jsx("input",{type:"checkbox",checked:di.includes(h.id),onChange:N=>{const D=N.target.checked;Br(M=>D?[...M,h.id]:M.filter(se=>se!==h.id))},className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${di.includes(h.id)?"bg-emerald-500 border-emerald-500":"bg-white border-gray-300"}`,children:di.includes(h.id)&&l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:"text-sm font-medium",children:h.medication_name}),h.dosage&&l.jsx("div",{className:"text-xs text-slate-500",children:h.dosage})]})]},h.id))]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",className:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-700",onClick:()=>Un(!0),children:"+ Add New Medication"})}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>ui(!1),children:"Cancel"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{Mn&&di.length>0&&await Ko(Mn,{medication_ids:di}),ui(!1),Hs("Medications saved ")}catch(h){console.error("[med select -> link meds] error",h),ui(!1),Hs("Medications saved ")}},children:"Confirm"})]})]})}),Di&&l.jsx(h1,{open:Di,onClose:()=>Un(!1),onSaved:async h=>{Cs(N=>N+1);try{if(ge&&A){const N=Ps(),{data:D}=await Ze.from("medications").select("*").eq("user_id",ge).eq("pet_id",A.id).lte("start_date",N).or(`end_date.is.null,end_date.gte.${N}`);es(Array.isArray(D)?D:[]),h&&!di.includes(h)&&Br(M=>[...M,h])}}catch{}},userId:ge,pets:y,defaultPetId:A?.id||null}),Ii&&ge&&l.jsx(X5,{claim:Ii,pet:Ii.pets||{},userId:ge,onClose:()=>Jt(null),onSuccess:async h=>{if(console.log("[Auto-Submit] Success! Message ID:",h),Jt(null),ge){const N=await Yi(ge);wt(N)}Hs(" Claim submitted to insurance!")}}),l.jsx(N5,{open:nl,onClose:()=>{if(fr(!1),ge&&uu(ge).then(E).catch(()=>{}),localStorage.getItem("justCompletedOnboarding")!=="true")return;const N=localStorage.getItem("pch_added_to_homescreen"),D=localStorage.getItem("pch_homescreen_dismissed_at");if(N!=="true"){if(D){const M=new Date(D);if((Date.now()-M.getTime())/(1e3*60*60*24)<3)return}setTimeout(()=>{window.AddToHomeScreenInstance&&(window.AddToHomeScreenInstance.clearModalDisplayCount(),window.AddToHomeScreenInstance.show("en"))},500)}},userId:ge||"",userEmail:ye}),Va&&l.jsx(pw,{userId:ge,onClose:()=>Ti(!1),onSave:h=>{Es(!0),Ti(!1)}}),Pr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Ws(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 bg-white p-0 overflow-hidden",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"p-6 bg-emerald-50 dark:bg-emerald-900/20 border-b border-emerald-200 dark:border-emerald-800 flex flex-col items-center text-center",children:[l.jsx("div",{className:"h-14 w-14 rounded-full bg-emerald-600 text-white flex items-center justify-center text-2xl shadow animate-pulse",children:""}),l.jsx("div",{className:"mt-3 text-lg font-semibold text-emerald-800 dark:text-emerald-200",children:"Vet Bill Saved Successfully!"}),l.jsx("div",{className:"mt-1 text-xs text-emerald-900/80 dark:text-emerald-300/80",children:"Your vet bill was saved. You can submit it to insurance when ready."})]}),l.jsxs("div",{className:"p-6 text-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Pet:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100 font-semibold",children:[Pr.petName," (",Pr.species,")"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Amount:"})," ",l.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-slate-100",children:Or(Pr.amount||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Date:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Pr.serviceDate||""})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Insurance:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Pr.insurance||"Not Insured"})]}),Pr.insurance&&Pr.insurance.trim()!==""&&l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Filing Deadline:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[Pr.deadlineDate||""," (",(()=>{if(!Pr.deadlineDate)return"";const h=new Date;h.setHours(0,0,0,0);const N=new Date(Pr.deadlineDate);N.setHours(0,0,0,0);const D=N.getTime()-h.getTime(),M=Math.ceil(D/(1e3*60*60*24));return M>0?`${M} days remaining`:"overdue"})(),")"]})]})]}),l.jsx("div",{className:"mt-5 flex justify-center",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 text-sm font-medium w-full sm:w-auto",onClick:async()=>{Ws(null),S(null),re(null),t(null),x(null),R(""),he(""),ee("insured");try{if(ge){const h=await Yi(ge);wt(h)}}catch{}lt(!1)},children:"Done"})})]})]})}),l.jsx("footer",{className:"mt-12 pb-8 text-center",children:l.jsx("p",{className:"text-xs text-slate-400",children:" Your data is encrypted and never shared"})})]})}function dw({mode:n,onSwitch:e}){const[t,s]=fe.useState(""),[a,o]=fe.useState(""),[u,d]=fe.useState(!1),[p,g]=fe.useState(null),[x,w]=fe.useState(!1),[S,y]=fe.useState(null),[E,C]=fe.useState(!1),L=async A=>{A.preventDefault(),d(!0),g(null);try{try{console.log("[auth] handleSubmit start:",{mode:n,emailPreview:t.replace(/(.).+(@.+)/,"$1***$2")})}catch{}if(n==="signup"){const{data:U,error:R}=await Ze.auth.signUp({email:t,password:a});try{console.log("[auth] signUp result:",{hasUser:!!U?.user,hasSession:!!U?.session,error:R||null})}catch{}if(R)throw R;y(t)}else{const{data:U,error:R}=await Ze.auth.signInWithPassword({email:t,password:a});try{console.log("[auth] signInWithPassword result:",{hasUser:!!U?.user,hasSession:!!U?.session,error:R||null})}catch{}if(R)throw R;try{const{data:z}=await Ze.auth.getSession();console.log("[auth] post-login getSession():",{hasSession:!!z?.session,userId:z?.session?.user?.id||null});const he=typeof window<"u"?window.localStorage?.getItem("pch.auth"):null;console.log("[auth] localStorage pch.auth present:",!!he)}catch{}}}catch(U){g(U?.message||"Authentication failed")}finally{d(!1)}};return E&&n==="login"?l.jsx(nw,{onBack:()=>C(!1)}):l.jsxs("form",{onSubmit:L,className:"space-y-4",children:[S&&l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:[l.jsx("div",{className:"font-medium",children:"Account created!"}),l.jsxs("div",{className:"text-[13px] mt-1",children:["Please check your email at ",l.jsx("span",{className:"font-mono",children:S})," to verify your account. You won't be able to log in until you confirm your email address."]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-email",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Email"}),l.jsx("input",{id:"auth-email",type:"email",value:t,onChange:A=>s(A.target.value),placeholder:n==="signup"?"Enter your email to get started":"Enter your email",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-password",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{id:"auth-password",type:x?"text":"password",value:a,onChange:A=>o(A.target.value),placeholder:n==="signup"?"Create a password (6+ characters)":"Enter your password",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 pr-10 text-sm",required:!0}),l.jsx("button",{type:"button",onClick:()=>w(A=>!A),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400","aria-label":x?"Hide password":"Show password",title:x?"Hide password":"Show password",children:x?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a21.87 21.87 0 0 1 5.06-7.94"}),l.jsx("path",{d:"M10.58 10.58a2 2 0 1 0 2.83 2.83"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 4.12A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8a21.87 21.87 0 0 1-2.16 3.19"})]}):l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),n==="login"&&l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"button",onClick:()=>C(!0),className:"text-xs text-emerald-600 hover:text-emerald-700",children:"Forgot password?"})}),p&&l.jsx("p",{className:"text-xs text-rose-600",children:p}),n==="signup"&&l.jsx("p",{className:"text-xs text-center text-slate-500",children:" Your data is encrypted and never shared"}),l.jsx("button",{type:"submit",disabled:u,className:["w-full inline-flex items-center justify-center rounded-lg text-white px-4 py-2.5 text-sm font-semibold disabled:opacity-60 transition-colors",n==="signup"?"bg-teal-600 hover:bg-teal-700":"bg-emerald-600 hover:bg-emerald-700"].join(" "),children:u?"Please wait":n==="login"?"Log In":"Sign Up"}),l.jsx("div",{className:"text-center pt-2 border-t border-slate-200",children:l.jsx("p",{className:"text-xs text-slate-600",children:n==="signup"?l.jsxs(l.Fragment,{children:["Already have an account?"," ",l.jsx("button",{type:"button",onClick:()=>e("login"),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Sign in instead "})]}):l.jsxs(l.Fragment,{children:["New here?"," ",l.jsx("button",{type:"button",onClick:()=>e("signup"),className:"text-teal-600 hover:text-teal-700 font-medium",children:"Create an account "})]})})})]})}function hw({userId:n,userEmail:e,onClose:t}){const[s,a]=fe.useState(e||"");return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:o=>o.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-userid",className:"block text-sm font-medium mb-1",children:"User ID"}),l.jsx("input",{id:"settings-userid",type:"text",value:n||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-email",className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{id:"settings-email",type:"email",value:s,onChange:o=>a(o.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]}),l.jsx("button",{onClick:t,className:"mt-6 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium",children:"Close"})]})})}function fw({userId:n,userEmail:e,onClose:t,onDefaultExpenseChange:s,onDefaultPeriodChange:a}){const[o,u]=fe.useState(!1),[d,p]=fe.useState(""),[g,x]=fe.useState(""),[w,S]=fe.useState(""),[y,E]=fe.useState(""),[C,L]=fe.useState(""),[A,U]=fe.useState(""),[R,z]=fe.useState(null);fe.useEffect(()=>{n&&(async()=>{u(!0);try{const{data:le,error:ee}=await Ze.from("profiles").select("*").eq("id",n).single();if(ee)throw ee;le&&(p(le.full_name||""),x(le.phone?aw(le.phone):""),S(le.address||""),E(le.city||""),L(le.state||""),U(le.zip||""),z(le.signature||null))}catch(le){console.error("[settings load] error",le)}finally{u(!1)}})()},[n]);const he=async()=>{if(n){u(!0);try{const le=p1(g),{error:ee}=await Ze.from("profiles").upsert({id:n,email:e||"",full_name:d,phone:le||null,address:w||null,city:y||null,state:C||null,zip:A||null});if(ee)throw ee;alert("Profile saved successfully!"),t()}catch(le){console.error("[save profile] error",le),alert("Error saving profile")}finally{u(!1)}}};return l.jsxs("section",{className:"mx-auto max-w-3xl mt-6 pb-12",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),l.jsx("button",{type:"button",onClick:t,className:"text-sm text-slate-600 dark:text-slate-300",children:"Close"})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Profile Information"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Manage your personal information"}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Email"}),l.jsx("input",{value:e||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:d,onChange:le=>p(le.target.value),placeholder:"John Smith",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Street Address ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:w,onChange:le=>S(le.target.value),placeholder:"123 Main St",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[l.jsxs("div",{className:"col-span-6",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["City ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:y,onChange:le=>E(le.target.value),placeholder:"San Francisco",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["State ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:C,onChange:le=>L(le.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm uppercase"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["ZIP ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:A,onChange:le=>U(le.target.value),placeholder:"94105",maxLength:10,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:g,onChange:le=>x(m1(le.target.value,g)),placeholder:"(123) 456-7890",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Q5,{userId:n,initialSignature:R,onSave:le=>z(le)})}),l.jsxs("div",{className:"mt-4 sticky bottom-4 bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-lg",children:[l.jsx("button",{type:"button",onClick:he,disabled:o,className:"w-full inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 text-sm font-medium disabled:opacity-60 transition-colors",children:o?"Saving...":"Save Profile"}),l.jsxs("p",{className:"mt-2 text-xs text-center text-slate-500",children:[l.jsx("span",{className:"text-red-500",children:"*"})," Required fields for claim submission"]})]})]})}function pw({userId:n,onClose:e,onSave:t}){const[s,a]=fe.useState(""),[o,u]=fe.useState(!1),[d,p]=fe.useState(!1),[g,x]=fe.useState(null),w=async()=>{if(!(!n||!s.trim()||!o)){p(!0),x(null);try{const S=p1(s);if(!S)throw new Error("Invalid phone number");const{error:y}=await Ze.from("profiles").update({phone:S,sms_opt_in:!0}).eq("id",n);if(y)throw y;let E=null;try{E=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}const{error:C}=await Ze.from("sms_consent").insert({user_id:n,phone_number:S,consented:!0,consent_text:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support.",ip_address:E});C&&console.error("[SmsIntroModal] Failed to save SMS consent:",C),t(S)}catch(S){x(S?.message||"Failed to save phone number")}finally{p(!1)}}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:S=>S.stopPropagation(),children:[g&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:g}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Never forget a dose"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Get a friendly text when it's medication time"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Phone Number"}),l.jsx("input",{type:"tel",value:s,onChange:S=>a(m1(S.target.value,s)),placeholder:"(555) 123-4567",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o,onChange:S=>u(S.target.checked),className:"mt-0.5 w-4 h-4 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),l.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support."})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors text-sm",children:"Skip for now"}),l.jsx("button",{type:"button",disabled:!s.trim()||!o||d,onClick:w,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-4 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200 text-sm font-medium",children:d?"Saving":"Enable Reminders"})]})]})})}s2.createRoot(document.getElementById("root")).render(l.jsx(Md.StrictMode,{children:l.jsx(cw,{})}));export{br as _,mw as c,Nu as g};
