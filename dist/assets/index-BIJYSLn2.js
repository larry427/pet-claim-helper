(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var v4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function cx(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Uf={exports:{}},Gc={},Bf={exports:{}},ar={};var Fp;function dx(){if(Fp)return ar;Fp=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function k(Y){return Y===null||typeof Y!="object"?null:(Y=w&&Y[w]||Y["@@iterator"],typeof Y=="function"?Y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function E(Y,A,H){this.props=Y,this.context=A,this.refs=C,this.updater=H||x}E.prototype.isReactComponent={},E.prototype.setState=function(Y,A){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,A,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function j(){}j.prototype=E.prototype;function K(Y,A,H){this.props=Y,this.context=A,this.refs=C,this.updater=H||x}var B=K.prototype=new j;B.constructor=K,T(B,E.prototype),B.isPureReactComponent=!0;var $=Array.isArray,le=Object.prototype.hasOwnProperty,me={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function z(Y,A,H){var Q,ie={},se=null,ye=null;if(A!=null)for(Q in A.ref!==void 0&&(ye=A.ref),A.key!==void 0&&(se=""+A.key),A)le.call(A,Q)&&!U.hasOwnProperty(Q)&&(ie[Q]=A[Q]);var ce=arguments.length-2;if(ce===1)ie.children=H;else if(1<ce){for(var Ae=Array(ce),Pe=0;Pe<ce;Pe++)Ae[Pe]=arguments[Pe+2];ie.children=Ae}if(Y&&Y.defaultProps)for(Q in ce=Y.defaultProps,ce)ie[Q]===void 0&&(ie[Q]=ce[Q]);return{$$typeof:r,type:Y,key:se,ref:ye,props:ie,_owner:me.current}}function I(Y,A){return{$$typeof:r,type:Y.type,key:A,ref:Y.ref,props:Y.props,_owner:Y._owner}}function W(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===r}function O(Y){var A={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(H){return A[H]})}var F=/\/+/g;function Z(Y,A){return typeof Y=="object"&&Y!==null&&Y.key!=null?O(""+Y.key):A.toString(36)}function ee(Y,A,H,Q,ie){var se=typeof Y;(se==="undefined"||se==="boolean")&&(Y=null);var ye=!1;if(Y===null)ye=!0;else switch(se){case"string":case"number":ye=!0;break;case"object":switch(Y.$$typeof){case r:case e:ye=!0}}if(ye)return ye=Y,ie=ie(ye),Y=Q===""?"."+Z(ye,0):Q,$(ie)?(H="",Y!=null&&(H=Y.replace(F,"$&/")+"/"),ee(ie,A,H,"",function(Pe){return Pe})):ie!=null&&(W(ie)&&(ie=I(ie,H+(!ie.key||ye&&ye.key===ie.key?"":(""+ie.key).replace(F,"$&/")+"/")+Y)),A.push(ie)),1;if(ye=0,Q=Q===""?".":Q+":",$(Y))for(var ce=0;ce<Y.length;ce++){se=Y[ce];var Ae=Q+Z(se,ce);ye+=ee(se,A,H,Ae,ie)}else if(Ae=k(Y),typeof Ae=="function")for(Y=Ae.call(Y),ce=0;!(se=Y.next()).done;)se=se.value,Ae=Q+Z(se,ce++),ye+=ee(se,A,H,Ae,ie);else if(se==="object")throw A=String(Y),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return ye}function ae(Y,A,H){if(Y==null)return Y;var Q=[],ie=0;return ee(Y,Q,"","",function(se){return A.call(H,se,ie++)}),Q}function he(Y){if(Y._status===-1){var A=Y._result;A=A(),A.then(function(H){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=H)},function(H){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=H)}),Y._status===-1&&(Y._status=0,Y._result=A)}if(Y._status===1)return Y._result.default;throw Y._result}var be={current:null},ne={transition:null},fe={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ne,ReactCurrentOwner:me};function ke(){throw Error("act(...) is not supported in production builds of React.")}return ar.Children={map:ae,forEach:function(Y,A,H){ae(Y,function(){A.apply(this,arguments)},H)},count:function(Y){var A=0;return ae(Y,function(){A++}),A},toArray:function(Y){return ae(Y,function(A){return A})||[]},only:function(Y){if(!W(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},ar.Component=E,ar.Fragment=t,ar.Profiler=i,ar.PureComponent=K,ar.StrictMode=n,ar.Suspense=h,ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,ar.act=ke,ar.cloneElement=function(Y,A,H){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var Q=T({},Y.props),ie=Y.key,se=Y.ref,ye=Y._owner;if(A!=null){if(A.ref!==void 0&&(se=A.ref,ye=me.current),A.key!==void 0&&(ie=""+A.key),Y.type&&Y.type.defaultProps)var ce=Y.type.defaultProps;for(Ae in A)le.call(A,Ae)&&!U.hasOwnProperty(Ae)&&(Q[Ae]=A[Ae]===void 0&&ce!==void 0?ce[Ae]:A[Ae])}var Ae=arguments.length-2;if(Ae===1)Q.children=H;else if(1<Ae){ce=Array(Ae);for(var Pe=0;Pe<Ae;Pe++)ce[Pe]=arguments[Pe+2];Q.children=ce}return{$$typeof:r,type:Y.type,key:ie,ref:se,props:Q,_owner:ye}},ar.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},ar.createElement=z,ar.createFactory=function(Y){var A=z.bind(null,Y);return A.type=Y,A},ar.createRef=function(){return{current:null}},ar.forwardRef=function(Y){return{$$typeof:d,render:Y}},ar.isValidElement=W,ar.lazy=function(Y){return{$$typeof:v,_payload:{_status:-1,_result:Y},_init:he}},ar.memo=function(Y,A){return{$$typeof:m,type:Y,compare:A===void 0?null:A}},ar.startTransition=function(Y){var A=ne.transition;ne.transition={};try{Y()}finally{ne.transition=A}},ar.unstable_act=ke,ar.useCallback=function(Y,A){return be.current.useCallback(Y,A)},ar.useContext=function(Y){return be.current.useContext(Y)},ar.useDebugValue=function(){},ar.useDeferredValue=function(Y){return be.current.useDeferredValue(Y)},ar.useEffect=function(Y,A){return be.current.useEffect(Y,A)},ar.useId=function(){return be.current.useId()},ar.useImperativeHandle=function(Y,A,H){return be.current.useImperativeHandle(Y,A,H)},ar.useInsertionEffect=function(Y,A){return be.current.useInsertionEffect(Y,A)},ar.useLayoutEffect=function(Y,A){return be.current.useLayoutEffect(Y,A)},ar.useMemo=function(Y,A){return be.current.useMemo(Y,A)},ar.useReducer=function(Y,A,H){return be.current.useReducer(Y,A,H)},ar.useRef=function(Y){return be.current.useRef(Y)},ar.useState=function(Y){return be.current.useState(Y)},ar.useSyncExternalStore=function(Y,A,H){return be.current.useSyncExternalStore(Y,A,H)},ar.useTransition=function(){return be.current.useTransition()},ar.version="18.3.1",ar}var Mp;function mm(){return Mp||(Mp=1,Bf.exports=dx()),Bf.exports}var Rp;function hx(){if(Rp)return Gc;Rp=1;var r=mm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,m){var v,w={},k=null,x=null;m!==void 0&&(k=""+m),h.key!==void 0&&(k=""+h.key),h.ref!==void 0&&(x=h.ref);for(v in h)n.call(h,v)&&!o.hasOwnProperty(v)&&(w[v]=h[v]);if(d&&d.defaultProps)for(v in h=d.defaultProps,h)w[v]===void 0&&(w[v]=h[v]);return{$$typeof:e,type:d,key:k,ref:x,props:w,_owner:i.current}}return Gc.Fragment=t,Gc.jsx=l,Gc.jsxs=l,Gc}var Up;function fx(){return Up||(Up=1,Uf.exports=hx()),Uf.exports}var u=fx(),ve=mm();const pm=fd(ve);var th={},qf={exports:{}},ci={},zf={exports:{}},$f={};var Bp;function mx(){return Bp||(Bp=1,(function(r){function e(ne,fe){var ke=ne.length;ne.push(fe);e:for(;0<ke;){var Y=ke-1>>>1,A=ne[Y];if(0<i(A,fe))ne[Y]=fe,ne[ke]=A,ke=Y;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var fe=ne[0],ke=ne.pop();if(ke!==fe){ne[0]=ke;e:for(var Y=0,A=ne.length,H=A>>>1;Y<H;){var Q=2*(Y+1)-1,ie=ne[Q],se=Q+1,ye=ne[se];if(0>i(ie,ke))se<A&&0>i(ye,ie)?(ne[Y]=ye,ne[se]=ke,Y=se):(ne[Y]=ie,ne[Q]=ke,Y=Q);else if(se<A&&0>i(ye,ke))ne[Y]=ye,ne[se]=ke,Y=se;else break e}}return fe}function i(ne,fe){var ke=ne.sortIndex-fe.sortIndex;return ke!==0?ke:ne.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();r.unstable_now=function(){return l.now()-d}}var h=[],m=[],v=1,w=null,k=3,x=!1,T=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ne){for(var fe=t(m);fe!==null;){if(fe.callback===null)n(m);else if(fe.startTime<=ne)n(m),fe.sortIndex=fe.expirationTime,e(h,fe);else break;fe=t(m)}}function $(ne){if(C=!1,B(ne),!T)if(t(h)!==null)T=!0,he(le);else{var fe=t(m);fe!==null&&be($,fe.startTime-ne)}}function le(ne,fe){T=!1,C&&(C=!1,j(z),z=-1),x=!0;var ke=k;try{for(B(fe),w=t(h);w!==null&&(!(w.expirationTime>fe)||ne&&!O());){var Y=w.callback;if(typeof Y=="function"){w.callback=null,k=w.priorityLevel;var A=Y(w.expirationTime<=fe);fe=r.unstable_now(),typeof A=="function"?w.callback=A:w===t(h)&&n(h),B(fe)}else n(h);w=t(h)}if(w!==null)var H=!0;else{var Q=t(m);Q!==null&&be($,Q.startTime-fe),H=!1}return H}finally{w=null,k=ke,x=!1}}var me=!1,U=null,z=-1,I=5,W=-1;function O(){return!(r.unstable_now()-W<I)}function F(){if(U!==null){var ne=r.unstable_now();W=ne;var fe=!0;try{fe=U(!0,ne)}finally{fe?Z():(me=!1,U=null)}}else me=!1}var Z;if(typeof K=="function")Z=function(){K(F)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ae=ee.port2;ee.port1.onmessage=F,Z=function(){ae.postMessage(null)}}else Z=function(){E(F,0)};function he(ne){U=ne,me||(me=!0,Z())}function be(ne,fe){z=E(function(){ne(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){T||x||(T=!0,he(le))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(ne){switch(k){case 1:case 2:case 3:var fe=3;break;default:fe=k}var ke=k;k=fe;try{return ne()}finally{k=ke}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,fe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ke=k;k=ne;try{return fe()}finally{k=ke}},r.unstable_scheduleCallback=function(ne,fe,ke){var Y=r.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Y+ke:Y):ke=Y,ne){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=ke+A,ne={id:v++,callback:fe,priorityLevel:ne,startTime:ke,expirationTime:A,sortIndex:-1},ke>Y?(ne.sortIndex=ke,e(m,ne),t(h)===null&&ne===t(m)&&(C?(j(z),z=-1):C=!0,be($,ke-Y))):(ne.sortIndex=A,e(h,ne),T||x||(T=!0,he(le))),ne},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(ne){var fe=k;return function(){var ke=k;k=fe;try{return ne.apply(this,arguments)}finally{k=ke}}}})($f)),$f}var qp;function px(){return qp||(qp=1,zf.exports=mx()),zf.exports}var zp;function gx(){if(zp)return ci;zp=1;var r=mm(),e=px();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)n.add(a[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function k(s){return h.call(w,s)?!0:h.call(v,s)?!1:m.test(s)?w[s]=!0:(v[s]=!0,!1)}function x(s,a,c,p){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function T(s,a,c,p){if(a===null||typeof a>"u"||x(s,a,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(s,a,c,p,b,N,M){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=b,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=N,this.removeEmptyString=M}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new C(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];E[a]=new C(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new C(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new C(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new C(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new C(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new C(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new C(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new C(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function K(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(j,K);E[a]=new C(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(j,K);E[a]=new C(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(j,K);E[a]=new C(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new C(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new C(s,1,!1,s.toLowerCase(),null,!0,!0)});function B(s,a,c,p){var b=E.hasOwnProperty(a)?E[a]:null;(b!==null?b.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(T(a,c,b,p)&&(c=null),p||b===null?k(a)&&(c===null?s.removeAttribute(a):s.setAttribute(a,""+c)):b.mustUseProperty?s[b.propertyName]=c===null?b.type===3?!1:"":c:(a=b.attributeName,p=b.attributeNamespace,c===null?s.removeAttribute(a):(b=b.type,c=b===3||b===4&&c===!0?"":""+c,p?s.setAttributeNS(p,a,c):s.setAttribute(a,c))))}var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),me=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ne=Symbol.iterator;function fe(s){return s===null||typeof s!="object"?null:(s=ne&&s[ne]||s["@@iterator"],typeof s=="function"?s:null)}var ke=Object.assign,Y;function A(s){if(Y===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Y=a&&a[1]||""}return`
`+Y+s}var H=!1;function Q(s,a){if(!s||H)return"";H=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Ie){var p=Ie}Reflect.construct(s,[],a)}else{try{a.call()}catch(Ie){p=Ie}s.call(a.prototype)}else{try{throw Error()}catch(Ie){p=Ie}s()}}catch(Ie){if(Ie&&p&&typeof Ie.stack=="string"){for(var b=Ie.stack.split(`
`),N=p.stack.split(`
`),M=b.length-1,oe=N.length-1;1<=M&&0<=oe&&b[M]!==N[oe];)oe--;for(;1<=M&&0<=oe;M--,oe--)if(b[M]!==N[oe]){if(M!==1||oe!==1)do if(M--,oe--,0>oe||b[M]!==N[oe]){var ge=`
`+b[M].replace(" at new "," at ");return s.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",s.displayName)),ge}while(1<=M&&0<=oe);break}}}finally{H=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?A(s):""}function ie(s){switch(s.tag){case 5:return A(s.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return s=Q(s.type,!1),s;case 11:return s=Q(s.type.render,!1),s;case 1:return s=Q(s.type,!0),s;default:return""}}function se(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case me:return"Portal";case I:return"Profiler";case z:return"StrictMode";case Z:return"Suspense";case ee:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case O:return(s.displayName||"Context")+".Consumer";case W:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ae:return a=s.displayName||null,a!==null?a:se(s.type)||"Memo";case he:a=s._payload,s=s._init;try{return se(s(a))}catch{}}return null}function ye(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(a);case 8:return a===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ae(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Pe(s){var a=Ae(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,N=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return b.call(this)},set:function(M){p=""+M,N.call(this,M)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(M){p=""+M},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ze(s){s._valueTracker||(s._valueTracker=Pe(s))}function He(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return s&&(p=Ae(s)?s.checked?"true":"false":s.value),s=p,s!==c?(a.setValue(s),!0):!1}function Je(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function dt(s,a){var c=a.checked;return ke({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function X(s,a){var c=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;c=ce(a.value!=null?a.value:c),s._wrapperState={initialChecked:p,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Qe(s,a){a=a.checked,a!=null&&B(s,"checked",a,!1)}function Yt(s,a){Qe(s,a);var c=ce(a.value),p=a.type;if(c!=null)p==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?$e(s,a.type,c):a.hasOwnProperty("defaultValue")&&$e(s,a.type,ce(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Ct(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function $e(s,a,c){(a!=="number"||Je(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var wt=Array.isArray;function st(s,a,c,p){if(s=s.options,a){a={};for(var b=0;b<c.length;b++)a["$"+c[b]]=!0;for(c=0;c<s.length;c++)b=a.hasOwnProperty("$"+s[c].value),s[c].selected!==b&&(s[c].selected=b),b&&p&&(s[c].defaultSelected=!0)}else{for(c=""+ce(c),a=null,b=0;b<s.length;b++){if(s[b].value===c){s[b].selected=!0,p&&(s[b].defaultSelected=!0);return}a!==null||s[b].disabled||(a=s[b])}a!==null&&(a.selected=!0)}}function ot(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ke({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function tt(s,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(wt(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}s._wrapperState={initialValue:ce(c)}}function hr(s,a){var c=ce(a.value),p=ce(a.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),a.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),p!=null&&(s.defaultValue=""+p)}function tr(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Wt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rr(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Wt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Lt,ft=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,p,b){MSApp.execUnsafeLocalFunction(function(){return s(a,c,p,b)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Lt=Lt||document.createElement("div"),Lt.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Lt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ot(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$r=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(s){$r.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),it[a]=it[s]})});function nr(s,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||it.hasOwnProperty(s)&&it[s]?(""+a).trim():a+"px"}function kt(s,a){s=s.style;for(var c in a)if(a.hasOwnProperty(c)){var p=c.indexOf("--")===0,b=nr(c,a[c],p);c==="float"&&(c="cssFloat"),p?s.setProperty(c,b):s[c]=b}}var Kt=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nr(s,a){if(a){if(Kt[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function _t(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mr=null;function Et(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Rt=null,fr=null,zt=null;function Pt(s){if(s=rl(s)){if(typeof Rt!="function")throw Error(t(280));var a=s.stateNode;a&&(a=ql(a),Rt(s.stateNode,s.type,a))}}function ur(s){fr?zt?zt.push(s):zt=[s]:fr=s}function fi(){if(fr){var s=fr,a=zt;if(zt=fr=null,Pt(s),a)for(s=0;s<a.length;s++)Pt(a[s])}}function Wr(s,a){return s(a)}function Zn(){}var Bn=!1;function St(s,a,c){if(Bn)return s(a,c);Bn=!0;try{return Wr(s,a,c)}finally{Bn=!1,(fr!==null||zt!==null)&&(Zn(),fi())}}function cs(s,a){var c=s.stateNode;if(c===null)return null;var p=ql(c);if(p===null)return null;c=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var ds=!1;if(d)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){ds=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{ds=!1}function Tn(s,a,c,p,b,N,M,oe,ge){var Ie=Array.prototype.slice.call(arguments,3);try{a.apply(c,Ie)}catch(Ve){this.onError(Ve)}}var br=!1,Ur=null,Vr=!1,qs=null,Ti={onError:function(s){br=!0,Ur=s}};function hs(s,a,c,p,b,N,M,oe,ge){br=!1,Ur=null,Tn.apply(Ti,arguments)}function mi(s,a,c,p,b,N,M,oe,ge){if(hs.apply(this,arguments),br){if(br){var Ie=Ur;br=!1,Ur=null}else throw Error(t(198));Vr||(Vr=!0,qs=Ie)}}function vn(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function Jr(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function qn(s){if(vn(s)!==s)throw Error(t(188))}function ta(s){var a=s.alternate;if(!a){if(a=vn(s),a===null)throw Error(t(188));return a!==s?null:s}for(var c=s,p=a;;){var b=c.return;if(b===null)break;var N=b.alternate;if(N===null){if(p=b.return,p!==null){c=p;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===c)return qn(b),s;if(N===p)return qn(b),a;N=N.sibling}throw Error(t(188))}if(c.return!==p.return)c=b,p=N;else{for(var M=!1,oe=b.child;oe;){if(oe===c){M=!0,c=b,p=N;break}if(oe===p){M=!0,p=b,c=N;break}oe=oe.sibling}if(!M){for(oe=N.child;oe;){if(oe===c){M=!0,c=N,p=b;break}if(oe===p){M=!0,p=N,c=b;break}oe=oe.sibling}if(!M)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:a}function Xn(s){return s=ta(s),s!==null?Oi(s):null}function Oi(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Oi(s);if(a!==null)return a;s=s.sibling}return null}var ws=e.unstable_scheduleCallback,Ii=e.unstable_cancelCallback,pi=e.unstable_shouldYield,oo=e.unstable_requestPaint,jr=e.unstable_now,Zs=e.unstable_getCurrentPriorityLevel,ra=e.unstable_ImmediatePriority,Qn=e.unstable_UserBlockingPriority,zs=e.unstable_NormalPriority,lo=e.unstable_LowPriority,Fa=e.unstable_IdlePriority,Di=null,fs=null;function uo(s){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(Di,s,void 0,(s.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:tn,na=Math.log,Bo=Math.LN2;function tn(s){return s>>>=0,s===0?32:31-(na(s)/Bo|0)|0}var sa=64,zn=4194304;function _s(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Fi(s,a){var c=s.pendingLanes;if(c===0)return 0;var p=0,b=s.suspendedLanes,N=s.pingedLanes,M=c&268435455;if(M!==0){var oe=M&~b;oe!==0?p=_s(oe):(N&=M,N!==0&&(p=_s(N)))}else M=c&~b,M!==0?p=_s(M):N!==0&&(p=_s(N));if(p===0)return 0;if(a!==0&&a!==p&&(a&b)===0&&(b=p&-p,N=a&-a,b>=N||b===16&&(N&4194240)!==0))return a;if((p&4)!==0&&(p|=c&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)c=31-Zr(a),b=1<<c,p|=s[c],a&=~b;return p}function ms(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(s,a){for(var c=s.suspendedLanes,p=s.pingedLanes,b=s.expirationTimes,N=s.pendingLanes;0<N;){var M=31-Zr(N),oe=1<<M,ge=b[M];ge===-1?((oe&c)===0||(oe&p)!==0)&&(b[M]=ms(oe,a)):ge<=a&&(s.expiredLanes|=oe),N&=~oe}}function Ns(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ma(){var s=sa;return sa<<=1,(sa&4194240)===0&&(sa=64),s}function Xs(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ia(s,a,c){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Zr(a),s[a]=c}function ks(s,a){var c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<c;){var b=31-Zr(c),N=1<<b;a[b]=0,p[b]=-1,s[b]=-1,c&=~N}}function gi(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var p=31-Zr(c),b=1<<p;b&a|s[p]&a&&(s[p]|=a),c&=~b}}var cr=0;function aa(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Mi,co,qo,zo,Ra,Ua=!1,$n=[],Qs=null,es=null,Ss=null,oa=new Map,Tt=new Map,ei=[],El="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $o(s,a){switch(s){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":oa.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(a.pointerId)}}function Wn(s,a,c,p,b,N){return s===null||s.nativeEvent!==N?(s={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:N,targetContainers:[b]},a!==null&&(a=rl(a),a!==null&&co(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,b!==null&&a.indexOf(b)===-1&&a.push(b),s)}function ti(s,a,c,p,b){switch(a){case"focusin":return Qs=Wn(Qs,s,a,c,p,b),!0;case"dragenter":return es=Wn(es,s,a,c,p,b),!0;case"mouseover":return Ss=Wn(Ss,s,a,c,p,b),!0;case"pointerover":var N=b.pointerId;return oa.set(N,Wn(oa.get(N)||null,s,a,c,p,b)),!0;case"gotpointercapture":return N=b.pointerId,Tt.set(N,Wn(Tt.get(N)||null,s,a,c,p,b)),!0}return!1}function ho(s){var a=Za(s.target);if(a!==null){var c=vn(a);if(c!==null){if(a=c.tag,a===13){if(a=Jr(c),a!==null){s.blockedOn=a,Ra(s.priority,function(){qo(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ba(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Ri(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var p=new c.constructor(c.type,c);mr=p,c.target.dispatchEvent(p),mr=null}else return a=rl(c),a!==null&&co(a),s.blockedOn=c,!1;a.shift()}return!0}function la(s,a,c){Ba(s)&&c.delete(a)}function Wo(){Ua=!1,Qs!==null&&Ba(Qs)&&(Qs=null),es!==null&&Ba(es)&&(es=null),Ss!==null&&Ba(Ss)&&(Ss=null),oa.forEach(la),Tt.forEach(la)}function ri(s,a){s.blockedOn===a&&(s.blockedOn=null,Ua||(Ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wo)))}function ua(s){function a(b){return ri(b,s)}if(0<$n.length){ri($n[0],s);for(var c=1;c<$n.length;c++){var p=$n[c];p.blockedOn===s&&(p.blockedOn=null)}}for(Qs!==null&&ri(Qs,s),es!==null&&ri(es,s),Ss!==null&&ri(Ss,s),oa.forEach(a),Tt.forEach(a),c=0;c<ei.length;c++)p=ei[c],p.blockedOn===s&&(p.blockedOn=null);for(;0<ei.length&&(c=ei[0],c.blockedOn===null);)ho(c),c.blockedOn===null&&ei.shift()}var Vn=$.ReactCurrentBatchConfig,vi=!0;function ca(s,a,c,p){var b=cr,N=Vn.transition;Vn.transition=null;try{cr=1,qa(s,a,c,p)}finally{cr=b,Vn.transition=N}}function fo(s,a,c,p){var b=cr,N=Vn.transition;Vn.transition=null;try{cr=4,qa(s,a,c,p)}finally{cr=b,Vn.transition=N}}function qa(s,a,c,p){if(vi){var b=Ri(s,a,c,p);if(b===null)Rl(s,a,p,rn,c),$o(s,p);else if(ti(b,s,a,c,p))p.stopPropagation();else if($o(s,p),a&4&&-1<El.indexOf(s)){for(;b!==null;){var N=rl(b);if(N!==null&&Mi(N),N=Ri(s,a,c,p),N===null&&Rl(s,a,p,rn,c),N===b)break;b=N}b!==null&&p.stopPropagation()}else Rl(s,a,p,null,c)}}var rn=null;function Ri(s,a,c,p){if(rn=null,s=Et(p),s=Za(s),s!==null)if(a=vn(s),a===null)s=null;else if(c=a.tag,c===13){if(s=Jr(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return rn=s,null}function js(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zs()){case ra:return 1;case Qn:return 4;case zs:case lo:return 16;case Fa:return 536870912;default:return 16}default:return 16}}var ps=null,P=null,de=null;function Ne(){if(de)return de;var s,a=P,c=a.length,p,b="value"in ps?ps.value:ps.textContent,N=b.length;for(s=0;s<c&&a[s]===b[s];s++);var M=c-s;for(p=1;p<=M&&a[c-p]===b[N-p];p++);return de=b.slice(s,1<p?1-p:void 0)}function Le(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Be(){return!0}function Ke(){return!1}function et(s){function a(c,p,b,N,M){this._reactName=c,this._targetInst=b,this.type=p,this.nativeEvent=N,this.target=M,this.currentTarget=null;for(var oe in s)s.hasOwnProperty(oe)&&(c=s[oe],this[oe]=c?c(N):N[oe]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Be:Ke,this.isPropagationStopped=Ke,this}return ke(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Be)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Be)},persist:function(){},isPersistent:Be}),a}var rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xe=et(rt),y=ke({},rt,{view:0,detail:0}),L=et(y),J,ue,xe,Oe=ke({},y,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xe&&(xe&&s.type==="mousemove"?(J=s.screenX-xe.screenX,ue=s.screenY-xe.screenY):ue=J=0,xe=s),J)},movementY:function(s){return"movementY"in s?s.movementY:ue}}),Ue=et(Oe),lt=ke({},Oe,{dataTransfer:0}),pt=et(lt),It=ke({},y,{relatedTarget:0}),$t=et(It),dr=ke({},rt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ut=et(dr),gt=ke({},rt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bt=et(gt),or=ke({},rt,{data:0}),wr=et(or),Ar={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ts={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function da(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ts[s])?!!a[s]:!1}function mo(){return da}var Vo=ke({},y,{key:function(s){if(s.key){var a=Ar[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Le(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(s){return s.type==="keypress"?Le(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Le(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),za=et(Vo),po=ke({},Oe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=et(po),Wa=ke({},y,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Hn=et(Wa),go=ke({},rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),vo=et(go),Pl=ke({},Oe,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ll=et(Pl),gs=[9,13,27,32],yi=d&&"CompositionEvent"in window,Ui=null;d&&"documentMode"in document&&(Ui=document.documentMode);var vu=d&&"TextEvent"in window&&!Ui,$s=d&&(!yi||Ui&&8<Ui&&11>=Ui),Va=" ",Ho=!1;function Go(s,a){switch(s){case"keyup":return gs.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ha(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ni=!1;function Ws(s,a){switch(s){case"compositionend":return ha(a);case"keypress":return a.which!==32?null:(Ho=!0,Va);case"textInput":return s=a.data,s===Va&&Ho?null:s;default:return null}}function Vs(s,a){if(ni)return s==="compositionend"||!yi&&Go(s,a)?(s=Ne(),de=P=ps=null,ni=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return $s&&a.locale!=="ko"?null:a.data;default:return null}}var Ha={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bi(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Ha[s.type]:a==="textarea"}function fa(s,a,c,p){ur(p),a=_u(a,"onChange"),0<a.length&&(c=new Xe("onChange","change",null,c,p),s.push({event:c,listeners:a}))}var ma=null,qi=null;function dn(s){Fl(s,0)}function yo(s){var a=Co(s);if(He(a))return s}function zi(s,a){if(s==="change")return a}var xi=!1;if(d){var xo;if(d){var bo="oninput"in document;if(!bo){var Yo=document.createElement("div");Yo.setAttribute("oninput","return;"),bo=typeof Yo.oninput=="function"}xo=bo}else xo=!1;xi=xo&&(!document.documentMode||9<document.documentMode)}function Ko(){ma&&(ma.detachEvent("onpropertychange",pa),qi=ma=null)}function pa(s){if(s.propertyName==="value"&&yo(qi)){var a=[];fa(a,qi,s,Et(s)),St(dn,a)}}function Ga(s,a,c){s==="focusin"?(Ko(),ma=a,qi=c,ma.attachEvent("onpropertychange",pa)):s==="focusout"&&Ko()}function Ya(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yo(qi)}function wo(s,a){if(s==="click")return yo(a)}function Ka(s,a){if(s==="input"||s==="change")return yo(a)}function _o(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var nn=typeof Object.is=="function"?Object.is:_o;function As(s,a){if(nn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var b=c[p];if(!h.call(a,b)||!nn(s[b],a[b]))return!1}return!0}function pr(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Cr(s,a){var c=pr(s);s=0;for(var p;c;){if(c.nodeType===3){if(p=s+c.textContent.length,s<=a&&p>=a)return{node:c,offset:a-s};s=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pr(c)}}function sn(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?sn(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function yn(){for(var s=window,a=Je();a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=Je(s.document)}return a}function bi(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Tl(s){var a=yn(),c=s.focusedElem,p=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&sn(c.ownerDocument.documentElement,c)){if(p!==null&&bi(c)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if(s=(a=c.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var b=c.textContent.length,N=Math.min(p.start,b);p=p.end===void 0?N:Math.min(p.end,b),!s.extend&&N>p&&(b=p,p=N,N=b),b=Cr(c,N);var M=Cr(c,p);b&&M&&(s.rangeCount!==1||s.anchorNode!==b.node||s.anchorOffset!==b.offset||s.focusNode!==M.node||s.focusOffset!==M.offset)&&(a=a.createRange(),a.setStart(b.node,b.offset),s.removeAllRanges(),N>p?(s.addRange(a),s.extend(M.node,M.offset)):(a.setEnd(M.node,M.offset),s.addRange(a)))}}for(a=[],s=c;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)s=a[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Jo=d&&"documentMode"in document&&11>=document.documentMode,ga=null,yu=null,Zo=null,xu=!1;function Nc(s,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;xu||ga==null||ga!==Je(p)||(p=ga,"selectionStart"in p&&bi(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Zo&&As(Zo,p)||(Zo=p,p=_u(yu,"onSelect"),0<p.length&&(a=new Xe("onSelect","select",null,a,c),s.push({event:a,listeners:p}),a.target=ga)))}function Ol(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var No={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},ko={},kc={};d&&(kc=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Il(s){if(ko[s])return ko[s];if(!No[s])return s;var a=No[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in kc)return ko[s]=a[c];return s}var Sc=Il("animationend"),jc=Il("animationiteration"),Ac=Il("animationstart"),Cc=Il("transitionend"),Ec=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(s,a){Ec.set(s,a),o(a,[s])}for(var Xo=0;Xo<Pc.length;Xo++){var vs=Pc[Xo],si=vs.toLowerCase(),bu=vs[0].toUpperCase()+vs.slice(1);$i(si,"on"+bu)}$i(Sc,"onAnimationEnd"),$i(jc,"onAnimationIteration"),$i(Ac,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(Cc,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function Dl(s,a,c){var p=s.type||"unknown-event";s.currentTarget=c,mi(p,a,void 0,s),s.currentTarget=null}function Fl(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var p=s[c],b=p.event;p=p.listeners;e:{var N=void 0;if(a)for(var M=p.length-1;0<=M;M--){var oe=p[M],ge=oe.instance,Ie=oe.currentTarget;if(oe=oe.listener,ge!==N&&b.isPropagationStopped())break e;Dl(b,oe,Ie),N=ge}else for(M=0;M<p.length;M++){if(oe=p[M],ge=oe.instance,Ie=oe.currentTarget,oe=oe.listener,ge!==N&&b.isPropagationStopped())break e;Dl(b,oe,Ie),N=ge}}}if(Vr)throw s=qs,Vr=!1,qs=null,s}function Or(s,a){var c=a[Es];c===void 0&&(c=a[Es]=new Set);var p=s+"__bubble";c.has(p)||(Ml(a,s,2,!1),c.add(p))}function wu(s,a,c){var p=0;a&&(p|=4),Ml(c,s,p,a)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function So(s){if(!s[Qo]){s[Qo]=!0,n.forEach(function(c){c!=="selectionchange"&&(wd.has(c)||wu(c,!1,s),wu(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Qo]||(a[Qo]=!0,wu("selectionchange",!1,a))}}function Ml(s,a,c,p){switch(js(a)){case 1:var b=ca;break;case 4:b=fo;break;default:b=qa}c=b.bind(null,a,c,s),b=void 0,!ds||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(b=!0),p?b!==void 0?s.addEventListener(a,c,{capture:!0,passive:b}):s.addEventListener(a,c,!0):b!==void 0?s.addEventListener(a,c,{passive:b}):s.addEventListener(a,c,!1)}function Rl(s,a,c,p,b){var N=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var oe=p.stateNode.containerInfo;if(oe===b||oe.nodeType===8&&oe.parentNode===b)break;if(M===4)for(M=p.return;M!==null;){var ge=M.tag;if((ge===3||ge===4)&&(ge=M.stateNode.containerInfo,ge===b||ge.nodeType===8&&ge.parentNode===b))return;M=M.return}for(;oe!==null;){if(M=Za(oe),M===null)return;if(ge=M.tag,ge===5||ge===6){p=N=M;continue e}oe=oe.parentNode}}p=p.return}St(function(){var Ie=N,Ve=Et(c),Ge=[];e:{var We=Ec.get(s);if(We!==void 0){var at=Xe,vt=s;switch(s){case"keypress":if(Le(c)===0)break e;case"keydown":case"keyup":at=za;break;case"focusin":vt="focus",at=$t;break;case"focusout":vt="blur",at=$t;break;case"beforeblur":case"afterblur":at=$t;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ue;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=pt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Hn;break;case Sc:case jc:case Ac:at=Ut;break;case Cc:at=vo;break;case"scroll":at=L;break;case"wheel":at=Ll;break;case"copy":case"cut":case"paste":at=Bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=$a}var xt=(a&4)!==0,Cn=!xt&&s==="scroll",Ce=xt?We!==null?We+"Capture":null:We;xt=[];for(var _e=Ie,Te;_e!==null;){Te=_e;var Ye=Te.stateNode;if(Te.tag===5&&Ye!==null&&(Te=Ye,Ce!==null&&(Ye=cs(_e,Ce),Ye!=null&&xt.push(Ul(_e,Ye,Te)))),Cn)break;_e=_e.return}0<xt.length&&(We=new at(We,vt,null,c,Ve),Ge.push({event:We,listeners:xt}))}}if((a&7)===0){e:{if(We=s==="mouseover"||s==="pointerover",at=s==="mouseout"||s==="pointerout",We&&c!==mr&&(vt=c.relatedTarget||c.fromElement)&&(Za(vt)||vt[rs]))break e;if((at||We)&&(We=Ve.window===Ve?Ve:(We=Ve.ownerDocument)?We.defaultView||We.parentWindow:window,at?(vt=c.relatedTarget||c.toElement,at=Ie,vt=vt?Za(vt):null,vt!==null&&(Cn=vn(vt),vt!==Cn||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(at=null,vt=Ie),at!==vt)){if(xt=Ue,Ye="onMouseLeave",Ce="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&(xt=$a,Ye="onPointerLeave",Ce="onPointerEnter",_e="pointer"),Cn=at==null?We:Co(at),Te=vt==null?We:Co(vt),We=new xt(Ye,_e+"leave",at,c,Ve),We.target=Cn,We.relatedTarget=Te,Ye=null,Za(Ve)===Ie&&(xt=new xt(Ce,_e+"enter",vt,c,Ve),xt.target=Te,xt.relatedTarget=Cn,Ye=xt),Cn=Ye,at&&vt)t:{for(xt=at,Ce=vt,_e=0,Te=xt;Te;Te=jo(Te))_e++;for(Te=0,Ye=Ce;Ye;Ye=jo(Ye))Te++;for(;0<_e-Te;)xt=jo(xt),_e--;for(;0<Te-_e;)Ce=jo(Ce),Te--;for(;_e--;){if(xt===Ce||Ce!==null&&xt===Ce.alternate)break t;xt=jo(xt),Ce=jo(Ce)}xt=null}else xt=null;at!==null&&_d(Ge,We,at,xt,!1),vt!==null&&Cn!==null&&_d(Ge,Cn,vt,xt,!0)}}e:{if(We=Ie?Co(Ie):window,at=We.nodeName&&We.nodeName.toLowerCase(),at==="select"||at==="input"&&We.type==="file")var Nt=zi;else if(Bi(We))if(xi)Nt=Ka;else{Nt=Ya;var Dt=Ga}else(at=We.nodeName)&&at.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(Nt=wo);if(Nt&&(Nt=Nt(s,Ie))){fa(Ge,Nt,c,Ve);break e}Dt&&Dt(s,We,Ie),s==="focusout"&&(Dt=We._wrapperState)&&Dt.controlled&&We.type==="number"&&$e(We,"number",We.value)}switch(Dt=Ie?Co(Ie):window,s){case"focusin":(Bi(Dt)||Dt.contentEditable==="true")&&(ga=Dt,yu=Ie,Zo=null);break;case"focusout":Zo=yu=ga=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,Nc(Ge,c,Ve);break;case"selectionchange":if(Jo)break;case"keydown":case"keyup":Nc(Ge,c,Ve)}var Ft;if(yi)e:{switch(s){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else ni?Go(s,c)&&(Vt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Vt="onCompositionStart");Vt&&($s&&c.locale!=="ko"&&(ni||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&ni&&(Ft=Ne()):(ps=Ve,P="value"in ps?ps.value:ps.textContent,ni=!0)),Dt=_u(Ie,Vt),0<Dt.length&&(Vt=new wr(Vt,s,null,c,Ve),Ge.push({event:Vt,listeners:Dt}),Ft?Vt.data=Ft:(Ft=ha(c),Ft!==null&&(Vt.data=Ft)))),(Ft=vu?Ws(s,c):Vs(s,c))&&(Ie=_u(Ie,"onBeforeInput"),0<Ie.length&&(Ve=new wr("onBeforeInput","beforeinput",null,c,Ve),Ge.push({event:Ve,listeners:Ie}),Ve.data=Ft))}Fl(Ge,a)})}function Ul(s,a,c){return{instance:s,listener:a,currentTarget:c}}function _u(s,a){for(var c=a+"Capture",p=[];s!==null;){var b=s,N=b.stateNode;b.tag===5&&N!==null&&(b=N,N=cs(s,c),N!=null&&p.unshift(Ul(s,N,b)),N=cs(s,a),N!=null&&p.push(Ul(s,N,b))),s=s.return}return p}function jo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function _d(s,a,c,p,b){for(var N=a._reactName,M=[];c!==null&&c!==p;){var oe=c,ge=oe.alternate,Ie=oe.stateNode;if(ge!==null&&ge===p)break;oe.tag===5&&Ie!==null&&(oe=Ie,b?(ge=cs(c,N),ge!=null&&M.unshift(Ul(c,ge,oe))):b||(ge=cs(c,N),ge!=null&&M.push(Ul(c,ge,oe)))),c=c.return}M.length!==0&&s.push({event:a,listeners:M})}var Xh=/\r\n?/g,Qh=/\u0000|\uFFFD/g;function Nd(s){return(typeof s=="string"?s:""+s).replace(Xh,`
`).replace(Qh,"")}function Nu(s,a,c){if(a=Nd(a),Nd(s)!==a&&c)throw Error(t(425))}function el(){}var Bl=null,Ao=null;function Lc(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Tc=typeof setTimeout=="function"?setTimeout:void 0,kd=typeof clearTimeout=="function"?clearTimeout:void 0,Sd=typeof Promise=="function"?Promise:void 0,ef=typeof queueMicrotask=="function"?queueMicrotask:typeof Sd<"u"?function(s){return Sd.resolve(null).then(s).catch(tf)}:Tc;function tf(s){setTimeout(function(){throw s})}function Oc(s,a){var c=a,p=0;do{var b=c.nextSibling;if(s.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(p===0){s.removeChild(b),ua(a);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=b}while(c);ua(a)}function ys(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function ii(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),Wi="__reactFiber$"+Cs,tl="__reactProps$"+Cs,rs="__reactContainer$"+Cs,Es="__reactEvents$"+Cs,rf="__reactListeners$"+Cs,nf="__reactHandles$"+Cs;function Za(s){var a=s[Wi];if(a)return a;for(var c=s.parentNode;c;){if(a=c[rs]||c[Wi]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=ii(s);s!==null;){if(c=s[Wi])return c;s=ii(s)}return a}s=c,c=s.parentNode}return null}function rl(s){return s=s[Wi]||s[rs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Co(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function ql(s){return s[tl]||null}var Ic=[],va=-1;function wi(s){return{current:s}}function kr(s){0>va||(s.current=Ic[va],Ic[va]=null,va--)}function Er(s,a){va++,Ic[va]=s.current,s.current=a}var Xa={},Gn=wi(Xa),Ps=wi(!1),Eo=Xa;function nl(s,a){var c=s.type.contextTypes;if(!c)return Xa;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var b={},N;for(N in c)b[N]=a[N];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=b),b}function Ls(s){return s=s.childContextTypes,s!=null}function ku(){kr(Ps),kr(Gn)}function jd(s,a,c){if(Gn.current!==Xa)throw Error(t(168));Er(Gn,a),Er(Ps,c)}function Dc(s,a,c){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var b in p)if(!(b in a))throw Error(t(108,ye(s)||"Unknown",b));return ke({},c,p)}function Po(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Xa,Eo=Gn.current,Er(Gn,s),Er(Ps,Ps.current),!0}function Ad(s,a,c){var p=s.stateNode;if(!p)throw Error(t(169));c?(s=Dc(s,a,Eo),p.__reactInternalMemoizedMergedChildContext=s,kr(Ps),kr(Gn),Er(Gn,s)):kr(Ps),Er(Ps,c)}var ya=null,zl=!1,f=!1;function g(s){ya===null?ya=[s]:ya.push(s)}function _(s){zl=!0,g(s)}function S(){if(!f&&ya!==null){f=!0;var s=0,a=cr;try{var c=ya;for(cr=1;s<c.length;s++){var p=c[s];do p=p(!0);while(p!==null)}ya=null,zl=!1}catch(b){throw ya!==null&&(ya=ya.slice(s+1)),ws(ra,S),b}finally{cr=a,f=!1}}return null}var D=[],R=0,q=null,V=0,G=[],te=0,pe=null,je=1,re="";function we(s,a){D[R++]=V,D[R++]=q,q=s,V=a}function Se(s,a,c){G[te++]=je,G[te++]=re,G[te++]=pe,pe=s;var p=je;s=re;var b=32-Zr(p)-1;p&=~(1<<b),c+=1;var N=32-Zr(a)+b;if(30<N){var M=b-b%5;N=(p&(1<<M)-1).toString(32),p>>=M,b-=M,je=1<<32-Zr(a)+b|c<<b|p,re=N+s}else je=1<<N|c<<b|p,re=s}function Me(s){s.return!==null&&(we(s,1),Se(s,1,0))}function Ee(s){for(;s===q;)q=D[--R],D[R]=null,V=D[--R],D[R]=null;for(;s===pe;)pe=G[--te],G[te]=null,re=G[--te],G[te]=null,je=G[--te],G[te]=null}var De=null,Fe=null,Re=!1,qe=null;function bt(s,a){var c=Ki(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,a=s.deletions,a===null?(s.deletions=[c],s.flags|=16):a.push(c)}function ut(s,a){switch(s.tag){case 5:var c=s.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,De=s,Fe=ys(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,De=s,Fe=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=pe!==null?{id:je,overflow:re}:null,s.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Ki(18,null,null,0),c.stateNode=a,c.return=s,s.child=c,De=s,Fe=null,!0):!1;default:return!1}}function Zt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function mt(s){if(Re){var a=Fe;if(a){var c=a;if(!ut(s,a)){if(Zt(s))throw Error(t(418));a=ys(c.nextSibling);var p=De;a&&ut(s,a)?bt(p,c):(s.flags=s.flags&-4097|2,Re=!1,De=s)}}else{if(Zt(s))throw Error(t(418));s.flags=s.flags&-4097|2,Re=!1,De=s}}}function ir(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;De=s}function an(s){if(s!==De)return!1;if(!Re)return ir(s),Re=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Lc(s.type,s.memoizedProps)),a&&(a=Fe)){if(Zt(s))throw Xt(),Error(t(418));for(;a;)bt(s,a),a=ys(a.nextSibling)}if(ir(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(a===0){Fe=ys(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}s=s.nextSibling}Fe=null}}else Fe=De?ys(s.stateNode.nextSibling):null;return!0}function Xt(){for(var s=Fe;s;)s=ys(s.nextSibling)}function ct(){Fe=De=null,Re=!1}function Ze(s){qe===null?qe=[s]:qe.push(s)}var hn=$.ReactCurrentBatchConfig;function qt(s,a,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,s));var b=p,N=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===N?a.ref:(a=function(M){var oe=b.refs;M===null?delete oe[N]:oe[N]=M},a._stringRef=N,a)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function sr(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Rr(s){var a=s._init;return a(s._payload)}function On(s){function a(Ce,_e){if(s){var Te=Ce.deletions;Te===null?(Ce.deletions=[_e],Ce.flags|=16):Te.push(_e)}}function c(Ce,_e){if(!s)return null;for(;_e!==null;)a(Ce,_e),_e=_e.sibling;return null}function p(Ce,_e){for(Ce=new Map;_e!==null;)_e.key!==null?Ce.set(_e.key,_e):Ce.set(_e.index,_e),_e=_e.sibling;return Ce}function b(Ce,_e){return Ce=fl(Ce,_e),Ce.index=0,Ce.sibling=null,Ce}function N(Ce,_e,Te){return Ce.index=Te,s?(Te=Ce.alternate,Te!==null?(Te=Te.index,Te<_e?(Ce.flags|=2,_e):Te):(Ce.flags|=2,_e)):(Ce.flags|=1048576,_e)}function M(Ce){return s&&Ce.alternate===null&&(Ce.flags|=2),Ce}function oe(Ce,_e,Te,Ye){return _e===null||_e.tag!==6?(_e=Of(Te,Ce.mode,Ye),_e.return=Ce,_e):(_e=b(_e,Te),_e.return=Ce,_e)}function ge(Ce,_e,Te,Ye){var Nt=Te.type;return Nt===U?Ve(Ce,_e,Te.props.children,Ye,Te.key):_e!==null&&(_e.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===he&&Rr(Nt)===_e.type)?(Ye=b(_e,Te.props),Ye.ref=qt(Ce,_e,Te),Ye.return=Ce,Ye):(Ye=Gd(Te.type,Te.key,Te.props,null,Ce.mode,Ye),Ye.ref=qt(Ce,_e,Te),Ye.return=Ce,Ye)}function Ie(Ce,_e,Te,Ye){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Te.containerInfo||_e.stateNode.implementation!==Te.implementation?(_e=If(Te,Ce.mode,Ye),_e.return=Ce,_e):(_e=b(_e,Te.children||[]),_e.return=Ce,_e)}function Ve(Ce,_e,Te,Ye,Nt){return _e===null||_e.tag!==7?(_e=Jl(Te,Ce.mode,Ye,Nt),_e.return=Ce,_e):(_e=b(_e,Te),_e.return=Ce,_e)}function Ge(Ce,_e,Te){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Of(""+_e,Ce.mode,Te),_e.return=Ce,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case le:return Te=Gd(_e.type,_e.key,_e.props,null,Ce.mode,Te),Te.ref=qt(Ce,null,_e),Te.return=Ce,Te;case me:return _e=If(_e,Ce.mode,Te),_e.return=Ce,_e;case he:var Ye=_e._init;return Ge(Ce,Ye(_e._payload),Te)}if(wt(_e)||fe(_e))return _e=Jl(_e,Ce.mode,Te,null),_e.return=Ce,_e;sr(Ce,_e)}return null}function We(Ce,_e,Te,Ye){var Nt=_e!==null?_e.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Nt!==null?null:oe(Ce,_e,""+Te,Ye);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case le:return Te.key===Nt?ge(Ce,_e,Te,Ye):null;case me:return Te.key===Nt?Ie(Ce,_e,Te,Ye):null;case he:return Nt=Te._init,We(Ce,_e,Nt(Te._payload),Ye)}if(wt(Te)||fe(Te))return Nt!==null?null:Ve(Ce,_e,Te,Ye,null);sr(Ce,Te)}return null}function at(Ce,_e,Te,Ye,Nt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Ce=Ce.get(Te)||null,oe(_e,Ce,""+Ye,Nt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case le:return Ce=Ce.get(Ye.key===null?Te:Ye.key)||null,ge(_e,Ce,Ye,Nt);case me:return Ce=Ce.get(Ye.key===null?Te:Ye.key)||null,Ie(_e,Ce,Ye,Nt);case he:var Dt=Ye._init;return at(Ce,_e,Te,Dt(Ye._payload),Nt)}if(wt(Ye)||fe(Ye))return Ce=Ce.get(Te)||null,Ve(_e,Ce,Ye,Nt,null);sr(_e,Ye)}return null}function vt(Ce,_e,Te,Ye){for(var Nt=null,Dt=null,Ft=_e,Vt=_e=0,os=null;Ft!==null&&Vt<Te.length;Vt++){Ft.index>Vt?(os=Ft,Ft=null):os=Ft.sibling;var _r=We(Ce,Ft,Te[Vt],Ye);if(_r===null){Ft===null&&(Ft=os);break}s&&Ft&&_r.alternate===null&&a(Ce,Ft),_e=N(_r,_e,Vt),Dt===null?Nt=_r:Dt.sibling=_r,Dt=_r,Ft=os}if(Vt===Te.length)return c(Ce,Ft),Re&&we(Ce,Vt),Nt;if(Ft===null){for(;Vt<Te.length;Vt++)Ft=Ge(Ce,Te[Vt],Ye),Ft!==null&&(_e=N(Ft,_e,Vt),Dt===null?Nt=Ft:Dt.sibling=Ft,Dt=Ft);return Re&&we(Ce,Vt),Nt}for(Ft=p(Ce,Ft);Vt<Te.length;Vt++)os=at(Ft,Ce,Vt,Te[Vt],Ye),os!==null&&(s&&os.alternate!==null&&Ft.delete(os.key===null?Vt:os.key),_e=N(os,_e,Vt),Dt===null?Nt=os:Dt.sibling=os,Dt=os);return s&&Ft.forEach(function(ml){return a(Ce,ml)}),Re&&we(Ce,Vt),Nt}function xt(Ce,_e,Te,Ye){var Nt=fe(Te);if(typeof Nt!="function")throw Error(t(150));if(Te=Nt.call(Te),Te==null)throw Error(t(151));for(var Dt=Nt=null,Ft=_e,Vt=_e=0,os=null,_r=Te.next();Ft!==null&&!_r.done;Vt++,_r=Te.next()){Ft.index>Vt?(os=Ft,Ft=null):os=Ft.sibling;var ml=We(Ce,Ft,_r.value,Ye);if(ml===null){Ft===null&&(Ft=os);break}s&&Ft&&ml.alternate===null&&a(Ce,Ft),_e=N(ml,_e,Vt),Dt===null?Nt=ml:Dt.sibling=ml,Dt=ml,Ft=os}if(_r.done)return c(Ce,Ft),Re&&we(Ce,Vt),Nt;if(Ft===null){for(;!_r.done;Vt++,_r=Te.next())_r=Ge(Ce,_r.value,Ye),_r!==null&&(_e=N(_r,_e,Vt),Dt===null?Nt=_r:Dt.sibling=_r,Dt=_r);return Re&&we(Ce,Vt),Nt}for(Ft=p(Ce,Ft);!_r.done;Vt++,_r=Te.next())_r=at(Ft,Ce,Vt,_r.value,Ye),_r!==null&&(s&&_r.alternate!==null&&Ft.delete(_r.key===null?Vt:_r.key),_e=N(_r,_e,Vt),Dt===null?Nt=_r:Dt.sibling=_r,Dt=_r);return s&&Ft.forEach(function(ux){return a(Ce,ux)}),Re&&we(Ce,Vt),Nt}function Cn(Ce,_e,Te,Ye){if(typeof Te=="object"&&Te!==null&&Te.type===U&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case le:e:{for(var Nt=Te.key,Dt=_e;Dt!==null;){if(Dt.key===Nt){if(Nt=Te.type,Nt===U){if(Dt.tag===7){c(Ce,Dt.sibling),_e=b(Dt,Te.props.children),_e.return=Ce,Ce=_e;break e}}else if(Dt.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===he&&Rr(Nt)===Dt.type){c(Ce,Dt.sibling),_e=b(Dt,Te.props),_e.ref=qt(Ce,Dt,Te),_e.return=Ce,Ce=_e;break e}c(Ce,Dt);break}else a(Ce,Dt);Dt=Dt.sibling}Te.type===U?(_e=Jl(Te.props.children,Ce.mode,Ye,Te.key),_e.return=Ce,Ce=_e):(Ye=Gd(Te.type,Te.key,Te.props,null,Ce.mode,Ye),Ye.ref=qt(Ce,_e,Te),Ye.return=Ce,Ce=Ye)}return M(Ce);case me:e:{for(Dt=Te.key;_e!==null;){if(_e.key===Dt)if(_e.tag===4&&_e.stateNode.containerInfo===Te.containerInfo&&_e.stateNode.implementation===Te.implementation){c(Ce,_e.sibling),_e=b(_e,Te.children||[]),_e.return=Ce,Ce=_e;break e}else{c(Ce,_e);break}else a(Ce,_e);_e=_e.sibling}_e=If(Te,Ce.mode,Ye),_e.return=Ce,Ce=_e}return M(Ce);case he:return Dt=Te._init,Cn(Ce,_e,Dt(Te._payload),Ye)}if(wt(Te))return vt(Ce,_e,Te,Ye);if(fe(Te))return xt(Ce,_e,Te,Ye);sr(Ce,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,_e!==null&&_e.tag===6?(c(Ce,_e.sibling),_e=b(_e,Te),_e.return=Ce,Ce=_e):(c(Ce,_e),_e=Of(Te,Ce.mode,Ye),_e.return=Ce,Ce=_e),M(Ce)):c(Ce,_e)}return Cn}var xn=On(!0),Qr=On(!1),jn=wi(null),In=null,Hr=null,lr=null;function gr(){lr=Hr=In=null}function Gr(s){var a=jn.current;kr(jn),s._currentValue=a}function vr(s,a,c){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===c)break;s=s.return}}function on(s,a){In=s,lr=Hr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(oi=!0),s.firstContext=null)}function ln(s){var a=s._currentValue;if(lr!==s)if(s={context:s,memoizedValue:a,next:null},Hr===null){if(In===null)throw Error(t(308));Hr=s,In.dependencies={lanes:0,firstContext:s}}else Hr=Hr.next=s;return a}var Ir=null;function ns(s){Ir===null?Ir=[s]:Ir.push(s)}function Pr(s,a,c,p){var b=a.interleaved;return b===null?(c.next=c,ns(a)):(c.next=b.next,b.next=c),a.interleaved=c,Dr(s,p)}function Dr(s,a){s.lanes|=a;var c=s.alternate;for(c!==null&&(c.lanes|=a),c=s,s=s.return;s!==null;)s.childLanes|=a,c=s.alternate,c!==null&&(c.childLanes|=a),c=s,s=s.return;return c.tag===3?c.stateNode:null}var bn=!1;function Yn(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ts(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function fn(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function mn(s,a,c){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(yr&2)!==0){var b=p.pending;return b===null?a.next=a:(a.next=b.next,b.next=a),p.pending=a,Dr(s,c)}return b=p.interleaved,b===null?(a.next=a,ns(p)):(a.next=b.next,b.next=a),p.interleaved=a,Dr(s,c)}function ss(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,c|=p,a.lanes=c,gi(s,c)}}function Fr(s,a){var c=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var b=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var M={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};N===null?b=N=M:N=N.next=M,c=c.next}while(c!==null);N===null?b=N=a:N=N.next=a}else b=N=a;c={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:p.shared,effects:p.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}function is(s,a,c,p){var b=s.updateQueue;bn=!1;var N=b.firstBaseUpdate,M=b.lastBaseUpdate,oe=b.shared.pending;if(oe!==null){b.shared.pending=null;var ge=oe,Ie=ge.next;ge.next=null,M===null?N=Ie:M.next=Ie,M=ge;var Ve=s.alternate;Ve!==null&&(Ve=Ve.updateQueue,oe=Ve.lastBaseUpdate,oe!==M&&(oe===null?Ve.firstBaseUpdate=Ie:oe.next=Ie,Ve.lastBaseUpdate=ge))}if(N!==null){var Ge=b.baseState;M=0,Ve=Ie=ge=null,oe=N;do{var We=oe.lane,at=oe.eventTime;if((p&We)===We){Ve!==null&&(Ve=Ve.next={eventTime:at,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var vt=s,xt=oe;switch(We=a,at=c,xt.tag){case 1:if(vt=xt.payload,typeof vt=="function"){Ge=vt.call(at,Ge,We);break e}Ge=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=xt.payload,We=typeof vt=="function"?vt.call(at,Ge,We):vt,We==null)break e;Ge=ke({},Ge,We);break e;case 2:bn=!0}}oe.callback!==null&&oe.lane!==0&&(s.flags|=64,We=b.effects,We===null?b.effects=[oe]:We.push(oe))}else at={eventTime:at,lane:We,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Ve===null?(Ie=Ve=at,ge=Ge):Ve=Ve.next=at,M|=We;if(oe=oe.next,oe===null){if(oe=b.shared.pending,oe===null)break;We=oe,oe=We.next,We.next=null,b.lastBaseUpdate=We,b.shared.pending=null}}while(!0);if(Ve===null&&(ge=Ge),b.baseState=ge,b.firstBaseUpdate=Ie,b.lastBaseUpdate=Ve,a=b.shared.interleaved,a!==null){b=a;do M|=b.lane,b=b.next;while(b!==a)}else N===null&&(b.shared.lanes=0);Hl|=M,s.lanes=M,s.memoizedState=Ge}}function ai(s,a,c){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],b=p.callback;if(b!==null){if(p.callback=null,p=c,typeof b!="function")throw Error(t(191,b));b.call(p)}}}var _i={},Dn=wi(_i),pn=wi(_i),Qa=wi(_i);function xa(s){if(s===_i)throw Error(t(174));return s}function sl(s,a){switch(Er(Qa,a),Er(pn,s),Er(Dn,_i),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:rr(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=rr(a,s)}kr(Dn),Er(Dn,a)}function Vi(){kr(Dn),kr(pn),kr(Qa)}function Cd(s){xa(Qa.current);var a=xa(Dn.current),c=rr(a,s.type);a!==c&&(Er(pn,s),Er(Dn,c))}function Fc(s){pn.current===s&&(kr(Dn),kr(pn))}var Br=wi(0);function Ni(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mc=[];function Rc(){for(var s=0;s<Mc.length;s++)Mc[s]._workInProgressVersionPrimary=null;Mc.length=0}var Su=$.ReactCurrentDispatcher,ju=$.ReactCurrentBatchConfig,Hi=0,Yr=null,wn=null,gn=null,il=!1,ba=!1,al=0,sf=0;function An(){throw Error(t(321))}function Au(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!nn(s[c],a[c]))return!1;return!0}function $l(s,a,c,p,b,N){if(Hi=N,Yr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Su.current=s===null||s.memoizedState===null?Dy:Fy,s=c(p,b),ba){N=0;do{if(ba=!1,al=0,25<=N)throw Error(t(301));N+=1,gn=wn=null,a.updateQueue=null,Su.current=My,s=c(p,b)}while(ba)}if(Su.current=Od,a=wn!==null&&wn.next!==null,Hi=0,gn=wn=Yr=null,il=!1,a)throw Error(t(300));return s}function Gi(){var s=al!==0;return al=0,s}function ki(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Yr.memoizedState=gn=s:gn=gn.next=s,gn}function Hs(){if(wn===null){var s=Yr.alternate;s=s!==null?s.memoizedState:null}else s=wn.next;var a=gn===null?Yr.memoizedState:gn.next;if(a!==null)gn=a,wn=s;else{if(s===null)throw Error(t(310));wn=s,s={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},gn===null?Yr.memoizedState=gn=s:gn=gn.next=s}return gn}function Wl(s,a){return typeof a=="function"?a(s):a}function Cu(s){var a=Hs(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var p=wn,b=p.baseQueue,N=c.pending;if(N!==null){if(b!==null){var M=b.next;b.next=N.next,N.next=M}p.baseQueue=b=N,c.pending=null}if(b!==null){N=b.next,p=p.baseState;var oe=M=null,ge=null,Ie=N;do{var Ve=Ie.lane;if((Hi&Ve)===Ve)ge!==null&&(ge=ge.next={lane:0,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),p=Ie.hasEagerState?Ie.eagerState:s(p,Ie.action);else{var Ge={lane:Ve,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null};ge===null?(oe=ge=Ge,M=p):ge=ge.next=Ge,Yr.lanes|=Ve,Hl|=Ve}Ie=Ie.next}while(Ie!==null&&Ie!==N);ge===null?M=p:ge.next=oe,nn(p,a.memoizedState)||(oi=!0),a.memoizedState=p,a.baseState=M,a.baseQueue=ge,c.lastRenderedState=p}if(s=c.interleaved,s!==null){b=s;do N=b.lane,Yr.lanes|=N,Hl|=N,b=b.next;while(b!==s)}else b===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function eo(s){var a=Hs(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var p=c.dispatch,b=c.pending,N=a.memoizedState;if(b!==null){c.pending=null;var M=b=b.next;do N=s(N,M.action),M=M.next;while(M!==b);nn(N,a.memoizedState)||(oi=!0),a.memoizedState=N,a.baseQueue===null&&(a.baseState=N),c.lastRenderedState=N}return[N,p]}function Ed(){}function Uc(s,a){var c=Yr,p=Hs(),b=a(),N=!nn(p.memoizedState,b);if(N&&(p.memoizedState=b,oi=!0),p=p.queue,Lu(Ld.bind(null,c,p,s),[s]),p.getSnapshot!==a||N||gn!==null&&gn.memoizedState.tag&1){if(c.flags|=2048,Gs(9,Bc.bind(null,c,p,b,a),void 0,null),as===null)throw Error(t(349));(Hi&30)!==0||Pd(c,a,b)}return b}function Pd(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Yr.updateQueue,a===null?(a={lastEffect:null,stores:null},Yr.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function Bc(s,a,c,p){a.value=c,a.getSnapshot=p,ol(a)&&Eu(s)}function Ld(s,a,c){return c(function(){ol(a)&&Eu(s)})}function ol(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!nn(s,c)}catch{return!0}}function Eu(s){var a=Dr(s,1);a!==null&&Sa(a,s,1,-1)}function Vl(s){var a=ki();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:s},a.queue=s,s=s.dispatch=Iy.bind(null,Yr,s),[a.memoizedState,s]}function Gs(s,a,c,p){return s={tag:s,create:a,destroy:c,deps:p,next:null},a=Yr.updateQueue,a===null?(a={lastEffect:null,stores:null},Yr.updateQueue=a,a.lastEffect=s.next=s):(c=a.lastEffect,c===null?a.lastEffect=s.next=s:(p=c.next,c.next=s,s.next=p,a.lastEffect=s)),s}function wa(){return Hs().memoizedState}function Si(s,a,c,p){var b=ki();Yr.flags|=s,b.memoizedState=Gs(1|a,c,void 0,p===void 0?null:p)}function Lo(s,a,c,p){var b=Hs();p=p===void 0?null:p;var N=void 0;if(wn!==null){var M=wn.memoizedState;if(N=M.destroy,p!==null&&Au(p,M.deps)){b.memoizedState=Gs(a,c,N,p);return}}Yr.flags|=s,b.memoizedState=Gs(1|a,c,N,p)}function Pu(s,a){return Si(8390656,8,s,a)}function Lu(s,a){return Lo(2048,8,s,a)}function Td(s,a){return Lo(4,2,s,a)}function Tu(s,a){return Lo(4,4,s,a)}function Ou(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Im(s,a,c){return c=c!=null?c.concat([s]):null,Lo(4,4,Ou.bind(null,a,s),c)}function af(){}function Dm(s,a){var c=Hs();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&Au(a,p[1])?p[0]:(c.memoizedState=[s,a],s)}function Fm(s,a){var c=Hs();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&Au(a,p[1])?p[0]:(s=s(),c.memoizedState=[s,a],s)}function Mm(s,a,c){return(Hi&21)===0?(s.baseState&&(s.baseState=!1,oi=!0),s.memoizedState=c):(nn(c,a)||(c=Ma(),Yr.lanes|=c,Hl|=c,s.baseState=!0),a)}function Ty(s,a){var c=cr;cr=c!==0&&4>c?c:4,s(!0);var p=ju.transition;ju.transition={};try{s(!1),a()}finally{cr=c,ju.transition=p}}function Rm(){return Hs().memoizedState}function Oy(s,a,c){var p=dl(s);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},Um(s))Bm(a,c);else if(c=Pr(s,a,c,p),c!==null){var b=Ks();Sa(c,s,p,b),qm(c,a,p)}}function Iy(s,a,c){var p=dl(s),b={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(Um(s))Bm(a,b);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=a.lastRenderedReducer,N!==null))try{var M=a.lastRenderedState,oe=N(M,c);if(b.hasEagerState=!0,b.eagerState=oe,nn(oe,M)){var ge=a.interleaved;ge===null?(b.next=b,ns(a)):(b.next=ge.next,ge.next=b),a.interleaved=b;return}}catch{}finally{}c=Pr(s,a,b,p),c!==null&&(b=Ks(),Sa(c,s,p,b),qm(c,a,p))}}function Um(s){var a=s.alternate;return s===Yr||a!==null&&a===Yr}function Bm(s,a){ba=il=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function qm(s,a,c){if((c&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,c|=p,a.lanes=c,gi(s,c)}}var Od={readContext:ln,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},Dy={readContext:ln,useCallback:function(s,a){return ki().memoizedState=[s,a===void 0?null:a],s},useContext:ln,useEffect:Pu,useImperativeHandle:function(s,a,c){return c=c!=null?c.concat([s]):null,Si(4194308,4,Ou.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Si(4194308,4,s,a)},useInsertionEffect:function(s,a){return Si(4,2,s,a)},useMemo:function(s,a){var c=ki();return a=a===void 0?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var p=ki();return a=c!==void 0?c(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=Oy.bind(null,Yr,s),[p.memoizedState,s]},useRef:function(s){var a=ki();return s={current:s},a.memoizedState=s},useState:Vl,useDebugValue:af,useDeferredValue:function(s){return ki().memoizedState=s},useTransition:function(){var s=Vl(!1),a=s[0];return s=Ty.bind(null,s[1]),ki().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var p=Yr,b=ki();if(Re){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),as===null)throw Error(t(349));(Hi&30)!==0||Pd(p,a,c)}b.memoizedState=c;var N={value:c,getSnapshot:a};return b.queue=N,Pu(Ld.bind(null,p,N,s),[s]),p.flags|=2048,Gs(9,Bc.bind(null,p,N,c,a),void 0,null),c},useId:function(){var s=ki(),a=as.identifierPrefix;if(Re){var c=re,p=je;c=(p&~(1<<32-Zr(p)-1)).toString(32)+c,a=":"+a+"R"+c,c=al++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=sf++,a=":"+a+"r"+c.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},Fy={readContext:ln,useCallback:Dm,useContext:ln,useEffect:Lu,useImperativeHandle:Im,useInsertionEffect:Td,useLayoutEffect:Tu,useMemo:Fm,useReducer:Cu,useRef:wa,useState:function(){return Cu(Wl)},useDebugValue:af,useDeferredValue:function(s){var a=Hs();return Mm(a,wn.memoizedState,s)},useTransition:function(){var s=Cu(Wl)[0],a=Hs().memoizedState;return[s,a]},useMutableSource:Ed,useSyncExternalStore:Uc,useId:Rm,unstable_isNewReconciler:!1},My={readContext:ln,useCallback:Dm,useContext:ln,useEffect:Lu,useImperativeHandle:Im,useInsertionEffect:Td,useLayoutEffect:Tu,useMemo:Fm,useReducer:eo,useRef:wa,useState:function(){return eo(Wl)},useDebugValue:af,useDeferredValue:function(s){var a=Hs();return wn===null?a.memoizedState=s:Mm(a,wn.memoizedState,s)},useTransition:function(){var s=eo(Wl)[0],a=Hs().memoizedState;return[s,a]},useMutableSource:Ed,useSyncExternalStore:Uc,useId:Rm,unstable_isNewReconciler:!1};function _a(s,a){if(s&&s.defaultProps){a=ke({},a),s=s.defaultProps;for(var c in s)a[c]===void 0&&(a[c]=s[c]);return a}return a}function of(s,a,c,p){a=s.memoizedState,c=c(p,a),c=c==null?a:ke({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Id={isMounted:function(s){return(s=s._reactInternals)?vn(s)===s:!1},enqueueSetState:function(s,a,c){s=s._reactInternals;var p=Ks(),b=dl(s),N=fn(p,b);N.payload=a,c!=null&&(N.callback=c),a=mn(s,N,b),a!==null&&(Sa(a,s,b,p),ss(a,s,b))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var p=Ks(),b=dl(s),N=fn(p,b);N.tag=1,N.payload=a,c!=null&&(N.callback=c),a=mn(s,N,b),a!==null&&(Sa(a,s,b,p),ss(a,s,b))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Ks(),p=dl(s),b=fn(c,p);b.tag=2,a!=null&&(b.callback=a),a=mn(s,b,p),a!==null&&(Sa(a,s,p,c),ss(a,s,p))}};function zm(s,a,c,p,b,N,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,N,M):a.prototype&&a.prototype.isPureReactComponent?!As(c,p)||!As(b,N):!0}function $m(s,a,c){var p=!1,b=Xa,N=a.contextType;return typeof N=="object"&&N!==null?N=ln(N):(b=Ls(a)?Eo:Gn.current,p=a.contextTypes,N=(p=p!=null)?nl(s,b):Xa),a=new a(c,N),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Id,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=b,s.__reactInternalMemoizedMaskedChildContext=N),a}function Wm(s,a,c,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==s&&Id.enqueueReplaceState(a,a.state,null)}function lf(s,a,c,p){var b=s.stateNode;b.props=c,b.state=s.memoizedState,b.refs={},Yn(s);var N=a.contextType;typeof N=="object"&&N!==null?b.context=ln(N):(N=Ls(a)?Eo:Gn.current,b.context=nl(s,N)),b.state=s.memoizedState,N=a.getDerivedStateFromProps,typeof N=="function"&&(of(s,a,N,c),b.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(a=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),a!==b.state&&Id.enqueueReplaceState(b,b.state,null),is(s,c,b,p),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308)}function Iu(s,a){try{var c="",p=a;do c+=ie(p),p=p.return;while(p);var b=c}catch(N){b=`
Error generating stack: `+N.message+`
`+N.stack}return{value:s,source:a,stack:b,digest:null}}function uf(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}function cf(s,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var Ry=typeof WeakMap=="function"?WeakMap:Map;function Vm(s,a,c){c=fn(-1,c),c.tag=3,c.payload={element:null};var p=a.value;return c.callback=function(){qd||(qd=!0,Sf=p),cf(s,a)},c}function Hm(s,a,c){c=fn(-1,c),c.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var b=a.value;c.payload=function(){return p(b)},c.callback=function(){cf(s,a)}}var N=s.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(c.callback=function(){cf(s,a),typeof p!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var M=a.stack;this.componentDidCatch(a.value,{componentStack:M!==null?M:""})}),c}function Gm(s,a,c){var p=s.pingCache;if(p===null){p=s.pingCache=new Ry;var b=new Set;p.set(a,b)}else b=p.get(a),b===void 0&&(b=new Set,p.set(a,b));b.has(c)||(b.add(c),s=Xy.bind(null,s,a,c),a.then(s,s))}function Ym(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Km(s,a,c,p,b){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=fn(-1,1),a.tag=2,mn(c,a,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=b,s)}var Uy=$.ReactCurrentOwner,oi=!1;function Ys(s,a,c,p){a.child=s===null?Qr(a,null,c,p):xn(a,s.child,c,p)}function Jm(s,a,c,p,b){c=c.render;var N=a.ref;return on(a,b),p=$l(s,a,c,p,N,b),c=Gi(),s!==null&&!oi?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~b,To(s,a,b)):(Re&&c&&Me(a),a.flags|=1,Ys(s,a,p,b),a.child)}function Zm(s,a,c,p,b){if(s===null){var N=c.type;return typeof N=="function"&&!Tf(N)&&N.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=N,Xm(s,a,N,p,b)):(s=Gd(c.type,null,p,a,a.mode,b),s.ref=a.ref,s.return=a,a.child=s)}if(N=s.child,(s.lanes&b)===0){var M=N.memoizedProps;if(c=c.compare,c=c!==null?c:As,c(M,p)&&s.ref===a.ref)return To(s,a,b)}return a.flags|=1,s=fl(N,p),s.ref=a.ref,s.return=a,a.child=s}function Xm(s,a,c,p,b){if(s!==null){var N=s.memoizedProps;if(As(N,p)&&s.ref===a.ref)if(oi=!1,a.pendingProps=p=N,(s.lanes&b)!==0)(s.flags&131072)!==0&&(oi=!0);else return a.lanes=s.lanes,To(s,a,b)}return df(s,a,c,p,b)}function Qm(s,a,c){var p=a.pendingProps,b=p.children,N=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Fu,ji),ji|=c;else{if((c&1073741824)===0)return s=N!==null?N.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Er(Fu,ji),ji|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=N!==null?N.baseLanes:c,Er(Fu,ji),ji|=p}else N!==null?(p=N.baseLanes|c,a.memoizedState=null):p=c,Er(Fu,ji),ji|=p;return Ys(s,a,b,c),a.child}function ep(s,a){var c=a.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function df(s,a,c,p,b){var N=Ls(c)?Eo:Gn.current;return N=nl(a,N),on(a,b),c=$l(s,a,c,p,N,b),p=Gi(),s!==null&&!oi?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~b,To(s,a,b)):(Re&&p&&Me(a),a.flags|=1,Ys(s,a,c,b),a.child)}function tp(s,a,c,p,b){if(Ls(c)){var N=!0;Po(a)}else N=!1;if(on(a,b),a.stateNode===null)Fd(s,a),$m(a,c,p),lf(a,c,p,b),p=!0;else if(s===null){var M=a.stateNode,oe=a.memoizedProps;M.props=oe;var ge=M.context,Ie=c.contextType;typeof Ie=="object"&&Ie!==null?Ie=ln(Ie):(Ie=Ls(c)?Eo:Gn.current,Ie=nl(a,Ie));var Ve=c.getDerivedStateFromProps,Ge=typeof Ve=="function"||typeof M.getSnapshotBeforeUpdate=="function";Ge||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(oe!==p||ge!==Ie)&&Wm(a,M,p,Ie),bn=!1;var We=a.memoizedState;M.state=We,is(a,p,M,b),ge=a.memoizedState,oe!==p||We!==ge||Ps.current||bn?(typeof Ve=="function"&&(of(a,c,Ve,p),ge=a.memoizedState),(oe=bn||zm(a,c,oe,p,We,ge,Ie))?(Ge||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(a.flags|=4194308)):(typeof M.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=ge),M.props=p,M.state=ge,M.context=Ie,p=oe):(typeof M.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{M=a.stateNode,Ts(s,a),oe=a.memoizedProps,Ie=a.type===a.elementType?oe:_a(a.type,oe),M.props=Ie,Ge=a.pendingProps,We=M.context,ge=c.contextType,typeof ge=="object"&&ge!==null?ge=ln(ge):(ge=Ls(c)?Eo:Gn.current,ge=nl(a,ge));var at=c.getDerivedStateFromProps;(Ve=typeof at=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(oe!==Ge||We!==ge)&&Wm(a,M,p,ge),bn=!1,We=a.memoizedState,M.state=We,is(a,p,M,b);var vt=a.memoizedState;oe!==Ge||We!==vt||Ps.current||bn?(typeof at=="function"&&(of(a,c,at,p),vt=a.memoizedState),(Ie=bn||zm(a,c,Ie,p,We,vt,ge)||!1)?(Ve||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(p,vt,ge),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(p,vt,ge)),typeof M.componentDidUpdate=="function"&&(a.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof M.componentDidUpdate!="function"||oe===s.memoizedProps&&We===s.memoizedState||(a.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||oe===s.memoizedProps&&We===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=vt),M.props=p,M.state=vt,M.context=ge,p=Ie):(typeof M.componentDidUpdate!="function"||oe===s.memoizedProps&&We===s.memoizedState||(a.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||oe===s.memoizedProps&&We===s.memoizedState||(a.flags|=1024),p=!1)}return hf(s,a,c,p,N,b)}function hf(s,a,c,p,b,N){ep(s,a);var M=(a.flags&128)!==0;if(!p&&!M)return b&&Ad(a,c,!1),To(s,a,N);p=a.stateNode,Uy.current=a;var oe=M&&typeof c.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&M?(a.child=xn(a,s.child,null,N),a.child=xn(a,null,oe,N)):Ys(s,a,oe,N),a.memoizedState=p.state,b&&Ad(a,c,!0),a.child}function rp(s){var a=s.stateNode;a.pendingContext?jd(s,a.pendingContext,a.pendingContext!==a.context):a.context&&jd(s,a.context,!1),sl(s,a.containerInfo)}function np(s,a,c,p,b){return ct(),Ze(b),a.flags|=256,Ys(s,a,c,p),a.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function mf(s){return{baseLanes:s,cachePool:null,transitions:null}}function sp(s,a,c){var p=a.pendingProps,b=Br.current,N=!1,M=(a.flags&128)!==0,oe;if((oe=M)||(oe=s!==null&&s.memoizedState===null?!1:(b&2)!==0),oe?(N=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(b|=1),Er(Br,b&1),s===null)return mt(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(M=p.children,s=p.fallback,N?(p=a.mode,N=a.child,M={mode:"hidden",children:M},(p&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=M):N=Yd(M,p,0,null),s=Jl(s,p,c,null),N.return=a,s.return=a,N.sibling=s,a.child=N,a.child.memoizedState=mf(c),a.memoizedState=ff,s):pf(a,M));if(b=s.memoizedState,b!==null&&(oe=b.dehydrated,oe!==null))return By(s,a,M,p,oe,b,c);if(N){N=p.fallback,M=a.mode,b=s.child,oe=b.sibling;var ge={mode:"hidden",children:p.children};return(M&1)===0&&a.child!==b?(p=a.child,p.childLanes=0,p.pendingProps=ge,a.deletions=null):(p=fl(b,ge),p.subtreeFlags=b.subtreeFlags&14680064),oe!==null?N=fl(oe,N):(N=Jl(N,M,c,null),N.flags|=2),N.return=a,p.return=a,p.sibling=N,a.child=p,p=N,N=a.child,M=s.child.memoizedState,M=M===null?mf(c):{baseLanes:M.baseLanes|c,cachePool:null,transitions:M.transitions},N.memoizedState=M,N.childLanes=s.childLanes&~c,a.memoizedState=ff,p}return N=s.child,s=N.sibling,p=fl(N,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=c),p.return=a,p.sibling=null,s!==null&&(c=a.deletions,c===null?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=p,a.memoizedState=null,p}function pf(s,a){return a=Yd({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Dd(s,a,c,p){return p!==null&&Ze(p),xn(a,s.child,null,c),s=pf(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function By(s,a,c,p,b,N,M){if(c)return a.flags&256?(a.flags&=-257,p=uf(Error(t(422))),Dd(s,a,M,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(N=p.fallback,b=a.mode,p=Yd({mode:"visible",children:p.children},b,0,null),N=Jl(N,b,M,null),N.flags|=2,p.return=a,N.return=a,p.sibling=N,a.child=p,(a.mode&1)!==0&&xn(a,s.child,null,M),a.child.memoizedState=mf(M),a.memoizedState=ff,N);if((a.mode&1)===0)return Dd(s,a,M,null);if(b.data==="$!"){if(p=b.nextSibling&&b.nextSibling.dataset,p)var oe=p.dgst;return p=oe,N=Error(t(419)),p=uf(N,p,void 0),Dd(s,a,M,p)}if(oe=(M&s.childLanes)!==0,oi||oe){if(p=as,p!==null){switch(M&-M){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(p.suspendedLanes|M))!==0?0:b,b!==0&&b!==N.retryLane&&(N.retryLane=b,Dr(s,b),Sa(p,s,b,-1))}return Lf(),p=uf(Error(t(421))),Dd(s,a,M,p)}return b.data==="$?"?(a.flags|=128,a.child=s.child,a=Qy.bind(null,s),b._reactRetry=a,null):(s=N.treeContext,Fe=ys(b.nextSibling),De=a,Re=!0,qe=null,s!==null&&(G[te++]=je,G[te++]=re,G[te++]=pe,je=s.id,re=s.overflow,pe=a),a=pf(a,p.children),a.flags|=4096,a)}function ip(s,a,c){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),vr(s.return,a,c)}function gf(s,a,c,p,b){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:b}:(N.isBackwards=a,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=c,N.tailMode=b)}function ap(s,a,c){var p=a.pendingProps,b=p.revealOrder,N=p.tail;if(Ys(s,a,p.children,c),p=Br.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ip(s,c,a);else if(s.tag===19)ip(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(Er(Br,p),(a.mode&1)===0)a.memoizedState=null;else switch(b){case"forwards":for(c=a.child,b=null;c!==null;)s=c.alternate,s!==null&&Ni(s)===null&&(b=c),c=c.sibling;c=b,c===null?(b=a.child,a.child=null):(b=c.sibling,c.sibling=null),gf(a,!1,b,c,N);break;case"backwards":for(c=null,b=a.child,a.child=null;b!==null;){if(s=b.alternate,s!==null&&Ni(s)===null){a.child=b;break}s=b.sibling,b.sibling=c,c=b,b=s}gf(a,!0,c,null,N);break;case"together":gf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Fd(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function To(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Hl|=a.lanes,(c&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,c=fl(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=fl(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function qy(s,a,c){switch(a.tag){case 3:rp(a),ct();break;case 5:Cd(a);break;case 1:Ls(a.type)&&Po(a);break;case 4:sl(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,b=a.memoizedProps.value;Er(jn,p._currentValue),p._currentValue=b;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Er(Br,Br.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?sp(s,a,c):(Er(Br,Br.current&1),s=To(s,a,c),s!==null?s.sibling:null);Er(Br,Br.current&1);break;case 19:if(p=(c&a.childLanes)!==0,(s.flags&128)!==0){if(p)return ap(s,a,c);a.flags|=128}if(b=a.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Er(Br,Br.current),p)break;return null;case 22:case 23:return a.lanes=0,Qm(s,a,c)}return To(s,a,c)}var op,vf,lp,up;op=function(s,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},vf=function(){},lp=function(s,a,c,p){var b=s.memoizedProps;if(b!==p){s=a.stateNode,xa(Dn.current);var N=null;switch(c){case"input":b=dt(s,b),p=dt(s,p),N=[];break;case"select":b=ke({},b,{value:void 0}),p=ke({},p,{value:void 0}),N=[];break;case"textarea":b=ot(s,b),p=ot(s,p),N=[];break;default:typeof b.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=el)}Nr(c,p);var M;c=null;for(Ie in b)if(!p.hasOwnProperty(Ie)&&b.hasOwnProperty(Ie)&&b[Ie]!=null)if(Ie==="style"){var oe=b[Ie];for(M in oe)oe.hasOwnProperty(M)&&(c||(c={}),c[M]="")}else Ie!=="dangerouslySetInnerHTML"&&Ie!=="children"&&Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&Ie!=="autoFocus"&&(i.hasOwnProperty(Ie)?N||(N=[]):(N=N||[]).push(Ie,null));for(Ie in p){var ge=p[Ie];if(oe=b?.[Ie],p.hasOwnProperty(Ie)&&ge!==oe&&(ge!=null||oe!=null))if(Ie==="style")if(oe){for(M in oe)!oe.hasOwnProperty(M)||ge&&ge.hasOwnProperty(M)||(c||(c={}),c[M]="");for(M in ge)ge.hasOwnProperty(M)&&oe[M]!==ge[M]&&(c||(c={}),c[M]=ge[M])}else c||(N||(N=[]),N.push(Ie,c)),c=ge;else Ie==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,oe=oe?oe.__html:void 0,ge!=null&&oe!==ge&&(N=N||[]).push(Ie,ge)):Ie==="children"?typeof ge!="string"&&typeof ge!="number"||(N=N||[]).push(Ie,""+ge):Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ie)?(ge!=null&&Ie==="onScroll"&&Or("scroll",s),N||oe===ge||(N=[])):(N=N||[]).push(Ie,ge))}c&&(N=N||[]).push("style",c);var Ie=N;(a.updateQueue=Ie)&&(a.flags|=4)}},up=function(s,a,c,p){c!==p&&(a.flags|=4)};function qc(s,a){if(!Re)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Os(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,p=0;if(a)for(var b=s.child;b!==null;)c|=b.lanes|b.childLanes,p|=b.subtreeFlags&14680064,p|=b.flags&14680064,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)c|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=p,s.childLanes=c,a}function zy(s,a,c){var p=a.pendingProps;switch(Ee(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Os(a),null;case 1:return Ls(a.type)&&ku(),Os(a),null;case 3:return p=a.stateNode,Vi(),kr(Ps),kr(Gn),Rc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(an(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qe!==null&&(Cf(qe),qe=null))),vf(s,a),Os(a),null;case 5:Fc(a);var b=xa(Qa.current);if(c=a.type,s!==null&&a.stateNode!=null)lp(s,a,c,p,b),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Os(a),null}if(s=xa(Dn.current),an(a)){p=a.stateNode,c=a.type;var N=a.memoizedProps;switch(p[Wi]=a,p[tl]=N,s=(a.mode&1)!==0,c){case"dialog":Or("cancel",p),Or("close",p);break;case"iframe":case"object":case"embed":Or("load",p);break;case"video":case"audio":for(b=0;b<Ja.length;b++)Or(Ja[b],p);break;case"source":Or("error",p);break;case"img":case"image":case"link":Or("error",p),Or("load",p);break;case"details":Or("toggle",p);break;case"input":X(p,N),Or("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!N.multiple},Or("invalid",p);break;case"textarea":tt(p,N),Or("invalid",p)}Nr(c,N),b=null;for(var M in N)if(N.hasOwnProperty(M)){var oe=N[M];M==="children"?typeof oe=="string"?p.textContent!==oe&&(N.suppressHydrationWarning!==!0&&Nu(p.textContent,oe,s),b=["children",oe]):typeof oe=="number"&&p.textContent!==""+oe&&(N.suppressHydrationWarning!==!0&&Nu(p.textContent,oe,s),b=["children",""+oe]):i.hasOwnProperty(M)&&oe!=null&&M==="onScroll"&&Or("scroll",p)}switch(c){case"input":ze(p),Ct(p,N,!0);break;case"textarea":ze(p),tr(p);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(p.onclick=el)}p=b,a.updateQueue=p,p!==null&&(a.flags|=4)}else{M=b.nodeType===9?b:b.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Wt(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=M.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=M.createElement(c,{is:p.is}):(s=M.createElement(c),c==="select"&&(M=s,p.multiple?M.multiple=!0:p.size&&(M.size=p.size))):s=M.createElementNS(s,c),s[Wi]=a,s[tl]=p,op(s,a,!1,!1),a.stateNode=s;e:{switch(M=_t(c,p),c){case"dialog":Or("cancel",s),Or("close",s),b=p;break;case"iframe":case"object":case"embed":Or("load",s),b=p;break;case"video":case"audio":for(b=0;b<Ja.length;b++)Or(Ja[b],s);b=p;break;case"source":Or("error",s),b=p;break;case"img":case"image":case"link":Or("error",s),Or("load",s),b=p;break;case"details":Or("toggle",s),b=p;break;case"input":X(s,p),b=dt(s,p),Or("invalid",s);break;case"option":b=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},b=ke({},p,{value:void 0}),Or("invalid",s);break;case"textarea":tt(s,p),b=ot(s,p),Or("invalid",s);break;default:b=p}Nr(c,b),oe=b;for(N in oe)if(oe.hasOwnProperty(N)){var ge=oe[N];N==="style"?kt(s,ge):N==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&ft(s,ge)):N==="children"?typeof ge=="string"?(c!=="textarea"||ge!=="")&&Ot(s,ge):typeof ge=="number"&&Ot(s,""+ge):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(i.hasOwnProperty(N)?ge!=null&&N==="onScroll"&&Or("scroll",s):ge!=null&&B(s,N,ge,M))}switch(c){case"input":ze(s),Ct(s,p,!1);break;case"textarea":ze(s),tr(s);break;case"option":p.value!=null&&s.setAttribute("value",""+ce(p.value));break;case"select":s.multiple=!!p.multiple,N=p.value,N!=null?st(s,!!p.multiple,N,!1):p.defaultValue!=null&&st(s,!!p.multiple,p.defaultValue,!0);break;default:typeof b.onClick=="function"&&(s.onclick=el)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Os(a),null;case 6:if(s&&a.stateNode!=null)up(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(c=xa(Qa.current),xa(Dn.current),an(a)){if(p=a.stateNode,c=a.memoizedProps,p[Wi]=a,(N=p.nodeValue!==c)&&(s=De,s!==null))switch(s.tag){case 3:Nu(p.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Nu(p.nodeValue,c,(s.mode&1)!==0)}N&&(a.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Wi]=a,a.stateNode=p}return Os(a),null;case 13:if(kr(Br),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Re&&Fe!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Xt(),ct(),a.flags|=98560,N=!1;else if(N=an(a),p!==null&&p.dehydrated!==null){if(s===null){if(!N)throw Error(t(318));if(N=a.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[Wi]=a}else ct(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Os(a),N=!1}else qe!==null&&(Cf(qe),qe=null),N=!0;if(!N)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Br.current&1)!==0?Kn===0&&(Kn=3):Lf())),a.updateQueue!==null&&(a.flags|=4),Os(a),null);case 4:return Vi(),vf(s,a),s===null&&So(a.stateNode.containerInfo),Os(a),null;case 10:return Gr(a.type._context),Os(a),null;case 17:return Ls(a.type)&&ku(),Os(a),null;case 19:if(kr(Br),N=a.memoizedState,N===null)return Os(a),null;if(p=(a.flags&128)!==0,M=N.rendering,M===null)if(p)qc(N,!1);else{if(Kn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(M=Ni(s),M!==null){for(a.flags|=128,qc(N,!1),p=M.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=c,c=a.child;c!==null;)N=c,s=p,N.flags&=14680066,M=N.alternate,M===null?(N.childLanes=0,N.lanes=s,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=M.childLanes,N.lanes=M.lanes,N.child=M.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=M.memoizedProps,N.memoizedState=M.memoizedState,N.updateQueue=M.updateQueue,N.type=M.type,s=M.dependencies,N.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Er(Br,Br.current&1|2),a.child}s=s.sibling}N.tail!==null&&jr()>Mu&&(a.flags|=128,p=!0,qc(N,!1),a.lanes=4194304)}else{if(!p)if(s=Ni(M),s!==null){if(a.flags|=128,p=!0,c=s.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),qc(N,!0),N.tail===null&&N.tailMode==="hidden"&&!M.alternate&&!Re)return Os(a),null}else 2*jr()-N.renderingStartTime>Mu&&c!==1073741824&&(a.flags|=128,p=!0,qc(N,!1),a.lanes=4194304);N.isBackwards?(M.sibling=a.child,a.child=M):(c=N.last,c!==null?c.sibling=M:a.child=M,N.last=M)}return N.tail!==null?(a=N.tail,N.rendering=a,N.tail=a.sibling,N.renderingStartTime=jr(),a.sibling=null,c=Br.current,Er(Br,p?c&1|2:c&1),a):(Os(a),null);case 22:case 23:return Pf(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(ji&1073741824)!==0&&(Os(a),a.subtreeFlags&6&&(a.flags|=8192)):Os(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function $y(s,a){switch(Ee(a),a.tag){case 1:return Ls(a.type)&&ku(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Vi(),kr(Ps),kr(Gn),Rc(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Fc(a),null;case 13:if(kr(Br),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ct()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return kr(Br),null;case 4:return Vi(),null;case 10:return Gr(a.type._context),null;case 22:case 23:return Pf(),null;case 24:return null;default:return null}}var Md=!1,Is=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Du(s,a){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){_n(s,a,p)}else c.current=null}function yf(s,a,c){try{c()}catch(p){_n(s,a,p)}}var cp=!1;function Vy(s,a){if(Bl=vi,s=yn(),bi(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var b=p.anchorOffset,N=p.focusNode;p=p.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var M=0,oe=-1,ge=-1,Ie=0,Ve=0,Ge=s,We=null;t:for(;;){for(var at;Ge!==c||b!==0&&Ge.nodeType!==3||(oe=M+b),Ge!==N||p!==0&&Ge.nodeType!==3||(ge=M+p),Ge.nodeType===3&&(M+=Ge.nodeValue.length),(at=Ge.firstChild)!==null;)We=Ge,Ge=at;for(;;){if(Ge===s)break t;if(We===c&&++Ie===b&&(oe=M),We===N&&++Ve===p&&(ge=M),(at=Ge.nextSibling)!==null)break;Ge=We,We=Ge.parentNode}Ge=at}c=oe===-1||ge===-1?null:{start:oe,end:ge}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ao={focusedElem:s,selectionRange:c},vi=!1,ht=a;ht!==null;)if(a=ht,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ht=s;else for(;ht!==null;){a=ht;try{var vt=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var xt=vt.memoizedProps,Cn=vt.memoizedState,Ce=a.stateNode,_e=Ce.getSnapshotBeforeUpdate(a.elementType===a.type?xt:_a(a.type,xt),Cn);Ce.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Te=a.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ye){_n(a,a.return,Ye)}if(s=a.sibling,s!==null){s.return=a.return,ht=s;break}ht=a.return}return vt=cp,cp=!1,vt}function zc(s,a,c){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&s)===s){var N=b.destroy;b.destroy=void 0,N!==void 0&&yf(a,c,N)}b=b.next}while(b!==p)}}function Rd(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&s)===s){var p=c.create;c.destroy=p()}c=c.next}while(c!==a)}}function xf(s){var a=s.ref;if(a!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof a=="function"?a(s):a.current=s}}function dp(s){var a=s.alternate;a!==null&&(s.alternate=null,dp(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Wi],delete a[tl],delete a[Es],delete a[rf],delete a[nf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function hp(s){return s.tag===5||s.tag===3||s.tag===4}function fp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||hp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function bf(s,a,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(s,c)):(a=c,a.appendChild(s)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=el));else if(p!==4&&(s=s.child,s!==null))for(bf(s,a,c),s=s.sibling;s!==null;)bf(s,a,c),s=s.sibling}function wf(s,a,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(wf(s,a,c),s=s.sibling;s!==null;)wf(s,a,c),s=s.sibling}var xs=null,Na=!1;function ll(s,a,c){for(c=c.child;c!==null;)mp(s,a,c),c=c.sibling}function mp(s,a,c){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(Di,c)}catch{}switch(c.tag){case 5:Is||Du(c,a);case 6:var p=xs,b=Na;xs=null,ll(s,a,c),xs=p,Na=b,xs!==null&&(Na?(s=xs,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):xs.removeChild(c.stateNode));break;case 18:xs!==null&&(Na?(s=xs,c=c.stateNode,s.nodeType===8?Oc(s.parentNode,c):s.nodeType===1&&Oc(s,c),ua(s)):Oc(xs,c.stateNode));break;case 4:p=xs,b=Na,xs=c.stateNode.containerInfo,Na=!0,ll(s,a,c),xs=p,Na=b;break;case 0:case 11:case 14:case 15:if(!Is&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){b=p=p.next;do{var N=b,M=N.destroy;N=N.tag,M!==void 0&&((N&2)!==0||(N&4)!==0)&&yf(c,a,M),b=b.next}while(b!==p)}ll(s,a,c);break;case 1:if(!Is&&(Du(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(oe){_n(c,a,oe)}ll(s,a,c);break;case 21:ll(s,a,c);break;case 22:c.mode&1?(Is=(p=Is)||c.memoizedState!==null,ll(s,a,c),Is=p):ll(s,a,c);break;default:ll(s,a,c)}}function pp(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new Wy),a.forEach(function(p){var b=ex.bind(null,s,p);c.has(p)||(c.add(p),p.then(b,b))})}}function ka(s,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var b=c[p];try{var N=s,M=a,oe=M;e:for(;oe!==null;){switch(oe.tag){case 5:xs=oe.stateNode,Na=!1;break e;case 3:xs=oe.stateNode.containerInfo,Na=!0;break e;case 4:xs=oe.stateNode.containerInfo,Na=!0;break e}oe=oe.return}if(xs===null)throw Error(t(160));mp(N,M,b),xs=null,Na=!1;var ge=b.alternate;ge!==null&&(ge.return=null),b.return=null}catch(Ie){_n(b,a,Ie)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)gp(a,s),a=a.sibling}function gp(s,a){var c=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ka(a,s),to(s),p&4){try{zc(3,s,s.return),Rd(3,s)}catch(xt){_n(s,s.return,xt)}try{zc(5,s,s.return)}catch(xt){_n(s,s.return,xt)}}break;case 1:ka(a,s),to(s),p&512&&c!==null&&Du(c,c.return);break;case 5:if(ka(a,s),to(s),p&512&&c!==null&&Du(c,c.return),s.flags&32){var b=s.stateNode;try{Ot(b,"")}catch(xt){_n(s,s.return,xt)}}if(p&4&&(b=s.stateNode,b!=null)){var N=s.memoizedProps,M=c!==null?c.memoizedProps:N,oe=s.type,ge=s.updateQueue;if(s.updateQueue=null,ge!==null)try{oe==="input"&&N.type==="radio"&&N.name!=null&&Qe(b,N),_t(oe,M);var Ie=_t(oe,N);for(M=0;M<ge.length;M+=2){var Ve=ge[M],Ge=ge[M+1];Ve==="style"?kt(b,Ge):Ve==="dangerouslySetInnerHTML"?ft(b,Ge):Ve==="children"?Ot(b,Ge):B(b,Ve,Ge,Ie)}switch(oe){case"input":Yt(b,N);break;case"textarea":hr(b,N);break;case"select":var We=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!N.multiple;var at=N.value;at!=null?st(b,!!N.multiple,at,!1):We!==!!N.multiple&&(N.defaultValue!=null?st(b,!!N.multiple,N.defaultValue,!0):st(b,!!N.multiple,N.multiple?[]:"",!1))}b[tl]=N}catch(xt){_n(s,s.return,xt)}}break;case 6:if(ka(a,s),to(s),p&4){if(s.stateNode===null)throw Error(t(162));b=s.stateNode,N=s.memoizedProps;try{b.nodeValue=N}catch(xt){_n(s,s.return,xt)}}break;case 3:if(ka(a,s),to(s),p&4&&c!==null&&c.memoizedState.isDehydrated)try{ua(a.containerInfo)}catch(xt){_n(s,s.return,xt)}break;case 4:ka(a,s),to(s);break;case 13:ka(a,s),to(s),b=s.child,b.flags&8192&&(N=b.memoizedState!==null,b.stateNode.isHidden=N,!N||b.alternate!==null&&b.alternate.memoizedState!==null||(kf=jr())),p&4&&pp(s);break;case 22:if(Ve=c!==null&&c.memoizedState!==null,s.mode&1?(Is=(Ie=Is)||Ve,ka(a,s),Is=Ie):ka(a,s),to(s),p&8192){if(Ie=s.memoizedState!==null,(s.stateNode.isHidden=Ie)&&!Ve&&(s.mode&1)!==0)for(ht=s,Ve=s.child;Ve!==null;){for(Ge=ht=Ve;ht!==null;){switch(We=ht,at=We.child,We.tag){case 0:case 11:case 14:case 15:zc(4,We,We.return);break;case 1:Du(We,We.return);var vt=We.stateNode;if(typeof vt.componentWillUnmount=="function"){p=We,c=We.return;try{a=p,vt.props=a.memoizedProps,vt.state=a.memoizedState,vt.componentWillUnmount()}catch(xt){_n(p,c,xt)}}break;case 5:Du(We,We.return);break;case 22:if(We.memoizedState!==null){xp(Ge);continue}}at!==null?(at.return=We,ht=at):xp(Ge)}Ve=Ve.sibling}e:for(Ve=null,Ge=s;;){if(Ge.tag===5){if(Ve===null){Ve=Ge;try{b=Ge.stateNode,Ie?(N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(oe=Ge.stateNode,ge=Ge.memoizedProps.style,M=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,oe.style.display=nr("display",M))}catch(xt){_n(s,s.return,xt)}}}else if(Ge.tag===6){if(Ve===null)try{Ge.stateNode.nodeValue=Ie?"":Ge.memoizedProps}catch(xt){_n(s,s.return,xt)}}else if((Ge.tag!==22&&Ge.tag!==23||Ge.memoizedState===null||Ge===s)&&Ge.child!==null){Ge.child.return=Ge,Ge=Ge.child;continue}if(Ge===s)break e;for(;Ge.sibling===null;){if(Ge.return===null||Ge.return===s)break e;Ve===Ge&&(Ve=null),Ge=Ge.return}Ve===Ge&&(Ve=null),Ge.sibling.return=Ge.return,Ge=Ge.sibling}}break;case 19:ka(a,s),to(s),p&4&&pp(s);break;case 21:break;default:ka(a,s),to(s)}}function to(s){var a=s.flags;if(a&2){try{e:{for(var c=s.return;c!==null;){if(hp(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var b=p.stateNode;p.flags&32&&(Ot(b,""),p.flags&=-33);var N=fp(s);wf(s,N,b);break;case 3:case 4:var M=p.stateNode.containerInfo,oe=fp(s);bf(s,oe,M);break;default:throw Error(t(161))}}catch(ge){_n(s,s.return,ge)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Hy(s,a,c){ht=s,vp(s)}function vp(s,a,c){for(var p=(s.mode&1)!==0;ht!==null;){var b=ht,N=b.child;if(b.tag===22&&p){var M=b.memoizedState!==null||Md;if(!M){var oe=b.alternate,ge=oe!==null&&oe.memoizedState!==null||Is;oe=Md;var Ie=Is;if(Md=M,(Is=ge)&&!Ie)for(ht=b;ht!==null;)M=ht,ge=M.child,M.tag===22&&M.memoizedState!==null?bp(b):ge!==null?(ge.return=M,ht=ge):bp(b);for(;N!==null;)ht=N,vp(N),N=N.sibling;ht=b,Md=oe,Is=Ie}yp(s)}else(b.subtreeFlags&8772)!==0&&N!==null?(N.return=b,ht=N):yp(s)}}function yp(s){for(;ht!==null;){var a=ht;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Is||Rd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Is)if(c===null)p.componentDidMount();else{var b=a.elementType===a.type?c.memoizedProps:_a(a.type,c.memoizedProps);p.componentDidUpdate(b,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var N=a.updateQueue;N!==null&&ai(a,N,p);break;case 3:var M=a.updateQueue;if(M!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}ai(a,M,c)}break;case 5:var oe=a.stateNode;if(c===null&&a.flags&4){c=oe;var ge=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&c.focus();break;case"img":ge.src&&(c.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Ie=a.alternate;if(Ie!==null){var Ve=Ie.memoizedState;if(Ve!==null){var Ge=Ve.dehydrated;Ge!==null&&ua(Ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Is||a.flags&512&&xf(a)}catch(We){_n(a,a.return,We)}}if(a===s){ht=null;break}if(c=a.sibling,c!==null){c.return=a.return,ht=c;break}ht=a.return}}function xp(s){for(;ht!==null;){var a=ht;if(a===s){ht=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ht=c;break}ht=a.return}}function bp(s){for(;ht!==null;){var a=ht;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Rd(4,a)}catch(ge){_n(a,c,ge)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var b=a.return;try{p.componentDidMount()}catch(ge){_n(a,b,ge)}}var N=a.return;try{xf(a)}catch(ge){_n(a,N,ge)}break;case 5:var M=a.return;try{xf(a)}catch(ge){_n(a,M,ge)}}}catch(ge){_n(a,a.return,ge)}if(a===s){ht=null;break}var oe=a.sibling;if(oe!==null){oe.return=a.return,ht=oe;break}ht=a.return}}var Gy=Math.ceil,Ud=$.ReactCurrentDispatcher,_f=$.ReactCurrentOwner,Yi=$.ReactCurrentBatchConfig,yr=0,as=null,Fn=null,bs=0,ji=0,Fu=wi(0),Kn=0,$c=null,Hl=0,Bd=0,Nf=0,Wc=null,li=null,kf=0,Mu=1/0,Oo=null,qd=!1,Sf=null,ul=null,zd=!1,cl=null,$d=0,Vc=0,jf=null,Wd=-1,Vd=0;function Ks(){return(yr&6)!==0?jr():Wd!==-1?Wd:Wd=jr()}function dl(s){return(s.mode&1)===0?1:(yr&2)!==0&&bs!==0?bs&-bs:hn.transition!==null?(Vd===0&&(Vd=Ma()),Vd):(s=cr,s!==0||(s=window.event,s=s===void 0?16:js(s.type)),s)}function Sa(s,a,c,p){if(50<Vc)throw Vc=0,jf=null,Error(t(185));ia(s,c,p),((yr&2)===0||s!==as)&&(s===as&&((yr&2)===0&&(Bd|=c),Kn===4&&hl(s,bs)),ui(s,p),c===1&&yr===0&&(a.mode&1)===0&&(Mu=jr()+500,zl&&S()))}function ui(s,a){var c=s.callbackNode;Xr(s,a);var p=Fi(s,s===as?bs:0);if(p===0)c!==null&&Ii(c),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(c!=null&&Ii(c),a===1)s.tag===0?_(_p.bind(null,s)):g(_p.bind(null,s)),ef(function(){(yr&6)===0&&S()}),c=null;else{switch(aa(p)){case 1:c=ra;break;case 4:c=Qn;break;case 16:c=zs;break;case 536870912:c=Fa;break;default:c=zs}c=Pp(c,wp.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function wp(s,a){if(Wd=-1,Vd=0,(yr&6)!==0)throw Error(t(327));var c=s.callbackNode;if(Ru()&&s.callbackNode!==c)return null;var p=Fi(s,s===as?bs:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=Hd(s,p);else{a=p;var b=yr;yr|=2;var N=kp();(as!==s||bs!==a)&&(Oo=null,Mu=jr()+500,Yl(s,a));do try{Jy();break}catch(oe){Np(s,oe)}while(!0);gr(),Ud.current=N,yr=b,Fn!==null?a=0:(as=null,bs=0,a=Kn)}if(a!==0){if(a===2&&(b=Ns(s),b!==0&&(p=b,a=Af(s,b))),a===1)throw c=$c,Yl(s,0),hl(s,p),ui(s,jr()),c;if(a===6)hl(s,p);else{if(b=s.current.alternate,(p&30)===0&&!Yy(b)&&(a=Hd(s,p),a===2&&(N=Ns(s),N!==0&&(p=N,a=Af(s,N))),a===1))throw c=$c,Yl(s,0),hl(s,p),ui(s,jr()),c;switch(s.finishedWork=b,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Kl(s,li,Oo);break;case 3:if(hl(s,p),(p&130023424)===p&&(a=kf+500-jr(),10<a)){if(Fi(s,0)!==0)break;if(b=s.suspendedLanes,(b&p)!==p){Ks(),s.pingedLanes|=s.suspendedLanes&b;break}s.timeoutHandle=Tc(Kl.bind(null,s,li,Oo),a);break}Kl(s,li,Oo);break;case 4:if(hl(s,p),(p&4194240)===p)break;for(a=s.eventTimes,b=-1;0<p;){var M=31-Zr(p);N=1<<M,M=a[M],M>b&&(b=M),p&=~N}if(p=b,p=jr()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Gy(p/1960))-p,10<p){s.timeoutHandle=Tc(Kl.bind(null,s,li,Oo),p);break}Kl(s,li,Oo);break;case 5:Kl(s,li,Oo);break;default:throw Error(t(329))}}}return ui(s,jr()),s.callbackNode===c?wp.bind(null,s):null}function Af(s,a){var c=Wc;return s.current.memoizedState.isDehydrated&&(Yl(s,a).flags|=256),s=Hd(s,a),s!==2&&(a=li,li=c,a!==null&&Cf(a)),s}function Cf(s){li===null?li=s:li.push.apply(li,s)}function Yy(s){for(var a=s;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var b=c[p],N=b.getSnapshot;b=b.value;try{if(!nn(N(),b))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function hl(s,a){for(a&=~Nf,a&=~Bd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-Zr(a),p=1<<c;s[c]=-1,a&=~p}}function _p(s){if((yr&6)!==0)throw Error(t(327));Ru();var a=Fi(s,0);if((a&1)===0)return ui(s,jr()),null;var c=Hd(s,a);if(s.tag!==0&&c===2){var p=Ns(s);p!==0&&(a=p,c=Af(s,p))}if(c===1)throw c=$c,Yl(s,0),hl(s,a),ui(s,jr()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Kl(s,li,Oo),ui(s,jr()),null}function Ef(s,a){var c=yr;yr|=1;try{return s(a)}finally{yr=c,yr===0&&(Mu=jr()+500,zl&&S())}}function Gl(s){cl!==null&&cl.tag===0&&(yr&6)===0&&Ru();var a=yr;yr|=1;var c=Yi.transition,p=cr;try{if(Yi.transition=null,cr=1,s)return s()}finally{cr=p,Yi.transition=c,yr=a,(yr&6)===0&&S()}}function Pf(){ji=Fu.current,kr(Fu)}function Yl(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,kd(c)),Fn!==null)for(c=Fn.return;c!==null;){var p=c;switch(Ee(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ku();break;case 3:Vi(),kr(Ps),kr(Gn),Rc();break;case 5:Fc(p);break;case 4:Vi();break;case 13:kr(Br);break;case 19:kr(Br);break;case 10:Gr(p.type._context);break;case 22:case 23:Pf()}c=c.return}if(as=s,Fn=s=fl(s.current,null),bs=ji=a,Kn=0,$c=null,Nf=Bd=Hl=0,li=Wc=null,Ir!==null){for(a=0;a<Ir.length;a++)if(c=Ir[a],p=c.interleaved,p!==null){c.interleaved=null;var b=p.next,N=c.pending;if(N!==null){var M=N.next;N.next=b,p.next=M}c.pending=p}Ir=null}return s}function Np(s,a){do{var c=Fn;try{if(gr(),Su.current=Od,il){for(var p=Yr.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}il=!1}if(Hi=0,gn=wn=Yr=null,ba=!1,al=0,_f.current=null,c===null||c.return===null){Kn=1,$c=a,Fn=null;break}e:{var N=s,M=c.return,oe=c,ge=a;if(a=bs,oe.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ie=ge,Ve=oe,Ge=Ve.tag;if((Ve.mode&1)===0&&(Ge===0||Ge===11||Ge===15)){var We=Ve.alternate;We?(Ve.updateQueue=We.updateQueue,Ve.memoizedState=We.memoizedState,Ve.lanes=We.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var at=Ym(M);if(at!==null){at.flags&=-257,Km(at,M,oe,N,a),at.mode&1&&Gm(N,Ie,a),a=at,ge=Ie;var vt=a.updateQueue;if(vt===null){var xt=new Set;xt.add(ge),a.updateQueue=xt}else vt.add(ge);break e}else{if((a&1)===0){Gm(N,Ie,a),Lf();break e}ge=Error(t(426))}}else if(Re&&oe.mode&1){var Cn=Ym(M);if(Cn!==null){(Cn.flags&65536)===0&&(Cn.flags|=256),Km(Cn,M,oe,N,a),Ze(Iu(ge,oe));break e}}N=ge=Iu(ge,oe),Kn!==4&&(Kn=2),Wc===null?Wc=[N]:Wc.push(N),N=M;do{switch(N.tag){case 3:N.flags|=65536,a&=-a,N.lanes|=a;var Ce=Vm(N,ge,a);Fr(N,Ce);break e;case 1:oe=ge;var _e=N.type,Te=N.stateNode;if((N.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(ul===null||!ul.has(Te)))){N.flags|=65536,a&=-a,N.lanes|=a;var Ye=Hm(N,oe,a);Fr(N,Ye);break e}}N=N.return}while(N!==null)}jp(c)}catch(Nt){a=Nt,Fn===c&&c!==null&&(Fn=c=c.return);continue}break}while(!0)}function kp(){var s=Ud.current;return Ud.current=Od,s===null?Od:s}function Lf(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),as===null||(Hl&268435455)===0&&(Bd&268435455)===0||hl(as,bs)}function Hd(s,a){var c=yr;yr|=2;var p=kp();(as!==s||bs!==a)&&(Oo=null,Yl(s,a));do try{Ky();break}catch(b){Np(s,b)}while(!0);if(gr(),yr=c,Ud.current=p,Fn!==null)throw Error(t(261));return as=null,bs=0,Kn}function Ky(){for(;Fn!==null;)Sp(Fn)}function Jy(){for(;Fn!==null&&!pi();)Sp(Fn)}function Sp(s){var a=Ep(s.alternate,s,ji);s.memoizedProps=s.pendingProps,a===null?jp(s):Fn=a,_f.current=null}function jp(s){var a=s;do{var c=a.alternate;if(s=a.return,(a.flags&32768)===0){if(c=zy(c,a,ji),c!==null){Fn=c;return}}else{if(c=$y(c,a),c!==null){c.flags&=32767,Fn=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Kn=6,Fn=null;return}}if(a=a.sibling,a!==null){Fn=a;return}Fn=a=s}while(a!==null);Kn===0&&(Kn=5)}function Kl(s,a,c){var p=cr,b=Yi.transition;try{Yi.transition=null,cr=1,Zy(s,a,c,p)}finally{Yi.transition=b,cr=p}return null}function Zy(s,a,c,p){do Ru();while(cl!==null);if((yr&6)!==0)throw Error(t(327));c=s.finishedWork;var b=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var N=c.lanes|c.childLanes;if(ks(s,N),s===as&&(Fn=as=null,bs=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||zd||(zd=!0,Pp(zs,function(){return Ru(),null})),N=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||N){N=Yi.transition,Yi.transition=null;var M=cr;cr=1;var oe=yr;yr|=4,_f.current=null,Vy(s,c),gp(c,s),Tl(Ao),vi=!!Bl,Ao=Bl=null,s.current=c,Hy(c),oo(),yr=oe,cr=M,Yi.transition=N}else s.current=c;if(zd&&(zd=!1,cl=s,$d=b),N=s.pendingLanes,N===0&&(ul=null),uo(c.stateNode),ui(s,jr()),a!==null)for(p=s.onRecoverableError,c=0;c<a.length;c++)b=a[c],p(b.value,{componentStack:b.stack,digest:b.digest});if(qd)throw qd=!1,s=Sf,Sf=null,s;return($d&1)!==0&&s.tag!==0&&Ru(),N=s.pendingLanes,(N&1)!==0?s===jf?Vc++:(Vc=0,jf=s):Vc=0,S(),null}function Ru(){if(cl!==null){var s=aa($d),a=Yi.transition,c=cr;try{if(Yi.transition=null,cr=16>s?16:s,cl===null)var p=!1;else{if(s=cl,cl=null,$d=0,(yr&6)!==0)throw Error(t(331));var b=yr;for(yr|=4,ht=s.current;ht!==null;){var N=ht,M=N.child;if((ht.flags&16)!==0){var oe=N.deletions;if(oe!==null){for(var ge=0;ge<oe.length;ge++){var Ie=oe[ge];for(ht=Ie;ht!==null;){var Ve=ht;switch(Ve.tag){case 0:case 11:case 15:zc(8,Ve,N)}var Ge=Ve.child;if(Ge!==null)Ge.return=Ve,ht=Ge;else for(;ht!==null;){Ve=ht;var We=Ve.sibling,at=Ve.return;if(dp(Ve),Ve===Ie){ht=null;break}if(We!==null){We.return=at,ht=We;break}ht=at}}}var vt=N.alternate;if(vt!==null){var xt=vt.child;if(xt!==null){vt.child=null;do{var Cn=xt.sibling;xt.sibling=null,xt=Cn}while(xt!==null)}}ht=N}}if((N.subtreeFlags&2064)!==0&&M!==null)M.return=N,ht=M;else e:for(;ht!==null;){if(N=ht,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:zc(9,N,N.return)}var Ce=N.sibling;if(Ce!==null){Ce.return=N.return,ht=Ce;break e}ht=N.return}}var _e=s.current;for(ht=_e;ht!==null;){M=ht;var Te=M.child;if((M.subtreeFlags&2064)!==0&&Te!==null)Te.return=M,ht=Te;else e:for(M=_e;ht!==null;){if(oe=ht,(oe.flags&2048)!==0)try{switch(oe.tag){case 0:case 11:case 15:Rd(9,oe)}}catch(Nt){_n(oe,oe.return,Nt)}if(oe===M){ht=null;break e}var Ye=oe.sibling;if(Ye!==null){Ye.return=oe.return,ht=Ye;break e}ht=oe.return}}if(yr=b,S(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(Di,s)}catch{}p=!0}return p}finally{cr=c,Yi.transition=a}}return!1}function Ap(s,a,c){a=Iu(c,a),a=Vm(s,a,1),s=mn(s,a,1),a=Ks(),s!==null&&(ia(s,1,a),ui(s,a))}function _n(s,a,c){if(s.tag===3)Ap(s,s,c);else for(;a!==null;){if(a.tag===3){Ap(a,s,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ul===null||!ul.has(p))){s=Iu(c,s),s=Hm(a,s,1),a=mn(a,s,1),s=Ks(),a!==null&&(ia(a,1,s),ui(a,s));break}}a=a.return}}function Xy(s,a,c){var p=s.pingCache;p!==null&&p.delete(a),a=Ks(),s.pingedLanes|=s.suspendedLanes&c,as===s&&(bs&c)===c&&(Kn===4||Kn===3&&(bs&130023424)===bs&&500>jr()-kf?Yl(s,0):Nf|=c),ui(s,a)}function Cp(s,a){a===0&&((s.mode&1)===0?a=1:(a=zn,zn<<=1,(zn&130023424)===0&&(zn=4194304)));var c=Ks();s=Dr(s,a),s!==null&&(ia(s,a,c),ui(s,c))}function Qy(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),Cp(s,c)}function ex(s,a){var c=0;switch(s.tag){case 13:var p=s.stateNode,b=s.memoizedState;b!==null&&(c=b.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Cp(s,c)}var Ep;Ep=function(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps||Ps.current)oi=!0;else{if((s.lanes&c)===0&&(a.flags&128)===0)return oi=!1,qy(s,a,c);oi=(s.flags&131072)!==0}else oi=!1,Re&&(a.flags&1048576)!==0&&Se(a,V,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Fd(s,a),s=a.pendingProps;var b=nl(a,Gn.current);on(a,c),b=$l(null,a,p,s,b,c);var N=Gi();return a.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ls(p)?(N=!0,Po(a)):N=!1,a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Yn(a),b.updater=Id,a.stateNode=b,b._reactInternals=a,lf(a,p,s,c),a=hf(null,a,p,!0,N,c)):(a.tag=0,Re&&N&&Me(a),Ys(null,a,b,c),a=a.child),a;case 16:p=a.elementType;e:{switch(Fd(s,a),s=a.pendingProps,b=p._init,p=b(p._payload),a.type=p,b=a.tag=rx(p),s=_a(p,s),b){case 0:a=df(null,a,p,s,c);break e;case 1:a=tp(null,a,p,s,c);break e;case 11:a=Jm(null,a,p,s,c);break e;case 14:a=Zm(null,a,p,_a(p.type,s),c);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,b=a.pendingProps,b=a.elementType===p?b:_a(p,b),df(s,a,p,b,c);case 1:return p=a.type,b=a.pendingProps,b=a.elementType===p?b:_a(p,b),tp(s,a,p,b,c);case 3:e:{if(rp(a),s===null)throw Error(t(387));p=a.pendingProps,N=a.memoizedState,b=N.element,Ts(s,a),is(a,p,null,c);var M=a.memoizedState;if(p=M.element,N.isDehydrated)if(N={element:p,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},a.updateQueue.baseState=N,a.memoizedState=N,a.flags&256){b=Iu(Error(t(423)),a),a=np(s,a,p,c,b);break e}else if(p!==b){b=Iu(Error(t(424)),a),a=np(s,a,p,c,b);break e}else for(Fe=ys(a.stateNode.containerInfo.firstChild),De=a,Re=!0,qe=null,c=Qr(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ct(),p===b){a=To(s,a,c);break e}Ys(s,a,p,c)}a=a.child}return a;case 5:return Cd(a),s===null&&mt(a),p=a.type,b=a.pendingProps,N=s!==null?s.memoizedProps:null,M=b.children,Lc(p,b)?M=null:N!==null&&Lc(p,N)&&(a.flags|=32),ep(s,a),Ys(s,a,M,c),a.child;case 6:return s===null&&mt(a),null;case 13:return sp(s,a,c);case 4:return sl(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=xn(a,null,p,c):Ys(s,a,p,c),a.child;case 11:return p=a.type,b=a.pendingProps,b=a.elementType===p?b:_a(p,b),Jm(s,a,p,b,c);case 7:return Ys(s,a,a.pendingProps,c),a.child;case 8:return Ys(s,a,a.pendingProps.children,c),a.child;case 12:return Ys(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(p=a.type._context,b=a.pendingProps,N=a.memoizedProps,M=b.value,Er(jn,p._currentValue),p._currentValue=M,N!==null)if(nn(N.value,M)){if(N.children===b.children&&!Ps.current){a=To(s,a,c);break e}}else for(N=a.child,N!==null&&(N.return=a);N!==null;){var oe=N.dependencies;if(oe!==null){M=N.child;for(var ge=oe.firstContext;ge!==null;){if(ge.context===p){if(N.tag===1){ge=fn(-1,c&-c),ge.tag=2;var Ie=N.updateQueue;if(Ie!==null){Ie=Ie.shared;var Ve=Ie.pending;Ve===null?ge.next=ge:(ge.next=Ve.next,Ve.next=ge),Ie.pending=ge}}N.lanes|=c,ge=N.alternate,ge!==null&&(ge.lanes|=c),vr(N.return,c,a),oe.lanes|=c;break}ge=ge.next}}else if(N.tag===10)M=N.type===a.type?null:N.child;else if(N.tag===18){if(M=N.return,M===null)throw Error(t(341));M.lanes|=c,oe=M.alternate,oe!==null&&(oe.lanes|=c),vr(M,c,a),M=N.sibling}else M=N.child;if(M!==null)M.return=N;else for(M=N;M!==null;){if(M===a){M=null;break}if(N=M.sibling,N!==null){N.return=M.return,M=N;break}M=M.return}N=M}Ys(s,a,b.children,c),a=a.child}return a;case 9:return b=a.type,p=a.pendingProps.children,on(a,c),b=ln(b),p=p(b),a.flags|=1,Ys(s,a,p,c),a.child;case 14:return p=a.type,b=_a(p,a.pendingProps),b=_a(p.type,b),Zm(s,a,p,b,c);case 15:return Xm(s,a,a.type,a.pendingProps,c);case 17:return p=a.type,b=a.pendingProps,b=a.elementType===p?b:_a(p,b),Fd(s,a),a.tag=1,Ls(p)?(s=!0,Po(a)):s=!1,on(a,c),$m(a,p,b),lf(a,p,b,c),hf(null,a,p,!0,s,c);case 19:return ap(s,a,c);case 22:return Qm(s,a,c)}throw Error(t(156,a.tag))};function Pp(s,a){return ws(s,a)}function tx(s,a,c,p){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(s,a,c,p){return new tx(s,a,c,p)}function Tf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function rx(s){if(typeof s=="function")return Tf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===ae)return 14}return 2}function fl(s,a){var c=s.alternate;return c===null?(c=Ki(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Gd(s,a,c,p,b,N){var M=2;if(p=s,typeof s=="function")Tf(s)&&(M=1);else if(typeof s=="string")M=5;else e:switch(s){case U:return Jl(c.children,b,N,a);case z:M=8,b|=8;break;case I:return s=Ki(12,c,a,b|2),s.elementType=I,s.lanes=N,s;case Z:return s=Ki(13,c,a,b),s.elementType=Z,s.lanes=N,s;case ee:return s=Ki(19,c,a,b),s.elementType=ee,s.lanes=N,s;case be:return Yd(c,b,N,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:M=10;break e;case O:M=9;break e;case F:M=11;break e;case ae:M=14;break e;case he:M=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Ki(M,c,a,b),a.elementType=s,a.type=p,a.lanes=N,a}function Jl(s,a,c,p){return s=Ki(7,s,p,a),s.lanes=c,s}function Yd(s,a,c,p){return s=Ki(22,s,p,a),s.elementType=be,s.lanes=c,s.stateNode={isHidden:!1},s}function Of(s,a,c){return s=Ki(6,s,null,a),s.lanes=c,s}function If(s,a,c){return a=Ki(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function nx(s,a,c,p,b){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xs(0),this.expirationTimes=Xs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.identifierPrefix=p,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Df(s,a,c,p,b,N,M,oe,ge){return s=new nx(s,a,c,oe,ge),a===1?(a=1,N===!0&&(a|=8)):a=0,N=Ki(3,null,null,a),s.current=N,N.stateNode=s,N.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yn(N),s}function sx(s,a,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:p==null?null:""+p,children:s,containerInfo:a,implementation:c}}function Lp(s){if(!s)return Xa;s=s._reactInternals;e:{if(vn(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ls(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(Ls(c))return Dc(s,c,a)}return a}function Tp(s,a,c,p,b,N,M,oe,ge){return s=Df(c,p,!0,s,b,N,M,oe,ge),s.context=Lp(null),c=s.current,p=Ks(),b=dl(c),N=fn(p,b),N.callback=a??null,mn(c,N,b),s.current.lanes=b,ia(s,b,p),ui(s,p),s}function Kd(s,a,c,p){var b=a.current,N=Ks(),M=dl(b);return c=Lp(c),a.context===null?a.context=c:a.pendingContext=c,a=fn(N,M),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=mn(b,a,M),s!==null&&(Sa(s,b,M,N),ss(s,b,M)),M}function Jd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Op(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Ff(s,a){Op(s,a),(s=s.alternate)&&Op(s,a)}function ix(){return null}var Ip=typeof reportError=="function"?reportError:function(s){console.error(s)};function Mf(s){this._internalRoot=s}Zd.prototype.render=Mf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Kd(s,a,null,null)},Zd.prototype.unmount=Mf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Gl(function(){Kd(null,s,null,null)}),a[rs]=null}};function Zd(s){this._internalRoot=s}Zd.prototype.unstable_scheduleHydration=function(s){if(s){var a=zo();s={blockedOn:null,target:s,priority:a};for(var c=0;c<ei.length&&a!==0&&a<ei[c].priority;c++);ei.splice(c,0,s),c===0&&ho(s)}};function Rf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Xd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function ax(s,a,c,p,b){if(b){if(typeof p=="function"){var N=p;p=function(){var Ie=Jd(M);N.call(Ie)}}var M=Tp(a,p,s,0,null,!1,!1,"",Dp);return s._reactRootContainer=M,s[rs]=M.current,So(s.nodeType===8?s.parentNode:s),Gl(),M}for(;b=s.lastChild;)s.removeChild(b);if(typeof p=="function"){var oe=p;p=function(){var Ie=Jd(ge);oe.call(Ie)}}var ge=Df(s,0,!1,null,null,!1,!1,"",Dp);return s._reactRootContainer=ge,s[rs]=ge.current,So(s.nodeType===8?s.parentNode:s),Gl(function(){Kd(a,ge,c,p)}),ge}function Qd(s,a,c,p,b){var N=c._reactRootContainer;if(N){var M=N;if(typeof b=="function"){var oe=b;b=function(){var ge=Jd(M);oe.call(ge)}}Kd(a,M,s,b)}else M=ax(c,a,s,b,p);return Jd(M)}Mi=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=_s(a.pendingLanes);c!==0&&(gi(a,c|1),ui(a,jr()),(yr&6)===0&&(Mu=jr()+500,S()))}break;case 13:Gl(function(){var p=Dr(s,1);if(p!==null){var b=Ks();Sa(p,s,1,b)}}),Ff(s,1)}},co=function(s){if(s.tag===13){var a=Dr(s,134217728);if(a!==null){var c=Ks();Sa(a,s,134217728,c)}Ff(s,134217728)}},qo=function(s){if(s.tag===13){var a=dl(s),c=Dr(s,a);if(c!==null){var p=Ks();Sa(c,s,a,p)}Ff(s,a)}},zo=function(){return cr},Ra=function(s,a){var c=cr;try{return cr=s,a()}finally{cr=c}},Rt=function(s,a,c){switch(a){case"input":if(Yt(s,c),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==s&&p.form===s.form){var b=ql(p);if(!b)throw Error(t(90));He(p),Yt(p,b)}}}break;case"textarea":hr(s,c);break;case"select":a=c.value,a!=null&&st(s,!!c.multiple,a,!1)}},Wr=Ef,Zn=Gl;var ox={usingClientEntryPoint:!1,Events:[rl,Co,ql,ur,fi,Ef]},Hc={findFiberByHostInstance:Za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lx={bundleType:Hc.bundleType,version:Hc.version,rendererPackageName:Hc.rendererPackageName,rendererConfig:Hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Xn(s),s===null?null:s.stateNode},findFiberByHostInstance:Hc.findFiberByHostInstance||ix,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Di=eh.inject(lx),fs=eh}catch{}}return ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ox,ci.createPortal=function(s,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rf(a))throw Error(t(200));return sx(s,a,null,c)},ci.createRoot=function(s,a){if(!Rf(s))throw Error(t(299));var c=!1,p="",b=Ip;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=Df(s,1,!1,null,null,c,!1,p,b),s[rs]=a.current,So(s.nodeType===8?s.parentNode:s),new Mf(a)},ci.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Xn(a),s=s===null?null:s.stateNode,s},ci.flushSync=function(s){return Gl(s)},ci.hydrate=function(s,a,c){if(!Xd(a))throw Error(t(200));return Qd(null,s,a,!0,c)},ci.hydrateRoot=function(s,a,c){if(!Rf(s))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,b=!1,N="",M=Ip;if(c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onRecoverableError!==void 0&&(M=c.onRecoverableError)),a=Tp(a,null,s,1,c??null,b,!1,N,M),s[rs]=a.current,So(s),p)for(s=0;s<p.length;s++)c=p[s],b=c._getVersion,b=b(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,b]:a.mutableSourceEagerHydrationData.push(c,b);return new Zd(a)},ci.render=function(s,a,c){if(!Xd(a))throw Error(t(200));return Qd(null,s,a,!1,c)},ci.unmountComponentAtNode=function(s){if(!Xd(s))throw Error(t(40));return s._reactRootContainer?(Gl(function(){Qd(null,null,s,!1,function(){s._reactRootContainer=null,s[rs]=null})}),!0):!1},ci.unstable_batchedUpdates=Ef,ci.unstable_renderSubtreeIntoContainer=function(s,a,c,p){if(!Xd(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Qd(s,a,c,!1,p)},ci.version="18.3.1-next-f1338f8080-20240426",ci}var $p;function vx(){if($p)return qf.exports;$p=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qf.exports=gx(),qf.exports}var Wp;function yx(){if(Wp)return th;Wp=1;var r=vx();return th.createRoot=r.createRoot,th.hydrateRoot=r.hydrateRoot,th}var xx=yx();const bx=fd(xx),wx="modulepreload",_x=function(r){return"/"+r},Vp={},Sl=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");i=h(t.map(m=>{if(m=_x(m),m in Vp)return;Vp[m]=!0;const v=m.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":wx,v||(k.as="script"),k.crossOrigin="",k.href=m,d&&k.setAttribute("nonce",d),document.head.appendChild(k),v)return new Promise((x,T)=>{k.addEventListener("load",x),k.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},Nx=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Sl(async()=>{const{default:n}=await Promise.resolve().then(()=>vc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class gm extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Hp extends gm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gp extends gm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Yp extends gm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var T0;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(T0||(T0={}));var kx=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};class Sx{constructor(e,{headers:t={},customFetch:n,region:i=T0.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Nx(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return kx(this,arguments,void 0,function*(t,n={}){var i;try{const{headers:o,method:l,body:d,signal:h}=n;let m={},{region:v}=n;v||(v=this.region);const w=new URL(`${this.url}/${t}`);v&&v!=="any"&&(m["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let k;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",k=d):typeof d=="string"?(m["Content-Type"]="text/plain",k=d):typeof FormData<"u"&&d instanceof FormData?k=d:(m["Content-Type"]="application/json",k=JSON.stringify(d)));const x=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:k,signal:h}).catch(j=>{throw j.name==="AbortError"?j:new Hp(j)}),T=x.headers.get("x-relay-error");if(T&&T==="true")throw new Gp(x);if(!x.ok)throw new Yp(x);let C=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return C==="application/json"?E=yield x.json():C==="application/octet-stream"?E=yield x.blob():C==="text/event-stream"?E=x:C==="multipart/form-data"?E=yield x.formData():E=yield x.text(),{data:E,error:null,response:x}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Hp(o)}:{data:null,error:o,response:o instanceof Yp||o instanceof Gp?o.context:void 0}}})}}var ls={},Uu={},Bu={},qu={},zu={},$u={},jx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pc=jx();const Ax=pc.fetch,g2=pc.fetch.bind(pc),v2=pc.Headers,Cx=pc.Request,Ex=pc.Response,vc=Object.freeze(Object.defineProperty({__proto__:null,Headers:v2,Request:Cx,Response:Ex,default:g2,fetch:Ax},Symbol.toStringTag,{value:"Module"})),Px=cx(vc);var rh={},Kp;function y2(){if(Kp)return rh;Kp=1,Object.defineProperty(rh,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return rh.default=r,rh}var Jp;function x2(){if(Jp)return $u;Jp=1;var r=$u&&$u.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($u,"__esModule",{value:!0});const e=r(Px),t=r(y2());class n{constructor(o){var l,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,w,k,x;let T=null,C=null,E=null,j=m.status,K=m.statusText;if(m.ok){if(this.method!=="HEAD"){const me=await m.text();me===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?C=me:C=JSON.parse(me))}const $=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),le=(k=m.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");$&&le&&le.length>1&&(E=parseInt(le[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(T={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,E=null,j=406,K="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const $=await m.text();try{T=JSON.parse($),Array.isArray(T)&&m.status===404&&(C=[],T=null,j=200,K="OK")}catch{m.status===404&&$===""?(j=204,K="No Content"):T={message:$}}if(T&&this.isMaybeSingle&&(!((x=T?.details)===null||x===void 0)&&x.includes("0 rows"))&&(T=null,j=200,K="OK"),T&&this.shouldThrowOnError)throw new t.default(T)}return{error:T,data:C,count:E,status:j,statusText:K}});return this.shouldThrowOnError||(h=h.catch(m=>{var v,w,k;return{error:{message:`${(v=m?.name)!==null&&v!==void 0?v:"FetchError"}: ${m?.message}`,details:`${(w=m?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(k=m?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),h.then(o,l)}returns(){return this}overrideTypes(){return this}}return $u.default=n,$u}var Zp;function b2(){if(Zp)return zu;Zp=1;var r=zu&&zu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(zu,"__esModule",{value:!0});const e=r(x2());class t extends e.default{select(i){let o=!1;const l=(i??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:d,referencedTable:h=d}={}){const m=h?`${h}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:d=l}={}){const h=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(m,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:d=!1,wal:h=!1,format:m="text"}={}){var v;const w=[i?"analyze":null,o?"verbose":null,l?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),k=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${k}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return zu.default=t,zu}var Xp;function vm(){if(Xp)return qu;Xp=1;var r=qu&&qu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qu,"__esModule",{value:!0});const e=r(b2());class t extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${h}fts${m}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return qu.default=t,qu}var Qp;function w2(){if(Qp)return Bu;Qp=1;var r=Bu&&Bu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bu,"__esModule",{value:!0});const e=r(vm());class t{constructor(i,{headers:o={},schema:l,fetch:d}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=d}select(i,o){const{head:l=!1,count:d}=o??{},h=l?"HEAD":"GET";let m=!1;const v=(i??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var d;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(m.length>0){const v=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:d,defaultToNull:h=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const w=i.reduce((k,x)=>k.concat(Object.keys(x)),[]);if(w.length>0){const k=[...new Set(w)].map(x=>`"${x}"`);this.url.searchParams.set("columns",k.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(i,{count:o}={}){var l;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Bu.default=t,Bu}var eg;function Lx(){if(eg)return Uu;eg=1;var r=Uu&&Uu.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Uu,"__esModule",{value:!0});const e=r(w2()),t=r(vm());class n{constructor(o,{headers:l={},schema:d,fetch:h}={}){this.url=o,this.headers=new Headers(l),this.schemaName=d,this.fetch=h}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:d=!1,get:h=!1,count:m}={}){var v;let w;const k=new URL(`${this.url}/rpc/${o}`);let x;d||h?(w=d?"HEAD":"GET",Object.entries(l).filter(([C,E])=>E!==void 0).map(([C,E])=>[C,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([C,E])=>{k.searchParams.append(C,E)})):(w="POST",x=l);const T=new Headers(this.headers);return m&&T.set("Prefer",`count=${m}`),new t.default({method:w,url:k,headers:T,schema:this.schemaName,body:x,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Uu.default=n,Uu}var tg;function Tx(){if(tg)return ls;tg=1;var r=ls&&ls.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ls,"__esModule",{value:!0}),ls.PostgrestError=ls.PostgrestBuilder=ls.PostgrestTransformBuilder=ls.PostgrestFilterBuilder=ls.PostgrestQueryBuilder=ls.PostgrestClient=void 0;const e=r(Lx());ls.PostgrestClient=e.default;const t=r(w2());ls.PostgrestQueryBuilder=t.default;const n=r(vm());ls.PostgrestFilterBuilder=n.default;const i=r(b2());ls.PostgrestTransformBuilder=i.default;const o=r(x2());ls.PostgrestBuilder=o.default;const l=r(y2());return ls.PostgrestError=l.default,ls.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},ls}var Ox=Tx();const Ix=fd(Ox),{PostgrestClient:Dx,PostgrestQueryBuilder:y4,PostgrestFilterBuilder:x4,PostgrestTransformBuilder:b4,PostgrestBuilder:w4,PostgrestError:_4}=Ix;class Fx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Mx="2.75.0",Rx=`realtime-js/${Mx}`,Ux="1.0.0",O0=1e4,Bx=1e3,qx=100;var rd;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(rd||(rd={}));var Jn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Jn||(Jn={}));var Pa;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Pa||(Pa={}));var I0;(function(r){r.websocket="websocket"})(I0||(I0={}));var su;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(su||(su={}));class zx{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const d=n.decode(e.slice(l,l+i));l=l+i;const h=n.decode(e.slice(l,l+o));l=l+o;const m=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:d,event:h,payload:m}}}class _2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kr;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Kr||(Kr={}));const rg=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=$x(l,r,e,i),o),{}):{}},$x=(r,e,t,n)=>{const i=e.find(d=>d.name===r),o=i?.type,l=t[r];return o&&!n.includes(o)?N2(o,l):D0(l)},N2=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Gx(e,t)}switch(r){case Kr.bool:return Wx(e);case Kr.float4:case Kr.float8:case Kr.int2:case Kr.int4:case Kr.int8:case Kr.numeric:case Kr.oid:return Vx(e);case Kr.json:case Kr.jsonb:return Hx(e);case Kr.timestamp:return Yx(e);case Kr.abstime:case Kr.date:case Kr.daterange:case Kr.int4range:case Kr.int8range:case Kr.money:case Kr.reltime:case Kr.text:case Kr.time:case Kr.timestamptz:case Kr.timetz:case Kr.tsrange:case Kr.tstzrange:return D0(e);default:return D0(e)}},D0=r=>r,Wx=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Vx=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Hx=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Gx=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let o;const l=r.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(d=>N2(e,d))}return r},Yx=r=>typeof r=="string"?r.replace(" ","T"):r,k2=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Wf{constructor(e,t,n={},i=O0){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ng;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ng||(ng={}));class nd{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nd.syncState(this.state,i,o,l),this.pendingDiffs.forEach(h=>{this.state=nd.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=nd.syncDiff(this.state,i,o,l),d())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const o=this.cloneDeep(e),l=this.transformState(t),d={},h={};return this.map(o,(m,v)=>{l[m]||(h[m]=v)}),this.map(l,(m,v)=>{const w=o[m];if(w){const k=v.map(E=>E.presence_ref),x=w.map(E=>E.presence_ref),T=v.filter(E=>x.indexOf(E.presence_ref)<0),C=w.filter(E=>k.indexOf(E.presence_ref)<0);T.length>0&&(d[m]=T),C.length>0&&(h[m]=C)}else d[m]=v}),this.syncDiff(o,{joins:d,leaves:h},n,i)}static syncDiff(e,t,n,i){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(d,h)=>{var m;const v=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(h),v.length>0){const w=e[d].map(x=>x.presence_ref),k=v.filter(x=>w.indexOf(x.presence_ref)<0);e[d].unshift(...k)}n(d,v,h)}),this.map(l,(d,h)=>{let m=e[d];if(!m)return;const v=h.map(w=>w.presence_ref);m=m.filter(w=>v.indexOf(w.presence_ref)<0),e[d]=m,i(d,m,h),m.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sg;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(sg||(sg={}));var sd;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(sd||(sd={}));var Mo;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Mo||(Mo={}));class ym{constructor(e,t={config:{}},n){var i,o;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Wf(this,Pa.join,this.params,this.timeout),this.rejoinTimer=new _2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pa.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new nd(this),this.broadcastEndpointURL=k2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Jn.closed){const{config:{broadcast:l,presence:d,private:h}}=this.params,m=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&i!==void 0?i:[],v=!!this.bindings[sd.PRESENCE]&&this.bindings[sd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},k={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Mo.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Mo.CLOSED)),this.updateJoinPayload(Object.assign({config:k},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var T;if(this.socket.setAuth(),x===void 0){e?.(Mo.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,E=(T=C?.length)!==null&&T!==void 0?T:0,j=[];for(let K=0;K<E;K++){const B=C[K],{filter:{event:$,schema:le,table:me,filter:U}}=B,z=x&&x[K];if(z&&z.event===$&&z.schema===le&&z.table===me&&z.filter===U)j.push(Object.assign(Object.assign({},B),{id:z.id}));else{this.unsubscribe(),this.state=Jn.errored,e?.(Mo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(Mo.SUBSCRIBED);return}}).receive("error",x=>{this.state=Jn.errored,e?.(Mo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Mo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Jn.joined&&e===sd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=m.body)===null||i===void 0?void 0:i.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,d,h;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Jn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Wf(this,Pa.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Jn.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),l}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Wf(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qx){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,o;const l=e.toLocaleLowerCase(),{close:d,error:h,leave:m,join:v}=Pa;if(n&&[d,h,m,v].indexOf(l)>=0&&n!==this._joinRef())return;let k=this._onMessage(l,t,n);if(t&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var T,C,E;return((T=x.filter)===null||T===void 0?void 0:T.event)==="*"||((E=(C=x.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(x=>x.callback(k,n)):(o=this.bindings[l])===null||o===void 0||o.filter(x=>{var T,C,E,j,K,B;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const $=x.id,le=(T=x.filter)===null||T===void 0?void 0:T.event;return $&&((C=t.ids)===null||C===void 0?void 0:C.includes($))&&(le==="*"||le?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const $=(K=(j=x?.filter)===null||j===void 0?void 0:j.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return $==="*"||$===((B=t?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof k=="object"&&"ids"in k){const T=k.data,{schema:C,table:E,commit_timestamp:j,type:K,errors:B}=T;k=Object.assign(Object.assign({},{schema:C,table:E,commit_timestamp:j,eventType:K,new:{},old:{},errors:B}),this._getPayloadRecords(T))}x.callback(k,n)})}_isClosed(){return this.state===Jn.closed}_isJoined(){return this.state===Jn.joined}_isJoining(){return this.state===Jn.joining}_isLeaving(){return this.state===Jn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&ym.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pa.close,{},e)}_onError(e){this._on(Pa.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=rg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=rg(e.columns,e.old_record)),t}}const Vf=()=>{},nh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Kx=[1e3,2e3,5e3,1e4],Jx=1e4,Zx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xx{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=O0,this.transport=null,this.heartbeatIntervalMs=nh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vf,this.ref=0,this.reconnectTimer=null,this.logger=Vf,this.conn=null,this.sendBuffer=[],this.serializer=new zx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Sl(async()=>{const{default:d}=await Promise.resolve().then(()=>vc);return{default:d}},void 0).then(({default:d})=>d(...l)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${I0.websocket}`,this.httpEndpoint=k2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Fx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ux}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case rd.connecting:return su.Connecting;case rd.open:return su.Open;case rd.closing:return su.Closing;default:return su.Closed}}isConnected(){return this.connectionState()===su.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new ym(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:n,payload:i,ref:o}=e,l=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${t} ${n} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Bx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},nh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:l}=t,d=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${n} ${i} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(i,o,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pa.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Zx],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const i={access_token:t,version:Rx};t&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Pa.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,o,l,d,h,m,v;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:O0,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:nh.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Vf,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(w=>Kx[w-1]||Jx),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((w,k)=>k(JSON.stringify(w))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class xm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Rn(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Qx extends xm{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class F0 extends xm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var eb=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};const S2=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Sl(async()=>{const{default:n}=await Promise.resolve().then(()=>vc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},tb=()=>eb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sl(()=>Promise.resolve().then(()=>vc),void 0)).Response:Response}),M0=r=>{if(Array.isArray(r))return r.map(t=>M0(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=M0(n)}),e},rb=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var fu=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};const Hf=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),nb=(r,e,t)=>fu(void 0,void 0,void 0,function*(){const n=yield tb();r instanceof n&&!t?.noResolveJson?r.json().then(i=>{const o=r.status||500,l=i?.statusCode||o+"";e(new Qx(Hf(i),o,l))}).catch(i=>{e(new F0(Hf(i),i))}):e(new F0(Hf(r),r))}),sb=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"||!n?i:(rb(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function md(r,e,t,n,i,o){return fu(this,void 0,void 0,function*(){return new Promise((l,d)=>{r(t,sb(e,n,i,o)).then(h=>{if(!h.ok)throw h;return n?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>nb(h,d,n))})})}function Lh(r,e,t,n){return fu(this,void 0,void 0,function*(){return md(r,"GET",e,t,n)})}function so(r,e,t,n,i){return fu(this,void 0,void 0,function*(){return md(r,"POST",e,n,i,t)})}function R0(r,e,t,n,i){return fu(this,void 0,void 0,function*(){return md(r,"PUT",e,n,i,t)})}function ib(r,e,t,n){return fu(this,void 0,void 0,function*(){return md(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function j2(r,e,t,n,i){return fu(this,void 0,void 0,function*(){return md(r,"DELETE",e,n,i,t)})}var ab=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};class ob{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ab(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Rn(e))return{data:null,error:e};throw e}})}}var lb=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};class ub{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new ob(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return lb(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Rn(e))return{data:null,error:e};throw e}})}}var di=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};const cb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ig={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class db{constructor(e,t={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=S2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,i){return di(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},ig),i);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h))):(o=n,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),i?.headers&&(d=Object.assign(Object.assign({},d),i.headers));const m=this._removeEmptyFolders(t),v=this._getFinalPath(m),w=yield(e=="PUT"?R0:so)(this.fetch,`${this.url}/object/${v}`,o,Object.assign({headers:d},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Rn(o))return{data:null,error:o};throw o}})}upload(e,t,n){return di(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return di(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",t);try{let h;const m=Object.assign({upsert:ig.upsert},i),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",m.cacheControl)):(h=n,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const w=yield R0(this.fetch,d.toString(),h,{headers:v});return{data:{path:o,fullPath:w.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Rn(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,t){return di(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const o=yield so(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+o.url),d=l.searchParams.get("token");if(!d)throw new xm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}update(e,t,n){return di(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return di(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}})}copy(e,t,n){return di(this,void 0,void 0,function*(){try{return{data:{path:(yield so(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return di(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield so(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return di(this,void 0,void 0,function*(){try{const i=yield so(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),l=o?`?${o}`:"",d=this._getFinalPath(e),h=()=>Lh(this.fetch,`${this.url}/${i}/${d}${l}`,{headers:this.headers,noResolveJson:!0});return new ub(h,this.shouldThrowOnError)}info(e){return di(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Lh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:M0(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}exists(e){return di(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ib(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n)&&n instanceof F0){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const d=typeof t?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(t?.transform||{});h!==""&&i.push(h);let m=i.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${m}`)}}}remove(e){return di(this,void 0,void 0,function*(){try{return{data:yield j2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}})}list(e,t,n){return di(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},cb),t),{prefix:e||""});return{data:yield so(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}})}listV2(e,t){return di(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield so(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const hb="2.75.0",fb={"X-Client-Info":`storage-js/${hb}`};var Wu=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};class mb{constructor(e,t={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fb),t),this.fetch=S2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Wu(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Rn(e))return{data:null,error:e};throw e}})}getBucket(e){return Wu(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}})}createBucket(e){return Wu(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield so(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Wu(this,void 0,void 0,function*(){try{return{data:yield R0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Wu(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Wu(this,void 0,void 0,function*(){try{return{data:yield j2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}})}}class pb extends mb{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new db(this.url,this.headers,e,this.fetch)}}const gb="2.75.0";let Xc="";typeof Deno<"u"?Xc="deno":typeof document<"u"?Xc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xc="react-native":Xc="node";const vb={"X-Client-Info":`supabase-js-${Xc}/${gb}`},yb={headers:vb},xb={schema:"public"},bb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wb={};var _b=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};const Nb=r=>{let e;return r?e=r:typeof fetch>"u"?e=g2:e=fetch,(...t)=>e(...t)},kb=()=>typeof Headers>"u"?v2:Headers,Sb=(r,e,t)=>{const n=Nb(t),i=kb();return(o,l)=>_b(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:r;let m=new i(l?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),n(o,Object.assign(Object.assign({},l),{headers:m}))})};var jb=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};function Ab(r){return r.endsWith("/")?r:r+"/"}function Cb(r,e){var t,n;const{db:i,auth:o,realtime:l,global:d}=r,{db:h,auth:m,realtime:v,global:w}=e,k={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},v),l),storage:{},global:Object.assign(Object.assign(Object.assign({},w),d),{headers:Object.assign(Object.assign({},(t=w?.headers)!==null&&t!==void 0?t:{}),(n=d?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>jb(this,void 0,void 0,function*(){return""})};return r.accessToken?k.accessToken=r.accessToken:delete k.accessToken,k}function Eb(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ab(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const A2="2.75.0",rc=30*1e3,U0=3,Gf=U0*rc,Pb="http://localhost:9999",Lb="supabase.auth.token",Tb={"X-Client-Info":`gotrue-js/${A2}`},B0="X-Supabase-Api-Version",C2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ob=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ib=600*1e3;class ld extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Mt(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Db extends ld{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Fb(r){return Mt(r)&&r.name==="AuthApiError"}class iu extends ld{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Cl extends ld{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class bl extends Cl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mb(r){return Mt(r)&&r.name==="AuthSessionMissingError"}class Vu extends Cl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sh extends Cl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ih extends Cl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rb(r){return Mt(r)&&r.name==="AuthImplicitGrantRedirectError"}class ag extends Cl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class q0 extends Cl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Yf(r){return Mt(r)&&r.name==="AuthRetryableFetchError"}class og extends Cl{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class z0 extends Cl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Th="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lg=` 	
\r=`.split(""),Ub=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<lg.length;e+=1)r[lg[e].charCodeAt(0)]=-2;for(let e=0;e<Th.length;e+=1)r[Th[e].charCodeAt(0)]=e;return r})();function ug(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Th[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Th[n]),e.queuedBits-=6}}function E2(r,e,t){const n=Ub[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function cg(r){const e=[],t=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{zb(l,n,t)};for(let l=0;l<r.length;l+=1)E2(r.charCodeAt(l),i,o);return e.join("")}function Bb(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function qb(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Bb(n,e)}}function zb(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function lc(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)E2(r.charCodeAt(i),t,n);return new Uint8Array(e)}function $b(r){const e=[];return qb(r,t=>e.push(t)),new Uint8Array(e)}function ou(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>ug(i,t,n)),ug(null,t,n),e.join("")}function Wb(r){return Math.round(Date.now()/1e3)+r}function Vb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ei=()=>typeof window<"u"&&typeof document<"u",Zl={tested:!1,writable:!1},P2=()=>{if(!Ei())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zl.tested)return Zl.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Zl.tested=!0,Zl.writable=!0}catch{Zl.tested=!0,Zl.writable=!1}return Zl.writable};function Hb(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const L2=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Sl(async()=>{const{default:n}=await Promise.resolve().then(()=>vc);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Gb=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",nc=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Xl=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pl=async(r,e)=>{await r.removeItem(e)};class Wh{constructor(){this.promise=new Wh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Wh.promiseConstructor=Promise;function Kf(r){const e=r.split(".");if(e.length!==3)throw new z0("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Ob.test(e[n]))throw new z0("JWT not in base64url format");return{header:JSON.parse(cg(e[0])),payload:JSON.parse(cg(e[1])),signature:lc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yb(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Kb(r,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await r(o);if(!e(o,null,l)){n(l);return}}catch(l){if(!e(o,l)){i(l);return}}})()})}function Jb(r){return("0"+r.toString(16)).substr(-2)}function Zb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Jb).join("")}async function Xb(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function Qb(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Xb(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hu(r,e,t=!1){const n=Zb();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await nc(r,`${e}-code-verifier`,i);const o=await Qb(n);return[o,n===o?"plain":"s256"]}const e5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t5(r){const e=r.headers.get(B0);if(!e||!e.match(e5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function r5(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function n5(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const s5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gu(r){if(!s5.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jf(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dg(r){return JSON.parse(JSON.stringify(r))}var i5=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const tu=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),a5=[502,503,504];async function hg(r){var e;if(!Gb(r))throw new q0(tu(r),0);if(a5.includes(r.status))throw new q0(tu(r),r.status);let t;try{t=await r.json()}catch(o){throw new iu(tu(o),o)}let n;const i=t5(r);if(i&&i.getTime()>=C2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new og(tu(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new bl}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new og(tu(t),r.status,t.weak_password.reasons);throw new Db(tu(t),r.status||500,n)}const o5=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function er(r,e,t,n){var i;const o=Object.assign({},n?.headers);o[B0]||(o[B0]=C2["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const l=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(l.redirect_to=n.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await l5(r,e,t+d,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(h):{data:Object.assign({},h),error:null}}async function l5(r,e,t,n,i,o){const l=o5(e,n,i,o);let d;try{d=await r(t,Object.assign({},l))}catch(h){throw console.error(h),new q0(tu(h),0)}if(d.ok||await hg(d),n?.noResolveJson)return d;try{return await d.json()}catch(h){await hg(h)}}function Ea(r){var e;let t=null;d5(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Wb(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function fg(r){const e=Ea(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function _l(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function u5(r){return{data:r,error:null}}function c5(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:o}=r,l=i5(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:o},h=Object.assign({},l);return{data:{properties:d,user:h},error:null}}function mg(r){return r}function d5(r){return r.access_token&&r.refresh_token&&r.expires_in}const Zf=["global","local","others"];var h5=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class f5{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=L2(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Zf[0]){if(Zf.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zf.join(", ")}`);try{return await er(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await er(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:_l})}catch(n){if(Mt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=h5(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await er(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:c5,redirectTo:t?.redirectTo})}catch(t){if(Mt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await er(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_l})}catch(t){if(Mt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,o,l,d,h;try{const m={nextPage:null,lastPage:0,total:0},v=await er(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:mg});if(v.error)throw v.error;const w=await v.json(),k=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return x.length>0&&(x.forEach(T=>{const C=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(T.split(";")[1].split("=")[1]);m[`${E}Page`]=C}),m.total=parseInt(k)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(Mt(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Gu(e);try{return await er(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_l})}catch(t){if(Mt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Gu(e);try{return await er(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:_l})}catch(n){if(Mt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Gu(e);try{return await er(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:_l})}catch(n){if(Mt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Gu(e.userId);try{const{data:t,error:n}=await er(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Gu(e.userId),Gu(e.id);try{return{data:await er(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,o,l,d,h;try{const m={nextPage:null,lastPage:0,total:0},v=await er(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:mg});if(v.error)throw v.error;const w=await v.json(),k=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return x.length>0&&(x.forEach(T=>{const C=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(T.split(";")[1].split("=")[1]);m[`${E}Page`]=C}),m.total=parseInt(k)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(Mt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await er(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await er(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await er(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await er(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}}function pg(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Yu={debug:!!(globalThis&&P2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class T2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class m5 extends T2{}async function p5(r,e,t){Yu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Yu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Yu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Yu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Yu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new m5(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Yu.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function g5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function O2(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function v5(r){return parseInt(r,16)}function y5(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function x5(r){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:d,requestId:h,resources:m,scheme:v,uri:w,version:k}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const x=O2(r.address),T=v?`${v}://${n}`:n,C=r.statement?`${r.statement}
`:"",E=`${T} wants you to sign in with your Ethereum account:
${x}

${C}`;let j=`URI: ${w}
Version: ${k}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(j+=`
Expiration Time: ${i.toISOString()}`),d&&(j+=`
Not Before: ${d.toISOString()}`),h&&(j+=`
Request ID: ${h}`),m){let K=`
Resources:`;for(const B of m){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);K+=`
- ${B}`}j+=K}return`${E}
${j}`}class Mn extends Error{constructor({message:e,code:t,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Oh extends Mn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function b5({error:r,options:e}){var t,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Mn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Mn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Mn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Mn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Mn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Mn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Mn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const l=window.location.hostname;if(D2(l)){if(o.rp.id!==l)return new Mn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Mn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Mn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Mn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Mn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function w5({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Mn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(D2(n)){if(t.rpId!==n)return new Mn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Mn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Mn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Mn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}var I2=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class _5{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const N5=new _5;function k5(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,i=I2(r,["challenge","user","excludeCredentials"]),o=lc(e).buffer,l=Object.assign(Object.assign({},t),{id:lc(t.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:o,user:l});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const m=n[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:lc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function S5(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=I2(r,["challenge","allowCredentials"]),i=lc(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const d=t[l];o.allowCredentials[l]=Object.assign(Object.assign({},d),{id:lc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function j5(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:ou(new Uint8Array(r.response.attestationObject)),clientDataJSON:ou(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function A5(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),i=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ou(new Uint8Array(i.authenticatorData)),clientDataJSON:ou(new Uint8Array(i.clientDataJSON)),signature:ou(new Uint8Array(i.signature)),userHandle:i.userHandle?ou(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function D2(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function gg(){var r,e;return!!(Ei()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function C5(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Oh("Browser returned unexpected credential type",e)}:{data:null,error:new Oh("Empty credential response",e)}}catch(e){return{data:null,error:b5({error:e,options:r})}}}async function E5(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Oh("Browser returned unexpected credential type",e)}:{data:null,error:new Oh("Empty credential response",e)}}catch(e){return{data:null,error:w5({error:e,options:r})}}}const P5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},L5={userVerification:"preferred",hints:["security-key"]};function Ih(...r){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of r)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))n[o]=l;else if(t(l))n[o]=l;else if(e(l)){const d=n[o];e(d)?n[o]=Ih(d,l):n[o]=Ih(l)}else n[o]=l}return n}function T5(r,e){return Ih(P5,r,e||{})}function O5(r,e){return Ih(L5,r,e||{})}class I5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},o){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:d};const h=i??N5.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=T5(l.webauthn.credential_options.publicKey,o?.create),{data:v,error:w}=await C5({publicKey:m,signal:h});return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const m=O5(l.webauthn.credential_options.publicKey,o?.request),{data:v,error:w}=await E5(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:h}));return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(l){return Mt(l)?{data:null,error:l}:{data:null,error:new iu("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!t)return{data:null,error:new ld("rpId is required for WebAuthn authentication")};try{if(!gg())return{data:null,error:new iu("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:o});if(!l)return{data:null,error:d};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:n,credential_response:h.credential_response}})}catch(l){return Mt(l)?{data:null,error:l}:{data:null,error:new iu("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!t)return{data:null,error:new ld("rpId is required for WebAuthn registration")};try{if(!gg())return{data:null,error:new iu("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===e&&k.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(l){return Mt(l)?{data:null,error:l}:{data:null,error:new iu("Unexpected error in register",l)}}}}g5();const D5={url:Pb,storageKey:Lb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vg(r,e,t){return await t()}const Ku={};class ud{get jwks(){var e,t;return(t=(e=Ku[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ku[this.storageKey]=Object.assign(Object.assign({},Ku[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ku[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ku[this.storageKey]=Object.assign(Object.assign({},Ku[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ud.nextInstanceID,ud.nextInstanceID+=1,this.instanceID>0&&Ei()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},D5),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new f5({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=L2(i.fetch),this.lock=i.lock||vg,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ei()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=p5:this.lock=vg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new I5(this)},this.persistSession?(i.storage?this.storage=i.storage:P2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pg(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pg(this.memoryStorage)),Ei()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${A2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Hb(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ei()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Rb(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Mt(t)?{error:t}:{error:new iu("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const o=await er(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ea}),{data:l,error:d}=o;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(o){if(Mt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,n,i;try{let o;if("email"in e){const{email:v,password:w,options:k}=e;let x=null,T=null;this.flowType==="pkce"&&([x,T]=await Hu(this.storage,this.storageKey)),o=await er(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:v,password:w,data:(t=k?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:x,code_challenge_method:T},xform:Ea})}else if("phone"in e){const{phone:v,password:w,options:k}=e;o=await er(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(n=k?.data)!==null&&n!==void 0?n:{},channel:(i=k?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:Ea})}else throw new sh("You must provide either an email or phone number and a password");const{data:l,error:d}=o;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(o){if(Mt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:d}=e;t=await er(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:fg})}else if("phone"in e){const{phone:o,password:l,options:d}=e;t=await er(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:fg})}else throw new sh("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Vu}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(Mt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,o,l,d,h,m,v,w,k;let x,T;if("message"in e)x=e.message,T=e.signature;else{const{chain:C,wallet:E,statement:j,options:K}=e;let B;if(Ei())if(typeof E=="object")B=E;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")B=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=E}const $=new URL((t=K?.url)!==null&&t!==void 0?t:window.location.href),le=await B.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!le||le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const me=O2(le[0]);let U=(n=K?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!U){const I=await B.request({method:"eth_chainId"});U=v5(I)}const z={domain:$.host,address:me,statement:j,uri:$.href,version:"1",chainId:U,nonce:(i=K?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=K?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=K?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=K?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=K?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=K?.signInWithEthereum)===null||v===void 0?void 0:v.resources};x=x5(z),T=await B.request({method:"personal_sign",params:[y5(x),me]})}try{const{data:C,error:E}=await er(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:T},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Ea});if(E)throw E;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Vu}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:E})}catch(C){if(Mt(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var t,n,i,o,l,d,h,m,v,w,k,x;let T,C;if("message"in e)T=e.message,C=e.signature;else{const{chain:E,wallet:j,statement:K,options:B}=e;let $;if(Ei())if(typeof j=="object")$=j;else{const me=window;if("solana"in me&&typeof me.solana=="object"&&("signIn"in me.solana&&typeof me.solana.signIn=="function"||"signMessage"in me.solana&&typeof me.solana.signMessage=="function"))$=me.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=j}const le=new URL((t=B?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in $&&$.signIn){const me=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:le.host,uri:le.href}),K?{statement:K}:null));let U;if(Array.isArray(me)&&me[0]&&typeof me[0]=="object")U=me[0];else if(me&&typeof me=="object"&&"signedMessage"in me&&"signature"in me)U=me;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)T=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),C=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${le.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${le.href}`,`Issued At: ${(i=(n=B?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=B?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((l=B?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((d=B?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((h=B?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((m=B?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((w=(v=B?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...B.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const me=await $.signMessage(new TextEncoder().encode(T),"utf8");if(!me||!(me instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=me}}try{const{data:E,error:j}=await er(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:ou(C)},!((k=e.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ea});if(j)throw j;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Vu}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:j})}catch(E){if(Mt(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const t=await Xl(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:o,error:l}=await er(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ea});if(await pl(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Vu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(Mt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:o,nonce:l}=e,d=await er(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Ea}),{data:h,error:m}=d;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Vu}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:m})}catch(t){if(Mt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,o,l;try{if("email"in e){const{email:d,options:h}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Hu(this.storage,this.storageKey));const{error:w}=await er(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=h?.data)!==null&&t!==void 0?t:{},create_user:(n=h?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in e){const{phone:d,options:h}=e,{data:m,error:v}=await er(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=h?.data)!==null&&i!==void 0?i:{},create_user:(o=h?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:v}}throw new sh("You must provide either an email or phone number.")}catch(d){if(Mt(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,n;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:d}=await er(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ea});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,m=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(i){if(Mt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Hu(this.storage,this.storageKey)),await er(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:u5})}catch(o){if(Mt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new bl;const{error:i}=await er(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Mt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:l}=await er(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:l,error:d}=await er(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:d}}throw new sh("You must provide either an email or phone number and a type")}catch(t){if(Mt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Xl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Gf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await Xl(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Jf()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,m,v)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,m,v))})}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await er(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_l}):await this._useSession(async t=>{var n,i,o;const{data:l,error:d}=t;if(d)throw d;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bl}:await er(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:_l})})}catch(t){if(Mt(t))return Mb(t)&&(await this._removeSession(),await pl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new bl;const l=i.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await Hu(this.storage,this.storageKey));const{data:m,error:v}=await er(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:l.access_token,xform:_l});if(v)throw v;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Mt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bl;const t=Date.now()/1e3;let n=t,i=!0,o=null;const{payload:l}=Kf(e.access_token);if(l.exp&&(n=l.exp,i=n<=t),i){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Mt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:l,error:d}=t;if(d)throw d;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new bl;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Mt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ei())throw new ih("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ih(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ag("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ih("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ag("No code detected.");const{data:K,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:d,expires_at:h,token_type:m}=e;if(!o||!d||!l||!m)throw new ih("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(d);let k=v+w;h&&(k=parseInt(h));const x=k-v;x*1e3<=rc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const T=k-w;v-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,k,v):v-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,k,v);const{data:C,error:E}=await this._getUser(o);if(E)throw E;const j={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:w,expires_at:k,refresh_token:l,token_type:m,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(n){if(Mt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return{error:o};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:d}=await this.admin.signOut(l,e);if(d&&!(Fb(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await pl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Vb(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:o},error:l}=t;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Hu(this.storage,this.storageKey,!0));try{return await er(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Mt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async o=>{var l,d,h,m,v;const{data:w,error:k}=o;if(k)throw k;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await er(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(i)throw i;return Ei()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(Mt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:o}}=t;if(i)throw i;const{options:l,provider:d,token:h,access_token:m,nonce:v}=e,w=await er(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:h,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Ea}),{data:k,error:x}=w;return x?{data:{user:null,session:null},error:x}:!k||!k.session||!k.user?{data:{user:null,session:null},error:new Vu}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),{data:k,error:x})}catch(i){if(Mt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:o,error:l}=t;if(l)throw l;return await er(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Kb(async i=>(i>0&&await Yb(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await er(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ea})),(i,o)=>{const l=200*Math.pow(2,i);return o&&Yf(o)&&Date.now()+l-n<rc})}catch(n){if(this._debug(t,"error",n),Mt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ei()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Xl(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Xl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await nc(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:Jf()}else if(i&&!i.user&&!i.user){const l=await Xl(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await pl(this.storage,this.storageKey+"-user"),await nc(this.storage,this.storageKey,i)):i.user=Jf()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Gf;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Gf}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Yf(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(i.access_token);!d&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new bl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Wh;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new bl;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(i,"error",o),Mt(o)){const l={data:null,error:o};return Yf(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await nc(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const o=dg(i);await nc(this.storage,this.storageKey,o)}else{const i=dg(t);await nc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await pl(this.storage,this.storageKey),await pl(this.storage,this.storageKey+"-code-verifier"),await pl(this.storage,this.storageKey+"-user"),this.userStorage&&await pl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ei()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/rc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${rc}ms, refresh threshold is ${U0} ticks`),i<=U0&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof T2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ei()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,l]=await Hu(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(d.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;return o?{data:null,error:o}:await er(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:o,error:l}=t;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await er(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&h.type==="totp"&&(!((i=h?.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?j5(e.webauthn.credential_response):A5(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await er(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=await er(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:k5(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:S5(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Kf(i.access_token);let d=null;l.aal&&(d=l.aal);let h=d;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(w=>w.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(h="aal2");const v=l.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(d=>d.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+Ib>i)return n;const{data:o,error:l}=await er(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(d=>d.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:x,error:T}=await this.getSession();if(T||!x.session)return{data:null,error:T};n=x.session.access_token}const{header:i,payload:o,signature:l,raw:{header:d,payload:h}}=Kf(n);t?.allowExpired||r5(o.exp);const m=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:o,header:i,signature:l},error:null}}const v=n5(i.alg),w=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,l,$b(`${d}.${h}`)))throw new z0("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}}}ud.nextInstanceID=0;const F5=ud;class M5 extends F5{constructor(e){super(e)}}var R5=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(v){try{m(n.next(v))}catch(w){l(w)}}function h(v){try{m(n.throw(v))}catch(w){l(w)}}function m(v){v.done?o(v.value):i(v.value).then(d,h)}m((n=n.apply(r,e||[])).next())})};class U5{constructor(e,t,n){var i,o,l;this.supabaseUrl=e,this.supabaseKey=t;const d=Eb(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:xb,realtime:wb,auth:Object.assign(Object.assign({},bb),{storageKey:h}),global:yb},v=Cb(n??{},m);this.storageKey=(i=v.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(w,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,v.global.fetch),this.fetch=Sb(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Dx(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new pb(this.storageUrl.href,this.headers,this.fetch,n?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Sx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return R5(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:l,flowType:d,lock:h,debug:m},v,w){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M5({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),v),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,flowType:d,lock:h,debug:m,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Xx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const B5=(r,e,t)=>new U5(r,e,t);function q5(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}q5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bh="https://hyrgqrgeshkgvsfwnzzu.supabase.co",ru="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5cmdxcmdlc2hrZ3ZzZnduenp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTU3NTEsImV4cCI6MjA3NjczMTc1MX0.PpQa22hWN7OAl8LP_h9mhxfogUaV1qmSuOiaBeaLDh4";try{console.log("[supabase] initializing client",{urlPresent:!!bh,keyPresent:!!ru,urlPreview:bh?`${bh.slice(0,20)}...`:null,keyLength:ru?.length||0,keyFirst50:ru?`${ru.slice(0,50)}...`:null,keyLast20:ru?`...${ru.slice(-20)}`:null})}catch{}const z5=typeof window<"u"?window.localStorage:void 0,At=B5(bh,ru,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:z5,storageKey:"pch.auth"}});async function yg(r){try{const{data:e,error:t}=await At.auth.getUser();if(t||!e?.user?.id)return{ok:!1,updated:!1,error:t?.message||"No authenticated user"};const n=e.user.id,{data:i,error:o}=await At.from("profiles").select("timezone").eq("id",n).single();if(o)return{ok:!1,updated:!1,error:o.message};const l=String(i?.timezone||"").trim();if(l)return{ok:!0,updated:!1,timezone:l};const d=String(r||"").trim();if(!d)return{ok:!1,updated:!1,error:"Empty timezone provided"};const{error:h}=await At.from("profiles").update({timezone:d}).eq("id",n);return h?{ok:!1,updated:!1,error:h.message}:{ok:!0,updated:!0,timezone:d}}catch(e){return{ok:!1,updated:!1,error:e?.message||String(e)}}}async function Yc(r){try{console.log("[dbLoadPets] START - userId=",r);const{data:e,error:t}=await At.from("pets").select("id, name, species, color, photo_url, insurance_company, policy_number, owner_name, owner_phone, filing_deadline_days, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit, healthy_paws_pet_id").eq("user_id",r).order("created_at",{ascending:!0});if(console.log("[dbLoadPets] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[dbLoadPets] ERROR:",t),t;const n=(e||[]).map(i=>({id:i.id,name:i.name,species:i.species,color:i.color||(i.species==="dog"?"#3B82F6":i.species==="cat"?"#F97316":"#6B7280"),photo_url:i.photo_url||null,insuranceCompany:i.insurance_company,policyNumber:i.policy_number,ownerName:i.owner_name,ownerPhone:i.owner_phone,filing_deadline_days:i.filing_deadline_days,monthly_premium:i.monthly_premium??null,deductible_per_claim:i.deductible_per_claim??null,coverage_start_date:i.coverage_start_date||null,insurance_pays_percentage:i.insurance_pays_percentage??null,annual_coverage_limit:i.annual_coverage_limit??null,healthy_paws_pet_id:i.healthy_paws_pet_id||null}));return console.log("[dbLoadPets] SUCCESS - count=",n.length,"pets:",n),n}catch(e){throw console.error("[dbLoadPets] EXCEPTION:",e),e}}async function Xf(r,e){const t=e.color||(e.species==="dog"?"#3B82F6":e.species==="cat"?"#F97316":"#6B7280"),n={id:e.id,user_id:r,name:e.name,species:e.species,color:t,photo_url:e.photo_url||null,insurance_company:e.insuranceCompany,policy_number:e.policyNumber,owner_name:e.ownerName||"",owner_phone:e.ownerPhone||"",filing_deadline_days:e.filing_deadline_days||e.filingDeadlineDays||null,monthly_premium:e.monthly_premium??null,deductible_per_claim:e.deductible_per_claim??null,coverage_start_date:e.coverage_start_date||null,insurance_pays_percentage:e.insurance_pays_percentage??null,annual_coverage_limit:e.annual_coverage_limit??null,healthy_paws_pet_id:e.healthy_paws_pet_id||null};console.log("[dbUpsertPet] userId=",r,"payload=",n);const{error:i}=await At.from("pets").upsert(n,{onConflict:"id"}).select();if(i)throw i}async function $5(r,e){console.log("[dbDeletePet] userId=",r,"petId=",e);const{error:t}=await At.from("pets").delete().eq("user_id",r).eq("id",e);if(t)throw t}async function xg(r,e){const t={id:r,email:e??null};console.log("[dbEnsureProfile] upserting profile",t);const{error:n}=await At.from("profiles").upsert(t,{onConflict:"id"}).select();if(n)throw n}async function W5(r){console.log("[createPet] received payload:",r);const{data:e,error:t}=await At.from("pets").insert([{user_id:r.user_id,name:r.name,species:r.species,color:r.color??null,photo_url:r.photo_url??null,insurance_company:r.insurance_company??null,policy_number:r.policy_number??null,breed:r.breed??null,weight_lbs:r.weight_lbs??null,monthly_premium:r.monthly_premium??null,deductible_per_claim:r.deductible_per_claim??null,coverage_start_date:r.coverage_start_date??null,annual_coverage_limit:r.annual_coverage_limit??null,insurance_pays_percentage:r.insurance_pays_percentage??null}]).select("*").single();if(console.log("[createPet] insert result:",{data:e,error:t}),t)throw t;return e}function Tr(r){"@babel/helpers - typeof";return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(r)}var Ta=Uint8Array,Pi=Uint16Array,bm=Int32Array,wm=new Ta([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_m=new Ta([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bg=new Ta([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F2=function(r,e){for(var t=new Pi(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new bm(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)i[o]=o-t[n]<<5|n;return{b:t,r:i}},M2=F2(wm,2),V5=M2.b,$0=M2.r;V5[28]=258,$0[258]=28;var H5=F2(_m,0),wg=H5.r,W0=new Pi(32768);for(var en=0;en<32768;++en){var gl=(en&43690)>>1|(en&21845)<<1;gl=(gl&52428)>>2|(gl&13107)<<2,gl=(gl&61680)>>4|(gl&3855)<<4,W0[en]=((gl&65280)>>8|(gl&255)<<8)>>1}var id=(function(r,e,t){for(var n=r.length,i=0,o=new Pi(e);i<n;++i)r[i]&&++o[r[i]-1];var l=new Pi(e);for(i=1;i<e;++i)l[i]=l[i-1]+o[i-1]<<1;var d;if(t){d=new Pi(1<<e);var h=15-e;for(i=0;i<n;++i)if(r[i])for(var m=i<<4|r[i],v=e-r[i],w=l[r[i]-1]++<<v,k=w|(1<<v)-1;w<=k;++w)d[W0[w]>>h]=m}else for(d=new Pi(n),i=0;i<n;++i)r[i]&&(d[i]=W0[l[r[i]-1]++]>>15-r[i]);return d}),cu=new Ta(288);for(var en=0;en<144;++en)cu[en]=8;for(var en=144;en<256;++en)cu[en]=9;for(var en=256;en<280;++en)cu[en]=7;for(var en=280;en<288;++en)cu[en]=8;var Dh=new Ta(32);for(var en=0;en<32;++en)Dh[en]=5;var G5=id(cu,9,0),Y5=id(Dh,5,0),R2=function(r){return(r+7)/8|0},K5=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Ta(r.subarray(e,t))},Io=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Kc=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Qf=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,o=t.slice();if(!i)return{t:B2,l:0};if(i==1){var l=new Ta(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(le,me){return le.f-me.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],m=0,v=1,w=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};v!=i-1;)d=t[t[m].f<t[w].f?m++:w++],h=t[m!=v&&t[m].f<t[w].f?m++:w++],t[v++]={s:-1,f:d.f+h.f,l:d,r:h};for(var k=o[0].s,n=1;n<i;++n)o[n].s>k&&(k=o[n].s);var x=new Pi(k+1),T=V0(t[v-1],x,0);if(T>e){var n=0,C=0,E=T-e,j=1<<E;for(o.sort(function(me,U){return x[U.s]-x[me.s]||me.f-U.f});n<i;++n){var K=o[n].s;if(x[K]>e)C+=j-(1<<T-x[K]),x[K]=e;else break}for(C>>=E;C>0;){var B=o[n].s;x[B]<e?C-=1<<e-x[B]++-1:++n}for(;n>=0&&C;--n){var $=o[n].s;x[$]==e&&(--x[$],++C)}T=e}return{t:new Ta(x),l:T}},V0=function(r,e,t){return r.s==-1?Math.max(V0(r.l,e,t+1),V0(r.r,e,t+1)):e[r.s]=t},_g=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Pi(++e),n=0,i=r[0],o=1,l=function(h){t[n++]=h},d=1;d<=e;++d)if(r[d]==i&&d!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=r[d]}return{c:t.subarray(0,n),n:e}},Jc=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},U2=function(r,e,t){var n=t.length,i=R2(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var o=0;o<n;++o)r[i+o+4]=t[o];return(i+4+n)*8},Ng=function(r,e,t,n,i,o,l,d,h,m,v){Io(e,v++,t),++i[256];for(var w=Qf(i,15),k=w.t,x=w.l,T=Qf(o,15),C=T.t,E=T.l,j=_g(k),K=j.c,B=j.n,$=_g(C),le=$.c,me=$.n,U=new Pi(19),z=0;z<K.length;++z)++U[K[z]&31];for(var z=0;z<le.length;++z)++U[le[z]&31];for(var I=Qf(U,7),W=I.t,O=I.l,F=19;F>4&&!W[bg[F-1]];--F);var Z=m+5<<3,ee=Jc(i,cu)+Jc(o,Dh)+l,ae=Jc(i,k)+Jc(o,C)+l+14+3*F+Jc(U,W)+2*U[16]+3*U[17]+7*U[18];if(h>=0&&Z<=ee&&Z<=ae)return U2(e,v,r.subarray(h,h+m));var he,be,ne,fe;if(Io(e,v,1+(ae<ee)),v+=2,ae<ee){he=id(k,x,0),be=k,ne=id(C,E,0),fe=C;var ke=id(W,O,0);Io(e,v,B-257),Io(e,v+5,me-1),Io(e,v+10,F-4),v+=14;for(var z=0;z<F;++z)Io(e,v+3*z,W[bg[z]]);v+=3*F;for(var Y=[K,le],A=0;A<2;++A)for(var H=Y[A],z=0;z<H.length;++z){var Q=H[z]&31;Io(e,v,ke[Q]),v+=W[Q],Q>15&&(Io(e,v,H[z]>>5&127),v+=H[z]>>12)}}else he=G5,be=cu,ne=Y5,fe=Dh;for(var z=0;z<d;++z){var ie=n[z];if(ie>255){var Q=ie>>18&31;Kc(e,v,he[Q+257]),v+=be[Q+257],Q>7&&(Io(e,v,ie>>23&31),v+=wm[Q]);var se=ie&31;Kc(e,v,ne[se]),v+=fe[se],se>3&&(Kc(e,v,ie>>5&8191),v+=_m[se])}else Kc(e,v,he[ie]),v+=be[ie]}return Kc(e,v,he[256]),v+be[256]},J5=new bm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B2=new Ta(0),Z5=function(r,e,t,n,i,o){var l=o.z||r.length,d=new Ta(n+l+5*(1+Math.ceil(l/7e3))+i),h=d.subarray(n,d.length-i),m=o.l,v=(o.r||0)&7;if(e){v&&(h[0]=o.r>>3);for(var w=J5[e-1],k=w>>13,x=w&8191,T=(1<<t)-1,C=o.p||new Pi(32768),E=o.h||new Pi(T+1),j=Math.ceil(t/3),K=2*j,B=function(dt){return(r[dt]^r[dt+1]<<j^r[dt+2]<<K)&T},$=new bm(25e3),le=new Pi(288),me=new Pi(32),U=0,z=0,I=o.i||0,W=0,O=o.w||0,F=0;I+2<l;++I){var Z=B(I),ee=I&32767,ae=E[Z];if(C[ee]=ae,E[Z]=ee,O<=I){var he=l-I;if((U>7e3||W>24576)&&(he>423||!m)){v=Ng(r,h,0,$,le,me,z,W,F,I-F,v),W=U=z=0,F=I;for(var be=0;be<286;++be)le[be]=0;for(var be=0;be<30;++be)me[be]=0}var ne=2,fe=0,ke=x,Y=ee-ae&32767;if(he>2&&Z==B(I-Y))for(var A=Math.min(k,he)-1,H=Math.min(32767,I),Q=Math.min(258,he);Y<=H&&--ke&&ee!=ae;){if(r[I+ne]==r[I+ne-Y]){for(var ie=0;ie<Q&&r[I+ie]==r[I+ie-Y];++ie);if(ie>ne){if(ne=ie,fe=Y,ie>A)break;for(var se=Math.min(Y,ie-2),ye=0,be=0;be<se;++be){var ce=I-Y+be&32767,Ae=C[ce],Pe=ce-Ae&32767;Pe>ye&&(ye=Pe,ae=ce)}}}ee=ae,ae=C[ee],Y+=ee-ae&32767}if(fe){$[W++]=268435456|$0[ne]<<18|wg[fe];var ze=$0[ne]&31,He=wg[fe]&31;z+=wm[ze]+_m[He],++le[257+ze],++me[He],O=I+ne,++U}else $[W++]=r[I],++le[r[I]]}}for(I=Math.max(I,O);I<l;++I)$[W++]=r[I],++le[r[I]];v=Ng(r,h,m,$,le,me,z,W,F,I-F,v),m||(o.r=v&7|h[v/8|0]<<3,v-=7,o.h=E,o.p=C,o.i=I,o.w=O)}else{for(var I=o.w||0;I<l+m;I+=65535){var Je=I+65535;Je>=l&&(h[v/8|0]=m,Je=l),v=U2(h,v+1,r.subarray(I,Je))}o.i=l}return K5(d,0,n+R2(v)+i)},q2=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,o=t.length|0,l=0;l!=o;){for(var d=Math.min(l+2655,o);l<d;++l)i+=n+=t[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},X5=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new Ta(o.length+r.length);l.set(o),l.set(r,o.length),r=l,i.w=o.length}return Z5(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},z2=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},Q5=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=q2();i.p(e.dictionary),z2(r,2,i.d())}};function H0(r,e){e||(e={});var t=q2();t.p(r);var n=X5(r,e,e.dictionary?6:2,4);return Q5(n,e),z2(n,n.length-4,t.d()),n}var ew=typeof TextDecoder<"u"&&new TextDecoder,tw=0;try{ew.decode(B2,{stream:!0}),tw=1}catch{}function rw(r){if(Array.isArray(r))return r}function nw(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,l,d=[],h=!0,m=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(h=(n=o.call(t)).done)&&(d.push(n.value),d.length!==e);h=!0);}catch(v){m=!0,i=v}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(m)throw i}}return d}}function kg(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function sw(r,e){if(r){if(typeof r=="string")return kg(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kg(r,e):void 0}}function iw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sg(r,e){return rw(r)||nw(r,e)||sw(r,e)||iw()}function jg(r,e="utf8"){return new TextDecoder(e).decode(r)}const aw=new TextEncoder;function ow(r){return aw.encode(r)}const lw=1024*8,uw=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),e0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Nm{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=lw,t={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,o=e.byteLength-i;let l=i;(ArrayBuffer.isView(e)||e instanceof Nm)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=e0[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===uw&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(i,i+n));d.reverse();const h=new e0[t](d.buffer);return this.offset+=n,h.reverse(),h}const l=new e0[t](o);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return jg(this.readBytes(e))}decodeText(e=1,t="utf8"){return jg(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(ow(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function yc(r){let e=r.length;for(;--e>=0;)r[e]=0}const cw=3,dw=258,$2=29,hw=256,fw=hw+1+$2,W2=30,mw=512,pw=new Array((fw+2)*2);yc(pw);const gw=new Array(W2*2);yc(gw);const vw=new Array(mw);yc(vw);const yw=new Array(dw-cw+1);yc(yw);const xw=new Array($2);yc(xw);const bw=new Array(W2);yc(bw);const ww=(r,e,t,n)=>{let i=r&65535|0,o=r>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do i=i+e[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};var G0=ww;const _w=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},Nw=new Uint32Array(_w()),kw=(r,e,t,n)=>{const i=Nw,o=n+t;r^=-1;for(let l=n;l<o;l++)r=r>>>8^i[(r^e[l])&255];return r^-1};var ro=kw,Y0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Sw=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var jw=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Sw(t,n)&&(r[n]=t[n])}}return r},Aw=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,o=r.length;n<o;n++){let l=r[n];t.set(l,i),i+=l.length}return t},H2={assign:jw,flattenChunks:Aw};let G2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{G2=!1}const cd=new Uint8Array(256);for(let r=0;r<256;r++)cd[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;cd[254]=cd[254]=1;var Cw=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,o,l=r.length,d=0;for(i=0;i<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,i=0;o<d;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const Ew=(r,e)=>{if(e<65534&&r.subarray&&G2)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var Pw=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const o=new Array(t*2);for(i=0,n=0;n<t;){let l=r[n++];if(l<128){o[i++]=l;continue}let d=cd[l];if(d>4){o[i++]=65533,n+=d-1;continue}for(l&=d===2?31:d===3?15:7;d>1&&n<t;)l=l<<6|r[n++]&63,d--;if(d>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return Ew(o,i)},Lw=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+cd[r[t]]>e?t:e},K0={string2buf:Cw,buf2string:Pw,utf8border:Lw};function Tw(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ow=Tw;const ah=16209,Iw=16191;var Dw=function(e,t){let n,i,o,l,d,h,m,v,w,k,x,T,C,E,j,K,B,$,le,me,U,z,I,W;const O=e.state;n=e.next_in,I=e.input,i=n+(e.avail_in-5),o=e.next_out,W=e.output,l=o-(t-e.avail_out),d=o+(e.avail_out-257),h=O.dmax,m=O.wsize,v=O.whave,w=O.wnext,k=O.window,x=O.hold,T=O.bits,C=O.lencode,E=O.distcode,j=(1<<O.lenbits)-1,K=(1<<O.distbits)-1;e:do{T<15&&(x+=I[n++]<<T,T+=8,x+=I[n++]<<T,T+=8),B=C[x&j];t:for(;;){if($=B>>>24,x>>>=$,T-=$,$=B>>>16&255,$===0)W[o++]=B&65535;else if($&16){le=B&65535,$&=15,$&&(T<$&&(x+=I[n++]<<T,T+=8),le+=x&(1<<$)-1,x>>>=$,T-=$),T<15&&(x+=I[n++]<<T,T+=8,x+=I[n++]<<T,T+=8),B=E[x&K];r:for(;;){if($=B>>>24,x>>>=$,T-=$,$=B>>>16&255,$&16){if(me=B&65535,$&=15,T<$&&(x+=I[n++]<<T,T+=8,T<$&&(x+=I[n++]<<T,T+=8)),me+=x&(1<<$)-1,me>h){e.msg="invalid distance too far back",O.mode=ah;break e}if(x>>>=$,T-=$,$=o-l,me>$){if($=me-$,$>v&&O.sane){e.msg="invalid distance too far back",O.mode=ah;break e}if(U=0,z=k,w===0){if(U+=m-$,$<le){le-=$;do W[o++]=k[U++];while(--$);U=o-me,z=W}}else if(w<$){if(U+=m+w-$,$-=w,$<le){le-=$;do W[o++]=k[U++];while(--$);if(U=0,w<le){$=w,le-=$;do W[o++]=k[U++];while(--$);U=o-me,z=W}}}else if(U+=w-$,$<le){le-=$;do W[o++]=k[U++];while(--$);U=o-me,z=W}for(;le>2;)W[o++]=z[U++],W[o++]=z[U++],W[o++]=z[U++],le-=3;le&&(W[o++]=z[U++],le>1&&(W[o++]=z[U++]))}else{U=o-me;do W[o++]=W[U++],W[o++]=W[U++],W[o++]=W[U++],le-=3;while(le>2);le&&(W[o++]=W[U++],le>1&&(W[o++]=W[U++]))}}else if(($&64)===0){B=E[(B&65535)+(x&(1<<$)-1)];continue r}else{e.msg="invalid distance code",O.mode=ah;break e}break}}else if(($&64)===0){B=C[(B&65535)+(x&(1<<$)-1)];continue t}else if($&32){O.mode=Iw;break e}else{e.msg="invalid literal/length code",O.mode=ah;break e}break}}while(n<i&&o<d);le=T>>3,n-=le,T-=le<<3,x&=(1<<T)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=o<d?257+(d-o):257-(o-d),O.hold=x,O.bits=T};const Ju=15,Ag=852,Cg=592,Eg=0,t0=1,Pg=2,Fw=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Mw=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Rw=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Uw=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Bw=(r,e,t,n,i,o,l,d)=>{const h=d.bits;let m=0,v=0,w=0,k=0,x=0,T=0,C=0,E=0,j=0,K=0,B,$,le,me,U,z=null,I;const W=new Uint16Array(Ju+1),O=new Uint16Array(Ju+1);let F=null,Z,ee,ae;for(m=0;m<=Ju;m++)W[m]=0;for(v=0;v<n;v++)W[e[t+v]]++;for(x=h,k=Ju;k>=1&&W[k]===0;k--);if(x>k&&(x=k),k===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,d.bits=1,0;for(w=1;w<k&&W[w]===0;w++);for(x<w&&(x=w),E=1,m=1;m<=Ju;m++)if(E<<=1,E-=W[m],E<0)return-1;if(E>0&&(r===Eg||k!==1))return-1;for(O[1]=0,m=1;m<Ju;m++)O[m+1]=O[m]+W[m];for(v=0;v<n;v++)e[t+v]!==0&&(l[O[e[t+v]]++]=v);if(r===Eg?(z=F=l,I=20):r===t0?(z=Fw,F=Mw,I=257):(z=Rw,F=Uw,I=0),K=0,v=0,m=w,U=o,T=x,C=0,le=-1,j=1<<x,me=j-1,r===t0&&j>Ag||r===Pg&&j>Cg)return 1;for(;;){Z=m-C,l[v]+1<I?(ee=0,ae=l[v]):l[v]>=I?(ee=F[l[v]-I],ae=z[l[v]-I]):(ee=96,ae=0),B=1<<m-C,$=1<<T,w=$;do $-=B,i[U+(K>>C)+$]=Z<<24|ee<<16|ae|0;while($!==0);for(B=1<<m-1;K&B;)B>>=1;if(B!==0?(K&=B-1,K+=B):K=0,v++,--W[m]===0){if(m===k)break;m=e[t+l[v]]}if(m>x&&(K&me)!==le){for(C===0&&(C=x),U+=w,T=m-C,E=1<<T;T+C<k&&(E-=W[T+C],!(E<=0));)T++,E<<=1;if(j+=1<<T,r===t0&&j>Ag||r===Pg&&j>Cg)return 1;le=K&me,i[le]=x<<24|T<<16|U-o|0}}return K!==0&&(i[U+K]=m-C<<24|64<<16|0),d.bits=x,0};var ad=Bw;const qw=0,Y2=1,K2=2,{Z_FINISH:Lg,Z_BLOCK:zw,Z_TREES:oh,Z_OK:du,Z_STREAM_END:$w,Z_NEED_DICT:Ww,Z_STREAM_ERROR:ea,Z_DATA_ERROR:J2,Z_MEM_ERROR:Z2,Z_BUF_ERROR:Vw,Z_DEFLATED:Tg}=V2,Vh=16180,Og=16181,Ig=16182,Dg=16183,Fg=16184,Mg=16185,Rg=16186,Ug=16187,Bg=16188,qg=16189,Fh=16190,Do=16191,r0=16192,zg=16193,n0=16194,$g=16195,Wg=16196,Vg=16197,Hg=16198,lh=16199,uh=16200,Gg=16201,Yg=16202,Kg=16203,Jg=16204,Zg=16205,s0=16206,Xg=16207,Qg=16208,un=16209,X2=16210,Q2=16211,Hw=852,Gw=592,Yw=15,Kw=Yw,e1=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Jw(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const mu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Vh||e.mode>Q2?1:0},ev=r=>{if(mu(r))return ea;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Vh,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Hw),e.distcode=e.distdyn=new Int32Array(Gw),e.sane=1,e.back=-1,du},tv=r=>{if(mu(r))return ea;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,ev(r)},rv=(r,e)=>{let t;if(mu(r))return ea;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ea:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,tv(r))},nv=(r,e)=>{if(!r)return ea;const t=new Jw;r.state=t,t.strm=r,t.window=null,t.mode=Vh;const n=rv(r,e);return n!==du&&(r.state=null),n},Zw=r=>nv(r,Kw);let t1=!0,i0,a0;const Xw=r=>{if(t1){i0=new Int32Array(512),a0=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(ad(Y2,r.lens,0,288,i0,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;ad(K2,r.lens,0,32,a0,0,r.work,{bits:5}),t1=!1}r.lencode=i0,r.lenbits=9,r.distcode=a0,r.distbits=5},sv=(r,e,t,n)=>{let i;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(t-n,t-n+i),o.wnext),n-=i,n?(o.window.set(e.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Qw=(r,e)=>{let t,n,i,o,l,d,h,m,v,w,k,x,T,C,E=0,j,K,B,$,le,me,U,z;const I=new Uint8Array(4);let W,O;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mu(r)||!r.output||!r.input&&r.avail_in!==0)return ea;t=r.state,t.mode===Do&&(t.mode=r0),l=r.next_out,i=r.output,h=r.avail_out,o=r.next_in,n=r.input,d=r.avail_in,m=t.hold,v=t.bits,w=d,k=h,z=du;e:for(;;)switch(t.mode){case Vh:if(t.wrap===0){t.mode=r0;break}for(;v<16;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(t.wrap&2&&m===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=m&255,I[1]=m>>>8&255,t.check=ro(t.check,I,2,0),m=0,v=0,t.mode=Og;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((m&255)<<8)+(m>>8))%31){r.msg="incorrect header check",t.mode=un;break}if((m&15)!==Tg){r.msg="unknown compression method",t.mode=un;break}if(m>>>=4,v-=4,U=(m&15)+8,t.wbits===0&&(t.wbits=U),U>15||U>t.wbits){r.msg="invalid window size",t.mode=un;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=m&512?qg:Do,m=0,v=0;break;case Og:for(;v<16;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(t.flags=m,(t.flags&255)!==Tg){r.msg="unknown compression method",t.mode=un;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=un;break}t.head&&(t.head.text=m>>8&1),t.flags&512&&t.wrap&4&&(I[0]=m&255,I[1]=m>>>8&255,t.check=ro(t.check,I,2,0)),m=0,v=0,t.mode=Ig;case Ig:for(;v<32;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}t.head&&(t.head.time=m),t.flags&512&&t.wrap&4&&(I[0]=m&255,I[1]=m>>>8&255,I[2]=m>>>16&255,I[3]=m>>>24&255,t.check=ro(t.check,I,4,0)),m=0,v=0,t.mode=Dg;case Dg:for(;v<16;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}t.head&&(t.head.xflags=m&255,t.head.os=m>>8),t.flags&512&&t.wrap&4&&(I[0]=m&255,I[1]=m>>>8&255,t.check=ro(t.check,I,2,0)),m=0,v=0,t.mode=Fg;case Fg:if(t.flags&1024){for(;v<16;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}t.length=m,t.head&&(t.head.extra_len=m),t.flags&512&&t.wrap&4&&(I[0]=m&255,I[1]=m>>>8&255,t.check=ro(t.check,I,2,0)),m=0,v=0}else t.head&&(t.head.extra=null);t.mode=Mg;case Mg:if(t.flags&1024&&(x=t.length,x>d&&(x=d),x&&(t.head&&(U=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+x),U)),t.flags&512&&t.wrap&4&&(t.check=ro(t.check,n,x,o)),d-=x,o+=x,t.length-=x),t.length))break e;t.length=0,t.mode=Rg;case Rg:if(t.flags&2048){if(d===0)break e;x=0;do U=n[o+x++],t.head&&U&&t.length<65536&&(t.head.name+=String.fromCharCode(U));while(U&&x<d);if(t.flags&512&&t.wrap&4&&(t.check=ro(t.check,n,x,o)),d-=x,o+=x,U)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Ug;case Ug:if(t.flags&4096){if(d===0)break e;x=0;do U=n[o+x++],t.head&&U&&t.length<65536&&(t.head.comment+=String.fromCharCode(U));while(U&&x<d);if(t.flags&512&&t.wrap&4&&(t.check=ro(t.check,n,x,o)),d-=x,o+=x,U)break e}else t.head&&(t.head.comment=null);t.mode=Bg;case Bg:if(t.flags&512){for(;v<16;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(t.wrap&4&&m!==(t.check&65535)){r.msg="header crc mismatch",t.mode=un;break}m=0,v=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=Do;break;case qg:for(;v<32;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}r.adler=t.check=e1(m),m=0,v=0,t.mode=Fh;case Fh:if(t.havedict===0)return r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=m,t.bits=v,Ww;r.adler=t.check=1,t.mode=Do;case Do:if(e===zw||e===oh)break e;case r0:if(t.last){m>>>=v&7,v-=v&7,t.mode=s0;break}for(;v<3;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}switch(t.last=m&1,m>>>=1,v-=1,m&3){case 0:t.mode=zg;break;case 1:if(Xw(t),t.mode=lh,e===oh){m>>>=2,v-=2;break e}break;case 2:t.mode=Wg;break;case 3:r.msg="invalid block type",t.mode=un}m>>>=2,v-=2;break;case zg:for(m>>>=v&7,v-=v&7;v<32;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if((m&65535)!==(m>>>16^65535)){r.msg="invalid stored block lengths",t.mode=un;break}if(t.length=m&65535,m=0,v=0,t.mode=n0,e===oh)break e;case n0:t.mode=$g;case $g:if(x=t.length,x){if(x>d&&(x=d),x>h&&(x=h),x===0)break e;i.set(n.subarray(o,o+x),l),d-=x,o+=x,h-=x,l+=x,t.length-=x;break}t.mode=Do;break;case Wg:for(;v<14;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(t.nlen=(m&31)+257,m>>>=5,v-=5,t.ndist=(m&31)+1,m>>>=5,v-=5,t.ncode=(m&15)+4,m>>>=4,v-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=un;break}t.have=0,t.mode=Vg;case Vg:for(;t.have<t.ncode;){for(;v<3;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}t.lens[F[t.have++]]=m&7,m>>>=3,v-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,W={bits:t.lenbits},z=ad(qw,t.lens,0,19,t.lencode,0,t.work,W),t.lenbits=W.bits,z){r.msg="invalid code lengths set",t.mode=un;break}t.have=0,t.mode=Hg;case Hg:for(;t.have<t.nlen+t.ndist;){for(;E=t.lencode[m&(1<<t.lenbits)-1],j=E>>>24,K=E>>>16&255,B=E&65535,!(j<=v);){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(B<16)m>>>=j,v-=j,t.lens[t.have++]=B;else{if(B===16){for(O=j+2;v<O;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(m>>>=j,v-=j,t.have===0){r.msg="invalid bit length repeat",t.mode=un;break}U=t.lens[t.have-1],x=3+(m&3),m>>>=2,v-=2}else if(B===17){for(O=j+3;v<O;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}m>>>=j,v-=j,U=0,x=3+(m&7),m>>>=3,v-=3}else{for(O=j+7;v<O;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}m>>>=j,v-=j,U=0,x=11+(m&127),m>>>=7,v-=7}if(t.have+x>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=un;break}for(;x--;)t.lens[t.have++]=U}}if(t.mode===un)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=un;break}if(t.lenbits=9,W={bits:t.lenbits},z=ad(Y2,t.lens,0,t.nlen,t.lencode,0,t.work,W),t.lenbits=W.bits,z){r.msg="invalid literal/lengths set",t.mode=un;break}if(t.distbits=6,t.distcode=t.distdyn,W={bits:t.distbits},z=ad(K2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,W),t.distbits=W.bits,z){r.msg="invalid distances set",t.mode=un;break}if(t.mode=lh,e===oh)break e;case lh:t.mode=uh;case uh:if(d>=6&&h>=258){r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=m,t.bits=v,Dw(r,k),l=r.next_out,i=r.output,h=r.avail_out,o=r.next_in,n=r.input,d=r.avail_in,m=t.hold,v=t.bits,t.mode===Do&&(t.back=-1);break}for(t.back=0;E=t.lencode[m&(1<<t.lenbits)-1],j=E>>>24,K=E>>>16&255,B=E&65535,!(j<=v);){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(K&&(K&240)===0){for($=j,le=K,me=B;E=t.lencode[me+((m&(1<<$+le)-1)>>$)],j=E>>>24,K=E>>>16&255,B=E&65535,!($+j<=v);){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}m>>>=$,v-=$,t.back+=$}if(m>>>=j,v-=j,t.back+=j,t.length=B,K===0){t.mode=Zg;break}if(K&32){t.back=-1,t.mode=Do;break}if(K&64){r.msg="invalid literal/length code",t.mode=un;break}t.extra=K&15,t.mode=Gg;case Gg:if(t.extra){for(O=t.extra;v<O;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}t.length+=m&(1<<t.extra)-1,m>>>=t.extra,v-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Yg;case Yg:for(;E=t.distcode[m&(1<<t.distbits)-1],j=E>>>24,K=E>>>16&255,B=E&65535,!(j<=v);){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if((K&240)===0){for($=j,le=K,me=B;E=t.distcode[me+((m&(1<<$+le)-1)>>$)],j=E>>>24,K=E>>>16&255,B=E&65535,!($+j<=v);){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}m>>>=$,v-=$,t.back+=$}if(m>>>=j,v-=j,t.back+=j,K&64){r.msg="invalid distance code",t.mode=un;break}t.offset=B,t.extra=K&15,t.mode=Kg;case Kg:if(t.extra){for(O=t.extra;v<O;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}t.offset+=m&(1<<t.extra)-1,m>>>=t.extra,v-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=un;break}t.mode=Jg;case Jg:if(h===0)break e;if(x=k-h,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=un;break}x>t.wnext?(x-=t.wnext,T=t.wsize-x):T=t.wnext-x,x>t.length&&(x=t.length),C=t.window}else C=i,T=l-t.offset,x=t.length;x>h&&(x=h),h-=x,t.length-=x;do i[l++]=C[T++];while(--x);t.length===0&&(t.mode=uh);break;case Zg:if(h===0)break e;i[l++]=t.length,h--,t.mode=uh;break;case s0:if(t.wrap){for(;v<32;){if(d===0)break e;d--,m|=n[o++]<<v,v+=8}if(k-=h,r.total_out+=k,t.total+=k,t.wrap&4&&k&&(r.adler=t.check=t.flags?ro(t.check,i,k,l-k):G0(t.check,i,k,l-k)),k=h,t.wrap&4&&(t.flags?m:e1(m))!==t.check){r.msg="incorrect data check",t.mode=un;break}m=0,v=0}t.mode=Xg;case Xg:if(t.wrap&&t.flags){for(;v<32;){if(d===0)break e;d--,m+=n[o++]<<v,v+=8}if(t.wrap&4&&m!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=un;break}m=0,v=0}t.mode=Qg;case Qg:z=$w;break e;case un:z=J2;break e;case X2:return Z2;case Q2:default:return ea}return r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=m,t.bits=v,(t.wsize||k!==r.avail_out&&t.mode<un&&(t.mode<s0||e!==Lg))&&sv(r,r.output,r.next_out,k-r.avail_out),w-=r.avail_in,k-=r.avail_out,r.total_in+=w,r.total_out+=k,t.total+=k,t.wrap&4&&k&&(r.adler=t.check=t.flags?ro(t.check,i,k,r.next_out-k):G0(t.check,i,k,r.next_out-k)),r.data_type=t.bits+(t.last?64:0)+(t.mode===Do?128:0)+(t.mode===lh||t.mode===n0?256:0),(w===0&&k===0||e===Lg)&&z===du&&(z=Vw),z},e_=r=>{if(mu(r))return ea;let e=r.state;return e.window&&(e.window=null),r.state=null,du},t_=(r,e)=>{if(mu(r))return ea;const t=r.state;return(t.wrap&2)===0?ea:(t.head=e,e.done=!1,du)},r_=(r,e)=>{const t=e.length;let n,i,o;return mu(r)||(n=r.state,n.wrap!==0&&n.mode!==Fh)?ea:n.mode===Fh&&(i=1,i=G0(i,e,t,0),i!==n.check)?J2:(o=sv(r,e,t,t),o?(n.mode=X2,Z2):(n.havedict=1,du))};var n_=tv,s_=rv,i_=ev,a_=Zw,o_=nv,l_=Qw,u_=e_,c_=t_,d_=r_,h_="pako inflate (from Nodeca project)",Ro={inflateReset:n_,inflateReset2:s_,inflateResetKeep:i_,inflateInit:a_,inflateInit2:o_,inflate:l_,inflateEnd:u_,inflateGetHeader:c_,inflateSetDictionary:d_,inflateInfo:h_};function f_(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var m_=f_;const iv=Object.prototype.toString,{Z_NO_FLUSH:p_,Z_FINISH:g_,Z_OK:dd,Z_STREAM_END:o0,Z_NEED_DICT:l0,Z_STREAM_ERROR:v_,Z_DATA_ERROR:r1,Z_MEM_ERROR:y_}=V2;function pd(r){this.options=H2.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ow,this.strm.avail_out=0;let t=Ro.inflateInit2(this.strm,e.windowBits);if(t!==dd)throw new Error(Y0[t]);if(this.header=new m_,Ro.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=K0.string2buf(e.dictionary):iv.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Ro.inflateSetDictionary(this.strm,e.dictionary),t!==dd)))throw new Error(Y0[t])}pd.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,l,d;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?g_:p_,iv.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=Ro.inflate(t,l),o===l0&&i&&(o=Ro.inflateSetDictionary(t,i),o===dd?o=Ro.inflate(t,l):o===r1&&(o=l0));t.avail_in>0&&o===o0&&t.state.wrap>0&&r[t.next_in]!==0;)Ro.inflateReset(t),o=Ro.inflate(t,l);switch(o){case v_:case r1:case l0:case y_:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===o0))if(this.options.to==="string"){let h=K0.utf8border(t.output,t.next_out),m=t.next_out-h,v=K0.buf2string(t.output,h);t.next_out=m,t.avail_out=n-m,m&&t.output.set(t.output.subarray(h,h+m),0),this.onData(v)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===dd&&d===0)){if(o===o0)return o=Ro.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};pd.prototype.onData=function(r){this.chunks.push(r)};pd.prototype.onEnd=function(r){r===dd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=H2.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function x_(r,e){const t=new pd(e);if(t.push(r),t.err)throw t.msg||Y0[t.err];return t.result}var b_=pd,w_=x_,__={Inflate:b_,inflate:w_};const{Inflate:N_,inflate:k_}=__;var n1=N_,S_=k_;const av=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;av[r]=e}const s1=4294967295;function j_(r,e,t){let n=r;for(let i=0;i<t;i++)n=av[(n^e[i])&255]^n>>>8;return n}function A_(r,e){return(j_(s1,r,e)^s1)>>>0}function i1(r,e,t){const n=r.readUint32(),i=A_(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function ov(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function lv(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function uv(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function cv(r,e,t,n,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=r[o];for(;o<n;o++)e[o]=r[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<n;o++)e[o]=r[o]+(e[o-i]+t[o]>>1)&255}}function dv(r,e,t,n,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=r[o];for(;o<n;o++)e[o]=r[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=r[o]+t[o]&255;for(;o<n;o++)e[o]=r[o]+C_(e[o-i],t[o],t[o-i])&255}}function C_(r,e,t){const n=r+e-t,i=Math.abs(n-r),o=Math.abs(n-e),l=Math.abs(n-t);return i<=o&&i<=l?r:o<=l?e:t}function E_(r,e,t,n,i,o){switch(r){case 0:ov(e,t,i);break;case 1:lv(e,t,i,o);break;case 2:uv(e,t,n,i);break;case 3:cv(e,t,n,i,o);break;case 4:dv(e,t,n,i,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const P_=new Uint16Array([255]),L_=new Uint8Array(P_.buffer),T_=L_[0]===255;function O_(r){const{data:e,width:t,height:n,channels:i,depth:o}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*i,h=new Uint8Array(n*t*d);let m=0;for(let v=0;v<7;v++){const w=l[v],k=Math.ceil((t-w.x)/w.xStep),x=Math.ceil((n-w.y)/w.yStep);if(k<=0||x<=0)continue;const T=k*d,C=new Uint8Array(T);for(let E=0;E<x;E++){const j=e[m++],K=e.subarray(m,m+T);m+=T;const B=new Uint8Array(T);E_(j,K,B,C,T,d),C.set(B);for(let $=0;$<k;$++){const le=w.x+$*w.xStep,me=w.y+E*w.yStep;if(!(le>=t||me>=n))for(let U=0;U<d;U++)h[(me*t+le)*d+U]=B[$*d+U]}}}if(o===16){const v=new Uint16Array(h.buffer);if(T_)for(let w=0;w<v.length;w++)v[w]=I_(v[w]);return v}else return h}function I_(r){return(r&255)<<8|r>>8&255}const D_=new Uint16Array([255]),F_=new Uint8Array(D_.buffer),M_=F_[0]===255,R_=new Uint8Array(0);function a1(r){const{data:e,width:t,height:n,channels:i,depth:o}=r,l=Math.ceil(o/8)*i,d=Math.ceil(o/8*i*t),h=new Uint8Array(n*d);let m=R_,v=0,w,k;for(let x=0;x<n;x++){switch(w=e.subarray(v+1,v+1+d),k=h.subarray(x*d,(x+1)*d),e[v]){case 0:ov(w,k,d);break;case 1:lv(w,k,d,l);break;case 2:uv(w,k,m,d);break;case 3:cv(w,k,m,d,l);break;case 4:dv(w,k,m,d,l);break;default:throw new Error(`Unsupported filter: ${e[v]}`)}m=k,v+=d+1}if(o===16){const x=new Uint16Array(h.buffer);if(M_)for(let T=0;T<x.length;T++)x[T]=U_(x[T]);return x}else return h}function U_(r){return(r&255)<<8|r>>8&255}const wh=Uint8Array.of(137,80,78,71,13,10,26,10);function o1(r){if(!B_(r.readBytes(wh.length)))throw new Error("wrong PNG signature")}function B_(r){if(r.length<wh.length)return!1;for(let e=0;e<wh.length;e++)if(r[e]!==wh[e])return!1;return!0}const q_="tEXt",z_=0,hv=new TextDecoder("latin1");function $_(r){if(V_(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const W_=/^[\u0000-\u00FF]*$/;function V_(r){if(!W_.test(r))throw new Error("invalid latin1 text")}function H_(r,e,t){const n=fv(e);r[n]=G_(e,t-n.length-1)}function fv(r){for(r.mark();r.readByte()!==z_;);const e=r.offset;r.reset();const t=hv.decode(r.readBytes(e-r.offset-1));return r.skip(1),$_(t),t}function G_(r,e){return hv.decode(r.readBytes(e))}const Ai={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},u0={UNKNOWN:-1,DEFLATE:0},l1={UNKNOWN:-1,ADAPTIVE:0},c0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ch={NONE:0,BACKGROUND:1,PREVIOUS:2},d0={SOURCE:0,OVER:1};class Y_ extends Nm{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new n1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=u0.UNKNOWN,this._filterMethod=l1.UNKNOWN,this._interlaceMethod=c0.UNKNOWN,this._colorType=Ai.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(o1(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(o1(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case q_:H_(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?i1(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?i1(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=K_(this.readUint8());const t=this.readUint8();this._colorType=t;let n;switch(t){case Ai.GREYSCALE:n=1;break;case Ai.TRUECOLOUR:n=3;break;case Ai.INDEXED_COLOUR:n=1;break;case Ai.GREYSCALE_ALPHA:n=2;break;case Ai.TRUECOLOUR_ALPHA:n=4;break;case Ai.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==u0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<t;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ai.GREYSCALE:case Ai.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ai.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const n=this.readByte();this._palette[t].push(n)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ai.UNKNOWN:case Ai.GREYSCALE_ALPHA:case Ai.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=fv(this),n=this.readUint8();if(n!==u0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:S_(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=a1({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(n,i,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case ch.NONE:break;case ch.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)n.data[l+d]=0}break;case ch.PREVIOUS:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,i=(o,l)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+l)*this._png.channels,h=(o*t.width+l)*this._png.channels;return{index:d,frameIndex:h}};switch(t.blendOp){case d0.SOURCE:for(let o=0;o<t.height;o++)for(let l=0;l<t.width;l++){const{index:d,frameIndex:h}=i(o,l);for(let m=0;m<this._png.channels;m++)e.data[d+m]=t.data[h+m]}break;case d0.OVER:for(let o=0;o<t.height;o++)for(let l=0;l<t.width;l++){const{index:d,frameIndex:h}=i(o,l);for(let m=0;m<this._png.channels;m++){const v=t.data[h+this._png.channels-1]/n,w=m%(this._png.channels-1)===0?1:t.data[h+m],k=Math.floor(v*w+(1-v)*e.data[d+m]);e.data[d+m]+=k}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==l1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===c0.NO_INTERLACE)this._png.data=a1({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===c0.ADAM7)this._png.data=O_({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ch.NONE,blendOp:d0.SOURCE,data:e}),this._inflator=new n1,this._writingDataChunks=!1}}function K_(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var u1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(u1||(u1={}));function J_(r,e){return new Y_(r,e).decode()}var Gt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function h0(){Gt.console&&typeof Gt.console.log=="function"&&Gt.console.log.apply(Gt.console,arguments)}var qr={log:h0,warn:function(r){Gt.console&&(typeof Gt.console.warn=="function"?Gt.console.warn.apply(Gt.console,arguments):h0.call(null,arguments))},error:function(r){Gt.console&&(typeof Gt.console.error=="function"?Gt.console.error.apply(Gt.console,arguments):h0(r))}};function f0(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){nu(n.response,e,t)},n.onerror=function(){qr.error("could not download file")},n.send()}function c1(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function dh(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var nu=Gt.saveAs||((typeof window>"u"?"undefined":Tr(window))!=="object"||window!==Gt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Gt.URL||Gt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?c1(i.href)?f0(r,e,t):dh(i,i.target="_blank"):dh(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){dh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(c1(r))f0(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){dh(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Tr(o)!=="object"&&(qr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return f0(r,e,t);var i=r.type==="application/octet-stream",o=/constructor/i.test(Gt.HTMLElement)||Gt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":Tr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var v=d.result;v=l?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=v:location=v,n=null},d.readAsDataURL(r)}else{var h=Gt.URL||Gt.webkitURL,m=h.createObjectURL(r);n?n.location=m:location.href=m,n=null,setTimeout(function(){h.revokeObjectURL(m)},4e4)}});function mv(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,o=t[n].process,l=i.exec(r);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),m=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),m.length==1&&(m="0"+m),"#"+d+h+m}}var _h=Gt.atob.bind(Gt),d1=Gt.btoa.bind(Gt);function m0(r,e){var t=r[0],n=r[1],i=r[2],o=r[3];t=Ds(t,n,i,o,e[0],7,-680876936),o=Ds(o,t,n,i,e[1],12,-389564586),i=Ds(i,o,t,n,e[2],17,606105819),n=Ds(n,i,o,t,e[3],22,-1044525330),t=Ds(t,n,i,o,e[4],7,-176418897),o=Ds(o,t,n,i,e[5],12,1200080426),i=Ds(i,o,t,n,e[6],17,-1473231341),n=Ds(n,i,o,t,e[7],22,-45705983),t=Ds(t,n,i,o,e[8],7,1770035416),o=Ds(o,t,n,i,e[9],12,-1958414417),i=Ds(i,o,t,n,e[10],17,-42063),n=Ds(n,i,o,t,e[11],22,-1990404162),t=Ds(t,n,i,o,e[12],7,1804603682),o=Ds(o,t,n,i,e[13],12,-40341101),i=Ds(i,o,t,n,e[14],17,-1502002290),t=Fs(t,n=Ds(n,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Fs(o,t,n,i,e[6],9,-1069501632),i=Fs(i,o,t,n,e[11],14,643717713),n=Fs(n,i,o,t,e[0],20,-373897302),t=Fs(t,n,i,o,e[5],5,-701558691),o=Fs(o,t,n,i,e[10],9,38016083),i=Fs(i,o,t,n,e[15],14,-660478335),n=Fs(n,i,o,t,e[4],20,-405537848),t=Fs(t,n,i,o,e[9],5,568446438),o=Fs(o,t,n,i,e[14],9,-1019803690),i=Fs(i,o,t,n,e[3],14,-187363961),n=Fs(n,i,o,t,e[8],20,1163531501),t=Fs(t,n,i,o,e[13],5,-1444681467),o=Fs(o,t,n,i,e[2],9,-51403784),i=Fs(i,o,t,n,e[7],14,1735328473),t=Ms(t,n=Fs(n,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Ms(o,t,n,i,e[8],11,-2022574463),i=Ms(i,o,t,n,e[11],16,1839030562),n=Ms(n,i,o,t,e[14],23,-35309556),t=Ms(t,n,i,o,e[1],4,-1530992060),o=Ms(o,t,n,i,e[4],11,1272893353),i=Ms(i,o,t,n,e[7],16,-155497632),n=Ms(n,i,o,t,e[10],23,-1094730640),t=Ms(t,n,i,o,e[13],4,681279174),o=Ms(o,t,n,i,e[0],11,-358537222),i=Ms(i,o,t,n,e[3],16,-722521979),n=Ms(n,i,o,t,e[6],23,76029189),t=Ms(t,n,i,o,e[9],4,-640364487),o=Ms(o,t,n,i,e[12],11,-421815835),i=Ms(i,o,t,n,e[15],16,530742520),t=Rs(t,n=Ms(n,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Rs(o,t,n,i,e[7],10,1126891415),i=Rs(i,o,t,n,e[14],15,-1416354905),n=Rs(n,i,o,t,e[5],21,-57434055),t=Rs(t,n,i,o,e[12],6,1700485571),o=Rs(o,t,n,i,e[3],10,-1894986606),i=Rs(i,o,t,n,e[10],15,-1051523),n=Rs(n,i,o,t,e[1],21,-2054922799),t=Rs(t,n,i,o,e[8],6,1873313359),o=Rs(o,t,n,i,e[15],10,-30611744),i=Rs(i,o,t,n,e[6],15,-1560198380),n=Rs(n,i,o,t,e[13],21,1309151649),t=Rs(t,n,i,o,e[4],6,-145523070),o=Rs(o,t,n,i,e[11],10,-1120210379),i=Rs(i,o,t,n,e[2],15,718787259),n=Rs(n,i,o,t,e[9],21,-343485551),r[0]=kl(t,r[0]),r[1]=kl(n,r[1]),r[2]=kl(i,r[2]),r[3]=kl(o,r[3])}function Hh(r,e,t,n,i,o){return e=kl(kl(e,r),kl(n,o)),kl(e<<i|e>>>32-i,t)}function Ds(r,e,t,n,i,o,l){return Hh(e&t|~e&n,r,e,i,o,l)}function Fs(r,e,t,n,i,o,l){return Hh(e&n|t&~n,r,e,i,o,l)}function Ms(r,e,t,n,i,o,l){return Hh(e^t^n,r,e,i,o,l)}function Rs(r,e,t,n,i,o,l){return Hh(t^(e|~n),r,e,i,o,l)}function pv(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)m0(n,Z_(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(m0(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,m0(n,i),n}function Z_(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var h1="0123456789abcdef".split("");function X_(r){for(var e="",t=0;t<4;t++)e+=h1[r>>8*t+4&15]+h1[r>>8*t&15];return e}function Q_(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function J0(r){return pv(r).map(Q_).join("")}var e3=(function(r){for(var e=0;e<r.length;e++)r[e]=X_(r[e]);return r.join("")})(pv("hello"))!="5d41402abc4b2a76b9719d911017c592";function kl(r,e){if(e3){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}function Z0(r,e){var t,n,i,o;if(r!==t){for(var l=(i=r,o=1+(256/r.length|0),new Array(o+1).join(i)),d=[],h=0;h<256;h++)d[h]=h;var m=0;for(h=0;h<256;h++){var v=d[h];m=(m+v+l.charCodeAt(h))%256,d[h]=d[m],d[m]=v}t=r,n=d}else d=n;var w=e.length,k=0,x=0,T="";for(h=0;h<w;h++)x=(x+(v=d[k=(k+1)%256]))%256,d[k]=d[x],d[x]=v,l=d[(d[k]+d[x])%256],T+=String.fromCharCode(e.charCodeAt(h)^l);return T}var f1={print:4,modify:8,copy:16,"annot-forms":32};function sc(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(d){if(f1.perm!==void 0)throw new Error("Invalid permission: "+d);i+=f1[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=J0(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Z0(this.encryptionKey,this.padding)}function ic(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function m1(r){if(Tr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[n,!!i],o},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var l=e[t][o];try{l[0].apply(r,n)}catch(d){Gt.console&&qr.error("jsPDF PubSub Error",d.message,d)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Mh(r){if(!(this instanceof Mh))return new Mh(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function gv(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function au(r,e,t,n,i){if(!(this instanceof au))return new au(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,gv.call(this,n,i)}function ac(r,e,t,n,i){if(!(this instanceof ac))return new ac(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,gv.call(this,n,i)}function jt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],l=[],d=1,h=16,m="S",v=null;Tr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,o=r.compress||r.compressPdf||o,(v=r.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),d=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),m=r.defaultPathOperation||"S"),l=r.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",t=(""+(t||"P")).toLowerCase();var w=r.putOnlyUsedFonts||!1,k={},x={internal:{},__private__:{}};x.__private__.PubSub=m1;var T="1.3",C=x.__private__.getPdfVersion=function(){return T};x.__private__.setPdfVersion=function(y){T=y};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return E};var j=x.__private__.getPageFormat=function(y){return E[y]};i=i||"a4";var K="compat",B="advanced",$=K;function le(){this.saveGraphicsState(),X(new St(Ot,0,0,-Ot,0,rt()*Ot).toString()+" cm"),this.setFontSize(this.getFontSize()/Ot),m="n",$=B}function me(){this.restoreGraphicsState(),m="S",$=K}var U=x.__private__.combineFontStyleAndFontWeight=function(y,L){if(y=="bold"&&L=="normal"||y=="bold"&&L==400||y=="normal"&&L=="italic"||y=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(y=L==400||L==="normal"?y==="italic"?"italic":"normal":L!=700&&L!=="bold"||y!=="normal"?(L==700?"bold":L)+""+y:"bold"),y};x.advancedAPI=function(y){var L=$===K;return L&&le.call(this),typeof y!="function"||(y(this),L&&me.call(this)),this},x.compatAPI=function(y){var L=$===B;return L&&me.call(this),typeof y!="function"||(y(this),L&&le.call(this)),this},x.isAdvancedAPI=function(){return $===B};var z,I=function(y){if($!==B)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},W=x.roundToPrecision=x.__private__.roundToPrecision=function(y,L){var J=e||L;if(isNaN(y)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(J).replace(/0+$/,"")};z=x.hpf=x.__private__.hpf=typeof h=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return W(y,h)}:h==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return W(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return W(y,16)};var O=x.f2=x.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return W(y,2)},F=x.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return W(y,3)},Z=x.scale=x.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return $===K?y*Ot:$===B?y:void 0},ee=function(y){return Z((function(L){return $===K?rt()-L:$===B?L:void 0})(y))};x.__private__.setPrecision=x.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var ae,he="00000000000000000000000000000000",be=x.__private__.getFileId=function(){return he},ne=x.__private__.setFileId=function(y){return he=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Xr=new sc(v.userPermissions,v.userPassword,v.ownerPassword,he)),he};x.setFileId=function(y){return ne(y),this},x.getFileId=function(){return be()};var fe=x.__private__.convertDateToPDFDate=function(y){var L=y.getTimezoneOffset(),J=L<0?"+":"-",ue=Math.floor(Math.abs(L/60)),xe=Math.abs(L%60),Oe=[J,Q(ue),"'",Q(xe),"'"].join("");return["D:",y.getFullYear(),Q(y.getMonth()+1),Q(y.getDate()),Q(y.getHours()),Q(y.getMinutes()),Q(y.getSeconds()),Oe].join("")},ke=x.__private__.convertPDFDateToDate=function(y){var L=parseInt(y.substr(2,4),10),J=parseInt(y.substr(6,2),10)-1,ue=parseInt(y.substr(8,2),10),xe=parseInt(y.substr(10,2),10),Oe=parseInt(y.substr(12,2),10),Ue=parseInt(y.substr(14,2),10);return new Date(L,J,ue,xe,Oe,Ue,0)},Y=x.__private__.setCreationDate=function(y){var L;if(y===void 0&&(y=new Date),y instanceof Date)L=fe(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=y}return ae=L},A=x.__private__.getCreationDate=function(y){var L=ae;return y==="jsDate"&&(L=ke(ae)),L};x.setCreationDate=function(y){return Y(y),this},x.getCreationDate=function(y){return A(y)};var H,Q=x.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},ie=x.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},se=0,ye=[],ce=[],Ae=0,Pe=[],ze=[],He=!1,Je=ce;x.__private__.setCustomOutputDestination=function(y){He=!0,Je=y};var dt=function(y){He||(Je=y)};x.__private__.resetCustomOutputDestination=function(){He=!1,Je=ce};var X=x.__private__.out=function(y){return y=y.toString(),Ae+=y.length+1,Je.push(y),Je},Qe=x.__private__.write=function(y){return X(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},Yt=x.__private__.getArrayBuffer=function(y){for(var L=y.length,J=new ArrayBuffer(L),ue=new Uint8Array(J);L--;)ue[L]=y.charCodeAt(L);return J},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ct};var $e=r.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(y){return $e=$===B?y/Ot:y,this};var wt,st=x.__private__.getFontSize=x.getFontSize=function(){return $===K?$e:$e*Ot},ot=r.R2L||!1;x.__private__.setR2L=x.setR2L=function(y){return ot=y,this},x.__private__.getR2L=x.getR2L=function(){return ot};var tt,hr=x.__private__.setZoomMode=function(y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))wt=y;else if(isNaN(y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');wt=y}else wt=parseInt(y,10)};x.__private__.getZoomMode=function(){return wt};var tr,Wt=x.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');tt=y};x.__private__.getPageMode=function(){return tt};var rr=x.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');tr=y};x.__private__.getLayoutMode=function(){return tr},x.__private__.setDisplayMode=x.setDisplayMode=function(y,L,J){return hr(y),rr(L),Wt(J),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(y){if(Object.keys(Lt).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[y]},x.__private__.getDocumentProperties=function(){return Lt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(y){for(var L in Lt)Lt.hasOwnProperty(L)&&y[L]&&(Lt[L]=y[L]);return this},x.__private__.setDocumentProperty=function(y,L){if(Object.keys(Lt).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[y]=L};var ft,Ot,it,$r,nr,kt={},Kt={},Nr=[],_t={},mr={},Et={},Rt={},fr=null,zt=0,Pt=[],ur=new m1(x),fi=r.hotfixes||[],Wr={},Zn={},Bn=[],St=function y(L,J,ue,xe,Oe,Ue){if(!(this instanceof y))return new y(L,J,ue,xe,Oe,Ue);isNaN(L)&&(L=1),isNaN(J)&&(J=0),isNaN(ue)&&(ue=0),isNaN(xe)&&(xe=1),isNaN(Oe)&&(Oe=0),isNaN(Ue)&&(Ue=0),this._matrix=[L,J,ue,xe,Oe,Ue]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(z).join(y)},St.prototype.multiply=function(y){var L=y.sx*this.sx+y.shy*this.shx,J=y.sx*this.shy+y.shy*this.sy,ue=y.shx*this.sx+y.sy*this.shx,xe=y.shx*this.shy+y.sy*this.sy,Oe=y.tx*this.sx+y.ty*this.shx+this.tx,Ue=y.tx*this.shy+y.ty*this.sy+this.ty;return new St(L,J,ue,xe,Oe,Ue)},St.prototype.decompose=function(){var y=this.sx,L=this.shy,J=this.shx,ue=this.sy,xe=this.tx,Oe=this.ty,Ue=Math.sqrt(y*y+L*L),lt=(y/=Ue)*J+(L/=Ue)*ue;J-=y*lt,ue-=L*lt;var pt=Math.sqrt(J*J+ue*ue);return lt/=pt,y*(ue/=pt)<L*(J/=pt)&&(y=-y,L=-L,lt=-lt,Ue=-Ue),{scale:new St(Ue,0,0,pt,0,0),translate:new St(1,0,0,1,xe,Oe),rotate:new St(y,L,-L,y,0,0),skew:new St(1,0,lt,1,0,0)}},St.prototype.toString=function(y){return this.join(" ")},St.prototype.inversed=function(){var y=this.sx,L=this.shy,J=this.shx,ue=this.sy,xe=this.tx,Oe=this.ty,Ue=1/(y*ue-L*J),lt=ue*Ue,pt=-L*Ue,It=-J*Ue,$t=y*Ue;return new St(lt,pt,It,$t,-lt*xe-It*Oe,-pt*xe-$t*Oe)},St.prototype.applyToPoint=function(y){var L=y.x*this.sx+y.y*this.shx+this.tx,J=y.x*this.shy+y.y*this.sy+this.ty;return new rn(L,J)},St.prototype.applyToRectangle=function(y){var L=this.applyToPoint(y),J=this.applyToPoint(new rn(y.x+y.w,y.y+y.h));return new Ri(L.x,L.y,J.x-L.x,J.y-L.y)},St.prototype.clone=function(){var y=this.sx,L=this.shy,J=this.shx,ue=this.sy,xe=this.tx,Oe=this.ty;return new St(y,L,J,ue,xe,Oe)},x.Matrix=St;var cs=x.matrixMult=function(y,L){return L.multiply(y)},ds=new St(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=ds;var Mr=function(y,L){if(!mr[y]){var J=(L instanceof au?"Sh":"P")+(Object.keys(_t).length+1).toString(10);L.id=J,mr[y]=J,_t[J]=L,ur.publish("addPattern",L)}};x.ShadingPattern=au,x.TilingPattern=ac,x.addShadingPattern=function(y,L){return I("addShadingPattern()"),Mr(y,L),this},x.beginTilingPattern=function(y){I("beginTilingPattern()"),ps(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},x.endTilingPattern=function(y,L){I("endTilingPattern()"),L.stream=ze[H].join(`
`),Mr(y,L),ur.publish("endTilingPattern",L),Bn.pop().restore()};var Tn,br=x.__private__.newObject=function(){var y=Ur();return Vr(y,!0),y},Ur=x.__private__.newObjectDeferred=function(){return se++,ye[se]=function(){return Ae},se},Vr=function(y,L){return L=typeof L=="boolean"&&L,ye[y]=Ae,L&&X(y+" 0 obj"),y},qs=x.__private__.newAdditionalObject=function(){var y={objId:Ur(),content:""};return Pe.push(y),y},Ti=Ur(),hs=Ur(),mi=x.__private__.decodeColorString=function(y){var L=y.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length!==5||L[4]!=="k"&&L[4]!=="K"||(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var J=parseFloat(L[0]);L=[J,J,J,"r"]}for(var ue="#",xe=0;xe<3;xe++)ue+=("0"+Math.floor(255*parseFloat(L[xe])).toString(16)).slice(-2);return ue},vn=x.__private__.encodeColorString=function(y){var L;typeof y=="string"&&(y={ch1:y});var J=y.ch1,ue=y.ch2,xe=y.ch3,Oe=y.ch4,Ue=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var lt=new mv(J);if(lt.ok)J=lt.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var pt=parseInt(J.substr(1),16);J=pt>>16&255,ue=pt>>8&255,xe=255&pt}if(ue===void 0||Oe===void 0&&J===ue&&ue===xe)L=typeof J=="string"?J+" "+Ue[0]:y.precision===2?O(J/255)+" "+Ue[0]:F(J/255)+" "+Ue[0];else if(Oe===void 0||Tr(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return["1.","1.","1.",Ue[1]].join(" ");L=typeof J=="string"?[J,ue,xe,Ue[1]].join(" "):y.precision===2?[O(J/255),O(ue/255),O(xe/255),Ue[1]].join(" "):[F(J/255),F(ue/255),F(xe/255),Ue[1]].join(" ")}else L=typeof J=="string"?[J,ue,xe,Oe,Ue[2]].join(" "):y.precision===2?[O(J),O(ue),O(xe),O(Oe),Ue[2]].join(" "):[F(J),F(ue),F(xe),F(Oe),Ue[2]].join(" ");return L},Jr=x.__private__.getFilters=function(){return l},qn=x.__private__.putStream=function(y){var L=(y=y||{}).data||"",J=y.filters||Jr(),ue=y.alreadyAppliedFilters||[],xe=y.addLength1||!1,Oe=L.length,Ue=y.objectId,lt=function(or){return or};if(v!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(lt=Xr.encryptor(Ue,0));var pt={};J===!0&&(J=["FlateEncode"]);var It=y.additionalKeyValues||[],$t=(pt=jt.API.processDataByFilters!==void 0?jt.API.processDataByFilters(L,J):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(pt.data.length!==0&&(It.push({key:"Length",value:pt.data.length}),xe===!0&&It.push({key:"Length1",value:Oe})),$t.length!=0)if($t.split("/").length-1==1)It.push({key:"Filter",value:$t});else{It.push({key:"Filter",value:"["+$t+"]"});for(var dr=0;dr<It.length;dr+=1)if(It[dr].key==="DecodeParms"){for(var Ut=[],gt=0;gt<pt.reverseChain.split("/").length-1;gt+=1)Ut.push("null");Ut.push(It[dr].value),It[dr].value="["+Ut.join(" ")+"]"}}X("<<");for(var Bt=0;Bt<It.length;Bt++)X("/"+It[Bt].key+" "+It[Bt].value);X(">>"),pt.data.length!==0&&(X("stream"),X(lt(pt.data)),X("endstream"))},ta=x.__private__.putPage=function(y){var L=y.number,J=y.data,ue=y.objId,xe=y.contentsObjId;Vr(ue,!0),X("<</Type /Page"),X("/Parent "+y.rootDictionaryObjId+" 0 R"),X("/Resources "+y.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(z(y.mediaBox.bottomLeftX))+" "+parseFloat(z(y.mediaBox.bottomLeftY))+" "+z(y.mediaBox.topRightX)+" "+z(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&X("/CropBox ["+z(y.cropBox.bottomLeftX)+" "+z(y.cropBox.bottomLeftY)+" "+z(y.cropBox.topRightX)+" "+z(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&X("/BleedBox ["+z(y.bleedBox.bottomLeftX)+" "+z(y.bleedBox.bottomLeftY)+" "+z(y.bleedBox.topRightX)+" "+z(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&X("/TrimBox ["+z(y.trimBox.bottomLeftX)+" "+z(y.trimBox.bottomLeftY)+" "+z(y.trimBox.topRightX)+" "+z(y.trimBox.topRightY)+"]"),y.artBox!==null&&X("/ArtBox ["+z(y.artBox.bottomLeftX)+" "+z(y.artBox.bottomLeftY)+" "+z(y.artBox.topRightX)+" "+z(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&X("/UserUnit "+y.userUnit),ur.publish("putPage",{objId:ue,pageContext:Pt[L],pageNumber:L,page:J}),X("/Contents "+xe+" 0 R"),X(">>"),X("endobj");var Oe=J.join(`
`);return $===B&&(Oe+=`
Q`),Vr(xe,!0),qn({data:Oe,filters:Jr(),objectId:xe}),X("endobj"),ue},Xn=x.__private__.putPages=function(){var y,L,J=[];for(y=1;y<=zt;y++)Pt[y].objId=Ur(),Pt[y].contentsObjId=Ur();for(y=1;y<=zt;y++)J.push(ta({number:y,data:ze[y],objId:Pt[y].objId,contentsObjId:Pt[y].contentsObjId,mediaBox:Pt[y].mediaBox,cropBox:Pt[y].cropBox,bleedBox:Pt[y].bleedBox,trimBox:Pt[y].trimBox,artBox:Pt[y].artBox,userUnit:Pt[y].userUnit,rootDictionaryObjId:Ti,resourceDictionaryObjId:hs}));Vr(Ti,!0),X("<</Type /Pages");var ue="/Kids [";for(L=0;L<zt;L++)ue+=J[L]+" 0 R ";X(ue+"]"),X("/Count "+zt),X(">>"),X("endobj"),ur.publish("postPutPages")},Oi=function(y){ur.publish("putFont",{font:y,out:X,newObject:br,putStream:qn}),y.isAlreadyPutted!==!0&&(y.objectNumber=br(),X("<<"),X("/Type /Font"),X("/BaseFont /"+ic(y.postScriptName)),X("/Subtype /Type1"),typeof y.encoding=="string"&&X("/Encoding /"+y.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},ws=function(y){y.objectNumber=br();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[z(y.x),z(y.y),z(y.x+y.width),z(y.y+y.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var J=y.pages[1].join(`
`);qn({data:J,additionalKeyValues:L,objectId:y.objectNumber}),X("endobj")},Ii=function(y,L){L||(L=21);var J=br(),ue=(function(Ue,lt){var pt,It=[],$t=1/(lt-1);for(pt=0;pt<1;pt+=$t)It.push(pt);if(It.push(1),Ue[0].offset!=0){var dr={offset:0,color:Ue[0].color};Ue.unshift(dr)}if(Ue[Ue.length-1].offset!=1){var Ut={offset:1,color:Ue[Ue.length-1].color};Ue.push(Ut)}for(var gt="",Bt=0,or=0;or<It.length;or++){for(pt=It[or];pt>Ue[Bt+1].offset;)Bt++;var wr=Ue[Bt].offset,Ar=(pt-wr)/(Ue[Bt+1].offset-wr),cn=Ue[Bt].color,ts=Ue[Bt+1].color;gt+=ie(Math.round((1-Ar)*cn[0]+Ar*ts[0]).toString(16))+ie(Math.round((1-Ar)*cn[1]+Ar*ts[1]).toString(16))+ie(Math.round((1-Ar)*cn[2]+Ar*ts[2]).toString(16))}return gt.trim()})(y.colors,L),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+L+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qn({data:ue,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),X("endobj"),y.objectNumber=br(),X("<< /ShadingType "+y.type),X("/ColorSpace /DeviceRGB");var Oe="/Coords ["+z(parseFloat(y.coords[0]))+" "+z(parseFloat(y.coords[1]))+" ";y.type===2?Oe+=z(parseFloat(y.coords[2]))+" "+z(parseFloat(y.coords[3])):Oe+=z(parseFloat(y.coords[2]))+" "+z(parseFloat(y.coords[3]))+" "+z(parseFloat(y.coords[4]))+" "+z(parseFloat(y.coords[5])),X(Oe+="]"),y.matrix&&X("/Matrix ["+y.matrix.toString()+"]"),X("/Function "+J+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},pi=function(y,L){var J=Ur(),ue=br();L.push({resourcesOid:J,objectOid:ue}),y.objectNumber=ue;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+y.boundingBox.map(z).join(" ")+"]"}),xe.push({key:"XStep",value:z(y.xStep)}),xe.push({key:"YStep",value:z(y.yStep)}),xe.push({key:"Resources",value:J+" 0 R"}),y.matrix&&xe.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),qn({data:y.stream,additionalKeyValues:xe,objectId:y.objectNumber}),X("endobj")},oo=function(y){for(var L in y.objectNumber=br(),X("<<"),y)switch(L){case"opacity":X("/ca "+O(y[L]));break;case"stroke-opacity":X("/CA "+O(y[L]))}X(">>"),X("endobj")},jr=function(y){Vr(y.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var L in X("/Font <<"),kt)kt.hasOwnProperty(L)&&(w===!1||w===!0&&k.hasOwnProperty(L))&&X("/"+L+" "+kt[L].objectNumber+" 0 R");X(">>")})(),(function(){if(Object.keys(_t).length>0){for(var L in X("/Shading <<"),_t)_t.hasOwnProperty(L)&&_t[L]instanceof au&&_t[L].objectNumber>=0&&X("/"+L+" "+_t[L].objectNumber+" 0 R");ur.publish("putShadingPatternDict"),X(">>")}})(),(function(L){if(Object.keys(_t).length>0){for(var J in X("/Pattern <<"),_t)_t.hasOwnProperty(J)&&_t[J]instanceof x.TilingPattern&&_t[J].objectNumber>=0&&_t[J].objectNumber<L&&X("/"+J+" "+_t[J].objectNumber+" 0 R");ur.publish("putTilingPatternDict"),X(">>")}})(y.objectOid),(function(){if(Object.keys(Et).length>0){var L;for(L in X("/ExtGState <<"),Et)Et.hasOwnProperty(L)&&Et[L].objectNumber>=0&&X("/"+L+" "+Et[L].objectNumber+" 0 R");ur.publish("putGStateDict"),X(">>")}})(),(function(){for(var L in X("/XObject <<"),Wr)Wr.hasOwnProperty(L)&&Wr[L].objectNumber>=0&&X("/"+L+" "+Wr[L].objectNumber+" 0 R");ur.publish("putXobjectDict"),X(">>")})(),X(">>"),X("endobj")},Zs=function(y){Kt[y.fontName]=Kt[y.fontName]||{},Kt[y.fontName][y.fontStyle]=y.id},ra=function(y,L,J,ue,xe){var Oe={id:"F"+(Object.keys(kt).length+1).toString(10),postScriptName:y,fontName:L,fontStyle:J,encoding:ue,isStandardFont:xe||!1,metadata:{}};return ur.publish("addFont",{font:Oe,instance:this}),kt[Oe.id]=Oe,Zs(Oe),Oe.id},Qn=x.__private__.pdfEscape=x.pdfEscape=function(y,L){return(function(J,ue){var xe,Oe,Ue,lt,pt,It,$t,dr,Ut;if(Ue=(ue=ue||{}).sourceEncoding||"Unicode",pt=ue.outputEncoding,(ue.autoencode||pt)&&kt[ft].metadata&&kt[ft].metadata[Ue]&&kt[ft].metadata[Ue].encoding&&(lt=kt[ft].metadata[Ue].encoding,!pt&&kt[ft].encoding&&(pt=kt[ft].encoding),!pt&&lt.codePages&&(pt=lt.codePages[0]),typeof pt=="string"&&(pt=lt[pt]),pt)){for($t=!1,It=[],xe=0,Oe=J.length;xe<Oe;xe++)(dr=pt[J.charCodeAt(xe)])?It.push(String.fromCharCode(dr)):It.push(J[xe]),It[xe].charCodeAt(0)>>8&&($t=!0);J=It.join("")}for(xe=J.length;$t===void 0&&xe!==0;)J.charCodeAt(xe-1)>>8&&($t=!0),xe--;if(!$t)return J;for(It=ue.noBOM?[]:[254,255],xe=0,Oe=J.length;xe<Oe;xe++){if((Ut=(dr=J.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+J+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");It.push(Ut),It.push(dr-(Ut<<8))}return String.fromCharCode.apply(void 0,It)})(y,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zs=x.__private__.beginPage=function(y){ze[++zt]=[],Pt[zt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},Di(zt),dt(ze[H])},lo=function(y,L){var J,ue,xe;switch(t=L||t,typeof y=="string"&&(J=j(y.toLowerCase()),Array.isArray(J)&&(ue=J[0],xe=J[1])),Array.isArray(y)&&(ue=y[0]*Ot,xe=y[1]*Ot),isNaN(ue)&&(ue=i[0],xe=i[1]),(ue>14400||xe>14400)&&(qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),xe=Math.min(14400,xe)),i=[ue,xe],t.substr(0,1)){case"l":xe>ue&&(i=[xe,ue]);break;case"p":ue>xe&&(i=[xe,ue])}zs(i),Tt(Ss),X(la),ca!==0&&X(ca+" J"),fo!==0&&X(fo+" j"),ur.publish("addPage",{pageNumber:zt})},Fa=function(y){y>0&&y<=zt&&(ze.splice(y,1),Pt.splice(y,1),zt--,H>zt&&(H=zt),this.setPage(H))},Di=function(y){y>0&&y<=zt&&(H=y)},fs=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return ze.length-1},uo=function(y,L,J){var ue,xe=void 0;return J=J||{},y=y!==void 0?y:kt[ft].fontName,L=L!==void 0?L:kt[ft].fontStyle,ue=y.toLowerCase(),Kt[ue]!==void 0&&Kt[ue][L]!==void 0?xe=Kt[ue][L]:Kt[y]!==void 0&&Kt[y][L]!==void 0?xe=Kt[y][L]:J.disableWarning===!1&&qr.warn("Unable to look up font label for font '"+y+"', '"+L+"'. Refer to getFontList() for available fonts."),xe||J.noFallback||(xe=Kt.times[L])==null&&(xe=Kt.times.normal),xe},Zr=x.__private__.putInfo=function(){var y=br(),L=function(ue){return ue};for(var J in v!==null&&(L=Xr.encryptor(y,0)),X("<<"),X("/Producer ("+Qn(L("jsPDF "+jt.version))+")"),Lt)Lt.hasOwnProperty(J)&&Lt[J]&&X("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+Qn(L(Lt[J]))+")");X("/CreationDate ("+Qn(L(ae))+")"),X(">>"),X("endobj")},na=x.__private__.putCatalog=function(y){var L=(y=y||{}).rootDictionaryObjId||Ti;switch(br(),X("<<"),X("/Type /Catalog"),X("/Pages "+L+" 0 R"),wt||(wt="fullwidth"),wt){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+wt;J.substr(J.length-1)==="%"&&(wt=parseInt(wt)/100),typeof wt=="number"&&X("/OpenAction [3 0 R /XYZ null null "+O(wt)+"]")}switch(tr||(tr="continuous"),tr){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}tt&&X("/PageMode /"+tt),ur.publish("putCatalog"),X(">>"),X("endobj")},Bo=x.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(se+1)),X("/Root "+se+" 0 R"),X("/Info "+(se-1)+" 0 R"),v!==null&&X("/Encrypt "+Xr.oid+" 0 R"),X("/ID [ <"+he+"> <"+he+"> ]"),X(">>")},tn=x.__private__.putHeader=function(){X("%PDF-"+T),X("%")},sa=x.__private__.putXRef=function(){var y="0000000000";X("xref"),X("0 "+(se+1)),X("0000000000 65535 f ");for(var L=1;L<=se;L++)typeof ye[L]=="function"?X((y+ye[L]()).slice(-10)+" 00000 n "):ye[L]!==void 0?X((y+ye[L]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},zn=x.__private__.buildDocument=function(){var y;se=0,Ae=0,ce=[],ye=[],Pe=[],Ti=Ur(),hs=Ur(),dt(ce),ur.publish("buildDocument"),tn(),Xn(),(function(){ur.publish("putAdditionalObjects");for(var J=0;J<Pe.length;J++){var ue=Pe[J];Vr(ue.objId,!0),X(ue.content),X("endobj")}ur.publish("postPutAdditionalObjects")})(),y=[],(function(){for(var J in kt)kt.hasOwnProperty(J)&&(w===!1||w===!0&&k.hasOwnProperty(J))&&Oi(kt[J])})(),(function(){var J;for(J in Et)Et.hasOwnProperty(J)&&oo(Et[J])})(),(function(){for(var J in Wr)Wr.hasOwnProperty(J)&&ws(Wr[J])})(),(function(J){var ue;for(ue in _t)_t.hasOwnProperty(ue)&&(_t[ue]instanceof au?Ii(_t[ue]):_t[ue]instanceof ac&&pi(_t[ue],J))})(y),ur.publish("putResources"),y.forEach(jr),jr({resourcesOid:hs,objectOid:Number.MAX_SAFE_INTEGER}),ur.publish("postPutResources"),v!==null&&(Xr.oid=br(),X("<<"),X("/Filter /Standard"),X("/V "+Xr.v),X("/R "+Xr.r),X("/U <"+Xr.toHexString(Xr.U)+">"),X("/O <"+Xr.toHexString(Xr.O)+">"),X("/P "+Xr.P),X(">>"),X("endobj")),Zr(),na();var L=Ae;return sa(),Bo(),X("startxref"),X(""+L),X("%%EOF"),dt(ze[H]),ce.join(`
`)},_s=x.__private__.getBlob=function(y){return new Blob([Yt(y)],{type:"application/pdf"})},Fi=x.output=x.__private__.output=(Tn=function(y,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",y){case void 0:return zn();case"save":x.save(L.filename);break;case"arraybuffer":return Yt(zn());case"blob":return _s(zn());case"bloburi":case"bloburl":if(Gt.URL!==void 0&&typeof Gt.URL.createObjectURL=="function")return Gt.URL&&Gt.URL.createObjectURL(_s(zn()))||void 0;qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",ue=zn();try{J=d1(ue)}catch{J=d1(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+L.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(xe=L.pdfObjectUrl,Oe="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",lt=Gt.open();return lt!==null&&lt.document.write(Ue),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Gt)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',It=Gt.open();if(It!==null){It.document.write(pt);var $t=this;It.document.documentElement.querySelector("#pdfViewer").onload=function(){It.document.title=L.filename,It.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($t.output("bloburl"))}}return It}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Gt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',Ut=Gt.open();if(Ut!==null&&(Ut.document.write(dr),Ut.document.title=L.filename),Ut||typeof safari>"u")return Ut;break;case"datauri":case"dataurl":return Gt.document.location.href=this.output("datauristring",L);default:return null}},Tn.foo=function(){try{return Tn.apply(this,arguments)}catch(J){var y=J.stack||"";~y.indexOf(" at ")&&(y=y.split(" at ")[1]);var L="Error in function "+y.split(`
`)[0].split("<")[0]+": "+J.message;if(!Gt.console)throw new Error(L);Gt.console.error(L,J),Gt.alert&&alert(L)}},Tn.foo.bar=Tn,Tn.foo),ms=function(y){return Array.isArray(fi)===!0&&fi.indexOf(y)>-1};switch(n){case"pt":Ot=1;break;case"mm":Ot=72/25.4;break;case"cm":Ot=72/2.54;break;case"in":Ot=72;break;case"px":Ot=ms("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ot=12;break;case"ex":Ot=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ot=n}var Xr=null;Y(),ne();var Ns=x.__private__.getPageInfo=x.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pt[y].objId,pageNumber:y,pageContext:Pt[y]}},Ma=x.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in Pt)if(Pt[L].objId===y)break;return Ns(L)},Xs=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Pt[H].objId,pageNumber:H,pageContext:Pt[H]}};x.addPage=function(){return lo.apply(this,arguments),this},x.setPage=function(){return Di.apply(this,arguments),dt.call(this,ze[H]),this},x.insertPage=function(y){return this.addPage(),this.movePage(H,y),this},x.movePage=function(y,L){var J,ue;if(y>L){J=ze[y],ue=Pt[y];for(var xe=y;xe>L;xe--)ze[xe]=ze[xe-1],Pt[xe]=Pt[xe-1];ze[L]=J,Pt[L]=ue,this.setPage(L)}else if(y<L){J=ze[y],ue=Pt[y];for(var Oe=y;Oe<L;Oe++)ze[Oe]=ze[Oe+1],Pt[Oe]=Pt[Oe+1];ze[L]=J,Pt[L]=ue,this.setPage(L)}return this},x.deletePage=function(){return Fa.apply(this,arguments),this},x.__private__.text=x.text=function(y,L,J,ue,xe){var Oe,Ue,lt,pt,It,$t,dr,Ut,gt,Bt=(ue=ue||{}).scope||this;if(typeof y=="number"&&typeof L=="number"&&(typeof J=="string"||Array.isArray(J))){var or=J;J=L,L=y,y=or}if(arguments[3]instanceof St==0?(lt=arguments[4],pt=arguments[5],Tr(dr=arguments[3])==="object"&&dr!==null||(typeof lt=="string"&&(pt=lt,lt=null),typeof dr=="string"&&(pt=dr,dr=null),typeof dr=="number"&&(lt=dr,dr=null),ue={flags:dr,angle:lt,align:pt})):(I("The transform parameter of text() with a Matrix value"),gt=xe),isNaN(L)||isNaN(J)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Bt;var wr,Ar="",cn=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:es,ts=Bt.internal.scaleFactor;function da(pr){return pr=pr.split("	").join(Array(ue.TabLen||9).join(" ")),Qn(pr,dr)}function mo(pr){for(var Cr,sn=pr.concat(),yn=[],bi=sn.length;bi--;)typeof(Cr=sn.shift())=="string"?yn.push(Cr):Array.isArray(pr)&&(Cr.length===1||Cr[1]===void 0&&Cr[2]===void 0)?yn.push(Cr[0]):yn.push([Cr[0],Cr[1],Cr[2]]);return yn}function Vo(pr,Cr){var sn;if(typeof pr=="string")sn=Cr(pr)[0];else if(Array.isArray(pr)){for(var yn,bi,Tl=pr.concat(),Jo=[],ga=Tl.length;ga--;)typeof(yn=Tl.shift())=="string"?Jo.push(Cr(yn)[0]):Array.isArray(yn)&&typeof yn[0]=="string"&&(bi=Cr(yn[0],yn[1],yn[2]),Jo.push([bi[0],bi[1],bi[2]]));sn=Jo}return sn}var za=!1,po=!0;if(typeof y=="string")za=!0;else if(Array.isArray(y)){var $a=y.concat();Ue=[];for(var Wa,Hn=$a.length;Hn--;)(typeof(Wa=$a.shift())!="string"||Array.isArray(Wa)&&typeof Wa[0]!="string")&&(po=!1);za=po}if(za===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var go=$e/Bt.internal.scaleFactor,vo=go*(cn-1);switch(ue.baseline){case"bottom":J-=vo;break;case"top":J+=go-vo;break;case"hanging":J+=go-2*vo;break;case"middle":J+=go/2-vo}if(($t=ue.maxWidth||0)>0&&(typeof y=="string"?y=Bt.splitTextToSize(y,$t):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(pr,Cr){return pr.concat(Bt.splitTextToSize(Cr,$t))},[]))),Oe={text:y,x:L,y:J,options:ue,mutex:{pdfEscape:Qn,activeFontKey:ft,fonts:kt,activeFontSize:$e}},ur.publish("preProcessText",Oe),y=Oe.text,lt=(ue=Oe.options).angle,gt instanceof St==0&&lt&&typeof lt=="number"){lt*=Math.PI/180,ue.rotationDirection===0&&(lt=-lt),$===B&&(lt=-lt);var Pl=Math.cos(lt),Ll=Math.sin(lt);gt=new St(Pl,Ll,-Ll,Pl,0,0)}else lt&&lt instanceof St&&(gt=lt);$!==B||gt||(gt=ds),(It=ue.charSpace||Vn)!==void 0&&(Ar+=z(Z(It))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ut=ue.horizontalScale)!==void 0&&(Ar+=z(100*Ut)+` Tz
`),ue.lang;var gs=-1,yi=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,Ui=Bt.internal.getCurrentPageInfo().pageContext;switch(yi){case 0:case!1:case"fill":gs=0;break;case 1:case!0:case"stroke":gs=1;break;case 2:case"fillThenStroke":gs=2;break;case 3:case"invisible":gs=3;break;case 4:case"fillAndAddForClipping":gs=4;break;case 5:case"strokeAndAddPathForClipping":gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gs=6;break;case 7:case"addToPathForClipping":gs=7}var vu=Ui.usedRenderingMode!==void 0?Ui.usedRenderingMode:-1;gs!==-1?Ar+=gs+` Tr
`:vu!==-1&&(Ar+=`0 Tr
`),gs!==-1&&(Ui.usedRenderingMode=gs),pt=ue.align||"left";var $s,Va=$e*cn,Ho=Bt.internal.pageSize.getWidth(),Go=kt[ft];It=ue.charSpace||Vn,$t=ue.maxWidth||0,dr=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var ha=[],ni=function(pr){return Bt.getStringUnitWidth(pr,{font:Go,charSpace:It,fontSize:$e,doKerning:!1})*$e/ts};if(Object.prototype.toString.call(y)==="[object Array]"){var Ws;Ue=mo(y),pt!=="left"&&($s=Ue.map(ni));var Vs,Ha=0;if(pt==="right"){L-=$s[0],y=[],Hn=Ue.length;for(var Bi=0;Bi<Hn;Bi++)Bi===0?(Vs=Wn(L),Ws=ti(J)):(Vs=Z(Ha-$s[Bi]),Ws=-Va),y.push([Ue[Bi],Vs,Ws]),Ha=$s[Bi]}else if(pt==="center"){L-=$s[0]/2,y=[],Hn=Ue.length;for(var fa=0;fa<Hn;fa++)fa===0?(Vs=Wn(L),Ws=ti(J)):(Vs=Z((Ha-$s[fa])/2),Ws=-Va),y.push([Ue[fa],Vs,Ws]),Ha=$s[fa]}else if(pt==="left"){y=[],Hn=Ue.length;for(var ma=0;ma<Hn;ma++)y.push(Ue[ma])}else if(pt==="justify"&&Go.encoding==="Identity-H"){y=[],Hn=Ue.length,$t=$t!==0?$t:Ho;for(var qi=0,dn=0;dn<Hn;dn++)if(Ws=dn===0?ti(J):-Va,Vs=dn===0?Wn(L):qi,dn<Hn-1){var yo=Z(($t-$s[dn])/(Ue[dn].split(" ").length-1)),zi=Ue[dn].split(" ");y.push([zi[0]+" ",Vs,Ws]),qi=0;for(var xi=1;xi<zi.length;xi++){var xo=(ni(zi[xi-1]+" "+zi[xi])-ni(zi[xi]))*ts+yo;xi==zi.length-1?y.push([zi[xi],xo,0]):y.push([zi[xi]+" ",xo,0]),qi-=xo}}else y.push([Ue[dn],Vs,Ws]);y.push(["",qi,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],Hn=Ue.length,$t=$t!==0?$t:Ho,dn=0;dn<Hn;dn++){Ws=dn===0?ti(J):-Va,Vs=dn===0?Wn(L):0;var bo=Ue[dn].split(" ").length-1,Yo=bo>0?($t-$s[dn])/bo:0;dn<Hn-1?ha.push(z(Z(Yo))):ha.push(0),y.push([Ue[dn],Vs,Ws])}}}(typeof ue.R2L=="boolean"?ue.R2L:ot)===!0&&(y=Vo(y,function(pr,Cr,sn){return[pr.split("").reverse().join(""),Cr,sn]})),Oe={text:y,x:L,y:J,options:ue,mutex:{pdfEscape:Qn,activeFontKey:ft,fonts:kt,activeFontSize:$e}},ur.publish("postProcessText",Oe),y=Oe.text,wr=Oe.mutex.isHex||!1;var Ko=kt[ft].encoding;Ko!=="WinAnsiEncoding"&&Ko!=="StandardEncoding"||(y=Vo(y,function(pr,Cr,sn){return[da(pr),Cr,sn]})),Ue=mo(y),y=[];for(var pa,Ga,Ya,wo=Array.isArray(Ue[0])?1:0,Ka="",_o=function(pr,Cr,sn){var yn="";return sn instanceof St?(sn=typeof ue.angle=="number"?cs(sn,new St(1,0,0,1,pr,Cr)):cs(new St(1,0,0,1,pr,Cr),sn),$===B&&(sn=cs(new St(1,0,0,-1,0,0),sn)),yn=sn.join(" ")+` Tm
`):yn=z(pr)+" "+z(Cr)+` Td
`,yn},nn=0;nn<Ue.length;nn++){switch(Ka="",wo){case 1:Ya=(wr?"<":"(")+Ue[nn][0]+(wr?">":")"),pa=parseFloat(Ue[nn][1]),Ga=parseFloat(Ue[nn][2]);break;case 0:Ya=(wr?"<":"(")+Ue[nn]+(wr?">":")"),pa=Wn(L),Ga=ti(J)}ha!==void 0&&ha[nn]!==void 0&&(Ka=ha[nn]+` Tw
`),nn===0?y.push(Ka+_o(pa,Ga,gt)+Ya):wo===0?y.push(Ka+Ya):wo===1&&y.push(Ka+_o(pa,Ga,gt)+Ya)}y=wo===0?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var As=`BT
/`;return As+=ft+" "+$e+` Tf
`,As+=z($e*cn)+` TL
`,As+=ri+`
`,As+=Ar,As+=y,X(As+="ET"),k[ft]=!0,Bt};var ia=x.__private__.clip=x.clip=function(y){return X(y==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ia("evenodd")},x.__private__.discardPath=x.discardPath=function(){return X("n"),this};var ks=x.__private__.isValidStyle=function(y){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(L=!0),L};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(y){return ks(y)&&(m=y),this};var gi=x.__private__.getStyle=x.getStyle=function(y){var L=m;switch(y){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=y}return L},cr=x.close=function(){return X("h"),this};x.stroke=function(){return X("S"),this},x.fill=function(y){return aa("f",y),this},x.fillEvenOdd=function(y){return aa("f*",y),this},x.fillStroke=function(y){return aa("B",y),this},x.fillStrokeEvenOdd=function(y){return aa("B*",y),this};var aa=function(y,L){Tr(L)==="object"?qo(L,y):X(y)},Mi=function(y){y===null||$===B&&y===void 0||(y=gi(y),X(y))};function co(y,L,J,ue,xe){var Oe=new ac(L||this.boundingBox,J||this.xStep,ue||this.yStep,this.gState,xe||this.matrix);Oe.stream=this.stream;var Ue=y+"$$"+this.cloneIndex+++"$$";return Mr(Ue,Oe),Oe}var qo=function(y,L){var J=mr[y.key],ue=_t[J];if(ue instanceof au)X("q"),X(zo(L)),ue.gState&&x.setGState(ue.gState),X(y.matrix.toString()+" cm"),X("/"+J+" sh"),X("Q");else if(ue instanceof ac){var xe=new St(1,0,0,-1,0,rt());y.matrix&&(xe=xe.multiply(y.matrix||ds),J=co.call(ue,y.key,y.boundingBox,y.xStep,y.yStep,xe).id),X("q"),X("/Pattern cs"),X("/"+J+" scn"),ue.gState&&x.setGState(ue.gState),X(L),X("Q")}},zo=function(y){switch(y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ra=x.moveTo=function(y,L){return X(z(Z(y))+" "+z(ee(L))+" m"),this},Ua=x.lineTo=function(y,L){return X(z(Z(y))+" "+z(ee(L))+" l"),this},$n=x.curveTo=function(y,L,J,ue,xe,Oe){return X([z(Z(y)),z(ee(L)),z(Z(J)),z(ee(ue)),z(Z(xe)),z(ee(Oe)),"c"].join(" ")),this};x.__private__.line=x.line=function(y,L,J,ue,xe){if(isNaN(y)||isNaN(L)||isNaN(J)||isNaN(ue)||!ks(xe))throw new Error("Invalid arguments passed to jsPDF.line");return $===K?this.lines([[J-y,ue-L]],y,L,[1,1],xe||"S"):this.lines([[J-y,ue-L]],y,L,[1,1]).stroke()},x.__private__.lines=x.lines=function(y,L,J,ue,xe,Oe){var Ue,lt,pt,It,$t,dr,Ut,gt,Bt,or,wr,Ar;if(typeof y=="number"&&(Ar=J,J=L,L=y,y=Ar),ue=ue||[1,1],Oe=Oe||!1,isNaN(L)||isNaN(J)||!Array.isArray(y)||!Array.isArray(ue)||!ks(xe)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ra(L,J),Ue=ue[0],lt=ue[1],It=y.length,or=L,wr=J,pt=0;pt<It;pt++)($t=y[pt]).length===2?(or=$t[0]*Ue+or,wr=$t[1]*lt+wr,Ua(or,wr)):(dr=$t[0]*Ue+or,Ut=$t[1]*lt+wr,gt=$t[2]*Ue+or,Bt=$t[3]*lt+wr,or=$t[4]*Ue+or,wr=$t[5]*lt+wr,$n(dr,Ut,gt,Bt,or,wr));return Oe&&cr(),Mi(xe),this},x.path=function(y){for(var L=0;L<y.length;L++){var J=y[L],ue=J.c;switch(J.op){case"m":Ra(ue[0],ue[1]);break;case"l":Ua(ue[0],ue[1]);break;case"c":$n.apply(this,ue);break;case"h":cr()}}return this},x.__private__.rect=x.rect=function(y,L,J,ue,xe){if(isNaN(y)||isNaN(L)||isNaN(J)||isNaN(ue)||!ks(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return $===K&&(ue=-ue),X([z(Z(y)),z(ee(L)),z(Z(J)),z(Z(ue)),"re"].join(" ")),Mi(xe),this},x.__private__.triangle=x.triangle=function(y,L,J,ue,xe,Oe,Ue){if(isNaN(y)||isNaN(L)||isNaN(J)||isNaN(ue)||isNaN(xe)||isNaN(Oe)||!ks(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-y,ue-L],[xe-J,Oe-ue],[y-xe,L-Oe]],y,L,[1,1],Ue,!0),this},x.__private__.roundedRect=x.roundedRect=function(y,L,J,ue,xe,Oe,Ue){if(isNaN(y)||isNaN(L)||isNaN(J)||isNaN(ue)||isNaN(xe)||isNaN(Oe)||!ks(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*J),Oe=Math.min(Oe,.5*ue),this.lines([[J-2*xe,0],[xe*lt,0,xe,Oe-Oe*lt,xe,Oe],[0,ue-2*Oe],[0,Oe*lt,-xe*lt,Oe,-xe,Oe],[2*xe-J,0],[-xe*lt,0,-xe,-Oe*lt,-xe,-Oe],[0,2*Oe-ue],[0,-Oe*lt,xe*lt,-Oe,xe,-Oe]],y+xe,L,[1,1],Ue,!0),this},x.__private__.ellipse=x.ellipse=function(y,L,J,ue,xe){if(isNaN(y)||isNaN(L)||isNaN(J)||isNaN(ue)||!ks(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*J,Ue=4/3*(Math.SQRT2-1)*ue;return Ra(y+J,L),$n(y+J,L-Ue,y+Oe,L-ue,y,L-ue),$n(y-Oe,L-ue,y-J,L-Ue,y-J,L),$n(y-J,L+Ue,y-Oe,L+ue,y,L+ue),$n(y+Oe,L+ue,y+J,L+Ue,y+J,L),Mi(xe),this},x.__private__.circle=x.circle=function(y,L,J,ue){if(isNaN(y)||isNaN(L)||isNaN(J)||!ks(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,L,J,J,ue)},x.setFont=function(y,L,J){return J&&(L=U(L,J)),ft=uo(y,L,{disableWarning:!1}),this};var Qs=x.__private__.getFont=x.getFont=function(){return kt[uo.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var y,L,J={};for(y in Kt)if(Kt.hasOwnProperty(y))for(L in J[y]=[],Kt[y])Kt[y].hasOwnProperty(L)&&J[y].push(L);return J},x.addFont=function(y,L,J,ue,xe){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(J=U(J,ue)),ra.call(this,y,L,J,xe=xe||"Identity-H")};var es,Ss=r.lineWidth||.200025,oa=x.__private__.getLineWidth=x.getLineWidth=function(){return Ss},Tt=x.__private__.setLineWidth=x.setLineWidth=function(y){return Ss=y,X(z(Z(y))+" w"),this};x.__private__.setLineDash=jt.API.setLineDash=jt.API.setLineDashPattern=function(y,L){if(y=y||[],L=L||0,isNaN(L)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(J){return z(Z(J))}).join(" "),L=z(Z(L)),X("["+y+"] "+L+" d"),this};var ei=x.__private__.getLineHeight=x.getLineHeight=function(){return $e*es};x.__private__.getLineHeight=x.getLineHeight=function(){return $e*es};var El=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(es=y),this},$o=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return es};El(r.lineHeight);var Wn=x.__private__.getHorizontalCoordinate=function(y){return Z(y)},ti=x.__private__.getVerticalCoordinate=function(y){return $===B?y:Pt[H].mediaBox.topRightY-Pt[H].mediaBox.bottomLeftY-Z(y)},ho=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(y){return z(Wn(y))},Ba=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(y){return z(ti(y))},la=r.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return mi(la)},x.__private__.setStrokeColor=x.setDrawColor=function(y,L,J,ue){return la=vn({ch1:y,ch2:L,ch3:J,ch4:ue,pdfColorType:"draw",precision:2}),X(la),this};var Wo=r.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return mi(Wo)},x.__private__.setFillColor=x.setFillColor=function(y,L,J,ue){return Wo=vn({ch1:y,ch2:L,ch3:J,ch4:ue,pdfColorType:"fill",precision:2}),X(Wo),this};var ri=r.textColor||"0 g",ua=x.__private__.getTextColor=x.getTextColor=function(){return mi(ri)};x.__private__.setTextColor=x.setTextColor=function(y,L,J,ue){return ri=vn({ch1:y,ch2:L,ch3:J,ch4:ue,pdfColorType:"text",precision:3}),this};var Vn=r.charSpace,vi=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Vn||0)};x.__private__.setCharSpace=x.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vn=y,this};var ca=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(y){var L=x.CapJoinStyles[y];if(L===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ca=L,X(L+" J"),this};var fo=0;x.__private__.setLineJoin=x.setLineJoin=function(y){var L=x.CapJoinStyles[y];if(L===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fo=L,X(L+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(z(Z(y))+" M"),this},x.GState=Mh,x.setGState=function(y){(y=typeof y=="string"?Et[Rt[y]]:qa(null,y)).equals(fr)||(X("/"+y.id+" gs"),fr=y)};var qa=function(y,L){if(!y||!Rt[y]){var J=!1;for(var ue in Et)if(Et.hasOwnProperty(ue)&&Et[ue].equals(L)){J=!0;break}if(J)L=Et[ue];else{var xe="GS"+(Object.keys(Et).length+1).toString(10);Et[xe]=L,L.id=xe}return y&&(Rt[y]=L.id),ur.publish("addGState",L),L}};x.addGState=function(y,L){return qa(y,L),this},x.saveGraphicsState=function(){return X("q"),Nr.push({key:ft,size:$e,color:ri}),this},x.restoreGraphicsState=function(){X("Q");var y=Nr.pop();return ft=y.key,$e=y.size,ri=y.color,fr=null,this},x.setCurrentTransformationMatrix=function(y){return X(y.toString()+" cm"),this},x.comment=function(y){return X("#"+y),this};var rn=function(y,L){var J=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(Oe){isNaN(Oe)||(J=parseFloat(Oe))}});var ue=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Oe){isNaN(Oe)||(ue=parseFloat(Oe))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(Oe){xe=Oe.toString()}}),this},Ri=function(y,L,J,ue){rn.call(this,y,L),this.type="rect";var xe=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function(Ue){isNaN(Ue)||(xe=parseFloat(Ue))}});var Oe=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Ue){isNaN(Ue)||(Oe=parseFloat(Ue))}}),this},js=function(){this.page=zt,this.currentPage=H,this.pages=ze.slice(0),this.pagesContext=Pt.slice(0),this.x=it,this.y=$r,this.matrix=nr,this.width=de(H),this.height=Le(H),this.outputDestination=Je,this.id="",this.objectNumber=-1};js.prototype.restore=function(){zt=this.page,H=this.currentPage,Pt=this.pagesContext,ze=this.pages,it=this.x,$r=this.y,nr=this.matrix,Ne(H,this.width),Be(H,this.height),Je=this.outputDestination};var ps=function(y,L,J,ue,xe){Bn.push(new js),zt=H=0,ze=[],it=y,$r=L,nr=xe,zs([J,ue])};for(var P in x.beginFormObject=function(y,L,J,ue,xe){return ps(y,L,J,ue,xe),this},x.endFormObject=function(y){return(function(L){if(Zn[L])Bn.pop().restore();else{var J=new js,ue="Xo"+(Object.keys(Wr).length+1).toString(10);J.id=ue,Zn[L]=ue,Wr[ue]=J,ur.publish("addFormObject",J),Bn.pop().restore()}})(y),this},x.doFormObject=function(y,L){var J=Wr[Zn[y]];return X("q"),X(L.toString()+" cm"),X("/"+J.id+" Do"),X("Q"),this},x.getFormObject=function(y){var L=Wr[Zn[y]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},x.save=function(y,L){return y=y||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(nu(_s(zn()),y),typeof nu.unload=="function"&&Gt.setTimeout&&setTimeout(nu.unload,911),this):new Promise(function(J,ue){try{var xe=nu(_s(zn()),y);typeof nu.unload=="function"&&Gt.setTimeout&&setTimeout(nu.unload,911),J(xe)}catch(Oe){ue(Oe.message)}})},jt.API)jt.API.hasOwnProperty(P)&&(P==="events"&&jt.API.events.length?(function(y,L){var J,ue,xe;for(xe=L.length-1;xe!==-1;xe--)J=L[xe][0],ue=L[xe][1],y.subscribe.apply(y,[J].concat(typeof ue=="function"?[ue]:ue))})(ur,jt.API.events):x[P]=jt.API[P]);function de(y){return Pt[y].mediaBox.topRightX-Pt[y].mediaBox.bottomLeftX}function Ne(y,L){Pt[y].mediaBox.topRightX=L+Pt[y].mediaBox.bottomLeftX}function Le(y){return Pt[y].mediaBox.topRightY-Pt[y].mediaBox.bottomLeftY}function Be(y,L){Pt[y].mediaBox.topRightY=L+Pt[y].mediaBox.bottomLeftY}var Ke=x.getPageWidth=function(y){return de(y=y||H)/Ot},et=x.setPageWidth=function(y,L){Ne(y,L*Ot)},rt=x.getPageHeight=function(y){return Le(y=y||H)/Ot},Xe=x.setPageHeight=function(y,L){Be(y,L*Ot)};return x.internal={pdfEscape:Qn,getStyle:gi,getFont:Qs,getFontSize:st,getCharSpace:vi,getTextColor:ua,getLineHeight:ei,getLineHeightFactor:$o,getLineWidth:oa,write:Qe,getHorizontalCoordinate:Wn,getVerticalCoordinate:ti,getCoordinateString:ho,getVerticalCoordinateString:Ba,collections:{},newObject:br,newAdditionalObject:qs,newObjectDeferred:Ur,newObjectDeferredBegin:Vr,getFilters:Jr,putStream:qn,events:ur,scaleFactor:Ot,pageSize:{getWidth:function(){return Ke(H)},setWidth:function(y){et(H,y)},getHeight:function(){return rt(H)},setHeight:function(y){Xe(H,y)}},encryptionOptions:v,encryption:Xr,getEncryptor:function(y){return v!==null?Xr.encryptor(y,0):function(L){return L}},output:Fi,getNumberOfPages:fs,get pages(){return ze},out:X,f2:O,f3:F,getPageInfo:Ns,getPageInfoByObjId:Ma,getCurrentPageInfo:Xs,getPDFVersion:C,Point:rn,Rectangle:Ri,Matrix:St,hasHotfix:ms},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Ke(H)},set:function(y){et(H,y)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return rt(H)},set:function(y){Xe(H,y)},enumerable:!0,configurable:!0}),(function(y){for(var L=0,J=Ct.length;L<J;L++){var ue=ra.call(this,y[L][0],y[L][1],y[L][2],Ct[L][3],!0);w===!1&&(k[ue]=!0);var xe=y[L][0].split("-");Zs({id:ue,fontName:xe[0],fontStyle:xe[1]||""})}ur.publish("addFonts",{fonts:kt,dictionary:Kt})}).call(x,Ct),ft="F1",lo(i,t),ur.publish("initialized"),x}sc.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},sc.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sc.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},sc.prototype.processOwnerPassword=function(r,e){return Z0(J0(e).substr(0,5),r)},sc.prototype.encryptor=function(r,e){var t=J0(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Z0(t,n)}},Mh.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Tr(r)!==Tr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},jt.API={events:[]},jt.version="3.0.4";var kn=jt.API,km=1,pu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zu=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qt=function(r){return r.toFixed(2)},vl=function(r){return r.toFixed(5)};kn.__acroform__={};var hi=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},p1=function(r){return r*km},no=function(r){var e=new yv,t=yt.internal.getHeight(r)||0,n=yt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Qt(n)),Number(Qt(t))],e},t3=kn.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},r3=kn.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},n3=kn.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},En=kn.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return n3(r,e-1)},Pn=kn.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return t3(r,e-1)},Ln=kn.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return r3(r,e-1)},s3=kn.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],o=r[1],l=r[2],d=r[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=n(o+d)||0,h.upperRight_X=t(i+l)||0,h.upperRight_Y=n(o)||0,[Number(Qt(h.lowerLeft_X)),Number(Qt(h.lowerLeft_Y)),Number(Qt(h.upperRight_X)),Number(Qt(h.upperRight_Y))]},i3=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=X0(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+Qt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=no(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},X0=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var o=t,l=yt.internal.getHeight(r)||0;l=l<0?-l:l;var d=yt.internal.getWidth(r)||0;d=d<0?-d:d;var h=function(O,F,Z){if(O+1<i.length){var ee=F+" "+i[O+1][0];return hh(ee,r,Z).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var m,v,w=hh("3",r,o).height,k=r.multiline?l-o:(l-w)/2,x=k+=2,T=0,C=0,E=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+hh(e,r,o=12).width+", FieldWidth:"+d+`
`;break}for(var j="",K=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var $=!1;if(i[B].length!==1&&E!==i[B].length-1){if((w+2)*(K+2)+2>l)continue e;j+=i[B][E],$=!0,C=B,B--}else{j=(j+=i[B][E]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var le=parseInt(B),me=h(le,j,o),U=B>=i.length-1;if(me&&!U){j+=" ",E=0;continue}if(me||U){if(U)C=le;else if(r.multiline&&(w+2)*(K+2)+2>l)continue e}else{if(!r.multiline||(w+2)*(K+2)+2>l)continue e;C=le}}for(var z="",I=T;I<=C;I++){var W=i[I];if(r.multiline){if(I===C){z+=W[E]+" ",E=(E+1)%W.length;continue}if(I===T){z+=W[W.length-1]+" ";continue}}z+=W[0]+" "}switch(z=z.substr(z.length-1)==" "?z.substr(0,z.length-1):z,v=hh(z,r,o).width,r.textAlign){case"right":m=d-v-2;break;case"center":m=(d-v)/2;break;default:m=2}e+=Qt(m)+" "+Qt(x)+` Td
`,e+="("+pu(z)+`) Tj
`,e+=-Qt(m)+` 0 Td
`,x=-(o+2),v=0,T=$?C:C+1,K++,j=""}break}return n.text=e,n.fontSize=o,n},hh=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},a3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},o3=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},l3=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Ia.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(a3)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");km=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new xv,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&o3(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var o=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var d=n[l],h=[],m=d.Rect;if(d.Rect&&(d.Rect=s3(d.Rect,i)),i.internal.newObjectDeferredBegin(d.objId,!0),d.DA=yt.createDefaultAppearanceStream(d),Tr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=m,d.hasAppearanceStream&&!d.appearanceStreamContent){var v=i3(d);h.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(d.appearanceStreamContent){var w="";for(var k in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(k)){var x=d.appearanceStreamContent[k];if(w+="/"+k+" ",w+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var T=x[l];typeof T=="function"&&(T=T.call(i,d)),w+="/"+l+" "+T+" ",i.internal.acroformPlugin.xForms.indexOf(T)>=0||i.internal.acroformPlugin.xForms.push(T)}}else typeof(T=x)=="function"&&(T=T.call(i,d)),w+="/"+l+" "+T,i.internal.acroformPlugin.xForms.indexOf(T)>=0||i.internal.acroformPlugin.xForms.push(T);w+=">>"}h.push({key:"AP",value:`<<
`+w+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:d.objId}),i.internal.out("endobj")}o&&(function(C,E){for(var j in C)if(C.hasOwnProperty(j)){var K=j,B=C[j];E.internal.newObjectDeferredBegin(B.objId,!0),Tr(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete C[K]}})(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},vv=kn.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(l){return l};if(Array.isArray(r)){for(var i="[",o=0;o<r.length;o++)switch(o!==0&&(i+=" "),Tr(r[o])){case"boolean":case"number":case"object":i+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+pu(n(r[o].toString()))+")"):i+=r[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},p0=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+pu(n(r))+")"},io=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};io.prototype.toString=function(){return this.objId+" 0 R"},io.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},io.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:vv(i,this.objId,this.scope)}):i instanceof io?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var yv=function(){io.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};hi(yv,io);var xv=function(){io.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+pu(t(r))+")"}},set:function(t){r=t}})};hi(xv,io);var Ia=function r(){io.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');e=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!En(e,3)},set:function(j){j?this.F=Pn(e,3):this.F=Ln(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');t=j}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(j){n=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(j){n[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(j){n[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(j){n[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(j){n[3]=j}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Rh)return;o="FieldObject"+r.FieldNum++}var j=function(K){return K};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+pu(j(o))+")"},set:function(j){o=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(j){o=j}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(j){d=j}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(j){h=j}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/km:m},set:function(j){m=j}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(j){v=j}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof Rh||this instanceof uu))return p0(w,this.objId,this.scope)},set:function(j){j=j.toString(),w=j}});var k=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(k)return this instanceof us==0?p0(k,this.objId,this.scope):k},set:function(j){j=j.toString(),k=this instanceof us==0?j.substr(0,1)==="("?Zu(j.substr(1,j.length-2)):Zu(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof us==1?Zu(k.substr(1,k.length-1)):k},set:function(j){j=j.toString(),k=this instanceof us==1?"/"+j:j}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof us==0?p0(x,this.objId,this.scope):x},set:function(j){j=j.toString(),x=this instanceof us==0?j.substr(0,1)==="("?Zu(j.substr(1,j.length-2)):Zu(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof us==1?Zu(x.substr(1,x.length-1)):x},set:function(j){j=j.toString(),x=this instanceof us==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(j){j=!!j,C=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(j){T=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,1)},set:function(j){j?this.Ff=Pn(this.Ff,1):this.Ff=Ln(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,2)},set:function(j){j?this.Ff=Pn(this.Ff,2):this.Ff=Ln(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,3)},set:function(j){j?this.Ff=Pn(this.Ff,3):this.Ff=Ln(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');E=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(E){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:E=2;break;case"center":case 1:E=1;break;default:E=0}}})};hi(Ia,io);var uc=function(){Ia.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vv(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=(function(o,l,d){d||(d=1);for(var h,m=[];h=l.exec(o);)m.push(h[d]);return m})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,18)},set:function(t){t?this.Ff=Pn(this.Ff,18):this.Ff=Ln(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Pn(this.Ff,19):this.Ff=Ln(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,20)},set:function(t){t?(this.Ff=Pn(this.Ff,20),e.sort()):this.Ff=Ln(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,22)},set:function(t){t?this.Ff=Pn(this.Ff,22):this.Ff=Ln(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,23)},set:function(t){t?this.Ff=Pn(this.Ff,23):this.Ff=Ln(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,27)},set:function(t){t?this.Ff=Pn(this.Ff,27):this.Ff=Ln(this.Ff,27)}}),this.hasAppearanceStream=!1};hi(uc,Ia);var cc=function(){uc.call(this),this.fontName="helvetica",this.combo=!1};hi(cc,uc);var dc=function(){cc.call(this),this.combo=!0};hi(dc,cc);var Nh=function(){dc.call(this),this.edit=!0};hi(Nh,dc);var us=function(){Ia.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,15)},set:function(t){t?this.Ff=Pn(this.Ff,15):this.Ff=Ln(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,16)},set:function(t){t?this.Ff=Pn(this.Ff,16):this.Ff=Ln(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,17)},set:function(t){t?this.Ff=Pn(this.Ff,17):this.Ff=Ln(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,26)},set:function(t){t?this.Ff=Pn(this.Ff,26):this.Ff=Ln(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+pu(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Tr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};hi(us,Ia);var kh=function(){us.call(this),this.pushButton=!0};hi(kh,us);var hc=function(){us.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};hi(hc,us);var Rh=function(){var r,e;Ia.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+pu(i(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Tr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};hi(Rh,Ia),hc.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},hc.prototype.createOption=function(r){var e=new Rh;return e.Parent=this,e.optionName=r,this.Kids.push(e),u3.call(this.scope,e),e};var Sh=function(){us.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};hi(Sh,us);var uu=function(){Ia.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,13)},set:function(e){e?this.Ff=Pn(this.Ff,13):this.Ff=Ln(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,21)},set:function(e){e?this.Ff=Pn(this.Ff,21):this.Ff=Ln(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,23)},set:function(e){e?this.Ff=Pn(this.Ff,23):this.Ff=Ln(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,24)},set:function(e){e?this.Ff=Pn(this.Ff,24):this.Ff=Ln(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,25)},set:function(e){e?this.Ff=Pn(this.Ff,25):this.Ff=Ln(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,26)},set:function(e){e?this.Ff=Pn(this.Ff,26):this.Ff=Ln(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};hi(uu,Ia);var jh=function(){uu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!En(this.Ff,14)},set:function(r){r?this.Ff=Pn(this.Ff,14):this.Ff=Ln(this.Ff,14)}}),this.password=!0};hi(jh,uu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=no(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),o=X0(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Qt(yt.internal.getWidth(r))+" "+Qt(yt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Qt(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=no(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],o=yt.internal.getHeight(r),l=yt.internal.getWidth(r),d=X0(r,r.caption);return i.push("1 g"),i.push("0 0 "+Qt(l)+" "+Qt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Qt(l-1)+" "+Qt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Qt(d.fontSize)+" Tf "+n),i.push(d.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=no(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Qt(yt.internal.getWidth(r))+" "+Qt(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Circle.YesNormal,e.D[r]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=no(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=yt.internal.Bezier_C,o=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+vl(yt.internal.getWidth(r)/2)+" "+vl(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=no(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5)),l=Number((n*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+vl(yt.internal.getWidth(r)/2)+" "+vl(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+vl(yt.internal.getWidth(r)/2)+" "+vl(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),t.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),t.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),t.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=no(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+vl(yt.internal.getWidth(r)/2)+" "+vl(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Cross.YesNormal,e.D[r]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=no(r);e.scope=r.scope;var t=[],n=yt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Qt(yt.internal.getWidth(r)-2)+" "+Qt(yt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Qt(n.x1.x)+" "+Qt(n.x1.y)+" m"),t.push(Qt(n.x2.x)+" "+Qt(n.x2.y)+" l"),t.push(Qt(n.x4.x)+" "+Qt(n.x4.y)+" m"),t.push(Qt(n.x3.x)+" "+Qt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=no(r);e.scope=r.scope;var t=yt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Qt(yt.internal.getWidth(r))+" "+Qt(yt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Qt(yt.internal.getWidth(r)-2)+" "+Qt(yt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Qt(t.x1.x)+" "+Qt(t.x1.y)+" m"),n.push(Qt(t.x2.x)+" "+Qt(t.x2.y)+" l"),n.push(Qt(t.x4.x)+" "+Qt(t.x4.y)+" m"),n.push(Qt(t.x3.x)+" "+Qt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=no(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Qt(yt.internal.getWidth(r))+" "+Qt(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=yt.internal.getWidth(r),t=yt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},yt.internal.getWidth=function(r){var e=0;return Tr(r)==="object"&&(e=p1(r.Rect[2])),e},yt.internal.getHeight=function(r){var e=0;return Tr(r)==="object"&&(e=p1(r.Rect[3])),e};var u3=kn.addField=function(r){if(l3(this,r),!(r instanceof Ia))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};kn.AcroFormChoiceField=uc,kn.AcroFormListBox=cc,kn.AcroFormComboBox=dc,kn.AcroFormEditBox=Nh,kn.AcroFormButton=us,kn.AcroFormPushButton=kh,kn.AcroFormRadioButton=hc,kn.AcroFormCheckBox=Sh,kn.AcroFormTextField=uu,kn.AcroFormPasswordField=jh,kn.AcroFormAppearance=yt,kn.AcroForm={ChoiceField:uc,ListBox:cc,ComboBox:dc,EditBox:Nh,Button:us,PushButton:kh,RadioButton:hc,CheckBox:Sh,TextField:uu,PasswordField:jh,Appearance:yt},jt.AcroForm={ChoiceField:uc,ListBox:cc,ComboBox:dc,EditBox:Nh,Button:us,PushButton:kh,RadioButton:hc,CheckBox:Sh,TextField:uu,PasswordField:jh,Appearance:yt};jt.AcroForm;function bv(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(O,F){var Z,ee,ae,he,be,ne=t;if((F=F||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(me(O))for(be in n)for(ae=n[be],Z=0;Z<ae.length;Z+=1){for(he=!0,ee=0;ee<ae[Z].length;ee+=1)if(ae[Z][ee]!==void 0&&ae[Z][ee]!==O[ee]){he=!1;break}if(he===!0){ne=be;break}}else for(be in n)for(ae=n[be],Z=0;Z<ae.length;Z+=1){for(he=!0,ee=0;ee<ae[Z].length;ee+=1)if(ae[Z][ee]!==void 0&&ae[Z][ee]!==O.charCodeAt(ee)){he=!1;break}if(he===!0){ne=be;break}}return ne===t&&F!==t&&(ne=F),ne},o=function O(F){for(var Z=this.internal.write,ee=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:F.width}),he.push({key:"Height",value:F.height}),F.colorSpace===j.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===j.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var be="",ne=0,fe=F.transparency.length;ne<fe;ne++)be+=F.transparency[ne]+" "+F.transparency[ne]+" ";he.push({key:"Mask",value:"["+be+"]"})}F.sMask!==void 0&&he.push({key:"SMask",value:F.objectId+1+" 0 R"});var ke=F.filter!==void 0?["/"+F.filter]:void 0;if(ee({data:F.data,additionalKeyValues:he,alreadyAppliedFilters:ke,objectId:F.objectId}),Z("endobj"),"sMask"in F&&F.sMask!==void 0){var Y,A=(Y=F.sMaskBitsPerComponent)!==null&&Y!==void 0?Y:F.bitsPerComponent,H={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:F.sMask};"filter"in F&&(H.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(F.width),H.filter=F.filter),O.call(this,H)}if(F.colorSpace===j.INDEXED){var Q=this.internal.newObject();ee({data:z(new Uint8Array(F.palette)),objectId:Q}),Z("endobj")}},l=function(){var O=this.internal.collections[e+"images"];for(var F in O)o.call(this,O[F])},d=function(){var O,F=this.internal.collections[e+"images"],Z=this.internal.write;for(var ee in F)Z("/I"+(O=F[ee]).index,O.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},m=function(){var O=this.internal.collections[e+"images"];return h.call(this),O},v=function(){return Object.keys(this.internal.collections[e+"images"]).length},w=function(O){return typeof r["process"+O.toUpperCase()]=="function"},k=function(O){return Tr(O)==="object"&&O.nodeType===1},x=function(O,F){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var Z=""+O.getAttribute("src");if(Z.indexOf("data:image/")===0)return _h(unescape(Z).split("base64,").pop());var ee=r.loadFile(Z,!0);if(ee!==void 0)return ee}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var ae;switch(F){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return _h(O.toDataURL(ae,1).split("base64,").pop())}},T=function(O){var F=this.internal.collections[e+"images"];if(F){for(var Z in F)if(O===F[Z].alias)return F[Z]}},C=function(O,F,Z){return O||F||(O=-96,F=-96),O<0&&(O=-1*Z.width*72/O/this.internal.scaleFactor),F<0&&(F=-1*Z.height*72/F/this.internal.scaleFactor),O===0&&(O=F*Z.width/Z.height),F===0&&(F=O*Z.height/Z.width),[O,F]},E=function(O,F,Z,ee,ae,he){var be=C.call(this,Z,ee,ae),ne=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,ke=m.call(this);if(Z=be[0],ee=be[1],ke[ae.index]=ae,he){he*=Math.PI/180;var Y=Math.cos(he),A=Math.sin(he),H=function(ie){return ie.toFixed(4)},Q=[H(Y),H(A),H(-1*A),H(Y),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,ne(O),fe(F+ee),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([ne(Z),"0","0",ne(ee),"0","0","cm"].join(" "))):this.internal.write([ne(Z),"0","0",ne(ee),ne(O),fe(F+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},j=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var K=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=r.__addimage__.sHashCode=function(O){var F,Z,ee=0;if(typeof O=="string")for(Z=O.length,F=0;F<Z;F++)ee=(ee<<5)-ee+O.charCodeAt(F),ee|=0;else if(me(O))for(Z=O.byteLength/2,F=0;F<Z;F++)ee=(ee<<5)-ee+O[F],ee|=0;return ee},$=r.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var F=!0;return O.length===0&&(F=!1),O.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(F=!1),F},le=r.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var F=O.indexOf(",");return F<0?null:O.substring(0,F).trim().endsWith("base64")?O.substring(F+1):null};r.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var me=r.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},U=r.__addimage__.binaryStringToUint8Array=function(O){for(var F=O.length,Z=new Uint8Array(F),ee=0;ee<F;ee++)Z[ee]=O.charCodeAt(ee);return Z},z=r.__addimage__.arrayBufferToBinaryString=function(O){for(var F="",Z=me(O)?O:new Uint8Array(O),ee=0;ee<Z.length;ee+=8192)F+=String.fromCharCode.apply(null,Z.subarray(ee,ee+8192));return F};r.addImage=function(){var O,F,Z,ee,ae,he,be,ne,fe;if(typeof arguments[1]=="number"?(F=t,Z=arguments[1],ee=arguments[2],ae=arguments[3],he=arguments[4],be=arguments[5],ne=arguments[6],fe=arguments[7]):(F=arguments[1],Z=arguments[2],ee=arguments[3],ae=arguments[4],he=arguments[5],be=arguments[6],ne=arguments[7],fe=arguments[8]),Tr(O=arguments[0])==="object"&&!k(O)&&"imageData"in O){var ke=O;O=ke.imageData,F=ke.format||F||t,Z=ke.x||Z||0,ee=ke.y||ee||0,ae=ke.w||ke.width||ae,he=ke.h||ke.height||he,be=ke.alias||be,ne=ke.compression||ne,fe=ke.rotation||ke.angle||fe}var Y=this.internal.getFilters();if(ne===void 0&&Y.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(Z)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var A=I.call(this,O,F,be,ne);return E.call(this,Z,ee,ae,he,A,fe),this};var I=function(O,F,Z,ee){var ae,he,be;if(typeof O=="string"&&i(O)===t){O=unescape(O);var ne=W(O,!1);(ne!==""||(ne=r.loadFile(O,!0))!==void 0)&&(O=ne)}if(k(O)&&(O=x(O,F)),F=i(O,F),!w(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((be=Z)==null||be.length===0)&&(Z=(function(fe){return typeof fe=="string"||me(fe)?B(fe):me(fe.data)?B(fe.data):null})(O)),(ae=T.call(this,Z))||(O instanceof Uint8Array||F==="RGBA"||(he=O,O=U(O)),ae=this["process"+F.toUpperCase()](O,v.call(this),Z,(function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in r.image_compression?fe:K.NONE})(ee),he)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},W=r.__addimage__.convertBase64ToBinaryString=function(O,F){F=typeof F!="boolean"||F;var Z,ee="";if(typeof O=="string"){var ae;Z=(ae=le(O))!==null&&ae!==void 0?ae:O;try{ee=_h(Z)}catch(he){if(F)throw $(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};r.getImageProperties=function(O){var F,Z,ee="";if(k(O)&&(O=x(O)),typeof O=="string"&&i(O)===t&&((ee=W(O,!1))===""&&(ee=r.loadFile(O)||""),O=ee),Z=i(O),!w(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(O instanceof Uint8Array||(O=U(O)),!(F=this["process"+Z.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=Z,F}})(jt.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};jt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,o,l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),m=t.pageContext.annotations,v=!1,w=0;w<m.length&&!v;w++)switch((n=m[w]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var k=0;k<m.length;k++){n=m[k];var x=this.internal.pdfEscape,T=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(C.objId),K=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+d(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+d(n.bounds.y)+"] ")+"/Contents ("+x(j(n.contents))+")",o+=" /Popup "+E.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+x(j(K))+") >>",C.content=o;var B=C.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+d(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+d(n.bounds.y)+"] ")+" /Parent "+B,n.open&&(o+=" /Open true"),o+=" >>",E.content=o,this.internal.write(C.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+d(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+d(n.bounds.y+n.bounds.h)+"] ";var $=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+x(T(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var le=this.annotations._nameMap[n.options.name];n.options.pageNumber=le.page,n.options.top=le.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+x(T(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var me=d(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+me+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,o,l){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:m(n),w:h(t+i),h:m(n+o)},options:l,type:"link"})},r.textWithLink=function(t,n,i,o){var l,d,h=this.getTextWidth(t),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var v=this.splitTextToSize(t,d).length;l=Math.ceil(m*v)}else d=h,l=m;return this.text(t,n,i,o),i+=.2*m,o.align==="center"&&(n-=h/2),o.align==="right"&&(n-=h),this.link(n,i-m,d,l,o),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(jt.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},d=r.__arabicParser__.isArabicEndLetter=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(C){return l(C)&&i.indexOf(C.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length>=1};var m=r.__arabicParser__.arabicLetterHasFinalForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length>=3};var v=r.__arabicParser__.arabicLetterHasMedialForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length==4},w=r.__arabicParser__.resolveLigatures=function(C){var E=0,j=t,K="",B=0;for(E=0;E<C.length;E+=1)j[C.charCodeAt(E)]!==void 0?(B++,typeof(j=j[C.charCodeAt(E)])=="number"&&(K+=String.fromCharCode(j),j=t,B=0),E===C.length-1&&(j=t,K+=C.charAt(E-(B-1)),E-=B-1,B=0)):(j=t,K+=C.charAt(E-B),E-=B,B=0);return K};r.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&n[C.charCodeAt(0)]!==void 0};var k=r.__arabicParser__.getCorrectForm=function(C,E,j){return l(C)?o(C)===!1?-1:!m(C)||!l(E)&&!l(j)||!l(j)&&d(E)||d(C)&&!l(E)||d(C)&&h(E)||d(C)&&d(E)?0:v(C)&&l(E)&&!d(E)&&l(j)&&m(j)?3:d(C)||!l(j)?1:2:-1},x=function(C){var E=0,j=0,K=0,B="",$="",le="",me=(C=C||"").split("\\s+"),U=[];for(E=0;E<me.length;E+=1){for(U.push(""),j=0;j<me[E].length;j+=1)B=me[E][j],$=me[E][j-1],le=me[E][j+1],l(B)?(K=k(B,$,le),U[E]+=K!==-1?String.fromCharCode(e[B.charCodeAt(0)][K]):B):U[E]+=B;U[E]=w(U[E])}return U.join(" ")},T=r.__arabicParser__.processArabic=r.processArabic=function(){var C,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(E)){var K=0;for(j=[],K=0;K<E.length;K+=1)Array.isArray(E[K])?j.push([x(E[K][0]),E[K][1],E[K][2]]):j.push([x(E[K])]);C=j}else C=x(E);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};r.events.push(["preProcessText",T])})(jt.API),jt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(d){n=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(d){l=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(jt.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(C){h=C}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(C){m=C}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(C){v=C}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(C){w=C}});var k=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return k},set:function(C){k=C}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(C){x=C}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(C){T=C}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,m){n.call(this);var v=(m=m||{}).fontSize||this.getFontSize(),w=m.font||this.getFont(),k=m.scaleFactor||this.internal.scaleFactor,x=0,T=0,C=0,E=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var j=m.maxWidth;j>0?typeof h=="string"?h=this.splitTextToSize(h,j):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(B,$){return B.concat(E.splitTextToSize($,j))},[])):h=Array.isArray(h)?h:[h];for(var K=0;K<h.length;K++)x<(C=this.getStringUnitWidth(h[K],{font:w})*v)&&(x=C);return x!==0&&(T=h.length),{w:x/=k,h:Math.max((T*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/k,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var m=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,k=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===h.lineNumber?(h.x=(m.x||0)+(m.width||0),h.y=m.y||0):m.y+m.height+h.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=w.top,x&&k&&(this.printHeaderRow(h.lineNumber,!0),h.y+=k[0].height)):h.y=m.y+m.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};r.table=function(h,m,v,w,k){if(n.call(this),!v)throw new Error("No data for PDF table.");var x,T,C,E,j=[],K=[],B=[],$={},le={},me=[],U=[],z=(k=k||{}).autoSize||!1,I=k.printHeaders!==!1,W=k.css&&k.css["font-size"]!==void 0?16*k.css["font-size"]:k.fontSize||12,O=k.margins||Object.assign({width:this.getPageWidth()},e),F=typeof k.padding=="number"?k.padding:3,Z=k.headerBackgroundColor||"#c8c8c8",ee=k.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=ee,this.setFontSize(W),w==null)K=j=Object.keys(v[0]),B=j.map(function(){return"left"});else if(Array.isArray(w)&&Tr(w[0])==="object")for(j=w.map(function(ke){return ke.name}),K=w.map(function(ke){return ke.prompt||ke.name||""}),B=w.map(function(ke){return ke.align||"left"}),x=0;x<w.length;x+=1)le[w[x].name]=.7499990551181103*w[x].width;else Array.isArray(w)&&typeof w[0]=="string"&&(K=j=w,B=j.map(function(){return"left"}));if(z||Array.isArray(w)&&typeof w[0]=="string")for(x=0;x<j.length;x+=1){for($[E=j[x]]=v.map(function(ke){return ke[E]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(K[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=$[E],this.setFont(void 0,"normal"),C=0;C<T.length;C+=1)me.push(this.getTextDimensions(T[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[E]=Math.max.apply(null,me)+F+F,me=[]}if(I){var ae={};for(x=0;x<j.length;x+=1)ae[j[x]]={},ae[j[x]].text=K[x],ae[j[x]].align=B[x];var he=d.call(this,ae,le);U=j.map(function(ke){return new o(h,m,le[ke],he,ae[ke].text,void 0,ae[ke].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var be=w.reduce(function(ke,Y){return ke[Y.name]=Y.align,ke},{});for(x=0;x<v.length;x+=1){"rowStart"in k&&k.rowStart instanceof Function&&k.rowStart({row:x,data:v[x]},this);var ne=d.call(this,v[x],le);for(C=0;C<j.length;C+=1){var fe=v[x][j[C]];"cellStart"in k&&k.cellStart instanceof Function&&k.cellStart({row:x,col:C,data:fe},this),l.call(this,new o(h,m,le[j[C]],ne,fe,x+2,be[j[C]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=m,this};var d=function(h,m){var v=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,k=this.internal.scaleFactor;return Object.keys(h).map(function(x){var T=h[x];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,m[x]-v-v)},this).map(function(x){return this.getLineHeightFactor()*x.length*w/k+v+v},this).reduce(function(x,T){return Math.max(x,T)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,m){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var k=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){v=this.internal.__cell__.tableHeaderRow[x].clone(),m&&(v.y=this.internal.__cell__.margins.top||0,k.push(v)),v.lineNumber=h;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,v),this.setTextColor(T)}k.length>0&&this.setTableHeaderRow(k),this.setFont(void 0,"normal"),t=!1}})(jt.API);var wv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_v=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Q0=bv(_v),Nv=[100,200,300,400,500,600,700,800,900],c3=bv(Nv);function g0(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return wv[o=o||"normal"]?o:"normal"})(r.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),i=(function(o){return typeof Q0[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function g1(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var d3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},v1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function y1(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function x1(r){return r.trimLeft()}function h3(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function f3(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var fh,b1,w1,Xu,mh,_1,N1,k1,v0=["times"];function S1(r,e,t,n,i){var o=4,l=A1;switch(i){case jt.API.image_compression.FAST:o=1,l=j1;break;case jt.API.image_compression.MEDIUM:o=6,l=C1;break;case jt.API.image_compression.SLOW:o=9,l=E1}r=(function(h,m,v,w){for(var k,x=h.length/m,T=new Uint8Array(h.length+x),C=[m3,j1,A1,C1,E1],E=0;E<x;E+=1){var j=E*m,K=h.subarray(j,j+m);if(w)T.set(w(K,v,k),j+E);else{for(var B=C.length,$=[],le=0;le<B;le+=1)$[le]=C[le](K,v,k);var me=g3($.concat());T.set($[me],j+E)}k=K}return T})(r,e,Math.ceil(t*n/8),l);var d=H0(r,{level:o});return jt.API.__addimage__.arrayBufferToBinaryString(d)}function m3(r){var e=Array.apply([],r);return e.unshift(0),e}function j1(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var o=r[i-e]||0;n[i+1]=r[i]-o+256&255}return n}function A1(r,e,t){var n=r.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var l=t&&t[o]||0;i[o+1]=r[o]-l+256&255}return i}function C1(r,e,t){var n=r.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var l=r[o-e]||0,d=t&&t[o]||0;i[o+1]=r[o]+256-(l+d>>>1)&255}return i}function E1(r,e,t){var n=r.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var l=p3(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=r[o]-l+256&255}return i}function p3(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),o=Math.abs(r+e-t-t);return n<=i&&n<=o?r:i<=o?e:t}function g3(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function y0(r,e,t){var n=e*t,i=Math.floor(n/8),o=16-(n-8*i+t),l=(1<<t)-1;return kv(r,i)>>o&l}function P1(r,e,t,n){var i=t*n,o=Math.floor(i/8),l=16-(i-8*o+n),d=(1<<n)-1,h=(e&d)<<l;(function(m,v,w){if(v+1<m.byteLength)m.setUint16(v,w,!1);else{var k=w>>8&255;m.setUint8(v,k)}})(r,o,kv(r,o)&~(d<<l)&65535|h)}function kv(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function v3(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],o=i>>7,l=1<<1+(7&i);r[e++],r[e++];var d=null,h=null;o&&(d=e,h=l,e+=3*l);var m=!0,v=[],w=0,k=null,x=0,T=null;for(this.width=t,this.height=n;m&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,T=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((O=r[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=r[e++];w=r[e++]|r[e++]<<8,k=r[e++],1&C||(k=null),x=C>>2&7,e++;break;case 254:for(;;){if(!((O=r[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var E=r[e++]|r[e++]<<8,j=r[e++]|r[e++]<<8,K=r[e++]|r[e++]<<8,B=r[e++]|r[e++]<<8,$=r[e++],le=$>>6&1,me=1<<1+(7&$),U=d,z=h,I=!1;$>>7&&(I=!0,U=e,z=me,e+=3*me);var W=e;for(e++;;){var O;if(!((O=r[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}v.push({x:E,y:j,width:K,height:B,has_local_palette:I,palette_offset:U,palette_size:z,data_offset:W,data_length:e-W,transparent_index:k,interlaced:!!le,delay:w,disposal:x});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return T},this.frameInfo=function(F){if(F<0||F>=v.length)throw new Error("Frame index out of range.");return v[F]},this.decodeAndBlitFrameBGRA=function(F,Z){var ee=this.frameInfo(F),ae=ee.width*ee.height,he=new Uint8Array(ae);L1(r,ee.data_offset,he,ae);var be=ee.palette_offset,ne=ee.transparent_index;ne===null&&(ne=256);var fe=ee.width,ke=t-fe,Y=fe,A=4*(ee.y*t+ee.x),H=4*((ee.y+ee.height)*t+ee.x),Q=A,ie=4*ke;ee.interlaced===!0&&(ie+=4*t*7);for(var se=8,ye=0,ce=he.length;ye<ce;++ye){var Ae=he[ye];if(Y===0&&(Y=fe,(Q+=ie)>=H&&(ie=4*ke+4*t*(se-1),Q=A+(fe+ke)*(se<<1),se>>=1)),Ae===ne)Q+=4;else{var Pe=r[be+3*Ae],ze=r[be+3*Ae+1],He=r[be+3*Ae+2];Z[Q++]=He,Z[Q++]=ze,Z[Q++]=Pe,Z[Q++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(F,Z){var ee=this.frameInfo(F),ae=ee.width*ee.height,he=new Uint8Array(ae);L1(r,ee.data_offset,he,ae);var be=ee.palette_offset,ne=ee.transparent_index;ne===null&&(ne=256);var fe=ee.width,ke=t-fe,Y=fe,A=4*(ee.y*t+ee.x),H=4*((ee.y+ee.height)*t+ee.x),Q=A,ie=4*ke;ee.interlaced===!0&&(ie+=4*t*7);for(var se=8,ye=0,ce=he.length;ye<ce;++ye){var Ae=he[ye];if(Y===0&&(Y=fe,(Q+=ie)>=H&&(ie=4*ke+4*t*(se-1),Q=A+(fe+ke)*(se<<1),se>>=1)),Ae===ne)Q+=4;else{var Pe=r[be+3*Ae],ze=r[be+3*Ae+1],He=r[be+3*Ae+2];Z[Q++]=Pe,Z[Q++]=ze,Z[Q++]=He,Z[Q++]=255}--Y}}}function L1(r,e,t,n){for(var i=r[e++],o=1<<i,l=o+1,d=l+1,h=i+1,m=(1<<h)-1,v=0,w=0,k=0,x=r[e++],T=new Int32Array(4096),C=null;;){for(;v<16&&x!==0;)w|=r[e++]<<v,v+=8,x===1?x=r[e++]:--x;if(v<h)break;var E=w&m;if(w>>=h,v-=h,E!==o){if(E===l)break;for(var j=E<d?E:C,K=0,B=j;B>o;)B=T[B]>>8,++K;var $=B;if(k+K+(j!==E?1:0)>n)return void qr.log("Warning, gif stream longer than expected.");t[k++]=$;var le=k+=K;for(j!==E&&(t[k++]=$),B=j;K--;)B=T[B],t[--le]=255&B,B>>=8;C!==null&&d<4096&&(T[d++]=C<<8|$,d>=m+1&&h<12&&(++h,m=m<<1|1)),C=E}else d=l+1,m=(1<<(h=i+1))-1,C=null}return k!==n&&qr.log("Warning, gif stream shorter than expected."),t}function x0(r){var e,t,n,i,o,l=Math.floor,d=new Array(64),h=new Array(64),m=new Array(64),v=new Array(64),w=new Array(65535),k=new Array(65535),x=new Array(64),T=new Array(64),C=[],E=0,j=7,K=new Array(64),B=new Array(64),$=new Array(64),le=new Array(256),me=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(A,H){for(var Q=0,ie=0,se=new Array,ye=1;ye<=16;ye++){for(var ce=1;ce<=A[ye];ce++)se[H[ie]]=[],se[H[ie]][0]=Q,se[H[ie]][1]=ye,ie++,Q++;Q*=2}return se}function be(A){for(var H=A[0],Q=A[1]-1;Q>=0;)H&1<<Q&&(E|=1<<j),Q--,--j<0&&(E==255?(ne(255),ne(0)):ne(E),j=7,E=0)}function ne(A){C.push(A)}function fe(A){ne(A>>8&255),ne(255&A)}function ke(A,H,Q,ie,se){for(var ye,ce=se[0],Ae=se[240],Pe=(function($e,wt){var st,ot,tt,hr,tr,Wt,rr,Lt,ft,Ot,it=0;for(ft=0;ft<8;++ft){st=$e[it],ot=$e[it+1],tt=$e[it+2],hr=$e[it+3],tr=$e[it+4],Wt=$e[it+5],rr=$e[it+6];var $r=st+(Lt=$e[it+7]),nr=st-Lt,kt=ot+rr,Kt=ot-rr,Nr=tt+Wt,_t=tt-Wt,mr=hr+tr,Et=hr-tr,Rt=$r+mr,fr=$r-mr,zt=kt+Nr,Pt=kt-Nr;$e[it]=Rt+zt,$e[it+4]=Rt-zt;var ur=.707106781*(Pt+fr);$e[it+2]=fr+ur,$e[it+6]=fr-ur;var fi=.382683433*((Rt=Et+_t)-(Pt=Kt+nr)),Wr=.5411961*Rt+fi,Zn=1.306562965*Pt+fi,Bn=.707106781*(zt=_t+Kt),St=nr+Bn,cs=nr-Bn;$e[it+5]=cs+Wr,$e[it+3]=cs-Wr,$e[it+1]=St+Zn,$e[it+7]=St-Zn,it+=8}for(it=0,ft=0;ft<8;++ft){st=$e[it],ot=$e[it+8],tt=$e[it+16],hr=$e[it+24],tr=$e[it+32],Wt=$e[it+40],rr=$e[it+48];var ds=st+(Lt=$e[it+56]),Mr=st-Lt,Tn=ot+rr,br=ot-rr,Ur=tt+Wt,Vr=tt-Wt,qs=hr+tr,Ti=hr-tr,hs=ds+qs,mi=ds-qs,vn=Tn+Ur,Jr=Tn-Ur;$e[it]=hs+vn,$e[it+32]=hs-vn;var qn=.707106781*(Jr+mi);$e[it+16]=mi+qn,$e[it+48]=mi-qn;var ta=.382683433*((hs=Ti+Vr)-(Jr=br+Mr)),Xn=.5411961*hs+ta,Oi=1.306562965*Jr+ta,ws=.707106781*(vn=Vr+br),Ii=Mr+ws,pi=Mr-ws;$e[it+40]=pi+Xn,$e[it+24]=pi-Xn,$e[it+8]=Ii+Oi,$e[it+56]=Ii-Oi,it++}for(ft=0;ft<64;++ft)Ot=$e[ft]*wt[ft],x[ft]=Ot>0?Ot+.5|0:Ot-.5|0;return x})(A,H),ze=0;ze<64;++ze)T[U[ze]]=Pe[ze];var He=T[0]-Q;Q=T[0],He==0?be(ie[0]):(be(ie[k[ye=32767+He]]),be(w[ye]));for(var Je=63;Je>0&&T[Je]==0;)Je--;if(Je==0)return be(ce),Q;for(var dt,X=1;X<=Je;){for(var Qe=X;T[X]==0&&X<=Je;)++X;var Yt=X-Qe;if(Yt>=16){dt=Yt>>4;for(var Ct=1;Ct<=dt;++Ct)be(Ae);Yt&=15}ye=32767+T[X],be(se[(Yt<<4)+k[ye]]),be(w[ye]),X++}return Je!=63&&be(ce),Q}function Y(A){A=Math.min(Math.max(A,1),100),o!=A&&((function(H){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var se=l((Q[ie]*H+50)/100);se=Math.min(Math.max(se,1),255),d[U[ie]]=se}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var Ae=l((ye[ce]*H+50)/100);Ae=Math.min(Math.max(Ae,1),255),h[U[ce]]=Ae}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,He=0;He<8;He++)for(var Je=0;Je<8;Je++)m[ze]=1/(d[U[ze]]*Pe[He]*Pe[Je]*8),v[ze]=1/(h[U[ze]]*Pe[He]*Pe[Je]*8),ze++})(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),o=A)}this.encode=function(A,H){H&&Y(H),C=new Array,E=0,j=7,fe(65496),fe(65504),fe(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),fe(1),fe(1),ne(0),ne(0),(function(){fe(65499),fe(132),ne(0);for(var ot=0;ot<64;ot++)ne(d[ot]);ne(1);for(var tt=0;tt<64;tt++)ne(h[tt])})(),(function(ot,tt){fe(65472),fe(17),ne(8),fe(tt),fe(ot),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)})(A.width,A.height),(function(){fe(65476),fe(418),ne(0);for(var ot=0;ot<16;ot++)ne(z[ot+1]);for(var tt=0;tt<=11;tt++)ne(I[tt]);ne(16);for(var hr=0;hr<16;hr++)ne(W[hr+1]);for(var tr=0;tr<=161;tr++)ne(O[tr]);ne(1);for(var Wt=0;Wt<16;Wt++)ne(F[Wt+1]);for(var rr=0;rr<=11;rr++)ne(Z[rr]);ne(17);for(var Lt=0;Lt<16;Lt++)ne(ee[Lt+1]);for(var ft=0;ft<=161;ft++)ne(ae[ft])})(),fe(65498),fe(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var Q=0,ie=0,se=0;E=0,j=7,this.encode.displayName="_encode_";for(var ye,ce,Ae,Pe,ze,He,Je,dt,X,Qe=A.data,Yt=A.width,Ct=A.height,$e=4*Yt,wt=0;wt<Ct;){for(ye=0;ye<$e;){for(ze=$e*wt+ye,Je=-1,dt=0,X=0;X<64;X++)He=ze+(dt=X>>3)*$e+(Je=4*(7&X)),wt+dt>=Ct&&(He-=$e*(wt+1+dt-Ct)),ye+Je>=$e&&(He-=ye+Je-$e+4),ce=Qe[He++],Ae=Qe[He++],Pe=Qe[He++],K[X]=(me[ce]+me[Ae+256|0]+me[Pe+512|0]>>16)-128,B[X]=(me[ce+768|0]+me[Ae+1024|0]+me[Pe+1280|0]>>16)-128,$[X]=(me[ce+1280|0]+me[Ae+1536|0]+me[Pe+1792|0]>>16)-128;Q=ke(K,m,Q,e,n),ie=ke(B,v,ie,t,i),se=ke($,v,se,t,i),ye+=32}wt+=8}if(j>=0){var st=[];st[1]=j+1,st[0]=(1<<j+1)-1,be(st)}return fe(65497),new Uint8Array(C)},r=r||50,(function(){for(var A=String.fromCharCode,H=0;H<256;H++)le[H]=A(H)})(),e=he(z,I),t=he(F,Z),n=he(W,O),i=he(ee,ae),(function(){for(var A=1,H=2,Q=1;Q<=15;Q++){for(var ie=A;ie<H;ie++)k[32767+ie]=Q,w[32767+ie]=[],w[32767+ie][1]=Q,w[32767+ie][0]=ie;for(var se=-(H-1);se<=-A;se++)k[32767+se]=Q,w[32767+se]=[],w[32767+se][1]=Q,w[32767+se][0]=H-1+se;A<<=1,H<<=1}})(),(function(){for(var A=0;A<256;A++)me[A]=19595*A,me[A+256|0]=38470*A,me[A+512|0]=7471*A+32768,me[A+768|0]=-11059*A,me[A+1024|0]=-21709*A,me[A+1280|0]=32768*A+8421375,me[A+1536|0]=-27439*A,me[A+1792|0]=-5329*A})(),Y(r)}function ja(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function T1(r){function e(I){if(!I)throw Error("assert :P")}function t(I,W,O){for(var F=0;4>F;F++)if(I[W+F]!=O.charCodeAt(F))return!0;return!1}function n(I,W,O,F,Z){for(var ee=0;ee<Z;ee++)I[W+ee]=O[F+ee]}function i(I,W,O,F){for(var Z=0;Z<F;Z++)I[W+Z]=O}function o(I){return new Int32Array(I)}function l(I,W){for(var O=[],F=0;F<I;F++)O.push(new W);return O}function d(I,W){var O=[];return(function F(Z,ee,ae){for(var he=ae[ee],be=0;be<he&&(Z.push(ae.length>ee+1?[]:new W),!(ae.length<ee+1));be++)F(Z[be],ee+1,ae)})(O,0,I),O}var h=function(){var I=this;function W(f,g){for(var _=1<<g-1>>>0;f&_;)_>>>=1;return _?(f&_-1)+_:f}function O(f,g,_,S,D){e(!(S%_));do f[g+(S-=_)]=D;while(0<S)}function F(f,g,_,S,D){if(e(2328>=D),512>=D)var R=o(512);else if((R=o(D))==null)return 0;return(function(q,V,G,te,pe,je){var re,we,Se=V,Me=1<<G,Ee=o(16),De=o(16);for(e(pe!=0),e(te!=null),e(q!=null),e(0<G),we=0;we<pe;++we){if(15<te[we])return 0;++Ee[te[we]]}if(Ee[0]==pe)return 0;for(De[1]=0,re=1;15>re;++re){if(Ee[re]>1<<re)return 0;De[re+1]=De[re]+Ee[re]}for(we=0;we<pe;++we)re=te[we],0<te[we]&&(je[De[re]++]=we);if(De[15]==1)return(te=new Z).g=0,te.value=je[0],O(q,Se,1,Me,te),Me;var Fe,Re=-1,qe=Me-1,bt=0,ut=1,Zt=1,mt=1<<G;for(we=0,re=1,pe=2;re<=G;++re,pe<<=1){if(ut+=Zt<<=1,0>(Zt-=Ee[re]))return 0;for(;0<Ee[re];--Ee[re])(te=new Z).g=re,te.value=je[we++],O(q,Se+bt,pe,mt,te),bt=W(bt,re)}for(re=G+1,pe=2;15>=re;++re,pe<<=1){if(ut+=Zt<<=1,0>(Zt-=Ee[re]))return 0;for(;0<Ee[re];--Ee[re]){if(te=new Z,(bt&qe)!=Re){for(Se+=mt,Fe=1<<(Re=re)-G;15>Re&&!(0>=(Fe-=Ee[Re]));)++Re,Fe<<=1;Me+=mt=1<<(Fe=Re-G),q[V+(Re=bt&qe)].g=Fe+G,q[V+Re].value=Se-V-Re}te.g=re-G,te.value=je[we++],O(q,Se+(bt>>G),pe,mt,te),bt=W(bt,re)}}return ut!=2*De[15]-1?0:Me})(f,g,_,S,D,R)}function Z(){this.value=this.g=0}function ee(){this.value=this.g=0}function ae(){this.G=l(5,Z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(ni,ee)}function he(f,g,_,S){e(f!=null),e(g!=null),e(2147483648>S),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=g,f.pa=_,f.Jd=g,f.Yc=_+S,f.Zc=4<=S?_+S-4+1:_,ce(f)}function be(f,g){for(var _=0;0<g--;)_|=Pe(f,128)<<g;return _}function ne(f,g){var _=be(f,g);return Ae(f)?-_:_}function fe(f,g,_,S){var D,R=0;for(e(f!=null),e(g!=null),e(4294967288>S),f.Sb=S,f.Ra=0,f.u=0,f.h=0,4<S&&(S=4),D=0;D<S;++D)R+=g[_+D]<<8*D;f.Ra=R,f.bb=S,f.oa=g,f.pa=_}function ke(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<Ha-8>>>0,++f.bb,f.u-=8;ie(f)&&(f.h=1,f.u=0)}function Y(f,g){if(e(0<=g),!f.h&&g<=Vs){var _=Q(f)&Ws[g];return f.u+=g,ke(f),_}return f.h=1,f.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(f){return f.Ra>>>(f.u&Ha-1)>>>0}function ie(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>Ha}function se(f,g){f.u=g,f.h=ie(f)}function ye(f){f.u>=Bi&&(e(f.u>=Bi),ke(f))}function ce(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function Ae(f){return be(f,1)}function Pe(f,g){var _=f.Ca;0>f.b&&ce(f);var S=f.b,D=_*g>>>8,R=(f.I>>>S>D)+0;for(R?(_-=D,f.I-=D+1<<S>>>0):_=D+1,S=_,D=0;256<=S;)D+=8,S>>=8;return S=7^D+fa[S],f.b-=S,f.Ca=(_<<S)-1,R}function ze(f,g,_){f[g+0]=_>>24&255,f[g+1]=_>>16&255,f[g+2]=_>>8&255,f[g+3]=255&_}function He(f,g){return f[g+0]|f[g+1]<<8}function Je(f,g){return He(f,g)|f[g+2]<<16}function dt(f,g){return He(f,g)|He(f,g+2)<<16}function X(f,g){var _=1<<g;return e(f!=null),e(0<g),f.X=o(_),f.X==null?0:(f.Mb=32-g,f.Xa=g,1)}function Qe(f,g){e(f!=null),e(g!=null),e(f.Xa==g.Xa),n(g.X,0,f.X,0,1<<g.Xa)}function Yt(){this.X=[],this.Xa=this.Mb=0}function Ct(f,g,_,S){e(_!=null),e(S!=null);var D=_[0],R=S[0];return D==0&&(D=(f*R+g/2)/g),R==0&&(R=(g*D+f/2)/f),0>=D||0>=R?0:(_[0]=D,S[0]=R,1)}function $e(f,g){return f+(1<<g)-1>>>g}function wt(f,g){return((4278255360&f)+(4278255360&g)>>>0&4278255360)+((16711935&f)+(16711935&g)>>>0&16711935)>>>0}function st(f,g){I[g]=function(_,S,D,R,q,V,G){var te;for(te=0;te<q;++te){var pe=I[f](V[G+te-1],D,R+te);V[G+te]=wt(_[S+te],pe)}}}function ot(){this.ud=this.hd=this.jd=0}function tt(f,g){return((4278124286&(f^g))>>>1)+(f&g)>>>0}function hr(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function tr(f,g){return hr(f+(f-g+.5>>1))}function Wt(f,g,_){return Math.abs(g-_)-Math.abs(f-_)}function rr(f,g,_,S,D,R,q){for(S=R[q-1],_=0;_<D;++_)R[q+_]=S=wt(f[g+_],S)}function Lt(f,g,_,S,D){var R;for(R=0;R<_;++R){var q=f[g+R],V=q>>8&255,G=16711935&(G=(G=16711935&q)+((V<<16)+V));S[D+R]=(4278255360&q)+G>>>0}}function ft(f,g){g.jd=255&f,g.hd=f>>8&255,g.ud=f>>16&255}function Ot(f,g,_,S,D,R){var q;for(q=0;q<S;++q){var V=g[_+q],G=V>>>8,te=V,pe=255&(pe=(pe=V>>>16)+((f.jd<<24>>24)*(G<<24>>24)>>>5));te=255&(te=(te+=(f.hd<<24>>24)*(G<<24>>24)>>>5)+((f.ud<<24>>24)*(pe<<24>>24)>>>5)),D[R+q]=(4278255360&V)+(pe<<16)+te}}function it(f,g,_,S,D){I[g]=function(R,q,V,G,te,pe,je,re,we){for(G=je;G<re;++G)for(je=0;je<we;++je)te[pe++]=D(V[S(R[q++])])},I[f]=function(R,q,V,G,te,pe,je){var re=8>>R.b,we=R.Ea,Se=R.K[0],Me=R.w;if(8>re)for(R=(1<<R.b)-1,Me=(1<<re)-1;q<V;++q){var Ee,De=0;for(Ee=0;Ee<we;++Ee)Ee&R||(De=S(G[te++])),pe[je++]=D(Se[De&Me]),De>>=re}else I["VP8LMapColor"+_](G,te,Se,Me,pe,je,q,V,we)}}function $r(f,g,_,S,D){for(_=g+_;g<_;){var R=f[g++];S[D++]=R>>16&255,S[D++]=R>>8&255,S[D++]=255&R}}function nr(f,g,_,S,D){for(_=g+_;g<_;){var R=f[g++];S[D++]=R>>16&255,S[D++]=R>>8&255,S[D++]=255&R,S[D++]=R>>24&255}}function kt(f,g,_,S,D){for(_=g+_;g<_;){var R=(q=f[g++])>>16&240|q>>12&15,q=240&q|q>>28&15;S[D++]=R,S[D++]=q}}function Kt(f,g,_,S,D){for(_=g+_;g<_;){var R=(q=f[g++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;S[D++]=R,S[D++]=q}}function Nr(f,g,_,S,D){for(_=g+_;g<_;){var R=f[g++];S[D++]=255&R,S[D++]=R>>8&255,S[D++]=R>>16&255}}function _t(f,g,_,S,D,R){if(R==0)for(_=g+_;g<_;)ze(S,((R=f[g++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),D+=32;else n(S,D,f,g,_)}function mr(f,g){I[g][0]=I[f+"0"],I[g][1]=I[f+"1"],I[g][2]=I[f+"2"],I[g][3]=I[f+"3"],I[g][4]=I[f+"4"],I[g][5]=I[f+"5"],I[g][6]=I[f+"6"],I[g][7]=I[f+"7"],I[g][8]=I[f+"8"],I[g][9]=I[f+"9"],I[g][10]=I[f+"10"],I[g][11]=I[f+"11"],I[g][12]=I[f+"12"],I[g][13]=I[f+"13"],I[g][14]=I[f+"0"],I[g][15]=I[f+"0"]}function Et(f){return f==Qo||f==So||f==Ml||f==Rl}function Rt(){this.eb=[],this.size=this.A=this.fb=0}function fr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rt,this.f.kb=new fr,this.sd=null}function Pt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ur(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fi(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Wr(f,g){var _=f.T,S=g.ba.f.RGBA,D=S.eb,R=S.fb+f.ka*S.A,q=Es[g.ba.S],V=f.y,G=f.O,te=f.f,pe=f.N,je=f.ea,re=f.W,we=g.cc,Se=g.dc,Me=g.Mc,Ee=g.Nc,De=f.ka,Fe=f.ka+f.T,Re=f.U,qe=Re+1>>1;for(De==0?q(V,G,null,null,te,pe,je,re,te,pe,je,re,D,R,null,null,Re):(q(g.ec,g.fc,V,G,we,Se,Me,Ee,te,pe,je,re,D,R-S.A,D,R,Re),++_);De+2<Fe;De+=2)we=te,Se=pe,Me=je,Ee=re,pe+=f.Rc,re+=f.Rc,R+=2*S.A,q(V,(G+=2*f.fa)-f.fa,V,G,we,Se,Me,Ee,te,pe,je,re,D,R-S.A,D,R,Re);return G+=f.fa,f.j+Fe<f.o?(n(g.ec,g.fc,V,G,Re),n(g.cc,g.dc,te,pe,qe),n(g.Mc,g.Nc,je,re,qe),_--):1&Fe||q(V,G,null,null,te,pe,je,re,te,pe,je,re,D,R+S.A,null,null,Re),_}function Zn(f,g,_){var S=f.F,D=[f.J];if(S!=null){var R=f.U,q=g.ba.S,V=q==Fl||q==Ml;g=g.ba.f.RGBA;var G=[0],te=f.ka;G[0]=f.T,f.Kb&&(te==0?--G[0]:(--te,D[0]-=f.width),f.j+f.ka+f.T==f.o&&(G[0]=f.o-f.j-te));var pe=g.eb;te=g.fb+te*g.A,f=Il(S,D[0],f.width,R,G,pe,te+(V?0:3),g.A),e(_==G),f&&Et(q)&&ko(pe,te,V,R,G,g.A)}return 0}function Bn(f){var g=f.ma,_=g.ba.S,S=11>_,D=_==Ja||_==Dl||_==Fl||_==Or||_==12||Et(_);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Ho(g.Oa,f,D?11:12))return 0;if(D&&Et(_)&&mo(),f.da)alert("todo:use_scaling");else{if(S){if(g.Ib=fi,f.Kb){if(_=f.U+1>>1,g.memory=o(f.U+2*_),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+f.U,g.Mc=g.cc,g.Nc=g.dc+_,g.Ib=Wr,mo()}}else alert("todo:EmitYUV");D&&(g.Jb=Zn,S&&ts())}if(S&&!Gn){for(f=0;256>f;++f)Ps[f]=89858*(f-128)+wi>>va,Ls[f]=-22014*(f-128)+wi,nl[f]=-45773*(f-128),Eo[f]=113618*(f-128)+wi>>va;for(f=kr;f<Er;++f)g=76283*(f-16)+wi>>va,ku[f-kr]=Zr(g,255),jd[f-kr]=Zr(g+8>>4,15);Gn=1}return 1}function St(f){var g=f.ma,_=f.U,S=f.T;return e(!(1&f.ka)),0>=_||0>=S?0:(_=g.Ib(f,g),g.Jb!=null&&g.Jb(f,g,_),g.Dc+=_,1)}function cs(f){f.ma.memory=null}function ds(f,g,_,S){return Y(f,8)!=47?0:(g[0]=Y(f,14)+1,_[0]=Y(f,14)+1,S[0]=Y(f,1),Y(f,3)!=0?0:!f.h)}function Mr(f,g){if(4>f)return f+1;var _=f-2>>1;return(2+(1&f)<<_)+Y(g,_)+1}function Tn(f,g){return 120<g?g-120:1<=(_=((_=Qh[g-1])>>4)*f+(8-(15&_)))?_:1;var _}function br(f,g,_){var S=Q(_),D=f[g+=255&S].g-8;return 0<D&&(se(_,_.u+8),S=Q(_),g+=f[g].value,g+=S&(1<<D)-1),se(_,_.u+f[g].g),f[g].value}function Ur(f,g,_){return _.g+=f.g,_.value+=f.value<<g>>>0,e(8>=_.g),f.g}function Vr(f,g,_){var S=f.xc;return e((g=S==0?0:f.vc[f.md*(_>>S)+(g>>S)])<f.Wb),f.Ya[g]}function qs(f,g,_,S){var D=f.ab,R=f.c*g,q=f.C;g=q+g;var V=_,G=S;for(S=f.Ta,_=f.Ua;0<D--;){var te=f.gc[D],pe=q,je=g,re=V,we=G,Se=(G=S,V=_,te.Ea);switch(e(pe<je),e(je<=te.nc),te.hc){case 2:dn(re,we,(je-pe)*Se,G,V);break;case 0:var Me=pe,Ee=je,De=G,Fe=V,Re=(mt=te).Ea;Me==0&&(ma(re,we,null,null,1,De,Fe),rr(re,we+1,0,0,Re-1,De,Fe+1),we+=Re,Fe+=Re,++Me);for(var qe=1<<mt.b,bt=qe-1,ut=$e(Re,mt.b),Zt=mt.K,mt=mt.w+(Me>>mt.b)*ut;Me<Ee;){var ir=Zt,an=mt,Xt=1;for(qi(re,we,De,Fe-Re,1,De,Fe);Xt<Re;){var ct=(Xt&~bt)+qe;ct>Re&&(ct=Re),(0,bo[ir[an++]>>8&15])(re,we+ +Xt,De,Fe+Xt-Re,ct-Xt,De,Fe+Xt),Xt=ct}we+=Re,Fe+=Re,++Me&bt||(mt+=ut)}je!=te.nc&&n(G,V-Se,G,V+(je-pe-1)*Se,Se);break;case 1:for(Se=re,Ee=we,Re=(re=te.Ea)-(Fe=re&~(De=(we=1<<te.b)-1)),Me=$e(re,te.b),qe=te.K,te=te.w+(pe>>te.b)*Me;pe<je;){for(bt=qe,ut=te,Zt=new ot,mt=Ee+Fe,ir=Ee+re;Ee<mt;)ft(bt[ut++],Zt),Yo(Zt,Se,Ee,we,G,V),Ee+=we,V+=we;Ee<ir&&(ft(bt[ut++],Zt),Yo(Zt,Se,Ee,Re,G,V),Ee+=Re,V+=Re),++pe&De||(te+=Me)}break;case 3:if(re==G&&we==V&&0<te.b){for(Ee=G,re=Se=V+(je-pe)*Se-(Fe=(je-pe)*$e(te.Ea,te.b)),we=G,De=V,Me=[],Fe=(Re=Fe)-1;0<=Fe;--Fe)Me[Fe]=we[De+Fe];for(Fe=Re-1;0<=Fe;--Fe)Ee[re+Fe]=Me[Fe];yo(te,pe,je,G,Se,G,V)}else yo(te,pe,je,re,we,G,V)}V=S,G=_}G!=_&&n(S,_,V,G,R)}function Ti(f,g){var _=f.V,S=f.Ba+f.c*f.C,D=g-f.C;if(e(g<=f.l.o),e(16>=D),0<D){var R=f.l,q=f.Ta,V=f.Ua,G=R.width;if(qs(f,D,_,S),D=V=[V],e((_=f.C)<(S=g)),e(R.v<R.va),S>R.o&&(S=R.o),_<R.j){var te=R.j-_;_=R.j,D[0]+=te*G}if(_>=S?_=0:(D[0]+=4*R.v,R.ka=_-R.j,R.U=R.va-R.v,R.T=S-_,_=1),_){if(V=V[0],11>(_=f.ca).S){var pe=_.f.RGBA,je=(S=_.S,D=R.U,R=R.T,te=pe.eb,pe.A),re=R;for(pe=pe.fb+f.Ma*pe.A;0<re--;){var we=q,Se=V,Me=D,Ee=te,De=pe;switch(S){case bu:Ko(we,Se,Me,Ee,De);break;case Ja:pa(we,Se,Me,Ee,De);break;case Qo:pa(we,Se,Me,Ee,De),ko(Ee,De,0,Me,1,0);break;case wd:wo(we,Se,Me,Ee,De);break;case Dl:_t(we,Se,Me,Ee,De,1);break;case So:_t(we,Se,Me,Ee,De,1),ko(Ee,De,0,Me,1,0);break;case Fl:_t(we,Se,Me,Ee,De,0);break;case Ml:_t(we,Se,Me,Ee,De,0),ko(Ee,De,1,Me,1,0);break;case Or:Ga(we,Se,Me,Ee,De);break;case Rl:Ga(we,Se,Me,Ee,De),kc(Ee,De,Me,1,0);break;case wu:Ya(we,Se,Me,Ee,De);break;default:e(0)}V+=G,pe+=je}f.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=_.height)}}f.C=g,e(f.C<=f.i)}function hs(f){var g;if(0<f.ua)return 0;for(g=0;g<f.Wb;++g){var _=f.Ya[g].G,S=f.Ya[g].H;if(0<_[1][S[1]+0].g||0<_[2][S[2]+0].g||0<_[3][S[3]+0].g)return 0}return 1}function mi(f,g,_,S,D,R){if(f.Z!=0){var q=f.qd,V=f.rd;for(e(rs[f.Z]!=null);g<_;++g)rs[f.Z](q,V,S,D,S,D,R),q=S,V=D,D+=R;f.qd=q,f.rd=V}}function vn(f,g){var _=f.l.ma,S=_.Z==0||_.Z==1?f.l.j:f.C;if(S=f.C<S?S:f.C,e(g<=f.l.o),g>S){var D=f.l.width,R=_.ca,q=_.tb+D*S,V=f.V,G=f.Ba+f.c*S,te=f.gc;e(f.ab==1),e(te[0].hc==3),xi(te[0],S,g,V,G,R,q),mi(_,S,g,R,q,D)}f.C=f.Ma=g}function Jr(f,g,_,S,D,R,q){var V=f.$/S,G=f.$%S,te=f.m,pe=f.s,je=_+f.$,re=je;D=_+S*D;var we=_+S*R,Se=280+pe.ua,Me=f.Pb?V:16777216,Ee=0<pe.ua?pe.Wa:null,De=pe.wc,Fe=je<we?Vr(pe,G,V):null;e(f.C<R),e(we<=D);var Re=!1;e:for(;;){for(;Re||je<we;){var qe=0;if(V>=Me){var bt=je-_;e((Me=f).Pb),Me.wd=Me.m,Me.xd=bt,0<Me.s.ua&&Qe(Me.s.Wa,Me.s.vb),Me=V+Nu}if(G&De||(Fe=Vr(pe,G,V)),e(Fe!=null),Fe.Qb&&(g[je]=Fe.qb,Re=!0),!Re)if(ye(te),Fe.jc){qe=te,bt=g;var ut=je,Zt=Fe.pd[Q(qe)&ni-1];e(Fe.jc),256>Zt.g?(se(qe,qe.u+Zt.g),bt[ut]=Zt.value,qe=0):(se(qe,qe.u+Zt.g-256),e(256<=Zt.value),qe=Zt.value),qe==0&&(Re=!0)}else qe=br(Fe.G[0],Fe.H[0],te);if(te.h)break;if(Re||256>qe){if(!Re)if(Fe.nd)g[je]=(Fe.qb|qe<<8)>>>0;else{if(ye(te),Re=br(Fe.G[1],Fe.H[1],te),ye(te),bt=br(Fe.G[2],Fe.H[2],te),ut=br(Fe.G[3],Fe.H[3],te),te.h)break;g[je]=(ut<<24|Re<<16|qe<<8|bt)>>>0}if(Re=!1,++je,++G>=S&&(G=0,++V,q!=null&&V<=R&&!(V%16)&&q(f,V),Ee!=null))for(;re<je;)qe=g[re++],Ee.X[(506832829*qe&4294967295)>>>Ee.Mb]=qe}else if(280>qe){if(qe=Mr(qe-256,te),bt=br(Fe.G[4],Fe.H[4],te),ye(te),bt=Tn(S,bt=Mr(bt,te)),te.h)break;if(je-_<bt||D-je<qe)break e;for(ut=0;ut<qe;++ut)g[je+ut]=g[je+ut-bt];for(je+=qe,G+=qe;G>=S;)G-=S,++V,q!=null&&V<=R&&!(V%16)&&q(f,V);if(e(je<=D),G&De&&(Fe=Vr(pe,G,V)),Ee!=null)for(;re<je;)qe=g[re++],Ee.X[(506832829*qe&4294967295)>>>Ee.Mb]=qe}else{if(!(qe<Se))break e;for(Re=qe-280,e(Ee!=null);re<je;)qe=g[re++],Ee.X[(506832829*qe&4294967295)>>>Ee.Mb]=qe;qe=je,e(!(Re>>>(bt=Ee).Xa)),g[qe]=bt.X[Re],Re=!0}Re||e(te.h==ie(te))}if(f.Pb&&te.h&&je<D)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Qe(f.s.vb,f.s.Wa);else{if(te.h)break e;q?.(f,V>R?R:V),f.a=0,f.$=je-_}return 1}return f.a=3,0}function qn(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var g=f.Wa;g!=null&&(g.X=null),f.vb=null,e(f!=null)}function ta(){var f=new It;return f==null?null:(f.a=0,f.xb=tl,mr("Predictor","VP8LPredictors"),mr("Predictor","VP8LPredictors_C"),mr("PredictorAdd","VP8LPredictorsAdd"),mr("PredictorAdd","VP8LPredictorsAdd_C"),dn=Lt,Yo=Ot,Ko=$r,pa=nr,Ga=kt,Ya=Kt,wo=Nr,I.VP8LMapColor32b=zi,I.VP8LMapColor8b=xo,f)}function Xn(f,g,_,S,D){var R=1,q=[f],V=[g],G=S.m,te=S.s,pe=null,je=0;e:for(;;){if(_)for(;R&&Y(G,1);){var re=q,we=V,Se=S,Me=1,Ee=Se.m,De=Se.gc[Se.ab],Fe=Y(Ee,2);if(Se.Oc&1<<Fe)R=0;else{switch(Se.Oc|=1<<Fe,De.hc=Fe,De.Ea=re[0],De.nc=we[0],De.K=[null],++Se.ab,e(4>=Se.ab),Fe){case 0:case 1:De.b=Y(Ee,3)+2,Me=Xn($e(De.Ea,De.b),$e(De.nc,De.b),0,Se,De.K),De.K=De.K[0];break;case 3:var Re,qe=Y(Ee,8)+1,bt=16<qe?0:4<qe?1:2<qe?2:3;if(re[0]=$e(De.Ea,bt),De.b=bt,Re=Me=Xn(qe,1,0,Se,De.K)){var ut,Zt=qe,mt=De,ir=1<<(8>>mt.b),an=o(ir);if(an==null)Re=0;else{var Xt=mt.K[0],ct=mt.w;for(an[0]=mt.K[0][0],ut=1;ut<1*Zt;++ut)an[ut]=wt(Xt[ct+ut],an[ut-1]);for(;ut<4*ir;++ut)an[ut]=0;mt.K[0]=null,mt.K[0]=an,Re=1}}Me=Re;break;case 2:break;default:e(0)}R=Me}}if(q=q[0],V=V[0],R&&Y(G,1)&&!(R=1<=(je=Y(G,4))&&11>=je)){S.a=3;break e}var Ze;if(Ze=R)t:{var hn,qt,sr,Rr=S,On=q,xn=V,Qr=je,jn=_,In=Rr.m,Hr=Rr.s,lr=[null],gr=1,Gr=0,vr=Nd[Qr];r:for(;;){if(jn&&Y(In,1)){var on=Y(In,3)+2,ln=$e(On,on),Ir=$e(xn,on),ns=ln*Ir;if(!Xn(ln,Ir,0,Rr,lr))break r;for(lr=lr[0],Hr.xc=on,hn=0;hn<ns;++hn){var Pr=lr[hn]>>8&65535;lr[hn]=Pr,Pr>=gr&&(gr=Pr+1)}}if(In.h)break r;for(qt=0;5>qt;++qt){var Dr=jo[qt];!qt&&0<Qr&&(Dr+=1<<Qr),Gr<Dr&&(Gr=Dr)}var bn=l(gr*vr,Z),Yn=gr,Ts=l(Yn,ae);if(Ts==null)var fn=null;else e(65536>=Yn),fn=Ts;var mn=o(Gr);if(fn==null||mn==null||bn==null){Rr.a=1;break r}var ss=bn;for(hn=sr=0;hn<gr;++hn){var Fr=fn[hn],is=Fr.G,ai=Fr.H,_i=0,Dn=1,pn=0;for(qt=0;5>qt;++qt){Dr=jo[qt],is[qt]=ss,ai[qt]=sr,!qt&&0<Qr&&(Dr+=1<<Qr);s:{var Qa,xa=Dr,sl=Rr,Vi=mn,Cd=ss,Fc=sr,Br=0,Ni=sl.m,Mc=Y(Ni,1);if(i(Vi,0,0,xa),Mc){var Rc=Y(Ni,1)+1,Su=Y(Ni,1),ju=Y(Ni,Su==0?1:8);Vi[ju]=1,Rc==2&&(Vi[ju=Y(Ni,8)]=1);var Hi=1}else{var Yr=o(19),wn=Y(Ni,4)+4;if(19<wn){sl.a=3;var gn=0;break s}for(Qa=0;Qa<wn;++Qa)Yr[Xh[Qa]]=Y(Ni,3);var il=void 0,ba=void 0,al=sl,sf=Yr,An=xa,Au=Vi,$l=0,Gi=al.m,ki=8,Hs=l(128,Z);n:for(;F(Hs,0,7,sf,19);){if(Y(Gi,1)){var Wl=2+2*Y(Gi,3);if((il=2+Y(Gi,Wl))>An)break n}else il=An;for(ba=0;ba<An&&il--;){ye(Gi);var Cu=Hs[0+(127&Q(Gi))];se(Gi,Gi.u+Cu.g);var eo=Cu.value;if(16>eo)Au[ba++]=eo,eo!=0&&(ki=eo);else{var Ed=eo==16,Uc=eo-16,Pd=_u[Uc],Bc=Y(Gi,Ul[Uc])+Pd;if(ba+Bc>An)break n;for(var Ld=Ed?ki:0;0<Bc--;)Au[ba++]=Ld}}$l=1;break n}$l||(al.a=3),Hi=$l}(Hi=Hi&&!Ni.h)&&(Br=F(Cd,Fc,8,Vi,xa)),Hi&&Br!=0?gn=Br:(sl.a=3,gn=0)}if(gn==0)break r;if(Dn&&_d[qt]==1&&(Dn=ss[sr].g==0),_i+=ss[sr].g,sr+=gn,3>=qt){var ol,Eu=mn[0];for(ol=1;ol<Dr;++ol)mn[ol]>Eu&&(Eu=mn[ol]);pn+=Eu}}if(Fr.nd=Dn,Fr.Qb=0,Dn&&(Fr.qb=(is[3][ai[3]+0].value<<24|is[1][ai[1]+0].value<<16|is[2][ai[2]+0].value)>>>0,_i==0&&256>is[0][ai[0]+0].value&&(Fr.Qb=1,Fr.qb+=is[0][ai[0]+0].value<<8)),Fr.jc=!Fr.Qb&&6>pn,Fr.jc){var Vl,Gs=Fr;for(Vl=0;Vl<ni;++Vl){var wa=Vl,Si=Gs.pd[wa],Lo=Gs.G[0][Gs.H[0]+wa];256<=Lo.value?(Si.g=Lo.g+256,Si.value=Lo.value):(Si.g=0,Si.value=0,wa>>=Ur(Lo,8,Si),wa>>=Ur(Gs.G[1][Gs.H[1]+wa],16,Si),wa>>=Ur(Gs.G[2][Gs.H[2]+wa],0,Si),Ur(Gs.G[3][Gs.H[3]+wa],24,Si))}}}Hr.vc=lr,Hr.Wb=gr,Hr.Ya=fn,Hr.yc=bn,Ze=1;break t}Ze=0}if(!(R=Ze)){S.a=3;break e}if(0<je){if(te.ua=1<<je,!X(te.Wa,je)){S.a=1,R=0;break e}}else te.ua=0;var Pu=S,Lu=q,Td=V,Tu=Pu.s,Ou=Tu.xc;if(Pu.c=Lu,Pu.i=Td,Tu.md=$e(Lu,Ou),Tu.wc=Ou==0?-1:(1<<Ou)-1,_){S.xb=Wi;break e}if((pe=o(q*V))==null){S.a=1,R=0;break e}R=(R=Jr(S,pe,0,q,V,V,null))&&!G.h;break e}return R?(D!=null?D[0]=pe:(e(pe==null),e(_)),S.$=0,_||qn(te)):qn(te),R}function Oi(f,g){var _=f.c*f.i,S=_+g+16*g;return e(f.c<=g),f.V=o(S),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+_+g,1)}function ws(f,g){var _=f.C,S=g-_,D=f.V,R=f.Ba+f.c*_;for(e(g<=f.l.o);0<S;){var q=16<S?16:S,V=f.l.ma,G=f.l.width,te=G*q,pe=V.ca,je=V.tb+G*_,re=f.Ta,we=f.Ua;qs(f,q,D,R),Sc(re,we,pe,je,te),mi(V,_,_+q,pe,je,G),S-=q,D+=q*f.c,_+=q}e(_==g),f.C=f.Ma=g}function Ii(){this.ub=this.yd=this.td=this.Rb=0}function pi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oo(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function jr(){this.Yb=(function(){var f=[];return(function g(_,S,D){for(var R=D[S],q=0;q<R&&(_.push(D.length>S+1?[]:0),!(D.length<S+1));q++)g(_[q],S+1,D)})(f,0,[3,11]),f})()}function Zs(){this.jb=o(3),this.Wc=d([4,8],jr),this.Xc=d([4,17],jr)}function ra(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Qn(){this.ld=this.La=this.dd=this.tc=0}function zs(){this.Na=this.la=0}function lo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fa(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Di(){this.uc=this.M=this.Nb=0,this.wa=Array(new Qn),this.Y=0,this.ya=Array(new Fa),this.aa=0,this.l=new na}function fs(){this.y=o(16),this.f=o(8),this.ea=o(8)}function uo(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new Ii,this.Kc=new pi,this.ed=new ra,this.Qa=new oo,this.Ic=this.$c=this.Aa=0,this.D=new Di,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,A),this.ia=0,this.pb=l(4,lo),this.Pa=new Zs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new fs),this.Hd=0,this.rb=Array(new zs),this.sb=0,this.wa=Array(new Qn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fa),this.L=this.aa=0,this.gd=d([4,2],Qn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zr(f,g){return 0>f?0:f>g?g:f}function na(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bo(){var f=new uo;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Ao||(Ao=_s)),f}function tn(f,g,_){return f.a==0&&(f.a=g,f.sc=_,f.cb=0),0}function sa(f,g,_){return 3<=_&&f[g+0]==157&&f[g+1]==1&&f[g+2]==42}function zn(f,g){if(f==null)return 0;if(f.a=0,f.sc="OK",g==null)return tn(f,2,"null VP8Io passed to VP8GetHeaders()");var _=g.data,S=g.w,D=g.ha;if(4>D)return tn(f,7,"Truncated header.");var R=_[S+0]|_[S+1]<<8|_[S+2]<<16,q=f.Od;if(q.Rb=!(1&R),q.td=R>>1&7,q.yd=R>>4&1,q.ub=R>>5,3<q.td)return tn(f,3,"Incorrect keyframe parameters.");if(!q.yd)return tn(f,4,"Frame not displayable.");S+=3,D-=3;var V=f.Kc;if(q.Rb){if(7>D)return tn(f,7,"cannot parse picture header");if(!sa(_,S,D))return tn(f,3,"Bad code word");V.c=16383&(_[S+4]<<8|_[S+3]),V.Td=_[S+4]>>6,V.i=16383&(_[S+6]<<8|_[S+5]),V.Ud=_[S+6]>>6,S+=7,D-=7,f.za=V.c+15>>4,f.Ub=V.i+15>>4,g.width=V.c,g.height=V.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((R=f.Pa).jb,0,255,R.jb.length),e((R=f.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,i(R.Zb,0,0,R.Zb.length),i(R.Lb,0,0,R.Lb)}if(q.ub>D)return tn(f,7,"bad partition length");he(R=f.m,_,S,q.ub),S+=q.ub,D-=q.ub,q.Rb&&(V.Ld=Ae(R),V.Kd=Ae(R)),V=f.Qa;var G,te=f.Pa;if(e(R!=null),e(V!=null),V.Cb=Ae(R),V.Cb){if(V.Bb=Ae(R),Ae(R)){for(V.Fb=Ae(R),G=0;4>G;++G)V.Zb[G]=Ae(R)?ne(R,7):0;for(G=0;4>G;++G)V.Lb[G]=Ae(R)?ne(R,6):0}if(V.Bb)for(G=0;3>G;++G)te.jb[G]=Ae(R)?be(R,8):255}else V.Bb=0;if(R.Ka)return tn(f,3,"cannot parse segment header");if((V=f.ed).zd=Ae(R),V.Tb=be(R,6),V.wb=be(R,3),V.Pc=Ae(R),V.Pc&&Ae(R)){for(te=0;4>te;++te)Ae(R)&&(V.vd[te]=ne(R,6));for(te=0;4>te;++te)Ae(R)&&(V.od[te]=ne(R,6))}if(f.L=V.Tb==0?0:V.zd?1:2,R.Ka)return tn(f,3,"cannot parse filter header");var pe=D;if(D=G=S,S=G+pe,V=pe,f.Xb=(1<<be(f.m,2))-1,pe<3*(te=f.Xb))_=7;else{for(G+=3*te,V-=3*te,pe=0;pe<te;++pe){var je=_[D+0]|_[D+1]<<8|_[D+2]<<16;je>V&&(je=V),he(f.Jc[+pe],_,G,je),G+=je,V-=je,D+=3}he(f.Jc[+te],_,G,V),_=G<S?0:5}if(_!=0)return tn(f,_,"cannot parse partitions");for(_=be(G=f.m,7),D=Ae(G)?ne(G,4):0,S=Ae(G)?ne(G,4):0,V=Ae(G)?ne(G,4):0,te=Ae(G)?ne(G,4):0,G=Ae(G)?ne(G,4):0,pe=f.Qa,je=0;4>je;++je){if(pe.Cb){var re=pe.Zb[je];pe.Fb||(re+=_)}else{if(0<je){f.pb[je]=f.pb[0];continue}re=_}var we=f.pb[je];we.Sc[0]=el[Zr(re+D,127)],we.Sc[1]=Bl[Zr(re+0,127)],we.Eb[0]=2*el[Zr(re+S,127)],we.Eb[1]=101581*Bl[Zr(re+V,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=el[Zr(re+te,117)],we.Qc[1]=Bl[Zr(re+G,127)],we.lc=re+G}if(!q.Rb)return tn(f,4,"Not a key frame.");for(Ae(R),q=f.Pa,_=0;4>_;++_){for(D=0;8>D;++D)for(S=0;3>S;++S)for(V=0;11>V;++V)te=Pe(R,tf[_][D][S][V])?be(R,8):Sd[_][D][S][V],q.Wc[_][D].Yb[S][V]=te;for(D=0;17>D;++D)q.Xc[_][D]=q.Wc[_][Oc[D]]}return f.kc=Ae(R),f.kc&&(f.Bd=be(R,8)),f.cb=1}function _s(f,g,_,S,D,R,q){var V=g[D].Yb[_];for(_=0;16>D;++D){if(!Pe(f,V[_+0]))return D;for(;!Pe(f,V[_+1]);)if(V=g[++D].Yb[0],_=0,D==16)return 16;var G=g[D+1].Yb;if(Pe(f,V[_+2])){var te=f,pe=0;if(Pe(te,(re=V)[(je=_)+3]))if(Pe(te,re[je+6])){for(V=0,je=2*(pe=Pe(te,re[je+8]))+(re=Pe(te,re[je+9+pe])),pe=0,re=Lc[je];re[V];++V)pe+=pe+Pe(te,re[V]);pe+=3+(8<<je)}else Pe(te,re[je+7])?(pe=7+2*Pe(te,165),pe+=Pe(te,145)):pe=5+Pe(te,159);else pe=Pe(te,re[je+4])?3+Pe(te,re[je+5]):2;V=G[2]}else pe=1,V=G[1];G=q+Tc[D],0>(te=f).b&&ce(te);var je,re=te.b,we=(je=te.Ca>>1)-(te.I>>re)>>31;--te.b,te.Ca+=we,te.Ca|=1,te.I-=(je+1&we)<<re,R[G]=((pe^we)-we)*S[(0<D)+0]}return 16}function Fi(f){var g=f.rb[f.sb-1];g.la=0,g.Na=0,i(f.zc,0,0,f.zc.length),f.ja=0}function ms(f,g,_,S,D){D=f[g+_+32*S]+(D>>3),f[g+_+32*S]=-256&D?0>D?0:255:D}function Xr(f,g,_,S,D,R){ms(f,g,0,_,S+D),ms(f,g,1,_,S+R),ms(f,g,2,_,S-R),ms(f,g,3,_,S-D)}function Ns(f){return(20091*f>>16)+f}function Ma(f,g,_,S){var D,R=0,q=o(16);for(D=0;4>D;++D){var V=f[g+0]+f[g+8],G=f[g+0]-f[g+8],te=(35468*f[g+4]>>16)-Ns(f[g+12]),pe=Ns(f[g+4])+(35468*f[g+12]>>16);q[R+0]=V+pe,q[R+1]=G+te,q[R+2]=G-te,q[R+3]=V-pe,R+=4,g++}for(D=R=0;4>D;++D)V=(f=q[R+0]+4)+q[R+8],G=f-q[R+8],te=(35468*q[R+4]>>16)-Ns(q[R+12]),ms(_,S,0,0,V+(pe=Ns(q[R+4])+(35468*q[R+12]>>16))),ms(_,S,1,0,G+te),ms(_,S,2,0,G-te),ms(_,S,3,0,V-pe),R++,S+=32}function Xs(f,g,_,S){var D=f[g+0]+4,R=35468*f[g+4]>>16,q=Ns(f[g+4]),V=35468*f[g+1]>>16;Xr(_,S,0,D+q,f=Ns(f[g+1]),V),Xr(_,S,1,D+R,f,V),Xr(_,S,2,D-R,f,V),Xr(_,S,3,D-q,f,V)}function ia(f,g,_,S,D){Ma(f,g,_,S),D&&Ma(f,g+16,_,S+4)}function ks(f,g,_,S){_o(f,g+0,_,S,1),_o(f,g+32,_,S+128,1)}function gi(f,g,_,S){var D;for(f=f[g+0]+4,D=0;4>D;++D)for(g=0;4>g;++g)ms(_,S,g,D,f)}function cr(f,g,_,S){f[g+0]&&pr(f,g+0,_,S),f[g+16]&&pr(f,g+16,_,S+4),f[g+32]&&pr(f,g+32,_,S+128),f[g+48]&&pr(f,g+48,_,S+128+4)}function aa(f,g,_,S){var D,R=o(16);for(D=0;4>D;++D){var q=f[g+0+D]+f[g+12+D],V=f[g+4+D]+f[g+8+D],G=f[g+4+D]-f[g+8+D],te=f[g+0+D]-f[g+12+D];R[0+D]=q+V,R[8+D]=q-V,R[4+D]=te+G,R[12+D]=te-G}for(D=0;4>D;++D)q=(f=R[0+4*D]+3)+R[3+4*D],V=R[1+4*D]+R[2+4*D],G=R[1+4*D]-R[2+4*D],te=f-R[3+4*D],_[S+0]=q+V>>3,_[S+16]=te+G>>3,_[S+32]=q-V>>3,_[S+48]=te-G>>3,S+=64}function Mi(f,g,_){var S,D=g-32,R=vs,q=255-f[D-1];for(S=0;S<_;++S){var V,G=R,te=q+f[g-1];for(V=0;V<_;++V)f[g+V]=G[te+f[D+V]];g+=32}}function co(f,g){Mi(f,g,4)}function qo(f,g){Mi(f,g,8)}function zo(f,g){Mi(f,g,16)}function Ra(f,g){var _;for(_=0;16>_;++_)n(f,g+32*_,f,g-32,16)}function Ua(f,g){var _;for(_=16;0<_;--_)i(f,g,f[g-1],16),g+=32}function $n(f,g,_){var S;for(S=0;16>S;++S)i(g,_+32*S,f,16)}function Qs(f,g){var _,S=16;for(_=0;16>_;++_)S+=f[g-1+32*_]+f[g+_-32];$n(S>>5,f,g)}function es(f,g){var _,S=8;for(_=0;16>_;++_)S+=f[g-1+32*_];$n(S>>4,f,g)}function Ss(f,g){var _,S=8;for(_=0;16>_;++_)S+=f[g+_-32];$n(S>>4,f,g)}function oa(f,g){$n(128,f,g)}function Tt(f,g,_){return f+2*g+_+2>>2}function ei(f,g){var _,S=g-32;for(S=new Uint8Array([Tt(f[S-1],f[S+0],f[S+1]),Tt(f[S+0],f[S+1],f[S+2]),Tt(f[S+1],f[S+2],f[S+3]),Tt(f[S+2],f[S+3],f[S+4])]),_=0;4>_;++_)n(f,g+32*_,S,0,S.length)}function El(f,g){var _=f[g-1],S=f[g-1+32],D=f[g-1+64],R=f[g-1+96];ze(f,g+0,16843009*Tt(f[g-1-32],_,S)),ze(f,g+32,16843009*Tt(_,S,D)),ze(f,g+64,16843009*Tt(S,D,R)),ze(f,g+96,16843009*Tt(D,R,R))}function $o(f,g){var _,S=4;for(_=0;4>_;++_)S+=f[g+_-32]+f[g-1+32*_];for(S>>=3,_=0;4>_;++_)i(f,g+32*_,S,4)}function Wn(f,g){var _=f[g-1+0],S=f[g-1+32],D=f[g-1+64],R=f[g-1-32],q=f[g+0-32],V=f[g+1-32],G=f[g+2-32],te=f[g+3-32];f[g+0+96]=Tt(S,D,f[g-1+96]),f[g+1+96]=f[g+0+64]=Tt(_,S,D),f[g+2+96]=f[g+1+64]=f[g+0+32]=Tt(R,_,S),f[g+3+96]=f[g+2+64]=f[g+1+32]=f[g+0+0]=Tt(q,R,_),f[g+3+64]=f[g+2+32]=f[g+1+0]=Tt(V,q,R),f[g+3+32]=f[g+2+0]=Tt(G,V,q),f[g+3+0]=Tt(te,G,V)}function ti(f,g){var _=f[g+1-32],S=f[g+2-32],D=f[g+3-32],R=f[g+4-32],q=f[g+5-32],V=f[g+6-32],G=f[g+7-32];f[g+0+0]=Tt(f[g+0-32],_,S),f[g+1+0]=f[g+0+32]=Tt(_,S,D),f[g+2+0]=f[g+1+32]=f[g+0+64]=Tt(S,D,R),f[g+3+0]=f[g+2+32]=f[g+1+64]=f[g+0+96]=Tt(D,R,q),f[g+3+32]=f[g+2+64]=f[g+1+96]=Tt(R,q,V),f[g+3+64]=f[g+2+96]=Tt(q,V,G),f[g+3+96]=Tt(V,G,G)}function ho(f,g){var _=f[g-1+0],S=f[g-1+32],D=f[g-1+64],R=f[g-1-32],q=f[g+0-32],V=f[g+1-32],G=f[g+2-32],te=f[g+3-32];f[g+0+0]=f[g+1+64]=R+q+1>>1,f[g+1+0]=f[g+2+64]=q+V+1>>1,f[g+2+0]=f[g+3+64]=V+G+1>>1,f[g+3+0]=G+te+1>>1,f[g+0+96]=Tt(D,S,_),f[g+0+64]=Tt(S,_,R),f[g+0+32]=f[g+1+96]=Tt(_,R,q),f[g+1+32]=f[g+2+96]=Tt(R,q,V),f[g+2+32]=f[g+3+96]=Tt(q,V,G),f[g+3+32]=Tt(V,G,te)}function Ba(f,g){var _=f[g+0-32],S=f[g+1-32],D=f[g+2-32],R=f[g+3-32],q=f[g+4-32],V=f[g+5-32],G=f[g+6-32],te=f[g+7-32];f[g+0+0]=_+S+1>>1,f[g+1+0]=f[g+0+64]=S+D+1>>1,f[g+2+0]=f[g+1+64]=D+R+1>>1,f[g+3+0]=f[g+2+64]=R+q+1>>1,f[g+0+32]=Tt(_,S,D),f[g+1+32]=f[g+0+96]=Tt(S,D,R),f[g+2+32]=f[g+1+96]=Tt(D,R,q),f[g+3+32]=f[g+2+96]=Tt(R,q,V),f[g+3+64]=Tt(q,V,G),f[g+3+96]=Tt(V,G,te)}function la(f,g){var _=f[g-1+0],S=f[g-1+32],D=f[g-1+64],R=f[g-1+96];f[g+0+0]=_+S+1>>1,f[g+2+0]=f[g+0+32]=S+D+1>>1,f[g+2+32]=f[g+0+64]=D+R+1>>1,f[g+1+0]=Tt(_,S,D),f[g+3+0]=f[g+1+32]=Tt(S,D,R),f[g+3+32]=f[g+1+64]=Tt(D,R,R),f[g+3+64]=f[g+2+64]=f[g+0+96]=f[g+1+96]=f[g+2+96]=f[g+3+96]=R}function Wo(f,g){var _=f[g-1+0],S=f[g-1+32],D=f[g-1+64],R=f[g-1+96],q=f[g-1-32],V=f[g+0-32],G=f[g+1-32],te=f[g+2-32];f[g+0+0]=f[g+2+32]=_+q+1>>1,f[g+0+32]=f[g+2+64]=S+_+1>>1,f[g+0+64]=f[g+2+96]=D+S+1>>1,f[g+0+96]=R+D+1>>1,f[g+3+0]=Tt(V,G,te),f[g+2+0]=Tt(q,V,G),f[g+1+0]=f[g+3+32]=Tt(_,q,V),f[g+1+32]=f[g+3+64]=Tt(S,_,q),f[g+1+64]=f[g+3+96]=Tt(D,S,_),f[g+1+96]=Tt(R,D,S)}function ri(f,g){var _;for(_=0;8>_;++_)n(f,g+32*_,f,g-32,8)}function ua(f,g){var _;for(_=0;8>_;++_)i(f,g,f[g-1],8),g+=32}function Vn(f,g,_){var S;for(S=0;8>S;++S)i(g,_+32*S,f,8)}function vi(f,g){var _,S=8;for(_=0;8>_;++_)S+=f[g+_-32]+f[g-1+32*_];Vn(S>>4,f,g)}function ca(f,g){var _,S=4;for(_=0;8>_;++_)S+=f[g+_-32];Vn(S>>3,f,g)}function fo(f,g){var _,S=4;for(_=0;8>_;++_)S+=f[g-1+32*_];Vn(S>>3,f,g)}function qa(f,g){Vn(128,f,g)}function rn(f,g,_){var S=f[g-_],D=f[g+0],R=3*(D-S)+$i[1020+f[g-2*_]-f[g+_]],q=Xo[112+(R+4>>3)];f[g-_]=vs[255+S+Xo[112+(R+3>>3)]],f[g+0]=vs[255+D-q]}function Ri(f,g,_,S){var D=f[g+0],R=f[g+_];return si[255+f[g-2*_]-f[g-_]]>S||si[255+R-D]>S}function js(f,g,_,S){return 4*si[255+f[g-_]-f[g+0]]+si[255+f[g-2*_]-f[g+_]]<=S}function ps(f,g,_,S,D){var R=f[g-3*_],q=f[g-2*_],V=f[g-_],G=f[g+0],te=f[g+_],pe=f[g+2*_],je=f[g+3*_];return 4*si[255+V-G]+si[255+q-te]>S?0:si[255+f[g-4*_]-R]<=D&&si[255+R-q]<=D&&si[255+q-V]<=D&&si[255+je-pe]<=D&&si[255+pe-te]<=D&&si[255+te-G]<=D}function P(f,g,_,S){var D=2*S+1;for(S=0;16>S;++S)js(f,g+S,_,D)&&rn(f,g+S,_)}function de(f,g,_,S){var D=2*S+1;for(S=0;16>S;++S)js(f,g+S*_,1,D)&&rn(f,g+S*_,1)}function Ne(f,g,_,S){var D;for(D=3;0<D;--D)P(f,g+=4*_,_,S)}function Le(f,g,_,S){var D;for(D=3;0<D;--D)de(f,g+=4,_,S)}function Be(f,g,_,S,D,R,q,V){for(R=2*R+1;0<D--;){if(ps(f,g,_,R,q))if(Ri(f,g,_,V))rn(f,g,_);else{var G=f,te=g,pe=_,je=G[te-2*pe],re=G[te-pe],we=G[te+0],Se=G[te+pe],Me=G[te+2*pe],Ee=27*(Fe=$i[1020+3*(we-re)+$i[1020+je-Se]])+63>>7,De=18*Fe+63>>7,Fe=9*Fe+63>>7;G[te-3*pe]=vs[255+G[te-3*pe]+Fe],G[te-2*pe]=vs[255+je+De],G[te-pe]=vs[255+re+Ee],G[te+0]=vs[255+we-Ee],G[te+pe]=vs[255+Se-De],G[te+2*pe]=vs[255+Me-Fe]}g+=S}}function Ke(f,g,_,S,D,R,q,V){for(R=2*R+1;0<D--;){if(ps(f,g,_,R,q))if(Ri(f,g,_,V))rn(f,g,_);else{var G=f,te=g,pe=_,je=G[te-pe],re=G[te+0],we=G[te+pe],Se=Xo[112+(4+(Me=3*(re-je))>>3)],Me=Xo[112+(Me+3>>3)],Ee=Se+1>>1;G[te-2*pe]=vs[255+G[te-2*pe]+Ee],G[te-pe]=vs[255+je+Me],G[te+0]=vs[255+re-Se],G[te+pe]=vs[255+we-Ee]}g+=S}}function et(f,g,_,S,D,R){Be(f,g,_,1,16,S,D,R)}function rt(f,g,_,S,D,R){Be(f,g,1,_,16,S,D,R)}function Xe(f,g,_,S,D,R){var q;for(q=3;0<q;--q)Ke(f,g+=4*_,_,1,16,S,D,R)}function y(f,g,_,S,D,R){var q;for(q=3;0<q;--q)Ke(f,g+=4,1,_,16,S,D,R)}function L(f,g,_,S,D,R,q,V){Be(f,g,D,1,8,R,q,V),Be(_,S,D,1,8,R,q,V)}function J(f,g,_,S,D,R,q,V){Be(f,g,1,D,8,R,q,V),Be(_,S,1,D,8,R,q,V)}function ue(f,g,_,S,D,R,q,V){Ke(f,g+4*D,D,1,8,R,q,V),Ke(_,S+4*D,D,1,8,R,q,V)}function xe(f,g,_,S,D,R,q,V){Ke(f,g+4,1,D,8,R,q,V),Ke(_,S+4,1,D,8,R,q,V)}function Oe(){this.ba=new zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ur,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function lt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pt(){this.ua=0,this.Wa=new Yt,this.vb=new Yt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new Z}function It(){this.xb=this.a=0,this.l=new na,this.ca=new zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pt,this.ab=0,this.gc=l(4,lt),this.Oc=0}function $t(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new na,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function dr(f,g,_,S,D,R,q){for(f=f==null?0:f[g+0],g=0;g<q;++g)D[R+g]=f+_[S+g]&255,f=D[R+g]}function Ut(f,g,_,S,D,R,q){var V;if(f==null)dr(null,null,_,S,D,R,q);else for(V=0;V<q;++V)D[R+V]=f[g+V]+_[S+V]&255}function gt(f,g,_,S,D,R,q){if(f==null)dr(null,null,_,S,D,R,q);else{var V,G=f[g+0],te=G,pe=G;for(V=0;V<q;++V)te=pe+(G=f[g+V])-te,pe=_[S+V]+(-256&te?0>te?0:255:te)&255,te=G,D[R+V]=pe}}function Bt(f,g,_,S){var D=g.width,R=g.o;if(e(f!=null&&g!=null),0>_||0>=S||_+S>R)return null;if(!f.Cc){if(f.ga==null){var q;if(f.ga=new $t,(q=f.ga==null)||(q=g.width*g.o,e(f.Gb.length==0),f.Gb=o(q),f.Uc=0,f.Gb==null?q=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,q=1),q=!q),!q){q=f.ga;var V=f.Fa,G=f.P,te=f.qc,pe=f.mb,je=f.nb,re=G+1,we=te-1,Se=q.l;if(e(V!=null&&pe!=null&&g!=null),rs[0]=null,rs[1]=dr,rs[2]=Ut,rs[3]=gt,q.ca=pe,q.tb=je,q.c=g.width,q.i=g.height,e(0<q.c&&0<q.i),1>=te)g=0;else if(q.$a=3&V[G+0],q.Z=V[G+0]>>2&3,q.Lc=V[G+0]>>4&3,G=V[G+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||G)g=0;else if(Se.put=St,Se.ac=Bn,Se.bc=cs,Se.ma=q,Se.width=g.width,Se.height=g.height,Se.Da=g.Da,Se.v=g.v,Se.va=g.va,Se.j=g.j,Se.o=g.o,q.$a)e:{e(q.$a==1),g=ta();t:for(;;){if(g==null){g=0;break e}if(e(q!=null),q.mc=g,g.c=q.c,g.i=q.i,g.l=q.l,g.l.ma=q,g.l.width=q.c,g.l.height=q.i,g.a=0,fe(g.m,V,re,we),!Xn(q.c,q.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&hs(g.s)?(q.ic=1,V=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(V),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(q.ic=0,g=Oi(g,q.c)),!g))break t;g=1;break e}q.mc=null,g=0}else g=we>=q.c*q.i;q=!g}if(q)return null;f.ga.Lc!=1?f.Ga=0:S=R-_}e(f.ga!=null),e(_+S<=R);e:{if(g=(V=f.ga).c,R=V.l.o,V.$a==0){if(re=f.rc,we=f.Vc,Se=f.Fa,G=f.P+1+_*g,te=f.mb,pe=f.nb+_*g,e(G<=f.P+f.qc),V.Z!=0)for(e(rs[V.Z]!=null),q=0;q<S;++q)rs[V.Z](re,we,Se,G,te,pe,g),re=te,we=pe,pe+=g,G+=g;else for(q=0;q<S;++q)n(te,pe,Se,G,g),re=te,we=pe,pe+=g,G+=g;f.rc=re,f.Vc=we}else{if(e(V.mc!=null),g=_+S,e((q=V.mc)!=null),e(g<=q.i),q.C>=g)g=1;else if(V.ic||ts(),V.ic){V=q.V,re=q.Ba,we=q.c;var Me=q.i,Ee=(Se=1,G=q.$/we,te=q.$%we,pe=q.m,je=q.s,q.$),De=we*Me,Fe=we*g,Re=je.wc,qe=Ee<Fe?Vr(je,te,G):null;e(Ee<=De),e(g<=Me),e(hs(je));t:for(;;){for(;!pe.h&&Ee<Fe;){if(te&Re||(qe=Vr(je,te,G)),e(qe!=null),ye(pe),256>(Me=br(qe.G[0],qe.H[0],pe)))V[re+Ee]=Me,++Ee,++te>=we&&(te=0,++G<=g&&!(G%16)&&vn(q,G));else{if(!(280>Me)){Se=0;break t}Me=Mr(Me-256,pe);var bt,ut=br(qe.G[4],qe.H[4],pe);if(ye(pe),!(Ee>=(ut=Tn(we,ut=Mr(ut,pe)))&&De-Ee>=Me)){Se=0;break t}for(bt=0;bt<Me;++bt)V[re+Ee+bt]=V[re+Ee+bt-ut];for(Ee+=Me,te+=Me;te>=we;)te-=we,++G<=g&&!(G%16)&&vn(q,G);Ee<Fe&&te&Re&&(qe=Vr(je,te,G))}e(pe.h==ie(pe))}vn(q,G>g?g:G);break t}!Se||pe.h&&Ee<De?(Se=0,q.a=pe.h?5:3):q.$=Ee,g=Se}else g=Jr(q,q.V,q.Ba,q.c,q.i,g,ws);if(!g){S=0;break e}}_+S>=R&&(f.Cc=1),S=1}if(!S)return null;if(f.Cc&&((S=f.ga)!=null&&(S.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+_*D}function or(f,g,_,S,D,R){for(;0<D--;){var q,V=f,G=g+(_?1:0),te=f,pe=g+(_?0:3);for(q=0;q<S;++q){var je=te[pe+4*q];je!=255&&(je*=32897,V[G+4*q+0]=V[G+4*q+0]*je>>23,V[G+4*q+1]=V[G+4*q+1]*je>>23,V[G+4*q+2]=V[G+4*q+2]*je>>23)}g+=R}}function wr(f,g,_,S,D){for(;0<S--;){var R;for(R=0;R<_;++R){var q=f[g+2*R+0],V=15&(te=f[g+2*R+1]),G=4369*V,te=(240&te|te>>4)*G>>16;f[g+2*R+0]=(240&q|q>>4)*G>>16&240|(15&q|q<<4)*G>>16>>4&15,f[g+2*R+1]=240&te|V}g+=D}}function Ar(f,g,_,S,D,R,q,V){var G,te,pe=255;for(te=0;te<D;++te){for(G=0;G<S;++G){var je=f[g+G];R[q+4*G]=je,pe&=je}g+=_,q+=V}return pe!=255}function cn(f,g,_,S,D){var R;for(R=0;R<D;++R)_[S+R]=f[g+R]>>8}function ts(){ko=or,kc=wr,Il=Ar,Sc=cn}function da(f,g,_){I[f]=function(S,D,R,q,V,G,te,pe,je,re,we,Se,Me,Ee,De,Fe,Re){var qe,bt=Re-1>>1,ut=V[G+0]|te[pe+0]<<16,Zt=je[re+0]|we[Se+0]<<16;e(S!=null);var mt=3*ut+Zt+131074>>2;for(g(S[D+0],255&mt,mt>>16,Me,Ee),R!=null&&(mt=3*Zt+ut+131074>>2,g(R[q+0],255&mt,mt>>16,De,Fe)),qe=1;qe<=bt;++qe){var ir=V[G+qe]|te[pe+qe]<<16,an=je[re+qe]|we[Se+qe]<<16,Xt=ut+ir+Zt+an+524296,ct=Xt+2*(ir+Zt)>>3;mt=ct+ut>>1,ut=(Xt=Xt+2*(ut+an)>>3)+ir>>1,g(S[D+2*qe-1],255&mt,mt>>16,Me,Ee+(2*qe-1)*_),g(S[D+2*qe-0],255&ut,ut>>16,Me,Ee+(2*qe-0)*_),R!=null&&(mt=Xt+Zt>>1,ut=ct+an>>1,g(R[q+2*qe-1],255&mt,mt>>16,De,Fe+(2*qe-1)*_),g(R[q+2*qe+0],255&ut,ut>>16,De,Fe+(2*qe+0)*_)),ut=ir,Zt=an}1&Re||(mt=3*ut+Zt+131074>>2,g(S[D+Re-1],255&mt,mt>>16,Me,Ee+(Re-1)*_),R!=null&&(mt=3*Zt+ut+131074>>2,g(R[q+Re-1],255&mt,mt>>16,De,Fe+(Re-1)*_)))}}function mo(){Es[bu]=rf,Es[Ja]=Za,Es[wd]=nf,Es[Dl]=rl,Es[Fl]=Co,Es[Or]=ql,Es[wu]=Ic,Es[Qo]=Za,Es[So]=rl,Es[Ml]=Co,Es[Rl]=ql}function Vo(f){return f&-16384?0>f?0:255:f>>Xa}function za(f,g){return Vo((19077*f>>8)+(26149*g>>8)-14234)}function po(f,g,_){return Vo((19077*f>>8)-(6419*g>>8)-(13320*_>>8)+8708)}function $a(f,g){return Vo((19077*f>>8)+(33050*g>>8)-17685)}function Wa(f,g,_,S,D){S[D+0]=za(f,_),S[D+1]=po(f,g,_),S[D+2]=$a(f,g)}function Hn(f,g,_,S,D){S[D+0]=$a(f,g),S[D+1]=po(f,g,_),S[D+2]=za(f,_)}function go(f,g,_,S,D){var R=po(f,g,_);g=R<<3&224|$a(f,g)>>3,S[D+0]=248&za(f,_)|R>>5,S[D+1]=g}function vo(f,g,_,S,D){var R=240&$a(f,g)|15;S[D+0]=240&za(f,_)|po(f,g,_)>>4,S[D+1]=R}function Pl(f,g,_,S,D){S[D+0]=255,Wa(f,g,_,S,D+1)}function Ll(f,g,_,S,D){Hn(f,g,_,S,D),S[D+3]=255}function gs(f,g,_,S,D){Wa(f,g,_,S,D),S[D+3]=255}function yi(f,g,_){I[f]=function(S,D,R,q,V,G,te,pe,je){for(var re=pe+(-2&je)*_;pe!=re;)g(S[D+0],R[q+0],V[G+0],te,pe),g(S[D+1],R[q+0],V[G+0],te,pe+_),D+=2,++q,++G,pe+=2*_;1&je&&g(S[D+0],R[q+0],V[G+0],te,pe)}}function Ui(f,g,_){return _==0?f==0?g==0?6:5:g==0?4:0:_}function vu(f,g,_,S,D){switch(f>>>30){case 3:_o(g,_,S,D,0);break;case 2:nn(g,_,S,D);break;case 1:pr(g,_,S,D)}}function $s(f,g){var _,S,D=g.M,R=g.Nb,q=f.oc,V=f.pc+40,G=f.oc,te=f.pc+584,pe=f.oc,je=f.pc+600;for(_=0;16>_;++_)q[V+32*_-1]=129;for(_=0;8>_;++_)G[te+32*_-1]=129,pe[je+32*_-1]=129;for(0<D?q[V-1-32]=G[te-1-32]=pe[je-1-32]=129:(i(q,V-32-1,127,21),i(G,te-32-1,127,9),i(pe,je-32-1,127,9)),S=0;S<f.za;++S){var re=g.ya[g.aa+S];if(0<S){for(_=-1;16>_;++_)n(q,V+32*_-4,q,V+32*_+12,4);for(_=-1;8>_;++_)n(G,te+32*_-4,G,te+32*_+4,4),n(pe,je+32*_-4,pe,je+32*_+4,4)}var we=f.Gd,Se=f.Hd+S,Me=re.ad,Ee=re.Hc;if(0<D&&(n(q,V-32,we[Se].y,0,16),n(G,te-32,we[Se].f,0,8),n(pe,je-32,we[Se].ea,0,8)),re.Za){var De=q,Fe=V-32+16;for(0<D&&(S>=f.za-1?i(De,Fe,we[Se].y[15],4):n(De,Fe,we[Se+1].y,0,4)),_=0;4>_;_++)De[Fe+128+_]=De[Fe+256+_]=De[Fe+384+_]=De[Fe+0+_];for(_=0;16>_;++_,Ee<<=2)De=q,Fe=V+Dc[_],ii[re.Ob[_]](De,Fe),vu(Ee,Me,16*+_,De,Fe)}else if(De=Ui(S,D,re.Ob[0]),ys[De](q,V),Ee!=0)for(_=0;16>_;++_,Ee<<=2)vu(Ee,Me,16*+_,q,V+Dc[_]);for(_=re.Gc,De=Ui(S,D,re.Dd),Cs[De](G,te),Cs[De](pe,je),Ee=Me,De=G,Fe=te,255&(re=0|_)&&(170&re?As(Ee,256,De,Fe):Cr(Ee,256,De,Fe)),re=pe,Ee=je,255&(_>>=8)&&(170&_?As(Me,320,re,Ee):Cr(Me,320,re,Ee)),D<f.Ub-1&&(n(we[Se].y,0,q,V+480,16),n(we[Se].f,0,G,te+224,8),n(we[Se].ea,0,pe,je+224,8)),_=8*R*f.B,we=f.sa,Se=f.ta+16*S+16*R*f.R,Me=f.qa,re=f.ra+8*S+_,Ee=f.Ha,De=f.Ia+8*S+_,_=0;16>_;++_)n(we,Se+_*f.R,q,V+32*_,16);for(_=0;8>_;++_)n(Me,re+_*f.B,G,te+32*_,8),n(Ee,De+_*f.B,pe,je+32*_,8)}}function Va(f,g,_,S,D,R,q,V,G){var te=[0],pe=[0],je=0,re=G!=null?G.kd:0,we=G??new Ue;if(f==null||12>_)return 7;we.data=f,we.w=g,we.ha=_,g=[g],_=[_],we.gb=[we.gb];e:{var Se=g,Me=_,Ee=we.gb;if(e(f!=null),e(Me!=null),e(Ee!=null),Ee[0]=0,12<=Me[0]&&!t(f,Se[0],"RIFF")){if(t(f,Se[0]+8,"WEBP")){Ee=3;break e}var De=dt(f,Se[0]+4);if(12>De||4294967286<De){Ee=3;break e}if(re&&De>Me[0]-8){Ee=7;break e}Ee[0]=De,Se[0]+=12,Me[0]-=12}Ee=0}if(Ee!=0)return Ee;for(De=0<we.gb[0],_=_[0];;){e:{var Fe=f;Me=g,Ee=_;var Re=te,qe=pe,bt=Se=[0];if((mt=je=[je])[0]=0,8>Ee[0])Ee=7;else{if(!t(Fe,Me[0],"VP8X")){if(dt(Fe,Me[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var ut=dt(Fe,Me[0]+8),Zt=1+Je(Fe,Me[0]+12);if(2147483648<=Zt*(Fe=1+Je(Fe,Me[0]+15))){Ee=3;break e}bt!=null&&(bt[0]=ut),Re!=null&&(Re[0]=Zt),qe!=null&&(qe[0]=Fe),Me[0]+=18,Ee[0]-=18,mt[0]=1}Ee=0}}if(je=je[0],Se=Se[0],Ee!=0)return Ee;if(Me=!!(2&Se),!De&&je)return 3;if(R!=null&&(R[0]=!!(16&Se)),q!=null&&(q[0]=Me),V!=null&&(V[0]=0),q=te[0],Se=pe[0],je&&Me&&G==null){Ee=0;break}if(4>_){Ee=7;break}if(De&&je||!De&&!je&&!t(f,g[0],"ALPH")){_=[_],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{ut=f,Ee=g,De=_;var mt=we.gb;Re=we.na,qe=we.P,bt=we.Sa,Zt=22,e(ut!=null),e(De!=null),Fe=Ee[0];var ir=De[0];for(e(Re!=null),e(bt!=null),Re[0]=null,qe[0]=null,bt[0]=0;;){if(Ee[0]=Fe,De[0]=ir,8>ir){Ee=7;break e}var an=dt(ut,Fe+4);if(4294967286<an){Ee=3;break e}var Xt=8+an+1&-2;if(Zt+=Xt,0<mt&&Zt>mt){Ee=3;break e}if(!t(ut,Fe,"VP8 ")||!t(ut,Fe,"VP8L")){Ee=0;break e}if(ir[0]<Xt){Ee=7;break e}t(ut,Fe,"ALPH")||(Re[0]=ut,qe[0]=Fe+8,bt[0]=an),Fe+=Xt,ir-=Xt}}if(_=_[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],Ee!=0)break}_=[_],we.Ja=[we.Ja],we.xa=[we.xa];e:if(mt=f,Ee=g,De=_,Re=we.gb[0],qe=we.Ja,bt=we.xa,ut=Ee[0],Fe=!t(mt,ut,"VP8 "),Zt=!t(mt,ut,"VP8L"),e(mt!=null),e(De!=null),e(qe!=null),e(bt!=null),8>De[0])Ee=7;else{if(Fe||Zt){if(mt=dt(mt,ut+4),12<=Re&&mt>Re-12){Ee=3;break e}if(re&&mt>De[0]-8){Ee=7;break e}qe[0]=mt,Ee[0]+=8,De[0]-=8,bt[0]=Zt}else bt[0]=5<=De[0]&&mt[ut+0]==47&&!(mt[ut+4]>>5),qe[0]=De[0];Ee=0}if(_=_[0],we.Ja=we.Ja[0],we.xa=we.xa[0],g=g[0],Ee!=0)break;if(4294967286<we.Ja)return 3;if(V==null||Me||(V[0]=we.xa?2:1),q=[q],Se=[Se],we.xa){if(5>_){Ee=7;break}V=q,re=Se,Me=R,f==null||5>_?f=0:5<=_&&f[g+0]==47&&!(f[g+4]>>5)?(De=[0],mt=[0],Re=[0],fe(qe=new H,f,g,_),ds(qe,De,mt,Re)?(V!=null&&(V[0]=De[0]),re!=null&&(re[0]=mt[0]),Me!=null&&(Me[0]=Re[0]),f=1):f=0):f=0}else{if(10>_){Ee=7;break}V=Se,f==null||10>_||!sa(f,g+3,_-3)?f=0:(re=f[g+0]|f[g+1]<<8|f[g+2]<<16,Me=16383&(f[g+7]<<8|f[g+6]),f=16383&(f[g+9]<<8|f[g+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=we.Ja||!Me||!f?f=0:(q&&(q[0]=Me),V&&(V[0]=f),f=1))}if(!f||(q=q[0],Se=Se[0],je&&(te[0]!=q||pe[0]!=Se)))return 3;G!=null&&(G[0]=we,G.offset=g-G.w,e(4294967286>g-G.w),e(G.offset==G.ha-_));break}return Ee==0||Ee==7&&je&&G==null?(R!=null&&(R[0]|=we.na!=null&&0<we.na.length),S!=null&&(S[0]=q),D!=null&&(D[0]=Se),0):Ee}function Ho(f,g,_){var S=g.width,D=g.height,R=0,q=0,V=S,G=D;if(g.Da=f!=null&&0<f.Da,g.Da&&(V=f.cd,G=f.bd,R=f.v,q=f.j,11>_||(R&=-2,q&=-2),0>R||0>q||0>=V||0>=G||R+V>S||q+G>D))return 0;if(g.v=R,g.j=q,g.va=R+V,g.o=q+G,g.U=V,g.T=G,g.da=f!=null&&0<f.da,g.da){if(!Ct(V,G,_=[f.ib],R=[f.hb]))return 0;g.ib=_[0],g.hb=R[0]}return g.ob=f!=null&&f.ob,g.Kb=f==null||!f.Sd,g.da&&(g.ob=g.ib<3*S/4&&g.hb<3*D/4,g.Kb=0),1}function Go(f){if(f==null)return 2;if(11>f.S){var g=f.f.RGBA;g.fb+=(f.height-1)*g.A,g.A=-g.A}else g=f.f.kb,f=f.height,g.O+=(f-1)*g.fa,g.fa=-g.fa,g.N+=(f-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(f-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(f-1)*g.lb,g.lb=-g.lb);return 0}function ha(f,g,_,S){if(S==null||0>=f||0>=g)return 2;if(_!=null){if(_.Da){var D=_.cd,R=_.bd,q=-2&_.v,V=-2&_.j;if(0>q||0>V||0>=D||0>=R||q+D>f||V+R>g)return 2;f=D,g=R}if(_.da){if(!Ct(f,g,D=[_.ib],R=[_.hb]))return 2;f=D[0],g=R[0]}}S.width=f,S.height=g;e:{var G=S.width,te=S.height;if(f=S.S,0>=G||0>=te||!(f>=bu&&13>f))f=2;else{if(0>=S.Rd&&S.sd==null){q=R=D=g=0;var pe=(V=G*zl[f])*te;if(11>f||(R=(te+1)/2*(g=(G+1)/2),f==12&&(q=(D=G)*te)),(te=o(pe+2*R+q))==null){f=1;break e}S.sd=te,11>f?((G=S.f.RGBA).eb=te,G.fb=0,G.A=V,G.size=pe):((G=S.f.kb).y=te,G.O=0,G.fa=V,G.Fd=pe,G.f=te,G.N=0+pe,G.Ab=g,G.Cd=R,G.ea=te,G.W=0+pe+R,G.Db=g,G.Ed=R,f==12&&(G.F=te,G.J=0+pe+2*R),G.Tc=q,G.lb=D)}if(g=1,D=S.S,R=S.width,q=S.height,D>=bu&&13>D)if(11>D)f=S.f.RGBA,g&=(V=Math.abs(f.A))*(q-1)+R<=f.size,g&=V>=R*zl[D],g&=f.eb!=null;else{f=S.f.kb,V=(R+1)/2,pe=(q+1)/2,G=Math.abs(f.fa),te=Math.abs(f.Ab);var je=Math.abs(f.Db),re=Math.abs(f.lb),we=re*(q-1)+R;g&=G*(q-1)+R<=f.Fd,g&=te*(pe-1)+V<=f.Cd,g=(g&=je*(pe-1)+V<=f.Ed)&G>=R&te>=V&je>=V,g&=f.y!=null,g&=f.f!=null,g&=f.ea!=null,D==12&&(g&=re>=R,g&=we<=f.Tc,g&=f.F!=null)}else g=0;f=g?0:2}}return f!=0||_!=null&&_.fd&&(f=Go(S)),f}var ni=64,Ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vs=24,Ha=32,Bi=8,fa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(f){return f},I.Predictor2=function(f,g,_){return g[_+0]},I.Predictor3=function(f,g,_){return g[_+1]},I.Predictor4=function(f,g,_){return g[_-1]},I.Predictor5=function(f,g,_){return tt(tt(f,g[_+1]),g[_+0])},I.Predictor6=function(f,g,_){return tt(f,g[_-1])},I.Predictor7=function(f,g,_){return tt(f,g[_+0])},I.Predictor8=function(f,g,_){return tt(g[_-1],g[_+0])},I.Predictor9=function(f,g,_){return tt(g[_+0],g[_+1])},I.Predictor10=function(f,g,_){return tt(tt(f,g[_-1]),tt(g[_+0],g[_+1]))},I.Predictor11=function(f,g,_){var S=g[_+0];return 0>=Wt(S>>24&255,f>>24&255,(g=g[_-1])>>24&255)+Wt(S>>16&255,f>>16&255,g>>16&255)+Wt(S>>8&255,f>>8&255,g>>8&255)+Wt(255&S,255&f,255&g)?S:f},I.Predictor12=function(f,g,_){var S=g[_+0];return(hr((f>>24&255)+(S>>24&255)-((g=g[_-1])>>24&255))<<24|hr((f>>16&255)+(S>>16&255)-(g>>16&255))<<16|hr((f>>8&255)+(S>>8&255)-(g>>8&255))<<8|hr((255&f)+(255&S)-(255&g)))>>>0},I.Predictor13=function(f,g,_){var S=g[_-1];return(tr((f=tt(f,g[_+0]))>>24&255,S>>24&255)<<24|tr(f>>16&255,S>>16&255)<<16|tr(f>>8&255,S>>8&255)<<8|tr(255&f,255&S))>>>0};var ma=I.PredictorAdd0;I.PredictorAdd1=rr,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var qi=I.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var dn,yo=I.ColorIndexInverseTransform,zi=I.MapARGB,xi=I.VP8LColorIndexInverseTransformAlpha,xo=I.MapAlpha,bo=I.VP8LPredictorsAdd=[];bo.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Yo,Ko,pa,Ga,Ya,wo,Ka,_o,nn,As,pr,Cr,sn,yn,bi,Tl,Jo,ga,yu,Zo,xu,Nc,Ol,No,ko,kc,Il,Sc,jc=o(511),Ac=o(2041),Cc=o(225),Ec=o(767),Pc=0,$i=Ac,Xo=Cc,vs=Ec,si=jc,bu=0,Ja=1,wd=2,Dl=3,Fl=4,Or=5,wu=6,Qo=7,So=8,Ml=9,Rl=10,Ul=[2,3,7],_u=[3,3,11],jo=[280,256,256,256,40],_d=[0,1,1,1,0],Xh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Nu=8,el=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Bl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ao=null,Lc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Tc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],kd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Sd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ef=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Oc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ys=[],ii=[],Cs=[],Wi=1,tl=2,rs=[],Es=[];da("UpsampleRgbLinePair",Wa,3),da("UpsampleBgrLinePair",Hn,3),da("UpsampleRgbaLinePair",gs,4),da("UpsampleBgraLinePair",Ll,4),da("UpsampleArgbLinePair",Pl,4),da("UpsampleRgba4444LinePair",vo,2),da("UpsampleRgb565LinePair",go,2);var rf=I.UpsampleRgbLinePair,nf=I.UpsampleBgrLinePair,Za=I.UpsampleRgbaLinePair,rl=I.UpsampleBgraLinePair,Co=I.UpsampleArgbLinePair,ql=I.UpsampleRgba4444LinePair,Ic=I.UpsampleRgb565LinePair,va=16,wi=1<<va-1,kr=-227,Er=482,Xa=6,Gn=0,Ps=o(256),Eo=o(256),nl=o(256),Ls=o(256),ku=o(Er-kr),jd=o(Er-kr);yi("YuvToRgbRow",Wa,3),yi("YuvToBgrRow",Hn,3),yi("YuvToRgbaRow",gs,4),yi("YuvToBgraRow",Ll,4),yi("YuvToArgbRow",Pl,4),yi("YuvToRgba4444Row",vo,2),yi("YuvToRgb565Row",go,2);var Dc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Po=[0,2,8],Ad=[8,7,6,4,4,2,2,2,1,1,1,1],ya=1;this.WebPDecodeRGBA=function(f,g,_,S,D){var R=Ja,q=new Oe,V=new zt;q.ba=V,V.S=R,V.width=[V.width],V.height=[V.height];var G=V.width,te=V.height,pe=new Pt;if(pe==null||f==null)var je=2;else e(pe!=null),je=Va(f,g,_,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(je!=0?G=0:(G!=null&&(G[0]=pe.width[0]),te!=null&&(te[0]=pe.height[0]),G=1),G){V.width=V.width[0],V.height=V.height[0],S!=null&&(S[0]=V.width),D!=null&&(D[0]=V.height);e:{if(S=new na,(D=new Ue).data=f,D.w=g,D.ha=_,D.kd=1,g=[0],e(D!=null),((f=Va(D.data,D.w,D.ha,null,null,null,g,null,D))==0||f==7)&&g[0]&&(f=4),(g=f)==0){if(e(q!=null),S.data=D.data,S.w=D.w+D.offset,S.ha=D.ha-D.offset,S.put=St,S.ac=Bn,S.bc=cs,S.ma=q,D.xa){if((f=ta())==null){q=1;break e}if((function(re,we){var Se=[0],Me=[0],Ee=[0];t:for(;;){if(re==null)return 0;if(we==null)return re.a=2,0;if(re.l=we,re.a=0,fe(re.m,we.data,we.w,we.ha),!ds(re.m,Se,Me,Ee)){re.a=3;break t}if(re.xb=tl,we.width=Se[0],we.height=Me[0],!Xn(Se[0],Me[0],1,re,null))break t;return 1}return e(re.a!=0),0})(f,S)){if(S=(g=ha(S.width,S.height,q.Oa,q.ba))==0){t:{S=f;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((_=S.l)!=null),e((D=_.ma)!=null),S.xb!=0){if(S.ca=D.ba,S.tb=D.tb,e(S.ca!=null),!Ho(D.Oa,_,Dl)){S.a=2;break r}if(!Oi(S,_.width)||_.da)break r;if((_.da||Et(S.ca.S))&&ts(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&ts()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!X(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Jr(S,S.V,S.Ba,S.c,S.i,_.o,Ti))break r;D.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(g=f.a)}else g=f.a}else{if((f=new Bo)==null){q=1;break e}if(f.Fa=D.na,f.P=D.P,f.qc=D.Sa,zn(f,S)){if((g=ha(S.width,S.height,q.Oa,q.ba))==0){if(f.Aa=0,_=q.Oa,e((D=f)!=null),_!=null){if(0<(G=0>(G=_.Md)?0:100<G?255:255*G/100)){for(te=pe=0;4>te;++te)12>(je=D.pb[te]).lc&&(je.ia=G*Ad[0>je.lc?0:je.lc]>>3),pe|=je.ia;pe&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=_.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}(function(re,we){if(re==null)return 0;if(we==null)return tn(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!zn(re,we))return 0;if(e(re.cb),we.ac==null||we.ac(we)){we.ob&&(re.L=0);var Se=Po[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=we.v-Se>>4,re.zb=we.j-Se>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=we.o+15+Se>>4,re.Hb=we.va+15+Se>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var Me=re.ed;for(Se=0;4>Se;++Se){var Ee;if(re.Qa.Cb){var De=re.Qa.Lb[Se];re.Qa.Fb||(De+=Me.Tb)}else De=Me.Tb;for(Ee=0;1>=Ee;++Ee){var Fe=re.gd[Se][Ee],Re=De;if(Me.Pc&&(Re+=Me.vd[0],Ee&&(Re+=Me.od[0])),0<(Re=0>Re?0:63<Re?63:Re)){var qe=Re;0<Me.wb&&(qe=4<Me.wb?qe>>2:qe>>1)>9-Me.wb&&(qe=9-Me.wb),1>qe&&(qe=1),Fe.dd=qe,Fe.tc=2*Re+qe,Fe.ld=40<=Re?2:15<=Re?1:0}else Fe.tc=0;Fe.La=Ee}}}Se=0}else tn(re,6,"Frame setup failed"),Se=re.a;if(Se=Se==0){if(Se){re.$c=0,0<re.Aa||(re.Ic=ya);t:{Se=re.Ic,Me=4*(qe=re.za);var bt=32*qe,ut=qe+1,Zt=0<re.L?qe*(0<re.Aa?2:1):0,mt=(re.Aa==2?2:1)*qe;if((Fe=Me+832+(Ee=3*(16*Se+Po[re.L])/2*bt)+(De=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=Fe)Se=0;else{if(Fe>re.Vb){if(re.Vb=0,re.Ec=o(Fe),re.Fc=0,re.Ec==null){Se=tn(re,1,"no memory during frame initialization.");break t}re.Vb=Fe}Fe=re.Ec,Re=re.Fc,re.Ac=Fe,re.Bc=Re,Re+=Me,re.Gd=l(bt,fs),re.Hd=0,re.rb=l(ut+1,zs),re.sb=1,re.wa=Zt?l(Zt,Qn):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=qe),e(!0),re.oc=Fe,re.pc=Re,Re+=832,re.ya=l(mt,Fa),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=qe),re.R=16*qe,re.B=8*qe,qe=(bt=Po[re.L])*re.R,bt=bt/2*re.B,re.sa=Fe,re.ta=Re+qe,re.qa=re.sa,re.ra=re.ta+16*Se*re.R+bt,re.Ha=re.qa,re.Ia=re.ra+8*Se*re.B+bt,re.$c=0,Re+=Ee,re.mb=De?Fe:null,re.nb=De?Re:null,e(Re+De<=re.Fc+re.Vb),Fi(re),i(re.Ac,re.Bc,0,Me),Se=1}}if(Se){if(we.ka=0,we.y=re.sa,we.O=re.ta,we.f=re.qa,we.N=re.ra,we.ea=re.Ha,we.Vd=re.Ia,we.fa=re.R,we.Rc=re.B,we.F=null,we.J=0,!Pc){for(Se=-255;255>=Se;++Se)jc[255+Se]=0>Se?-Se:Se;for(Se=-1020;1020>=Se;++Se)Ac[1020+Se]=-128>Se?-128:127<Se?127:Se;for(Se=-112;112>=Se;++Se)Cc[112+Se]=-16>Se?-16:15<Se?15:Se;for(Se=-255;510>=Se;++Se)Ec[255+Se]=0>Se?0:255<Se?255:Se;Pc=1}Ka=aa,_o=ia,As=ks,pr=gi,Cr=cr,nn=Xs,sn=et,yn=rt,bi=L,Tl=J,Jo=Xe,ga=y,yu=ue,Zo=xe,xu=P,Nc=de,Ol=Ne,No=Le,ii[0]=$o,ii[1]=co,ii[2]=ei,ii[3]=El,ii[4]=Wn,ii[5]=ho,ii[6]=ti,ii[7]=Ba,ii[8]=Wo,ii[9]=la,ys[0]=Qs,ys[1]=zo,ys[2]=Ra,ys[3]=Ua,ys[4]=es,ys[5]=Ss,ys[6]=oa,Cs[0]=vi,Cs[1]=qo,Cs[2]=ri,Cs[3]=ua,Cs[4]=fo,Cs[5]=ca,Cs[6]=qa,Se=1}else Se=0}Se&&(Se=(function(ir,an){for(ir.M=0;ir.M<ir.Va;++ir.M){var Xt,ct=ir.Jc[ir.M&ir.Xb],Ze=ir.m,hn=ir;for(Xt=0;Xt<hn.za;++Xt){var qt=Ze,sr=hn,Rr=sr.Ac,On=sr.Bc+4*Xt,xn=sr.zc,Qr=sr.ya[sr.aa+Xt];if(sr.Qa.Bb?Qr.$b=Pe(qt,sr.Pa.jb[0])?2+Pe(qt,sr.Pa.jb[2]):Pe(qt,sr.Pa.jb[1]):Qr.$b=0,sr.kc&&(Qr.Ad=Pe(qt,sr.Bd)),Qr.Za=!Pe(qt,145)+0,Qr.Za){var jn=Qr.Ob,In=0;for(sr=0;4>sr;++sr){var Hr,lr=xn[0+sr];for(Hr=0;4>Hr;++Hr){lr=ef[Rr[On+Hr]][lr];for(var gr=kd[Pe(qt,lr[0])];0<gr;)gr=kd[2*gr+Pe(qt,lr[gr])];lr=-gr,Rr[On+Hr]=lr}n(jn,In,Rr,On,4),In+=4,xn[0+sr]=lr}}else lr=Pe(qt,156)?Pe(qt,128)?1:3:Pe(qt,163)?2:0,Qr.Ob[0]=lr,i(Rr,On,lr,4),i(xn,0,lr,4);Qr.Dd=Pe(qt,142)?Pe(qt,114)?Pe(qt,183)?1:3:2:0}if(hn.m.Ka)return tn(ir,7,"Premature end-of-partition0 encountered.");for(;ir.ja<ir.za;++ir.ja){if(hn=ct,qt=(Ze=ir).rb[Ze.sb-1],Rr=Ze.rb[Ze.sb+Ze.ja],Xt=Ze.ya[Ze.aa+Ze.ja],On=Ze.kc?Xt.Ad:0)qt.la=Rr.la=0,Xt.Za||(qt.Na=Rr.Na=0),Xt.Hc=0,Xt.Gc=0,Xt.ia=0;else{var Gr,vr;if(qt=Rr,Rr=hn,On=Ze.Pa.Xc,xn=Ze.ya[Ze.aa+Ze.ja],Qr=Ze.pb[xn.$b],sr=xn.ad,jn=0,In=Ze.rb[Ze.sb-1],lr=Hr=0,i(sr,jn,0,384),xn.Za)var on=0,ln=On[3];else{gr=o(16);var Ir=qt.Na+In.Na;if(Ir=Ao(Rr,On[1],Ir,Qr.Eb,0,gr,0),qt.Na=In.Na=(0<Ir)+0,1<Ir)Ka(gr,0,sr,jn);else{var ns=gr[0]+3>>3;for(gr=0;256>gr;gr+=16)sr[jn+gr]=ns}on=1,ln=On[0]}var Pr=15&qt.la,Dr=15&In.la;for(gr=0;4>gr;++gr){var bn=1&Dr;for(ns=vr=0;4>ns;++ns)Pr=Pr>>1|(bn=(Ir=Ao(Rr,ln,Ir=bn+(1&Pr),Qr.Sc,on,sr,jn))>on)<<7,vr=vr<<2|(3<Ir?3:1<Ir?2:sr[jn+0]!=0),jn+=16;Pr>>=4,Dr=Dr>>1|bn<<7,Hr=(Hr<<8|vr)>>>0}for(ln=Pr,on=Dr>>4,Gr=0;4>Gr;Gr+=2){for(vr=0,Pr=qt.la>>4+Gr,Dr=In.la>>4+Gr,gr=0;2>gr;++gr){for(bn=1&Dr,ns=0;2>ns;++ns)Ir=bn+(1&Pr),Pr=Pr>>1|(bn=0<(Ir=Ao(Rr,On[2],Ir,Qr.Qc,0,sr,jn)))<<3,vr=vr<<2|(3<Ir?3:1<Ir?2:sr[jn+0]!=0),jn+=16;Pr>>=2,Dr=Dr>>1|bn<<5}lr|=vr<<4*Gr,ln|=Pr<<4<<Gr,on|=(240&Dr)<<Gr}qt.la=ln,In.la=on,xn.Hc=Hr,xn.Gc=lr,xn.ia=43690&lr?0:Qr.ia,On=!(Hr|lr)}if(0<Ze.L&&(Ze.wa[Ze.Y+Ze.ja]=Ze.gd[Xt.$b][Xt.Za],Ze.wa[Ze.Y+Ze.ja].La|=!On),hn.Ka)return tn(ir,7,"Premature end-of-file encountered.")}if(Fi(ir),Ze=an,hn=1,Xt=(ct=ir).D,qt=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)t:{if(Xt.M=ct.M,Xt.uc=qt,$s(ct,Xt),hn=1,Xt=(vr=ct.D).Nb,qt=(lr=Po[ct.L])*ct.R,Rr=lr/2*ct.B,gr=16*Xt*ct.R,ns=8*Xt*ct.B,On=ct.sa,xn=ct.ta-qt+gr,Qr=ct.qa,sr=ct.ra-Rr+ns,jn=ct.Ha,In=ct.Ia-Rr+ns,Dr=(Pr=vr.M)==0,Hr=Pr>=ct.Va-1,ct.Aa==2&&$s(ct,vr),vr.uc)for(bn=(Ir=ct).D.M,e(Ir.D.uc),vr=Ir.yb;vr<Ir.Hb;++vr){on=vr,ln=bn;var Yn=(Ts=(pn=Ir).D).Nb;Gr=pn.R;var Ts=Ts.wa[Ts.Y+on],fn=pn.sa,mn=pn.ta+16*Yn*Gr+16*on,ss=Ts.dd,Fr=Ts.tc;if(Fr!=0)if(e(3<=Fr),pn.L==1)0<on&&Nc(fn,mn,Gr,Fr+4),Ts.La&&No(fn,mn,Gr,Fr),0<ln&&xu(fn,mn,Gr,Fr+4),Ts.La&&Ol(fn,mn,Gr,Fr);else{var is=pn.B,ai=pn.qa,_i=pn.ra+8*Yn*is+8*on,Dn=pn.Ha,pn=pn.Ia+8*Yn*is+8*on;Yn=Ts.ld,0<on&&(yn(fn,mn,Gr,Fr+4,ss,Yn),Tl(ai,_i,Dn,pn,is,Fr+4,ss,Yn)),Ts.La&&(ga(fn,mn,Gr,Fr,ss,Yn),Zo(ai,_i,Dn,pn,is,Fr,ss,Yn)),0<ln&&(sn(fn,mn,Gr,Fr+4,ss,Yn),bi(ai,_i,Dn,pn,is,Fr+4,ss,Yn)),Ts.La&&(Jo(fn,mn,Gr,Fr,ss,Yn),yu(ai,_i,Dn,pn,is,Fr,ss,Yn))}}if(ct.ia&&alert("todo:DitherRow"),Ze.put!=null){if(vr=16*Pr,Pr=16*(Pr+1),Dr?(Ze.y=ct.sa,Ze.O=ct.ta+gr,Ze.f=ct.qa,Ze.N=ct.ra+ns,Ze.ea=ct.Ha,Ze.W=ct.Ia+ns):(vr-=lr,Ze.y=On,Ze.O=xn,Ze.f=Qr,Ze.N=sr,Ze.ea=jn,Ze.W=In),Hr||(Pr-=lr),Pr>Ze.o&&(Pr=Ze.o),Ze.F=null,Ze.J=null,ct.Fa!=null&&0<ct.Fa.length&&vr<Pr&&(Ze.J=Bt(ct,Ze,vr,Pr-vr),Ze.F=ct.mb,Ze.F==null&&Ze.F.length==0)){hn=tn(ct,3,"Could not decode alpha data.");break t}vr<Ze.j&&(lr=Ze.j-vr,vr=Ze.j,e(!(1&lr)),Ze.O+=ct.R*lr,Ze.N+=ct.B*(lr>>1),Ze.W+=ct.B*(lr>>1),Ze.F!=null&&(Ze.J+=Ze.width*lr)),vr<Pr&&(Ze.O+=Ze.v,Ze.N+=Ze.v>>1,Ze.W+=Ze.v>>1,Ze.F!=null&&(Ze.J+=Ze.v),Ze.ka=vr-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=Pr-vr,hn=Ze.put(Ze))}Xt+1!=ct.Ic||Hr||(n(ct.sa,ct.ta-qt,On,xn+16*ct.R,qt),n(ct.qa,ct.ra-Rr,Qr,sr+8*ct.B,Rr),n(ct.Ha,ct.Ia-Rr,jn,In+8*ct.B,Rr))}if(!hn)return tn(ir,6,"Output aborted.")}return 1})(re,we)),we.bc!=null&&we.bc(we),Se&=1}return Se?(re.cb=0,Se):0})(f,S)||(g=f.a)}}else g=f.a}g==0&&q.Oa!=null&&q.Oa.fd&&(g=Go(q.ba))}q=g}R=q!=0?null:11>R?V.f.RGBA.eb:V.f.kb.y}else R=null;return R};var zl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(I,W){for(var O="",F=0;F<4;F++)O+=String.fromCharCode(I[W++]);return O}function v(I,W){return I[W+0]|I[W+1]<<8}function w(I,W){return(I[W+0]|I[W+1]<<8|I[W+2]<<16)>>>0}function k(I,W){return(I[W+0]|I[W+1]<<8|I[W+2]<<16|I[W+3]<<24)>>>0}new h;var x=[0],T=[0],C=[],E=new h,j=r,K=(function(I,W){var O={},F=0,Z=!1,ee=0,ae=0;if(O.frames=[],!(function(A,H){for(var Q=0;Q<4;Q++)if(A[H+Q]!="RIFF".charCodeAt(Q))return!0;return!1})(I,W)){for(k(I,W+=4),W+=8;W<I.length;){var he=m(I,W),be=k(I,W+=4);W+=4;var ne=be+(1&be);switch(he){case"VP8 ":case"VP8L":O.frames[F]===void 0&&(O.frames[F]={}),(Y=O.frames[F]).src_off=Z?ae:W-8,Y.src_size=ee+be+8,F++,Z&&(Z=!1,ee=0,ae=0);break;case"VP8X":(Y=O.header={}).feature_flags=I[W];var fe=W+4;Y.canvas_width=1+w(I,fe),fe+=3,Y.canvas_height=1+w(I,fe),fe+=3;break;case"ALPH":Z=!0,ee=ne+8,ae=W-8;break;case"ANIM":(Y=O.header).bgcolor=k(I,W),fe=W+4,Y.loop_count=v(I,fe),fe+=2;break;case"ANMF":var ke,Y;(Y=O.frames[F]={}).offset_x=2*w(I,W),W+=3,Y.offset_y=2*w(I,W),W+=3,Y.width=1+w(I,W),W+=3,Y.height=1+w(I,W),W+=3,Y.duration=w(I,W),W+=3,ke=I[W++],Y.dispose=1&ke,Y.blend=ke>>1&1}he!="ANMF"&&(W+=ne)}return O}})(j,0);K.response=j,K.rgbaoutput=!0,K.dataurl=!1;var B=K.header?K.header:null,$=K.frames?K.frames:null;if(B){B.loop_counter=B.loop_count,x=[B.canvas_height],T=[B.canvas_width];for(var le=0;le<$.length&&$[le].blend!=0;le++);}var me=$[0],U=E.WebPDecodeRGBA(j,me.src_off,me.src_size,T,x);me.rgba=U,me.imgwidth=T[0],me.imgheight=x[0];for(var z=0;z<T[0]*x[0]*4;z++)C[z]=U[z];return this.width=T,this.height=x,this.data=C,this}(function(r){var e,t,n,i,o,l,d,h,m,v=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new h,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new l,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new l,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,m=new v}]);var w=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=A;Object.defineProperty(this,"pdf",{get:function(){return H}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(X){Q=!!X}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(X){ie=!!X}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(X){isNaN(X)||(se=X)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(X){isNaN(X)||(ye=X)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(X){var Qe;typeof X=="number"?Qe=[X,X,X,X]:((Qe=new Array(4))[0]=X[0],Qe[1]=X.length>=2?X[1]:Qe[0],Qe[2]=X.length>=3?X[2]:Qe[0],Qe[3]=X.length>=4?X[3]:Qe[1]),m.margin=Qe}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(X){ce=X}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(X){Ae=X}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(X){Pe=X}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(X){X instanceof v&&(m=X)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(X){m.path=X}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(X){ze=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var Qe;Qe=k(X),this.ctx.fillStyle=Qe.style,this.ctx.isFillTransparent=Qe.a===0,this.ctx.fillOpacity=Qe.a,this.pdf.setFillColor(Qe.r,Qe.g,Qe.b,{a:Qe.a}),this.pdf.setTextColor(Qe.r,Qe.g,Qe.b,{a:Qe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var Qe=k(X);this.ctx.strokeStyle=Qe.style,this.ctx.isStrokeTransparent=Qe.a===0,this.ctx.strokeOpacity=Qe.a,Qe.a===0?this.pdf.setDrawColor(255,255,255):(Qe.a,this.pdf.setDrawColor(Qe.r,Qe.g,Qe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var He=null,Je=null,dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return dt},set:function(X){He=null,Je=null,dt=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var Qe;if(this.ctx.font=X,(Qe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(X))!==null){var Yt=Qe[1];Qe[2];var Ct=Qe[3],$e=Qe[4];Qe[5];var wt=Qe[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(st==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:st==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ot=(function(it){var $r,nr,kt=[],Kt=it.trim();if(Kt==="")return v0;if(Kt in v1)return[v1[Kt]];for(;Kt!=="";){switch(nr=null,$r=(Kt=x1(Kt)).charAt(0)){case'"':case"'":nr=h3(Kt.substring(1),$r);break;default:nr=f3(Kt)}if(nr===null||(kt.push(nr[0]),(Kt=x1(nr[1]))!==""&&Kt.charAt(0)!==","))return v0;Kt=Kt.replace(/^,/,"")}return kt})(wt);if(this.fontFaces){var tt=(function(it,$r){var nr=it.getFontList(),kt=JSON.stringify(nr);if(He===null||Je!==kt){var Kt=(function(Nr){var _t=[];return Object.keys(Nr).forEach(function(mr){Nr[mr].forEach(function(Et){var Rt=null;switch(Et){case"bold":Rt={family:mr,weight:"bold"};break;case"italic":Rt={family:mr,style:"italic"};break;case"bolditalic":Rt={family:mr,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:mr}}Rt!==null&&(Rt.ref={name:mr,style:Et},_t.push(Rt))})}),_t})(nr);He=(function(Nr){for(var _t={},mr=0;mr<Nr.length;++mr){var Et=g0(Nr[mr]),Rt=Et.family,fr=Et.stretch,zt=Et.style,Pt=Et.weight;_t[Rt]=_t[Rt]||{},_t[Rt][fr]=_t[Rt][fr]||{},_t[Rt][fr][zt]=_t[Rt][fr][zt]||{},_t[Rt][fr][zt][Pt]=Et}return _t})(Kt.concat($r)),Je=kt}return He})(this.pdf,this.fontFaces),hr=ot.map(function(it){return{family:it,stretch:"normal",weight:Ct,style:Yt}}),tr=(function(it,$r,nr){for(var kt=(nr=nr||{}).defaultFontFamily||"times",Kt=Object.assign({},d3,nr.genericFontFamilies||{}),Nr=null,_t=null,mr=0;mr<$r.length;++mr)if(Kt[(Nr=g0($r[mr])).family]&&(Nr.family=Kt[Nr.family]),it.hasOwnProperty(Nr.family)){_t=it[Nr.family];break}if(!(_t=_t||it[kt]))throw new Error("Could not find a font-family for the rule '"+y1(Nr)+"' and default family '"+kt+"'.");if(_t=(function(Et,Rt){if(Rt[Et])return Rt[Et];var fr=Q0[Et],zt=fr<=Q0.normal?-1:1,Pt=g1(Rt,_v,fr,zt);if(!Pt)throw new Error("Could not find a matching font-stretch value for "+Et);return Pt})(Nr.stretch,_t),_t=(function(Et,Rt){if(Rt[Et])return Rt[Et];for(var fr=wv[Et],zt=0;zt<fr.length;++zt)if(Rt[fr[zt]])return Rt[fr[zt]];throw new Error("Could not find a matching font-style for "+Et)})(Nr.style,_t),!(_t=(function(Et,Rt){if(Rt[Et])return Rt[Et];if(Et===400&&Rt[500])return Rt[500];if(Et===500&&Rt[400])return Rt[400];var fr=c3[Et],zt=g1(Rt,Nv,fr,Et<400?-1:1);if(!zt)throw new Error("Could not find a matching font-weight for value "+Et);return zt})(Nr.weight,_t)))throw new Error("Failed to resolve a font for the rule '"+y1(Nr)+"'.");return _t})(tt,hr);this.pdf.setFont(tr.ref.name,tr.ref.style)}else{var Wt="";(Ct==="bold"||parseInt(Ct,10)>=700||Yt==="bold")&&(Wt="bold"),Yt==="italic"&&(Wt+="italic"),Wt.length===0&&(Wt="normal");for(var rr="",Lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<ot.length;ft++){if(this.pdf.internal.getFont(ot[ft],Wt,{noFallback:!0,disableWarning:!0})!==void 0){rr=ot[ft];break}if(Wt==="bolditalic"&&this.pdf.internal.getFont(ot[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)rr=ot[ft],Wt="bold";else if(this.pdf.internal.getFont(ot[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){rr=ot[ft],Wt="normal";break}}if(rr===""){for(var Ot=0;Ot<ot.length;Ot++)if(Lt[ot[Ot]]){rr=Lt[ot[Ot]];break}}rr=rr===""?"Times":rr,this.pdf.setFont(rr,Wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};w.prototype.setLineDash=function(A){this.lineDash=A},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){$.call(this,"fill",!1)},w.prototype.stroke=function(){$.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(A,H){if(isNaN(A)||isNaN(H))throw qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new l(A,H));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(A,H)},w.prototype.closePath=function(){var A=new l(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Tr(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){A=new l(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(A.x,A.y)},w.prototype.lineTo=function(A,H){if(isNaN(A)||isNaN(H))throw qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new l(A,H));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(Q.x,Q.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},w.prototype.quadraticCurveTo=function(A,H,Q,ie){if(isNaN(Q)||isNaN(ie)||isNaN(A)||isNaN(H))throw qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new l(Q,ie)),ye=this.ctx.transform.applyToPoint(new l(A,H));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:se.x,y:se.y}),this.ctx.lastPoint=new l(se.x,se.y)},w.prototype.bezierCurveTo=function(A,H,Q,ie,se,ye){if(isNaN(se)||isNaN(ye)||isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie))throw qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new l(se,ye)),Ae=this.ctx.transform.applyToPoint(new l(A,H)),Pe=this.ctx.transform.applyToPoint(new l(Q,ie));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Pe.x,y2:Pe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new l(ce.x,ce.y)},w.prototype.arc=function(A,H,Q,ie,se,ye){if(isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie)||isNaN(se))throw qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new l(A,H));A=ce.x,H=ce.y;var Ae=this.ctx.transform.applyToPoint(new l(0,Q)),Pe=this.ctx.transform.applyToPoint(new l(0,0));Q=Math.sqrt(Math.pow(Ae.x-Pe.x,2)+Math.pow(Ae.y-Pe.y,2))}Math.abs(se-ie)>=2*Math.PI&&(ie=0,se=2*Math.PI),this.path.push({type:"arc",x:A,y:H,radius:Q,startAngle:ie,endAngle:se,counterclockwise:ye})},w.prototype.arcTo=function(A,H,Q,ie,se){throw new Error("arcTo not implemented.")},w.prototype.rect=function(A,H,Q,ie){if(isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie))throw qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,H),this.lineTo(A+Q,H),this.lineTo(A+Q,H+ie),this.lineTo(A,H+ie),this.lineTo(A,H),this.lineTo(A+Q,H),this.lineTo(A,H)},w.prototype.fillRect=function(A,H,Q,ie){if(isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie))throw qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,H,Q,ie),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},w.prototype.strokeRect=function(A,H,Q,ie){if(isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie))throw qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(A,H,Q,ie),this.stroke())},w.prototype.clearRect=function(A,H,Q,ie){if(isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie))throw qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,H,Q,ie))},w.prototype.save=function(A){A=typeof A!="boolean"||A;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},w.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(H),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var k=function(A){var H,Q,ie,se;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))H=0,Q=0,ie=0,se=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(ye!==null)H=parseInt(ye[1]),Q=parseInt(ye[2]),ie=parseInt(ye[3]),se=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)H=parseInt(ye[1]),Q=parseInt(ye[2]),ie=parseInt(ye[3]),se=parseFloat(ye[4]);else{if(se=1,typeof A=="string"&&A.charAt(0)!=="#"){var ce=new mv(A);A=ce.ok?ce.toHex():"#000000"}A.length===4?(H=A.substring(1,2),H+=H,Q=A.substring(2,3),Q+=Q,ie=A.substring(3,4),ie+=ie):(H=A.substring(1,3),Q=A.substring(3,5),ie=A.substring(5,7)),H=parseInt(H,16),Q=parseInt(Q,16),ie=parseInt(ie,16)}}return{r:H,g:Q,b:ie,a:se,style:A}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},T=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(A,H,Q,ie){if(isNaN(H)||isNaN(Q)||typeof A!="string")throw qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!x.call(this)){var se=ne(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;F.call(this,{text:A,x:H,y:Q,scale:ye,angle:se,align:this.textAlign,maxWidth:ie})}},w.prototype.strokeText=function(A,H,Q,ie){if(isNaN(H)||isNaN(Q)||typeof A!="string")throw qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){ie=isNaN(ie)?void 0:ie;var se=ne(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;F.call(this,{text:A,x:H,y:Q,scale:ye,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ie})}},w.prototype.measureText=function(A){if(typeof A!="string")throw qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Q=this.pdf.internal.scaleFactor,ie=H.internal.getFontSize(),se=H.getStringUnitWidth(A)*ie/H.internal.scaleFactor;return new function(ye){var ce=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this}({width:se*=Math.round(96*Q/72*1e4)/1e4})},w.prototype.scale=function(A,H){if(isNaN(A)||isNaN(H))throw qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new h(A,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},w.prototype.rotate=function(A){if(isNaN(A))throw qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new h(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},w.prototype.translate=function(A,H){if(isNaN(A)||isNaN(H))throw qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new h(1,0,0,1,A,H);this.ctx.transform=this.ctx.transform.multiply(Q)},w.prototype.transform=function(A,H,Q,ie,se,ye){if(isNaN(A)||isNaN(H)||isNaN(Q)||isNaN(ie)||isNaN(se)||isNaN(ye))throw qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new h(A,H,Q,ie,se,ye);this.ctx.transform=this.ctx.transform.multiply(ce)},w.prototype.setTransform=function(A,H,Q,ie,se,ye){A=isNaN(A)?1:A,H=isNaN(H)?0:H,Q=isNaN(Q)?0:Q,ie=isNaN(ie)?1:ie,se=isNaN(se)?0:se,ye=isNaN(ye)?0:ye,this.ctx.transform=new h(A,H,Q,ie,se,ye)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(A,H,Q,ie,se,ye,ce,Ae,Pe){var ze=this.pdf.getImageProperties(A),He=1,Je=1,dt=1,X=1;ie!==void 0&&Ae!==void 0&&(dt=Ae/ie,X=Pe/se,He=ze.width/ie*Ae/ie,Je=ze.height/se*Pe/se),ye===void 0&&(ye=H,ce=Q,H=0,Q=0),ie!==void 0&&Ae===void 0&&(Ae=ie,Pe=se),ie===void 0&&Ae===void 0&&(Ae=ze.width,Pe=ze.height);var Qe=this.ctx.transform.decompose(),Yt=ne(Qe.rotate.shx),Ct=new h,$e=(Ct=(Ct=(Ct=Ct.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale)).applyToRectangle(new d(ye-H*dt,ce-Q*X,ie*He,se*Je));if(this.autoPaging){for(var wt,st=E.call(this,$e),ot=[],tt=0;tt<st.length;tt+=1)ot.indexOf(st[tt])===-1&&ot.push(st[tt]);B(ot);for(var hr=ot[0],tr=ot[ot.length-1],Wt=hr;Wt<tr+1;Wt++){this.pdf.setPage(Wt);var rr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=Wt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Wt===1?0:ft+(Wt-2)*Ot;if(this.ctx.clip_path.length!==0){var $r=this.path;wt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(wt,this.posX+this.margin[3],-it+Lt+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=$r}var nr=JSON.parse(JSON.stringify($e));nr=K([nr],this.posX+this.margin[3],-it+Lt+this.ctx.prevPageLastElemOffset)[0];var kt=(Wt>hr||Wt<tr)&&C.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rr,Ot,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",nr.x,nr.y,nr.w,nr.h,null,null,Yt),kt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(A,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Yt)};var E=function(A,H,Q){var ie=[];H=H||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":ie.push(Math.floor((A.y+se)/Q)+1);break;case"arc":ie.push(Math.floor((A.y+se-A.radius)/Q)+1),ie.push(Math.floor((A.y+se+A.radius)/Q)+1);break;case"qct":var ye=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);ie.push(Math.floor((ye.y+se)/Q)+1),ie.push(Math.floor((ye.y+ye.h+se)/Q)+1);break;case"bct":var ce=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);ie.push(Math.floor((ce.y+se)/Q)+1),ie.push(Math.floor((ce.y+ce.h+se)/Q)+1);break;case"rect":ie.push(Math.floor((A.y+se)/Q)+1),ie.push(Math.floor((A.y+A.h+se)/Q)+1)}for(var Ae=0;Ae<ie.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Ae];)j.call(this);return ie},j=function(){var A=this.fillStyle,H=this.strokeStyle,Q=this.font,ie=this.lineCap,se=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=H,this.font=Q,this.lineCap=ie,this.lineWidth=se,this.lineJoin=ye},K=function(A,H,Q){for(var ie=0;ie<A.length;ie++)switch(A[ie].type){case"bct":A[ie].x2+=H,A[ie].y2+=Q;case"qct":A[ie].x1+=H,A[ie].y1+=Q;default:A[ie].x+=H,A[ie].y+=Q}return A},B=function(A){return A.sort(function(H,Q){return H-Q})},$=function(A,H){var Q=this.fillStyle,ie=this.strokeStyle,se=this.lineCap,ye=this.lineWidth,ce=Math.abs(ye*this.ctx.transform.scaleX),Ae=this.lineJoin;if(this.autoPaging){for(var Pe,ze,He=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),dt=[],X=0;X<Je.length;X++)if(Je[X].x!==void 0)for(var Qe=E.call(this,Je[X]),Yt=0;Yt<Qe.length;Yt+=1)dt.indexOf(Qe[Yt])===-1&&dt.push(Qe[Yt]);for(var Ct=0;Ct<dt.length;Ct++)for(;this.pdf.internal.getNumberOfPages()<dt[Ct];)j.call(this);B(dt);for(var $e=dt[0],wt=dt[dt.length-1],st=$e;st<wt+1;st++){this.pdf.setPage(st),this.fillStyle=Q,this.strokeStyle=ie,this.lineCap=se,this.lineWidth=ce,this.lineJoin=Ae;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=st===1?this.posY+this.margin[0]:this.margin[0],hr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=st===1?0:hr+(st-2)*tr;if(this.ctx.clip_path.length!==0){var rr=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(Pe,this.posX+this.margin[3],-Wt+tt+this.ctx.prevPageLastElemOffset),le.call(this,A,!0),this.path=rr}if(ze=JSON.parse(JSON.stringify(He)),this.path=K(ze,this.posX+this.margin[3],-Wt+tt+this.ctx.prevPageLastElemOffset),H===!1||st===0){var Lt=(st>$e||st<wt)&&C.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,tr,null).clip().discardPath()),le.call(this,A,H),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}this.path=He}else this.lineWidth=ce,le.call(this,A,H),this.lineWidth=ye},le=function(A,H){if((A!=="stroke"||H||!T.call(this))&&(A==="stroke"||H||!x.call(this))){for(var Q,ie,se=[],ye=this.path,ce=0;ce<ye.length;ce++){var Ae=ye[ce];switch(Ae.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Pe=se.length;if(ye[ce-1]&&!isNaN(ye[ce-1].x)&&(Q=[Ae.x-ye[ce-1].x,Ae.y-ye[ce-1].y],Pe>0)){for(;Pe>=0;Pe--)if(se[Pe-1].close!==!0&&se[Pe-1].begin!==!0){se[Pe-1].deltas.push(Q),se[Pe-1].abs.push(Ae);break}}break;case"bct":Q=[Ae.x1-ye[ce-1].x,Ae.y1-ye[ce-1].y,Ae.x2-ye[ce-1].x,Ae.y2-ye[ce-1].y,Ae.x-ye[ce-1].x,Ae.y-ye[ce-1].y],se[se.length-1].deltas.push(Q);break;case"qct":var ze=ye[ce-1].x+2/3*(Ae.x1-ye[ce-1].x),He=ye[ce-1].y+2/3*(Ae.y1-ye[ce-1].y),Je=Ae.x+2/3*(Ae.x1-Ae.x),dt=Ae.y+2/3*(Ae.y1-Ae.y),X=Ae.x,Qe=Ae.y;Q=[ze-ye[ce-1].x,He-ye[ce-1].y,Je-ye[ce-1].x,dt-ye[ce-1].y,X-ye[ce-1].x,Qe-ye[ce-1].y],se[se.length-1].deltas.push(Q);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(Ae)}}ie=H?null:A==="stroke"?"stroke":"fill";for(var Yt=!1,Ct=0;Ct<se.length;Ct++)if(se[Ct].arc)for(var $e=se[Ct].abs,wt=0;wt<$e.length;wt++){var st=$e[wt];st.type==="arc"?z.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,H,!Yt):Z.call(this,st.x,st.y),Yt=!0}else if(se[Ct].close===!0)this.pdf.internal.out("h"),Yt=!1;else if(se[Ct].begin!==!0){var ot=se[Ct].start.x,tt=se[Ct].start.y;ee.call(this,se[Ct].deltas,ot,tt),Yt=!0}ie&&I.call(this,ie),H&&W.call(this)}},me=function(A){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-Q;case"top":return A+H-Q;case"hanging":return A+H-2*Q;case"middle":return A+H/2-Q;default:return A}},U=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(H,Q){this.colorStops.push([H,Q])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var z=function(A,H,Q,ie,se,ye,ce,Ae,Pe){for(var ze=he.call(this,Q,ie,se,ye),He=0;He<ze.length;He++){var Je=ze[He];He===0&&(Pe?O.call(this,Je.x1+A,Je.y1+H):Z.call(this,Je.x1+A,Je.y1+H)),ae.call(this,A,H,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}Ae?W.call(this):I.call(this,ce)},I=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(A,H){this.pdf.internal.out(t(A)+" "+n(H)+" m")},F=function(A){var H;switch(A.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var Q,ie,se,ye=this.pdf.getTextDimensions(A.text),ce=me.call(this,A.y),Ae=U.call(this,ce)-ye.h,Pe=this.ctx.transform.applyToPoint(new l(A.x,ce));if(this.autoPaging){var ze=this.ctx.transform.decompose(),He=new h;He=(He=(He=He.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale);for(var Je=this.ctx.transform.applyToRectangle(new d(A.x,ce,ye.w,ye.h)),dt=He.applyToRectangle(new d(A.x,Ae,ye.w,ye.h)),X=E.call(this,dt),Qe=[],Yt=0;Yt<X.length;Yt+=1)Qe.indexOf(X[Yt])===-1&&Qe.push(X[Yt]);B(Qe);for(var Ct=Qe[0],$e=Qe[Qe.length-1],wt=Ct;wt<$e+1;wt++){this.pdf.setPage(wt);var st=wt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],hr=tt-this.margin[0],tr=this.pdf.internal.pageSize.width-this.margin[1],Wt=tr-this.margin[3],rr=wt===1?0:ot+(wt-2)*hr;if(this.ctx.clip_path.length!==0){var Lt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=K(Q,this.posX+this.margin[3],-1*rr+st),le.call(this,"fill",!0),this.path=Lt}var ft=K([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-rr+st+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*A.scale),se=this.lineWidth,this.lineWidth=se*A.scale);var Ot=this.autoPaging!=="text";if(Ot||ft.y+ft.h<=tt){if(Ot||ft.y>=st&&ft.x<=tr){var it=Ot?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||tr-ft.x)[0],$r=K([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-rr+st+this.ctx.prevPageLastElemOffset)[0],nr=Ot&&(wt>Ct||wt<$e)&&C.call(this);nr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,hr,null).clip().discardPath()),this.pdf.text(it,$r.x,$r.y,{angle:A.angle,align:H,renderingMode:A.renderingMode}),nr&&this.pdf.restoreGraphicsState()}}else ft.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-ft.y);A.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=se)}}else A.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*A.scale),se=this.lineWidth,this.lineWidth=se*A.scale),this.pdf.text(A.text,Pe.x+this.posX,Pe.y+this.posY,{angle:A.angle,align:H,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=se)},Z=function(A,H,Q,ie){Q=Q||0,ie=ie||0,this.pdf.internal.out(t(A+Q)+" "+n(H+ie)+" l")},ee=function(A,H,Q){return this.pdf.lines(A,H,Q,null,null)},ae=function(A,H,Q,ie,se,ye,ce,Ae){this.pdf.internal.out([e(i(Q+A)),e(o(ie+H)),e(i(se+A)),e(o(ye+H)),e(i(ce+A)),e(o(Ae+H)),"c"].join(" "))},he=function(A,H,Q,ie){for(var se=2*Math.PI,ye=Math.PI/2;H>Q;)H-=se;var ce=Math.abs(Q-H);ce<se&&ie&&(ce=se-ce);for(var Ae=[],Pe=ie?-1:1,ze=H;ce>1e-5;){var He=ze+Pe*Math.min(ce,ye);Ae.push(be.call(this,A,ze,He)),ce-=Math.abs(He-ze),ze=He}return Ae},be=function(A,H,Q){var ie=(Q-H)/2,se=A*Math.cos(ie),ye=A*Math.sin(ie),ce=se,Ae=-ye,Pe=ce*ce+Ae*Ae,ze=Pe+ce*se+Ae*ye,He=4/3*(Math.sqrt(2*Pe*ze)-ze)/(ce*ye-Ae*se),Je=ce-He*Ae,dt=Ae+He*ce,X=Je,Qe=-dt,Yt=ie+H,Ct=Math.cos(Yt),$e=Math.sin(Yt);return{x1:A*Math.cos(H),y1:A*Math.sin(H),x2:Je*Ct-dt*$e,y2:Je*$e+dt*Ct,x3:X*Ct-Qe*$e,y3:X*$e+Qe*Ct,x4:A*Math.cos(Q),y4:A*Math.sin(Q)}},ne=function(A){return 180*A/Math.PI},fe=function(A,H,Q,ie,se,ye){var ce=A+.5*(Q-A),Ae=H+.5*(ie-H),Pe=se+.5*(Q-se),ze=ye+.5*(ie-ye),He=Math.min(A,se,ce,Pe),Je=Math.max(A,se,ce,Pe),dt=Math.min(H,ye,Ae,ze),X=Math.max(H,ye,Ae,ze);return new d(He,dt,Je-He,X-dt)},ke=function(A,H,Q,ie,se,ye,ce,Ae){var Pe,ze,He,Je,dt,X,Qe,Yt,Ct,$e,wt,st,ot,tt,hr=Q-A,tr=ie-H,Wt=se-Q,rr=ye-ie,Lt=ce-se,ft=Ae-ye;for(ze=0;ze<41;ze++)Ct=(Qe=(He=A+(Pe=ze/40)*hr)+Pe*((dt=Q+Pe*Wt)-He))+Pe*(dt+Pe*(se+Pe*Lt-dt)-Qe),$e=(Yt=(Je=H+Pe*tr)+Pe*((X=ie+Pe*rr)-Je))+Pe*(X+Pe*(ye+Pe*ft-X)-Yt),ze==0?(wt=Ct,st=$e,ot=Ct,tt=$e):(wt=Math.min(wt,Ct),st=Math.min(st,$e),ot=Math.max(ot,Ct),tt=Math.max(tt,$e));return new d(Math.round(wt),Math.round(st),Math.round(ot-wt),Math.round(tt-st))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,H,Q=(A=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:H}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(jt.API),(function(r){var e=function(l){var d,h,m,v,w,k,x,T,C,E;for(h=[],m=0,v=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;v>m;m+=4)(w=(l.charCodeAt(m)<<24)+(l.charCodeAt(m+1)<<16)+(l.charCodeAt(m+2)<<8)+l.charCodeAt(m+3))!==0?(k=(w=((w=((w=((w=(w-(E=w%85))/85)-(C=w%85))/85)-(T=w%85))/85)-(x=w%85))/85)%85,h.push(k+33,x+33,T+33,C+33,E+33)):h.push(122);return(function(j,K){for(var B=K;B>0;B--)j.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var d,h,m,v,w,k=String,x="length",T=255,C="charCodeAt",E="slice",j="replace";for(l[E](-2),l=l[E](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),m=[],v=0,w=(l+=d="uuuuu"[E](l[x]%5||5))[x];w>v;v+=5)h=52200625*(l[C](v)-33)+614125*(l[C](v+1)-33)+7225*(l[C](v+2)-33)+85*(l[C](v+3)-33)+(l[C](v+4)-33),m.push(T&h>>24,T&h>>16,T&h>>8,T&h);return(function(K,B){for(var $=B;$>0;$--)K.pop()})(m,d[x]),k.fromCharCode.apply(k,m)},n=function(l){return l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var h="",m=0;m<l.length;m+=2)h+=String.fromCharCode("0x"+(l[m]+l[m+1]));return h},o=function(l){for(var d=new Uint8Array(l.length),h=l.length;h--;)d[h]=l.charCodeAt(h);return(d=H0(d)).reduce(function(m,v){return m+String.fromCharCode(v)},"")};r.processDataByFilters=function(l,d){var h=0,m=l||"",v=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":m=t(m),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=e(m),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=i(m),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=n(m),v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:m,reverseChain:v.reverse().join(" ")}}})(jt.API),(function(r){r.loadFile=function(e,t,n){return(function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var d=void 0;try{d=(function(h,m,v){var w=new XMLHttpRequest,k=0,x=function(T){var C=T.length,E=[],j=String.fromCharCode;for(k=0;k<C;k+=1)E.push(j(255&T.charCodeAt(k)));return E.join("")};if(w.open("GET",h,!m),w.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(w.onload=function(){w.status===200?v(x(this.responseText)):v(void 0)}),w.send(null),m&&w.status===200)return x(w.responseText)})(i,o,l)}catch{}return d})(e,t,n)},r.loadImageFile=r.loadFile})(jt.API),(function(r){function e(){return(Gt.html2canvas?Promise.resolve(Gt.html2canvas):Sl(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Gt.DOMPurify?Promise.resolve(Gt.DOMPurify):Sl(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var n=function(d){var h=Tr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(d,h){var m=document.createElement(d);for(var v in h.className&&(m.className=h.className),h.innerHTML&&h.dompurify&&(m.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)m.style[v]=h.style[v];return m},o=function d(h,m){for(var v=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),w=h.firstChild;w;w=w.nextSibling)m!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||v.appendChild(d(w,m));return h.nodeType===1&&(h.nodeName==="CANVAS"?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v},l=function d(h){var m=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),v=d.convert(Promise.resolve(),m);return(v=v.setProgress(1,d,1,[d])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,h){return d.__proto__=h||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(m){switch(n(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(m){return this.set({src:i("div",{innerHTML:d,dompurify:m})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,h(this.prop.container,m)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var m=this.opt.jsPDF,v=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,k=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete k.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=v,v)for(var x=0;x<v.length;++x){var T=v[x],C=T.src.find(function(E){return E.format==="truetype"});C&&m.addFont(C.url,T.ref.name,T.ref.style)}return k.windowHeight=k.windowHeight||0,k.windowHeight=k.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):k.windowHeight,m.context2d.save(!0),h(this.prop.container,k)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(d,h,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},l.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(d){if(n(d)!=="object")return this;var h=Object.keys(d||{}).map(function(m){if(m in l.template.prop)return function(){this.prop[m]=d[m]};switch(m){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[m]=d[m]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(d,h){return this.then(function(){var m=d in l.template.prop?this.prop[d]:this.opt[d];return h?h(m):m})},l.prototype.setMargin=function(d){return this.then(function(){switch(n(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},l.prototype.setPageSize=function(d){function h(m,v){return Math.floor(m*v/72*96)}return this.then(function(){(d=d||jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},l.prototype.setProgress=function(d,h,m,v){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),m!=null&&(this.progress.n=m),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,h,m,v){return this.setProgress(d?this.progress.val+d:null,h||null,m?this.progress.n+m:null,v?this.progress.stack.concat(v):null)},l.prototype.then=function(d,h){var m=this;return this.thenCore(d,h,function(v,w){return m.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(k){return m.updateProgress(null,v),k}).then(v,w).then(function(k){return m.updateProgress(1),k})})},l.prototype.thenCore=function(d,h,m){m=m||Promise.prototype.then;var v=this;d&&(d=d.bind(v)),h&&(h=h.bind(v));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?v:l.convert(Object.assign({},v),Promise.prototype),k=m.call(w,d,h);return l.convert(k,v.__proto__)},l.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},l.prototype.thenList=function(d){var h=this;return d.forEach(function(m){h=h.thenCore(m)}),h},l.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return l.convert(h,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then(function(){throw new Error(d)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,jt.getPageSize=function(d,h,m){if(Tr(d)==="object"){var v=d;d=v.orientation,h=v.unit||h,m=v.format||m}h=h||"mm",m=m||"a4",d=(""+(d||"P")).toLowerCase();var w,k=(""+m).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+h}var T,C=0,E=0;if(x.hasOwnProperty(k))C=x[k][1]/w,E=x[k][0]/w;else try{C=m[1],E=m[0]}catch{throw new Error("Invalid format: "+m)}if(d==="p"||d==="portrait")d="p",E>C&&(T=E,E=C,C=T);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>E&&(T=E,E=C,C=T)}return{width:E,height:C,unit:h,k:w,orientation:d}},r.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(g0):null;var m=new l(h);return h.worker?m:m.from(d).doCallback()}})(jt.API),jt.API.addJS=function(r){return w1=r,this.internal.events.subscribe("postPutResources",function(){fh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),b1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+w1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fh!==void 0&&b1!==void 0&&this.internal.out("/Names <</JavaScript "+fh+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],d=n.exec(l);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,v=[];for(o=0;o<m;o++){var w=t.internal.newObject();v.push(w);var k=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+k.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<v.length;o++)t.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,o){var l={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var d=this.count=this.count_r({count:0},l);if(d>0&&this.line("/Count "+d),l.options&&l.options.pageNumber){var h=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var m=0;m<n.children.length;m++)this.renderItems(n.children[m])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(jt.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,o,l,d){var h,m=this.decode.DCT_DECODE,v=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(w){for(var k,x=256*w.charCodeAt(4)+w.charCodeAt(5),T=w.length,C={width:0,height:0,numcomponents:1},E=4;E<T;E+=2){if(E+=x,e.indexOf(w.charCodeAt(E+1))!==-1){k=256*w.charCodeAt(E+5)+w.charCodeAt(E+6),C={width:256*w.charCodeAt(E+7)+w.charCodeAt(E+8),height:k,numcomponents:w.charCodeAt(E+9)};break}x=256*w.charCodeAt(E+2)+w.charCodeAt(E+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}v={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:m,index:n,alias:i}}return v}})(jt.API),jt.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,o=J_(r,{checkCrc:!0}),l=o.width,d=o.height,h=o.channels,m=o.palette,v=o.depth;i=m&&h===1?(function(z){for(var I=z.width,W=z.height,O=z.data,F=z.palette,Z=z.depth,ee=!1,ae=[],he=[],be=void 0,ne=!1,fe=0,ke=0;ke<F.length;ke++){var Y=Sg(F[ke],4),A=Y[0],H=Y[1],Q=Y[2],ie=Y[3];ae.push(A,H,Q),ie!=null&&(ie===0?(fe++,he.length<1&&he.push(ke)):ie<255&&(ne=!0))}if(ne||fe>1){ee=!0,he=void 0;var se=I*W;be=new Uint8Array(se);for(var ye=new DataView(O.buffer),ce=0;ce<se;ce++){var Ae=y0(ye,ce,Z),Pe=Sg(F[Ae],4)[3];be[ce]=Pe}}else fe===0&&(he=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:O,alphaBytes:be,needSMask:ee,palette:ae,mask:he}})(o):h===2||h===4?(function(z){for(var I=z.data,W=z.width,O=z.height,F=z.channels,Z=z.depth,ee=F===2?"DeviceGray":"DeviceRGB",ae=F-1,he=W*O,be=ae,ne=he*be,fe=1*he,ke=Math.ceil(ne*Z/8),Y=Math.ceil(fe*Z/8),A=new Uint8Array(ke),H=new Uint8Array(Y),Q=new DataView(I.buffer),ie=new DataView(A.buffer),se=new DataView(H.buffer),ye=!1,ce=0;ce<he;ce++){for(var Ae=ce*F,Pe=0;Pe<be;Pe++)P1(ie,y0(Q,Ae+Pe,Z),ce*be+Pe,Z);var ze=y0(Q,Ae+be,Z);ze<(1<<Z)-1&&(ye=!0),P1(se,ze,1*ce,Z)}return{colorSpace:ee,colorsPerPixel:ae,sMaskBitsPerComponent:ye?Z:void 0,colorBytes:A,alphaBytes:H,needSMask:ye}})(o):(function(z){var I=z.data,W=z.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:W,colorsPerPixel:W==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(O){for(var F=O.length,Z=new Uint8Array(2*F),ee=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),ae=0;ae<F;ae++)ee.setUint16(2*ae,O[ae],!1);return Z})(I):I,needSMask:!1}})(o);var w,k,x,T=i,C=T.colorSpace,E=T.colorsPerPixel,j=T.sMaskBitsPerComponent,K=T.colorBytes,B=T.alphaBytes,$=T.needSMask,le=T.palette,me=T.mask,U=null;return n!==jt.API.image_compression.NONE&&typeof H0=="function"?(U=(function(z){var I;switch(z){case jt.API.image_compression.FAST:I=11;break;case jt.API.image_compression.MEDIUM:I=13;break;case jt.API.image_compression.SLOW:I=14;break;default:I=12}return I})(n),w=this.decode.FLATE_DECODE,k="/Predictor ".concat(U," /Colors ").concat(E," /BitsPerComponent ").concat(v," /Columns ").concat(l),r=S1(K,Math.ceil(l*E*v/8),E,v,n),$&&(x=S1(B,Math.ceil(l*j/8),1,j,n))):(w=void 0,k=void 0,r=K,$&&(x=B)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:t,data:r,index:e,filter:w,decodeParameters:k,transparency:me,palette:le,sMask:x,predictor:U,width:l,height:d,bitsPerComponent:v,sMaskBitsPerComponent:j,colorSpace:C}}},(function(r){r.processGIF89A=function(e,t,n,i){var o=new v3(e),l=o.width,d=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var m={data:h,width:l,height:d},v=new x0(100).encode(m,100);return r.processJPEG.call(this,v,t,n,i)},r.processGIF87A=r.processGIF89A})(jt.API),ja.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ja.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){qr.log("bit decode error:"+t)}},ja.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,d=0;d<8&&8*i+d<this.width;d++){var h=this.palette[o>>7-d&1];this.data[l+4*d]=h.blue,this.data[l+4*d+1]=h.green,this.data[l+4*d+2]=h.red,this.data[l+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ja.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,d=o>>4,h=15&o,m=this.palette[d];if(this.data[l]=m.blue,this.data[l+1]=m.green,this.data[l+2]=m.red,this.data[l+3]=255,2*i+1>=this.width)break;m=this.palette[h],this.data[l+4]=m.blue,this.data[l+4+1]=m.green,this.data[l+4+2]=m.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},ja.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},ja.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,m=o>>15?255:0,v=n*this.width*4+4*i;this.data[v]=h,this.data[v+1]=d,this.data[v+2]=l,this.data[v+3]=m}this.pos+=r}},ja.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&e)/e*255|0,h=(l>>5&t)/t*255|0,m=(l>>11)/e*255|0,v=i*this.width*4+4*o;this.data[v]=m,this.data[v+1]=h,this.data[v+2]=d,this.data[v+3]=255}this.pos+=r}},ja.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},ja.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=i,this.data[d+2]=n,this.data[d+3]=l}},ja.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,i){var o=new ja(e,!1),l=o.width,d=o.height,h={data:o.getData(),width:l,height:d},m=new x0(100).encode(h,100);return r.processJPEG.call(this,m,t,n,i)}})(jt.API),T1.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,i){var o=new T1(e),l=o.width,d=o.height,h={data:o.getData(),width:l,height:d},m=new x0(100).encode(h,100);return r.processJPEG.call(this,m,t,n,i)}})(jt.API),jt.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),d=0,h=0,m=0;m<i;m+=4){var v=n[m],w=n[m+1],k=n[m+2],x=n[m+3];o[d++]=v,o[d++]=w,o[d++]=k,l[h++]=x}var T=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:T,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},jt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xu=jt.API,mh=Xu.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:i.metadata.Unicode.widths,h=d.fof?d.fof:1,m=e.kerning?e.kerning:i.metadata.Unicode.kerning,v=m.fof?m.fof:1,w=e.doKerning!==!1,k=0,x=r.length,T=0,C=d[0]||h,E=[];for(t=0;t<x;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(k=w&&Tr(m[n])==="object"&&!isNaN(parseInt(m[n][T],10))?m[n][T]/v:0,E.push((d[n]||C)/h+k)),T=n;return E},_1=Xu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xu.processArabic&&(r=Xu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:mh.apply(this,arguments).reduce(function(o,l){return o+l},0)},N1=function(r,e,t,n){for(var i=[],o=0,l=r.length,d=0;o!==l&&d+e[o]<t;)d+=e[o],o++;i.push(r.slice(0,o));var h=o;for(d=0;o!==l;)d+e[o]>n&&(i.push(r.slice(h,o)),d=0,h=o),d+=e[o],o++;return h!==o&&i.push(r.slice(h,o)),i},k1=function(r,e,t){t||(t={});var n,i,o,l,d,h,m,v=[],w=[v],k=t.textIndent||0,x=0,T=0,C=r.split(" "),E=mh.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var j=Array(h).join(" "),K=[];C.map(function($){($=$.split(/\s*\n/)).length>1?K=K.concat($.map(function(le,me){return(me&&le.length?`
`:"")+le})):K.push($[0])}),C=K,h=_1.apply(this,[j,t])}for(o=0,l=C.length;o<l;o++){var B=0;if(n=C[o],h&&n[0]==`
`&&(n=n.substr(1),B=1),k+x+(T=(i=mh.apply(this,[n,t])).reduce(function($,le){return $+le},0))>e||B){if(T>e){for(d=N1.apply(this,[n,i,e-(k+x),e]),v.push(d.shift()),v=[d.pop()];d.length;)w.push([d.shift()]);T=i.slice(n.length-(v[0]?v[0].length:0)).reduce(function($,le){return $+le},0)}else v=[n];w.push(v),k=T+h,x=E}else v.push(n),k+=x+T,x=E}return m=h?function($,le){return(le?j:"")+$.join(" ")}:function($){return $.join(" ")},w.map(m)},Xu.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var w=this.internal.getFont(v.fontName,v.fontStyle),k="Unicode";return w.metadata[k]?{widths:w.metadata[k].widths||{0:1},kerning:w.metadata[k].kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var d,h,m=[];for(d=0,h=n.length;d<h;d++)m=m.concat(k1.apply(this,[n[d],l,o]));return m},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[t[o]]=e[o],i[e[o]]=t[o];var l=function(k){return"0x"+parseInt(k,10).toString(16)},d=r.__fontmetrics__.compress=function(k){var x,T,C,E,j=["{"];for(var K in k){if(x=k[K],isNaN(parseInt(K,10))?T="'"+K+"'":(K=parseInt(K,10),T=(T=l(K).slice(2)).slice(0,-1)+i[T.slice(-1)]),typeof x=="number")x<0?(C=l(x).slice(3),E="-"):(C=l(x).slice(2),E=""),C=E+C.slice(0,-1)+i[C.slice(-1)];else{if(Tr(x)!=="object")throw new Error("Don't know what to do with value type "+Tr(x)+".");C=d(x)}j.push(T+C)}return j.push("}"),j.join("")},h=r.__fontmetrics__.uncompress=function(k){if(typeof k!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,T,C,E,j={},K=1,B=j,$=[],le="",me="",U=k.length-1,z=1;z<U;z+=1)(E=k[z])=="'"?x?(C=x.join(""),x=void 0):x=[]:x?x.push(E):E=="{"?($.push([B,C]),B={},C=void 0):E=="}"?((T=$.pop())[0][T[1]]=B,C=void 0,B=T[0]):E=="-"?K=-1:C===void 0?n.hasOwnProperty(E)?(le+=n[E],C=parseInt(le,16)*K,K=1,le=""):le+=E:n.hasOwnProperty(E)?(me+=n[E],B[C]=parseInt(me,16)*K,K=1,C=void 0,me=""):me+=E;return j},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},w={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(k){var x=k.font,T=w.Unicode[x.postScriptName];T&&(x.metadata.Unicode={},x.metadata.Unicode.widths=T.widths,x.metadata.Unicode.kerning=T.kerning);var C=v.Unicode[x.postScriptName];C&&(x.metadata.Unicode.encoding=C,x.encoding=C.codePages[0])}])})(jt.API),(function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(_h(d)),l.metadata=r.API.TTFFont.open(d),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(jt),jt.API.addSvgAsImage=function(r,e,t,n,i,o,l,d){if(isNaN(e)||isNaN(t))throw qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=n,h.height=i;var m=h.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return(Gt.canvg?Promise.resolve(Gt.canvg):Sl(()=>import("./index.es-BafgiShe.js"),[])).catch(function(k){return Promise.reject(new Error("Could not load canvg: "+k))}).then(function(k){return k.default?k.default:k}).then(function(k){return k.fromString(m,r,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(v)}).then(function(){w.addImage(h.toDataURL("image/jpeg",1),e,t,n,i,l,d)})},jt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},jt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(l),h=[],m=0,v=0,w=0;function k(T,C){var E,j=!1;for(E=0;E<T.length;E+=1)T[E]===C&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var x=d.length;for(w=0;w<x;w+=1)t[d[w]].value=t[d[w]].defaultValue,t[d[w]].explicitSet=!1}if(Tr(r)==="object"){for(i in r)if(o=r[i],k(d,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&k(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(m=0;m<o.length;m+=1)if(n=!0,o[m].length===1&&typeof o[m][0]=="number")h.push(String(o[m]-1));else if(o[m].length>1){for(v=0;v<o[m].length;v+=1)typeof o[m][v]!="number"&&(n=!1);n===!0&&h.push([o[m][0]-1,o[m][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var T,C=[];for(T in t)t[T].explicitSet===!0&&(t[T].type==="name"?C.push("/"+T+" /"+t[T].value):C.push("/"+T+" "+t[T].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+l.length+d.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(jt.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,l){for(var d,h=l.metadata.Unicode.widths,m=["","0","00","000","0000"],v=[""],w=0,k=o.length;w<k;++w){if(d=l.metadata.characterToGlyph(o.charCodeAt(w)),l.metadata.glyIdsUsed.push(d),l.metadata.toUnicode[d]=o.charCodeAt(w),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(l.metadata.widthOfGlyph(d),10)])),d=="0")return v.join("");d=d.toString(16),v.push(m[4-d.length],d)}return v.join("")},n=function(o){var l,d,h,m,v,w,k;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],w=0,k=(d=Object.keys(o).sort(function(x,T){return x-T})).length;w<k;w++)l=d[w],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(m=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+m+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var d=l.font,h=l.out,m=l.newObject,v=l.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="Identity-H"){for(var w=d.metadata.Unicode.widths,k=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),x="",T=0;T<k.length;T++)x+=String.fromCharCode(k[T]);var C=m();v({data:x,addLength1:!0,objectId:C}),h("endobj");var E=m();v({data:n(d.metadata.toUnicode),addLength1:!0,objectId:E}),h("endobj");var j=m();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+ic(d.fontName)),h("/FontFile2 "+C+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var K=m();h("<<"),h("/Type /Font"),h("/BaseFont /"+ic(d.fontName)),h("/FontDescriptor "+j+" 0 R"),h("/W "+r.API.PDFObject.convert(w)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=m(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+E+" 0 R"),h("/BaseFont /"+ic(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+K+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var d=l.font,h=l.out,m=l.newObject,v=l.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var w=d.metadata.rawData,k="",x=0;x<w.length;x++)k+=String.fromCharCode(w[x]);var T=m();v({data:k,addLength1:!0,objectId:T}),h("endobj");var C=m();v({data:n(d.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var E=m();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+T+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+ic(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=m();for(var j=0;j<d.metadata.hmtx.widths.length;j++)d.metadata.hmtx.widths[j]=parseInt(d.metadata.hmtx.widths[j]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+ic(d.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,d=o.text||"",h=o.x,m=o.y,v=o.options||{},w=o.mutex||{},k=w.pdfEscape,x=w.activeFontKey,T=w.fonts,C=x,E="",j=0,K="",B=T[C].encoding;if(T[C].encoding!=="Identity-H")return{text:d,x:h,y:m,options:v,mutex:w};for(K=d,C=x,Array.isArray(d)&&(K=d[0]),j=0;j<K.length;j+=1)T[C].metadata.hasOwnProperty("cmap")&&(l=T[C].metadata.cmap.unicode.codeMap[K[j].charCodeAt(0)]),l||K[j].charCodeAt(0)<256&&T[C].metadata.hasOwnProperty("Unicode")?E+=K[j]:E+="";var $="";return parseInt(C.slice(1))<14||B==="WinAnsiEncoding"?$=k(E,C).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&($=t(E,T[C])),w.isHex=!0,{text:$,x:h,y:m,options:v,mutex:w}};e.events.push(["postProcessText",function(o){var l=o.text||"",d=[],h={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var m=0;for(m=0;m<l.length;m+=1)Array.isArray(l[m])&&l[m].length===3?d.push([i(Object.assign({},h,{text:l[m][0]})).text,l[m][1],l[m][2]]):d.push(i(Object.assign({},h,{text:l[m]})).text);o.text=d}else o.text=i(Object.assign({},h,{text:l})).text}])})(jt),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(jt.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,o,l,d,h,m,v,w=e,k=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),K=!1,B=0;this.__bidiEngine__={};var $=function(O){var F=O.charCodeAt(),Z=F>>8,ee=C[Z];return ee!==void 0?w[256*ee+(255&F)]:Z===252||Z===253?"AL":j.test(Z)?"L":Z===8?"R":"N"},le=function(O){for(var F,Z=0;Z<O.length;Z++){if((F=$(O.charAt(Z)))==="L")return!1;if(F==="R")return!0}return!1},me=function(O,F,Z,ee){var ae,he,be,ne,fe=F[ee];switch(fe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":K=!1;break;case"N":case"AN":break;case"EN":K&&(fe="AN");break;case"AL":K=!0,fe="R";break;case"WS":case"BN":fe="N";break;case"CS":ee<1||ee+1>=F.length||(ae=Z[ee-1])!=="EN"&&ae!=="AN"||(he=F[ee+1])!=="EN"&&he!=="AN"?fe="N":K&&(he="AN"),fe=he===ae?he:"N";break;case"ES":fe=(ae=ee>0?Z[ee-1]:"B")==="EN"&&ee+1<F.length&&F[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&Z[ee-1]==="EN"){fe="EN";break}if(K){fe="N";break}for(be=ee+1,ne=F.length;be<ne&&F[be]==="ET";)be++;fe=be<ne&&F[be]==="EN"?"EN":"N";break;case"NSM":if(l&&!d){for(ne=F.length,be=ee+1;be<ne&&F[be]==="NSM";)be++;if(be<ne){var ke=O[ee],Y=ke>=1425&&ke<=2303||ke===64286;if(ae=F[be],Y&&(ae==="R"||ae==="AL")){fe="R";break}}}fe=ee<1||(ae=F[ee-1])==="B"?"N":Z[ee-1];break;case"B":K=!1,i=!0,fe=B;break;case"S":o=!0,fe="N"}return fe},U=function(O,F,Z){var ee=O.split("");return Z&&z(ee,Z,{hiLevel:B}),ee.reverse(),F&&F.reverse(),ee.join("")},z=function(O,F,Z){var ee,ae,he,be,ne,fe=-1,ke=O.length,Y=0,A=[],H=B?x:k,Q=[];for(K=!1,i=!1,o=!1,ae=0;ae<ke;ae++)Q[ae]=$(O[ae]);for(he=0;he<ke;he++){if(ne=Y,A[he]=me(O,Q,A,he),ee=240&(Y=H[ne][T[A[he]]]),Y&=15,F[he]=be=H[Y][5],ee>0)if(ee===16){for(ae=fe;ae<he;ae++)F[ae]=1;fe=-1}else fe=-1;if(H[Y][6])fe===-1&&(fe=he);else if(fe>-1){for(ae=fe;ae<he;ae++)F[ae]=be;fe=-1}Q[he]==="B"&&(F[he]=0),Z.hiLevel|=be}o&&(function(ie,se,ye){for(var ce=0;ce<ye;ce++)if(ie[ce]==="S"){se[ce]=B;for(var Ae=ce-1;Ae>=0&&ie[Ae]==="WS";Ae--)se[Ae]=B}})(Q,F,ke)},I=function(O,F,Z,ee,ae){if(!(ae.hiLevel<O)){if(O===1&&B===1&&!i)return F.reverse(),void(Z&&Z.reverse());for(var he,be,ne,fe,ke=F.length,Y=0;Y<ke;){if(ee[Y]>=O){for(ne=Y+1;ne<ke&&ee[ne]>=O;)ne++;for(fe=Y,be=ne-1;fe<be;fe++,be--)he=F[fe],F[fe]=F[be],F[be]=he,Z&&(he=Z[fe],Z[fe]=Z[be],Z[be]=he);Y=ne}Y++}}},W=function(O,F,Z){var ee=O.split(""),ae={hiLevel:B};return Z||(Z=[]),z(ee,Z,ae),(function(he,be,ne){if(ne.hiLevel!==0&&v)for(var fe,ke=0;ke<he.length;ke++)be[ke]===1&&(fe=E.indexOf(he[ke]))>=0&&(he[ke]=E[fe+1])})(ee,Z,ae),I(2,ee,F,Z,ae),I(1,ee,F,Z,ae),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(O,F,Z){if((function(ae,he){if(he)for(var be=0;be<ae.length;be++)he[be]=be;d===void 0&&(d=le(ae)),m===void 0&&(m=le(ae))})(O,F),l||!h||m)if(l&&h&&d^m)B=d?1:0,O=U(O,F,Z);else if(!l&&h&&m)B=d?1:0,O=W(O,F,Z),O=U(O,F);else if(!l||d||h||m){if(l&&!h&&d^m)O=U(O,F),d?(B=0,O=W(O,F,Z)):(B=1,O=W(O,F,Z),O=U(O,F));else if(l&&d&&!h&&m)B=1,O=W(O,F,Z),O=U(O,F);else if(!l&&!h&&d^m){var ee=v;d?(B=1,O=W(O,F,Z),B=0,v=!1,O=W(O,F,Z),v=ee):(B=0,O=W(O,F,Z),O=U(O,F),B=1,v=!1,O=W(O,F,Z),v=ee,O=U(O,F))}}else B=0,O=W(O,F,Z);else B=d?1:0,O=W(O,F,Z);return O},this.__bidiEngine__.setOptions=function(O){O&&(l=O.isInputVisual,h=O.isOutputVisual,d=O.isInputRtl,m=O.isOutputRtl,v=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var d=0;for(l=[],d=0;d<i.length;d+=1)Object.prototype.toString.call(i[d])==="[object Array]"?l.push([t.doBidiReorder(i[d][0]),i[d][1],i[d][2]]):l.push([t.doBidiReorder(i[d])]);n.text=l}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(jt),jt.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Al(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new T3(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new y3(this.contents),this.head=new b3(this),this.name=new S3(this),this.cmap=new Sv(this),this.toUnicode={},this.hhea=new w3(this),this.maxp=new j3(this),this.hmtx=new A3(this),this.post=new N3(this),this.os2=new _3(this),this.loca=new L3(this),this.glyf=new C3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,d,h,m;for(m=[],l=0,d=(h=this.bbox).length;l<d;l++)e=h[l],m.push(Math.round(e*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,o,l,d;for(l=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)i=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return l*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var Da,Al=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,o,l,d,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*o+65536*l+256*d+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,o;for(o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(this.writeByte(t));return o},r})(),y3=(function(){var r;function e(t){var n,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,o,l,d,h,m,v,w,k,x,T,C;for(C in x=Object.keys(t).length,h=Math.log(2),w=16*Math.floor(Math.log(x)/h),l=Math.floor(w/h),v=16*x-w,(i=new Al).writeInt(this.scalarType),i.writeShort(x),i.writeShort(w),i.writeShort(l),i.writeShort(v),o=16*x,m=i.pos+o,d=null,T=[],t)for(k=t[C],i.writeString(C),i.writeInt(r(k)),i.writeInt(m),i.writeInt(k.length),T=T.concat(k),C==="head"&&(d=m),m+=k.length;m%4;)T.push(0),m++;return i.write(T),n=2981146554-r(i.data),i.pos=d+8,i.writeUInt32(n),i.data},r=function(t){var n,i,o,l;for(t=jv.call(t);t.length%4;)t.push(0);for(o=new Al(t),i=0,n=0,l=t.length;n<l;n=n+=4)i+=o.readUInt32();return 4294967295&i},e})(),x3={}.hasOwnProperty,ao=function(r,e){for(var t in e)x3.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Da=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var b3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Al).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),O1=(function(){function r(e,t){var n,i,o,l,d,h,m,v,w,k,x,T,C,E,j,K,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(x=e.readUInt16(),k=x/2,e.pos+=6,o=(function(){var $,le;for(le=[],h=$=0;0<=k?$<k:$>k;h=0<=k?++$:--$)le.push(e.readUInt16());return le})(),e.pos+=2,C=(function(){var $,le;for(le=[],h=$=0;0<=k?$<k:$>k;h=0<=k?++$:--$)le.push(e.readUInt16());return le})(),m=(function(){var $,le;for(le=[],h=$=0;0<=k?$<k:$>k;h=0<=k?++$:--$)le.push(e.readUInt16());return le})(),v=(function(){var $,le;for(le=[],h=$=0;0<=k?$<k:$>k;h=0<=k?++$:--$)le.push(e.readUInt16());return le})(),i=(this.length-e.pos+this.offset)/2,d=(function(){var $,le;for(le=[],h=$=0;0<=i?$<i:$>i;h=0<=i?++$:--$)le.push(e.readUInt16());return le})(),h=j=0,B=o.length;j<B;h=++j)for(E=o[h],n=K=T=C[h];T<=E?K<=E:K>=E;n=T<=E?++K:--K)v[h]===0?l=n+m[h]:(l=d[v[h]/2+(n-T)-(k-h)]||0)!==0&&(l+=m[h]),this.codeMap[n]=65535&l}e.pos=w}return r.encode=function(e,t){var n,i,o,l,d,h,m,v,w,k,x,T,C,E,j,K,B,$,le,me,U,z,I,W,O,F,Z,ee,ae,he,be,ne,fe,ke,Y,A,H,Q,ie,se,ye,ce,Ae,Pe,ze,He;switch(ee=new Al,l=Object.keys(e).sort(function(Je,dt){return Je-dt}),t){case"macroman":for(C=0,E=(function(){var Je=[];for(T=0;T<256;++T)Je.push(0);return Je})(),K={0:0},o={},ae=0,fe=l.length;ae<fe;ae++)K[Ae=e[i=l[ae]]]==null&&(K[Ae]=++C),o[i]={old:e[i],new:K[e[i]]},E[i]=K[e[i]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(E),{charMap:o,subtable:ee.data,maxGlyphID:C+1};case"unicode":for(F=[],w=[],B=0,K={},n={},j=m=null,he=0,ke=l.length;he<ke;he++)K[le=e[i=l[he]]]==null&&(K[le]=++B),n[i]={old:le,new:K[le]},d=K[le]-i,j!=null&&d===m||(j&&w.push(j),F.push(i),m=d),j=i;for(j&&w.push(j),w.push(65535),F.push(65535),W=2*(I=F.length),z=2*Math.pow(Math.log(I)/Math.LN2,2),k=Math.log(z/2)/Math.LN2,U=2*I-z,h=[],me=[],x=[],T=be=0,Y=F.length;be<Y;T=++be){if(O=F[T],v=w[T],O===65535){h.push(0),me.push(0);break}if(O-(Z=n[O].new)>=32768)for(h.push(0),me.push(2*(x.length+I-T)),i=ne=O;O<=v?ne<=v:ne>=v;i=O<=v?++ne:--ne)x.push(n[i].new);else h.push(Z-O),me.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*I+2*x.length),ee.writeUInt16(0),ee.writeUInt16(W),ee.writeUInt16(z),ee.writeUInt16(k),ee.writeUInt16(U),ye=0,A=w.length;ye<A;ye++)i=w[ye],ee.writeUInt16(i);for(ee.writeUInt16(0),ce=0,H=F.length;ce<H;ce++)i=F[ce],ee.writeUInt16(i);for(Pe=0,Q=h.length;Pe<Q;Pe++)d=h[Pe],ee.writeUInt16(d);for(ze=0,ie=me.length;ze<ie;ze++)$=me[ze],ee.writeUInt16($);for(He=0,se=x.length;He<se;He++)C=x[He],ee.writeUInt16(C);return{charMap:n,subtable:ee.data,maxGlyphID:B+1}}},r})(),Sv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new O1(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=O1.encode(e,t),(i=new Al).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),w3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),_3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),N3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,d,h;for(h=[],o=l=0,d=this.file.maxp.numGlyphs;0<=d?l<d:l>d;o=0<=d?++l:--l)h.push(e.readUInt32());return h}).call(this)}},r})(),k3=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},S3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,o,l,d,h,m,v,w,k;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),n=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},o=v=0,w=n.length;v<w;o=++v)i=n[o],e.pos=i.offset,m=e.readString(i.length),l=new k3(m,i),h[k=i.nameID]==null&&(h[k]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),j3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),A3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,o,l,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var m,v;for(v=[],t=m=0;0<=i?m<i:m>i;t=0<=i?++m:--m)v.push(e.readInt16());return v})(),this.widths=(function(){var m,v,w,k;for(k=[],m=0,v=(w=this.metrics).length;m<v;m++)o=w[m],k.push(o.advance);return k}).call(this),n=this.widths[this.widths.length-1],h=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)h.push(this.widths.push(n));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),jv=[].slice,C3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,o,l,d,h,m,v,w;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,n=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,l=(d=new Al(t.read(i))).readShort(),m=d.readShort(),w=d.readShort(),h=d.readShort(),v=d.readShort(),this.cache[e]=l===-1?new P3(d,m,w,h,v):new E3(d,l,m,w,h,v),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,o,l,d,h;for(l=[],o=[],d=0,h=t.length;d<h;d++)i=e[t[d]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},r})(),E3=(function(){function r(e,t,n,i,o,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),P3=(function(){function r(e,t,n,i,o){var l,d;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;d=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&d;)l.pos+=1&d?4:2,128&d?l.pos+=8:64&d?l.pos+=4:8&d&&(l.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Al(jv.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),L3=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ao(r,Da),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<t.length&&t[o]==l){++o,n[l]=i;var d=this.offsets[l],h=this.offsets[l+1]-d;h>0&&(i+=h)}for(var m=new Array(4*n.length),v=0;v<n.length;++v)m[4*v+3]=255&n[v],m[4*v+2]=(65280&n[v])>>8,m[4*v+1]=(16711680&n[v])>>16,m[4*v]=(4278190080&n[v])>>24;return m},r})(),T3=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,o,l,d,h;for(i={},l=0,d=e.length;l<d;l++)i[o=e[l]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(n=i[o])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))n=h[o],i[o]=n;return i},r.prototype.encode=function(e,t){var n,i,o,l,d,h,m,v,w,k,x,T,C,E,j;for(i in n=Sv.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},j=n.charMap)x[(h=j[i]).old]=h.new;for(T in k=n.maxGlyphID,l)T in x||(x[T]=k++);return v=(function(K){var B,$;for(B in $={},K)$[K[B]]=B;return $})(x),w=Object.keys(v).sort(function(K,B){return K-B}),C=(function(){var K,B,$;for($=[],K=0,B=w.length;K<B;K++)d=w[K],$.push(v[d]);return $})(),o=this.font.glyf.encode(l,C,x),m=this.font.loca.encode(o.offsets,C),E={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},r})();jt.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,o,l;if(Array.isArray(t))return"["+(function(){var d,h,m;for(m=[],d=0,h=t.length;d<h;d++)n=t[d],m.push(e.convert(n));return m})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)l=t[i],o.push("/"+i+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+t},e})();function I1(r){const e=new Date(r);return Number.isNaN(e.getTime())?new Date().toISOString().slice(0,10):e.toISOString().slice(0,10)}function O3(r){if(!r)return"N/A";const e=r.toLowerCase();return e==="dog"?"Dog":e==="cat"?"Cat":r}function Av(r){const e=parseFloat(String(r||"").replace(/[^0-9.\-]/g,""));return Number.isFinite(e)?e:0}function I3(r){return`$${Av(r).toFixed(2)}`}function D3(r){return`$${(Number.isFinite(r)?r:0).toFixed(2)}`}function F3(r,e){const t=new jt({unit:"pt",format:"letter"}),n=56,i=556,o=i-n;let l=64;const d=me=>{t.setFont("helvetica","bold"),t.setFontSize(18),t.text(me,n,l),l+=18,t.setDrawColor(64),t.setLineWidth(1),t.line(n,l+10,i,l+10),l+=24},h=(me,U)=>{t.setFont("helvetica","bold"),t.setFontSize(11),t.text(me,n,l),t.setFont("helvetica","normal"),t.setFontSize(11),t.text(U||"",n+160,l),l+=18},m=me=>{t.setFont("helvetica","bold"),t.setFontSize(13),t.text(me,n,l),l+=14};d("Pet Insurance Claim Form"),m("Insurance Information"),h("Company",e?.insuranceCompany||"N/A"),h("Policy Number",e?.policyNumber||"N/A"),h("Invoice Number",r.invoiceNumber||"N/A"),l+=8,m("Pet Owner Information"),h("Owner Name",e?.ownerName||"N/A"),h("Phone",e?.ownerPhone||"N/A"),l+=8,m("Pet Information"),h("Pet Name",r.petName||e?.name||"N/A"),h("Species",O3(e?.species)),l+=8,m("Veterinary Clinic"),h("Clinic Name",r.clinicName||"N/A"),h("Clinic Address",r.clinicAddress||"N/A"),l+=8,m("Service Details"),h("Date of Service",r.dateOfService||I1(new Date().toISOString())),h("Diagnosis / Reason",r.diagnosis||"N/A"),l+=8,m("Itemized Charges");const v=Math.floor(o*.7),w=n,k=i,x=14;t.setFont("helvetica","bold"),t.text("Description",w,l),t.text("Amount",k,l,{align:"right"}),l+=14,t.setDrawColor(200),t.line(n,l,i,l),l+=10,r.lineItems.forEach(me=>{const U=me.description||"",z=I3(me.amount);t.setFont("helvetica","normal"),t.setFontSize(11);const I=t.splitTextToSize(U,v);t.setFont("courier","normal"),t.text(z,k,l,{align:"right"}),t.setFont("helvetica","normal"),I.forEach((W,O)=>{t.text(W,w,l+O*x)}),l+=Math.max(x,I.length*x),l+=2}),r.lineItems.length===0&&(t.setFont("helvetica","normal"),t.text("No items",w,l),l+=16),l+=6,t.setDrawColor(64),t.line(n,l,i,l),l+=14,t.setFont("helvetica","bold"),t.text("Total",w,l),t.setFont("courier","bold"),t.text(D3(Av(r.totalAmount)),k,l,{align:"right"}),l+=24,t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(120);const T=742;t.setTextColor(40),t.setFont("helvetica","bold"),t.text("Filing Deadline Reminder",n,T),t.setFont("helvetica","normal"),t.setTextColor(80),t.setFontSize(9);const E=t.splitTextToSize("Most pet insurance requires claims to be filed within 60180 days of service. This is a general reminder only. Always verify your specific deadline with your insurance provider.",i-n);t.text(E,n,T+14),t.setTextColor(120),t.text("Generated by Pet Claim Helper - petclaimhelper.com",n,760);const j=I1(r.dateOfService||new Date().toISOString()),K=(r.petName||e?.name||"Pet").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),B=(e?.insuranceCompany||"Insurance").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),$=`${K}_${B}_claim_${j}.pdf`,le=new Blob([t.output("arraybuffer")],{type:"application/pdf"});return{filename:$,blob:le}}function M3(r,e){const t={clinicName:r.clinicName,clinicAddress:r.clinicAddress,petName:r.petName,dateOfService:r.dateOfService,totalAmount:r.subtotal,diagnosis:r.diagnosis,lineItems:r.lineItems,invoiceNumber:r.invoiceNumber};return F3(t,e)}function Cv({open:r,onClose:e,onSaved:t,userId:n,pets:i,defaultPetId:o}){const[l,d]=ve.useState(""),[h,m]=ve.useState(""),[v,w]=ve.useState(""),[k,x]=ve.useState("1x daily"),[T,C]=ve.useState(["07:00"]),[E,j]=ve.useState("7"),[K,B]=ve.useState(7),[$,le]=ve.useState(!1),[me,U]=ve.useState(null),[z,I]=ve.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),W=ve.useRef(!1);ve.useEffect(()=>{if(r&&!W.current){d(o||(i[0]?.id??"")),m(""),w(""),x("1x daily"),C(["07:00"]),j("7"),B(7),le(!1),U(null);try{console.log("[AddMedicationForm] Form opened. Initial timezone (from Intl):",z)}catch{}n&&At.from("profiles").select("timezone").eq("id",n).single().then(({data:ae})=>{const he=ae&&ae.timezone?String(ae.timezone):"";try{console.log("[AddMedicationForm] Profile timezone loaded:",he||"(empty)")}catch{}he&&I(he)}).catch(()=>{})}W.current=r},[r,o,i,n,z]),ve.useEffect(()=>{if(!r)return;const ae=document.body.style.overflow;document.body.style.overflow="hidden";const he=be=>{be.key==="Escape"&&e()};return window.addEventListener("keydown",he),()=>{document.body.style.overflow=ae,window.removeEventListener("keydown",he)}},[r,e]),ve.useEffect(()=>{k==="1x daily"&&C(["07:00"]),k==="2x daily"&&C(["07:00","19:00"]),k==="3x daily"&&C(["08:00","14:00","20:00"])},[k]);const O=ve.useMemo(()=>k==="1x daily"?1:k==="2x daily"?2:3,[k]),F=(ae,he)=>{const be=(he||"").slice(0,5),ne=[...T];ne[ae]=be,C(ne)},Z=()=>{const ae=new Date,he=ae.getFullYear(),be=String(ae.getMonth()+1).padStart(2,"0"),ne=String(ae.getDate()).padStart(2,"0"),fe=`${he}-${be}-${ne}`;let ke=E==="custom"?Math.max(1,Number(K||1)):Number(E);(!Number.isFinite(ke)||ke<1)&&(ke=1);const Y=new Date(ae.getTime());Y.setDate(Y.getDate()+(ke-1));const A=Y.getFullYear(),H=String(Y.getMonth()+1).padStart(2,"0"),Q=String(Y.getDate()).padStart(2,"0"),ie=`${A}-${H}-${Q}`;return{start:fe,end:ie}},ee=async ae=>{if(ae.preventDefault(),!n){U("You must be logged in.");return}if(!l){U("Please select a pet.");return}if(!h.trim()){U("Enter medication name.");return}if(T.some(he=>!/^\d{2}:\d{2}$/.test(he))){U("Please select valid reminder times.");return}if(T.length!==O){U("Reminder times do not match selected frequency.");return}le(!0),U(null);try{const{start:he,end:be}=Z(),ne=z||Intl.DateTimeFormat().resolvedOptions().timeZone;try{console.log("[AddMedicationForm] Submitting. Detected timezone:",ne),console.log("[AddMedicationForm] Times selected (will store as PST, no UTC conversion):",T)}catch{}const fe=T.filter(Boolean);try{console.log("[AddMedicationForm] Times to store in PST:",fe)}catch{}const ke={user_id:n,pet_id:l,claim_id:null,medication_name:h.trim(),dosage:v.trim()||null,frequency:k,reminder_times:fe,start_date:he,end_date:be};try{console.log("[AddMedicationForm] Payload.reminder_times (storing in PST):",ke.reminder_times)}catch{}const{error:Y}=await At.from("medications").insert(ke);try{console.log("[AddMedicationForm] Supabase insert completed. Error:",Y||null)}catch{}if(Y)throw Y;t&&t(),e()}catch(he){U(he?.message||"Failed to save medication")}finally{le(!1)}};return r?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:ae=>ae.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Add Medication"}),u.jsx("button",{type:"button",className:"text-sm",onClick:e,children:"Close"})]}),me&&u.jsx("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:me}),u.jsxs("form",{className:"mt-4 space-y-4",onSubmit:ee,children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pet"}),u.jsxs("select",{value:l,onChange:ae=>d(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{value:"",children:" Select "}),i.map(ae=>u.jsxs("option",{value:ae.id,children:[ae.name," (",ae.species,")"]},ae.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Medication name"}),u.jsx("input",{value:h,onChange:ae=>m(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"Amoxicillin"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Dosage"}),u.jsx("input",{value:v,onChange:ae=>w(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"1 pill"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Frequency"}),u.jsxs("select",{value:k,onChange:ae=>x(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{children:"1x daily"}),u.jsx("option",{children:"2x daily"}),u.jsx("option",{children:"3x daily"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Duration"}),u.jsxs("select",{value:E,onChange:ae=>j(ae.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{value:"7",children:"7 days"}),u.jsx("option",{value:"10",children:"10 days"}),u.jsx("option",{value:"14",children:"14 days"}),u.jsx("option",{value:"30",children:"30 days"}),u.jsx("option",{value:"custom",children:"Custom"})]})]})]}),E==="custom"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Custom days"}),u.jsx("input",{type:"number",min:1,value:K,onChange:ae=>B(Number(ae.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Reminder times"}),u.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:Array.from({length:O}).map((ae,he)=>u.jsx("input",{type:"time",value:T[he]||"",onChange:be=>F(he,be.target.value),className:"w-full min-w-[140px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"},he))})]}),u.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[u.jsx("button",{type:"button",onClick:e,className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:$,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:$?"Saving":"Save Medication"})]})]})]})}):null}function R3(r){const e=r.replace(/\D/g,"");return e.length!==10?r:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}function em(r){const e=r.replace(/\D/g,"");return e.length!==10?"":`+1${e}`}function Ev(r,e=""){const n=r.replace(/\D/g,"").slice(0,10);return n.length===0?"":n.length<=3?`(${n}`:n.length<=6?`(${n.slice(0,3)}) ${n.slice(3)}`:`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6)}`}function U3({open:r,onClose:e,userId:t}){const[n,i]=ve.useState(1),[o,l]=ve.useState(!1),[d,h]=ve.useState(null),[m,v]=ve.useState(""),[w,k]=ve.useState(""),[x,T]=ve.useState(""),[C,E]=ve.useState(""),[j,K]=ve.useState("None"),[B,$]=ve.useState(""),[le,me]=ve.useState(""),[U,z]=ve.useState(""),[I,W]=ve.useState(""),[O,F]=ve.useState(""),[Z,ee]=ve.useState(""),[ae,he]=ve.useState(!1),[be,ne]=ve.useState(""),[fe,ke]=ve.useState(!1);ve.useEffect(()=>{r&&(i(1),l(!1),h(null),v(""),k(""),T(""),E(""),K("None"),$(""),me(""),z(""),W(""),F(""),ee(""),he(!1),ne(""),ke(!1))},[r]);const Y=ve.useMemo(()=>m.trim().length>0,[m]),A=ve.useMemo(()=>x.trim().length>0&&!!C,[x,C]),H=ve.useMemo(()=>ae?be.trim().length>0&&fe:!0,[ae,be,fe]);ve.useEffect(()=>{if(!r)return;const se=document.body.style.overflow;document.body.style.overflow="hidden";const ye=ce=>{ce.key==="Escape"&&n!==4&&e()};return window.addEventListener("keydown",ye),()=>{document.body.style.overflow=se,window.removeEventListener("keydown",ye)}},[r,n,e]);const Q=async()=>{l(!0),h(null);try{let se=null;if(O){const Pe=new Date(O);if(Number.isNaN(Pe.getTime()))throw new Error("Please select a valid Coverage Start Date.");se=Pe.toISOString().slice(0,10)}const ye={full_name:m.trim(),onboarding_complete:!0};if(ae&&be.trim()){const Pe=em(be);Pe&&(ye.phone=Pe,ye.sms_opt_in=!0)}w.trim()&&(ye.address=w.trim());const{error:ce}=await At.from("profiles").update(ye).eq("id",t);if(ce)throw ce;if(ae&&be.trim()&&fe){const Pe=em(be);if(Pe){let ze=null;try{ze=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}const{error:He}=await At.from("sms_consent").insert({user_id:t,phone_number:Pe,consented:!0,consent_text:"I agree to receive SMS medication reminders. Reply STOP to opt out, HELP for support.",ip_address:ze});He&&console.error("[OnboardingModal] Failed to save SMS consent:",He)}}const Ae={user_id:t,name:x.trim(),species:C||"other",insurance_company:j&&j!=="None"?j:null,healthy_paws_pet_id:B.trim()||null,policy_number:le.trim()||null,monthly_premium:U===""?null:parseFloat(U),deductible_per_claim:I===""?null:parseFloat(I),coverage_start_date:se,insurance_pays_percentage:Z===""?null:Math.max(50,Math.min(100,Number(Z)))};await W5(Ae),i(4)}catch(se){h(se?.message||"Failed to save your info. Please try again.")}finally{l(!1)}};if(!r)return null;const ie=n===1?"Step 1 of 3":n===2?"Step 2 of 3":n===3?"Step 3 of 3":"";return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-6 shadow-2xl max-h-[calc(100vh-40px)] overflow-y-auto",onClick:se=>se.stopPropagation(),children:[n!==4&&u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:ie}),d&&u.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:d}),n===1&&u.jsxs("div",{className:"animate-fadeIn",children:[u.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Welcome to Pet Claim Helper! "}),u.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Quick setup - then we'll handle the insurance headaches for you."}),u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Full Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{value:m,onChange:se=>v(se.target.value),placeholder:"John Smith",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Mailing Address ",u.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),u.jsx("textarea",{value:w,onChange:se=>k(se.target.value),placeholder:"123 Main St, City, State 12345",rows:2,className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Required for Nationwide and Healthy Paws claim forms"})]})]}),u.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[u.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:e,children:"Cancel"}),u.jsx("button",{type:"button",disabled:!Y,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>i(2),children:"Next"})]})]}),n===2&&u.jsxs("div",{className:"animate-fadeIn",children:[u.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Meet your new claim-filing sidekick"}),u.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Add your pet and insurance details. We'll use this to:"}),u.jsxs("div",{className:"mt-4 mb-6 bg-gradient-to-r from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 rounded-lg p-4 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[u.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:""}),u.jsx("span",{className:"font-medium",children:"Auto-submit claims in 2 minutes"}),u.jsx("span",{className:"text-xs text-slate-500",children:"(not 30-45)"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[u.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),u.jsx("span",{children:"Track every vet visit - insured or not"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[u.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:""}),u.jsx("span",{children:"See exactly what you spend on your pet"})]})]}),u.jsxs("div",{className:"mt-4 space-y-3",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{value:x,onChange:se=>T(se.target.value),placeholder:"Max",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:C,onChange:se=>E(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{value:"",children:" Select "}),u.jsx("option",{value:"dog",children:"Dog"}),u.jsx("option",{value:"cat",children:"Cat"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),u.jsxs("select",{value:j,onChange:se=>K(se.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{value:"None",children:"None - No Insurance"}),u.jsx("option",{value:"Nationwide",children:"Nationwide"}),u.jsx("option",{value:"Trupanion",children:"Trupanion"}),u.jsx("option",{value:"Fetch",children:"Fetch"}),u.jsx("option",{value:"Healthy Paws",children:"Healthy Paws"}),u.jsx("option",{value:"Pets Best",children:"Pets Best"}),u.jsx("option",{value:"ASPCA",children:"ASPCA"}),u.jsx("option",{value:"Embrace",children:"Embrace"}),u.jsx("option",{value:"Figo",children:"Figo"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),j==="Healthy Paws"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),u.jsx("input",{value:B,onChange:se=>$(se.target.value),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),j&&j!=="None"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),u.jsx("input",{value:le,onChange:se=>me(se.target.value),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),u.jsx("input",{type:"number",min:0,value:U,onChange:se=>z(se.target.value),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),u.jsx("input",{type:"number",min:0,value:I,onChange:se=>W(se.target.value),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),u.jsx("input",{type:"number",min:50,max:100,value:Z,onChange:se=>ee(se.target.value),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),u.jsx("input",{type:"date",value:O,onChange:se=>F(se.target.value),onClick:se=>se.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),u.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[u.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>i(1),children:"Back"}),u.jsx("button",{type:"button",disabled:!A,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:()=>i(3),children:"Next"})]})]}),n===3&&u.jsxs("div",{className:"animate-fadeIn",children:[u.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:" Never forget a dose!"}),u.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:["Get a friendly text when it's medication time. ",u.jsx("span",{className:"text-slate-500 italic",children:"(Optional - skip if you don't need reminders)"})]}),u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:u.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-200",children:[u.jsxs("div",{className:"font-semibold mb-1",children:["Stay on track with ",x||"your pet","'s meds"]}),u.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"We'll text you at the right time - no more missed doses!"})]})}),u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition-colors",children:[u.jsx("input",{type:"checkbox",checked:ae,onChange:se=>he(se.target.checked),className:"mt-1 w-5 h-5 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Yes, text me when it's medication time"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"We'll send you a quick reminder so you never miss a dose"})]})]}),ae&&u.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-emerald-500",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Phone Number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"tel",value:be,onChange:se=>ne(Ev(se.target.value,be)),placeholder:"(555) 123-4567",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:fe,onChange:se=>ke(se.target.checked),className:"mt-0.5 w-4 h-4 rounded border-2 border-slate-400 dark:border-slate-500 checked:bg-emerald-600 checked:border-emerald-600"}),u.jsxs("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:["I agree to receive SMS medication reminders ",u.jsx("span",{className:"text-red-500",children:"*"})]})]}),fe&&u.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:u.jsx("p",{children:"Reply STOP to opt out anytime, or HELP for support."})})]}),!ae&&u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"You can always enable medication reminders later in your settings."})]}),u.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[u.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>i(2),children:"Back"}),u.jsx("button",{type:"button",disabled:!H||o,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 hover:scale-[1.02] hover:shadow-lg text-white px-6 disabled:opacity-60 disabled:hover:scale-100 disabled:hover:shadow-none transition-all duration-200",onClick:Q,children:o?"Saving":"Finish Setup"})]})]}),n===4&&u.jsxs("div",{className:"text-center py-4 animate-fadeIn",children:[u.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),u.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"You're all set!"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-8",children:"Time to start saving money and never miss a deadline."}),u.jsxs("div",{className:"text-left bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 rounded-xl p-6 mb-6 border border-emerald-200 dark:border-emerald-800",children:[u.jsx("div",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Your quick wins:"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",children:[u.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),u.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[u.jsx("span",{className:"font-semibold",children:"Claims auto-submitted"})," to ",j&&j!=="None"?j:"your insurance"]})]}),u.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",style:{animationDelay:"100ms"},children:[u.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),u.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[u.jsx("span",{className:"font-semibold",children:"Deadline tracking active"})," - never miss a filing date"]})]}),u.jsxs("div",{className:"flex items-start gap-3 animate-slideIn",style:{animationDelay:"200ms"},children:[u.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-lg font-bold",children:""}),u.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[u.jsx("span",{className:"font-semibold",children:"Financial dashboard ready"})," - see exactly what you spend"]})]})]})]}),u.jsx("button",{type:"button",className:"w-full h-14 rounded-lg bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 hover:scale-[1.02] hover:shadow-xl text-white font-bold text-lg transition-all duration-200",onClick:()=>{localStorage.setItem("justCompletedOnboarding","true"),e()},children:"Let's Go! "})]})]})})}function B3({userId:r,refreshToken:e,period:t}){const[n,i]=ve.useState(!1),[o,l]=ve.useState(null),[d,h]=ve.useState([]),[m,v]=ve.useState([]);ve.useEffect(()=>{console.log("[FinancialSummary]  useEffect triggered | userId:",r,"| refreshToken:",e),r&&(i(!0),l(null),console.log("[FinancialSummary]  Fetching claims and pets from database..."),Promise.all([At.from("claims").select("id, pet_id, total_amount, reimbursed_amount, filing_status, expense_category, service_date, created_at, deductible_applied, user_coinsurance_payment, insurance_reimbursement").eq("user_id",r),At.from("pets").select("id, name, species, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",r)]).then(([E,j])=>{if(E.error)throw E.error;if(j.error)throw j.error;console.log("[FinancialSummary] claims fetched:",E.data),console.log("[FinancialSummary] pets fetched:",j.data),h(E.data||[]),v(j.data||[])}).catch(E=>l(E?.message||"Failed to load financial data")).finally(()=>i(!1)))},[r,e]);const w=ve.useMemo(()=>{const E={};for(const j of m)E[j.id]=j;return E},[m]),k=E=>{if(!E)return null;const j=String(E).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!j)return null;const K=Number(j[1]),B=Number(j[2])-1,$=Number(j[3]),le=new Date(K,B,$);return isNaN(le.getTime())?null:le},x=(E,j)=>{const K=Number(E.monthly_premium)||0;if(K===0)return{total:0,monthsCount:0,context:"No insurance"};const B=k(E.coverage_start_date||null);if(!B)return{total:0,monthsCount:0,context:"No coverage start date"};const $=new Date,le=$.getFullYear(),me=$.getMonth(),U=j!==null?j:null;if(U!==null){if(B.getFullYear()>U)return{total:0,monthsCount:0,context:`coverage started ${B.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`};if(U>le)return{total:0,monthsCount:0,context:"future year"};const F=new Date(U,0,1),Z=new Date(U,11,31),ee=B>F?B:F,ae=U===le?new Date(le,me,$.getDate()):Z,he=(ae.getFullYear()-ee.getFullYear())*12+(ae.getMonth()-ee.getMonth())+1,be=Math.max(0,he),ne=K*be;let fe="";if(B.getFullYear()===U&&B.getMonth()>0){const ke=B.toLocaleDateString("en-US",{month:"short"}),Y=ae.toLocaleDateString("en-US",{month:"short",year:"numeric"});fe=`${ke} - ${Y}`}else U===le&&be<12?fe=`Jan - ${ae.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`:fe=`${U}`;return{total:ne,monthsCount:be,context:fe}}const z=($.getFullYear()-B.getFullYear())*12+($.getMonth()-B.getMonth())+1,I=Math.max(0,z),W=K*I,O=`since ${B.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;return{total:W,monthsCount:I,context:O}},T=ve.useMemo(()=>{const E=new Date().getFullYear(),j=(()=>{const W=String(t||"").toLowerCase();return W==="2024"||W==="2025"||W==="2026"?Number(W):W==="all"?null:E})(),K=new Date,B=m.reduce((W,O)=>{const F=x(O,j);return W+F.total},0);let $=0,le=0,me=0,U=0,z=0;for(const W of d){const O=W.service_date?k(W.service_date)||new Date(W.service_date):null;if(!O||isNaN(O.getTime())||j!==null&&O.getFullYear()!==j||O>K)continue;const F=String(W.expense_category||"").toLowerCase(),Z=String(W.filing_status||"").toLowerCase(),ee=Number(W.total_amount)||0,ae=Math.max(0,Number(W.reimbursed_amount)||0);F==="not_insured"||F==="not insured"?$+=ee:F==="insured"&&Z==="paid"?(le+=ae,U+=ee,me+=Math.max(0,ee-ae)):F==="insured"&&(U+=ee,me+=Math.max(0,ee-ae)),Z==="submitted"&&(z+=ee)}const I=B+$+me;return{premiumsYTD:B,nonInsuredTotal:$,insurancePaidBack:le,userShareCoveredClaims:me,insuredBillsTotal:U,definiteTotal:I,pendingTotal:z}},[d,m,t]),C=ve.useMemo(()=>{const E=new Date().getFullYear(),j=(()=>{const le=String(t||"").toLowerCase();return le==="2024"||le==="2025"||le==="2026"?Number(le):le==="all"?null:E})(),K=new Date,B={};for(const le of m){const me=x(le,j);B[le.id]={claimed:0,reimbursed:0,premiums:me.total,nonInsured:0,pendingBills:0,filedClaims:0}}const $=[...d].sort((le,me)=>{const U=le.service_date&&(k(le.service_date)?.getTime()||new Date(le.service_date).getTime())||0,z=me.service_date&&(k(me.service_date)?.getTime()||new Date(me.service_date).getTime())||0;return U-z});for(const le of $){const me=String(le.expense_category||"").toLowerCase(),U=le.pet_id||"";if(!B[U])continue;const z=Number(le.total_amount)||0;if(z<=0)continue;const I=le.service_date?k(le.service_date)||new Date(le.service_date):null;if(!(!I||isNaN(I.getTime()))&&!(j!==null&&I.getFullYear()!==j)){if(me==="insured"){const W=String(le.filing_status||"not_submitted").toLowerCase(),O=W==="filed"?"submitted":W;O==="not_submitted"||O==="not_filed"?B[U].pendingBills+=1:(O==="submitted"||O==="paid"||O==="denied"||O==="approved")&&(B[U].filedClaims+=1)}if(me==="not_insured"||me==="not insured")I<=K&&(B[U].nonInsured+=z);else{B[U].claimed+=z;const W=Math.max(0,Number(le.reimbursed_amount)||0);B[U].reimbursed+=W}}}return console.log("[FinancialSummary] perPet calc (premiums + bills - reimbursed)",B),B},[d,m,w,t]);return r?u.jsxs("section",{className:"mt-6",children:[u.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[u.jsx("div",{className:"text-lg font-semibold",children:"Financial Summary"}),n&&u.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Loading"}),o&&u.jsx("div",{className:"mt-2 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!n&&!o&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[u.jsx("div",{className:"text-sm font-semibold",children:` ${String(t||"").toLowerCase()==="all"?"ALL TIME":String(t||new Date().getFullYear())} TOTAL`}),u.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-600",children:"Spent on all pets (including premiums)"}),u.jsxs("div",{className:"text-xl font-bold",children:["$",(T.premiumsYTD+T.nonInsuredTotal+T.insuredBillsTotal).toFixed(2)]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-600",children:"- Insurance Reimbursed"}),u.jsxs("div",{className:"text-xl font-bold",children:["$",T.insurancePaidBack.toFixed(2)]})]}),u.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-800 font-semibold",children:"= Your Net Cost"}),u.jsxs("div",{className:"text-2xl font-bold",children:["$",T.definiteTotal.toFixed(2)]})]})]})]})})]}),u.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[u.jsx("div",{className:"text-sm sm:text-base font-semibold",children:"YOUR OUT-OF-POCKET BREAKDOWN"}),u.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"text-slate-600",children:["Insurance Premiums ",u.jsx("span",{className:"text-xs text-slate-500",children:"(Monthly insurance cost)"})]}),u.jsxs("div",{className:"font-mono font-semibold",children:["$",T.premiumsYTD.toFixed(2)]})]}),(()=>{const E=new Date().getFullYear(),j=(()=>{const B=String(t||"").toLowerCase();return B==="2024"||B==="2025"||B==="2026"?Number(B):B==="all"?null:E})(),K=m.map(B=>{const $=x(B,j);return{pet:B,...$}}).filter(B=>B.total>0||Number(B.pet.monthly_premium)>0);return K.length===0?null:u.jsx("div",{className:"ml-4 mt-2 space-y-1 text-xs text-slate-500",children:K.map(({pet:B,total:$,monthsCount:le,context:me})=>{const U=Number(B.monthly_premium)||0;return U===0?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[" ",B.name,": No insurance"]}),u.jsx("div",{})]},B.id):$===0?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[" ",B.name,": $0 (",me,")"]}),u.jsx("div",{})]},B.id):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[" ",B.name,": $",U.toFixed(2),"/mo  ",le," = $",$.toFixed(2)," (",me,")"]}),u.jsx("div",{})]},B.id)})})})()]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"text-slate-600",children:["Non-Insured Vet Visits ",u.jsx("span",{className:"text-xs text-slate-500",children:"(Not covered by insurance)"})]}),u.jsxs("div",{className:"font-mono font-semibold",children:["$",T.nonInsuredTotal.toFixed(2)]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-600",children:"Amount You Paid (for covered claims)"}),u.jsxs("div",{className:"font-mono font-semibold",children:["$",T.userShareCoveredClaims.toFixed(2)]})]}),u.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-800 font-semibold",children:"Total You Paid"}),u.jsxs("div",{className:"text-xl sm:text-2xl font-bold font-mono",children:["$",T.definiteTotal.toFixed(2)]})]})]})]}),u.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[u.jsx("div",{className:"text-sm sm:text-base font-semibold",children:` PER-PET BREAKDOWN (${String(t||"").toLowerCase()==="all"?"All Time":String(t||new Date().getFullYear())})`}),m.length===0&&u.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No pets yet. Add a pet to see per-pet costs."}),u.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(E=>{const j=C[E.id]||{claimed:0,reimbursed:0,premiums:0,nonInsured:0,pendingBills:0,filedClaims:0};E.species==="cat"||E.species;const K=E.species==="cat"?"":E.species==="dog"?"":"",B=j.premiums+(j.nonInsured||0)+j.claimed-j.reimbursed,$=(j.nonInsured||0)+j.reimbursed+j.claimed>0;return u.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-100 min-w-0",children:[u.jsx("span",{children:K}),u.jsxs("span",{className:"font-semibold truncate",title:`${E.name} (${E.species})`,children:[E.name," (",E.species,")"]})]}),u.jsx("div",{className:"mt-3 text-sm",children:$?u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"YOUR COSTS"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-slate-600",children:"Premiums (attributed)"}),u.jsxs("span",{className:"font-mono font-semibold",children:["$",j.premiums.toFixed(2)]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-slate-600",children:"Vet Bills (insured + non-insured)"}),u.jsxs("span",{className:"font-mono font-semibold",children:["$",(j.claimed+(j.nonInsured||0)).toFixed(2)]})]}),u.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[u.jsx("span",{className:"text-slate-600",children:"Subtotal Paid"}),u.jsxs("span",{className:"font-mono font-semibold",children:["$",(j.premiums+j.claimed+(j.nonInsured||0)).toFixed(2)]})]}),u.jsx("div",{className:"pt-3 text-xs font-semibold text-slate-500",children:"INSURANCE COVERAGE"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-slate-600",children:"Reimbursements Received"}),u.jsxs("span",{className:"font-mono font-semibold",children:["$",j.reimbursed.toFixed(2)]})]}),u.jsxs("div",{className:"pt-3 border-t-2 border-slate-300 dark:border-slate-700 flex items-center justify-between",children:[u.jsx("span",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),u.jsxs("span",{className:"font-mono font-bold text-lg",children:["$",B.toFixed(2)]})]}),u.jsx("div",{className:"text-xs text-slate-500",children:j.pendingBills>0?`(${j.pendingBills} bill${j.pendingBills===1?"":"s"} pending submission)`:j.filedClaims>0?`(${j.filedClaims} claim${j.filedClaims===1?"":"s"} filed)`:""})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),u.jsxs("div",{className:"font-mono font-bold text-lg",children:["$",B.toFixed(2)]})]}),u.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"(No vet bills this year)"})]})})]},E.id)})})]})]}):null}class gu extends Error{}class q3 extends gu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class z3 extends gu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class $3 extends gu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class oc extends gu{}class Pv extends gu{constructor(e){super(`Invalid unit ${e}`)}}class Us extends gu{}class yl extends gu{constructor(){super("Zone is an abstract class")}}const nt="numeric",Oa="short",Li="long",Uh={year:nt,month:nt,day:nt},Lv={year:nt,month:Oa,day:nt},W3={year:nt,month:Oa,day:nt,weekday:Oa},Tv={year:nt,month:Li,day:nt},Ov={year:nt,month:Li,day:nt,weekday:Li},Iv={hour:nt,minute:nt},Dv={hour:nt,minute:nt,second:nt},Fv={hour:nt,minute:nt,second:nt,timeZoneName:Oa},Mv={hour:nt,minute:nt,second:nt,timeZoneName:Li},Rv={hour:nt,minute:nt,hourCycle:"h23"},Uv={hour:nt,minute:nt,second:nt,hourCycle:"h23"},Bv={hour:nt,minute:nt,second:nt,hourCycle:"h23",timeZoneName:Oa},qv={hour:nt,minute:nt,second:nt,hourCycle:"h23",timeZoneName:Li},zv={year:nt,month:nt,day:nt,hour:nt,minute:nt},$v={year:nt,month:nt,day:nt,hour:nt,minute:nt,second:nt},Wv={year:nt,month:Oa,day:nt,hour:nt,minute:nt},Vv={year:nt,month:Oa,day:nt,hour:nt,minute:nt,second:nt},V3={year:nt,month:Oa,day:nt,weekday:Oa,hour:nt,minute:nt},Hv={year:nt,month:Li,day:nt,hour:nt,minute:nt,timeZoneName:Oa},Gv={year:nt,month:Li,day:nt,hour:nt,minute:nt,second:nt,timeZoneName:Oa},Yv={year:nt,month:Li,day:nt,weekday:Li,hour:nt,minute:nt,timeZoneName:Li},Kv={year:nt,month:Li,day:nt,weekday:Li,hour:nt,minute:nt,second:nt,timeZoneName:Li};class gd{get type(){throw new yl}get name(){throw new yl}get ianaName(){return this.name}get isUniversal(){throw new yl}offsetName(e,t){throw new yl}formatOffset(e,t){throw new yl}offset(e){throw new yl}equals(e){throw new yl}get isValid(){throw new yl}}let b0=null;class Gh extends gd{static get instance(){return b0===null&&(b0=new Gh),b0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return ay(e,t,n)}formatOffset(e,t){return od(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const tm=new Map;function H3(r){let e=tm.get(r);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),tm.set(r,e)),e}const G3={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Y3(r,e){const t=r.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,o,l,d,h,m,v]=n;return[l,i,o,d,h,m,v]}function K3(r,e){const t=r.formatToParts(e),n=[];for(let i=0;i<t.length;i++){const{type:o,value:l}=t[i],d=G3[o];o==="era"?n[d]=l:Ht(d)||(n[d]=parseInt(l,10))}return n}const w0=new Map;class Uo extends gd{static create(e){let t=w0.get(e);return t===void 0&&w0.set(e,t=new Uo(e)),t}static resetCache(){w0.clear(),tm.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Uo.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return ay(e,t,n,this.name)}formatOffset(e,t){return od(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const n=H3(this.name);let[i,o,l,d,h,m,v]=n.formatToParts?K3(n,t):Y3(n,t);d==="BC"&&(i=-Math.abs(i)+1);const k=Kh({year:i,month:o,day:l,hour:h===24?0:h,minute:m,second:v,millisecond:0});let x=+t;const T=x%1e3;return x-=T>=0?T:1e3+T,(k-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let D1={};function J3(r,e={}){const t=JSON.stringify([r,e]);let n=D1[t];return n||(n=new Intl.ListFormat(r,e),D1[t]=n),n}const rm=new Map;function nm(r,e={}){const t=JSON.stringify([r,e]);let n=rm.get(t);return n===void 0&&(n=new Intl.DateTimeFormat(r,e),rm.set(t,n)),n}const sm=new Map;function Z3(r,e={}){const t=JSON.stringify([r,e]);let n=sm.get(t);return n===void 0&&(n=new Intl.NumberFormat(r,e),sm.set(t,n)),n}const im=new Map;function X3(r,e={}){const{base:t,...n}=e,i=JSON.stringify([r,n]);let o=im.get(i);return o===void 0&&(o=new Intl.RelativeTimeFormat(r,e),im.set(i,o)),o}let Qc=null;function Q3(){return Qc||(Qc=new Intl.DateTimeFormat().resolvedOptions().locale,Qc)}const am=new Map;function Jv(r){let e=am.get(r);return e===void 0&&(e=new Intl.DateTimeFormat(r).resolvedOptions(),am.set(r,e)),e}const om=new Map;function eN(r){let e=om.get(r);if(!e){const t=new Intl.Locale(r);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Zv,...e}),om.set(r,e)}return e}function tN(r){const e=r.indexOf("-x-");e!==-1&&(r=r.substring(0,e));const t=r.indexOf("-u-");if(t===-1)return[r];{let n,i;try{n=nm(r).resolvedOptions(),i=r}catch{const h=r.substring(0,t);n=nm(h).resolvedOptions(),i=h}const{numberingSystem:o,calendar:l}=n;return[i,o,l]}}function rN(r,e,t){return(t||e)&&(r.includes("-u-")||(r+="-u"),t&&(r+=`-ca-${t}`),e&&(r+=`-nu-${e}`)),r}function nN(r){const e=[];for(let t=1;t<=12;t++){const n=Jt.utc(2009,t,1);e.push(r(n))}return e}function sN(r){const e=[];for(let t=1;t<=7;t++){const n=Jt.utc(2016,11,13+t);e.push(r(n))}return e}function ph(r,e,t,n){const i=r.listingMode();return i==="error"?null:i==="en"?t(e):n(e)}function iN(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||Jv(r.locale).numberingSystem==="latn"}class aN{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:o,...l}=n;if(!t||Object.keys(l).length>0){const d={useGrouping:!1,...n};n.padTo>0&&(d.minimumIntegerDigits=n.padTo),this.inf=Z3(e,d)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Em(e,3);return Un(t,this.padTo)}}}class oN{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const l=-1*(e.offset/60),d=l>=0?`Etc/GMT+${l}`:`Etc/GMT${l}`;e.offset!==0&&Uo.create(d).valid?(i=d,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=nm(t,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class lN{constructor(e,t,n){this.opts={style:"long",...n},!t&&sy()&&(this.rtf=X3(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):PN(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Zv={firstDay:1,minimalDays:4,weekend:[6,7]};class Lr{static fromOpts(e){return Lr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,i,o=!1){const l=e||Sn.defaultLocale,d=l||(o?"en-US":Q3()),h=t||Sn.defaultNumberingSystem,m=n||Sn.defaultOutputCalendar,v=um(i)||Sn.defaultWeekSettings;return new Lr(d,h,m,v,l)}static resetCache(){Qc=null,rm.clear(),sm.clear(),im.clear(),am.clear(),om.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:i}={}){return Lr.create(e,t,n,i)}constructor(e,t,n,i,o){const[l,d,h]=tN(e);this.locale=l,this.numberingSystem=t||d||null,this.outputCalendar=n||h||null,this.weekSettings=i,this.intl=rN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=iN(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Lr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,um(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return ph(this,e,uy,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");t&=!n;const i=t?{month:e,day:"numeric"}:{month:e},o=t?"format":"standalone";if(!this.monthsCache[o][e]){const l=n?d=>this.dtFormatter(d,i).format():d=>this.extract(d,i,"month");this.monthsCache[o][e]=nN(l)}return this.monthsCache[o][e]})}weekdays(e,t=!1){return ph(this,e,hy,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=sN(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return ph(this,void 0,()=>fy,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Jt.utc(2016,11,13,9),Jt.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ph(this,e,my,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Jt.utc(-40,1,1),Jt.utc(2017,1,1)].map(n=>this.extract(n,t,"era"))),this.eraCache[e]})}extract(e,t,n){const i=this.dtFormatter(e,t),o=i.formatToParts(),l=o.find(d=>d.type.toLowerCase()===n);return l?l.value:null}numberFormatter(e={}){return new aN(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new oN(e,this.intl,t)}relFormatter(e={}){return new lN(this.intl,this.isEnglish(),e)}listFormatter(e={}){return J3(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Jv(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:iy()?eN(this.locale):Zv}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let _0=null;class Js extends gd{static get utcInstance(){return _0===null&&(_0=new Js(0)),_0}static instance(e){return e===0?Js.utcInstance:new Js(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Js(Jh(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${od(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${od(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return od(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class uN extends gd{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Nl(r,e){if(Ht(r)||r===null)return e;if(r instanceof gd)return r;if(pN(r)){const t=r.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Gh.instance:t==="utc"||t==="gmt"?Js.utcInstance:Js.parseSpecifier(t)||Uo.create(r)}else return jl(r)?Js.instance(r):typeof r=="object"&&"offset"in r&&typeof r.offset=="function"?r:new uN(r)}const Sm={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},F1={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},cN=Sm.hanidec.replace(/[\[|\]]/g,"").split("");function dN(r){let e=parseInt(r,10);if(isNaN(e)){e="";for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);if(r[t].search(Sm.hanidec)!==-1)e+=cN.indexOf(r[t]);else for(const i in F1){const[o,l]=F1[i];n>=o&&n<=l&&(e+=n-o)}}return parseInt(e,10)}else return e}const lm=new Map;function hN(){lm.clear()}function Aa({numberingSystem:r},e=""){const t=r||"latn";let n=lm.get(t);n===void 0&&(n=new Map,lm.set(t,n));let i=n.get(e);return i===void 0&&(i=new RegExp(`${Sm[t]}${e}`),n.set(e,i)),i}let M1=()=>Date.now(),R1="system",U1=null,B1=null,q1=null,z1=60,$1,W1=null;class Sn{static get now(){return M1}static set now(e){M1=e}static set defaultZone(e){R1=e}static get defaultZone(){return Nl(R1,Gh.instance)}static get defaultLocale(){return U1}static set defaultLocale(e){U1=e}static get defaultNumberingSystem(){return B1}static set defaultNumberingSystem(e){B1=e}static get defaultOutputCalendar(){return q1}static set defaultOutputCalendar(e){q1=e}static get defaultWeekSettings(){return W1}static set defaultWeekSettings(e){W1=um(e)}static get twoDigitCutoffYear(){return z1}static set twoDigitCutoffYear(e){z1=e%100}static get throwOnInvalid(){return $1}static set throwOnInvalid(e){$1=e}static resetCaches(){Lr.resetCache(),Uo.resetCache(),Jt.resetCache(),hN()}}class La{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Xv=[0,31,59,90,120,151,181,212,243,273,304,334],Qv=[0,31,60,91,121,152,182,213,244,274,305,335];function Xi(r,e){return new La("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${r}, which is invalid`)}function jm(r,e,t){const n=new Date(Date.UTC(r,e-1,t));r<100&&r>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function ey(r,e,t){return t+(vd(r)?Qv:Xv)[e-1]}function ty(r,e){const t=vd(r)?Qv:Xv,n=t.findIndex(o=>o<e),i=e-t[n];return{month:n+1,day:i}}function Am(r,e){return(r-e+7)%7+1}function Bh(r,e=4,t=1){const{year:n,month:i,day:o}=r,l=ey(n,i,o),d=Am(jm(n,i,o),t);let h=Math.floor((l-d+14-e)/7),m;return h<1?(m=n-1,h=hd(m,e,t)):h>hd(n,e,t)?(m=n+1,h=1):m=n,{weekYear:m,weekNumber:h,weekday:d,...Zh(r)}}function V1(r,e=4,t=1){const{weekYear:n,weekNumber:i,weekday:o}=r,l=Am(jm(n,1,e),t),d=fc(n);let h=i*7+o-l-7+e,m;h<1?(m=n-1,h+=fc(m)):h>d?(m=n+1,h-=fc(n)):m=n;const{month:v,day:w}=ty(m,h);return{year:m,month:v,day:w,...Zh(r)}}function N0(r){const{year:e,month:t,day:n}=r,i=ey(e,t,n);return{year:e,ordinal:i,...Zh(r)}}function H1(r){const{year:e,ordinal:t}=r,{month:n,day:i}=ty(e,t);return{year:e,month:n,day:i,...Zh(r)}}function G1(r,e){if(!Ht(r.localWeekday)||!Ht(r.localWeekNumber)||!Ht(r.localWeekYear)){if(!Ht(r.weekday)||!Ht(r.weekNumber)||!Ht(r.weekYear))throw new oc("Cannot mix locale-based week fields with ISO-based week fields");return Ht(r.localWeekday)||(r.weekday=r.localWeekday),Ht(r.localWeekNumber)||(r.weekNumber=r.localWeekNumber),Ht(r.localWeekYear)||(r.weekYear=r.localWeekYear),delete r.localWeekday,delete r.localWeekNumber,delete r.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function fN(r,e=4,t=1){const n=Yh(r.weekYear),i=Qi(r.weekNumber,1,hd(r.weekYear,e,t)),o=Qi(r.weekday,1,7);return n?i?o?!1:Xi("weekday",r.weekday):Xi("week",r.weekNumber):Xi("weekYear",r.weekYear)}function mN(r){const e=Yh(r.year),t=Qi(r.ordinal,1,fc(r.year));return e?t?!1:Xi("ordinal",r.ordinal):Xi("year",r.year)}function ry(r){const e=Yh(r.year),t=Qi(r.month,1,12),n=Qi(r.day,1,qh(r.year,r.month));return e?t?n?!1:Xi("day",r.day):Xi("month",r.month):Xi("year",r.year)}function ny(r){const{hour:e,minute:t,second:n,millisecond:i}=r,o=Qi(e,0,23)||e===24&&t===0&&n===0&&i===0,l=Qi(t,0,59),d=Qi(n,0,59),h=Qi(i,0,999);return o?l?d?h?!1:Xi("millisecond",i):Xi("second",n):Xi("minute",t):Xi("hour",e)}function Ht(r){return typeof r>"u"}function jl(r){return typeof r=="number"}function Yh(r){return typeof r=="number"&&r%1===0}function pN(r){return typeof r=="string"}function gN(r){return Object.prototype.toString.call(r)==="[object Date]"}function sy(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function iy(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function vN(r){return Array.isArray(r)?r:[r]}function Y1(r,e,t){if(r.length!==0)return r.reduce((n,i)=>{const o=[e(i),i];return n&&t(n[0],o[0])===n[0]?n:o},null)[1]}function yN(r,e){return e.reduce((t,n)=>(t[n]=r[n],t),{})}function gc(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function um(r){if(r==null)return null;if(typeof r!="object")throw new Us("Week settings must be an object");if(!Qi(r.firstDay,1,7)||!Qi(r.minimalDays,1,7)||!Array.isArray(r.weekend)||r.weekend.some(e=>!Qi(e,1,7)))throw new Us("Invalid week settings");return{firstDay:r.firstDay,minimalDays:r.minimalDays,weekend:Array.from(r.weekend)}}function Qi(r,e,t){return Yh(r)&&r>=e&&r<=t}function xN(r,e){return r-e*Math.floor(r/e)}function Un(r,e=2){const t=r<0;let n;return t?n="-"+(""+-r).padStart(e,"0"):n=(""+r).padStart(e,"0"),n}function wl(r){if(!(Ht(r)||r===null||r===""))return parseInt(r,10)}function Ql(r){if(!(Ht(r)||r===null||r===""))return parseFloat(r)}function Cm(r){if(!(Ht(r)||r===null||r==="")){const e=parseFloat("0."+r)*1e3;return Math.floor(e)}}function Em(r,e,t="round"){const n=10**e;switch(t){case"expand":return r>0?Math.ceil(r*n)/n:Math.floor(r*n)/n;case"trunc":return Math.trunc(r*n)/n;case"round":return Math.round(r*n)/n;case"floor":return Math.floor(r*n)/n;case"ceil":return Math.ceil(r*n)/n;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function vd(r){return r%4===0&&(r%100!==0||r%400===0)}function fc(r){return vd(r)?366:365}function qh(r,e){const t=xN(e-1,12)+1,n=r+(e-t)/12;return t===2?vd(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Kh(r){let e=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(e=new Date(e),e.setUTCFullYear(r.year,r.month-1,r.day)),+e}function K1(r,e,t){return-Am(jm(r,1,e),t)+e-1}function hd(r,e=4,t=1){const n=K1(r,e,t),i=K1(r+1,e,t);return(fc(r)-n+i)/7}function cm(r){return r>99?r:r>Sn.twoDigitCutoffYear?1900+r:2e3+r}function ay(r,e,t,n=null){const i=new Date(r),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);const l={timeZoneName:e,...o},d=new Intl.DateTimeFormat(t,l).formatToParts(i).find(h=>h.type.toLowerCase()==="timezonename");return d?d.value:null}function Jh(r,e){let t=parseInt(r,10);Number.isNaN(t)&&(t=0);const n=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-n:n;return t*60+i}function oy(r){const e=Number(r);if(typeof r=="boolean"||r===""||!Number.isFinite(e))throw new Us(`Invalid unit value ${r}`);return e}function zh(r,e){const t={};for(const n in r)if(gc(r,n)){const i=r[n];if(i==null)continue;t[e(n)]=oy(i)}return t}function od(r,e){const t=Math.trunc(Math.abs(r/60)),n=Math.trunc(Math.abs(r%60)),i=r>=0?"+":"-";switch(e){case"short":return`${i}${Un(t,2)}:${Un(n,2)}`;case"narrow":return`${i}${t}${n>0?`:${n}`:""}`;case"techie":return`${i}${Un(t,2)}${Un(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Zh(r){return yN(r,["hour","minute","second","millisecond"])}const bN=["January","February","March","April","May","June","July","August","September","October","November","December"],ly=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wN=["J","F","M","A","M","J","J","A","S","O","N","D"];function uy(r){switch(r){case"narrow":return[...wN];case"short":return[...ly];case"long":return[...bN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const cy=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dy=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_N=["M","T","W","T","F","S","S"];function hy(r){switch(r){case"narrow":return[..._N];case"short":return[...dy];case"long":return[...cy];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const fy=["AM","PM"],NN=["Before Christ","Anno Domini"],kN=["BC","AD"],SN=["B","A"];function my(r){switch(r){case"narrow":return[...SN];case"short":return[...kN];case"long":return[...NN];default:return null}}function jN(r){return fy[r.hour<12?0:1]}function AN(r,e){return hy(e)[r.weekday-1]}function CN(r,e){return uy(e)[r.month-1]}function EN(r,e){return my(e)[r.year<0?0:1]}function PN(r,e,t="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(r)===-1;if(t==="auto"&&o){const w=r==="days";switch(e){case 1:return w?"tomorrow":`next ${i[r][0]}`;case-1:return w?"yesterday":`last ${i[r][0]}`;case 0:return w?"today":`this ${i[r][0]}`}}const l=Object.is(e,-0)||e<0,d=Math.abs(e),h=d===1,m=i[r],v=n?h?m[1]:m[2]||m[1]:h?i[r][0]:r;return l?`${d} ${v} ago`:`in ${d} ${v}`}function J1(r,e){let t="";for(const n of r)n.literal?t+=n.val:t+=e(n.val);return t}const LN={D:Uh,DD:Lv,DDD:Tv,DDDD:Ov,t:Iv,tt:Dv,ttt:Fv,tttt:Mv,T:Rv,TT:Uv,TTT:Bv,TTTT:qv,f:zv,ff:Wv,fff:Hv,ffff:Yv,F:$v,FF:Vv,FFF:Gv,FFFF:Kv};class Bs{static create(e,t={}){return new Bs(e,t)}static parseFormat(e){let t=null,n="",i=!1;const o=[];for(let l=0;l<e.length;l++){const d=e.charAt(l);d==="'"?((n.length>0||i)&&o.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),t=null,n="",i=!i):i||d===t?n+=d:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=d,t=d)}return n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return LN[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,n=void 0){if(this.opts.forceSimple)return Un(e,t);const i={...this.opts};return t>0&&(i.padTo=t),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(x,T)=>this.loc.extract(e,x,T),l=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",d=()=>n?jN(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),h=(x,T)=>n?CN(e,x):o(T?{month:x}:{month:x,day:"numeric"},"month"),m=(x,T)=>n?AN(e,x):o(T?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),v=x=>{const T=Bs.macroTokenToFormatOpts(x);return T?this.formatWithSystemDefault(e,T):x},w=x=>n?EN(e,x):o({era:x},"era"),k=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return l({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return l({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return l({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return d();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return m("short",!0);case"cccc":return m("long",!0);case"ccccc":return m("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return m("short",!1);case"EEEE":return m("long",!1);case"EEEEE":return m("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return h("short",!0);case"LLLL":return h("long",!0);case"LLLLL":return h("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return h("short",!1);case"MMMM":return h("long",!1);case"MMMMM":return h("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return w("short");case"GG":return w("long");case"GGGGG":return w("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return v(x)}};return J1(Bs.parseFormat(t),k)}formatDurationFromString(e,t){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=v=>{switch(v[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},o=(v,w)=>k=>{const x=i(k);if(x){const T=w.isNegativeDuration&&x!==w.largestUnit?n:1;let C;return this.opts.signMode==="negativeLargestOnly"&&x!==w.largestUnit?C="never":this.opts.signMode==="all"?C="always":C="auto",this.num(v.get(x)*T,k.length,C)}else return k},l=Bs.parseFormat(t),d=l.reduce((v,{literal:w,val:k})=>w?v:v.concat(k),[]),h=e.shiftTo(...d.map(i).filter(v=>v)),m={isNegativeDuration:h<0,largestUnit:Object.keys(h.values)[0]};return J1(l,o(h,m))}}const py=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function xc(...r){const e=r.reduce((t,n)=>t+n.source,"");return RegExp(`^${e}$`)}function bc(...r){return e=>r.reduce(([t,n,i],o)=>{const[l,d,h]=o(e,i);return[{...t,...l},d||n,h]},[{},null,1]).slice(0,2)}function wc(r,...e){if(r==null)return[null,null];for(const[t,n]of e){const i=t.exec(r);if(i)return n(i)}return[null,null]}function gy(...r){return(e,t)=>{const n={};let i;for(i=0;i<r.length;i++)n[r[i]]=wl(e[t+i]);return[n,null,t+i]}}const vy=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,TN=`(?:${vy.source}?(?:\\[(${py.source})\\])?)?`,Pm=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,yy=RegExp(`${Pm.source}${TN}`),Lm=RegExp(`(?:[Tt]${yy.source})?`),ON=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,IN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,DN=/(\d{4})-?(\d{3})/,FN=gy("weekYear","weekNumber","weekDay"),MN=gy("year","ordinal"),RN=/(\d{4})-(\d\d)-(\d\d)/,xy=RegExp(`${Pm.source} ?(?:${vy.source}|(${py.source}))?`),UN=RegExp(`(?: ${xy.source})?`);function mc(r,e,t){const n=r[e];return Ht(n)?t:wl(n)}function BN(r,e){return[{year:mc(r,e),month:mc(r,e+1,1),day:mc(r,e+2,1)},null,e+3]}function _c(r,e){return[{hours:mc(r,e,0),minutes:mc(r,e+1,0),seconds:mc(r,e+2,0),milliseconds:Cm(r[e+3])},null,e+4]}function yd(r,e){const t=!r[e]&&!r[e+1],n=Jh(r[e+1],r[e+2]),i=t?null:Js.instance(n);return[{},i,e+3]}function xd(r,e){const t=r[e]?Uo.create(r[e]):null;return[{},t,e+1]}const qN=RegExp(`^T?${Pm.source}$`),zN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function $N(r){const[e,t,n,i,o,l,d,h,m]=r,v=e[0]==="-",w=h&&h[0]==="-",k=(x,T=!1)=>x!==void 0&&(T||x&&v)?-x:x;return[{years:k(Ql(t)),months:k(Ql(n)),weeks:k(Ql(i)),days:k(Ql(o)),hours:k(Ql(l)),minutes:k(Ql(d)),seconds:k(Ql(h),h==="-0"),milliseconds:k(Cm(m),w)}]}const WN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Tm(r,e,t,n,i,o,l){const d={year:e.length===2?cm(wl(e)):wl(e),month:ly.indexOf(t)+1,day:wl(n),hour:wl(i),minute:wl(o)};return l&&(d.second=wl(l)),r&&(d.weekday=r.length>3?cy.indexOf(r)+1:dy.indexOf(r)+1),d}const VN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function HN(r){const[,e,t,n,i,o,l,d,h,m,v,w]=r,k=Tm(e,i,n,t,o,l,d);let x;return h?x=WN[h]:m?x=0:x=Jh(v,w),[k,new Js(x)]}function GN(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const YN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,KN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,JN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Z1(r){const[,e,t,n,i,o,l,d]=r;return[Tm(e,i,n,t,o,l,d),Js.utcInstance]}function ZN(r){const[,e,t,n,i,o,l,d]=r;return[Tm(e,d,t,n,i,o,l),Js.utcInstance]}const XN=xc(ON,Lm),QN=xc(IN,Lm),ek=xc(DN,Lm),tk=xc(yy),by=bc(BN,_c,yd,xd),rk=bc(FN,_c,yd,xd),nk=bc(MN,_c,yd,xd),sk=bc(_c,yd,xd);function ik(r){return wc(r,[XN,by],[QN,rk],[ek,nk],[tk,sk])}function ak(r){return wc(GN(r),[VN,HN])}function ok(r){return wc(r,[YN,Z1],[KN,Z1],[JN,ZN])}function lk(r){return wc(r,[zN,$N])}const uk=bc(_c);function ck(r){return wc(r,[qN,uk])}const dk=xc(RN,UN),hk=xc(xy),fk=bc(_c,yd,xd);function mk(r){return wc(r,[dk,by],[hk,fk])}const X1="Invalid Duration",wy={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},pk={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...wy},Ji=146097/400,Qu=146097/4800,gk={years:{quarters:4,months:12,weeks:Ji/7,days:Ji,hours:Ji*24,minutes:Ji*24*60,seconds:Ji*24*60*60,milliseconds:Ji*24*60*60*1e3},quarters:{months:3,weeks:Ji/28,days:Ji/4,hours:Ji*24/4,minutes:Ji*24*60/4,seconds:Ji*24*60*60/4,milliseconds:Ji*24*60*60*1e3/4},months:{weeks:Qu/7,days:Qu,hours:Qu*24,minutes:Qu*24*60,seconds:Qu*24*60*60,milliseconds:Qu*24*60*60*1e3},...wy},lu=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],vk=lu.slice(0).reverse();function Fo(r,e,t=!1){const n={values:t?e.values:{...r.values,...e.values||{}},loc:r.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||r.conversionAccuracy,matrix:e.matrix||r.matrix};return new xr(n)}function _y(r,e){let t=e.milliseconds??0;for(const n of vk.slice(1))e[n]&&(t+=e[n]*r[n].milliseconds);return t}function Q1(r,e){const t=_y(r,e)<0?-1:1;lu.reduceRight((n,i)=>{if(Ht(e[i]))return n;if(n){const o=e[n]*t,l=r[i][n],d=Math.floor(o/l);e[i]+=d*t,e[n]-=d*l*t}return i},null),lu.reduce((n,i)=>{if(Ht(e[i]))return n;if(n){const o=e[n]%1;e[n]-=o,e[i]+=o*r[n][i]}return i},null)}function e2(r){const e={};for(const[t,n]of Object.entries(r))n!==0&&(e[t]=n);return e}class xr{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let n=t?gk:pk;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Lr.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return xr.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Us(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new xr({values:zh(e,xr.normalizeUnit),loc:Lr.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(jl(e))return xr.fromMillis(e);if(xr.isDuration(e))return e;if(typeof e=="object")return xr.fromObject(e);throw new Us(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=lk(e);return n?xr.fromObject(n,t):xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=ck(e);return n?xr.fromObject(n,t):xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Us("need to specify a reason the Duration is invalid");const n=e instanceof La?e:new La(e,t);if(Sn.throwOnInvalid)throw new $3(n);return new xr({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Pv(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Bs.create(this.loc,n).formatDurationFromString(this,e):X1}toHuman(e={}){if(!this.isValid)return X1;const t=e.showZeros!==!1,n=lu.map(i=>{const o=this.values[i];return Ht(o)||o===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(o)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Em(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Jt.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?_y(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=xr.fromDurationLike(e),n={};for(const i of lu)(gc(t.values,i)||gc(this.values,i))&&(n[i]=t.get(i)+this.get(i));return Fo(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=xr.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=oy(e(this.values[n],n));return Fo(this,{values:t},!0)}get(e){return this[xr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...zh(e,xr.normalizeUnit)};return Fo(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){const l={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:n};return Fo(this,l)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Q1(this.matrix,e),Fo(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=e2(this.normalize().shiftToAll().toObject());return Fo(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(l=>xr.normalizeUnit(l));const t={},n={},i=this.toObject();let o;for(const l of lu)if(e.indexOf(l)>=0){o=l;let d=0;for(const m in n)d+=this.matrix[m][l]*n[m],n[m]=0;jl(i[l])&&(d+=i[l]);const h=Math.trunc(d);t[l]=h,n[l]=(d*1e3-h*1e3)/1e3}else jl(i[l])&&(n[l]=i[l]);for(const l in n)n[l]!==0&&(t[o]+=l===o?n[l]:n[l]/this.matrix[o][l]);return Q1(this.matrix,t),Fo(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Fo(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=e2(this.values);return Fo(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of lu)if(!t(this.values[n],e.values[n]))return!1;return!0}}const ec="Invalid Interval";function yk(r,e){return!r||!r.isValid?Nn.invalid("missing or invalid start"):!e||!e.isValid?Nn.invalid("missing or invalid end"):e<r?Nn.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${e.toISO()}`):null}class Nn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Us("need to specify a reason the Interval is invalid");const n=e instanceof La?e:new La(e,t);if(Sn.throwOnInvalid)throw new z3(n);return new Nn({invalid:n})}static fromDateTimes(e,t){const n=Zc(e),i=Zc(t),o=yk(n,i);return o??new Nn({start:n,end:i})}static after(e,t){const n=xr.fromDurationLike(t),i=Zc(e);return Nn.fromDateTimes(i,i.plus(n))}static before(e,t){const n=xr.fromDurationLike(t),i=Zc(e);return Nn.fromDateTimes(i.minus(n),i)}static fromISO(e,t){const[n,i]=(e||"").split("/",2);if(n&&i){let o,l;try{o=Jt.fromISO(n,t),l=o.isValid}catch{l=!1}let d,h;try{d=Jt.fromISO(i,t),h=d.isValid}catch{h=!1}if(l&&h)return Nn.fromDateTimes(o,d);if(l){const m=xr.fromISO(i,t);if(m.isValid)return Nn.after(o,m)}else if(h){const m=xr.fromISO(n,t);if(m.isValid)return Nn.before(d,m)}}return Nn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let i;return t?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(e,t),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Nn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Zc).filter(l=>this.contains(l)).sort((l,d)=>l.toMillis()-d.toMillis()),n=[];let{s:i}=this,o=0;for(;i<this.e;){const l=t[o]||this.e,d=+l>+this.e?this.e:l;n.push(Nn.fromDateTimes(i,d)),i=d,o+=1}return n}splitBy(e){const t=xr.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,i=1,o;const l=[];for(;n<this.e;){const d=this.start.plus(t.mapUnits(h=>h*i));o=+d>+this.e?this.e:d,l.push(Nn.fromDateTimes(n,o)),n=o,i+=1}return l}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:Nn.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Nn.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],l)=>o?o.overlaps(l)||o.abutsStart(l)?[i,o.union(l)]:[i.concat([o]),l]:[i,l],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const i=[],o=e.map(h=>[{time:h.s,type:"s"},{time:h.e,type:"e"}]),l=Array.prototype.concat(...o),d=l.sort((h,m)=>h.time-m.time);for(const h of d)n+=h.type==="s"?1:-1,n===1?t=h.time:(t&&+t!=+h.time&&i.push(Nn.fromDateTimes(t,h.time)),t=null);return Nn.merge(i)}difference(...e){return Nn.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ec}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Uh,t={}){return this.isValid?Bs.create(this.s.loc.clone(t),e).formatInterval(this):ec}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ec}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ec}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ec}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:ec}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):xr.invalid(this.invalidReason)}mapEndpoints(e){return Nn.fromDateTimes(e(this.s),e(this.e))}}class gh{static hasDST(e=Sn.defaultZone){const t=Jt.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Uo.isValidZone(e)}static normalizeZone(e){return Nl(e,Sn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Lr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Lr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Lr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Lr.create(t,n,o)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Lr.create(t,n,o)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Lr.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Lr.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Lr.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Lr.create(t,null,"gregory").eras(e)}static features(){return{relative:sy(),localeWeek:iy()}}}function t2(r,e){const t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(r);return Math.floor(xr.fromMillis(n).as("days"))}function xk(r,e,t){const n=[["years",(h,m)=>m.year-h.year],["quarters",(h,m)=>m.quarter-h.quarter+(m.year-h.year)*4],["months",(h,m)=>m.month-h.month+(m.year-h.year)*12],["weeks",(h,m)=>{const v=t2(h,m);return(v-v%7)/7}],["days",t2]],i={},o=r;let l,d;for(const[h,m]of n)t.indexOf(h)>=0&&(l=h,i[h]=m(r,e),d=o.plus(i),d>e?(i[h]--,r=o.plus(i),r>e&&(d=r,i[h]--,r=o.plus(i))):r=d);return[r,i,d,l]}function bk(r,e,t,n){let[i,o,l,d]=xk(r,e,t);const h=e-i,m=t.filter(w=>["hours","minutes","seconds","milliseconds"].indexOf(w)>=0);m.length===0&&(l<e&&(l=i.plus({[d]:1})),l!==i&&(o[d]=(o[d]||0)+h/(l-i)));const v=xr.fromObject(o,n);return m.length>0?xr.fromMillis(h,n).shiftTo(...m).plus(v):v}const wk="missing Intl.DateTimeFormat.formatToParts support";function Sr(r,e=t=>t){return{regex:r,deser:([t])=>e(dN(t))}}const _k="",Ny=`[ ${_k}]`,ky=new RegExp(Ny,"g");function Nk(r){return r.replace(/\./g,"\\.?").replace(ky,Ny)}function r2(r){return r.replace(/\./g,"").replace(ky," ").toLowerCase()}function Ca(r,e){return r===null?null:{regex:RegExp(r.map(Nk).join("|")),deser:([t])=>r.findIndex(n=>r2(t)===r2(n))+e}}function n2(r,e){return{regex:r,deser:([,t,n])=>Jh(t,n),groups:e}}function vh(r){return{regex:r,deser:([e])=>e}}function kk(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Sk(r,e){const t=Aa(e),n=Aa(e,"{2}"),i=Aa(e,"{3}"),o=Aa(e,"{4}"),l=Aa(e,"{6}"),d=Aa(e,"{1,2}"),h=Aa(e,"{1,3}"),m=Aa(e,"{1,6}"),v=Aa(e,"{1,9}"),w=Aa(e,"{2,4}"),k=Aa(e,"{4,6}"),x=E=>({regex:RegExp(kk(E.val)),deser:([j])=>j,literal:!0}),C=(E=>{if(r.literal)return x(E);switch(E.val){case"G":return Ca(e.eras("short"),0);case"GG":return Ca(e.eras("long"),0);case"y":return Sr(m);case"yy":return Sr(w,cm);case"yyyy":return Sr(o);case"yyyyy":return Sr(k);case"yyyyyy":return Sr(l);case"M":return Sr(d);case"MM":return Sr(n);case"MMM":return Ca(e.months("short",!0),1);case"MMMM":return Ca(e.months("long",!0),1);case"L":return Sr(d);case"LL":return Sr(n);case"LLL":return Ca(e.months("short",!1),1);case"LLLL":return Ca(e.months("long",!1),1);case"d":return Sr(d);case"dd":return Sr(n);case"o":return Sr(h);case"ooo":return Sr(i);case"HH":return Sr(n);case"H":return Sr(d);case"hh":return Sr(n);case"h":return Sr(d);case"mm":return Sr(n);case"m":return Sr(d);case"q":return Sr(d);case"qq":return Sr(n);case"s":return Sr(d);case"ss":return Sr(n);case"S":return Sr(h);case"SSS":return Sr(i);case"u":return vh(v);case"uu":return vh(d);case"uuu":return Sr(t);case"a":return Ca(e.meridiems(),0);case"kkkk":return Sr(o);case"kk":return Sr(w,cm);case"W":return Sr(d);case"WW":return Sr(n);case"E":case"c":return Sr(t);case"EEE":return Ca(e.weekdays("short",!1),1);case"EEEE":return Ca(e.weekdays("long",!1),1);case"ccc":return Ca(e.weekdays("short",!0),1);case"cccc":return Ca(e.weekdays("long",!0),1);case"Z":case"ZZ":return n2(new RegExp(`([+-]${d.source})(?::(${n.source}))?`),2);case"ZZZ":return n2(new RegExp(`([+-]${d.source})(${n.source})?`),2);case"z":return vh(/[a-z_+-/]{1,256}?/i);case" ":return vh(/[^\S\n\r]/);default:return x(E)}})(r)||{invalidReason:wk};return C.token=r,C}const jk={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Ak(r,e,t){const{type:n,value:i}=r;if(n==="literal"){const h=/^\s+$/.test(i);return{literal:!h,val:h?" ":i}}const o=e[n];let l=n;n==="hour"&&(e.hour12!=null?l=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?l="hour12":l="hour24":l=t.hour12?"hour12":"hour24");let d=jk[l];if(typeof d=="object"&&(d=d[o]),d)return{literal:!1,val:d}}function Ck(r){return[`^${r.map(t=>t.regex).reduce((t,n)=>`${t}(${n.source})`,"")}$`,r]}function Ek(r,e,t){const n=r.match(e);if(n){const i={};let o=1;for(const l in t)if(gc(t,l)){const d=t[l],h=d.groups?d.groups+1:1;!d.literal&&d.token&&(i[d.token.val[0]]=d.deser(n.slice(o,o+h))),o+=h}return[n,i]}else return[n,{}]}function Pk(r){const e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,n;return Ht(r.z)||(t=Uo.create(r.z)),Ht(r.Z)||(t||(t=new Js(r.Z)),n=r.Z),Ht(r.q)||(r.M=(r.q-1)*3+1),Ht(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),Ht(r.u)||(r.S=Cm(r.u)),[Object.keys(r).reduce((o,l)=>{const d=e(l);return d&&(o[d]=r[l]),o},{}),t,n]}let k0=null;function Lk(){return k0||(k0=Jt.fromMillis(1555555555555)),k0}function Tk(r,e){if(r.literal)return r;const t=Bs.macroTokenToFormatOpts(r.val),n=Cy(t,e);return n==null||n.includes(void 0)?r:n}function Sy(r,e){return Array.prototype.concat(...r.map(t=>Tk(t,e)))}class jy{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Sy(Bs.parseFormat(t),e),this.units=this.tokens.map(n=>Sk(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=Ck(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[t,n]=Ek(e,this.regex,this.handlers),[i,o,l]=n?Pk(n):[null,null,void 0];if(gc(n,"a")&&gc(n,"H"))throw new oc("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:i,zone:o,specificOffset:l}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Ay(r,e,t){return new jy(r,t).explainFromTokens(e)}function Ok(r,e,t){const{result:n,zone:i,specificOffset:o,invalidReason:l}=Ay(r,e,t);return[n,i,o,l]}function Cy(r,e){if(!r)return null;const n=Bs.create(e,r).dtFormatter(Lk()),i=n.formatToParts(),o=n.resolvedOptions();return i.map(l=>Ak(l,r,o))}const S0="Invalid DateTime",s2=864e13;function ed(r){return new La("unsupported zone",`the zone "${r.name}" is not supported`)}function j0(r){return r.weekData===null&&(r.weekData=Bh(r.c)),r.weekData}function A0(r){return r.localWeekData===null&&(r.localWeekData=Bh(r.c,r.loc.getMinDaysInFirstWeek(),r.loc.getStartOfWeek())),r.localWeekData}function eu(r,e){const t={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new Jt({...t,...e,old:t})}function Ey(r,e,t){let n=r-e*60*1e3;const i=t.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;const o=t.offset(n);return i===o?[n,i]:[r-Math.min(i,o)*60*1e3,Math.max(i,o)]}function yh(r,e){r+=e*60*1e3;const t=new Date(r);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Ah(r,e,t){return Ey(Kh(r),e,t)}function i2(r,e){const t=r.o,n=r.c.year+Math.trunc(e.years),i=r.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...r.c,year:n,month:i,day:Math.min(r.c.day,qh(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},l=xr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),d=Kh(o);let[h,m]=Ey(d,t,r.zone);return l!==0&&(h+=l,m=r.zone.offset(h)),{ts:h,o:m}}function tc(r,e,t,n,i,o){const{setZone:l,zone:d}=t;if(r&&Object.keys(r).length!==0||e){const h=e||d,m=Jt.fromObject(r,{...t,zone:h,specificOffset:o});return l?m:m.setZone(d)}else return Jt.invalid(new La("unparsable",`the input "${i}" can't be parsed as ${n}`))}function xh(r,e,t=!0){return r.isValid?Bs.create(Lr.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(r,e):null}function C0(r,e,t){const n=r.c.year>9999||r.c.year<0;let i="";if(n&&r.c.year>=0&&(i+="+"),i+=Un(r.c.year,n?6:4),t==="year")return i;if(e){if(i+="-",i+=Un(r.c.month),t==="month")return i;i+="-"}else if(i+=Un(r.c.month),t==="month")return i;return i+=Un(r.c.day),i}function a2(r,e,t,n,i,o,l){let d=!t||r.c.millisecond!==0||r.c.second!==0,h="";switch(l){case"day":case"month":case"year":break;default:if(h+=Un(r.c.hour),l==="hour")break;if(e){if(h+=":",h+=Un(r.c.minute),l==="minute")break;d&&(h+=":",h+=Un(r.c.second))}else{if(h+=Un(r.c.minute),l==="minute")break;d&&(h+=Un(r.c.second))}if(l==="second")break;d&&(!n||r.c.millisecond!==0)&&(h+=".",h+=Un(r.c.millisecond,3))}return i&&(r.isOffsetFixed&&r.offset===0&&!o?h+="Z":r.o<0?(h+="-",h+=Un(Math.trunc(-r.o/60)),h+=":",h+=Un(Math.trunc(-r.o%60))):(h+="+",h+=Un(Math.trunc(r.o/60)),h+=":",h+=Un(Math.trunc(r.o%60)))),o&&(h+="["+r.zone.ianaName+"]"),h}const Py={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ik={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Dk={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ch=["year","month","day","hour","minute","second","millisecond"],Fk=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Mk=["year","ordinal","hour","minute","second","millisecond"];function Eh(r){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!e)throw new Pv(r);return e}function o2(r){switch(r.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Eh(r)}}function Rk(r){if(td===void 0&&(td=Sn.now()),r.type!=="iana")return r.offset(td);const e=r.name;let t=dm.get(e);return t===void 0&&(t=r.offset(td),dm.set(e,t)),t}function l2(r,e){const t=Nl(e.zone,Sn.defaultZone);if(!t.isValid)return Jt.invalid(ed(t));const n=Lr.fromObject(e);let i,o;if(Ht(r.year))i=Sn.now();else{for(const h of Ch)Ht(r[h])&&(r[h]=Py[h]);const l=ry(r)||ny(r);if(l)return Jt.invalid(l);const d=Rk(t);[i,o]=Ah(r,d,t)}return new Jt({ts:i,zone:t,loc:n,o})}function u2(r,e,t){const n=Ht(t.round)?!0:t.round,i=Ht(t.rounding)?"trunc":t.rounding,o=(d,h)=>(d=Em(d,n||t.calendary?0:2,t.calendary?"round":i),e.loc.clone(t).relFormatter(t).format(d,h)),l=d=>t.calendary?e.hasSame(r,d)?0:e.startOf(d).diff(r.startOf(d),d).get(d):e.diff(r,d).get(d);if(t.unit)return o(l(t.unit),t.unit);for(const d of t.units){const h=l(d);if(Math.abs(h)>=1)return o(h,d)}return o(r>e?-0:0,t.units[t.units.length-1])}function c2(r){let e={},t;return r.length>0&&typeof r[r.length-1]=="object"?(e=r[r.length-1],t=Array.from(r).slice(0,r.length-1)):t=Array.from(r),[e,t]}let td;const dm=new Map;class Jt{constructor(e){const t=e.zone||Sn.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new La("invalid input"):null)||(t.isValid?null:ed(t));this.ts=Ht(e.ts)?Sn.now():e.ts;let i=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,o]=[e.old.c,e.old.o];else{const d=jl(e.o)&&!e.old?e.o:t.offset(this.ts);i=yh(this.ts,d),n=Number.isNaN(i.year)?new La("invalid input"):null,i=n?null:i,o=n?null:d}this._zone=t,this.loc=e.loc||Lr.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new Jt({})}static local(){const[e,t]=c2(arguments),[n,i,o,l,d,h,m]=t;return l2({year:n,month:i,day:o,hour:l,minute:d,second:h,millisecond:m},e)}static utc(){const[e,t]=c2(arguments),[n,i,o,l,d,h,m]=t;return e.zone=Js.utcInstance,l2({year:n,month:i,day:o,hour:l,minute:d,second:h,millisecond:m},e)}static fromJSDate(e,t={}){const n=gN(e)?e.valueOf():NaN;if(Number.isNaN(n))return Jt.invalid("invalid input");const i=Nl(t.zone,Sn.defaultZone);return i.isValid?new Jt({ts:n,zone:i,loc:Lr.fromObject(t)}):Jt.invalid(ed(i))}static fromMillis(e,t={}){if(jl(e))return e<-s2||e>s2?Jt.invalid("Timestamp out of range"):new Jt({ts:e,zone:Nl(t.zone,Sn.defaultZone),loc:Lr.fromObject(t)});throw new Us(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(jl(e))return new Jt({ts:e*1e3,zone:Nl(t.zone,Sn.defaultZone),loc:Lr.fromObject(t)});throw new Us("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=Nl(t.zone,Sn.defaultZone);if(!n.isValid)return Jt.invalid(ed(n));const i=Lr.fromObject(t),o=zh(e,o2),{minDaysInFirstWeek:l,startOfWeek:d}=G1(o,i),h=Sn.now(),m=Ht(t.specificOffset)?n.offset(h):t.specificOffset,v=!Ht(o.ordinal),w=!Ht(o.year),k=!Ht(o.month)||!Ht(o.day),x=w||k,T=o.weekYear||o.weekNumber;if((x||v)&&T)throw new oc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(k&&v)throw new oc("Can't mix ordinal dates with month/day");const C=T||o.weekday&&!x;let E,j,K=yh(h,m);C?(E=Fk,j=Ik,K=Bh(K,l,d)):v?(E=Mk,j=Dk,K=N0(K)):(E=Ch,j=Py);let B=!1;for(const W of E){const O=o[W];Ht(O)?B?o[W]=j[W]:o[W]=K[W]:B=!0}const $=C?fN(o,l,d):v?mN(o):ry(o),le=$||ny(o);if(le)return Jt.invalid(le);const me=C?V1(o,l,d):v?H1(o):o,[U,z]=Ah(me,m,n),I=new Jt({ts:U,zone:n,o:z,loc:i});return o.weekday&&x&&e.weekday!==I.weekday?Jt.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${I.toISO()}`):I.isValid?I:Jt.invalid(I.invalid)}static fromISO(e,t={}){const[n,i]=ik(e);return tc(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,i]=ak(e);return tc(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,i]=ok(e);return tc(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(Ht(e)||Ht(t))throw new Us("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=n,l=Lr.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[d,h,m,v]=Ok(l,e,t);return v?Jt.invalid(v):tc(d,h,n,`format ${t}`,e,m)}static fromString(e,t,n={}){return Jt.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,i]=mk(e);return tc(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Us("need to specify a reason the DateTime is invalid");const n=e instanceof La?e:new La(e,t);if(Sn.throwOnInvalid)throw new q3(n);return new Jt({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=Cy(e,Lr.fromObject(t));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return Sy(Bs.parseFormat(e),Lr.fromObject(t)).map(i=>i.val).join("")}static resetCache(){td=void 0,dm.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?j0(this).weekYear:NaN}get weekNumber(){return this.isValid?j0(this).weekNumber:NaN}get weekday(){return this.isValid?j0(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?A0(this).weekday:NaN}get localWeekNumber(){return this.isValid?A0(this).weekNumber:NaN}get localWeekYear(){return this.isValid?A0(this).weekYear:NaN}get ordinal(){return this.isValid?N0(this.c).ordinal:NaN}get monthShort(){return this.isValid?gh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?gh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?gh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?gh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Kh(this.c),i=this.zone.offset(n-e),o=this.zone.offset(n+e),l=this.zone.offset(n-i*t),d=this.zone.offset(n-o*t);if(l===d)return[this];const h=n-l*t,m=n-d*t,v=yh(h,l),w=yh(m,d);return v.hour===w.hour&&v.minute===w.minute&&v.second===w.second&&v.millisecond===w.millisecond?[eu(this,{ts:h}),eu(this,{ts:m})]:[this]}get isInLeapYear(){return vd(this.year)}get daysInMonth(){return qh(this.year,this.month)}get daysInYear(){return this.isValid?fc(this.year):NaN}get weeksInWeekYear(){return this.isValid?hd(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?hd(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:i}=Bs.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(Js.instance(e),t)}toLocal(){return this.setZone(Sn.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=Nl(e,Sn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){const o=e.offset(this.ts),l=this.toObject();[i]=Ah(l,o,e)}return eu(this,{ts:i,zone:e})}else return Jt.invalid(ed(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return eu(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=zh(e,o2),{minDaysInFirstWeek:n,startOfWeek:i}=G1(t,this.loc),o=!Ht(t.weekYear)||!Ht(t.weekNumber)||!Ht(t.weekday),l=!Ht(t.ordinal),d=!Ht(t.year),h=!Ht(t.month)||!Ht(t.day),m=d||h,v=t.weekYear||t.weekNumber;if((m||l)&&v)throw new oc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&l)throw new oc("Can't mix ordinal dates with month/day");let w;o?w=V1({...Bh(this.c,n,i),...t},n,i):Ht(t.ordinal)?(w={...this.toObject(),...t},Ht(t.day)&&(w.day=Math.min(qh(w.year,w.month),w.day))):w=H1({...N0(this.c),...t});const[k,x]=Ah(w,this.o,this.zone);return eu(this,{ts:k,o:x})}plus(e){if(!this.isValid)return this;const t=xr.fromDurationLike(e);return eu(this,i2(this,t))}minus(e){if(!this.isValid)return this;const t=xr.fromDurationLike(e).negate();return eu(this,i2(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},i=xr.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(t){const o=this.loc.getStartOfWeek(),{weekday:l}=this;l<o&&(n.weekNumber=this.weekNumber-1),n.weekday=o}else n.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);n.month=(o-1)*3+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Bs.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):S0}toLocaleString(e=Uh,t={}){return this.isValid?Bs.create(this.loc.clone(t),e).formatDateTime(this):S0}toLocaleParts(e={}){return this.isValid?Bs.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:o=!1,precision:l="milliseconds"}={}){if(!this.isValid)return null;l=Eh(l);const d=e==="extended";let h=C0(this,d,l);return Ch.indexOf(l)>=3&&(h+="T"),h+=a2(this,d,t,n,i,o,l),h}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?C0(this,e==="extended",Eh(t)):null}toISOWeekDate(){return xh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:o=!1,format:l="extended",precision:d="milliseconds"}={}){return this.isValid?(d=Eh(d),(i&&Ch.indexOf(d)>=3?"T":"")+a2(this,l==="extended",t,e,n,o,d)):null}toRFC2822(){return xh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return xh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?C0(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),xh(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():S0}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return xr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=vN(t).map(xr.normalizeUnit),l=e.valueOf()>this.valueOf(),d=l?this:e,h=l?e:this,m=bk(d,h,o,i);return l?m.negate():m}diffNow(e="milliseconds",t={}){return this.diff(Jt.now(),e,t)}until(e){return this.isValid?Nn.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t,n)<=i&&i<=o.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Jt.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),u2(t,this.plus(n),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?u2(e.base||Jt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Jt.isDateTime))throw new Us("min requires all arguments be DateTimes");return Y1(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Jt.isDateTime))throw new Us("max requires all arguments be DateTimes");return Y1(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:i=null,numberingSystem:o=null}=n,l=Lr.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return Ay(l,e,t)}static fromStringExplain(e,t,n={}){return Jt.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:i=null}=t,o=Lr.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new jy(o,e)}static fromFormatParser(e,t,n={}){if(Ht(e)||Ht(t))throw new Us("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:o=null}=n,l=Lr.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});if(!l.equals(t.locale))throw new Us(`fromFormatParser called with a locale of ${l}, but the format parser was created for ${t.locale}`);const{result:d,zone:h,specificOffset:m,invalidReason:v}=t.explainFromTokens(e);return v?Jt.invalid(v):tc(d,h,n,`format ${t.format}`,e,m)}static get DATE_SHORT(){return Uh}static get DATE_MED(){return Lv}static get DATE_MED_WITH_WEEKDAY(){return W3}static get DATE_FULL(){return Tv}static get DATE_HUGE(){return Ov}static get TIME_SIMPLE(){return Iv}static get TIME_WITH_SECONDS(){return Dv}static get TIME_WITH_SHORT_OFFSET(){return Fv}static get TIME_WITH_LONG_OFFSET(){return Mv}static get TIME_24_SIMPLE(){return Rv}static get TIME_24_WITH_SECONDS(){return Uv}static get TIME_24_WITH_SHORT_OFFSET(){return Bv}static get TIME_24_WITH_LONG_OFFSET(){return qv}static get DATETIME_SHORT(){return zv}static get DATETIME_SHORT_WITH_SECONDS(){return $v}static get DATETIME_MED(){return Wv}static get DATETIME_MED_WITH_SECONDS(){return Vv}static get DATETIME_MED_WITH_WEEKDAY(){return V3}static get DATETIME_FULL(){return Hv}static get DATETIME_FULL_WITH_SECONDS(){return Gv}static get DATETIME_HUGE(){return Yv}static get DATETIME_HUGE_WITH_SECONDS(){return Kv}}function Zc(r){if(Jt.isDateTime(r))return r;if(r&&r.valueOf&&jl(r.valueOf()))return Jt.fromJSDate(r);if(r&&typeof r=="object")return Jt.fromObject(r);throw new Us(`Unknown datetime argument: ${r}, of type ${typeof r}`)}function Uk(r,e){const[t,n]=String(r||"").split(":").map(l=>Number(l));return!Number.isFinite(t)||!Number.isFinite(n)?"":Jt.fromObject({year:2020,month:1,day:1,hour:t,minute:n},{zone:"UTC"}).setZone(e||"local").toFormat("h:mm a")}function Bk({medicationId:r,userId:e,onClose:t,onDoseRecorded:n}){const[i,o]=ve.useState(!0),[l,d]=ve.useState(!1),[h,m]=ve.useState(null),[v,w]=ve.useState(null),[k,x]=ve.useState(null),[T,C]=ve.useState(""),[E,j]=ve.useState(0),[K,B]=ve.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),$=ve.useMemo(()=>k?Array.isArray(k.reminder_times)&&k.reminder_times.length>0?k.reminder_times.length:k.frequency==="1x daily"?1:k.frequency==="2x daily"?2:3:0,[k]),le=ve.useMemo(()=>{if(!k)return 0;const W=new Date(k.start_date),O=k.end_date?new Date(k.end_date):null,F=new Date(W.getFullYear(),W.getMonth(),W.getDate()),Z=O?new Date(O.getFullYear(),O.getMonth(),O.getDate()):null;return(Z?Math.max(1,Math.round((Z.getTime()-F.getTime())/(1e3*60*60*24))+1):1)*$},[k,$]),me=ve.useMemo(()=>le>0?Math.round(E/le*100):0,[E,le]),U=async()=>{o(!0),m(null);try{const{data:W,error:O}=await At.from("medications").select("*").eq("id",r).single();if(O)throw O;const F={id:W.id,user_id:W.user_id,pet_id:W.pet_id,medication_name:W.medication_name,dosage:W.dosage??null,frequency:W.frequency,reminder_times:Array.isArray(W.reminder_times)?W.reminder_times:[],start_date:W.start_date,end_date:W.end_date??null};if(x(F),W.pet_id){const{data:ae,error:he}=await At.from("pets").select("name").eq("id",W.pet_id).single();!he&&ae?.name&&C(ae.name)}const{count:Z,error:ee}=await At.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",r).eq("status","given");if(ee)throw ee;if(j(Z||0),e)try{const{data:ae}=await At.from("profiles").select("timezone").eq("id",e).single(),he=ae&&ae.timezone?String(ae.timezone):"";he&&B(he)}catch{}}catch(W){m(W?.message||"Failed to load medication")}finally{o(!1)}};ve.useEffect(()=>{U()},[r]),ve.useEffect(()=>{const W=document.body.style.overflow;document.body.style.overflow="hidden";const O=F=>{F.key==="Escape"&&t()};return window.addEventListener("keydown",O),()=>{document.body.style.overflow=W,window.removeEventListener("keydown",O)}},[t]);const z=W=>Uk(W,K),I=async()=>{if(!e){m("You must be logged in to record a dose.");return}d(!0),m(null);try{const O=new Date().toISOString(),{error:F}=await At.from("medication_doses").insert({medication_id:r,user_id:e,scheduled_time:O,given_time:O,status:"given"});if(F)throw F;j(Z=>Z+1),w("Dose recorded "),n&&n(),setTimeout(()=>{t()},4e3)}catch(W){m(W?.message||"Failed to record dose")}finally{d(!1)}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Track Dose"}),u.jsx("button",{type:"button",className:"text-sm",onClick:t,children:"Close"})]}),i&&u.jsx("div",{className:"mt-4 text-sm text-slate-600",children:"Loading"}),h&&u.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:h}),!i&&k&&u.jsxs("div",{className:"mt-4 space-y-3",children:[u.jsxs("div",{className:"text-sm text-slate-600",children:["Pet: ",u.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:T||""})]}),u.jsx("div",{className:"text-lg font-semibold",children:k.medication_name}),k.dosage&&u.jsx("div",{className:"text-sm text-slate-600",children:k.dosage}),u.jsxs("div",{className:"mt-2 rounded-lg border border-slate-200 dark:border-slate-800 p-3 text-sm space-y-1.5",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${E}/${le} doses (${me}%)`]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-slate-500",children:"Reminder times:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(k.reminder_times)?k.reminder_times:[]).map((W,O)=>u.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs text-slate-700",children:z(W)},O))})]})]}),v&&u.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:v}),u.jsx("div",{className:"pt-2 flex flex-col sm:flex-row gap-3 sm:justify-end",children:u.jsx("button",{type:"button",disabled:l||!e,onClick:I,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:l?"Saving":" MARK AS GIVEN"})})]})]})})}function qk({userId:r,pets:e,refreshKey:t}){const[n,i]=ve.useState(!1),[o,l]=ve.useState(null),[d,h]=ve.useState([]),[m,v]=ve.useState({}),[w,k]=ve.useState(!1),[x,T]=ve.useState(null),[C,E]=ve.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),j=ve.useMemo(()=>{const U={};for(const z of e)U[z.id]=z;return U},[e]),K=async()=>{if(r){i(!0),l(null);try{try{const{data:O}=await At.from("profiles").select("timezone").eq("id",r).single(),F=O&&O.timezone?String(O.timezone):"";F&&E(F)}catch{}const{data:U,error:z}=await At.from("medications").select("*").eq("user_id",r).order("created_at",{ascending:!1});if(z)throw z;const I=(U||[]).map(O=>({...O,reminder_times:Array.isArray(O.reminder_times)?O.reminder_times:[]}));h(I);const W=I.map(O=>O.id);if(W.length>0){const{data:O,error:F}=await At.from("medication_doses").select("id, medication_id, user_id, scheduled_time, given_time, status").in("medication_id",W).eq("user_id",r).eq("status","given");if(F)throw F;const Z={};for(const ee of O||[])Z[ee.medication_id]=(Z[ee.medication_id]||0)+1;v(Z)}else v({})}catch(U){l(U?.message||"Failed to load medications")}finally{i(!1)}}};ve.useEffect(()=>{K()},[r,t]);const B=ve.useMemo(()=>{const U=new Date,z=new Date(U.getFullYear(),U.getMonth(),U.getDate()),I={};for(const W of d){const[O,F,Z]=W.start_date.split("-").map(Number),ee=new Date(O,F-1,Z),ae=W.end_date?(()=>{const[be,ne,fe]=W.end_date.split("-").map(Number);return new Date(be,ne-1,fe)})():null;z>=ee&&(!ae||z<=ae)&&(I[W.pet_id]||(I[W.pet_id]=[]),I[W.pet_id].push(W))}return I},[d]),$=U=>Array.isArray(U.reminder_times)&&U.reminder_times.length>0?U.reminder_times.length:U.frequency==="1x daily"?1:U.frequency==="2x daily"?2:3,le=(U,z)=>{const I=new Date(U.getFullYear(),U.getMonth(),U.getDate()),W=new Date(z.getFullYear(),z.getMonth(),z.getDate()),O=Math.round((I.getTime()-W.getTime())/(1e3*60*60*24));let F;O===0?U.getTime()<=z.getTime()?F="Tomorrow":F="Today":O===1?F="Tomorrow":F=U.toLocaleDateString("en-US",{month:"short",day:"numeric"});const Z=U.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${F} ${Z}`},me=U=>{const z=new Date(U.start_date),I=U.end_date?new Date(U.end_date):null,W=new Date,O=new Date(z.getFullYear(),z.getMonth(),z.getDate()),F=I?new Date(I.getFullYear(),I.getMonth(),I.getDate()):null,Z=new Date(W.getFullYear(),W.getMonth(),W.getDate()),ee=F?Math.max(1,Math.round((F.getTime()-O.getTime())/(1e3*60*60*24))+1):1,ae=$(U),he=ee*ae,be=m[U.id]||0,ne=he>0?Math.round(be/he*100):0,fe=F?Math.max(0,Math.round((F.getTime()-Z.getTime())/(1e3*60*60*24))+1):0,ke=U.reminder_times&&U.reminder_times.length>0?U.reminder_times.filter(Boolean):U.frequency==="1x daily"?["07:00"]:U.frequency==="2x daily"?["07:00","19:00"]:["08:00","14:00","20:00"];let Y=null;const A=new Date;let H=new Date(A.getFullYear(),A.getMonth(),A.getDate());for(let Q=0;Q<7;Q++){if(H<O){H.setDate(H.getDate()+1);continue}if(F&&H>F)break;for(const ie of ke){const[se,ye]=ie.split(":").map(Ae=>Number(Ae)),ce=new Date(H.getFullYear(),H.getMonth(),H.getDate(),se,ye,0);if(ce.getTime()>A.getTime()){Y=ce;break}}if(Y)break;H.setDate(H.getDate()+1)}return{totalDoses:he,given:be,pct:ne,daysRemaining:fe,nextDoseLabel:Y?le(Y,A):F&&Z>F?"Completed":"",endLabel:F?F.toISOString().slice(0,10):""}};return u.jsxs("section",{className:"mt-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Medications"}),u.jsx("button",{type:"button",onClick:()=>k(!0),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm",disabled:!r,children:"+ ADD MEDICATION"})]}),n&&u.jsx("div",{className:"mt-4 text-sm text-slate-500",children:"Loading medications"}),o&&u.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:o}),!n&&d.length===0&&u.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 text-sm text-slate-600",children:'No medications yet. Click "+ ADD MEDICATION" to create one.'}),u.jsx("div",{className:"mt-4 space-y-6",children:Object.entries(B).map(([U,z])=>{const I=j[U];return u.jsxs("div",{children:[u.jsxs("div",{className:"text-base font-semibold mb-2 flex items-center gap-3 h-12 px-4",children:[u.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:I?.color||(I?.species==="dog"?"#3B82F6":I?.species==="cat"?"#F97316":"#6B7280")}}),u.jsx("span",{className:"font-semibold",children:I?`${I.name} (${I.species})`:"Unknown Pet"})]}),z.length===0?u.jsx("div",{className:"ml-4 text-sm text-slate-500 dark:text-slate-400",children:"No active medications"}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(W=>{const O=me(W);return u.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm cursor-pointer hover:shadow-md",onClick:()=>T(W.id),children:[u.jsx("div",{className:"flex items-start justify-between gap-2",children:u.jsx("div",{className:"text-lg font-semibold",children:W.medication_name})}),u.jsx("button",{type:"button",className:"absolute top-2 right-2 text-xs text-red-600 hover:text-red-700 cursor-pointer",onClick:async F=>{if(F.stopPropagation(),!!confirm(`Are you sure you want to delete ${W.medication_name}?`))try{let Z=!1;try{Z=(await fetch(`/api/medications/${W.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}catch{}if(!Z){const{error:ee}=await At.from("medications").delete().eq("id",W.id).eq("user_id",r);if(ee)throw ee}h(ee=>ee.filter(ae=>ae.id!==W.id));try{alert("Medication deleted successfully")}catch{}}catch(Z){console.error("[medications] delete error",Z);try{alert("Failed to delete medication")}catch{}}},title:"Delete medication","aria-label":"Delete medication",children:"Delete"}),W.dosage&&u.jsx("div",{className:"text-sm text-slate-600 mt-0.5",children:W.dosage}),u.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${O.given}/${O.totalDoses} doses (${O.pct}%)`]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Next dose:"})," ",O.nextDoseLabel]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",O.daysRemaining]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"End date:"})," ",O.endLabel]})]})]},W.id)})})]},U)})}),u.jsx(Cv,{open:w,onClose:()=>k(!1),onSaved:()=>{k(!1),K()},userId:r,pets:e}),x&&u.jsx(Bk,{medicationId:x,userId:r,onClose:()=>T(null),onDoseRecorded:()=>K()})]})}function zk({medicationId:r,userId:e,onClose:t}){const[n,i]=ve.useState(null),[o,l]=ve.useState(null),[d,h]=ve.useState(!0),[m,v]=ve.useState(!1),[w,k]=ve.useState(!1),[x,T]=ve.useState(null),[C,E]=ve.useState(null),[j,K]=ve.useState(null);ve.useEffect(()=>{const z=new URLSearchParams(window.location.search).get("token");z&&(E(z),console.log("[DoseMarkingPage] Magic link token detected:",z.slice(0,8)+"...")),B(z)},[r,e]);async function B(U=null){try{const z=U||C;if(z){console.log("[DoseMarkingPage] Loading via magic token:",z.slice(0,8)+"...");const{data:O,error:F}=await At.from("medication_doses").select("*, medications(*, pets(name, species))").eq("one_time_token",z).eq("status","pending").single();if(F||!O){console.error("[DoseMarkingPage] Token validation failed:",F?.message,F?.code),console.error("[DoseMarkingPage] Full error:",JSON.stringify(F)),T("This link is invalid or has expired. Please check for a newer SMS."),h(!1);return}console.log("[DoseMarkingPage]  Dose found via token:",O.id),console.log("[DoseMarkingPage] Full dose data:",JSON.stringify(O,null,2)),console.log("[DoseMarkingPage] Medications object:",O.medications),console.log("[DoseMarkingPage] Pets object:",O.medications?.pets),i(O.medications),l(O.medications?.pets),h(!1),console.log("[DoseMarkingPage]  Medication name:",O.medications?.medication_name||"MISSING"),console.log("[DoseMarkingPage]  Pet name:",O.medications?.pets?.name||"MISSING");return}if(!e){T("Please log in to mark medication as given"),h(!1);return}const{data:I,error:W}=await At.from("medications").select("*, pets(name, species)").eq("id",r).eq("user_id",e).single();if(W||!I){T("Medication not found"),h(!1);return}i(I),l(I.pets),h(!1)}catch(z){console.error("Error loading medication:",z),T("Failed to load medication details"),h(!1)}}async function $(){try{const{data:U,error:z}=await At.from("medication_doses").select("*").eq("medication_id",r).order("scheduled_time",{ascending:!0});if(z||!U){console.error("[DoseMarkingPage] Failed to fetch doses for stats:",z);return}let I=0;if(n?.start_date&&n?.end_date){const[he,be,ne]=n.start_date.split("-").map(Number),fe=new Date(he,be-1,ne),[ke,Y,A]=n.end_date.split("-").map(Number),H=new Date(ke,Y-1,A),Q=Math.floor((H.getTime()-fe.getTime())/(1e3*60*60*24))+1,ie=n.reminder_times&&Array.isArray(n.reminder_times)?n.reminder_times.length:1;I=Q*ie,console.log("[DoseMarkingPage] Progress calculation:",{startDate:n.start_date,endDate:n.end_date,totalDays:Q,dosesPerDay:ie,totalCount:I,dosesInDB:U.length})}else I=U.length,console.warn("[DoseMarkingPage] Missing medication dates, falling back to DB count");const W=U.filter(he=>he.status==="given").length,O=I>0?Math.round(W/I*100):0,F=W===I&&I>0,Z=U.find(he=>he.status==="pending");let ee=null;if(Z&&!F){const he=new Date(Z.scheduled_time),be=new Date,ne=new Date(be);ne.setDate(ne.getDate()+1);const fe=he.toDateString()===be.toDateString(),ke=he.toDateString()===ne.toDateString(),Y=he.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});fe?ee=`Today ${Y}`:ke?ee=`Tomorrow ${Y}`:ee=`${he.toLocaleDateString("en-US",{weekday:"short"})} ${Y}`}let ae=null;if(n?.end_date&&!F){const he=new Date(n.end_date),be=new Date;be.setHours(0,0,0,0),he.setHours(0,0,0,0);const ne=he.getTime()-be.getTime(),fe=Math.ceil(ne/(1e3*60*60*24));ae=fe>=0?fe:0}K({givenCount:W,totalCount:I,percentage:O,nextDoseTime:ee,daysRemaining:ae,isComplete:F})}catch(U){console.error("[DoseMarkingPage] Error calculating progress stats:",U)}}async function le(){if(!C&&!e){T("Please log in to mark medication as given");return}v(!0),T(null);try{const U=C?{token:C}:{userId:e};console.log("[DoseMarkingPage] Marking as given with:",C?"magic link token":"session auth");const z=await fetch(`http://localhost:8787/api/medications/${r}/mark-given`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)}),I=await z.json();if(!z.ok||!I.ok){T(I.error||"Failed to mark dose as given"),v(!1);return}console.log("[DoseMarkingPage]  Successfully marked as given"),await $(),k(!0),v(!1)}catch(U){console.error("Error marking dose:",U),T("Failed to mark dose as given"),v(!1)}}function me(){t()}return d?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading medication details..."})]})})}):x&&!n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-red-600 text-5xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),u.jsx("p",{className:"text-gray-600 mb-6",children:x}),u.jsx("button",{onClick:t,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})}):w?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Medication Marked!"}),u.jsx("p",{className:"text-gray-700 mb-2 text-lg",children:u.jsx("strong",{children:n?.medication_name||"Medication"})}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["has been marked as given for ",u.jsx("strong",{children:o?.name||"your pet"})]}),j&&u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6 text-left",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 text-center",children:"Treatment Progress"}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[j.givenCount," of ",j.totalCount," doses"]}),u.jsxs("span",{className:"text-sm font-bold text-indigo-600",children:[j.percentage,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${j.percentage}%`}})})]}),j.isComplete?u.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4 text-center",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsx("p",{className:"text-green-800 font-semibold",children:"All doses complete!"}),u.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Treatment finished"})]}):u.jsxs("div",{className:"space-y-3",children:[j.nextDoseTime&&u.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),u.jsx("span",{className:"text-sm font-semibold text-gray-800",children:j.nextDoseTime})]}),j.daysRemaining!==null&&j.daysRemaining>=0&&u.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Days remaining:"}),u.jsx("span",{className:"text-sm font-semibold text-gray-800",children:j.daysRemaining===0?"Last day":j.daysRemaining===1?"1 day":`${j.daysRemaining} days`})]})]})]}),u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:u.jsx("p",{className:"text-green-800 text-sm",children:" Your pet's medication has been recorded. You're all set!"})}),u.jsx("button",{onClick:()=>{!e&&!C?window.location.href="/":t(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold",children:e?"View Dashboard":"Done"})]})})}):u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mark Medication as Given?"}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pet:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:o?.name}),u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medication:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:n?.medication_name}),n?.dosage&&u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dosage:"}),u.jsx("p",{className:"text-lg font-semibold text-gray-800",children:n.dosage})]})]}),x&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:u.jsx("p",{className:"text-red-700 text-sm",children:x})}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("button",{onClick:le,disabled:m,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Marking..."]}):u.jsx(u.Fragment,{children:" Yes, I gave it"})}),u.jsx("button",{onClick:me,disabled:m,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip this dose"})]})]})})})}function hm(){return hm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hm.apply(null,arguments)}function $k(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Wk(r,e){if(r==null)return{};var t,n,i=$k(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Vk(r,e,t){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Hk(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function fm(r,e){return fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},fm(r,e)}function Gk(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&fm(r,e)}function $h(r){return $h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$h(r)}function Ly(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ly=function(){return!!r})()}function Yk(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Kk(r,e){if(e&&(Tr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yk(r)}function Jk(r){var e=Ly();return function(){var t,n=$h(r);if(e){var i=$h(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Kk(this,t)}}var E0={exports:{}},P0,d2;function Zk(){if(d2)return P0;d2=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return P0=r,P0}var L0,h2;function Xk(){if(h2)return L0;h2=1;var r=Zk();function e(){}function t(){}return t.resetWarningCache=e,L0=function(){function n(l,d,h,m,v,w){if(w!==r){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},L0}var f2;function Qk(){return f2||(f2=1,E0.exports=Xk()()),E0.exports}var e4=Qk();const Ci=fd(e4);function hu(r,e,t){this.x=r,this.y=e,this.time=t||new Date().getTime()}hu.prototype.velocityFrom=function(r){return this.time!==r.time?this.distanceTo(r)/(this.time-r.time):1};hu.prototype.distanceTo=function(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))};hu.prototype.equals=function(r){return this.x===r.x&&this.y===r.y&&this.time===r.time};function Om(r,e,t,n){this.startPoint=r,this.control1=e,this.control2=t,this.endPoint=n}Om.prototype.length=function(){for(var r=10,e=0,t=void 0,n=void 0,i=0;i<=r;i+=1){var o=i/r,l=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var h=l-t,m=d-n;e+=Math.sqrt(h*h+m*m)}t=l,n=d}return e};Om.prototype._point=function(r,e,t,n,i){return e*(1-r)*(1-r)*(1-r)+3*t*(1-r)*(1-r)*r+3*n*(1-r)*r*r+i*r*r*r};function t4(r,e,t){var n,i,o,l=null,d=0;t||(t={});var h=function(){d=t.leading===!1?0:Date.now(),l=null,o=r.apply(n,i),l||(n=i=null)};return function(){var m=Date.now();!d&&t.leading===!1&&(d=m);var v=e-(m-d);return n=this,i=arguments,v<=0||v>e?(l&&(clearTimeout(l),l=null),d=m,o=r.apply(n,i),l||(n=i=null)):!l&&t.trailing!==!1&&(l=setTimeout(h,v)),o}}function zr(r,e){var t=this,n=e||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=t4(zr.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=zr.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=r,this._ctx=r.getContext("2d"),this.clear(),this._handleMouseDown=function(i){i.which===1&&(t._mouseButtonDown=!0,t._strokeBegin(i))},this._handleMouseMove=function(i){t._mouseButtonDown&&t._strokeMoveUpdate(i)},this._handleMouseUp=function(i){i.which===1&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(i))},this._handleTouchStart=function(i){if(i.targetTouches.length===1){var o=i.changedTouches[0];t._strokeBegin(o)}},this._handleTouchMove=function(i){i.preventDefault();var o=i.targetTouches[0];t._strokeMoveUpdate(o)},this._handleTouchEnd=function(i){var o=i.target===t._canvas;o&&(i.preventDefault(),t._strokeEnd(i))},this.on()}zr.prototype.clear=function(){var r=this._ctx,e=this._canvas;r.fillStyle=this.backgroundColor,r.clearRect(0,0,e.width,e.height),r.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};zr.prototype.fromDataURL=function(r){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,i=t.ratio||window.devicePixelRatio||1,o=t.width||this._canvas.width/i,l=t.height||this._canvas.height/i;this._reset(),n.src=r,n.onload=function(){e._ctx.drawImage(n,0,0,o,l)},this._isEmpty=!1};zr.prototype.toDataURL=function(r){var e;switch(r){case"image/svg+xml":return this._toSVG();default:for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return(e=this._canvas).toDataURL.apply(e,[r].concat(n))}};zr.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};zr.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};zr.prototype.isEmpty=function(){return this._isEmpty};zr.prototype._strokeBegin=function(r){this._data.push([]),this._reset(),this._strokeUpdate(r),typeof this.onBegin=="function"&&this.onBegin(r)};zr.prototype._strokeUpdate=function(r){var e=r.clientX,t=r.clientY,n=this._createPoint(e,t),i=this._data[this._data.length-1],o=i&&i[i.length-1],l=o&&n.distanceTo(o)<this.minDistance;if(!(o&&l)){var d=this._addPoint(n),h=d.curve,m=d.widths;h&&m&&this._drawCurve(h,m.start,m.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};zr.prototype._strokeEnd=function(r){var e=this.points.length>2,t=this.points[0];if(!e&&t&&this._drawDot(t),t){var n=this._data[this._data.length-1],i=n[n.length-1];t.equals(i)||n.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(r)};zr.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};zr.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};zr.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};zr.prototype._createPoint=function(r,e,t){var n=this._canvas.getBoundingClientRect();return new hu(r-n.left,e-n.top,t||new Date().getTime())};zr.prototype._addPoint=function(r){var e=this.points,t=void 0;if(e.push(r),e.length>2){e.length===3&&e.unshift(e[0]),t=this._calculateCurveControlPoints(e[0],e[1],e[2]);var n=t.c2;t=this._calculateCurveControlPoints(e[1],e[2],e[3]);var i=t.c1,o=new Om(e[1],n,i,e[2]),l=this._calculateCurveWidths(o);return e.shift(),{curve:o,widths:l}}return{}};zr.prototype._calculateCurveControlPoints=function(r,e,t){var n=r.x-e.x,i=r.y-e.y,o=e.x-t.x,l=e.y-t.y,d={x:(r.x+e.x)/2,y:(r.y+e.y)/2},h={x:(e.x+t.x)/2,y:(e.y+t.y)/2},m=Math.sqrt(n*n+i*i),v=Math.sqrt(o*o+l*l),w=d.x-h.x,k=d.y-h.y,x=v/(m+v),T={x:h.x+w*x,y:h.y+k*x},C=e.x-T.x,E=e.y-T.y;return{c1:new hu(d.x+C,d.y+E),c2:new hu(h.x+C,h.y+E)}};zr.prototype._calculateCurveWidths=function(r){var e=r.startPoint,t=r.endPoint,n={start:null,end:null},i=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i);return n.start=this._lastWidth,n.end=o,this._lastVelocity=i,this._lastWidth=o,n};zr.prototype._strokeWidth=function(r){return Math.max(this.maxWidth/(r+1),this.minWidth)};zr.prototype._drawPoint=function(r,e,t){var n=this._ctx;n.moveTo(r,e),n.arc(r,e,t,0,2*Math.PI,!1),this._isEmpty=!1};zr.prototype._drawCurve=function(r,e,t){var n=this._ctx,i=t-e,o=Math.floor(r.length());n.beginPath();for(var l=0;l<o;l+=1){var d=l/o,h=d*d,m=h*d,v=1-d,w=v*v,k=w*v,x=k*r.startPoint.x;x+=3*w*d*r.control1.x,x+=3*v*h*r.control2.x,x+=m*r.endPoint.x;var T=k*r.startPoint.y;T+=3*w*d*r.control1.y,T+=3*v*h*r.control2.y,T+=m*r.endPoint.y;var C=e+m*i;this._drawPoint(x,T,C)}n.closePath(),n.fill()};zr.prototype._drawDot=function(r){var e=this._ctx,t=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(r.x,r.y,t),e.closePath(),e.fill()};zr.prototype._fromData=function(r,e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(i.length>1)for(var o=0;o<i.length;o+=1){var l=i[o],d=new hu(l.x,l.y,l.time),h=l.color;if(o===0)this.penColor=h,this._reset(),this._addPoint(d);else if(o!==i.length-1){var m=this._addPoint(d),v=m.curve,w=m.widths;v&&w&&e(v,w,h)}}else{this._reset();var k=i[0];t(k)}}};zr.prototype._toSVG=function(){var r=this,e=this._data,t=this._canvas,n=Math.max(window.devicePixelRatio||1,1),i=0,o=0,l=t.width/n,d=t.height/n,h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttributeNS(null,"width",t.width),h.setAttributeNS(null,"height",t.height),this._fromData(e,function(j,K,B){var $=document.createElement("path");if(!isNaN(j.control1.x)&&!isNaN(j.control1.y)&&!isNaN(j.control2.x)&&!isNaN(j.control2.y)){var le="M "+j.startPoint.x.toFixed(3)+","+j.startPoint.y.toFixed(3)+" "+("C "+j.control1.x.toFixed(3)+","+j.control1.y.toFixed(3)+" ")+(j.control2.x.toFixed(3)+","+j.control2.y.toFixed(3)+" ")+(j.endPoint.x.toFixed(3)+","+j.endPoint.y.toFixed(3));$.setAttribute("d",le),$.setAttribute("stroke-width",(K.end*2.25).toFixed(3)),$.setAttribute("stroke",B),$.setAttribute("fill","none"),$.setAttribute("stroke-linecap","round"),h.appendChild($)}},function(j){var K=document.createElement("circle"),B=typeof r.dotSize=="function"?r.dotSize():r.dotSize;K.setAttribute("r",B),K.setAttribute("cx",j.x),K.setAttribute("cy",j.y),K.setAttribute("fill",j.color),h.appendChild(K)});var m="data:image/svg+xml;base64,",v='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+i+" "+o+" "+l+" "+d+'"')+(' width="'+l+'"')+(' height="'+d+'"')+">",w=h.innerHTML;if(w===void 0){var k=document.createElement("dummy"),x=h.childNodes;k.innerHTML="";for(var T=0;T<x.length;T+=1)k.appendChild(x[T].cloneNode(!0));w=k.innerHTML}var C="</svg>",E=v+w+C;return m+btoa(E)};zr.prototype.fromData=function(r){var e=this;this.clear(),this._fromData(r,function(t,n){return e._drawCurve(t,n.start,n.end)},function(t){return e._drawDot(t)}),this._data=r};zr.prototype.toData=function(){return this._data};var Ph={exports:{}},r4=Ph.exports,m2;function n4(){return m2||(m2=1,(function(r,e){(function(t,n){r.exports=n()})(r4,function(){return(function(t){function n(o){if(i[o])return i[o].exports;var l=i[o]={exports:{},id:o,loaded:!1};return t[o].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}var i={};return n.m=t,n.c=i,n.p="",n(0)})([function(t,n){function i(m){var v=m.getContext("2d"),w=m.width,k=m.height,x=v.getImageData(0,0,w,k).data,T=d(!0,w,k,x),C=d(!1,w,k,x),E=h(!0,w,k,x),j=h(!1,w,k,x),K=j-E+1,B=C-T+1,$=v.getImageData(E,T,K,B);return m.width=K,m.height=B,v.clearRect(0,0,K,B),v.putImageData($,0,0),m}function o(m,v,w,k){return{red:k[4*(w*v+m)],green:k[4*(w*v+m)+1],blue:k[4*(w*v+m)+2],alpha:k[4*(w*v+m)+3]}}function l(m,v,w,k){return o(m,v,w,k).alpha}function d(m,v,w,k){for(var x=m?1:-1,T=m?0:w-1,C=T;m?C<w:C>-1;C+=x)for(var E=0;E<v;E++)if(l(E,C,v,k))return C;return null}function h(m,v,w,k){for(var x=m?1:-1,T=m?0:v-1,C=T;m?C<v:C>-1;C+=x)for(var E=0;E<w;E++)if(l(C,E,v,k))return C;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i}])})})(Ph)),Ph.exports}var s4=n4();const i4=fd(s4);var a4=["canvasProps","clearOnResize"],bd=(function(r){Gk(t,r);var e=Jk(t);function t(){var n;Hk(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return n=e.call.apply(e,[this].concat(o)),n.staticThis=n.constructor,n._sigPad=null,n._canvas=null,n.setRef=function(d){n._canvas=d,n._canvas===null&&(n._sigPad=null)},n._excludeOurProps=function(){var d=n.props;d.canvasProps,d.clearOnResize;var h=Wk(d,a4);return h},n.componentDidMount=function(){var d=n.getCanvas();n._sigPad=new zr(d,n._excludeOurProps()),n._resizeCanvas(),n.on()},n.componentWillUnmount=function(){n.off()},n.componentDidUpdate=function(){Object.assign(n._sigPad,n._excludeOurProps())},n.getCanvas=function(){if(n._canvas===null)throw n.staticThis.refNullError;return n._canvas},n.getTrimmedCanvas=function(){var d=n.getCanvas(),h=document.createElement("canvas");return h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0),i4(h)},n.getSignaturePad=function(){if(n._sigPad===null)throw n.staticThis.refNullError;return n._sigPad},n._checkClearOnResize=function(){n.props.clearOnResize&&n._resizeCanvas()},n._resizeCanvas=function(){var d,h,m=(d=n.props.canvasProps)!==null&&d!==void 0?d:{},v=m.width,w=m.height;if(!(typeof v<"u"&&typeof w<"u")){var k=n.getCanvas(),x=Math.max((h=window.devicePixelRatio)!==null&&h!==void 0?h:1,1);typeof v>"u"&&(k.width=k.offsetWidth*x),typeof w>"u"&&(k.height=k.offsetHeight*x),k.getContext("2d").scale(x,x),n.clear()}},n.render=function(){var d=n.props.canvasProps;return pm.createElement("canvas",hm({ref:n.setRef},d))},n.on=function(){return window.addEventListener("resize",n._checkClearOnResize),n.getSignaturePad().on()},n.off=function(){return window.removeEventListener("resize",n._checkClearOnResize),n.getSignaturePad().off()},n.clear=function(){return n.getSignaturePad().clear()},n.isEmpty=function(){return n.getSignaturePad().isEmpty()},n.fromDataURL=function(d,h){return n.getSignaturePad().fromDataURL(d,h)},n.toDataURL=function(d,h){return n.getSignaturePad().toDataURL(d,h)},n.fromData=function(d){return n.getSignaturePad().fromData(d)},n.toData=function(){return n.getSignaturePad().toData()},n}return Vk(t)})(ve.Component);bd.propTypes={velocityFilterWeight:Ci.number,minWidth:Ci.number,maxWidth:Ci.number,minDistance:Ci.number,dotSize:Ci.oneOfType([Ci.number,Ci.func]),penColor:Ci.string,throttle:Ci.number,onEnd:Ci.func,onBegin:Ci.func,canvasProps:Ci.object,clearOnResize:Ci.bool};bd.defaultProps={clearOnResize:!0};bd.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function o4({open:r,onClose:e,insurerName:t,petId:n,petName:i,claimId:o,missingFields:l,existingData:d={},suggestedValues:h={},onComplete:m}){console.log("[MissingFieldsModal] Component rendered with petName:",i);const[v,w]=ve.useState({}),[k,x]=ve.useState(null),[T,C]=ve.useState(!1),E=ve.useRef({});ve.useEffect(()=>{const U={};l.forEach(z=>{h[z.field]?U[z.field]=h[z.field]:d[z.field]&&(U[z.field]=d[z.field])}),w(U)},[l,d,h]);const j=(U,z)=>{w(I=>({...I,[U]:z})),x(null)},K=U=>U.conditional?v[U.conditional.field]===U.conditional.value:!0,B=ve.useMemo(()=>(console.log("[MissingFieldsModal] Filtering fields, formData:",v),l.filter(U=>{const z=K(U);return console.log(`[MissingFieldsModal] Field ${U.field}: ${z?"VISIBLE":"HIDDEN"}`,U.conditional?`(conditional: ${U.conditional.field} === "${U.conditional.value}")`:""),z})),[l,v]),$=U=>{console.log("[MissingFieldsModal] replacePlaceholders called with:",U,"petName:",i);const z=U.replace(/{petName}/g,i||"your pet");return console.log("[MissingFieldsModal] replacePlaceholders result:",z),z},le=U=>U.type==="signature"?u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(U.prompt)," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),U.description&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(U.description)}),u.jsxs("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!v[U.field]&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),u.jsx(bd,{ref:z=>{E.current[U.field]=z},canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onEnd:()=>{const z=E.current[U.field];z&&!z.isEmpty()&&j(U.field,z.toDataURL("image/png"))}})]}),v[U.field]&&u.jsx("button",{type:"button",onClick:()=>{E.current[U.field]?.clear(),j(U.field,null)},className:"mt-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})]},U.field):U.type==="text"?u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(U.prompt)," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),U.description&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(U.description)}),u.jsx("input",{type:"text",placeholder:U.placeholder,value:v[U.field]||"",onChange:z=>j(U.field,z.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"}),U.aiExtract&&h[U.field]&&u.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[" Suggested from diagnosis: ",h[U.field]]})]},U.field):U.type==="textarea"?u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(U.prompt)," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),U.description&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(U.description)}),u.jsx("textarea",{rows:U.rows||3,placeholder:U.placeholder,value:v[U.field]||"",onChange:z=>j(U.field,z.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},U.field):U.type==="date"?u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(U.prompt)," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),U.description&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(U.description)}),u.jsx("input",{type:"date",value:v[U.field]||"",onChange:z=>j(U.field,z.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},U.field):U.type==="phone"?u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(U.prompt)," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),U.description&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(U.description)}),u.jsx("input",{type:"tel",placeholder:U.placeholder||"(555) 123-4567",value:v[U.field]||"",onChange:z=>j(U.field,z.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},U.field):U.type==="radio"&&U.options?u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[$(U.prompt)," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),U.description&&u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:$(U.description)}),u.jsx("div",{className:"space-y-2",children:U.options.map(z=>u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:U.field,value:z,checked:v[U.field]===z,onChange:I=>j(U.field,I.target.value),className:"text-emerald-600"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:z})]},z))})]},U.field):null,me=async U=>{if(U.preventDefault(),x(null),!B.every(I=>{if(!I.required)return!0;const W=v[I.field];return!(!W||typeof W=="string"&&W.trim()==="")})){x("Please fill out all required fields");return}C(!0);try{await m(v)}catch{x("Failed to save data. Please try again."),C(!1)}};return r?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:u.jsxs("div",{className:"relative mx-4 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl max-h-[calc(100vh-80px)] overflow-y-auto",onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Quick Questions for ",t]}),u.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:[" We need a few details to submit your claim. These fields are required by ",t,"."]})]}),k&&u.jsx("div",{className:"mb-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:k}),u.jsxs("form",{onSubmit:me,children:[B.map(U=>le(U)),u.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:u.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" This information will be saved for future claims"})}),u.jsxs("div",{className:"mt-6 flex gap-3",children:[u.jsx("button",{type:"button",onClick:e,disabled:T,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:T,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50",children:T?"Saving...":"Continue to Submit"})]})]})]})}):null}function l4({claim:r,pet:e,userId:t,onClose:n,onSuccess:i}){const[o,l]=ve.useState("validating"),[d,h]=ve.useState(null),[m,v]=ve.useState(null),[w,k]=ve.useState(!1),[x,T]=ve.useState(null),[C,E]=ve.useState(null),j=e?.insurance_company||"Nationwide",K=r.total_amount?`$${parseFloat(r.total_amount).toFixed(2)}`:"$0.00";ve.useEffect(()=>{async function U(){try{l("validating"),console.log("[ClaimSubmissionModal] Starting validation..."),console.log("[ClaimSubmissionModal] claim:",r),console.log("[ClaimSubmissionModal] pet:",e),console.log("[ClaimSubmissionModal] pet.insurance_company:",e?.insurance_company);const{data:z,error:I}=await At.from("profiles").select("*").eq("id",t).single();if(I)throw I;T(z);const W=e?.insurance_company?.toLowerCase()||"";if(console.log("[ClaimSubmissionModal] insurerName:",W),!W||W==="not insured"||W==="none"){console.log("[ClaimSubmissionModal] No insurance company found"),v("Pet does not have an insurance company set. Please update pet information in Settings."),l("missing-data");return}const{data:{session:O}}=await At.auth.getSession();if(!O?.access_token){v("Please log in to submit claims"),l("error");return}const F="http://localhost:8787";console.log("[ClaimSubmissionModal] Calling validation API:",`${F}/api/claims/validate-fields`),console.log("[ClaimSubmissionModal] Request body:",{claimId:r.id,userId:t,insurer:W});const Z=await fetch(`${F}/api/claims/validate-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O.access_token}`},body:JSON.stringify({claimId:r.id,userId:t,insurer:W})});console.log("[ClaimSubmissionModal] Response status:",Z.status),console.log("[ClaimSubmissionModal] Response ok:",Z.ok),console.log("[ClaimSubmissionModal] Response headers:",{"content-type":Z.headers.get("content-type"),"content-length":Z.headers.get("content-length")});const ee=await Z.text();console.log("[ClaimSubmissionModal] Response text (first 500 chars):",ee.substring(0,500));let ae;try{ae=JSON.parse(ee),console.log("[ClaimSubmissionModal] Validation response:",ae)}catch(he){throw console.error("[ClaimSubmissionModal] Failed to parse JSON response:",he),console.error("[ClaimSubmissionModal] Full response text:",ee),new Error(`API returned non-JSON response (status ${Z.status}): ${ee.substring(0,200)}`)}if(!ae.ok){console.error("[ClaimSubmissionModal] Validation failed:",ae.error),v(`Error validating claim requirements: ${ae.error}`),l("error");return}if(console.log("[Validation] Result:",ae),ae.missingFields&&ae.missingFields.length>0){console.log("[ClaimSubmissionModal] Missing fields detected:",ae.missingFields),E({insurerName:e.insurance_company,missingFields:ae.missingFields,existingData:ae.existingData||{},suggestedValues:ae.suggestedValues||{}}),l("collect-missing-fields");return}console.log("[ClaimSubmissionModal] All fields present, proceeding to confirm"),l("confirm")}catch(z){console.error("[Validation] Error:",z),v(`Failed to validate claim: ${z.message}`),l("error")}}U()},[t,e,r]);const B=[];async function $(){console.log("[Preview] ========== PREVIEW PDF CLICKED =========="),console.log("[Preview] User Agent:",navigator.userAgent),console.log("[Preview] Window width:",window.innerWidth);try{k(!0);const U="http://localhost:8787",{data:{session:z}}=await At.auth.getSession();if(!z?.access_token)throw new Error("Not authenticated");const I=r.pdf_path?"?merged=true":"";console.log("[Preview] Fetching PDF from:",`${U}/api/claims/${r.id}/preview-pdf${I}`);const W=await fetch(`${U}/api/claims/${r.id}/preview-pdf${I}`,{headers:{Authorization:`Bearer ${z.access_token}`}});if(console.log("[Preview] Response status:",W.status),!W.ok){const ee=await W.json();throw new Error(ee.error||"Failed to generate preview")}const O=await W.blob();console.log("[Preview] PDF blob size:",O.size);const F=URL.createObjectURL(O);console.log("[Preview] Blob URL created:",F),console.log("[Preview]  PDF fetched successfully, size:",O.size,"bytes");const Z=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768;if(console.log("[Preview] Mobile detected:",Z),Z){console.log("[Preview] Using mobile-specific PDF handling");const ee=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(console.log("[Preview] Is iOS:",ee),ee)console.log("[Preview] Opening PDF in same window (iOS)"),window.location.href=F;else{console.log("[Preview] Attempting download (Android)");const ae=document.createElement("a");ae.href=F,ae.download=`claim-${e.name}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),console.log("[Preview] Download triggered")}}else{console.log("[Preview] Opening PDF in new tab (desktop)");const ee=window.open(F,"_blank","noopener,noreferrer");console.log("[Preview] New window opened:",!!ee),r.pdf_path?console.log("[Preview] Opened merged PDF (claim form + vet invoice)"):console.log("[Preview] Opened claim form PDF (no vet invoice attached)")}}catch(U){console.error("[Preview PDF] ERROR:",U),console.error("[Preview PDF] Error stack:",U.stack),alert(`Could not generate preview: ${U.message}`)}finally{console.log("[Preview] Cleaning up, setting loading to false"),k(!1)}}async function le(){l("submitting"),v(null);try{const{data:{session:U}}=await At.auth.getSession();if(!U?.access_token){v("Please log in to submit claims"),l("error");return}const I=await fetch("http://localhost:8787/api/claims/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U.access_token}`},body:JSON.stringify({claimId:r.id,userId:t})}),W=await I.json();if(!I.ok||!W.ok)throw new Error(W.error||"Failed to submit claim");console.log("[ClaimSubmission] Success:",W),h(W.messageId),l("success")}catch(U){console.error("[ClaimSubmission] Error:",U),v(U.message||"Failed to submit claim"),l("error")}}async function me(U){try{l("validating");const{data:{session:z}}=await At.auth.getSession();if(!z?.access_token){v("Please log in to save claim information"),l("error");return}const W=await fetch(`http://localhost:8787/api/claims/${r.id}/save-collected-fields`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z.access_token}`},body:JSON.stringify({collectedData:U})}),O=await W.json();if(!W.ok||!O.ok){v("Failed to save claim information"),l("error");return}console.log("[Save Fields] Success:",O),l("confirm")}catch(z){console.error("[Save Fields] Error:",z),v("Failed to save claim information"),l("error")}}if(o==="validating")return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),u.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Validating Requirements..."}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Checking if all required information is complete"})]})});if(o==="collect-missing-fields"&&C)return u.jsx(o4,{open:!0,onClose:n,insurerName:C.insurerName,petId:e.id,petName:e.name,claimId:r.id,missingFields:C.missingFields,existingData:C.existingData,suggestedValues:C.suggestedValues,onComplete:me});if(o==="missing-data"){const U=()=>{n(),window.location.hash="#settings"};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full",children:[u.jsx("div",{className:"text-orange-500 text-6xl mb-4 text-center",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Missing Required Information"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-center",children:"Please complete your profile and pet information before submitting claims."}),u.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-3",children:"Missing:"}),u.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 space-y-1.5",children:m?.split(`
`).slice(1).map((z,I)=>u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),u.jsx("span",{children:z.replace("- ","")})]},I))})]}),u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How to complete:"}),u.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[u.jsx("li",{children:"1. Go to Settings (click button below)"}),u.jsx("li",{children:"2. Fill in your signature, insurance info, and address"}),u.jsx("li",{children:"3. Update your pet's breed and date of birth"}),u.jsx("li",{children:"4. Return here and submit your claim"})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"}),u.jsx("button",{onClick:U,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Go to Settings"})]})]})})}return o==="submitting"?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Submitting Claim..."}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Generating PDF and sending to ",j]}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),u.jsx("span",{children:"Creating claim form PDF..."})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),u.jsx("span",{children:"Sending email to insurance company..."})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full animate-pulse"}),u.jsx("span",{children:"Updating claim status..."})]})]})]})}):o==="success"?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[u.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Claim Submitted!"}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Your claim for ",u.jsx("strong",{children:e?.name||"your pet"})," has been automatically submitted to ",u.jsx("strong",{children:j}),"."]}),u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"What happens next:"}),u.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-400 space-y-1",children:[u.jsxs("li",{children:[" Claim form PDF sent to ",j]}),u.jsx("li",{children:" Copy sent to your email (BCC)"}),u.jsx("li",{children:' Claim status updated to "Submitted"'}),u.jsx("li",{children:" Insurance company will review (typically 5-10 business days)"})]})]}),d&&u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6",children:u.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 font-mono break-all",children:["Tracking ID: ",d.slice(0,20),"..."]})}),u.jsx("button",{onClick:()=>{i(d),n()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold w-full",children:"Done"})]})}):o==="error"?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[u.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Submission Failed"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"We couldn't submit your claim automatically."}),u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:u.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[u.jsx("strong",{children:"Error:"})," ",m]})}),u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6 text-left",children:[u.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Next steps:"}),u.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[u.jsx("li",{children:" Try again in a few minutes"}),u.jsx("li",{children:" Or manually mark as submitted after filing yourself"}),u.jsx("li",{children:" Contact support if the problem persists"})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>l("confirm"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"}),u.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})}):u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),u.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Auto-Submit Claim to ",j,"?"]}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Review the claim details before submitting"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6",children:[u.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:"Claim Summary"}),u.jsxs("div",{className:"space-y-3 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pet:"}),u.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e?.name||"Unknown"," (",e?.species||"Pet",")"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Clinic:"}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r.clinic_name||"N/A"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Service Date:"}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r.service_date||"N/A"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagnosis:"}),u.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-right max-w-xs line-clamp-2",children:r.visit_title||r.diagnosis||"N/A"})]}),u.jsxs("div",{className:"pt-3 border-t border-blue-200 dark:border-blue-700 flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-semibold",children:"Total Amount:"}),u.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:K})]})]})]}),B.length>0&&u.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4 mb-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-1",children:"Missing Information"}),u.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"The following information is missing from your claim:"}),u.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 list-disc list-inside",children:B.map((U,z)=>u.jsx("li",{children:U},z))}),u.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-2",children:"You can still submit, but the insurance company may request additional information."})]})]})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("button",{onClick:$,disabled:w,className:"w-full py-3 px-4 border-2 border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Generating Preview..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),"Preview Claim Form PDF"]})}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Review before submitting"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl p-6 mb-6",children:[u.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"What will happen:"}),u.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"1."}),u.jsx("span",{children:"Generate professional claim form PDF with all details"})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"2."}),u.jsxs("span",{children:["Email claim form to ",u.jsx("strong",{children:j})," at their claims processing address"]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"3."}),u.jsx("span",{children:"Send you a copy (BCC) so you have a record"})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"4."}),u.jsx("span",{children:'Update claim status to "Submitted" in your dashboard'})]})]})]}),u.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Test Mode Active"}),u.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["This submission will be sent to ",u.jsx("strong",{children:"larry@uglydogadventures.com"})," for testing, not to the actual insurance company. Perfect for testing!"]})]})]})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:le,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all",children:[" Submit to ",j]}),u.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})})}function u4({userId:r,initialSignature:e,onSave:t}){const n=ve.useRef(null),[i,o]=ve.useState(e||null),[l,d]=ve.useState(!1),[h,m]=ve.useState(null),[v,w]=ve.useState(!1);ve.useEffect(()=>{e&&o(e)},[e]);const k=()=>{n.current?.clear(),w(!1),m(null)},x=async()=>{if(!n.current||n.current.isEmpty()){m({type:"error",text:"Please draw your signature first"});return}d(!0),m(null);try{const E=n.current.toDataURL("image/png"),{error:j}=await At.from("profiles").update({signature:E}).eq("id",r);if(j)throw j;o(E),m({type:"success",text:"Signature saved successfully!"}),t&&t(E),setTimeout(()=>m(null),3e3)}catch(E){console.error("Error saving signature:",E),m({type:"error",text:"Failed to save signature. Please try again."})}finally{d(!1)}},T=()=>{o(null),w(!1),setTimeout(()=>{n.current?.clear()},0)},C=()=>{w(!0),m(null)};return u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Signature"}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will be used on your insurance claim forms"})]}),i?u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-green-800",children:"Signature Saved"}),u.jsx("button",{onClick:T,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),u.jsx("div",{className:"bg-white rounded border border-green-300 p-4",children:u.jsx("img",{src:i,alt:"Your signature",className:"max-w-full h-auto",style:{maxHeight:"120px"}})})]})}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[!v&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("span",{className:"text-gray-400 text-sm italic",children:"Sign here with your mouse or finger"})}),u.jsx(bd,{ref:n,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(249, 250, 251)",penColor:"rgb(0, 0, 0)",onBegin:C})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:k,disabled:!v||l,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear"}),u.jsx("button",{onClick:x,disabled:!v||l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:l?"Saving...":"Save Signature"})]}),h&&u.jsx("div",{className:`p-3 rounded-lg text-sm ${h.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:h.text})]}),u.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("p",{className:"text-xs text-blue-800",children:[u.jsx("strong",{children:"Note:"})," Your signature will be included on all insurance claim submissions. Make sure it matches the signature on file with your insurance company."]})})]})}function c4(){const[r,e]=ve.useState([]),[t,n]=ve.useState([]),[i,o]=ve.useState(!0),[l,d]=ve.useState(null),[h,m]=ve.useState("all"),[v,w]=ve.useState("all"),[k,x]=ve.useState("email"),[T,C]=ve.useState("asc"),[E,j]=ve.useState(null);ve.useEffect(()=>{K()},[]);async function K(){try{o(!0),d(null);const{data:I,error:W}=await At.from("profiles").select("*").order("created_at",{ascending:!1});if(W)throw W;const O=I.filter(Y=>{const A=(Y.email||"").toLowerCase();return!A.includes("larry")&&!A.includes("uglydogadventures")&&!A.includes("dogstrainedright")}),F=new Set(O.map(Y=>Y.id)),{data:Z,error:ee}=await At.from("pets").select("*");if(ee)throw ee;const ae=Z.filter(Y=>F.has(Y.user_id)),{data:he,error:be}=await At.from("claims").select("*");if(be)throw be;const ne=he.filter(Y=>F.has(Y.user_id)),fe=O.map(Y=>{const A=ae.filter(se=>se.user_id===Y.id),H=ne.filter(se=>se.user_id===Y.id),Q=H.reduce((se,ye)=>se+(ye.total_amount||0),0);let ie="inactive";return H.length>0?ie="active":A.length>0&&(ie="pet-only"),{profile:Y,pets:A,claims:H,petsCount:A.length,claimsCount:H.length,totalClaimAmount:Q,lastActive:Y.updated_at||Y.created_at,status:ie}}),ke=ne.map(Y=>{const A=O.find(Q=>Q.id===Y.user_id),H=ae.find(Q=>Q.id===Y.pet_id);return{...Y,userEmail:A?.email||"Unknown",userName:A?.full_name||"Unknown",petName:H?.name||"Unknown",insuranceCompany:H?.insurance_company||"Unknown"}});e(fe),n(ke)}catch(I){console.error("Error loading admin data:",I),d(I.message)}finally{o(!1)}}const B=ve.useMemo(()=>{const I=r.filter(ne=>ne.status==="active").length,W=r.filter(ne=>ne.status==="inactive").length,O=r.reduce((ne,fe)=>ne+fe.petsCount,0),F=t.length,Z=t.reduce((ne,fe)=>ne+(fe.total_amount||0),0),ee=t.filter(ne=>ne.filing_status==="draft").length,ae=t.filter(ne=>ne.filing_status==="submitted").length,he=t.filter(ne=>ne.filing_status==="paid").length,be={};return t.forEach(ne=>{const fe=ne.insuranceCompany||"Unknown";be[fe]=(be[fe]||0)+1}),{totalUsers:r.length,activeUsers:I,inactiveUsers:W,totalPets:O,totalClaims:F,totalAmount:Z,draftClaims:ee,submittedClaims:ae,paidClaims:he,insuranceBreakdown:be}},[r,t]),$=ve.useMemo(()=>[...r].sort((W,O)=>{let F,Z;switch(k){case"email":F=W.profile.email,Z=O.profile.email;break;case"name":F=W.profile.full_name||"",Z=O.profile.full_name||"";break;case"petsCount":F=W.petsCount,Z=O.petsCount;break;case"claimsCount":F=W.claimsCount,Z=O.claimsCount;break;case"lastActive":F=new Date(W.lastActive).getTime(),Z=new Date(O.lastActive).getTime();break;default:return 0}return F<Z?T==="asc"?-1:1:F>Z?T==="asc"?1:-1:0}),[r,k,T]),le=ve.useMemo(()=>t.filter(I=>!(h!=="all"&&I.filing_status!==h||v!=="all"&&I.insuranceCompany!==v)),[t,h,v]);function me(I){k===I?C(T==="asc"?"desc":"asc"):(x(I),C("asc"))}function U(I){switch(I){case"active":return"bg-green-100 text-green-800";case"pet-only":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function z(I){switch(I){case"submitted":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800"}}return i?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):l?u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[u.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading admin data"}),u.jsx("p",{className:"text-red-600 mt-2",children:l})]})}):u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"System overview and user management"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Users"}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:B.totalUsers}),u.jsxs("div",{className:"mt-2 text-sm",children:[u.jsxs("span",{className:"text-green-600",children:["Active: ",B.activeUsers]}),u.jsx("span",{className:"text-gray-400 mx-2",children:""}),u.jsxs("span",{className:"text-red-600",children:["Inactive: ",B.inactiveUsers]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Pets"}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:B.totalPets}),u.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Across all users"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Claims"}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:B.totalClaims}),u.jsxs("div",{className:"mt-2 text-sm",children:[u.jsxs("span",{className:"text-gray-600",children:["Draft: ",B.draftClaims]}),u.jsx("span",{className:"text-gray-400 mx-2",children:""}),u.jsxs("span",{className:"text-blue-600",children:["Submitted: ",B.submittedClaims]}),u.jsx("span",{className:"text-gray-400 mx-2",children:""}),u.jsxs("span",{className:"text-green-600",children:["Paid: ",B.paidClaims]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Amount"}),u.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",B.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All claims combined"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims by Insurance Company"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(B.insuranceBreakdown).map(([I,W])=>u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:I}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:W})]},I))})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[u.jsx("div",{className:"px-6 py-4 border-b",children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Users"})}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>me("email"),children:["Email ",k==="email"&&(T==="asc"?"":"")]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>me("name"),children:["Name ",k==="name"&&(T==="asc"?"":"")]}),u.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>me("petsCount"),children:["Pets ",k==="petsCount"&&(T==="asc"?"":"")]}),u.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>me("claimsCount"),children:["Claims ",k==="claimsCount"&&(T==="asc"?"":"")]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>me("lastActive"),children:["Last Active ",k==="lastActive"&&(T==="asc"?"":"")]}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(I=>u.jsxs(pm.Fragment,{children:[u.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>j(E===I.profile.id?null:I.profile.id),children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.profile.email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.profile.full_name||"-"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:I.petsCount}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:I.claimsCount}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(I.lastActive).toLocaleDateString()}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${U(I.status)}`,children:I.status})})]}),E===I.profile.id&&u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"User Details"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",I.profile.phone_number||"Not set"]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Timezone:"})," ",I.profile.timezone||"Not set"]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"SMS Opt-in:"})," ",I.profile.sms_opt_in?"Yes":"No"]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Email Reminders:"})," ",I.profile.email_reminders?"Yes":"No"]})]})]}),I.pets.length>0&&u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Pets (",I.pets.length,")"]}),u.jsx("div",{className:"space-y-2",children:I.pets.map(W=>u.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[u.jsxs("div",{className:"font-medium",children:[W.name," - ",W.species]}),u.jsxs("div",{className:"text-gray-600",children:[W.insurance_company,"  Policy: ",W.policy_number||"Not set"]})]},W.id))})]}),I.claims.length>0&&u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Recent Claims (",I.claims.length,") - Total: $",I.totalClaimAmount.toFixed(2)]}),u.jsxs("div",{className:"space-y-2",children:[I.claims.slice(0,5).map(W=>u.jsx("div",{className:"bg-white border rounded p-3 text-sm",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:W.clinic_name||"Unknown Clinic"}),u.jsxs("div",{className:"text-gray-600",children:[W.service_date?new Date(W.service_date).toLocaleDateString():"No date","  $",W.total_amount?.toFixed(2)||"0.00"]})]}),u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${z(W.filing_status||"draft")}`,children:W.filing_status||"draft"})]})},W.id)),I.claims.length>5&&u.jsxs("div",{className:"text-sm text-gray-600",children:["+ ",I.claims.length-5," more claims"]})]})]})]})})})]},I.profile.id))})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow",children:[u.jsx("div",{className:"px-6 py-4 border-b",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Claims"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("select",{value:h,onChange:I=>m(I.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[u.jsx("option",{value:"all",children:"All Status"}),u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"submitted",children:"Submitted"}),u.jsx("option",{value:"paid",children:"Paid"})]}),u.jsxs("select",{value:v,onChange:I=>w(I.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[u.jsx("option",{value:"all",children:"All Insurance"}),Object.keys(B.insuranceBreakdown).map(I=>u.jsx("option",{value:I,children:I},I))]})]})]})}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Date"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insurance"}),u.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PDF"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map(I=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm text-gray-900",children:I.userName}),u.jsx("div",{className:"text-sm text-gray-500",children:I.userEmail})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.petName}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.service_date?new Date(I.service_date).toLocaleDateString():"-"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",I.total_amount?.toFixed(2)||"0.00"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${z(I.filing_status||"draft")}`,children:I.filing_status||"draft"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.insuranceCompany}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:I.pdf_path?u.jsx("span",{className:"text-green-600",children:""}):u.jsx("span",{className:"text-gray-400",children:"-"})})]},I.id))})]})}),u.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:u.jsxs("div",{className:"flex justify-between items-center text-sm",children:[u.jsxs("span",{className:"text-gray-600",children:["Showing ",le.length," of ",t.length," claims"]}),u.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",le.reduce((I,W)=>I+(W.total_amount||0),0).toFixed(2)]})]})})]})]})}async function p2(r){console.log("[createClaim] inserting",r);const{data:e,error:t}=await At.from("claims").insert(r).select("*").single();if(t)throw t;return e}async function Zi(r){try{console.log("[listClaims] START - userId=",r);const{data:e,error:t}=await At.from("claims").select("*, pets(id, name, species, insurance_company)").eq("user_id",r).order("service_date",{ascending:!1});if(console.log("[listClaims] QUERY RESULT - data:",e,"error:",t),t)throw console.error("[listClaims] ERROR:",t),t;return console.log("[listClaims] SUCCESS - count=",e?.length||0),e}catch(e){throw console.error("[listClaims] EXCEPTION:",e),e}}async function xl(r,e){const{error:t}=await At.from("claims").update(e).eq("id",r);if(t)throw t}async function d4(r){const{error:e}=await At.from("claims").delete().eq("id",r);if(e)throw e}const h4=["test-automation@petclaimhelper.com","larry@uglydogadventures.com"];function f4(){const r=ve.useRef(null),[e,t]=ve.useState(null),[n,i]=ve.useState(!1),[o,l]=ve.useState(!1),[d,h]=ve.useState(null),[m,v]=ve.useState(null),[w,k]=ve.useState([]),[x,T]=ve.useState(null),C=ve.useMemo(()=>w.find(P=>P.id===x)??null,[w,x]),[E,j]=ve.useState(""),[K,B]=ve.useState(""),[$,le]=ve.useState("insured"),[me,U]=ve.useState(!1),[z,I]=ve.useState({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:""}),[W,O]=ve.useState(null),[F,Z]=ve.useState(null),[ee,ae]=ve.useState(""),[he,be]=ve.useState(""),[ne,fe]=ve.useState(""),[ke,Y]=ve.useState(""),[A,H]=ve.useState(""),[Q,ie]=ve.useState(""),[se,ye]=ve.useState(null),[ce,Ae]=ve.useState(null),[Pe,ze]=ve.useState("signup"),[He,Je]=ve.useState(null),[dt,X]=ve.useState([]),[Qe,Yt]=ve.useState(!1),[Ct,$e]=ve.useState(null),wt=ve.useRef(null),st=ve.useRef(null),[ot,tt]=ve.useState([]),[hr,tr]=ve.useState(0),[Wt,rr]=ve.useState(!1),[Lt,ft]=ve.useState("all"),[Ot,it]=ve.useState("app"),[$r,nr]=ve.useState(!1),[kt,Kt]=ve.useState(null),[Nr,_t]=ve.useState(null),[mr,Et]=ve.useState(""),[Rt,fr]=ve.useState(""),[zt,Pt]=ve.useState(""),[ur,fi]=ve.useState(""),[Wr,Zn]=ve.useState([]),[Bn,St]=ve.useState("insured"),[cs,ds]=ve.useState(!1),[Mr,Tn]=ve.useState(null),[br,Ur]=ve.useState(""),[Vr,qs]=ve.useState(Zs()),[Ti,hs]=ve.useState(!1),[mi,vn]=ve.useState(null),[Jr,qn]=ve.useState(null),[ta,Xn]=ve.useState(!1),[Oi,ws]=ve.useState(!1),[Ii,pi]=ve.useState([]),[oo,jr]=ve.useState([]);function Zs(){const P=new Date,de=P.getFullYear(),Ne=String(P.getMonth()+1).padStart(2,"0"),Le=String(P.getDate()).padStart(2,"0");return`${de}-${Ne}-${Le}`}const[ra,Qn]=ve.useState(null),zs=P=>{Qn({message:P}),setTimeout(()=>Qn(null),2500)},[lo,Fa]=ve.useState(null),[Di,fs]=ve.useState(null),[uo,Zr]=ve.useState(!1),[na,Bo]=ve.useState(null),[tn,sa]=ve.useState(0),[zn,_s]=ve.useState(null),[Fi,ms]=ve.useState(null),[Xr,Ns]=ve.useState(null),[Ma,Xs]=ve.useState(null);ve.useEffect(()=>{m&&requestAnimationFrame(()=>{document.body.offsetHeight})},[m]);const[ia,ks]=ve.useState(!1),gi=P=>P.trim().toLowerCase(),cr=(P,de)=>{const Ne=gi(P),Le=gi(de),Be=Ne.length,Ke=Le.length;if(Be===0)return Ke;if(Ke===0)return Be;const et=Array.from({length:Be+1},()=>Array(Ke+1).fill(0));for(let rt=0;rt<=Be;rt++)et[rt][0]=rt;for(let rt=0;rt<=Ke;rt++)et[0][rt]=rt;for(let rt=1;rt<=Be;rt++)for(let Xe=1;Xe<=Ke;Xe++){const y=Ne[rt-1]===Le[Xe-1]?0:1;et[rt][Xe]=Math.min(et[rt-1][Xe]+1,et[rt][Xe-1]+1,et[rt-1][Xe-1]+y)}return et[Be][Ke]},aa=(P,de)=>{const Ne=gi(P),Le=gi(de);if(!Ne||!Le)return 0;if(Ne===Le)return 1;if(Ne.includes(Le)||Le.includes(Ne))return .92;const Be=cr(Ne,Le),Ke=Math.max(Ne.length,Le.length);return 1-Be/(Ke||1)},Mi=(P,de)=>{const Ne=Array(P.length).fill(null),Le=new Set;return P.forEach((Be,Ke)=>{const rt=de.map(Xe=>({id:Xe.id,score:aa(Be.petName||"",Xe.name||"")})).sort((Xe,y)=>y.score-Xe.score).find(Xe=>Xe.score>=.8&&!Le.has(Xe.id));rt&&(Ne[Ke]=rt.id,Le.add(rt.id))}),Ne};ve.useEffect(()=>{try{console.log("[auth] calling getSession()")}catch{}At.auth.getSession().then(async({data:de})=>{try{console.log("[auth] getSession() result:",{hasSession:!!de?.session,userId:de?.session?.user?.id||null})}catch{}const Ne=de.session;if(Ne?.user){ye(Ne.user.email??null),Ae(Ne.user.id),ze("app"),xg(Ne.user.id,Ne.user.email??null).catch(()=>{});try{const Le=Intl.DateTimeFormat().resolvedOptions().timeZone;yg(Le).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",Ne.user.id)}catch{}Promise.all([Yc(Ne.user.id),At.from("profiles").select("onboarding_complete").eq("id",Ne.user.id).single()]).then(([Le,Be])=>{k(Le);const Ke=Be.data?.onboarding_complete??!1;vn(Ke),(Le||[]).length===0&&!Ke&&hs(!0)}).catch(Le=>{console.error("[auth] dbLoadPets failed:",Le),k([])}),Zi(Ne.user.id).then(tt).catch(Le=>{console.error("[auth] listClaims failed:",Le),tt([])})}else{try{console.log("[auth] getSession() no session found - showing signup")}catch{}ze("signup")}}).catch(de=>{try{console.error("[auth] getSession() error:",de)}catch{}ze("signup")});const{data:P}=At.auth.onAuthStateChange(async(de,Ne)=>{try{console.log("[auth] onAuthStateChange:",{event:de,hasSession:!!Ne,userId:Ne?.user?.id||null})}catch{}if(Ne?.user){ye(Ne.user.email??null),Ae(Ne.user.id),ze("app"),xg(Ne.user.id,Ne.user.email??null).catch(()=>{});try{const Le=localStorage.getItem("pending_sms_consent");if(Le){console.log("[auth] Found pending SMS consent, saving to database...");const Be=JSON.parse(Le);let Ke=null;try{Ke=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,console.log("[auth] IP address fetched:",Ke)}catch(y){console.log("[auth] Could not fetch IP address:",y)}const et={user_id:Ne.user.id,phone_number:Be.phone_number,consented:Be.consented,consent_text:Be.consent_text,ip_address:Ke};console.log("[auth] Inserting SMS consent data:",et);const{data:rt,error:Xe}=await At.from("sms_consent").insert(et).select();Xe?(console.error("[auth] Failed to save SMS consent:",Xe),console.error("[auth] Consent error details:",JSON.stringify(Xe,null,2))):(console.log("[auth] SMS consent saved successfully!",rt),localStorage.removeItem("pending_sms_consent"),console.log("[auth] Cleared pending SMS consent from localStorage"))}}catch(Le){console.error("[auth] Error processing pending SMS consent:",Le)}try{const Le=Intl.DateTimeFormat().resolvedOptions().timeZone;yg(Le).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",Ne.user.id)}catch{}Promise.all([Yc(Ne.user.id),At.from("profiles").select("onboarding_complete").eq("id",Ne.user.id).single()]).then(([Le,Be])=>{k(Le);const Ke=Be.data?.onboarding_complete??!1;vn(Ke),(Le||[]).length===0&&!Ke&&hs(!0)}).catch(Le=>{console.error("[auth] dbLoadPets failed:",Le),k([])}),Zi(Ne.user.id).then(tt).catch(Le=>{console.error("[auth] listClaims failed:",Le),tt([])})}else{ye(null),Ae(null),k([]);try{console.log("[auth] onAuthStateChange - signed out, clearing state")}catch{}ze("signup")}});return()=>{P.subscription.unsubscribe()}},[]),ve.useEffect(()=>{if(!ce){nr(!1);return}At.from("profiles").select("is_admin").eq("id",ce).single().then(({data:P,error:de})=>{if(de){console.error("[admin] Failed to load admin status:",de),nr(!1);return}nr(P?.is_admin===!0)}).catch(()=>nr(!1))},[ce]),ve.useEffect(()=>{w&&w.length===1&&T(P=>P||w[0].id)},[w]),ve.useEffect(()=>{if(localStorage.getItem("justCompletedOnboarding")==="true"&&w&&w.length>0)if(w.some(Ne=>!Ne.photo_url)){ks(!0);const Ne=setTimeout(()=>{ks(!1),localStorage.removeItem("justCompletedOnboarding")},5e3),Le=()=>{ks(!1),localStorage.removeItem("justCompletedOnboarding"),document.removeEventListener("click",Le)};return document.addEventListener("click",Le),()=>{clearTimeout(Ne),document.removeEventListener("click",Le)}}else localStorage.removeItem("justCompletedOnboarding")},[w]),ve.useEffect(()=>{const P=window.location.pathname,de=new URLSearchParams(window.location.search),Ne=P.match(/^\/dose\/([a-f0-9-]+)$/i);if(Ne&&(de.get("token")||de.get("action")==="mark")){const Le=Ne[1];Bo(Le),it("medications")}},[]),ve.useEffect(()=>{try{localStorage.removeItem("pch.finPeriod")}catch{}},[]),ve.useEffect(()=>{tr(P=>(console.log("[App]  Incrementing dataRefreshToken:",P,"",P+1,"| pets count:",w.length),P+1))},[ot,w,Lt]),ve.useEffect(()=>{kt&&(_t(kt.pet_id||null),Et(kt.service_date||""),Pt(kt.visit_title||""),fr(kt.diagnosis||""),fi(kt.visit_notes||""),Zn(Array.isArray(kt.line_items)?kt.line_items:[]),St(kt.expense_category||"insured"))},[kt]);const co=()=>{const P=z.name.trim();if(!P)return;if(!ee||ee==="NO_INSURANCE")z.insuranceCompany="",z.filing_deadline_days="",z.policyNumber="";else if(ee==="Custom Insurance"){const Be=ne.trim(),Ke=Number(ke);if(!Be){alert("Enter custom insurance company name");return}if(!Number.isFinite(Ke)||Ke<1||Ke>365){alert("Deadline must be 1-365 days");return}z.insuranceCompany=Be,z.filing_deadline_days=Ke}else z.insuranceCompany=ee,z.filing_deadline_days=90;const de=globalThis.crypto?.randomUUID?.()??String(Date.now()),Ne={id:de,name:P,species:z.species,insuranceCompany:z.insuranceCompany||"",policyNumber:(z.policyNumber||"").trim(),ownerName:"",ownerPhone:"",filing_deadline_days:z.filing_deadline_days,monthly_premium:z.monthly_premium===""?null:Number(z.monthly_premium),deductible_per_claim:z.deductible_per_claim===""?null:Number(z.deductible_per_claim),insurance_pays_percentage:z.insurance_pays_percentage===""?null:Number(z.insurance_pays_percentage)/100,annual_coverage_limit:null,coverage_start_date:z.coverage_start_date||null},Le=[...w,Ne];if(k(Le),ce&&Xf(ce,Ne).catch(Be=>{console.error("[addPet] upsert error",Be)}),Ct!==null){const Be=[...dt];Be[Ct]=de,X(Be),$e(null)}else T(de);U(!1),I({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:""}),ae(""),fe(""),Y("")},qo=P=>{O(P.id),Z({name:P.name,species:P.species,insuranceCompany:P.insuranceCompany,filing_deadline_days:P.filing_deadline_days||"",monthly_premium:P.monthly_premium??"",deductible_per_claim:P.deductible_per_claim??"",coverage_start_date:P.coverage_start_date||"",insurance_pays_percentage:P.insurance_pays_percentage!=null?Math.round(Number(P.insurance_pays_percentage)*100):"",policyNumber:P.policyNumber||"",healthy_paws_pet_id:P.healthy_paws_pet_id||""});const de=["Trupanion","Nationwide","Healthy Paws","Fetch"];!P.insuranceCompany||P.insuranceCompany===""?(be("NO_INSURANCE"),H(""),ie("")):de.includes(P.insuranceCompany)?(be(P.insuranceCompany),H(""),ie(String(P.filing_deadline_days||""))):(be("Custom Insurance"),H(P.insuranceCompany),ie(String(P.filing_deadline_days||"")))},zo=async()=>{if(console.log("[saveEdit]  Save started",{editingPetId:W,editPet:F}),!W||!F)return;let P="",de="";if(!he||he==="NO_INSURANCE")P="",de="";else if(he==="Custom Insurance"){const Be=A.trim(),Ke=Number(Q);if(!Be){alert("Enter custom insurance company name");return}if(!Number.isFinite(Ke)||Ke<1||Ke>365){alert("Deadline must be 1-365 days");return}P=Be,de=Ke}else P=he,de=90;const Ne=w.map(Be=>Be.id===W?{...Be,name:F.name.trim(),species:F.species,insuranceCompany:P,policyNumber:(F.policyNumber||"").trim(),ownerName:Be.ownerName||"",ownerPhone:Be.ownerPhone||"",filing_deadline_days:de,monthly_premium:F.monthly_premium===""?null:Number(F.monthly_premium),deductible_per_claim:F.deductible_per_claim===""?null:Number(F.deductible_per_claim),coverage_start_date:F.coverage_start_date||null,insurance_pays_percentage:F.insurance_pays_percentage===""?null:Number(F.insurance_pays_percentage)/100,annual_coverage_limit:Be.annual_coverage_limit??null,healthy_paws_pet_id:F.healthy_paws_pet_id||null}:Be),Le=Ne.find(Be=>Be.id===W);if(console.log("[saveEdit]  Pet data to save:",Le),ce){const Be=Ne.find(Ke=>Ke.id===W);if(Be)try{console.log("[saveEdit]  Starting dbUpsertPet..."),await Xf(ce,Be),console.log("[saveEdit]  dbUpsertPet complete"),console.log("[saveEdit]  Starting dbLoadPets...");const Ke=await Yc(ce);console.log("[saveEdit]  dbLoadPets complete, got",Ke.length,"pets"),console.log("[saveEdit]  Refreshed pet data:",Ke.find(et=>et.id===W)),k(Ke),console.log("[saveEdit]  State updated with fresh DB data"),tr(et=>(console.log("[saveEdit]  Forcing dataRefreshToken increment:",et,"",et+1),et+1)),console.log("[saveEdit]  Financial Summary refresh triggered")}catch(Ke){console.error("[saveEdit]  Error:",Ke),k(Ne)}}else k(Ne);O(null),Z(null),console.log("[saveEdit]  Save complete")},Ra=()=>r.current?.click(),Ua=async()=>{try{console.log("[auth] signOut() called")}catch{}const{error:P}=await At.auth.signOut();try{console.log("[auth] signOut() result:",P||null)}catch{}try{const{data:de}=await At.auth.getSession();console.log("[auth] post-signOut getSession():",{hasSession:!!de?.session})}catch{}},$n=P=>{if(console.log("[MOBILE DEBUG] ========== processFile CALLED =========="),console.log("[MOBILE DEBUG] file:",P),console.log("[MOBILE DEBUG] file type:",P?.type),console.log("[MOBILE DEBUG] file size:",P?.size),!P){console.log("[MOBILE DEBUG] No file provided, setting selectedFile to null"),t(null);return}if(!(P.type.startsWith("image/")||P.type==="application/pdf")){console.log("[MOBILE DEBUG] File type not allowed:",P.type),t(null);return}const Ne=P.type.startsWith("image/"),Le=Ne?URL.createObjectURL(P):void 0;console.log("[MOBILE DEBUG] Setting selectedFile:",{fileName:P.name,fileType:P.type,isImage:Ne,objectUrl:Le}),t({file:P,objectUrl:Le}),v(null),h(null)},Qs=P=>{console.log("[MOBILE DEBUG] ========== handleChange CALLED =========="),console.log("[MOBILE DEBUG] e.target.files:",P.target.files),console.log("[MOBILE DEBUG] e.target.files?.[0]:",P.target.files?.[0]),$n(P.target.files?.[0])},es=P=>{P.preventDefault(),P.stopPropagation(),i(!0)},Ss=P=>{P.preventDefault(),P.stopPropagation(),i(!0)},oa=P=>{P.preventDefault(),P.stopPropagation(),i(!1)},Tt=P=>{P.preventDefault(),P.stopPropagation(),i(!1);const de=P.dataTransfer;if(!de)return;const Ne=de.files?.[0]??null;$n(Ne)},ei=ve.useMemo(()=>{if(!e)return"";const{size:P}=e.file,de=1024,Ne=de*1024;return P<de?`${P} B`:P<Ne?`${(P/de).toFixed(1)} KB`:`${(P/Ne).toFixed(2)} MB`},[e]),El=P=>{const de=typeof P?.clinicName=="string"?P.clinicName:typeof P?.clinic_name=="string"?P.clinic_name:"",Ne=typeof P?.clinicAddress=="string"?P.clinicAddress:typeof P?.clinic_address=="string"?P.clinic_address:"",Le=typeof P?.clinicPhone=="string"?P.clinicPhone:typeof P?.clinic_phone=="string"?P.clinic_phone:void 0,Be=typeof P?.petName=="string"?P.petName:typeof P?.pet_name=="string"?P.pet_name:"",Ke=typeof P?.dateOfService=="string"?P.dateOfService:typeof P?.service_date=="string"?P.service_date:"",et=typeof P?.totalAmount=="string"?P.totalAmount:P?.total_amount!=null?String(P.total_amount):"",rt=typeof P?.invoiceNumber=="string"?P.invoiceNumber:typeof P?.invoice_number=="string"?P.invoice_number:void 0,y=(Array.isArray(P?.lineItems)?P.lineItems:Array.isArray(P?.line_items)?P.line_items:[]).map(L=>({description:typeof L?.description=="string"?L.description:"",amount:typeof L?.amount=="string"?L.amount:L?.amount!=null?String(L.amount):""}));return{clinicName:de,clinicAddress:Ne,clinicPhone:Le,petName:Be,dateOfService:Ke,totalAmount:et,diagnosis:typeof P?.diagnosis=="string"?P.diagnosis:"",lineItems:y,invoiceNumber:rt}},$o=P=>{if(!P||!Array.isArray(P.pets))return null;const de=P.pets.map(Ne=>({petName:typeof Ne?.petName=="string"?Ne.petName:"",petSpecies:typeof Ne?.petSpecies=="string"?Ne.petSpecies:void 0,lineItems:Array.isArray(Ne?.lineItems)?Ne.lineItems.map(Le=>({description:typeof Le?.description=="string"?Le.description:"",amount:typeof Le?.amount=="string"?Le.amount:String(Le?.amount??"")})):[],subtotal:typeof Ne?.subtotal=="string"?Ne.subtotal:void 0}));return{clinicName:typeof P?.clinicName=="string"?P.clinicName:"",clinicAddress:typeof P?.clinicAddress=="string"?P.clinicAddress:"",clinicPhone:typeof P?.clinicPhone=="string"?P.clinicPhone:typeof P?.clinic_phone=="string"?P.clinic_phone:void 0,dateOfService:typeof P?.dateOfService=="string"?P.dateOfService:"",diagnosis:typeof P?.diagnosis=="string"?P.diagnosis:"",pets:de,invoiceNumber:typeof P?.invoiceNumber=="string"?P.invoiceNumber:void 0}},Wn=P=>{const de=(P||"").replace(/[^0-9.\-]/g,""),Ne=parseFloat(de);return Number.isFinite(Ne)?Ne:0},ti=P=>`$${P.reduce((Ne,Le)=>Ne+Wn(Le.amount),0).toFixed(2)}`,ho=async(P,de,Ne)=>{try{console.log("[uploadClaimPdf] Starting upload...",{uid:P,claimId:de,blobSize:Ne.size,blobType:Ne.type});const Le=`${P}/${de}.pdf`,{error:Be}=await At.storage.from("claim-pdfs").upload(Le,Ne,{upsert:!0,contentType:"application/pdf"});if(Be)throw Be;return console.log("[uploadClaimPdf]  Storage upload successful, updating claim record..."),await xl(de,{pdf_path:Le}),console.log("[uploadClaimPdf]  Claim record updated with pdf_path:",Le),Le}catch(Le){return console.error("[uploadClaimPdf]  ERROR:",Le),null}},Ba=async(P,de)=>{if(!ce){Xs("Please log in to upload photos");return}const Ne=5*1024*1024;if(de.size>Ne){Xs("Photo must be smaller than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(de.type)){Xs("Please upload a PNG or JPEG image");return}Ns(P),Xs(null);try{const Be=de.name.split(".").pop()||"jpg",Ke=Date.now(),et=`${ce}/${P}-${Ke}.${Be}`,{error:rt}=await At.storage.from("pet-photos").upload(et,de,{upsert:!0,contentType:de.type});if(rt)throw rt;const{data:Xe}=At.storage.from("pet-photos").getPublicUrl(et);if(!Xe?.publicUrl)throw new Error("Failed to get public URL");const y=w.find(ue=>ue.id===P);if(!y)throw new Error("Pet not found");const L={...y,photo_url:Xe.publicUrl};await Xf(ce,L);const J=await Yc(ce);k(J),zs("Photo uploaded successfully!")}catch(Be){console.error("[uploadPetPhoto] error",Be),Xs(Be?.message||"Failed to upload photo. Please try again.")}finally{Ns(null)}},la=async(P,de)=>{const Ne=de.target.files?.[0];Ne&&(await Ba(P,Ne),de.target.value="")},[Wo,ri]=ve.useState(!1),ua=async()=>{if(console.log("[MOBILE DEBUG] ========== handleProcess CALLED =========="),console.log("[MOBILE DEBUG] selectedFile:",e),console.log("[MOBILE DEBUG] typeof selectedFile:",typeof e),console.log("[MOBILE DEBUG] selectedFile?.file:",e?.file),!e){console.log("[MOBILE DEBUG]  EARLY RETURN - No selectedFile!");return}l(!0),h(null);try{console.log("[extract] starting server-side extraction, file type:",e.file.type),console.log("[extract] file size:",e.file.size),console.log("[extract] file name:",e.file.name);const P="https://pet-claim-helper.onrender.com",de=new FormData;de.append("file",e.file);const Ne=new AbortController,Be=setTimeout(()=>{try{Ne.abort()}catch{}},9e4),Ke=await fetch(`${P}/api/extract-pdf`,{method:"POST",body:de,signal:Ne.signal});if(clearTimeout(Be),!Ke.ok){const L=await Ke.text().catch(()=>"");throw new Error(L||`Server error (${Ke.status})`)}const et=await Ke.json();if(console.log("[MOBILE DEBUG] Full JSON response:",JSON.stringify(et,null,2)),!et||et.ok!==!0||!et.data)throw console.error("[extract] bad response shape",et),new Error("Invalid extraction response");const rt=et.data;if(console.log("[MOBILE DEBUG] Parsed data from server:",JSON.stringify(rt,null,2)),!rt)throw console.error("[extract] empty parsed data from server response"),new Error("Could not parse JSON from server response.");const Xe=$o(rt);if(Xe&&Xe.pets.length>1){console.log("[MOBILE DEBUG] Multi-pet extraction detected:",Xe),Je(Xe),v(null);const L=Mi(Xe.pets,w);X(L);return}const y=El(rt);console.log("[MOBILE DEBUG] Normalized extraction result:",JSON.stringify(y,null,2)),C&&(y.petName=C.name),console.log("[MOBILE DEBUG] Final extraction being set to state:",JSON.stringify(y,null,2)),v(y),Je(null)}catch(P){const de=String(P?.message||""),Le=String(P?.name||"")==="AbortError"||/aborted|timeout/i.test(de),Be=/NetworkError|Failed to fetch|TypeError: Failed to fetch/i.test(de),Ke=P?.error&&(P.error.message||P.error?.error?.message)||de;h(Le?"Extraction timed out. Mobile networks can be slow  please try again. We now wait up to 90 seconds.":Be?"Network error during extraction. Please check your connection and try again.":Ke||"AI extraction failed. Please try again."),console.error("[extract] error:",{name:P?.name,message:P?.message,cause:P?.cause});const et={clinicName:"",clinicAddress:"",clinicPhone:"",petName:C?C.name:"",dateOfService:"",totalAmount:"",diagnosis:"",lineItems:[]};v(et),Je(null)}finally{l(!1)}},Vn=P=>typeof P.filing_deadline_days=="number"&&P.filing_deadline_days>0?P.filing_deadline_days:90,vi=P=>{if(!P.service_date)return null;const de=new Date(P.service_date);return Number.isNaN(de.getTime())?null:de},ca=P=>{const de=vi(P);if(!de)return null;const Ne=new Date(de.getTime());Ne.setDate(Ne.getDate()+Vn(P));const Le=new Date,Be=Ne.getTime()-Le.getTime();return Math.ceil(Be/(1e3*60*60*24))},fo=P=>{switch((P||"not_submitted").toLowerCase()){case"filed":case"submitted":return{text:"Claim - Filed",cls:"bg-emerald-50 text-emerald-700"};case"approved":return{text:"Approved",cls:"bg-emerald-50 text-emerald-700"};case"paid":return{text:"Paid",cls:"bg-emerald-50 text-emerald-700"};case"denied":return{text:"Denied",cls:"bg-rose-50 text-rose-700"};case"not_filed":default:return{text:"Bill - Pending Submission",cls:"bg-blue-50 text-blue-700"}}},qa=P=>{const de=ca(P),Ne=(P.filing_status||"not_submitted").toLowerCase(),Le=Ne==="filed"?"submitted":Ne;return Le==="denied"?{text:" Claim Denied",cls:"bg-red-100 text-red-800 border border-red-300 font-semibold"}:Le==="approved"?{text:" Approved",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:Le==="paid"?{text:" Paid",cls:"bg-green-100 text-green-800 border border-green-200 font-semibold"}:Le==="submitted"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:de===null?{text:"No date",cls:"bg-slate-100 text-slate-600"}:de<0?{text:" DEADLINE PASSED - Submit now!",cls:"bg-red-100 text-red-800 border border-red-300 font-bold"}:de<5?{text:` URGENT - ${de} days`,cls:"bg-red-100 text-red-800 border border-red-300 font-bold animate-pulse"}:de<=14?{text:` Due soon - ${de} days`,cls:"bg-orange-100 text-orange-800 border border-orange-300 font-semibold"}:de<=29?{text:` Due soon - ${de} days`,cls:"bg-yellow-100 text-yellow-800 border border-yellow-300 font-semibold"}:{text:` Plenty of time - ${de} days`,cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}},rn=P=>`$${(typeof P=="number"&&Number.isFinite(P)?P:0).toFixed(2)}`,Ri=ve.useMemo(()=>{const P=[...ot];return P.sort((de,Ne)=>{const Le=vi(de)?.getTime()||0;return(vi(Ne)?.getTime()||0)-Le}),P},[ot]),js=ve.useMemo(()=>{const P=ot.length,de=ot.filter(et=>String(et.expense_category||"insured").toLowerCase()==="insured"),Ne=de.filter(et=>["not_filed","not_submitted"].includes(String(et.filing_status||"not_submitted").toLowerCase())),Le=Ne.reduce((et,rt)=>et+(Number(rt.total_amount)||0),0),Be=de.filter(et=>["filed","submitted"].includes(String(et.filing_status||"").toLowerCase())).length,Ke=Ne.filter(et=>{const rt=ca(et);return rt!==null&&rt>=1&&rt<=14}).length;return{total:P,notFiledCount:Ne.length,notFiledSum:Le,filedPending:Be,expiringSoon:Ke}},[ot]),ps=ve.useMemo(()=>{const P=Ut=>{if(!Ut)return null;const gt=String(Ut).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!gt)return null;const Bt=Number(gt[1]),or=Number(gt[2])-1,wr=Number(gt[3]),Ar=new Date(Bt,or,wr);return Number.isNaN(Ar.getTime())?null:Ar},de=Ut=>{const gt=P(Ut);if(!gt)return 0;const Bt=new Date;if(Lt==="2026"){if(gt.getFullYear()>2026)return 0;const cn=gt.getFullYear()<2026?0:gt.getMonth(),ts=Bt.getFullYear()===2026?Bt.getMonth():11;return Math.max(0,ts-cn+1)}if(Lt==="2025"){if(gt.getFullYear()>2025)return 0;const cn=gt.getFullYear()<2025?0:gt.getMonth(),ts=Bt.getFullYear()===2025?Bt.getMonth():11;return Math.max(0,ts-cn+1)}if(Lt==="2024"){if(gt.getFullYear()>2024)return 0;const cn=gt.getFullYear()<2024?0:gt.getMonth();return Math.max(0,11-cn+1)}const or=Bt,wr=(or.getFullYear()-gt.getFullYear())*12+(or.getMonth()-gt.getMonth())+1;return Math.max(0,wr)},Ne=ot.filter(Ut=>{const gt=Ut.service_date?new Date(Ut.service_date):null;if(!gt||Number.isNaN(gt.getTime()))return!1;if(Lt==="all")return!0;if(Lt==="2026")return gt.getFullYear()===2026;if(Lt==="2025")return gt.getFullYear()===2025;if(Lt==="2024")return gt.getFullYear()===2024;if(Lt==="last12"){const Bt=new Date,or=new Date(Bt.getTime());return or.setDate(or.getDate()-365),gt>=or&&gt<=Bt}return!0}),Le={insured:{sum:0,count:0},not_insured:{sum:0,count:0},maybe_insured:{sum:0,count:0}};let Be=0,Ke=0,et=0,rt=0;const Xe={};let y=0,L=0;const J=new Date;let ue=0,xe=0,Oe=0,Ue=0,lt=0,pt=0;for(const Ut of Ne){const gt=Number(Ut.total_amount||0),Bt=String(Ut.filing_status||"not_filed").toLowerCase(),or=Ut.expense_category||"insured",wr=P(Ut.service_date);if(rt+=gt,Le[or].sum+=gt,Le[or].count+=1,Bt==="paid"){const cn=Number(Ut.reimbursed_amount||0);Be+=cn,or==="insured"&&(pt+=Math.max(0,gt-cn))}else(Bt==="filed"||Bt==="approved")&&(Ke+=gt);if((Bt==="denied"||or==="not_insured")&&(et+=gt),or!=="insured"&&(Ue+=gt),Bt==="approved"&&(y+=gt),wr&&!Number.isNaN(wr.getTime())){if(wr<=J&&(ue+=gt,Bt==="paid")){const cn=Number(Ut.reimbursed_amount||0);L+=cn,xe+=cn}wr<=J&&Bt==="submitted"&&or==="insured"&&(lt+=gt)}const Ar=Ut.pets?.name||"Unknown Pet";Xe[Ar]||(Xe[Ar]={sum:0,count:0}),Xe[Ar].sum+=gt,Xe[Ar].count+=1}for(const Ut of w){const gt=Number(Ut.monthly_premium||0);gt>0&&(Oe+=gt*de(Ut.coverage_start_date||null))}for(const Ut of Ne){const gt=String(Ut.filing_status||"").toLowerCase(),Bt=String(Ut.expense_category||"").toLowerCase();gt==="paid"&&Bt==="insured"&&(Number(Ut.total_amount||0),Math.max(0,Number(Ut.deductible_applied)||0),Math.max(0,Number(Ut.reimbursed_amount)||0))}const It=Oe+Ue+pt,$t=Math.max(0,ue-xe);return{byCategory:Le,reimbursed:Be,awaiting:Ke,outOfPocket:et,grandTotal:rt,perPet:Xe,awaitingInsured:y,periodSpent:It,periodReimbursed:L,periodNet:It,definiteTotal:It,pendingTotal:lt,spentOnAllPets:ue,reimbursedPaidPeriod:xe,netCostPeriod:$t}},[ot,Lt]);return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100",children:[ra&&u.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:u.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm shadow-lg border border-slate-700",children:ra.message})}),u.jsx("header",{className:"px-4 pt-2 pb-3 md:py-8 bg-gradient-to-b from-white/50 to-transparent dark:from-slate-900/50",children:u.jsxs("div",{className:"mx-auto max-w-6xl",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center mb-1 md:mb-6",children:[u.jsx("img",{src:"/pch-logo.png",alt:"Pet Claim Helper",className:"w-[70vw] max-w-[320px] md:w-[90vw] md:max-w-[500px] h-auto object-contain mt-1 mb-0 md:mt-0 md:mb-0"}),u.jsx("div",{className:"w-full px-4 mt-4 mb-3 md:mt-6 md:mb-4 animate-fade-in",children:u.jsx("div",{className:"max-w-3xl mx-auto",children:u.jsx("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-[2px] shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02]",children:u.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl px-6 py-4 md:px-8 md:py-5",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 md:gap-4",children:[u.jsx("span",{className:"text-3xl md:text-4xl animate-pulse",children:""}),u.jsxs("div",{className:"text-center md:text-left",children:[u.jsx("div",{className:"font-bold text-lg md:text-xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Coming Soon: Auto-Submit Claims"}),u.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mt-1",children:"One-click submission. Track payments. Never miss deadlines."})]})]})})})})}),u.jsxs("div",{className:"text-base md:text-lg font-bold text-gray-500 dark:text-gray-400 text-center max-w-xl px-4 leading-snug mt-1 mb-3 md:mt-0 md:mb-0",children:[u.jsx("div",{children:"Track Vet Bills. File Pet Insurance Instantly."}),u.jsx("div",{children:"Get Paid Faster."})]})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 flex-wrap mt-2 md:mt-0",children:[Pe==="app"&&u.jsxs("button",{type:"button",onClick:()=>st.current?.scrollIntoView({behavior:"smooth"}),className:"relative inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:["Bills (",ot.length,")",js.expiringSoon>0&&u.jsx("span",{className:"ml-2 inline-block h-2 w-2 rounded-full bg-rose-500","aria-hidden":!0})]}),Pe==="app"&&u.jsx("button",{type:"button",onClick:()=>it(P=>P==="app"?"settings":"app"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Settings"}),Pe==="app"&&u.jsx("button",{type:"button",onClick:()=>it(P=>P==="medications"?"app":"medications"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Medications"}),Pe==="app"&&$r&&u.jsx("button",{type:"button",onClick:()=>it(P=>P==="admin"?"app":"admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Admin Dashboard"}),Pe==="app"&&u.jsx("a",{href:`mailto:support@petclaimhelper.com?subject=Pet Claim Helper Support Request&body=Hi Pet Claim Helper Team,%0D%0A%0D%0AI need help with:%0D%0A%0D%0A----%0D%0AUser: ${se||"Not logged in"}%0D%0AUser ID: ${ce||"N/A"}`,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",title:"Need help? Contact support",children:" Contact Support"}),se&&u.jsxs("span",{className:"hidden sm:inline text-xs text-slate-600 dark:text-slate-300",children:["Logged in as: ",se]}),se&&u.jsx("button",{onClick:Ua,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:"Logout"})]})]})}),u.jsxs("main",{className:"px-6",children:[Pe==="app"&&Ot==="settings"&&u.jsx(g4,{userId:ce,userEmail:se,onClose:()=>it("app"),onDefaultExpenseChange:P=>le(P),onDefaultPeriodChange:P=>ft(P)}),Pe==="app"&&Ot==="medications"&&u.jsx("section",{className:"mx-auto mt-8 max-w-6xl px-2",children:u.jsx(qk,{userId:ce,pets:w,refreshKey:tn})}),Pe==="app"&&Ot==="admin"&&u.jsx(u.Fragment,{children:$r?u.jsx(c4,{}):u.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[u.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),u.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),u.jsx("button",{onClick:()=>it("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),Pe!=="app"&&u.jsx("section",{className:"mx-auto max-w-md mt-8",children:u.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm",children:[u.jsx("div",{className:"px-6 pt-4",children:u.jsxs("div",{className:"flex items-center gap-6 border-b border-slate-200 dark:border-slate-800",children:[u.jsx("button",{type:"button",onClick:()=>ze("signup"),className:["pb-3 text-sm font-medium transition-colors",Pe==="signup"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"].join(" "),children:"Create Account"}),u.jsx("button",{type:"button",onClick:()=>ze("login"),className:["pb-3 text-sm font-medium transition-colors",Pe==="login"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"].join(" "),children:"Sign In"})]})}),u.jsx("div",{className:"p-6",children:u.jsx(m4,{mode:Pe,onSwitch:P=>ze(P)})})]})}),Pe==="app"&&u.jsxs("section",{className:"mx-auto max-w-4xl",ref:wt,children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Your Pets"}),u.jsx("button",{type:"button",onClick:()=>U(P=>!P),className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-1.5 text-sm hover:shadow",children:"+ Add Pet"})]}),Ma&&u.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-800 dark:text-red-200 flex items-start justify-between",children:[u.jsx("span",{children:Ma}),u.jsx("button",{onClick:()=>Xs(null),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:""})]}),me&&u.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 p-4 max-w-2xl mx-auto",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"pet-name",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{id:"pet-name",value:z.name,onChange:P=>I({...z,name:P.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"pet-species",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{id:"pet-species",value:z.species,onChange:P=>I({...z,species:P.target.value}),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{value:"dog",children:"Dog"}),u.jsx("option",{value:"cat",children:"Cat"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Insurance Information (Optional)"}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Skip this section if your pet doesn't have insurance"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-insurance",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),u.jsxs("select",{id:"pet-insurance",value:ee,onChange:P=>{const de=P.target.value;ae(de),de==="NO_INSURANCE"?I({...z,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):de==="Custom Insurance"?I({...z,insuranceCompany:"",filing_deadline_days:""}):de&&I({...z,insuranceCompany:de,filing_deadline_days:90})},className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[u.jsx("option",{value:"",children:" Select "}),u.jsx("option",{value:"Nationwide",children:"Nationwide"}),u.jsx("option",{value:"Trupanion",children:"Trupanion"}),u.jsx("option",{value:"Fetch",children:"Fetch"}),u.jsx("option",{value:"Healthy Paws",children:"Healthy Paws"}),u.jsx("option",{value:"Pets Best",children:"Pets Best"}),u.jsx("option",{value:"ASPCA",children:"ASPCA"}),u.jsx("option",{value:"Embrace",children:"Embrace"}),u.jsx("option",{value:"Figo",children:"Figo"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),ee==="Healthy Paws"&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-healthy-paws-id",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Healthy Paws Pet ID"}),u.jsx("input",{id:"pet-healthy-paws-id",value:z.healthy_paws_pet_id||"",onChange:P=>I({...z,healthy_paws_pet_id:P.target.value}),placeholder:"e.g., 1400806-1",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),ee&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-policy-number",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Policy Number"}),u.jsx("input",{id:"pet-policy-number",value:z.policyNumber||"",onChange:P=>I({...z,policyNumber:P.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-premium",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Monthly Premium (USD)"}),u.jsx("input",{id:"pet-premium",type:"number",min:0,value:String(z.monthly_premium??""),onChange:P=>I({...z,monthly_premium:P.target.value===""?"":Number(P.target.value)}),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-deductible",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Deductible (Annual) (USD)"}),u.jsx("input",{id:"pet-deductible",type:"number",min:0,value:String(z.deductible_per_claim??""),onChange:P=>I({...z,deductible_per_claim:P.target.value===""?"":Number(P.target.value)}),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-insurance-pays",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Pays (%)"}),u.jsx("input",{id:"pet-insurance-pays",type:"number",min:50,max:100,value:String(z.insurance_pays_percentage??""),onChange:P=>I({...z,insurance_pays_percentage:P.target.value===""?"":Number(P.target.value)}),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pet-coverage-start",className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Coverage Start Date"}),u.jsx("input",{id:"pet-coverage-start",type:"date",value:z.coverage_start_date||"",onChange:P=>I({...z,coverage_start_date:P.target.value}),onClick:P=>P.currentTarget.showPicker?.(),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]})]})]}),u.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[u.jsx("button",{type:"button",onClick:co,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",children:"Save Pet"}),u.jsx("button",{type:"button",onClick:()=>U(!1),className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]}),u.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[w.length===0&&u.jsx("div",{className:"col-span-full text-sm text-slate-500 dark:text-slate-400",children:'No pets saved yet. Click "+ Add Pet" to create one.'}),w.map(P=>u.jsxs("div",{className:["rounded-xl border p-6 text-left bg-white dark:bg-slate-900/60 shadow-sm relative",x===P.id?"border-emerald-400":"border-slate-200 dark:border-slate-800"].join(" "),style:{border:`2px solid ${P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280")}`},children:[u.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[u.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:de=>la(P.id,de),className:"sr-only",id:`photo-upload-${P.id}`,disabled:Xr===P.id}),u.jsx("label",{htmlFor:`photo-upload-${P.id}`,className:["inline-flex items-center justify-center w-8 h-8 rounded-full cursor-pointer transition-all",P.species==="dog"?"bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",Xr===P.id?"opacity-50 cursor-not-allowed":""].join(" "),title:P.photo_url?"Change Photo":"Add Photo",children:Xr===P.id?u.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):u.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),ia&&!P.photo_url&&w.indexOf(P)===0&&u.jsxs("div",{className:"absolute -top-16 -right-2 pointer-events-none animate-bounce",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg shadow-xl whitespace-nowrap text-sm font-medium",children:["Upload the cutest picture of ",P.name,"! "]}),u.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-pink-500"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-center mb-4",children:P.photo_url?u.jsx("img",{src:P.photo_url,alt:`${P.name}'s photo`,className:"w-32 h-32 rounded-full object-cover border-4 shadow-lg transition-transform hover:scale-105",style:{borderColor:P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280")}}):u.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center text-6xl border-4 shadow-lg",style:{borderColor:P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280"),backgroundColor:P.species==="dog"?"#EFF6FF":P.species==="cat"?"#FFF7ED":"#F3F4F6"},children:P.species==="dog"?"":P.species==="cat"?"":""})}),u.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:u.jsxs("div",{className:"flex-1 text-center",children:[u.jsxs("div",{className:"text-base font-semibold flex items-center justify-center gap-2",children:[u.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:P.color||(P.species==="dog"?"#3B82F6":P.species==="cat"?"#F97316":"#6B7280")}}),P.name]}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 capitalize",children:P.species})]})}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-3",children:[u.jsx("button",{type:"button",onClick:()=>T(P.id),className:["inline-flex items-center justify-center rounded-lg px-3 py-1.5 h-12 text-sm hover:shadow w-full sm:w-auto whitespace-nowrap",x===P.id?P.species==="dog"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white":"border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900"].join(" "),children:x===P.id?"Selected":"Use This Pet"}),u.jsx("button",{type:"button",onClick:()=>qo(P),className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-sm text-slate-700 dark:text-slate-200 w-full sm:w-auto px-3 whitespace-nowrap",children:"Edit"})]})]}),u.jsx("div",{className:"mt-4 text-sm text-slate-700 dark:text-slate-300 space-y-1.5",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-slate-500",children:"Insurance:"}),(()=>{const de=P.insuranceCompany||"Not Insured",Ne=de.toLowerCase().includes("nationwide"),Le=de.toLowerCase().includes("healthy paws"),Be=de.toLowerCase().includes("trupanion"),Ke=de.toLowerCase().includes("fetch"),et=de.toLowerCase().includes("not insured")||de.toLowerCase().includes("none");let rt="bg-slate-100 dark:bg-slate-800",Xe="text-slate-700 dark:text-slate-300",y="border-slate-200 dark:border-slate-700";return Ne?(rt="bg-blue-50 dark:bg-blue-950",Xe="text-blue-700 dark:text-blue-300",y="border-blue-200 dark:border-blue-800"):Le?(rt="bg-green-50 dark:bg-green-950",Xe="text-green-700 dark:text-green-300",y="border-green-200 dark:border-green-800"):Be?(rt="bg-purple-50 dark:bg-purple-950",Xe="text-purple-700 dark:text-purple-300",y="border-purple-200 dark:border-purple-800"):Ke?(rt="bg-amber-50 dark:bg-amber-950",Xe="text-amber-700 dark:text-amber-300",y="border-amber-200 dark:border-amber-800"):et&&(rt="bg-slate-100 dark:bg-slate-800",Xe="text-slate-600 dark:text-slate-400",y="border-slate-300 dark:border-slate-700"),u.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${rt} ${Xe} ${y}`,children:[Ne&&"",Le&&"",Be&&"",Ke&&"",et&&"",de]})})()]})}),W===P.id&&F&&u.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-800 p-3 max-w-3xl mx-auto overflow-x-hidden",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-name",className:"block text-xs",children:"Pet Name"}),u.jsx("input",{id:"edit-pet-name",value:F.name,onChange:de=>Z({...F,name:de.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-species",className:"block text-xs",children:"Species"}),u.jsxs("select",{id:"edit-pet-species",value:F.species,onChange:de=>Z({...F,species:de.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[u.jsx("option",{value:"dog",children:"Dog"}),u.jsx("option",{value:"cat",children:"Cat"})]})]}),u.jsx("div",{className:"sm:col-span-2",children:u.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[u.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),u.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),u.jsxs("select",{id:"edit-pet-insurance",value:he,onChange:de=>{const Ne=de.target.value;be(Ne),Ne==="NO_INSURANCE"?Z({...F,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):Ne==="Custom Insurance"?Z({...F,insuranceCompany:"",filing_deadline_days:""}):Ne&&Z({...F,insuranceCompany:Ne,filing_deadline_days:90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[u.jsx("option",{value:"",children:" Select "}),u.jsx("option",{value:"NO_INSURANCE",children:"Not Insured"}),u.jsx("option",{value:"Trupanion",children:"Trupanion (90 days)"}),u.jsx("option",{value:"Nationwide",children:"Nationwide (90 days)"}),u.jsx("option",{value:"Healthy Paws",children:"Healthy Paws (90 days)"}),u.jsx("option",{value:"Fetch",children:"Fetch (90 days)"}),u.jsx("option",{value:"Custom Insurance",children:"Custom Insurance"})]})]}),he==="NO_INSURANCE"?u.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:u.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}):he==="Custom Insurance"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-insurance-custom-name",className:"block text-xs text-slate-500",children:"Insurance Company Name"}),u.jsx("input",{id:"edit-pet-insurance-custom-name",value:A,onChange:de=>H(de.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-insurance-custom-deadline",className:"block text-xs text-slate-500",children:"Filing Deadline (days)"}),u.jsx("input",{id:"edit-pet-insurance-custom-deadline",type:"number",min:1,max:365,value:Q,onChange:de=>ie(de.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}):u.jsx("div",{className:"sm:col-span-1 flex items-end text-xs text-slate-600",children:he?"Filing Deadline: 90 days":""}),he==="Healthy Paws"&&u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{htmlFor:"edit-pet-healthy-paws-id",className:"block text-xs text-slate-500",children:"Healthy Paws Pet ID"}),u.jsx("input",{id:"edit-pet-healthy-paws-id",value:F.healthy_paws_pet_id||"",onChange:de=>Z({...F,healthy_paws_pet_id:de.target.value}),placeholder:"e.g., 1400806-1",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),u.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Find this on your Healthy Paws policy card or portal"})]}),he&&he!=="NO_INSURANCE"&&u.jsxs("div",{className:"sm:col-span-2",children:[u.jsxs("label",{htmlFor:"edit-pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",u.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),u.jsx("input",{id:"edit-pet-policy-number",value:F.policyNumber||"",onChange:de=>Z({...F,policyNumber:de.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),he!=="NO_INSURANCE"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),u.jsx("input",{id:"edit-pet-premium",type:"number",step:"0.01",placeholder:"e.g., 38.00",value:String(F.monthly_premium??""),onChange:de=>Z({...F,monthly_premium:de.target.value===""?"":Number(de.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),u.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Monthly insurance premium cost"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),u.jsx("input",{id:"edit-pet-deductible",type:"number",step:"0.01",placeholder:"e.g., 250.00",value:String(F.deductible_per_claim??""),onChange:de=>Z({...F,deductible_per_claim:de.target.value===""?"":Number(de.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),u.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),u.jsx("input",{id:"edit-pet-insurance-pays",type:"number",min:0,max:100,placeholder:"80",value:String(F.insurance_pays_percentage??""),onChange:de=>Z({...F,insurance_pays_percentage:de.target.value===""?"":Number(de.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),u.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"edit-pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),u.jsx("input",{id:"edit-pet-coverage-start",type:"date",value:F.coverage_start_date||"",onChange:de=>Z({...F,coverage_start_date:de.target.value}),className:"mt-1 w-full min-w-[220px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),u.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When did your coverage start?"})]})]})]}),u.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[u.jsx("button",{type:"button",onClick:zo,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save"}),u.jsx("button",{type:"button",onClick:()=>{if(!W)return;const Ne=w.find(Be=>Be.id===W)?.name||"this pet";if(!confirm(` Delete ${Ne}?

This will NOT delete bills for this pet, but you won't be able to file new bills.

This cannot be undone!`))return;const Le=w.filter(Be=>Be.id!==W);k(Le),ce&&$5(ce,W).catch(Be=>{console.error("[deletePet] error",Be)}),O(null),Z(null)},className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",children:"Delete"}),u.jsx("button",{type:"button",onClick:()=>{O(null),Z(null)},className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]})]},P.id))]})]}),Pe==="app"&&u.jsxs("section",{className:"mx-auto max-w-3xl text-center mt-8 px-2",children:[u.jsx("h2",{className:"text-2xl font-semibold",children:"Upload Vet Bill"}),u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:["rounded-2xl border bg-white dark:bg-slate-900/60 shadow-sm p-6 sm:p-8 transition-colors",n?"border-emerald-400 ring-2 ring-emerald-400/60 dark:ring-emerald-400/50 bg-emerald-50/40 dark:bg-emerald-900/10":"border-slate-200 dark:border-slate-800"].join(" "),onDragEnter:Ss,onDragOver:es,onDragLeave:oa,onDrop:Tt,children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("button",{type:"button",onClick:Ra,className:"group relative w-full sm:w-auto h-16 rounded-xl border border-slate-300/70 dark:border-slate-700 bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 hover:from-white hover:to-white px-5 text-base sm:text-sm text-slate-800 dark:text-slate-100 shadow hover:shadow-lg transition",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("svg",{className:"h-6 w-6 text-emerald-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),u.jsx("span",{className:"font-medium",children:"Upload Vet Bill (PDF or Photo)"})]})}),u.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"or drag & drop here"}),u.jsx("input",{ref:r,type:"file",accept:"image/*,application/pdf",onChange:Qs,className:"sr-only"}),e&&u.jsxs("div",{className:"mt-6 w-full text-left",children:[u.jsx("div",{className:"flex items-start justify-between gap-4",children:u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:ei})]})}),e.objectUrl&&u.jsx("div",{className:"mt-4",children:u.jsx("img",{src:e.objectUrl,alt:"Selected preview",className:"max-h-80 w-full object-contain rounded-lg border border-slate-200 dark:border-slate-800",onLoad:()=>{e.objectUrl&&URL.revokeObjectURL(e.objectUrl)}})}),u.jsxs("div",{className:"mt-5",children:[u.jsxs("button",{type:"button",onClick:P=>{console.log("[MOBILE DEBUG] ========== PROCESS BILL BUTTON CLICKED =========="),console.log("[MOBILE DEBUG] Event:",P),console.log("[MOBILE DEBUG] isProcessing:",o),ua()},disabled:o,className:"inline-flex items-center justify-center w-full h-14 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 text-base sm:text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[o&&u.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),u.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),"Process Bill"]}),o&&u.jsxs("div",{className:"mt-4 flex flex-col items-center text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("svg",{className:"h-6 w-6 animate-spin mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),u.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),u.jsx("div",{children:" Extracting bill data..."})]})]})]})]})})})]}),Pe==="app"&&He&&u.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:u.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Multiple Pets Detected"}),u.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We found charges for multiple pets on this bill:"}),u.jsx("ul",{className:"mt-2 text-sm list-disc pl-6 text-slate-700 dark:text-slate-200",children:He.pets.map((P,de)=>u.jsxs("li",{children:[P.petName||`Pet ${de+1}`," (",P.petSpecies||"Pet",")  ",P.subtotal||ti(P.lineItems)]},de))}),u.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"We'll create a separate bill for each pet."}),u.jsxs("div",{className:"mt-6 space-y-4",children:[u.jsx("p",{className:"text-sm font-medium",children:"Match each pet to your saved profiles (or add new ones):"}),He.pets.map((P,de)=>u.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 justify-between",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm font-medium",children:P.petName||`Pet ${de+1}`}),u.jsx("div",{className:"text-xs text-slate-500",children:P.petSpecies||"Pet"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",value:dt[de]||"",onChange:Ne=>{const Le=[...dt];Le[de]=Ne.target.value||null,X(Le)},children:[u.jsx("option",{value:"",children:"Select saved pet"}),w.map(Ne=>u.jsxs("option",{value:Ne.id,children:[Ne.name," (",Ne.species,")"]},Ne.id))]}),!dt[de]&&u.jsx("button",{type:"button",className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-xs hover:shadow",onClick:()=>{$e(de),U(!0);const Ne=(P.petSpecies||"").toLowerCase(),Le=Ne.includes("cat")?"cat":Ne.includes("dog")?"dog":z.species;I(Be=>({...Be,name:P.petName||"",species:Le})),wt.current?.scrollIntoView({behavior:"smooth"})},children:"+ Add New Pet"})]})]})},de))]}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",disabled:dt.some(P=>!P),onClick:async()=>{const P=[];for(let de=0;de<He.pets.length;de++){const Ne=He.pets[de],Le=dt[de],Be=w.find(L=>L.id===Le)||null,Ke=Ne.subtotal||ti(Ne.lineItems),{filename:et,blob:rt}=M3({clinicName:He.clinicName,clinicAddress:He.clinicAddress,dateOfService:He.dateOfService,diagnosis:He.diagnosis,petName:Ne.petName,lineItems:Ne.lineItems,subtotal:Ke,invoiceNumber:He.invoiceNumber},Be);if(ce)try{const L=parseFloat(String(Ke).replace(/[^0-9.\-]/g,""))||null,J=Number(Be?.filing_deadline_days)||90,ue=He.dateOfService?new Date(He.dateOfService):null,xe=ue?new Date(ue.getTime()):null;xe&&xe.setDate(xe.getDate()+J);const Oe=await p2({user_id:ce,pet_id:Be?Be.id:null,service_date:He.dateOfService||null,invoice_number:He.invoiceNumber||null,clinic_name:He.clinicName||null,clinic_address:He.clinicAddress||null,clinic_phone:He.clinicPhone||null,diagnosis:He.diagnosis||null,total_amount:L,line_items:Ne.lineItems,filing_status:"not_filed",filing_deadline_days:J});Oe?.id&&await ho(ce,Oe.id,rt)}catch(L){console.error("[createClaim multi] error",L)}const Xe=URL.createObjectURL(rt),y=document.createElement("a");y.href=Xe,y.download=et,document.body.appendChild(y),y.click(),y.remove(),URL.revokeObjectURL(Xe),P.push({name:et,amount:Ke})}ce&&Zi(ce).then(tt).catch(()=>{}),rr(!0),alert(` ${P.length} bills generated and downloaded!
`+P.map(de=>`- ${de.name} (${de.amount})`).join(`
`)+`

Email each bill to your insurance company.`)},children:"Generate Bills"})})]})}),m&&u.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:u.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{v(null),Je(null),t(null),h(null),j(""),B(""),le("insured")},children:" Cancel"}),u.jsx("h2",{className:"text-lg font-semibold",children:"Extracted Details"})]}),u.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"What was this visit for? (Visit Title)"}),u.jsx("input",{value:K,onChange:P=>B(P.target.value),placeholder:"e.g., Annual checkup, Emergency visit, Teeth cleaning",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),(()=>{if(!m||!Array.isArray(m.lineItems))return null;const P=m.lineItems.map(Le=>Wn(Le.amount));return m.lineItems.length>0&&P.every(Le=>!Number.isFinite(Le)||Le===0)?u.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:[u.jsx("div",{className:"font-semibold",children:" NO PRICES FOUND"}),u.jsx("div",{className:"mt-1",children:"This appears to be a vaccination certificate or record, not an invoice."}),u.jsx("div",{className:"mt-1",children:"Please upload the actual bill/receipt with itemized charges and prices."}),u.jsx("div",{className:"mt-1 text-amber-800/80",children:"Insurance companies require invoices showing what you paid."})]}):null})(),u.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Review and edit any field if needed."}),u.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Name"}),u.jsx("input",{value:m.clinicName,onChange:P=>v({...m,clinicName:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Address"}),u.jsx("input",{value:m.clinicAddress,onChange:P=>v({...m,clinicAddress:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Phone"}),u.jsx("input",{value:m.clinicPhone||"",onChange:P=>v({...m,clinicPhone:P.target.value}),placeholder:"(XXX) XXX-XXXX",type:"tel",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),u.jsx("input",{value:m.petName,onChange:P=>v({...m,petName:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Date of Service"}),u.jsx("input",{type:"date",value:m.dateOfService,onChange:P=>v({...m,dateOfService:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Invoice Number"}),u.jsx("input",{value:m.invoiceNumber||"",onChange:P=>v({...m,invoiceNumber:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Total Amount"}),u.jsx("input",{value:m.totalAmount,onChange:P=>v({...m,totalAmount:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Diagnosis / Reason"}),u.jsx("textarea",{value:m.diagnosis,onChange:P=>v({...m,diagnosis:P.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",rows:3})]})]}),C&&u.jsxs("div",{className:"mt-6",children:[u.jsx("h3",{className:"text-sm font-semibold",children:"Pet Insurance"}),u.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Insurance Company"}),u.jsx("input",{value:C.insuranceCompany,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Policy Number"}),u.jsx("input",{value:C.policyNumber,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-semibold",children:"Line Items"}),u.jsx("button",{type:"button",className:"text-sm text-emerald-700 dark:text-emerald-300 hover:underline",onClick:()=>v({...m,lineItems:[...m.lineItems,{description:"",amount:""}]}),children:"+ Add Item"})]}),u.jsx("div",{className:"mt-3 space-y-3",children:m.lineItems.map((P,de)=>u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3",children:[u.jsx("div",{className:"sm:col-span-8",children:u.jsx("input",{placeholder:"Description",value:P.description,onChange:Ne=>{const Le=[...m.lineItems];Le[de]={...Le[de],description:Ne.target.value},v({...m,lineItems:Le})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),u.jsx("div",{className:"sm:col-span-3",children:u.jsx("input",{placeholder:"Amount",value:P.amount,onChange:Ne=>{const Le=[...m.lineItems];Le[de]={...Le[de],amount:Ne.target.value},v({...m,lineItems:Le})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),u.jsx("div",{className:"sm:col-span-1 flex items-center",children:u.jsx("button",{type:"button",className:"text-slate-500 hover:text-rose-600 text-sm",onClick:()=>{const Ne=m.lineItems.filter((Le,Be)=>Be!==de);v({...m,lineItems:Ne})},"aria-label":"Remove item",children:""})})]},de))})]}),u.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-blue-50/60 dark:bg-blue-900/10 p-4",children:[u.jsxs("label",{htmlFor:"visit-notes",className:"block text-sm font-semibold mb-2",children:[" Visit Notes ",u.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(Optional but recommended)"})]}),u.jsx("textarea",{id:"visit-notes",value:E,onChange:P=>j(P.target.value),placeholder:"What was discussed at this vet visit? (e.g., 'Annual checkup - vet noted minor eye redness from outdoor play, cleared up in 2 days')",rows:3,className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),u.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:[" ",u.jsx("strong",{children:"Why this matters:"})," Documenting what was discussed protects you from casual comments being misinterpreted later as pre-existing conditions."]})]}),$!=="not_insured"&&(()=>{const P=Number(C?.filing_deadline_days)||90,de=m.dateOfService?new Date(m.dateOfService):null,Ne=de?new Date(de.getTime()):null;Ne&&Ne.setDate(Ne.getDate()+P);const Le=new Date,Be=Ne?Math.ceil((Ne.getTime()-Le.getTime())/(1e3*60*60*24)):null,Ke=Be===null?{wrap:"bg-slate-50 border-slate-200",title:"text-slate-900"}:Be>=60?{wrap:"bg-emerald-50 border-emerald-200",title:"text-emerald-900"}:Be>=30?{wrap:"bg-yellow-50 border-yellow-200",title:"text-yellow-900"}:Be>=15?{wrap:"bg-orange-50 border-orange-200",title:"text-orange-900"}:{wrap:"bg-rose-50 border-rose-200",title:"text-rose-900"};if(Be!==null&&Be<0){const et=de?Math.floor((Le.getTime()-de.getTime())/864e5):0,rt=Math.floor(et/365),Xe=Math.max(1,Math.floor(et%365/30)),y=rt>=1?rt===1?"over 1 year ago":`over ${rt} years ago`:`over ${Xe} months ago`;return u.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm bg-rose-50 border-rose-200"].join(" "),children:[u.jsx("div",{className:"text-sm font-semibold text-rose-900",children:" DEADLINE PASSED"}),u.jsxs("div",{className:"mt-2 text-sm text-rose-900",children:["This bill is from ",m.dateOfService||""," (",y,")."]}),u.jsx("div",{className:"mt-2 text-sm text-rose-900",children:"Most insurers won't accept bills this old."}),u.jsx("div",{className:"mt-1 text-xs text-rose-900/80",children:"Contact your insurance company to verify if you can still file."})]})}return u.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm",Ke.wrap].join(" "),children:[u.jsx("div",{className:["text-sm font-semibold flex items-center gap-2",Ke.title].join(" "),children:u.jsx("span",{children:" FILING DEADLINE REMINDER"})}),u.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Service Date"}),u.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:m.dateOfService?new Date(m.dateOfService).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Insurance"}),u.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:C?C.insuranceCompany:""})]})]}),u.jsx("div",{className:"mt-3 text-sm",children:u.jsx("div",{className:"text-slate-700",children:" Most insurers require filing within 60180 days of service."})}),u.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Estimated Deadline"}),u.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:Ne?Ne.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Days Remaining"}),u.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base",children:Be===null?"":`${Be} days`})]})]}),u.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"This is a general reminder. Always verify your specific policy deadline."})]})})(),u.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[u.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expense Category"}),u.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[u.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"exp-cat",value:"insured",checked:$==="insured",onChange:()=>le("insured")}),u.jsx("span",{children:"Insured"})]}),u.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"exp-cat",value:"not_insured",checked:$==="not_insured",onChange:()=>le("not_insured")}),u.jsx("span",{children:"Not Insured"})]}),u.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"exp-cat",value:"maybe_insured",checked:$==="maybe_insured",onChange:()=>le("maybe_insured")}),u.jsx("span",{children:"Maybe Insured"})]})]})]}),u.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[u.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{v(null),Je(null),t(null),h(null),j(""),B(""),le("insured")},children:" Cancel"}),!o&&u.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium",onClick:async()=>{if(!C){ds(!0);return}const P=Number(C?.filing_deadline_days)||90,de=m.dateOfService?new Date(m.dateOfService):null,Ne=de?new Date(de.getTime()):null;Ne&&Ne.setDate(Ne.getDate()+P);let Le=null;if(ce)try{const Ke=parseFloat(String(m.totalAmount).replace(/[^0-9.\-]/g,""))||null;Le=await p2({user_id:ce,pet_id:C?C.id:null,service_date:m.dateOfService||null,invoice_number:m.invoiceNumber||null,clinic_name:m.clinicName||null,clinic_address:m.clinicAddress||null,clinic_phone:m.clinicPhone||null,visit_title:K||null,diagnosis:m.diagnosis||null,total_amount:Ke,line_items:m.lineItems,filing_status:"not_submitted",filing_deadline_days:P,visit_notes:E||null,expense_category:$}),console.log("[createClaim single] Checking for vet bill upload...",{hasClaimId:!!Le?.id,hasSelectedFile:!!e,hasFile:!!e?.file,selectedFileType:e?.file?.type}),Le?.id&&e?.file?(console.log("[createClaim single] Uploading vet bill PDF to storage..."),await ho(ce,Le.id,e.file),console.log("[createClaim single]  Uploaded vet bill PDF for claim:",Le.id)):console.warn("[createClaim single]   No vet bill PDF to upload - selectedFile or file is missing")}catch(Ke){console.error("[createClaim single] error",Ke)}const Be={claimId:Le?.id||null,petName:C?.name||"Unknown",species:C?.species||"",amount:Wn(String(m.totalAmount||"")),serviceDate:m.dateOfService||null,insurance:C?.insuranceCompany||"",deadlineDate:Ne?Ne.toISOString().slice(0,10):null,deadlineDays:P};fs(Be),Fa(Le?.id||null),console.log("[LOOKS GOOD CLICKED] About to show medication modal",{claimId:Le?.id}),Xn(!0)},children:"Looks Good"})]})]})},JSON.stringify(m)),Pe==="app"&&ot.length>0&&u.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("h2",{className:"text-xl font-semibold",children:"Legacy Financial Stats"})}),u.jsxs("div",{className:"mt-4 rounded-2xl border border-emerald-200 bg-emerald-50 p-5 dark:border-emerald-900/50 dark:bg-emerald-900/10",children:[u.jsx("div",{className:"text-sm font-semibold",children:" TOTAL REIMBURSED"}),u.jsx("div",{className:"mt-2 text-3xl font-bold text-emerald-700",children:rn(ps.reimbursed)}),u.jsx("div",{className:"mt-1 text-xs text-emerald-800/80 dark:text-emerald-300",children:"Paid by insurance"})]}),u.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 dark:border-slate-800 dark:bg-slate-900",children:[u.jsx("div",{className:"text-sm font-semibold",children:" TOTAL VET BILLS"}),u.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"All veterinary expenses (whether insured or not)"}),u.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(ps.perPet).map(([P,de])=>{const Ne=w.find(Be=>Be.name===P),Le=Ne?.color||(Ne?.species==="cat"?"#F97316":Ne?.species==="dog"?"#3B82F6":"#6B7280");return u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("div",{className:"truncate flex items-center gap-2",children:[u.jsx("span",{className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:Le}}),P]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"font-semibold",children:rn(de.sum)}),u.jsxs("div",{className:"text-xs text-slate-500",children:[de.count," visits"]})]})]},P)})})]})]}),Pe==="app"&&u.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Financial Summary"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("label",{className:"mr-2 text-slate-600",children:"Show expenses for:"}),u.jsxs("select",{value:Lt,onChange:P=>ft(P.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[u.jsx("option",{value:"all",children:"All Time"}),u.jsx("option",{value:"2026",children:"2026"}),u.jsx("option",{value:"2025",children:"2025"}),u.jsx("option",{value:"2024",children:"2024"}),u.jsx("option",{value:"last12",children:"Last 12 Months"})]})]})]}),u.jsx(B3,{userId:ce,refreshToken:hr,period:Lt})]}),Pe==="app"&&ot.length>0&&u.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("h2",{className:"text-xl font-semibold",children:"Vet Bills"})}),u.jsx("div",{className:"mt-4 mb-4 p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:u.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[u.jsx("span",{className:"text-3xl",children:""}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg",children:"Auto-Submit Coming Soon!"}),u.jsx("p",{className:"text-sm text-blue-100",children:"Soon we'll file claims directly with your insurance company. No more manual work!"})]})]})}),u.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[u.jsx("div",{className:"text-xs text-slate-500",children:"Total bills"}),u.jsx("div",{className:"text-lg font-semibold",children:js.total})]}),u.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[u.jsx("div",{className:"text-xs text-slate-500",children:"Bills pending submission"}),u.jsxs("div",{className:"text-lg font-semibold",children:[js.notFiledCount," ",u.jsxs("span",{className:"text-sm text-slate-500",children:["(",rn(js.notFiledSum),")"]})]})]}),u.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[u.jsx("div",{className:"text-xs text-slate-500",children:"Claims filed"}),u.jsx("div",{className:"text-lg font-semibold",children:js.filedPending})]}),u.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[u.jsx("div",{className:"text-xs text-slate-500",children:"Claims expiring soon (< 15 days)"}),u.jsx("div",{className:"text-lg font-semibold",children:js.expiringSoon})]})]}),u.jsx("div",{ref:st,className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full overflow-x-hidden",style:{overscrollBehaviorX:"none"},children:Ri.map(P=>{const de=P.pets||{},Ne=de?.color||(de?.species==="cat"?"#F97316":de?.species==="dog"?"#3B82F6":"#6B7280");ca(P);const Le=(()=>{const Xe=vi(P);if(!Xe)return null;const y=new Date(Xe.getTime());return y.setDate(y.getDate()+Vn(P)),y})(),Be=qa(P),Ke=fo(P.filing_status),et=String(P.expense_category||"insured")==="not_insured",rt=(()=>{const Xe=P.expense_category||"insured",y=de?.insurance_company||"";return Xe==="insured"?{text:y?`Insured  ${y}`:"Insured",cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}:Xe==="not_insured"?{text:"Not Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}:{text:y?`Maybe Insured  ${y}`:"Maybe Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}})();return u.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900 shadow-sm min-h-[180px] w-full",style:{border:`2px solid ${Ne}`,touchAction:"pan-y",overscrollBehaviorX:"none"},children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:Ne+"20"},children:u.jsx("span",{className:"text-slate-700",children:de.species==="cat"?"":""})}),u.jsx("div",{className:"min-w-0",children:u.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 break-words line-clamp-2",children:`${de.name||"Pet"}  ${P.visit_title&&String(P.visit_title)||P.diagnosis&&String(P.diagnosis)||""}`})})]}),u.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:[u.jsx("span",{className:"mr-1",children:""}),P.clinic_name||""]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${rt.cls}`,children:rt.text}),!et&&u.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${Ke.cls}`,children:Ke.text})]})]}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-500",children:"Service Date"}),u.jsx("div",{className:"font-medium",children:P.service_date||""})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-slate-500",children:"Amount"}),u.jsx("div",{className:"font-mono font-semibold",children:rn(P.total_amount)}),String(P.filing_status||"").toLowerCase()==="paid"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mt-1 text-[11px]",children:u.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:(()=>{const Xe=Number(P.total_amount||0),y=Number(P.reimbursed_amount||0),L=Xe>0?Math.round(y/Xe*100):0;return`Claimed: ${rn(Xe)}  Received: ${rn(y)} (${L}%)`})()})}),P.paid_date&&u.jsx("div",{className:"mt-1 text-[11px]",children:u.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:`Date Paid: ${new Date(P.paid_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}`})})]})]}),(()=>{const Xe=String(P.filing_status||"").toLowerCase();if(!(!!P.filed_date&&(Xe==="filed"||Xe==="paid")))return null;const L=(()=>{const ue=String(P.filed_date||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);if(ue)return new Date(Number(ue[1]),Number(ue[2])-1,Number(ue[3])).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const xe=P.filed_date?new Date(P.filed_date):null;return xe?xe.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})();return u.jsxs("div",{className:"col-span-2 mt-1 text-[11px] text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[u.jsx("span",{children:""}),u.jsxs("span",{children:["Filed: ",L]})]})})(),et?u.jsx(u.Fragment,{children:u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-500",children:"Info"}),u.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:" Self-paid vet bill"})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-500",children:"Filing Deadline"}),u.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:Le?Le.toISOString().slice(0,10):""})]}),u.jsx("div",{className:"text-right",children:u.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${Be.cls}`,children:Be.text})})]})]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 flex flex-wrap items-start sm:items-center justify-between gap-2",children:[(()=>{const Xe=String(P.filing_status||"not_submitted").toLowerCase(),y=Xe==="filed"?"submitted":Xe==="not_filed"?"not_submitted":Xe;if(et)return u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-600",children:" Not insured - No filing required"})});if(y==="not_submitted"){const L=se&&h4.includes(se);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[L&&u.jsx("button",{type:"button",className:`
                                      text-xs px-2 py-1 rounded font-semibold whitespace-nowrap flex items-center gap-1.5
                                      transition-all duration-200 ease-out
                                      ${Fi===P.id?"scale-95 bg-gradient-to-r from-teal-600 via-teal-500 to-teal-600 bg-[length:200%_100%] animate-[shimmer_1.5s_ease-in-out_infinite]":"bg-blue-600 hover:bg-blue-700 active:scale-95"}
                                      text-white
                                    `,onClick:async()=>{navigator.vibrate&&navigator.vibrate(10),ms(P.id),await new Promise(J=>setTimeout(J,1e3)),_s(P),await new Promise(J=>setTimeout(J,200)),ms(null)},title:"Automatically generate PDF and email to insurance company",children:Fi===P.id?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{className:"animate-pulse",children:"Preparing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),"Auto-Submit"]})}),u.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",onClick:async()=>{try{const J=Zs(),xe=prompt("Enter filed date (YYYY-MM-DD):",J)||J;await xl(P.id,{filing_status:"filed",filed_date:xe}),tt(Oe=>Oe.map(Ue=>Ue.id===P.id?{...Ue,filing_status:"filed",filed_date:xe}:Ue));try{alert(" Claim marked as submitted")}catch{}if(await new Promise(Oe=>setTimeout(Oe,500)),ce){const Oe=await Zi(ce);tt(Oe)}}catch(J){console.error("[mark filed] error",J)}},title:"Manually mark as submitted (if you filed yourself)",children:"Mark Submitted"})]}),["insured","maybe"].includes(String(P.expense_category||"insured").toLowerCase())&&u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),u.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"not_submitted",onChange:async J=>{try{const ue=J.target.value,xe=ue==="submitted"?"filed":ue==="not_submitted"?"not_filed":ue;await xl(P.id,{filing_status:xe}),tt(Oe=>Oe.map(Ue=>Ue.id===P.id?{...Ue,filing_status:xe}:Ue));try{alert(" Status updated")}catch{}await new Promise(Oe=>setTimeout(Oe,400)),ce&&Zi(ce).then(tt)}catch(ue){console.error("[edit status] error",ue)}},children:[u.jsx("option",{value:"not_submitted",children:"Not Submitted"}),u.jsx("option",{value:"submitted",children:"Submitted"}),u.jsx("option",{value:"denied",children:"Denied"})]})]}),u.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-950/30 border-l-4 border-blue-400 rounded",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("span",{className:"text-2xl mr-2",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Coming Soon: Auto-Submit"}),u.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"We'll file claims directly with your insurance company - no more manual work!"})]})]})})]})}return y==="submitted"?u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("div",{className:"text-xs text-slate-600",children:"What happened with this claim?"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{Tn(P);const L=P.total_amount&&Number.isFinite(Number(P.total_amount))?String(Number(P.total_amount).toFixed(2)):"";Ur(L),qs(Zs())},children:"Payment Received? Mark as Paid"}),u.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800",onClick:async()=>{try{await xl(P.id,{filing_status:"denied"}),tt(L=>L.map(J=>J.id===P.id?{...J,filing_status:"denied"}:J));try{alert(" Claim marked as denied")}catch{}ce&&Zi(ce).then(tt)}catch(L){console.error("[deny claim] error",L)}},children:"Deny Claim"})]}),["insured","maybe"].includes(String(P.expense_category||"insured").toLowerCase())&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),u.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"submitted",onChange:async L=>{try{const J=L.target.value,ue=J==="submitted"?"filed":J==="not_submitted"?"not_filed":J;await xl(P.id,{filing_status:ue}),tt(xe=>xe.map(Oe=>Oe.id===P.id?{...Oe,filing_status:ue}:Oe));try{alert(" Status updated")}catch{}ce&&Zi(ce).then(tt)}catch(J){console.error("[edit status] error",J)}},children:[u.jsx("option",{value:"submitted",children:"Submitted"}),u.jsx("option",{value:"not_submitted",children:"Not Submitted"}),u.jsx("option",{value:"denied",children:"Denied"})]})]})]}):null})(),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[P.pdf_path&&u.jsx("a",{href:"#",onClick:async Xe=>{Xe.preventDefault();try{const{data:y}=await At.storage.from("claim-pdfs").createSignedUrl(P.pdf_path,60);y?.signedUrl&&window.open(y.signedUrl,"_blank")}catch(y){console.error("[view pdf] error",y)}},className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",children:"View PDF"}),u.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800 shrink-0 whitespace-nowrap",onClick:async()=>{if(confirm("Delete this bill?"))try{await d4(P.id),ce&&Zi(ce).then(tt)}catch(Xe){console.error("[delete claim] error",Xe)}},children:"Delete"})]})]})]},P.id)})}),Ri.length===0&&u.jsx("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 p-6 text-center text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900",children:"No vet bills yet. Upload your first bill to get started!"})]}),Pe==="app"&&u.jsxs("footer",{className:"mx-auto max-w-3xl text-center py-10 text-xs text-slate-500 dark:text-slate-400",children:[" ",new Date().getFullYear()," Pet Claim Helper"]})]}),Qe&&u.jsx(p4,{userId:ce,userEmail:se,onClose:()=>Yt(!1)}),cs&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>ds(!1),children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-rose-200 bg-white p-6",onClick:P=>P.stopPropagation(),children:[u.jsx("div",{className:"text-lg font-semibold text-rose-700",children:" Please Select a Pet"}),u.jsx("div",{className:"mt-2 text-sm text-rose-800",children:"You haven't selected a pet for this bill yet."}),u.jsx("div",{className:"mt-1 text-sm text-rose-800",children:"Please go back and click 'Use This Pet' for the pet you want to add this bill for."}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("button",{className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",onClick:()=>ds(!1),children:"Go Back"})})]})}),kt&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Kt(null),children:u.jsxs("div",{className:"relative mx-4 w-full max-w-2xl rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 flex flex-col max-h-[85vh]",onClick:P=>P.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Edit Bill"}),u.jsx("button",{className:"text-sm",onClick:()=>Kt(null),children:"Close"})]}),["filed","paid"].includes(String(kt.filing_status||"").toLowerCase())&&u.jsx("div",{className:"mx-5 mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:" This claim has been filed. Changes may require resubmitting to insurance."}),u.jsx("div",{className:"p-5 overflow-y-auto",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Pet"}),u.jsxs("select",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Nr||"",onChange:P=>_t(P.target.value),children:[u.jsx("option",{value:"",children:""}),w.map(P=>u.jsx("option",{value:P.id,children:P.name},P.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Service Date"}),u.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:mr,onChange:P=>Et(P.target.value)})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Title"}),u.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:zt,onChange:P=>Pt(P.target.value),placeholder:"e.g., Annual checkup, Teeth cleaning"})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Diagnosis / Reason"}),u.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Rt,onChange:P=>fr(P.target.value)})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Notes"}),u.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:ur,onChange:P=>fi(P.target.value)})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Line Items"}),u.jsx("button",{type:"button",className:"text-xs text-emerald-700",onClick:()=>Zn([...Wr,{description:"",amount:""}]),children:"+ Add Item"})]}),u.jsx("div",{className:"mt-2 space-y-2",children:Wr.map((P,de)=>u.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[u.jsx("input",{className:"col-span-8 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Description",value:P.description,onChange:Ne=>{const Le=[...Wr];Le[de]={...Le[de],description:Ne.target.value},Zn(Le)}}),u.jsx("input",{className:"col-span-3 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Amount",value:P.amount,onChange:Ne=>{const Le=[...Wr];Le[de]={...Le[de],amount:Ne.target.value},Zn(Le)}}),u.jsx("button",{className:"col-span-1 text-xs",onClick:()=>{const Ne=Wr.filter((Le,Be)=>Be!==de);Zn(Ne)},children:""})]},de))})]}),u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Expense Category"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("label",{className:"inline-flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"edit-exp",checked:Bn==="insured",onChange:()=>St("insured")})," Insured"]}),u.jsxs("label",{className:"inline-flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"edit-exp",checked:Bn==="not_insured",onChange:()=>St("not_insured")})," Not Insured"]}),u.jsxs("label",{className:"inline-flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"edit-exp",checked:Bn==="maybe_insured",onChange:()=>St("maybe_insured")})," Maybe"]})]})]})]})}),u.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[u.jsx("button",{className:"text-sm",onClick:()=>Kt(null),children:"Cancel"}),u.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{if(kt)try{if(await xl(kt.id,{pet_id:Nr||kt.pet_id,service_date:mr||null,visit_title:zt||null,diagnosis:Rt||null,visit_notes:ur||null,line_items:Wr,expense_category:Bn}),ce){const P=await Zi(ce);tt(P)}Kt(null),alert("Bill updated")}catch(P){console.error("[update claim] error",P),alert("Error updating bill")}},children:"Save Changes"})]})]})}),Mr&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Tn(null),children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0",onClick:P=>P.stopPropagation(),children:[u.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Mark as Paid"}),u.jsx("button",{className:"text-sm",onClick:()=>Tn(null),children:"Close"})]}),u.jsxs("div",{className:"p-5 text-sm space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-500",children:"Claimed Amount"}),u.jsx("div",{className:"font-mono font-semibold",children:rn(Mr.total_amount)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-500",children:"Reimbursed Amount"}),u.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",placeholder:"0.00",value:br,onChange:P=>Ur(P.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-slate-500",children:"Date Received"}),u.jsx("input",{type:"date",value:Vr,onChange:P=>qs(P.target.value),max:Zs(),placeholder:"YYYY-MM-DD",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2"})]}),u.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[u.jsx("div",{className:"text-slate-500",children:"Difference"}),u.jsx("div",{className:"font-mono font-semibold",children:(()=>{const P=Number(Mr.total_amount||0),de=Number(br||0),Ne=P-de;return rn(Ne)})()})]})]}),u.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[u.jsx("button",{className:"text-sm",onClick:()=>Tn(null),children:"Cancel"}),u.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{try{const P=Number(br);if(!Number.isFinite(P)||P<0){alert("Please enter a valid reimbursed amount");return}if(!Vr){alert("Please select the date received");return}const de=new Date(Vr).toISOString().slice(0,10),Ne=Number(Mr.total_amount||0),Le=Mr.pet_id||null,Be=Mr.service_date?Number(String(Mr.service_date).slice(0,4)):null,Ke=Be&&Le?ot.some(L=>L.id!==Mr.id&&L.pet_id===Le&&String(L.expense_category||"").toLowerCase()==="insured"&&String(L.filing_status||"").toLowerCase()==="paid"&&L.service_date&&String(L.service_date).slice(0,4)===String(Be)&&Number(L.deductible_applied||0)>0):!1,et=Le?w.find(L=>L.id===Le):null,rt=Math.max(0,Number(et?.deductible_per_claim||0)),Xe=Math.min(Ne,Ke?0:rt),y=Math.max(0,Ne-Xe-P);if(await xl(Mr.id,{filing_status:"paid",reimbursed_amount:P,paid_date:de,deductible_applied:Xe,user_coinsurance_payment:y}),ce){const L=await Zi(ce);tt(L)}Tn(null),Ur(""),qs(Zs()),alert("Claim marked as paid")}catch(P){console.error("[mark paid] error",P),alert("Error saving paid status")}},children:"Save"})]})]})}),ta&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Xn(!1),children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:P=>P.stopPropagation(),children:[u.jsx("div",{className:"text-lg font-semibold",children:"Medications Prescribed?"}),u.jsx("div",{className:"mt-2 text-sm text-slate-700 dark:text-slate-300",children:"Were any medications prescribed during this vet visit?"}),u.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[u.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>{Xn(!1),Di&&qn(Di)},children:"No"}),u.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{if(Xn(!1),ce&&C){const P=Zs(),{data:de,error:Ne}=await At.from("medications").select("*").eq("user_id",ce).eq("pet_id",C.id).lte("start_date",P).or(`end_date.is.null,end_date.gte.${P}`);if(Ne)throw Ne;pi(Array.isArray(de)?de:[])}else pi([]);jr([]),ws(!0)}catch(P){console.error("[med question -> load meds] error",P),pi([]),ws(!0)}},children:"Yes"})]})]})}),Oi&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>ws(!1),children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:P=>P.stopPropagation(),children:[u.jsx("div",{className:"text-lg font-semibold",children:"Select Medications Prescribed"}),u.jsxs("div",{className:"mt-3 space-y-2 max-h-[50vh] overflow-y-auto",children:[Ii.length===0&&u.jsx("div",{className:"text-sm text-slate-600",children:"No active medications found"}),Ii.map(P=>u.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg border border-slate-200 dark:border-slate-800",children:[u.jsx("input",{type:"checkbox",checked:oo.includes(P.id),onChange:de=>{const Ne=de.target.checked;jr(Le=>Ne?[...Le,P.id]:Le.filter(Be=>Be!==P.id))}}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"text-sm font-medium",children:P.medication_name}),P.dosage&&u.jsx("div",{className:"text-xs text-slate-500",children:P.dosage})]})]},P.id))]}),u.jsx("div",{className:"mt-3",children:u.jsx("button",{type:"button",className:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-700",onClick:()=>Zr(!0),children:"+ Add New Medication"})}),u.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[u.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>ws(!1),children:"Cancel"}),u.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{lo&&oo.length>0&&await xl(lo,{medication_ids:oo}),ws(!1),zs("Medications saved ")}catch(P){console.error("[med select -> link meds] error",P),ws(!1),zs("Medications saved ")}},children:"Confirm"})]})]})}),uo&&u.jsx(Cv,{open:uo,onClose:()=>Zr(!1),onSaved:async()=>{try{if(ce&&C){const P=Zs(),{data:de}=await At.from("medications").select("*").eq("user_id",ce).eq("pet_id",C.id).lte("start_date",P).or(`end_date.is.null,end_date.gte.${P}`);pi(Array.isArray(de)?de:[])}}catch{}},userId:ce,pets:w,defaultPetId:C?.id||null}),na&&u.jsx(zk,{medicationId:na,userId:ce,onClose:P=>{Bo(null),window.history.pushState({},"","/"),P&&sa(de=>de+1)}}),zn&&ce&&u.jsx(l4,{claim:zn,pet:zn.pets||{},userId:ce,onClose:()=>_s(null),onSuccess:async P=>{if(console.log("[Auto-Submit] Success! Message ID:",P),_s(null),ce){const de=await Zi(ce);tt(de)}zs(" Claim submitted to insurance!")}}),u.jsx(U3,{open:Ti,onClose:()=>{hs(!1),ce&&Yc(ce).then(k).catch(()=>{})},userId:ce||""}),Jr&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>qn(null),children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 bg-white p-0 overflow-hidden",onClick:P=>P.stopPropagation(),children:[u.jsxs("div",{className:"p-6 bg-emerald-50 dark:bg-emerald-900/20 border-b border-emerald-200 dark:border-emerald-800 flex flex-col items-center text-center",children:[u.jsx("div",{className:"h-14 w-14 rounded-full bg-emerald-600 text-white flex items-center justify-center text-2xl shadow animate-pulse",children:""}),u.jsx("div",{className:"mt-3 text-lg font-semibold text-emerald-800 dark:text-emerald-200",children:"Vet Bill Saved Successfully!"}),u.jsx("div",{className:"mt-1 text-xs text-emerald-900/80 dark:text-emerald-300/80",children:"Your vet bill was saved. You can submit it to insurance when ready."})]}),u.jsxs("div",{className:"p-6 text-sm",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Pet:"})," ",u.jsxs("span",{className:"text-slate-900 dark:text-slate-100 font-semibold",children:[Jr.petName," (",Jr.species,")"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Amount:"})," ",u.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-slate-100",children:rn(Jr.amount||0)})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Date:"})," ",u.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Jr.serviceDate||""})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Insurance:"})," ",u.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Jr.insurance||"Not Insured"})]}),Jr.insurance&&Jr.insurance.trim()!==""&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Filing Deadline:"})," ",u.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[Jr.deadlineDate||""," (",Jr.deadlineDays," days)"]})]})]}),u.jsx("div",{className:"mt-5 flex justify-center",children:u.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 text-sm font-medium w-full sm:w-auto",onClick:async()=>{qn(null),v(null),Je(null),t(null),h(null),j(""),B(""),le("insured");try{if(ce){const P=await Zi(ce);tt(P)}}catch{}rr(!1)},children:"Done"})})]})]})})]})}function m4({mode:r,onSwitch:e}){const[t,n]=ve.useState(""),[i,o]=ve.useState(""),[l,d]=ve.useState(!1),[h,m]=ve.useState(null),[v,w]=ve.useState(!1),[k,x]=ve.useState(null),T=async C=>{C.preventDefault(),d(!0),m(null);try{try{console.log("[auth] handleSubmit start:",{mode:r,emailPreview:t.replace(/(.).+(@.+)/,"$1***$2")})}catch{}if(r==="signup"){const{data:E,error:j}=await At.auth.signUp({email:t,password:i});try{console.log("[auth] signUp result:",{hasUser:!!E?.user,hasSession:!!E?.session,error:j||null})}catch{}if(j)throw j;x(t)}else{const{data:E,error:j}=await At.auth.signInWithPassword({email:t,password:i});try{console.log("[auth] signInWithPassword result:",{hasUser:!!E?.user,hasSession:!!E?.session,error:j||null})}catch{}if(j)throw j;try{const{data:K}=await At.auth.getSession();console.log("[auth] post-login getSession():",{hasSession:!!K?.session,userId:K?.session?.user?.id||null});const B=typeof window<"u"?window.localStorage?.getItem("pch.auth"):null;console.log("[auth] localStorage pch.auth present:",!!B)}catch{}}}catch(E){m(E?.message||"Authentication failed")}finally{d(!1)}};return u.jsxs("form",{onSubmit:T,className:"mt-2 space-y-3",children:[k&&u.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:[u.jsx("div",{className:"font-medium",children:"Account created!"}),u.jsxs("div",{className:"text-[13px] mt-1",children:["Please check your email at ",u.jsx("span",{className:"font-mono",children:k})," to verify your account. You won't be able to log in until you confirm your email address."]})]}),r==="signup"?u.jsxs("div",{className:"text-center text-sm text-slate-700 dark:text-slate-200 mb-2",children:[u.jsx("div",{className:"font-medium",children:"Welcome! Create your account"}),u.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:" Save pets  Auto-fill bills  Access anywhere"})]}):u.jsx("div",{className:"text-center text-sm text-slate-700 dark:text-slate-200 mb-2",children:u.jsx("div",{className:"font-medium",children:"Welcome back!"})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"auth-email",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Email"}),u.jsx("input",{id:"auth-email",type:"email",value:t,onChange:C=>n(C.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"auth-password",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Password"}),u.jsxs("div",{className:"mt-1 relative",children:[u.jsx("input",{id:"auth-password",type:v?"text":"password",value:i,onChange:C=>o(C.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 pr-10 text-sm",required:!0}),u.jsx("button",{type:"button",onClick:()=>w(C=>!C),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400","aria-label":v?"Hide password":"Show password",title:v?"Hide password":"Show password",children:v?u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a21.87 21.87 0 0 1 5.06-7.94"}),u.jsx("path",{d:"M10.58 10.58a2 2 0 1 0 2.83 2.83"}),u.jsx("path",{d:"M1 1l22 22"}),u.jsx("path",{d:"M9.88 4.12A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8a21.87 21.87 0 0 1-2.16 3.19"})]}):u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),h&&u.jsx("p",{className:"text-xs text-rose-600",children:h}),u.jsx("button",{type:"submit",disabled:l,className:["w-full inline-flex items-center justify-center rounded-lg text-white px-4 py-2 text-sm font-medium disabled:opacity-60",r==="signup"?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-700 hover:bg-emerald-800"].join(" "),children:l?"Please wait":r==="login"?"Log In":"Sign Up"})]})}function p4({userId:r,userEmail:e,onClose:t}){const[n,i]=ve.useState(e||"");return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:u.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:o=>o.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"settings-userid",className:"block text-sm font-medium mb-1",children:"User ID"}),u.jsx("input",{id:"settings-userid",type:"text",value:r||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"settings-email",className:"block text-sm font-medium mb-1",children:"Email"}),u.jsx("input",{id:"settings-email",type:"email",value:n,onChange:o=>i(o.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]}),u.jsx("button",{onClick:t,className:"mt-6 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium",children:"Close"})]})})}function g4({userId:r,userEmail:e,onClose:t,onDefaultExpenseChange:n,onDefaultPeriodChange:i}){const[o,l]=ve.useState(!1),[d,h]=ve.useState(""),[m,v]=ve.useState(""),[w,k]=ve.useState(""),[x,T]=ve.useState(null);ve.useEffect(()=>{r&&(async()=>{l(!0);try{const{data:E,error:j}=await At.from("profiles").select("*").eq("id",r).single();if(j)throw j;E&&(h(E.full_name||""),v(E.phone?R3(E.phone):""),k(E.address||""),T(E.signature||null))}catch(E){console.error("[settings load] error",E)}finally{l(!1)}})()},[r]);const C=async()=>{if(r){l(!0);try{const E=em(m),{error:j}=await At.from("profiles").upsert({id:r,email:e||"",full_name:d,phone:E||null,address:w||null});if(j)throw j;alert("Profile saved successfully!"),t()}catch(E){console.error("[save profile] error",E),alert("Error saving profile")}finally{l(!1)}}};return u.jsxs("section",{className:"mx-auto max-w-3xl mt-6 pb-12",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),u.jsx("button",{type:"button",onClick:t,className:"text-sm text-slate-600 dark:text-slate-300",children:"Close"})]}),u.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[u.jsx("div",{className:"text-sm font-semibold",children:"Profile Information"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Manage your personal information"}),u.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Email"}),u.jsx("input",{value:e||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs text-slate-500",children:["Full Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{value:d,onChange:E=>h(E.target.value),placeholder:"John Smith",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500",children:"Address"}),u.jsx("input",{value:w,onChange:E=>k(E.target.value),placeholder:"123 Main St, City, ST 12345",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),u.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Optional - will be requested when submitting to insurance if not provided"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs text-slate-500",children:["Phone Number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{value:m,onChange:E=>v(Ev(E.target.value,m)),placeholder:"(123) 456-7890",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),u.jsx("div",{className:"mt-4",children:u.jsx(u4,{userId:r,initialSignature:x,onSave:E=>T(E)})}),u.jsxs("div",{className:"mt-4 sticky bottom-4 bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-lg",children:[u.jsx("button",{type:"button",onClick:C,disabled:o,className:"w-full inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 text-sm font-medium disabled:opacity-60 transition-colors",children:o?"Saving...":"Save Profile"}),u.jsxs("p",{className:"mt-2 text-xs text-center text-slate-500",children:[u.jsx("span",{className:"text-red-500",children:"*"})," Required fields for claim submission"]})]})]})}bx.createRoot(document.getElementById("root")).render(u.jsx(pm.StrictMode,{children:u.jsx(f4,{})}));export{Tr as _,v4 as c,fd as g};
