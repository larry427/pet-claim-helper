(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var ey={exports:{}},bf={},ty={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=Symbol.for("react.element"),Xw=Symbol.for("react.portal"),Qw=Symbol.for("react.fragment"),e3=Symbol.for("react.strict_mode"),t3=Symbol.for("react.profiler"),r3=Symbol.for("react.provider"),n3=Symbol.for("react.context"),s3=Symbol.for("react.forward_ref"),i3=Symbol.for("react.suspense"),a3=Symbol.for("react.memo"),o3=Symbol.for("react.lazy"),k1=Symbol.iterator;function l3(t){return t===null||typeof t!="object"?null:(t=k1&&t[k1]||t["@@iterator"],typeof t=="function"?t:null)}var ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ny=Object.assign,sy={};function _u(t,e,r){this.props=t,this.context=e,this.refs=sy,this.updater=r||ry}_u.prototype.isReactComponent={};_u.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_u.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iy(){}iy.prototype=_u.prototype;function $p(t,e,r){this.props=t,this.context=e,this.refs=sy,this.updater=r||ry}var zp=$p.prototype=new iy;zp.constructor=$p;ny(zp,_u.prototype);zp.isPureReactComponent=!0;var j1=Array.isArray,ay=Object.prototype.hasOwnProperty,qp={current:null},oy={key:!0,ref:!0,__self:!0,__source:!0};function ly(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ay.call(e,n)&&!oy.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var u=Array(o),d=0;d<o;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:ad,type:t,key:i,ref:a,props:s,_owner:qp.current}}function u3(t,e){return{$$typeof:ad,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ad}function c3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var C1=/\/+/g;function fm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?c3(""+t.key):e.toString(36)}function yh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ad:case Xw:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+fm(a,0):n,j1(s)?(r="",t!=null&&(r=t.replace(C1,"$&/")+"/"),yh(s,e,r,"",function(d){return d})):s!=null&&(Wp(s)&&(s=u3(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(C1,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",j1(t))for(var o=0;o<t.length;o++){i=t[o];var u=n+fm(i,o);a+=yh(i,e,r,u,s)}else if(u=l3(t),typeof u=="function")for(t=u.call(t),o=0;!(i=t.next()).done;)i=i.value,u=n+fm(i,o++),a+=yh(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function zd(t,e,r){if(t==null)return t;var n=[],s=0;return yh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function d3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var On={current:null},xh={transition:null},h3={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:xh,ReactCurrentOwner:qp};function uy(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:zd,forEach:function(t,e,r){zd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return zd(t,function(){e++}),e},toArray:function(t){return zd(t,function(e){return e})||[]},only:function(t){if(!Wp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};jt.Component=_u;jt.Fragment=Qw;jt.Profiler=t3;jt.PureComponent=$p;jt.StrictMode=e3;jt.Suspense=i3;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h3;jt.act=uy;jt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ny({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=qp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)ay.call(e,u)&&!oy.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){o=Array(u);for(var d=0;d<u;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:ad,type:t.type,key:s,ref:i,props:n,_owner:a}};jt.createContext=function(t){return t={$$typeof:n3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:r3,_context:t},t.Consumer=t};jt.createElement=ly;jt.createFactory=function(t){var e=ly.bind(null,t);return e.type=t,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(t){return{$$typeof:s3,render:t}};jt.isValidElement=Wp;jt.lazy=function(t){return{$$typeof:o3,_payload:{_status:-1,_result:t},_init:d3}};jt.memo=function(t,e){return{$$typeof:a3,type:t,compare:e===void 0?null:e}};jt.startTransition=function(t){var e=xh.transition;xh.transition={};try{t()}finally{xh.transition=e}};jt.unstable_act=uy;jt.useCallback=function(t,e){return On.current.useCallback(t,e)};jt.useContext=function(t){return On.current.useContext(t)};jt.useDebugValue=function(){};jt.useDeferredValue=function(t){return On.current.useDeferredValue(t)};jt.useEffect=function(t,e){return On.current.useEffect(t,e)};jt.useId=function(){return On.current.useId()};jt.useImperativeHandle=function(t,e,r){return On.current.useImperativeHandle(t,e,r)};jt.useInsertionEffect=function(t,e){return On.current.useInsertionEffect(t,e)};jt.useLayoutEffect=function(t,e){return On.current.useLayoutEffect(t,e)};jt.useMemo=function(t,e){return On.current.useMemo(t,e)};jt.useReducer=function(t,e,r){return On.current.useReducer(t,e,r)};jt.useRef=function(t){return On.current.useRef(t)};jt.useState=function(t){return On.current.useState(t)};jt.useSyncExternalStore=function(t,e,r){return On.current.useSyncExternalStore(t,e,r)};jt.useTransition=function(){return On.current.useTransition()};jt.version="18.3.1";ty.exports=jt;var re=ty.exports;const Vp=Bp(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3=re,m3=Symbol.for("react.element"),p3=Symbol.for("react.fragment"),g3=Object.prototype.hasOwnProperty,v3=f3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y3={key:!0,ref:!0,__self:!0,__source:!0};function cy(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)g3.call(e,n)&&!y3.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:m3,type:t,key:i,ref:a,props:s,_owner:v3.current}}bf.Fragment=p3;bf.jsx=cy;bf.jsxs=cy;ey.exports=bf;var l=ey.exports,h0={},dy={exports:{}},ps={},hy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,oe){var ne=H.length;H.push(oe);e:for(;0<ne;){var xe=ne-1>>>1,L=H[xe];if(0<s(L,oe))H[xe]=oe,H[ne]=L,ne=xe;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var oe=H[0],ne=H.pop();if(ne!==oe){H[0]=ne;e:for(var xe=0,L=H.length,$=L>>>1;xe<$;){var Y=2*(xe+1)-1,X=H[Y],ae=Y+1,pe=H[ae];if(0>s(X,ne))ae<L&&0>s(pe,X)?(H[xe]=pe,H[ae]=ne,xe=ae):(H[xe]=X,H[Y]=ne,xe=Y);else if(ae<L&&0>s(pe,ne))H[xe]=pe,H[ae]=ne,xe=ae;else break e}}return oe}function s(H,oe){var ne=H.sortIndex-oe.sortIndex;return ne!==0?ne:H.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],d=[],f=1,g=null,y=3,p=!1,k=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var oe=r(d);oe!==null;){if(oe.callback===null)n(d);else if(oe.startTime<=H)n(d),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=r(d)}}function R(H){if(N=!1,_(H),!k)if(r(u)!==null)k=!0,Q(W);else{var oe=r(d);oe!==null&&de(R,oe.startTime-H)}}function W(H,oe){k=!1,N&&(N=!1,x(P),P=-1),p=!0;var ne=y;try{for(_(oe),g=r(u);g!==null&&(!(g.expirationTime>oe)||H&&!A());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,y=g.priorityLevel;var L=xe(g.expirationTime<=oe);oe=t.unstable_now(),typeof L=="function"?g.callback=L:g===r(u)&&n(u),_(oe)}else n(u);g=r(u)}if(g!==null)var $=!0;else{var Y=r(d);Y!==null&&de(R,Y.startTime-oe),$=!1}return $}finally{g=null,y=ne,p=!1}}var K=!1,j=null,P=-1,F=5,B=-1;function A(){return!(t.unstable_now()-B<F)}function O(){if(j!==null){var H=t.unstable_now();B=H;var oe=!0;try{oe=j(!0,H)}finally{oe?z():(K=!1,j=null)}}else K=!1}var z;if(typeof b=="function")z=function(){b(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ee=q.port2;q.port1.onmessage=O,z=function(){ee.postMessage(null)}}else z=function(){C(O,0)};function Q(H){j=H,K||(K=!0,z())}function de(H,oe){P=C(function(){H(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){k||p||(k=!0,Q(W))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var ne=y;y=oe;try{return H()}finally{y=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=y;y=H;try{return oe()}finally{y=ne}},t.unstable_scheduleCallback=function(H,oe,ne){var xe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?xe+ne:xe):ne=xe,H){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ne+L,H={id:f++,callback:oe,priorityLevel:H,startTime:ne,expirationTime:L,sortIndex:-1},ne>xe?(H.sortIndex=ne,e(d,H),r(u)===null&&H===r(d)&&(N?(x(P),P=-1):N=!0,de(R,ne-xe))):(H.sortIndex=L,e(u,H),k||p||(k=!0,Q(W))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var oe=y;return function(){var ne=y;y=oe;try{return H.apply(this,arguments)}finally{y=ne}}}})(fy);hy.exports=fy;var x3=hy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3=re,ms=x3;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var my=new Set,Uc={};function qo(t,e){mu(t,e),mu(t+"Capture",e)}function mu(t,e){for(Uc[t]=e,t=0;t<e.length;t++)my.add(e[t])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f0=Object.prototype.hasOwnProperty,w3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A1={},P1={};function N3(t){return f0.call(P1,t)?!0:f0.call(A1,t)?!1:w3.test(t)?P1[t]=!0:(A1[t]=!0,!1)}function _3(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S3(t,e,r,n){if(e===null||typeof e>"u"||_3(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function Gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hp,Gp);on[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hp,Gp);on[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hp,Gp);on[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yp(t,e,r,n){var s=on.hasOwnProperty(e)?on[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S3(e,r,s,n)&&(r=null),n||s===null?N3(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ia=b3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qd=Symbol.for("react.element"),$l=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),m0=Symbol.for("react.profiler"),py=Symbol.for("react.provider"),gy=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),p0=Symbol.for("react.suspense"),g0=Symbol.for("react.suspense_list"),Zp=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),vy=Symbol.for("react.offscreen"),E1=Symbol.iterator;function ic(t){return t===null||typeof t!="object"?null:(t=E1&&t[E1]||t["@@iterator"],typeof t=="function"?t:null)}var yr=Object.assign,mm;function vc(t){if(mm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);mm=e&&e[1]||""}return`
`+mm+t}var pm=!1;function gm(t,e){if(!t||pm)return"";pm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=o);break}}}finally{pm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?vc(t):""}function k3(t){switch(t.tag){case 5:return vc(t.type);case 16:return vc("Lazy");case 13:return vc("Suspense");case 19:return vc("SuspenseList");case 0:case 2:case 15:return t=gm(t.type,!1),t;case 11:return t=gm(t.type.render,!1),t;case 1:return t=gm(t.type,!0),t;default:return""}}function v0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zl:return"Fragment";case $l:return"Portal";case m0:return"Profiler";case Jp:return"StrictMode";case p0:return"Suspense";case g0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gy:return(t.displayName||"Context")+".Consumer";case py:return(t._context.displayName||"Context")+".Provider";case Kp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zp:return e=t.displayName||null,e!==null?e:v0(t.type)||"Memo";case Ea:e=t._payload,t=t._init;try{return v0(t(e))}catch{}}return null}function j3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v0(e);case 8:return e===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C3(t){var e=yy(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wd(t){t._valueTracker||(t._valueTracker=C3(t))}function xy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=yy(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Rh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function y0(t,e){var r=e.checked;return yr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function L1(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ja(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function by(t,e){e=e.checked,e!=null&&Yp(t,"checked",e,!1)}function x0(t,e){by(t,e);var r=Ja(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?b0(t,e.type,r):e.hasOwnProperty("defaultValue")&&b0(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T1(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function b0(t,e,r){(e!=="number"||Rh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var yc=Array.isArray;function tu(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ja(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function w0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return yr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O1(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Oe(92));if(yc(r)){if(1<r.length)throw Error(Oe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ja(r)}}function wy(t,e){var r=Ja(e.value),n=Ja(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function I1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ny(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ny(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vd,_y=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vd=Vd||document.createElement("div"),Vd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A3=["Webkit","ms","Moz","O"];Object.keys(kc).forEach(function(t){A3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kc[e]=kc[t]})});function Sy(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||kc.hasOwnProperty(t)&&kc[t]?(""+e).trim():e+"px"}function ky(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Sy(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var P3=yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _0(t,e){if(e){if(P3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function S0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k0=null;function Xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j0=null,ru=null,nu=null;function D1(t){if(t=ud(t)){if(typeof j0!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=kf(e),j0(t.stateNode,t.type,e))}}function jy(t){ru?nu?nu.push(t):nu=[t]:ru=t}function Cy(){if(ru){var t=ru,e=nu;if(nu=ru=null,D1(t),e)for(t=0;t<e.length;t++)D1(e[t])}}function Ay(t,e){return t(e)}function Py(){}var vm=!1;function Ey(t,e,r){if(vm)return t(e,r);vm=!0;try{return Ay(t,e,r)}finally{vm=!1,(ru!==null||nu!==null)&&(Py(),Cy())}}function $c(t,e){var r=t.stateNode;if(r===null)return null;var n=kf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Oe(231,e,typeof r));return r}var C0=!1;if(ea)try{var ac={};Object.defineProperty(ac,"passive",{get:function(){C0=!0}}),window.addEventListener("test",ac,ac),window.removeEventListener("test",ac,ac)}catch{C0=!1}function E3(t,e,r,n,s,i,a,o,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(f){this.onError(f)}}var jc=!1,Uh=null,Bh=!1,A0=null,L3={onError:function(t){jc=!0,Uh=t}};function T3(t,e,r,n,s,i,a,o,u){jc=!1,Uh=null,E3.apply(L3,arguments)}function O3(t,e,r,n,s,i,a,o,u){if(T3.apply(this,arguments),jc){if(jc){var d=Uh;jc=!1,Uh=null}else throw Error(Oe(198));Bh||(Bh=!0,A0=d)}}function Wo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ly(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F1(t){if(Wo(t)!==t)throw Error(Oe(188))}function I3(t){var e=t.alternate;if(!e){if(e=Wo(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return F1(s),t;if(i===n)return F1(s),e;i=i.sibling}throw Error(Oe(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(Oe(189))}}if(r.alternate!==n)throw Error(Oe(190))}if(r.tag!==3)throw Error(Oe(188));return r.stateNode.current===r?t:e}function Ty(t){return t=I3(t),t!==null?Oy(t):null}function Oy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Oy(t);if(e!==null)return e;t=t.sibling}return null}var Iy=ms.unstable_scheduleCallback,M1=ms.unstable_cancelCallback,D3=ms.unstable_shouldYield,F3=ms.unstable_requestPaint,Ar=ms.unstable_now,M3=ms.unstable_getCurrentPriorityLevel,Qp=ms.unstable_ImmediatePriority,Dy=ms.unstable_UserBlockingPriority,$h=ms.unstable_NormalPriority,R3=ms.unstable_LowPriority,Fy=ms.unstable_IdlePriority,wf=null,_i=null;function U3(t){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(wf,t,void 0,(t.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:z3,B3=Math.log,$3=Math.LN2;function z3(t){return t>>>=0,t===0?32:31-(B3(t)/$3|0)|0}var Hd=64,Gd=4194304;function xc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=xc(o):(i&=a,i!==0&&(n=xc(i)))}else a=r&~s,a!==0?n=xc(a):i!==0&&(n=xc(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-si(e),s=1<<r,n|=t[r],e&=~s;return n}function q3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W3(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-si(i),o=1<<a,u=s[a];u===-1?(!(o&r)||o&n)&&(s[a]=q3(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}}function P0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function My(){var t=Hd;return Hd<<=1,!(Hd&4194240)&&(Hd=64),t}function ym(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function od(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-si(e),t[e]=r}function V3(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-si(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function eg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-si(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Vt=0;function Ry(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uy,tg,By,$y,zy,E0=!1,Yd=[],Ba=null,$a=null,za=null,zc=new Map,qc=new Map,Oa=[],H3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R1(t,e){switch(t){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":zc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function oc(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ud(e),e!==null&&tg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function G3(t,e,r,n,s){switch(e){case"focusin":return Ba=oc(Ba,t,e,r,n,s),!0;case"dragenter":return $a=oc($a,t,e,r,n,s),!0;case"mouseover":return za=oc(za,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return zc.set(i,oc(zc.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,qc.set(i,oc(qc.get(i)||null,t,e,r,n,s)),!0}return!1}function qy(t){var e=Po(t.target);if(e!==null){var r=Wo(e);if(r!==null){if(e=r.tag,e===13){if(e=Ly(r),e!==null){t.blockedOn=e,zy(t.priority,function(){By(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=L0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);k0=n,r.target.dispatchEvent(n),k0=null}else return e=ud(r),e!==null&&tg(e),t.blockedOn=r,!1;e.shift()}return!0}function U1(t,e,r){bh(t)&&r.delete(e)}function Y3(){E0=!1,Ba!==null&&bh(Ba)&&(Ba=null),$a!==null&&bh($a)&&($a=null),za!==null&&bh(za)&&(za=null),zc.forEach(U1),qc.forEach(U1)}function lc(t,e){t.blockedOn===e&&(t.blockedOn=null,E0||(E0=!0,ms.unstable_scheduleCallback(ms.unstable_NormalPriority,Y3)))}function Wc(t){function e(s){return lc(s,t)}if(0<Yd.length){lc(Yd[0],t);for(var r=1;r<Yd.length;r++){var n=Yd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ba!==null&&lc(Ba,t),$a!==null&&lc($a,t),za!==null&&lc(za,t),zc.forEach(e),qc.forEach(e),r=0;r<Oa.length;r++)n=Oa[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Oa.length&&(r=Oa[0],r.blockedOn===null);)qy(r),r.blockedOn===null&&Oa.shift()}var su=ia.ReactCurrentBatchConfig,qh=!0;function J3(t,e,r,n){var s=Vt,i=su.transition;su.transition=null;try{Vt=1,rg(t,e,r,n)}finally{Vt=s,su.transition=i}}function K3(t,e,r,n){var s=Vt,i=su.transition;su.transition=null;try{Vt=4,rg(t,e,r,n)}finally{Vt=s,su.transition=i}}function rg(t,e,r,n){if(qh){var s=L0(t,e,r,n);if(s===null)Am(t,e,n,Wh,r),R1(t,n);else if(G3(s,t,e,r,n))n.stopPropagation();else if(R1(t,n),e&4&&-1<H3.indexOf(t)){for(;s!==null;){var i=ud(s);if(i!==null&&Uy(i),i=L0(t,e,r,n),i===null&&Am(t,e,n,Wh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Am(t,e,n,null,r)}}var Wh=null;function L0(t,e,r,n){if(Wh=null,t=Xp(n),t=Po(t),t!==null)if(e=Wo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ly(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wh=t,null}function Wy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M3()){case Qp:return 1;case Dy:return 4;case $h:case R3:return 16;case Fy:return 536870912;default:return 16}default:return 16}}var Ma=null,ng=null,wh=null;function Vy(){if(wh)return wh;var t,e=ng,r=e.length,n,s="value"in Ma?Ma.value:Ma.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return wh=s.slice(t,1<n?1-n:void 0)}function Nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jd(){return!0}function B1(){return!1}function gs(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jd:B1,this.isPropagationStopped=B1,this}return yr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Jd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Jd)},persist:function(){},isPersistent:Jd}),e}var Su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=gs(Su),ld=yr({},Su,{view:0,detail:0}),Z3=gs(ld),xm,bm,uc,Nf=yr({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ig,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uc&&(uc&&t.type==="mousemove"?(xm=t.screenX-uc.screenX,bm=t.screenY-uc.screenY):bm=xm=0,uc=t),xm)},movementY:function(t){return"movementY"in t?t.movementY:bm}}),$1=gs(Nf),X3=yr({},Nf,{dataTransfer:0}),Q3=gs(X3),eN=yr({},ld,{relatedTarget:0}),wm=gs(eN),tN=yr({},Su,{animationName:0,elapsedTime:0,pseudoElement:0}),rN=gs(tN),nN=yr({},Su,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sN=gs(nN),iN=yr({},Su,{data:0}),z1=gs(iN),aN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lN[t])?!!e[t]:!1}function ig(){return uN}var cN=yr({},ld,{key:function(t){if(t.key){var e=aN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ig,charCode:function(t){return t.type==="keypress"?Nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dN=gs(cN),hN=yr({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q1=gs(hN),fN=yr({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ig}),mN=gs(fN),pN=yr({},Su,{propertyName:0,elapsedTime:0,pseudoElement:0}),gN=gs(pN),vN=yr({},Nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yN=gs(vN),xN=[9,13,27,32],ag=ea&&"CompositionEvent"in window,Cc=null;ea&&"documentMode"in document&&(Cc=document.documentMode);var bN=ea&&"TextEvent"in window&&!Cc,Hy=ea&&(!ag||Cc&&8<Cc&&11>=Cc),W1=" ",V1=!1;function Gy(t,e){switch(t){case"keyup":return xN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ql=!1;function wN(t,e){switch(t){case"compositionend":return Yy(e);case"keypress":return e.which!==32?null:(V1=!0,W1);case"textInput":return t=e.data,t===W1&&V1?null:t;default:return null}}function NN(t,e){if(ql)return t==="compositionend"||!ag&&Gy(t,e)?(t=Vy(),wh=ng=Ma=null,ql=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hy&&e.locale!=="ko"?null:e.data;default:return null}}var _N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_N[t.type]:e==="textarea"}function Jy(t,e,r,n){jy(n),e=Vh(e,"onChange"),0<e.length&&(r=new sg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ac=null,Vc=null;function SN(t){ax(t,0)}function _f(t){var e=Hl(t);if(xy(e))return t}function kN(t,e){if(t==="change")return e}var Ky=!1;if(ea){var Nm;if(ea){var _m="oninput"in document;if(!_m){var G1=document.createElement("div");G1.setAttribute("oninput","return;"),_m=typeof G1.oninput=="function"}Nm=_m}else Nm=!1;Ky=Nm&&(!document.documentMode||9<document.documentMode)}function Y1(){Ac&&(Ac.detachEvent("onpropertychange",Zy),Vc=Ac=null)}function Zy(t){if(t.propertyName==="value"&&_f(Vc)){var e=[];Jy(e,Vc,t,Xp(t)),Ey(SN,e)}}function jN(t,e,r){t==="focusin"?(Y1(),Ac=e,Vc=r,Ac.attachEvent("onpropertychange",Zy)):t==="focusout"&&Y1()}function CN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _f(Vc)}function AN(t,e){if(t==="click")return _f(e)}function PN(t,e){if(t==="input"||t==="change")return _f(e)}function EN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:EN;function Hc(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!f0.call(e,s)||!ai(t[s],e[s]))return!1}return!0}function J1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function K1(t,e){var r=J1(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=J1(r)}}function Xy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qy(){for(var t=window,e=Rh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Rh(t.document)}return e}function og(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LN(t){var e=Qy(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Xy(r.ownerDocument.documentElement,r)){if(n!==null&&og(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=K1(r,i);var a=K1(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var TN=ea&&"documentMode"in document&&11>=document.documentMode,Wl=null,T0=null,Pc=null,O0=!1;function Z1(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;O0||Wl==null||Wl!==Rh(n)||(n=Wl,"selectionStart"in n&&og(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pc&&Hc(Pc,n)||(Pc=n,n=Vh(T0,"onSelect"),0<n.length&&(e=new sg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Wl)))}function Kd(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Vl={animationend:Kd("Animation","AnimationEnd"),animationiteration:Kd("Animation","AnimationIteration"),animationstart:Kd("Animation","AnimationStart"),transitionend:Kd("Transition","TransitionEnd")},Sm={},ex={};ea&&(ex=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function Sf(t){if(Sm[t])return Sm[t];if(!Vl[t])return t;var e=Vl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in ex)return Sm[t]=e[r];return t}var tx=Sf("animationend"),rx=Sf("animationiteration"),nx=Sf("animationstart"),sx=Sf("transitionend"),ix=new Map,X1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(t,e){ix.set(t,e),qo(e,[t])}for(var km=0;km<X1.length;km++){var jm=X1[km],ON=jm.toLowerCase(),IN=jm[0].toUpperCase()+jm.slice(1);eo(ON,"on"+IN)}eo(tx,"onAnimationEnd");eo(rx,"onAnimationIteration");eo(nx,"onAnimationStart");eo("dblclick","onDoubleClick");eo("focusin","onFocus");eo("focusout","onBlur");eo(sx,"onTransitionEnd");mu("onMouseEnter",["mouseout","mouseover"]);mu("onMouseLeave",["mouseout","mouseover"]);mu("onPointerEnter",["pointerout","pointerover"]);mu("onPointerLeave",["pointerout","pointerover"]);qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("cancel close invalid load scroll toggle".split(" ").concat(bc));function Q1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,O3(n,e,void 0,t),t.currentTarget=null}function ax(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],u=o.instance,d=o.currentTarget;if(o=o.listener,u!==i&&s.isPropagationStopped())break e;Q1(s,o,d),i=u}else for(a=0;a<n.length;a++){if(o=n[a],u=o.instance,d=o.currentTarget,o=o.listener,u!==i&&s.isPropagationStopped())break e;Q1(s,o,d),i=u}}}if(Bh)throw t=A0,Bh=!1,A0=null,t}function ir(t,e){var r=e[R0];r===void 0&&(r=e[R0]=new Set);var n=t+"__bubble";r.has(n)||(ox(e,t,2,!1),r.add(n))}function Cm(t,e,r){var n=0;e&&(n|=4),ox(r,t,n,e)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function Gc(t){if(!t[Zd]){t[Zd]=!0,my.forEach(function(r){r!=="selectionchange"&&(DN.has(r)||Cm(r,!1,t),Cm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zd]||(e[Zd]=!0,Cm("selectionchange",!1,e))}}function ox(t,e,r,n){switch(Wy(e)){case 1:var s=J3;break;case 4:s=K3;break;default:s=rg}r=s.bind(null,e,r,t),s=void 0,!C0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Am(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Po(o),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}o=o.parentNode}}n=n.return}Ey(function(){var d=i,f=Xp(r),g=[];e:{var y=ix.get(t);if(y!==void 0){var p=sg,k=t;switch(t){case"keypress":if(Nh(r)===0)break e;case"keydown":case"keyup":p=dN;break;case"focusin":k="focus",p=wm;break;case"focusout":k="blur",p=wm;break;case"beforeblur":case"afterblur":p=wm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Q3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=mN;break;case tx:case rx:case nx:p=rN;break;case sx:p=gN;break;case"scroll":p=Z3;break;case"wheel":p=yN;break;case"copy":case"cut":case"paste":p=sN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=q1}var N=(e&4)!==0,C=!N&&t==="scroll",x=N?y!==null?y+"Capture":null:y;N=[];for(var b=d,_;b!==null;){_=b;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,x!==null&&(R=$c(b,x),R!=null&&N.push(Yc(b,R,_)))),C)break;b=b.return}0<N.length&&(y=new p(y,k,null,r,f),g.push({event:y,listeners:N}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",y&&r!==k0&&(k=r.relatedTarget||r.fromElement)&&(Po(k)||k[ta]))break e;if((p||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,p?(k=r.relatedTarget||r.toElement,p=d,k=k?Po(k):null,k!==null&&(C=Wo(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(p=null,k=d),p!==k)){if(N=$1,R="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(N=q1,R="onPointerLeave",x="onPointerEnter",b="pointer"),C=p==null?y:Hl(p),_=k==null?y:Hl(k),y=new N(R,b+"leave",p,r,f),y.target=C,y.relatedTarget=_,R=null,Po(f)===d&&(N=new N(x,b+"enter",k,r,f),N.target=_,N.relatedTarget=C,R=N),C=R,p&&k)t:{for(N=p,x=k,b=0,_=N;_;_=kl(_))b++;for(_=0,R=x;R;R=kl(R))_++;for(;0<b-_;)N=kl(N),b--;for(;0<_-b;)x=kl(x),_--;for(;b--;){if(N===x||x!==null&&N===x.alternate)break t;N=kl(N),x=kl(x)}N=null}else N=null;p!==null&&e2(g,y,p,N,!1),k!==null&&C!==null&&e2(g,C,k,N,!0)}}e:{if(y=d?Hl(d):window,p=y.nodeName&&y.nodeName.toLowerCase(),p==="select"||p==="input"&&y.type==="file")var W=kN;else if(H1(y))if(Ky)W=PN;else{W=CN;var K=jN}else(p=y.nodeName)&&p.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(W=AN);if(W&&(W=W(t,d))){Jy(g,W,r,f);break e}K&&K(t,y,d),t==="focusout"&&(K=y._wrapperState)&&K.controlled&&y.type==="number"&&b0(y,"number",y.value)}switch(K=d?Hl(d):window,t){case"focusin":(H1(K)||K.contentEditable==="true")&&(Wl=K,T0=d,Pc=null);break;case"focusout":Pc=T0=Wl=null;break;case"mousedown":O0=!0;break;case"contextmenu":case"mouseup":case"dragend":O0=!1,Z1(g,r,f);break;case"selectionchange":if(TN)break;case"keydown":case"keyup":Z1(g,r,f)}var j;if(ag)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ql?Gy(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Hy&&r.locale!=="ko"&&(ql||P!=="onCompositionStart"?P==="onCompositionEnd"&&ql&&(j=Vy()):(Ma=f,ng="value"in Ma?Ma.value:Ma.textContent,ql=!0)),K=Vh(d,P),0<K.length&&(P=new z1(P,t,null,r,f),g.push({event:P,listeners:K}),j?P.data=j:(j=Yy(r),j!==null&&(P.data=j)))),(j=bN?wN(t,r):NN(t,r))&&(d=Vh(d,"onBeforeInput"),0<d.length&&(f=new z1("onBeforeInput","beforeinput",null,r,f),g.push({event:f,listeners:d}),f.data=j))}ax(g,e)})}function Yc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Vh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$c(t,r),i!=null&&n.unshift(Yc(t,i,s)),i=$c(t,e),i!=null&&n.push(Yc(t,i,s))),t=t.return}return n}function kl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function e2(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,u=o.alternate,d=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&d!==null&&(o=d,s?(u=$c(r,i),u!=null&&a.unshift(Yc(r,u,o))):s||(u=$c(r,i),u!=null&&a.push(Yc(r,u,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var FN=/\r\n?/g,MN=/\u0000|\uFFFD/g;function t2(t){return(typeof t=="string"?t:""+t).replace(FN,`
`).replace(MN,"")}function Xd(t,e,r){if(e=t2(e),t2(t)!==e&&r)throw Error(Oe(425))}function Hh(){}var I0=null,D0=null;function F0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var M0=typeof setTimeout=="function"?setTimeout:void 0,RN=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,UN=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(t){return r2.resolve(null).then(t).catch(BN)}:M0;function BN(t){setTimeout(function(){throw t})}function Pm(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Wc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Wc(e)}function qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function n2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ku=Math.random().toString(36).slice(2),wi="__reactFiber$"+ku,Jc="__reactProps$"+ku,ta="__reactContainer$"+ku,R0="__reactEvents$"+ku,$N="__reactListeners$"+ku,zN="__reactHandles$"+ku;function Po(t){var e=t[wi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ta]||r[wi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=n2(t);t!==null;){if(r=t[wi])return r;t=n2(t)}return e}t=r,r=t.parentNode}return null}function ud(t){return t=t[wi]||t[ta],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function kf(t){return t[Jc]||null}var U0=[],Gl=-1;function to(t){return{current:t}}function or(t){0>Gl||(t.current=U0[Gl],U0[Gl]=null,Gl--)}function rr(t,e){Gl++,U0[Gl]=t.current,t.current=e}var Ka={},wn=to(Ka),Yn=to(!1),Mo=Ka;function pu(t,e){var r=t.type.contextTypes;if(!r)return Ka;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jn(t){return t=t.childContextTypes,t!=null}function Gh(){or(Yn),or(wn)}function s2(t,e,r){if(wn.current!==Ka)throw Error(Oe(168));rr(wn,e),rr(Yn,r)}function lx(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Oe(108,j3(t)||"Unknown",s));return yr({},r,n)}function Yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ka,Mo=wn.current,rr(wn,t),rr(Yn,Yn.current),!0}function i2(t,e,r){var n=t.stateNode;if(!n)throw Error(Oe(169));r?(t=lx(t,e,Mo),n.__reactInternalMemoizedMergedChildContext=t,or(Yn),or(wn),rr(wn,t)):or(Yn),rr(Yn,r)}var Ki=null,jf=!1,Em=!1;function ux(t){Ki===null?Ki=[t]:Ki.push(t)}function qN(t){jf=!0,ux(t)}function ro(){if(!Em&&Ki!==null){Em=!0;var t=0,e=Vt;try{var r=Ki;for(Vt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ki=null,jf=!1}catch(s){throw Ki!==null&&(Ki=Ki.slice(t+1)),Iy(Qp,ro),s}finally{Vt=e,Em=!1}}return null}var Yl=[],Jl=0,Jh=null,Kh=0,Ls=[],Ts=0,Ro=null,Zi=1,Xi="";function No(t,e){Yl[Jl++]=Kh,Yl[Jl++]=Jh,Jh=t,Kh=e}function cx(t,e,r){Ls[Ts++]=Zi,Ls[Ts++]=Xi,Ls[Ts++]=Ro,Ro=t;var n=Zi;t=Xi;var s=32-si(n)-1;n&=~(1<<s),r+=1;var i=32-si(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Zi=1<<32-si(e)+s|r<<s|n,Xi=i+t}else Zi=1<<i|r<<s|n,Xi=t}function lg(t){t.return!==null&&(No(t,1),cx(t,1,0))}function ug(t){for(;t===Jh;)Jh=Yl[--Jl],Yl[Jl]=null,Kh=Yl[--Jl],Yl[Jl]=null;for(;t===Ro;)Ro=Ls[--Ts],Ls[Ts]=null,Xi=Ls[--Ts],Ls[Ts]=null,Zi=Ls[--Ts],Ls[Ts]=null}var ds=null,us=null,dr=!1,ri=null;function dx(t,e){var r=Os(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function a2(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ds=t,us=qa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ds=t,us=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ro!==null?{id:Zi,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Os(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ds=t,us=null,!0):!1;default:return!1}}function B0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $0(t){if(dr){var e=us;if(e){var r=e;if(!a2(t,e)){if(B0(t))throw Error(Oe(418));e=qa(r.nextSibling);var n=ds;e&&a2(t,e)?dx(n,r):(t.flags=t.flags&-4097|2,dr=!1,ds=t)}}else{if(B0(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,dr=!1,ds=t}}}function o2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ds=t}function Qd(t){if(t!==ds)return!1;if(!dr)return o2(t),dr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F0(t.type,t.memoizedProps)),e&&(e=us)){if(B0(t))throw hx(),Error(Oe(418));for(;e;)dx(t,e),e=qa(e.nextSibling)}if(o2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){us=qa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}us=null}}else us=ds?qa(t.stateNode.nextSibling):null;return!0}function hx(){for(var t=us;t;)t=qa(t.nextSibling)}function gu(){us=ds=null,dr=!1}function cg(t){ri===null?ri=[t]:ri.push(t)}var WN=ia.ReactCurrentBatchConfig;function cc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Oe(309));var n=r.stateNode}if(!n)throw Error(Oe(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Oe(284));if(!r._owner)throw Error(Oe(290,t))}return t}function eh(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function l2(t){var e=t._init;return e(t._payload)}function fx(t){function e(x,b){if(t){var _=x.deletions;_===null?(x.deletions=[b],x.flags|=16):_.push(b)}}function r(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function s(x,b){return x=Ga(x,b),x.index=0,x.sibling=null,x}function i(x,b,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<b?(x.flags|=2,b):_):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,b,_,R){return b===null||b.tag!==6?(b=Mm(_,x.mode,R),b.return=x,b):(b=s(b,_),b.return=x,b)}function u(x,b,_,R){var W=_.type;return W===zl?f(x,b,_.props.children,R,_.key):b!==null&&(b.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ea&&l2(W)===b.type)?(R=s(b,_.props),R.ref=cc(x,b,_),R.return=x,R):(R=Ph(_.type,_.key,_.props,null,x.mode,R),R.ref=cc(x,b,_),R.return=x,R)}function d(x,b,_,R){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Rm(_,x.mode,R),b.return=x,b):(b=s(b,_.children||[]),b.return=x,b)}function f(x,b,_,R,W){return b===null||b.tag!==7?(b=Do(_,x.mode,R,W),b.return=x,b):(b=s(b,_),b.return=x,b)}function g(x,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Mm(""+b,x.mode,_),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qd:return _=Ph(b.type,b.key,b.props,null,x.mode,_),_.ref=cc(x,null,b),_.return=x,_;case $l:return b=Rm(b,x.mode,_),b.return=x,b;case Ea:var R=b._init;return g(x,R(b._payload),_)}if(yc(b)||ic(b))return b=Do(b,x.mode,_,null),b.return=x,b;eh(x,b)}return null}function y(x,b,_,R){var W=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return W!==null?null:o(x,b,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qd:return _.key===W?u(x,b,_,R):null;case $l:return _.key===W?d(x,b,_,R):null;case Ea:return W=_._init,y(x,b,W(_._payload),R)}if(yc(_)||ic(_))return W!==null?null:f(x,b,_,R,null);eh(x,_)}return null}function p(x,b,_,R,W){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(_)||null,o(b,x,""+R,W);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case qd:return x=x.get(R.key===null?_:R.key)||null,u(b,x,R,W);case $l:return x=x.get(R.key===null?_:R.key)||null,d(b,x,R,W);case Ea:var K=R._init;return p(x,b,_,K(R._payload),W)}if(yc(R)||ic(R))return x=x.get(_)||null,f(b,x,R,W,null);eh(b,R)}return null}function k(x,b,_,R){for(var W=null,K=null,j=b,P=b=0,F=null;j!==null&&P<_.length;P++){j.index>P?(F=j,j=null):F=j.sibling;var B=y(x,j,_[P],R);if(B===null){j===null&&(j=F);break}t&&j&&B.alternate===null&&e(x,j),b=i(B,b,P),K===null?W=B:K.sibling=B,K=B,j=F}if(P===_.length)return r(x,j),dr&&No(x,P),W;if(j===null){for(;P<_.length;P++)j=g(x,_[P],R),j!==null&&(b=i(j,b,P),K===null?W=j:K.sibling=j,K=j);return dr&&No(x,P),W}for(j=n(x,j);P<_.length;P++)F=p(j,x,P,_[P],R),F!==null&&(t&&F.alternate!==null&&j.delete(F.key===null?P:F.key),b=i(F,b,P),K===null?W=F:K.sibling=F,K=F);return t&&j.forEach(function(A){return e(x,A)}),dr&&No(x,P),W}function N(x,b,_,R){var W=ic(_);if(typeof W!="function")throw Error(Oe(150));if(_=W.call(_),_==null)throw Error(Oe(151));for(var K=W=null,j=b,P=b=0,F=null,B=_.next();j!==null&&!B.done;P++,B=_.next()){j.index>P?(F=j,j=null):F=j.sibling;var A=y(x,j,B.value,R);if(A===null){j===null&&(j=F);break}t&&j&&A.alternate===null&&e(x,j),b=i(A,b,P),K===null?W=A:K.sibling=A,K=A,j=F}if(B.done)return r(x,j),dr&&No(x,P),W;if(j===null){for(;!B.done;P++,B=_.next())B=g(x,B.value,R),B!==null&&(b=i(B,b,P),K===null?W=B:K.sibling=B,K=B);return dr&&No(x,P),W}for(j=n(x,j);!B.done;P++,B=_.next())B=p(j,x,P,B.value,R),B!==null&&(t&&B.alternate!==null&&j.delete(B.key===null?P:B.key),b=i(B,b,P),K===null?W=B:K.sibling=B,K=B);return t&&j.forEach(function(O){return e(x,O)}),dr&&No(x,P),W}function C(x,b,_,R){if(typeof _=="object"&&_!==null&&_.type===zl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case qd:e:{for(var W=_.key,K=b;K!==null;){if(K.key===W){if(W=_.type,W===zl){if(K.tag===7){r(x,K.sibling),b=s(K,_.props.children),b.return=x,x=b;break e}}else if(K.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ea&&l2(W)===K.type){r(x,K.sibling),b=s(K,_.props),b.ref=cc(x,K,_),b.return=x,x=b;break e}r(x,K);break}else e(x,K);K=K.sibling}_.type===zl?(b=Do(_.props.children,x.mode,R,_.key),b.return=x,x=b):(R=Ph(_.type,_.key,_.props,null,x.mode,R),R.ref=cc(x,b,_),R.return=x,x=R)}return a(x);case $l:e:{for(K=_.key;b!==null;){if(b.key===K)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){r(x,b.sibling),b=s(b,_.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else e(x,b);b=b.sibling}b=Rm(_,x.mode,R),b.return=x,x=b}return a(x);case Ea:return K=_._init,C(x,b,K(_._payload),R)}if(yc(_))return k(x,b,_,R);if(ic(_))return N(x,b,_,R);eh(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(r(x,b.sibling),b=s(b,_),b.return=x,x=b):(r(x,b),b=Mm(_,x.mode,R),b.return=x,x=b),a(x)):r(x,b)}return C}var vu=fx(!0),mx=fx(!1),Zh=to(null),Xh=null,Kl=null,dg=null;function hg(){dg=Kl=Xh=null}function fg(t){var e=Zh.current;or(Zh),t._currentValue=e}function z0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function iu(t,e){Xh=t,dg=Kl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gn=!0),t.firstContext=null)}function Ms(t){var e=t._currentValue;if(dg!==t)if(t={context:t,memoizedValue:e,next:null},Kl===null){if(Xh===null)throw Error(Oe(308));Kl=t,Xh.dependencies={lanes:0,firstContext:t}}else Kl=Kl.next=t;return e}var Eo=null;function mg(t){Eo===null?Eo=[t]:Eo.push(t)}function px(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,mg(e)):(r.next=s.next,s.next=r),e.interleaved=r,ra(t,n)}function ra(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var La=!1;function pg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ft&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ra(t,r)}return s=n.interleaved,s===null?(e.next=e,mg(n)):(e.next=s.next,s.next=e),n.interleaved=e,ra(t,r)}function _h(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,eg(t,r)}}function u2(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Qh(t,e,r,n){var s=t.updateQueue;La=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=d:o.next=d,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;a=0,f=d=u=null,o=i;do{var y=o.lane,p=o.eventTime;if((n&y)===y){f!==null&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=t,N=o;switch(y=e,p=r,N.tag){case 1:if(k=N.payload,typeof k=="function"){g=k.call(p,g,y);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,y=typeof k=="function"?k.call(p,g,y):k,y==null)break e;g=yr({},g,y);break e;case 2:La=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[o]:y.push(o))}else p={eventTime:p,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(d=f=p,u=g):f=f.next=p,a|=y;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;y=o,o=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bo|=a,t.lanes=a,t.memoizedState=g}}function c2(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Oe(191,s));s.call(n)}}}var cd={},Si=to(cd),Kc=to(cd),Zc=to(cd);function Lo(t){if(t===cd)throw Error(Oe(174));return t}function gg(t,e){switch(rr(Zc,e),rr(Kc,t),rr(Si,cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:N0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=N0(e,t)}or(Si),rr(Si,e)}function yu(){or(Si),or(Kc),or(Zc)}function vx(t){Lo(Zc.current);var e=Lo(Si.current),r=N0(e,t.type);e!==r&&(rr(Kc,t),rr(Si,r))}function vg(t){Kc.current===t&&(or(Si),or(Kc))}var gr=to(0);function ef(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lm=[];function yg(){for(var t=0;t<Lm.length;t++)Lm[t]._workInProgressVersionPrimary=null;Lm.length=0}var Sh=ia.ReactCurrentDispatcher,Tm=ia.ReactCurrentBatchConfig,Uo=0,vr=null,Vr=null,Zr=null,tf=!1,Ec=!1,Xc=0,VN=0;function dn(){throw Error(Oe(321))}function xg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ai(t[r],e[r]))return!1;return!0}function bg(t,e,r,n,s,i){if(Uo=i,vr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sh.current=t===null||t.memoizedState===null?JN:KN,t=r(n,s),Ec){i=0;do{if(Ec=!1,Xc=0,25<=i)throw Error(Oe(301));i+=1,Zr=Vr=null,e.updateQueue=null,Sh.current=ZN,t=r(n,s)}while(Ec)}if(Sh.current=rf,e=Vr!==null&&Vr.next!==null,Uo=0,Zr=Vr=vr=null,tf=!1,e)throw Error(Oe(300));return t}function wg(){var t=Xc!==0;return Xc=0,t}function xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?vr.memoizedState=Zr=t:Zr=Zr.next=t,Zr}function Rs(){if(Vr===null){var t=vr.alternate;t=t!==null?t.memoizedState:null}else t=Vr.next;var e=Zr===null?vr.memoizedState:Zr.next;if(e!==null)Zr=e,Vr=t;else{if(t===null)throw Error(Oe(310));Vr=t,t={memoizedState:Vr.memoizedState,baseState:Vr.baseState,baseQueue:Vr.baseQueue,queue:Vr.queue,next:null},Zr===null?vr.memoizedState=Zr=t:Zr=Zr.next=t}return Zr}function Qc(t,e){return typeof e=="function"?e(t):e}function Om(t){var e=Rs(),r=e.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=t;var n=Vr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,u=null,d=i;do{var f=d.lane;if((Uo&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(o=u=g,a=n):u=u.next=g,vr.lanes|=f,Bo|=f}d=d.next}while(d!==null&&d!==i);u===null?a=n:u.next=o,ai(n,e.memoizedState)||(Gn=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,vr.lanes|=i,Bo|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Im(t){var e=Rs(),r=e.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ai(i,e.memoizedState)||(Gn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function yx(){}function xx(t,e){var r=vr,n=Rs(),s=e(),i=!ai(n.memoizedState,s);if(i&&(n.memoizedState=s,Gn=!0),n=n.queue,Ng(Nx.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Zr!==null&&Zr.memoizedState.tag&1){if(r.flags|=2048,ed(9,wx.bind(null,r,n,s,e),void 0,null),Qr===null)throw Error(Oe(349));Uo&30||bx(r,e,s)}return s}function bx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=vr.updateQueue,e===null?(e={lastEffect:null,stores:null},vr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function wx(t,e,r,n){e.value=r,e.getSnapshot=n,_x(e)&&Sx(t)}function Nx(t,e,r){return r(function(){_x(e)&&Sx(t)})}function _x(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ai(t,r)}catch{return!0}}function Sx(t){var e=ra(t,1);e!==null&&ii(e,t,1,-1)}function d2(t){var e=xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:t},e.queue=t,t=t.dispatch=YN.bind(null,vr,t),[e.memoizedState,t]}function ed(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=vr.updateQueue,e===null?(e={lastEffect:null,stores:null},vr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function kx(){return Rs().memoizedState}function kh(t,e,r,n){var s=xi();vr.flags|=t,s.memoizedState=ed(1|e,r,void 0,n===void 0?null:n)}function Cf(t,e,r,n){var s=Rs();n=n===void 0?null:n;var i=void 0;if(Vr!==null){var a=Vr.memoizedState;if(i=a.destroy,n!==null&&xg(n,a.deps)){s.memoizedState=ed(e,r,i,n);return}}vr.flags|=t,s.memoizedState=ed(1|e,r,i,n)}function h2(t,e){return kh(8390656,8,t,e)}function Ng(t,e){return Cf(2048,8,t,e)}function jx(t,e){return Cf(4,2,t,e)}function Cx(t,e){return Cf(4,4,t,e)}function Ax(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Px(t,e,r){return r=r!=null?r.concat([t]):null,Cf(4,4,Ax.bind(null,e,t),r)}function _g(){}function Ex(t,e){var r=Rs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Lx(t,e){var r=Rs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Tx(t,e,r){return Uo&21?(ai(r,e)||(r=My(),vr.lanes|=r,Bo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gn=!0),t.memoizedState=r)}function HN(t,e){var r=Vt;Vt=r!==0&&4>r?r:4,t(!0);var n=Tm.transition;Tm.transition={};try{t(!1),e()}finally{Vt=r,Tm.transition=n}}function Ox(){return Rs().memoizedState}function GN(t,e,r){var n=Ha(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ix(t))Dx(e,r);else if(r=px(t,e,r,n),r!==null){var s=Tn();ii(r,t,n,s),Fx(r,e,n)}}function YN(t,e,r){var n=Ha(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ix(t))Dx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,ai(o,a)){var u=e.interleaved;u===null?(s.next=s,mg(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=px(t,e,s,n),r!==null&&(s=Tn(),ii(r,t,n,s),Fx(r,e,n))}}function Ix(t){var e=t.alternate;return t===vr||e!==null&&e===vr}function Dx(t,e){Ec=tf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Fx(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,eg(t,r)}}var rf={readContext:Ms,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},JN={readContext:Ms,useCallback:function(t,e){return xi().memoizedState=[t,e===void 0?null:e],t},useContext:Ms,useEffect:h2,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,kh(4194308,4,Ax.bind(null,e,t),r)},useLayoutEffect:function(t,e){return kh(4194308,4,t,e)},useInsertionEffect:function(t,e){return kh(4,2,t,e)},useMemo:function(t,e){var r=xi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=xi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=GN.bind(null,vr,t),[n.memoizedState,t]},useRef:function(t){var e=xi();return t={current:t},e.memoizedState=t},useState:d2,useDebugValue:_g,useDeferredValue:function(t){return xi().memoizedState=t},useTransition:function(){var t=d2(!1),e=t[0];return t=HN.bind(null,t[1]),xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=vr,s=xi();if(dr){if(r===void 0)throw Error(Oe(407));r=r()}else{if(r=e(),Qr===null)throw Error(Oe(349));Uo&30||bx(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,h2(Nx.bind(null,n,i,t),[t]),n.flags|=2048,ed(9,wx.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=xi(),e=Qr.identifierPrefix;if(dr){var r=Xi,n=Zi;r=(n&~(1<<32-si(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Xc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=VN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KN={readContext:Ms,useCallback:Ex,useContext:Ms,useEffect:Ng,useImperativeHandle:Px,useInsertionEffect:jx,useLayoutEffect:Cx,useMemo:Lx,useReducer:Om,useRef:kx,useState:function(){return Om(Qc)},useDebugValue:_g,useDeferredValue:function(t){var e=Rs();return Tx(e,Vr.memoizedState,t)},useTransition:function(){var t=Om(Qc)[0],e=Rs().memoizedState;return[t,e]},useMutableSource:yx,useSyncExternalStore:xx,useId:Ox,unstable_isNewReconciler:!1},ZN={readContext:Ms,useCallback:Ex,useContext:Ms,useEffect:Ng,useImperativeHandle:Px,useInsertionEffect:jx,useLayoutEffect:Cx,useMemo:Lx,useReducer:Im,useRef:kx,useState:function(){return Im(Qc)},useDebugValue:_g,useDeferredValue:function(t){var e=Rs();return Vr===null?e.memoizedState=t:Tx(e,Vr.memoizedState,t)},useTransition:function(){var t=Im(Qc)[0],e=Rs().memoizedState;return[t,e]},useMutableSource:yx,useSyncExternalStore:xx,useId:Ox,unstable_isNewReconciler:!1};function Xs(t,e){if(t&&t.defaultProps){e=yr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function q0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:yr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Af={isMounted:function(t){return(t=t._reactInternals)?Wo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Tn(),s=Ha(t),i=Qi(n,s);i.payload=e,r!=null&&(i.callback=r),e=Wa(t,i,s),e!==null&&(ii(e,t,s,n),_h(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Tn(),s=Ha(t),i=Qi(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Wa(t,i,s),e!==null&&(ii(e,t,s,n),_h(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Tn(),n=Ha(t),s=Qi(r,n);s.tag=2,e!=null&&(s.callback=e),e=Wa(t,s,n),e!==null&&(ii(e,t,n,r),_h(e,t,n))}};function f2(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Hc(r,n)||!Hc(s,i):!0}function Mx(t,e,r){var n=!1,s=Ka,i=e.contextType;return typeof i=="object"&&i!==null?i=Ms(i):(s=Jn(e)?Mo:wn.current,n=e.contextTypes,i=(n=n!=null)?pu(t,s):Ka),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Af,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function m2(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Af.enqueueReplaceState(e,e.state,null)}function W0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},pg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ms(i):(i=Jn(e)?Mo:wn.current,s.context=pu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(q0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Af.enqueueReplaceState(s,s.state,null),Qh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xu(t,e){try{var r="",n=e;do r+=k3(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Dm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function V0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var XN=typeof WeakMap=="function"?WeakMap:Map;function Rx(t,e,r){r=Qi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){sf||(sf=!0,tp=n),V0(t,e)},r}function Ux(t,e,r){r=Qi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){V0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){V0(t,e),typeof n!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function p2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new XN;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=h_.bind(null,t,e,r),e.then(t,t))}function g2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v2(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Qi(-1,1),e.tag=2,Wa(r,e,1))),r.lanes|=1),t)}var QN=ia.ReactCurrentOwner,Gn=!1;function En(t,e,r,n){e.child=t===null?mx(e,null,r,n):vu(e,t.child,r,n)}function y2(t,e,r,n,s){r=r.render;var i=e.ref;return iu(e,s),n=bg(t,e,r,n,i,s),r=wg(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,na(t,e,s)):(dr&&r&&lg(e),e.flags|=1,En(t,e,n,s),e.child)}function x2(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Lg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Bx(t,e,i,n,s)):(t=Ph(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Hc,r(a,n)&&t.ref===e.ref)return na(t,e,s)}return e.flags|=1,t=Ga(i,n),t.ref=e.ref,t.return=e,e.child=t}function Bx(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Hc(i,n)&&t.ref===e.ref)if(Gn=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Gn=!0);else return e.lanes=t.lanes,na(t,e,s)}return H0(t,e,r,n,s)}function $x(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Xl,ls),ls|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rr(Xl,ls),ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,rr(Xl,ls),ls|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,rr(Xl,ls),ls|=n;return En(t,e,s,r),e.child}function zx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function H0(t,e,r,n,s){var i=Jn(r)?Mo:wn.current;return i=pu(e,i),iu(e,s),r=bg(t,e,r,n,i,s),n=wg(),t!==null&&!Gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,na(t,e,s)):(dr&&n&&lg(e),e.flags|=1,En(t,e,r,s),e.child)}function b2(t,e,r,n,s){if(Jn(r)){var i=!0;Yh(e)}else i=!1;if(iu(e,s),e.stateNode===null)jh(t,e),Mx(e,r,n),W0(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ms(d):(d=Jn(r)?Mo:wn.current,d=pu(e,d));var f=r.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||u!==d)&&m2(e,a,n,d),La=!1;var y=e.memoizedState;a.state=y,Qh(e,n,a,s),u=e.memoizedState,o!==n||y!==u||Yn.current||La?(typeof f=="function"&&(q0(e,r,f,n),u=e.memoizedState),(o=La||f2(e,r,o,n,y,u,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=d,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,gx(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:Xs(e.type,o),a.props=d,g=e.pendingProps,y=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Ms(u):(u=Jn(r)?Mo:wn.current,u=pu(e,u));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==g||y!==u)&&m2(e,a,n,u),La=!1,y=e.memoizedState,a.state=y,Qh(e,n,a,s);var k=e.memoizedState;o!==g||y!==k||Yn.current||La?(typeof p=="function"&&(q0(e,r,p,n),k=e.memoizedState),(d=La||f2(e,r,d,n,y,k,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,k,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,k,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=k),a.props=n,a.state=k,a.context=u,n=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),n=!1)}return G0(t,e,r,n,i,s)}function G0(t,e,r,n,s,i){zx(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&i2(e,r,!1),na(t,e,i);n=e.stateNode,QN.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=vu(e,t.child,null,i),e.child=vu(e,null,o,i)):En(t,e,o,i),e.memoizedState=n.state,s&&i2(e,r,!0),e.child}function qx(t){var e=t.stateNode;e.pendingContext?s2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&s2(t,e.context,!1),gg(t,e.containerInfo)}function w2(t,e,r,n,s){return gu(),cg(s),e.flags|=256,En(t,e,r,n),e.child}var Y0={dehydrated:null,treeContext:null,retryLane:0};function J0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wx(t,e,r){var n=e.pendingProps,s=gr.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rr(gr,s&1),t===null)return $0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Lf(a,n,0,null),t=Do(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=J0(r),e.memoizedState=Y0,t):Sg(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return e_(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Ga(s,u),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Ga(o,i):(i=Do(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?J0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Y0,n}return i=t.child,t=i.sibling,n=Ga(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Sg(t,e){return e=Lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function th(t,e,r,n){return n!==null&&cg(n),vu(e,t.child,null,r),t=Sg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function e_(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Dm(Error(Oe(422))),th(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Lf({mode:"visible",children:n.children},s,0,null),i=Do(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&vu(e,t.child,null,a),e.child.memoizedState=J0(a),e.memoizedState=Y0,i);if(!(e.mode&1))return th(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Oe(419)),n=Dm(i,n,void 0),th(t,e,a,n)}if(o=(a&t.childLanes)!==0,Gn||o){if(n=Qr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ra(t,s),ii(n,t,s,-1))}return Eg(),n=Dm(Error(Oe(421))),th(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=f_.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,us=qa(s.nextSibling),ds=e,dr=!0,ri=null,t!==null&&(Ls[Ts++]=Zi,Ls[Ts++]=Xi,Ls[Ts++]=Ro,Zi=t.id,Xi=t.overflow,Ro=e),e=Sg(e,n.children),e.flags|=4096,e)}function N2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),z0(t.return,e,r)}function Fm(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Vx(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(En(t,e,n.children,r),n=gr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N2(t,r,e);else if(t.tag===19)N2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(rr(gr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ef(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Fm(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ef(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Fm(e,!0,r,null,i);break;case"together":Fm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function na(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Bo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,r=Ga(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ga(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function t_(t,e,r){switch(e.tag){case 3:qx(e),gu();break;case 5:vx(e);break;case 1:Jn(e.type)&&Yh(e);break;case 4:gg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;rr(Zh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(rr(gr,gr.current&1),e.flags|=128,null):r&e.child.childLanes?Wx(t,e,r):(rr(gr,gr.current&1),t=na(t,e,r),t!==null?t.sibling:null);rr(gr,gr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Vx(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rr(gr,gr.current),n)break;return null;case 22:case 23:return e.lanes=0,$x(t,e,r)}return na(t,e,r)}var Hx,K0,Gx,Yx;Hx=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};K0=function(){};Gx=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Lo(Si.current);var i=null;switch(r){case"input":s=y0(t,s),n=y0(t,n),i=[];break;case"select":s=yr({},s,{value:void 0}),n=yr({},n,{value:void 0}),i=[];break;case"textarea":s=w0(t,s),n=w0(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Hh)}_0(r,n);var a;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Uc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var u=n[d];if(o=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==o&&(u!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Uc.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ir("scroll",t),i||o===u||(i=[])):(i=i||[]).push(d,u))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Yx=function(t,e,r,n){r!==n&&(e.flags|=4)};function dc(t,e){if(!dr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function r_(t,e,r){var n=e.pendingProps;switch(ug(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(e),null;case 1:return Jn(e.type)&&Gh(),hn(e),null;case 3:return n=e.stateNode,yu(),or(Yn),or(wn),yg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Qd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(sp(ri),ri=null))),K0(t,e),hn(e),null;case 5:vg(e);var s=Lo(Zc.current);if(r=e.type,t!==null&&e.stateNode!=null)Gx(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Oe(166));return hn(e),null}if(t=Lo(Si.current),Qd(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[wi]=e,n[Jc]=i,t=(e.mode&1)!==0,r){case"dialog":ir("cancel",n),ir("close",n);break;case"iframe":case"object":case"embed":ir("load",n);break;case"video":case"audio":for(s=0;s<bc.length;s++)ir(bc[s],n);break;case"source":ir("error",n);break;case"img":case"image":case"link":ir("error",n),ir("load",n);break;case"details":ir("toggle",n);break;case"input":L1(n,i),ir("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ir("invalid",n);break;case"textarea":O1(n,i),ir("invalid",n)}_0(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Xd(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Xd(n.textContent,o,t),s=["children",""+o]):Uc.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ir("scroll",n)}switch(r){case"input":Wd(n),T1(n,i,!0);break;case"textarea":Wd(n),I1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Hh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ny(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[wi]=e,t[Jc]=n,Hx(t,e,!1,!1),e.stateNode=t;e:{switch(a=S0(r,n),r){case"dialog":ir("cancel",t),ir("close",t),s=n;break;case"iframe":case"object":case"embed":ir("load",t),s=n;break;case"video":case"audio":for(s=0;s<bc.length;s++)ir(bc[s],t);s=n;break;case"source":ir("error",t),s=n;break;case"img":case"image":case"link":ir("error",t),ir("load",t),s=n;break;case"details":ir("toggle",t),s=n;break;case"input":L1(t,n),s=y0(t,n),ir("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=yr({},n,{value:void 0}),ir("invalid",t);break;case"textarea":O1(t,n),s=w0(t,n),ir("invalid",t);break;default:s=n}_0(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?ky(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_y(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Bc(t,u):typeof u=="number"&&Bc(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uc.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ir("scroll",t):u!=null&&Yp(t,i,u,a))}switch(r){case"input":Wd(t),T1(t,n,!1);break;case"textarea":Wd(t),I1(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ja(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?tu(t,!!n.multiple,i,!1):n.defaultValue!=null&&tu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hn(e),null;case 6:if(t&&e.stateNode!=null)Yx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Oe(166));if(r=Lo(Zc.current),Lo(Si.current),Qd(e)){if(n=e.stateNode,r=e.memoizedProps,n[wi]=e,(i=n.nodeValue!==r)&&(t=ds,t!==null))switch(t.tag){case 3:Xd(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xd(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[wi]=e,e.stateNode=n}return hn(e),null;case 13:if(or(gr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dr&&us!==null&&e.mode&1&&!(e.flags&128))hx(),gu(),e.flags|=98560,i=!1;else if(i=Qd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Oe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Oe(317));i[wi]=e}else gu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hn(e),i=!1}else ri!==null&&(sp(ri),ri=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||gr.current&1?Hr===0&&(Hr=3):Eg())),e.updateQueue!==null&&(e.flags|=4),hn(e),null);case 4:return yu(),K0(t,e),t===null&&Gc(e.stateNode.containerInfo),hn(e),null;case 10:return fg(e.type._context),hn(e),null;case 17:return Jn(e.type)&&Gh(),hn(e),null;case 19:if(or(gr),i=e.memoizedState,i===null)return hn(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)dc(i,!1);else{if(Hr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ef(t),a!==null){for(e.flags|=128,dc(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return rr(gr,gr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ar()>bu&&(e.flags|=128,n=!0,dc(i,!1),e.lanes=4194304)}else{if(!n)if(t=ef(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),dc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!dr)return hn(e),null}else 2*Ar()-i.renderingStartTime>bu&&r!==1073741824&&(e.flags|=128,n=!0,dc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ar(),e.sibling=null,r=gr.current,rr(gr,n?r&1|2:r&1),e):(hn(e),null);case 22:case 23:return Pg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ls&1073741824&&(hn(e),e.subtreeFlags&6&&(e.flags|=8192)):hn(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function n_(t,e){switch(ug(e),e.tag){case 1:return Jn(e.type)&&Gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yu(),or(Yn),or(wn),yg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vg(e),null;case 13:if(or(gr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));gu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(gr),null;case 4:return yu(),null;case 10:return fg(e.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var rh=!1,yn=!1,s_=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Zl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){kr(t,e,n)}else r.current=null}function Z0(t,e,r){try{r()}catch(n){kr(t,e,n)}}var _2=!1;function i_(t,e){if(I0=qh,t=Qy(),og(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,u=-1,d=0,f=0,g=t,y=null;t:for(;;){for(var p;g!==r||s!==0&&g.nodeType!==3||(o=a+s),g!==i||n!==0&&g.nodeType!==3||(u=a+n),g.nodeType===3&&(a+=g.nodeValue.length),(p=g.firstChild)!==null;)y=g,g=p;for(;;){if(g===t)break t;if(y===r&&++d===s&&(o=a),y===i&&++f===n&&(u=a),(p=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=p}r=o===-1||u===-1?null:{start:o,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(D0={focusedElem:t,selectionRange:r},qh=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,C=k.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Xs(e.type,N),C);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(R){kr(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return k=_2,_2=!1,k}function Lc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Z0(e,r,i)}s=s.next}while(s!==n)}}function Pf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function X0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Jx(t){var e=t.alternate;e!==null&&(t.alternate=null,Jx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[Jc],delete e[R0],delete e[$N],delete e[zN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kx(t){return t.tag===5||t.tag===3||t.tag===4}function S2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Q0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Hh));else if(n!==4&&(t=t.child,t!==null))for(Q0(t,e,r),t=t.sibling;t!==null;)Q0(t,e,r),t=t.sibling}function ep(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ep(t,e,r),t=t.sibling;t!==null;)ep(t,e,r),t=t.sibling}var sn=null,ei=!1;function _a(t,e,r){for(r=r.child;r!==null;)Zx(t,e,r),r=r.sibling}function Zx(t,e,r){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(wf,r)}catch{}switch(r.tag){case 5:yn||Zl(r,e);case 6:var n=sn,s=ei;sn=null,_a(t,e,r),sn=n,ei=s,sn!==null&&(ei?(t=sn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):sn.removeChild(r.stateNode));break;case 18:sn!==null&&(ei?(t=sn,r=r.stateNode,t.nodeType===8?Pm(t.parentNode,r):t.nodeType===1&&Pm(t,r),Wc(t)):Pm(sn,r.stateNode));break;case 4:n=sn,s=ei,sn=r.stateNode.containerInfo,ei=!0,_a(t,e,r),sn=n,ei=s;break;case 0:case 11:case 14:case 15:if(!yn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Z0(r,e,a),s=s.next}while(s!==n)}_a(t,e,r);break;case 1:if(!yn&&(Zl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){kr(r,e,o)}_a(t,e,r);break;case 21:_a(t,e,r);break;case 22:r.mode&1?(yn=(n=yn)||r.memoizedState!==null,_a(t,e,r),yn=n):_a(t,e,r);break;default:_a(t,e,r)}}function k2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new s_),e.forEach(function(n){var s=m_.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Hs(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:sn=o.stateNode,ei=!1;break e;case 3:sn=o.stateNode.containerInfo,ei=!0;break e;case 4:sn=o.stateNode.containerInfo,ei=!0;break e}o=o.return}if(sn===null)throw Error(Oe(160));Zx(i,a,s),sn=null,ei=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){kr(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xx(e,t),e=e.sibling}function Xx(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hs(e,t),vi(t),n&4){try{Lc(3,t,t.return),Pf(3,t)}catch(N){kr(t,t.return,N)}try{Lc(5,t,t.return)}catch(N){kr(t,t.return,N)}}break;case 1:Hs(e,t),vi(t),n&512&&r!==null&&Zl(r,r.return);break;case 5:if(Hs(e,t),vi(t),n&512&&r!==null&&Zl(r,r.return),t.flags&32){var s=t.stateNode;try{Bc(s,"")}catch(N){kr(t,t.return,N)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&by(s,i),S0(o,a);var d=S0(o,i);for(a=0;a<u.length;a+=2){var f=u[a],g=u[a+1];f==="style"?ky(s,g):f==="dangerouslySetInnerHTML"?_y(s,g):f==="children"?Bc(s,g):Yp(s,f,g,d)}switch(o){case"input":x0(s,i);break;case"textarea":wy(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?tu(s,!!i.multiple,p,!1):y!==!!i.multiple&&(i.defaultValue!=null?tu(s,!!i.multiple,i.defaultValue,!0):tu(s,!!i.multiple,i.multiple?[]:"",!1))}s[Jc]=i}catch(N){kr(t,t.return,N)}}break;case 6:if(Hs(e,t),vi(t),n&4){if(t.stateNode===null)throw Error(Oe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){kr(t,t.return,N)}}break;case 3:if(Hs(e,t),vi(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wc(e.containerInfo)}catch(N){kr(t,t.return,N)}break;case 4:Hs(e,t),vi(t);break;case 13:Hs(e,t),vi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cg=Ar())),n&4&&k2(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(yn=(d=yn)||f,Hs(e,t),yn=d):Hs(e,t),vi(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Ke=t,f=t.child;f!==null;){for(g=Ke=f;Ke!==null;){switch(y=Ke,p=y.child,y.tag){case 0:case 11:case 14:case 15:Lc(4,y,y.return);break;case 1:Zl(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){n=y,r=y.return;try{e=n,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(N){kr(n,r,N)}}break;case 5:Zl(y,y.return);break;case 22:if(y.memoizedState!==null){C2(g);continue}}p!==null?(p.return=y,Ke=p):C2(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=Sy("display",a))}catch(N){kr(t,t.return,N)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(N){kr(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Hs(e,t),vi(t),n&4&&k2(t);break;case 21:break;default:Hs(e,t),vi(t)}}function vi(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Kx(r)){var n=r;break e}r=r.return}throw Error(Oe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Bc(s,""),n.flags&=-33);var i=S2(t);ep(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=S2(t);Q0(t,o,a);break;default:throw Error(Oe(161))}}catch(u){kr(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function a_(t,e,r){Ke=t,Qx(t)}function Qx(t,e,r){for(var n=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||rh;if(!a){var o=s.alternate,u=o!==null&&o.memoizedState!==null||yn;o=rh;var d=yn;if(rh=a,(yn=u)&&!d)for(Ke=s;Ke!==null;)a=Ke,u=a.child,a.tag===22&&a.memoizedState!==null?A2(s):u!==null?(u.return=a,Ke=u):A2(s);for(;i!==null;)Ke=i,Qx(i),i=i.sibling;Ke=s,rh=o,yn=d}j2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):j2(t)}}function j2(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||Pf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!yn)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Xs(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&c2(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}c2(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Wc(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}yn||e.flags&512&&X0(e)}catch(y){kr(e,e.return,y)}}if(e===t){Ke=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ke=r;break}Ke=e.return}}function C2(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ke=r;break}Ke=e.return}}function A2(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Pf(4,e)}catch(u){kr(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){kr(e,s,u)}}var i=e.return;try{X0(e)}catch(u){kr(e,i,u)}break;case 5:var a=e.return;try{X0(e)}catch(u){kr(e,a,u)}}}catch(u){kr(e,e.return,u)}if(e===t){Ke=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ke=o;break}Ke=e.return}}var o_=Math.ceil,nf=ia.ReactCurrentDispatcher,kg=ia.ReactCurrentOwner,Fs=ia.ReactCurrentBatchConfig,Ft=0,Qr=null,$r=null,an=0,ls=0,Xl=to(0),Hr=0,td=null,Bo=0,Ef=0,jg=0,Tc=null,Vn=null,Cg=0,bu=1/0,Yi=null,sf=!1,tp=null,Va=null,nh=!1,Ra=null,af=0,Oc=0,rp=null,Ch=-1,Ah=0;function Tn(){return Ft&6?Ar():Ch!==-1?Ch:Ch=Ar()}function Ha(t){return t.mode&1?Ft&2&&an!==0?an&-an:WN.transition!==null?(Ah===0&&(Ah=My()),Ah):(t=Vt,t!==0||(t=window.event,t=t===void 0?16:Wy(t.type)),t):1}function ii(t,e,r,n){if(50<Oc)throw Oc=0,rp=null,Error(Oe(185));od(t,r,n),(!(Ft&2)||t!==Qr)&&(t===Qr&&(!(Ft&2)&&(Ef|=r),Hr===4&&Ia(t,an)),Kn(t,n),r===1&&Ft===0&&!(e.mode&1)&&(bu=Ar()+500,jf&&ro()))}function Kn(t,e){var r=t.callbackNode;W3(t,e);var n=zh(t,t===Qr?an:0);if(n===0)r!==null&&M1(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&M1(r),e===1)t.tag===0?qN(P2.bind(null,t)):ux(P2.bind(null,t)),UN(function(){!(Ft&6)&&ro()}),r=null;else{switch(Ry(n)){case 1:r=Qp;break;case 4:r=Dy;break;case 16:r=$h;break;case 536870912:r=Fy;break;default:r=$h}r=o5(r,e5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function e5(t,e){if(Ch=-1,Ah=0,Ft&6)throw Error(Oe(327));var r=t.callbackNode;if(au()&&t.callbackNode!==r)return null;var n=zh(t,t===Qr?an:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=of(t,n);else{e=n;var s=Ft;Ft|=2;var i=r5();(Qr!==t||an!==e)&&(Yi=null,bu=Ar()+500,Io(t,e));do try{c_();break}catch(o){t5(t,o)}while(!0);hg(),nf.current=i,Ft=s,$r!==null?e=0:(Qr=null,an=0,e=Hr)}if(e!==0){if(e===2&&(s=P0(t),s!==0&&(n=s,e=np(t,s))),e===1)throw r=td,Io(t,0),Ia(t,n),Kn(t,Ar()),r;if(e===6)Ia(t,n);else{if(s=t.current.alternate,!(n&30)&&!l_(s)&&(e=of(t,n),e===2&&(i=P0(t),i!==0&&(n=i,e=np(t,i))),e===1))throw r=td,Io(t,0),Ia(t,n),Kn(t,Ar()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Oe(345));case 2:_o(t,Vn,Yi);break;case 3:if(Ia(t,n),(n&130023424)===n&&(e=Cg+500-Ar(),10<e)){if(zh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=M0(_o.bind(null,t,Vn,Yi),e);break}_o(t,Vn,Yi);break;case 4:if(Ia(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-si(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Ar()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*o_(n/1960))-n,10<n){t.timeoutHandle=M0(_o.bind(null,t,Vn,Yi),n);break}_o(t,Vn,Yi);break;case 5:_o(t,Vn,Yi);break;default:throw Error(Oe(329))}}}return Kn(t,Ar()),t.callbackNode===r?e5.bind(null,t):null}function np(t,e){var r=Tc;return t.current.memoizedState.isDehydrated&&(Io(t,e).flags|=256),t=of(t,e),t!==2&&(e=Vn,Vn=r,e!==null&&sp(e)),t}function sp(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function l_(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ai(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ia(t,e){for(e&=~jg,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-si(e),n=1<<r;t[r]=-1,e&=~n}}function P2(t){if(Ft&6)throw Error(Oe(327));au();var e=zh(t,0);if(!(e&1))return Kn(t,Ar()),null;var r=of(t,e);if(t.tag!==0&&r===2){var n=P0(t);n!==0&&(e=n,r=np(t,n))}if(r===1)throw r=td,Io(t,0),Ia(t,e),Kn(t,Ar()),r;if(r===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_o(t,Vn,Yi),Kn(t,Ar()),null}function Ag(t,e){var r=Ft;Ft|=1;try{return t(e)}finally{Ft=r,Ft===0&&(bu=Ar()+500,jf&&ro())}}function $o(t){Ra!==null&&Ra.tag===0&&!(Ft&6)&&au();var e=Ft;Ft|=1;var r=Fs.transition,n=Vt;try{if(Fs.transition=null,Vt=1,t)return t()}finally{Vt=n,Fs.transition=r,Ft=e,!(Ft&6)&&ro()}}function Pg(){ls=Xl.current,or(Xl)}function Io(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,RN(r)),$r!==null)for(r=$r.return;r!==null;){var n=r;switch(ug(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gh();break;case 3:yu(),or(Yn),or(wn),yg();break;case 5:vg(n);break;case 4:yu();break;case 13:or(gr);break;case 19:or(gr);break;case 10:fg(n.type._context);break;case 22:case 23:Pg()}r=r.return}if(Qr=t,$r=t=Ga(t.current,null),an=ls=e,Hr=0,td=null,jg=Ef=Bo=0,Vn=Tc=null,Eo!==null){for(e=0;e<Eo.length;e++)if(r=Eo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Eo=null}return t}function t5(t,e){do{var r=$r;try{if(hg(),Sh.current=rf,tf){for(var n=vr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}tf=!1}if(Uo=0,Zr=Vr=vr=null,Ec=!1,Xc=0,kg.current=null,r===null||r.return===null){Hr=1,td=e,$r=null;break}e:{var i=t,a=r.return,o=r,u=e;if(e=an,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=o,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=g2(a);if(p!==null){p.flags&=-257,v2(p,a,o,i,e),p.mode&1&&p2(i,d,e),e=p,u=d;var k=e.updateQueue;if(k===null){var N=new Set;N.add(u),e.updateQueue=N}else k.add(u);break e}else{if(!(e&1)){p2(i,d,e),Eg();break e}u=Error(Oe(426))}}else if(dr&&o.mode&1){var C=g2(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),v2(C,a,o,i,e),cg(xu(u,o));break e}}i=u=xu(u,o),Hr!==4&&(Hr=2),Tc===null?Tc=[i]:Tc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Rx(i,u,e);u2(i,x);break e;case 1:o=u;var b=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Va===null||!Va.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Ux(i,o,e);u2(i,R);break e}}i=i.return}while(i!==null)}s5(r)}catch(W){e=W,$r===r&&r!==null&&($r=r=r.return);continue}break}while(!0)}function r5(){var t=nf.current;return nf.current=rf,t===null?rf:t}function Eg(){(Hr===0||Hr===3||Hr===2)&&(Hr=4),Qr===null||!(Bo&268435455)&&!(Ef&268435455)||Ia(Qr,an)}function of(t,e){var r=Ft;Ft|=2;var n=r5();(Qr!==t||an!==e)&&(Yi=null,Io(t,e));do try{u_();break}catch(s){t5(t,s)}while(!0);if(hg(),Ft=r,nf.current=n,$r!==null)throw Error(Oe(261));return Qr=null,an=0,Hr}function u_(){for(;$r!==null;)n5($r)}function c_(){for(;$r!==null&&!D3();)n5($r)}function n5(t){var e=a5(t.alternate,t,ls);t.memoizedProps=t.pendingProps,e===null?s5(t):$r=e,kg.current=null}function s5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=n_(r,e),r!==null){r.flags&=32767,$r=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hr=6,$r=null;return}}else if(r=r_(r,e,ls),r!==null){$r=r;return}if(e=e.sibling,e!==null){$r=e;return}$r=e=t}while(e!==null);Hr===0&&(Hr=5)}function _o(t,e,r){var n=Vt,s=Fs.transition;try{Fs.transition=null,Vt=1,d_(t,e,r,n)}finally{Fs.transition=s,Vt=n}return null}function d_(t,e,r,n){do au();while(Ra!==null);if(Ft&6)throw Error(Oe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(V3(t,i),t===Qr&&($r=Qr=null,an=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nh||(nh=!0,o5($h,function(){return au(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Fs.transition,Fs.transition=null;var a=Vt;Vt=1;var o=Ft;Ft|=4,kg.current=null,i_(t,r),Xx(r,t),LN(D0),qh=!!I0,D0=I0=null,t.current=r,a_(r),F3(),Ft=o,Vt=a,Fs.transition=i}else t.current=r;if(nh&&(nh=!1,Ra=t,af=s),i=t.pendingLanes,i===0&&(Va=null),U3(r.stateNode),Kn(t,Ar()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(sf)throw sf=!1,t=tp,tp=null,t;return af&1&&t.tag!==0&&au(),i=t.pendingLanes,i&1?t===rp?Oc++:(Oc=0,rp=t):Oc=0,ro(),null}function au(){if(Ra!==null){var t=Ry(af),e=Fs.transition,r=Vt;try{if(Fs.transition=null,Vt=16>t?16:t,Ra===null)var n=!1;else{if(t=Ra,Ra=null,af=0,Ft&6)throw Error(Oe(331));var s=Ft;for(Ft|=4,Ke=t.current;Ke!==null;){var i=Ke,a=i.child;if(Ke.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var d=o[u];for(Ke=d;Ke!==null;){var f=Ke;switch(f.tag){case 0:case 11:case 15:Lc(8,f,i)}var g=f.child;if(g!==null)g.return=f,Ke=g;else for(;Ke!==null;){f=Ke;var y=f.sibling,p=f.return;if(Jx(f),f===d){Ke=null;break}if(y!==null){y.return=p,Ke=y;break}Ke=p}}}var k=i.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var C=N.sibling;N.sibling=null,N=C}while(N!==null)}}Ke=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Ke=a;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Lc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Ke=x;break e}Ke=i.return}}var b=t.current;for(Ke=b;Ke!==null;){a=Ke;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Ke=_;else e:for(a=b;Ke!==null;){if(o=Ke,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Pf(9,o)}}catch(W){kr(o,o.return,W)}if(o===a){Ke=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,Ke=R;break e}Ke=o.return}}if(Ft=s,ro(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(wf,t)}catch{}n=!0}return n}finally{Vt=r,Fs.transition=e}}return!1}function E2(t,e,r){e=xu(r,e),e=Rx(t,e,1),t=Wa(t,e,1),e=Tn(),t!==null&&(od(t,1,e),Kn(t,e))}function kr(t,e,r){if(t.tag===3)E2(t,t,r);else for(;e!==null;){if(e.tag===3){E2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Va===null||!Va.has(n))){t=xu(r,t),t=Ux(e,t,1),e=Wa(e,t,1),t=Tn(),e!==null&&(od(e,1,t),Kn(e,t));break}}e=e.return}}function h_(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&r,Qr===t&&(an&r)===r&&(Hr===4||Hr===3&&(an&130023424)===an&&500>Ar()-Cg?Io(t,0):jg|=r),Kn(t,e)}function i5(t,e){e===0&&(t.mode&1?(e=Gd,Gd<<=1,!(Gd&130023424)&&(Gd=4194304)):e=1);var r=Tn();t=ra(t,e),t!==null&&(od(t,e,r),Kn(t,r))}function f_(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),i5(t,r)}function m_(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Oe(314))}n!==null&&n.delete(e),i5(t,r)}var a5;a5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Gn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gn=!1,t_(t,e,r);Gn=!!(t.flags&131072)}else Gn=!1,dr&&e.flags&1048576&&cx(e,Kh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;jh(t,e),t=e.pendingProps;var s=pu(e,wn.current);iu(e,r),s=bg(null,e,n,t,s,r);var i=wg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(n)?(i=!0,Yh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pg(e),s.updater=Af,e.stateNode=s,s._reactInternals=e,W0(e,n,t,r),e=G0(null,e,n,!0,i,r)):(e.tag=0,dr&&i&&lg(e),En(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(jh(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=g_(n),t=Xs(n,t),s){case 0:e=H0(null,e,n,t,r);break e;case 1:e=b2(null,e,n,t,r);break e;case 11:e=y2(null,e,n,t,r);break e;case 14:e=x2(null,e,n,Xs(n.type,t),r);break e}throw Error(Oe(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xs(n,s),H0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xs(n,s),b2(t,e,n,s,r);case 3:e:{if(qx(e),t===null)throw Error(Oe(387));n=e.pendingProps,i=e.memoizedState,s=i.element,gx(t,e),Qh(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xu(Error(Oe(423)),e),e=w2(t,e,n,r,s);break e}else if(n!==s){s=xu(Error(Oe(424)),e),e=w2(t,e,n,r,s);break e}else for(us=qa(e.stateNode.containerInfo.firstChild),ds=e,dr=!0,ri=null,r=mx(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gu(),n===s){e=na(t,e,r);break e}En(t,e,n,r)}e=e.child}return e;case 5:return vx(e),t===null&&$0(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,F0(n,s)?a=null:i!==null&&F0(n,i)&&(e.flags|=32),zx(t,e),En(t,e,a,r),e.child;case 6:return t===null&&$0(e),null;case 13:return Wx(t,e,r);case 4:return gg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vu(e,null,n,r):En(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xs(n,s),y2(t,e,n,s,r);case 7:return En(t,e,e.pendingProps,r),e.child;case 8:return En(t,e,e.pendingProps.children,r),e.child;case 12:return En(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,rr(Zh,n._currentValue),n._currentValue=a,i!==null)if(ai(i.value,a)){if(i.children===s.children&&!Yn.current){e=na(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Qi(-1,r&-r),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),z0(i.return,r,e),o.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Oe(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),z0(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}En(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,iu(e,r),s=Ms(s),n=n(s),e.flags|=1,En(t,e,n,r),e.child;case 14:return n=e.type,s=Xs(n,e.pendingProps),s=Xs(n.type,s),x2(t,e,n,s,r);case 15:return Bx(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xs(n,s),jh(t,e),e.tag=1,Jn(n)?(t=!0,Yh(e)):t=!1,iu(e,r),Mx(e,n,s),W0(e,n,s,r),G0(null,e,n,!0,t,r);case 19:return Vx(t,e,r);case 22:return $x(t,e,r)}throw Error(Oe(156,e.tag))};function o5(t,e){return Iy(t,e)}function p_(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(t,e,r,n){return new p_(t,e,r,n)}function Lg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g_(t){if(typeof t=="function")return Lg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kp)return 11;if(t===Zp)return 14}return 2}function Ga(t,e){var r=t.alternate;return r===null?(r=Os(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ph(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Lg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zl:return Do(r.children,s,i,e);case Jp:a=8,s|=8;break;case m0:return t=Os(12,r,e,s|2),t.elementType=m0,t.lanes=i,t;case p0:return t=Os(13,r,e,s),t.elementType=p0,t.lanes=i,t;case g0:return t=Os(19,r,e,s),t.elementType=g0,t.lanes=i,t;case vy:return Lf(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case py:a=10;break e;case gy:a=9;break e;case Kp:a=11;break e;case Zp:a=14;break e;case Ea:a=16,n=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Os(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Do(t,e,r,n){return t=Os(7,t,n,e),t.lanes=r,t}function Lf(t,e,r,n){return t=Os(22,t,n,e),t.elementType=vy,t.lanes=r,t.stateNode={isHidden:!1},t}function Mm(t,e,r){return t=Os(6,t,null,e),t.lanes=r,t}function Rm(t,e,r){return e=Os(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function v_(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ym(0),this.expirationTimes=ym(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ym(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tg(t,e,r,n,s,i,a,o,u){return t=new v_(t,e,r,o,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Os(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pg(i),t}function y_(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$l,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function l5(t){if(!t)return Ka;t=t._reactInternals;e:{if(Wo(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var r=t.type;if(Jn(r))return lx(t,r,e)}return e}function u5(t,e,r,n,s,i,a,o,u){return t=Tg(r,n,!0,t,s,i,a,o,u),t.context=l5(null),r=t.current,n=Tn(),s=Ha(r),i=Qi(n,s),i.callback=e??null,Wa(r,i,s),t.current.lanes=s,od(t,s,n),Kn(t,n),t}function Tf(t,e,r,n){var s=e.current,i=Tn(),a=Ha(s);return r=l5(r),e.context===null?e.context=r:e.pendingContext=r,e=Qi(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Wa(s,e,a),t!==null&&(ii(t,s,a,i),_h(t,s,a)),a}function lf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function L2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Og(t,e){L2(t,e),(t=t.alternate)&&L2(t,e)}function x_(){return null}var c5=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ig(t){this._internalRoot=t}Of.prototype.render=Ig.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));Tf(t,e,null,null)};Of.prototype.unmount=Ig.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$o(function(){Tf(null,t,null,null)}),e[ta]=null}};function Of(t){this._internalRoot=t}Of.prototype.unstable_scheduleHydration=function(t){if(t){var e=$y();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Oa.length&&e!==0&&e<Oa[r].priority;r++);Oa.splice(r,0,t),r===0&&qy(t)}};function Dg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T2(){}function b_(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=lf(a);i.call(d)}}var a=u5(e,n,t,0,null,!1,!1,"",T2);return t._reactRootContainer=a,t[ta]=a.current,Gc(t.nodeType===8?t.parentNode:t),$o(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var d=lf(u);o.call(d)}}var u=Tg(t,0,!1,null,null,!1,!1,"",T2);return t._reactRootContainer=u,t[ta]=u.current,Gc(t.nodeType===8?t.parentNode:t),$o(function(){Tf(e,u,r,n)}),u}function Df(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var u=lf(a);o.call(u)}}Tf(e,a,t,s)}else a=b_(r,e,t,s,n);return lf(a)}Uy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xc(e.pendingLanes);r!==0&&(eg(e,r|1),Kn(e,Ar()),!(Ft&6)&&(bu=Ar()+500,ro()))}break;case 13:$o(function(){var n=ra(t,1);if(n!==null){var s=Tn();ii(n,t,1,s)}}),Og(t,1)}};tg=function(t){if(t.tag===13){var e=ra(t,134217728);if(e!==null){var r=Tn();ii(e,t,134217728,r)}Og(t,134217728)}};By=function(t){if(t.tag===13){var e=Ha(t),r=ra(t,e);if(r!==null){var n=Tn();ii(r,t,e,n)}Og(t,e)}};$y=function(){return Vt};zy=function(t,e){var r=Vt;try{return Vt=t,e()}finally{Vt=r}};j0=function(t,e,r){switch(e){case"input":if(x0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=kf(n);if(!s)throw Error(Oe(90));xy(n),x0(n,s)}}}break;case"textarea":wy(t,r);break;case"select":e=r.value,e!=null&&tu(t,!!r.multiple,e,!1)}};Ay=Ag;Py=$o;var w_={usingClientEntryPoint:!1,Events:[ud,Hl,kf,jy,Cy,Ag]},hc={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N_={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ty(t),t===null?null:t.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||x_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{wf=sh.inject(N_),_i=sh}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w_;ps.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dg(e))throw Error(Oe(200));return y_(t,e,null,r)};ps.createRoot=function(t,e){if(!Dg(t))throw Error(Oe(299));var r=!1,n="",s=c5;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tg(t,1,!1,null,null,r,!1,n,s),t[ta]=e.current,Gc(t.nodeType===8?t.parentNode:t),new Ig(e)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=Ty(e),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return $o(t)};ps.hydrate=function(t,e,r){if(!If(e))throw Error(Oe(200));return Df(null,t,e,!0,r)};ps.hydrateRoot=function(t,e,r){if(!Dg(t))throw Error(Oe(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=c5;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=u5(e,null,t,1,r??null,s,!1,i,a),t[ta]=e.current,Gc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Of(e)};ps.render=function(t,e,r){if(!If(e))throw Error(Oe(200));return Df(null,t,e,!1,r)};ps.unmountComponentAtNode=function(t){if(!If(t))throw Error(Oe(40));return t._reactRootContainer?($o(function(){Df(null,null,t,!1,function(){t._reactRootContainer=null,t[ta]=null})}),!0):!1};ps.unstable_batchedUpdates=Ag;ps.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!If(r))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return Df(t,e,r,!1,n)};ps.version="18.3.1-next-f1338f8080-20240426";function d5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d5)}catch(t){console.error(t)}}d5(),dy.exports=ps;var __=dy.exports,O2=__;h0.createRoot=O2.createRoot,h0.hydrateRoot=O2.hydrateRoot;const S_="modulepreload",k_=function(t){return"/"+t},I2={},Za=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=k_(u),u in I2)return;I2[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":S_,d||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((y,p)=>{g.addEventListener("load",y),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},j_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Za(async()=>{const{default:n}=await Promise.resolve().then(()=>ju);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Fg extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class D2 extends Fg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class F2 extends Fg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class M2 extends Fg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ip;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ip||(ip={}));var C_=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};class A_{constructor(e,{headers:r={},customFetch:n,region:s=ip.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=j_(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return C_(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:a,body:o,signal:u}=n;let d={},{region:f}=n;f||(f=this.region);const g=new URL(`${this.url}/${r}`);f&&f!=="any"&&(d["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let y;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=o):typeof o=="string"?(d["Content-Type"]="text/plain",y=o):typeof FormData<"u"&&o instanceof FormData?y=o:(d["Content-Type"]="application/json",y=JSON.stringify(o)));const p=yield this.fetch(g.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),i),body:y,signal:u}).catch(x=>{throw x.name==="AbortError"?x:new D2(x)}),k=p.headers.get("x-relay-error");if(k&&k==="true")throw new F2(p);if(!p.ok)throw new M2(p);let N=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return N==="application/json"?C=yield p.json():N==="application/octet-stream"?C=yield p.blob():N==="text/event-stream"?C=p:N==="multipart/form-data"?C=yield p.formData():C=yield p.text(),{data:C,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new D2(i)}:{data:null,error:i,response:i instanceof M2||i instanceof F2?i.context:void 0}}})}}var Hn={},Mg={},Ff={},dd={},Mf={},Rf={},P_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wu=P_();const E_=wu.fetch,h5=wu.fetch.bind(wu),f5=wu.Headers,L_=wu.Request,T_=wu.Response,ju=Object.freeze(Object.defineProperty({__proto__:null,Headers:f5,Request:L_,Response:T_,default:h5,fetch:E_},Symbol.toStringTag,{value:"Module"})),O_=Zw(ju);var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});let I_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Uf.default=I_;var m5=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rf,"__esModule",{value:!0});const D_=m5(O_),F_=m5(Uf);let M_=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=D_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,u,d;let f=null,g=null,y=null,p=i.status,k=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?g=b:g=JSON.parse(b))}const C=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(u=i.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");C&&x&&x.length>1&&(y=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,p=406,k="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const C=await i.text();try{f=JSON.parse(C),Array.isArray(f)&&i.status===404&&(g=[],f=null,p=200,k="OK")}catch{i.status===404&&C===""?(p=204,k="No Content"):f={message:C}}if(f&&this.isMaybeSingle&&(!((d=f==null?void 0:f.details)===null||d===void 0)&&d.includes("0 rows"))&&(f=null,p=200,k="OK"),f&&this.shouldThrowOnError)throw new F_.default(f)}return{error:f,data:g,count:y,status:p,statusText:k}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,u;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Rf.default=M_;var R_=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mf,"__esModule",{value:!0});const U_=R_(Rf);let B_=class extends U_.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const u=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Mf.default=B_;var $_=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dd,"__esModule",{value:!0});const z_=$_(Mf);let q_=class extends z_.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};dd.default=q_;var W_=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ff,"__esModule",{value:!0});const fc=W_(dd);let V_=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,r){const{head:n=!1,count:s}=r??{},i=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new fc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,u)=>o.concat(Object.keys(u)),[]);if(a.length>0){const o=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",o.join(","))}}return new fc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new fc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new fc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new fc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ff.default=V_;var p5=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mg,"__esModule",{value:!0});const H_=p5(Ff),G_=p5(dd);let Y_=class g5{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new H_.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new g5(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let o;const u=new URL(`${this.url}/rpc/${e}`);let d;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{u.searchParams.append(g,y)})):(o="POST",d=r);const f=new Headers(this.headers);return i&&f.set("Prefer",`count=${i}`),new G_.default({method:o,url:u,headers:f,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Mg.default=Y_;var Cu=fs&&fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.PostgrestError=Hn.PostgrestBuilder=Hn.PostgrestTransformBuilder=Hn.PostgrestFilterBuilder=Hn.PostgrestQueryBuilder=Hn.PostgrestClient=void 0;const v5=Cu(Mg);Hn.PostgrestClient=v5.default;const y5=Cu(Ff);Hn.PostgrestQueryBuilder=y5.default;const x5=Cu(dd);Hn.PostgrestFilterBuilder=x5.default;const b5=Cu(Mf);Hn.PostgrestTransformBuilder=b5.default;const w5=Cu(Rf);Hn.PostgrestBuilder=w5.default;const N5=Cu(Uf);Hn.PostgrestError=N5.default;var J_=Hn.default={PostgrestClient:v5.default,PostgrestQueryBuilder:y5.default,PostgrestFilterBuilder:x5.default,PostgrestTransformBuilder:b5.default,PostgrestBuilder:w5.default,PostgrestError:N5.default};const{PostgrestClient:K_,PostgrestQueryBuilder:V8,PostgrestFilterBuilder:H8,PostgrestTransformBuilder:G8,PostgrestBuilder:Y8,PostgrestError:J8}=J_;class Z_{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X_="2.75.0",Q_=`realtime-js/${X_}`,e4="1.0.0",ap=1e4,t4=1e3,r4=100;var Ic;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ic||(Ic={}));var Wr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Wr||(Wr={}));var ti;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ti||(ti={}));var op;(function(t){t.websocket="websocket"})(op||(op={}));var jo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jo||(jo={}));class n4{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+s));a=a+s;const u=n.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:u,payload:d}}}class _5{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(tr||(tr={}));const R2=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=s4(a,t,e,s),i),{}):{}},s4=(t,e,r,n)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?S5(i,a):lp(a)},S5=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return l4(e,r)}switch(t){case tr.bool:return i4(e);case tr.float4:case tr.float8:case tr.int2:case tr.int4:case tr.int8:case tr.numeric:case tr.oid:return a4(e);case tr.json:case tr.jsonb:return o4(e);case tr.timestamp:return u4(e);case tr.abstime:case tr.date:case tr.daterange:case tr.int4range:case tr.int8range:case tr.money:case tr.reltime:case tr.text:case tr.time:case tr.timestamptz:case tr.timetz:case tr.tsrange:case tr.tstzrange:return lp(e);default:return lp(e)}},lp=t=>t,i4=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},a4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},l4=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>S5(e,o))}return t},u4=t=>typeof t=="string"?t.replace(" ","T"):t,k5=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Um{constructor(e,r,n={},s=ap){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(U2||(U2={}));class Dc{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dc.syncState(this.state,s,i,a),this.pendingDiffs.forEach(u=>{this.state=Dc.syncDiff(this.state,u,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Dc.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),o={},u={};return this.map(i,(d,f)=>{a[d]||(u[d]=f)}),this.map(a,(d,f)=>{const g=i[d];if(g){const y=f.map(C=>C.presence_ref),p=g.map(C=>C.presence_ref),k=f.filter(C=>p.indexOf(C.presence_ref)<0),N=g.filter(C=>y.indexOf(C.presence_ref)<0);k.length>0&&(o[d]=k),N.length>0&&(u[d]=N)}else o[d]=f}),this.syncDiff(i,{joins:o,leaves:u},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,u)=>{var d;const f=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(u),f.length>0){const g=e[o].map(p=>p.presence_ref),y=f.filter(p=>g.indexOf(p.presence_ref)<0);e[o].unshift(...y)}n(o,f,u)}),this.map(a,(o,u)=>{let d=e[o];if(!d)return;const f=u.map(g=>g.presence_ref);d=d.filter(g=>f.indexOf(g.presence_ref)<0),e[o]=d,s(o,d,u),d.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var B2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(B2||(B2={}));var Fc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fc||(Fc={}));var Ji;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ji||(Ji={}));class Rg{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Um(this,ti.join,this.params,this.timeout),this.rejoinTimer=new _5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ti.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Dc(this),this.broadcastEndpointURL=k5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Wr.closed){const{config:{broadcast:a,presence:o,private:u}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Fc.PRESENCE]&&this.bindings[Fc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},y={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Ji.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Ji.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var k;if(this.socket.setAuth(),p===void 0){e==null||e(Ji.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,C=(k=N==null?void 0:N.length)!==null&&k!==void 0?k:0,x=[];for(let b=0;b<C;b++){const _=N[b],{filter:{event:R,schema:W,table:K,filter:j}}=_,P=p&&p[b];if(P&&P.event===R&&P.schema===W&&P.table===K&&P.filter===j)x.push(Object.assign(Object.assign({},_),{id:P.id}));else{this.unsubscribe(),this.state=Wr.errored,e==null||e(Ji.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Ji.SUBSCRIBED);return}}).receive("error",p=>{this.state=Wr.errored,e==null||e(Ji.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ji.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Wr.joined&&e===Fc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,u;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ti.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Um(this,ti.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Um(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>r4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:u,leave:d,join:f}=ti;if(n&&[o,u,d,f].indexOf(a)>=0&&n!==this._joinRef())return;let y=this._onMessage(a,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var k,N,C;return((k=p.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(N=p.filter)===null||N===void 0?void 0:N.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(p=>p.callback(y,n)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var k,N,C,x,b,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const R=p.id,W=(k=p.filter)===null||k===void 0?void 0:k.event;return R&&((N=r.ids)===null||N===void 0?void 0:N.includes(R))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const R=(b=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return R==="*"||R===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:N,table:C,commit_timestamp:x,type:b,errors:_}=k;y=Object.assign(Object.assign({},{schema:N,table:C,commit_timestamp:x,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(k))}p.callback(y,n)})}_isClosed(){return this.state===Wr.closed}_isJoined(){return this.state===Wr.joined}_isJoining(){return this.state===Wr.joining}_isLeaving(){return this.state===Wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Rg.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ti.close,{},e)}_onError(e){this._on(ti.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=R2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=R2(e.columns,e.old_record)),r}}const Bm=()=>{},ih={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},c4=[1e3,2e3,5e3,1e4],d4=1e4,h4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class f4{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ap,this.transport=null,this.heartbeatIntervalMs=ih.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bm,this.ref=0,this.reconnectTimer=null,this.logger=Bm,this.conn=null,this.sendBuffer=[],this.serializer=new n4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Za(async()=>{const{default:o}=await Promise.resolve().then(()=>ju);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${op.websocket}`,this.httpEndpoint=k5(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Z_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:e4}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ic.connecting:return jo.Connecting;case Ic.open:return jo.Open;case Ic.closing:return jo.Closing;default:return jo.Closed}}isConnected(){return this.connectionState()===jo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Rg(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var u;(u=this.conn)===null||u===void 0||u.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(t4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ih.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,o=a?`(${a})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ti.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([h4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Q_};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ti.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ih.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,a,o,u,d,f;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:ap,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ih.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Bm,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:g=>c4[g-1]||d4,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(g,y)=>y(JSON.stringify(g)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ug extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ur(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class m4 extends Ug{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class up extends Ug{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var p4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};const j5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Za(async()=>{const{default:n}=await Promise.resolve().then(()=>ju);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},g4=()=>p4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Za(()=>Promise.resolve().then(()=>ju),void 0)).Response:Response}),cp=t=>{if(Array.isArray(t))return t.map(r=>cp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=cp(n)}),e},v4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Vo=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};const $m=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),y4=(t,e,r)=>Vo(void 0,void 0,void 0,function*(){const n=yield g4();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new m4($m(s),i,a))}).catch(s=>{e(new up($m(s),s))}):e(new up($m(t),t))}),x4=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(v4(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function hd(t,e,r,n,s,i){return Vo(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,x4(e,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>y4(u,o,n))})})}function uf(t,e,r,n){return Vo(this,void 0,void 0,function*(){return hd(t,"GET",e,r,n)})}function bi(t,e,r,n,s){return Vo(this,void 0,void 0,function*(){return hd(t,"POST",e,n,s,r)})}function dp(t,e,r,n,s){return Vo(this,void 0,void 0,function*(){return hd(t,"PUT",e,n,s,r)})}function b4(t,e,r,n){return Vo(this,void 0,void 0,function*(){return hd(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function C5(t,e,r,n,s){return Vo(this,void 0,void 0,function*(){return hd(t,"DELETE",e,n,s,r)})}var w4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};class N4{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return w4(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ur(e))return{data:null,error:e};throw e}})}}var _4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};class S4{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new N4(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return _4(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ur(e))return{data:null,error:e};throw e}})}}var Wn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};const k4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class j4{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=j5(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return Wn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},$2),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,u&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),g=yield(e=="PUT"?dp:bi)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ur(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Wn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let u;const d=Object.assign({upsert:$2.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",d.cacheControl)):(u=n,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const g=yield dp(this.fetch,o.toString(),u,{headers:f});return{data:{path:i,fullPath:g.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ur(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,r){return Wn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield bi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Ug("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}update(e,r,n){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Wn(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ur(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Wn(this,void 0,void 0,function*(){try{return{data:{path:(yield bi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ur(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Wn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield bi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ur(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Wn(this,void 0,void 0,function*(){try{const s=yield bi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ur(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(e),u=()=>uf(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new S4(u,this.shouldThrowOnError)}info(e){return Wn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield uf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cp(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}exists(e){return Wn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield b4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n)&&n instanceof up){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield C5(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}list(e,r,n){return Wn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k4),r),{prefix:e||""});return{data:yield bi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ur(s))return{data:null,error:s};throw s}})}listV2(e,r){return Wn(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield bi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const C4="2.75.0",A4={"X-Client-Info":`storage-js/${C4}`};var jl=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};class P4{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A4),r),this.fetch=j5(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jl(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ur(e))return{data:null,error:e};throw e}})}getBucket(e){return jl(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}createBucket(e){return jl(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield bi(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ur(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return jl(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}emptyBucket(e){return jl(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}deleteBucket(e){return jl(this,void 0,void 0,function*(){try{return{data:yield C5(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}}class E4 extends P4{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new j4(this.url,this.headers,e,this.fetch)}}const L4="2.75.0";let wc="";typeof Deno<"u"?wc="deno":typeof document<"u"?wc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wc="react-native":wc="node";const T4={"X-Client-Info":`supabase-js-${wc}/${L4}`},O4={headers:T4},I4={schema:"public"},D4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},F4={};var M4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};const R4=t=>{let e;return t?e=t:typeof fetch>"u"?e=h5:e=fetch,(...r)=>e(...r)},U4=()=>typeof Headers>"u"?f5:Headers,B4=(t,e,r)=>{const n=R4(r),s=U4();return(i,a)=>M4(void 0,void 0,void 0,function*(){var o;const u=(o=yield e())!==null&&o!==void 0?o:t;let d=new s(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},a),{headers:d}))})};var $4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};function z4(t){return t.endsWith("/")?t:t+"/"}function q4(t,e){var r,n;const{db:s,auth:i,realtime:a,global:o}=t,{db:u,auth:d,realtime:f,global:g}=e,y={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},g),o),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$4(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function W4(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(z4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const A5="2.75.0",Ml=30*1e3,hp=3,zm=hp*Ml,V4="http://localhost:9999",H4="supabase.auth.token",G4={"X-Client-Info":`gotrue-js/${A5}`},fp="X-Supabase-Api-Version",P5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Y4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J4=10*60*1e3;class rd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function st(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class K4 extends rd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Z4(t){return st(t)&&t.name==="AuthApiError"}class Co extends rd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class no extends rd{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Pa extends no{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X4(t){return st(t)&&t.name==="AuthSessionMissingError"}class Cl extends no{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ah extends no{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class oh extends no{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Q4(t){return st(t)&&t.name==="AuthImplicitGrantRedirectError"}class z2 extends no{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mp extends no{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function qm(t){return st(t)&&t.name==="AuthRetryableFetchError"}class q2 extends no{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class pp extends no{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),W2=` 	
\r=`.split(""),eS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<W2.length;e+=1)t[W2[e].charCodeAt(0)]=-2;for(let e=0;e<cf.length;e+=1)t[cf[e].charCodeAt(0)]=e;return t})();function V2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(cf[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(cf[n]),e.queuedBits-=6}}function E5(t,e,r){const n=eS[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function H2(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{nS(a,n,r)};for(let a=0;a<t.length;a+=1)E5(t.charCodeAt(a),s,i);return e.join("")}function tS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function rS(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}tS(n,e)}}function nS(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ou(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)E5(t.charCodeAt(s),r,n);return new Uint8Array(e)}function sS(t){const e=[];return rS(t,r=>e.push(r)),new Uint8Array(e)}function To(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>V2(s,r,n)),V2(null,r,n),e.join("")}function iS(t){return Math.round(Date.now()/1e3)+t}function aS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const os=()=>typeof window<"u"&&typeof document<"u",yo={tested:!1,writable:!1},L5=()=>{if(!os())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yo.tested)return yo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yo.tested=!0,yo.writable=!0}catch{yo.tested=!0,yo.writable=!1}return yo.writable};function oS(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const T5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Za(async()=>{const{default:n}=await Promise.resolve().then(()=>ju);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},lS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Rl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xo=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Sa=async(t,e)=>{await t.removeItem(e)};class Bf{constructor(){this.promise=new Bf.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Bf.promiseConstructor=Promise;function Wm(t){const e=t.split(".");if(e.length!==3)throw new pp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Y4.test(e[n]))throw new pp("JWT not in base64url format");return{header:JSON.parse(H2(e[0])),payload:JSON.parse(H2(e[1])),signature:ou(e[2]),raw:{header:e[0],payload:e[1]}}}async function uS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function cS(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function dS(t){return("0"+t.toString(16)).substr(-2)}function hS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,dS).join("")}async function fS(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function mS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await fS(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Al(t,e,r=!1){const n=hS();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Rl(t,`${e}-code-verifier`,s);const i=await mS(n);return[i,n===i?"plain":"s256"]}const pS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gS(t){const e=t.headers.get(fp);if(!e||!e.match(pS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pl(t){if(!xS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function G2(t){return JSON.parse(JSON.stringify(t))}var bS=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const So=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wS=[502,503,504];async function Y2(t){var e;if(!lS(t))throw new mp(So(t),0);if(wS.includes(t.status))throw new mp(So(t),t.status);let r;try{r=await t.json()}catch(i){throw new Co(So(i),i)}let n;const s=gS(t);if(s&&s.getTime()>=P5["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new q2(So(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new q2(So(r),t.status,r.weak_password.reasons);throw new K4(So(r),t.status||500,n)}const NS=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function yt(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[fp]||(i[fp]=P5["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await _S(t,e,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function _S(t,e,r,n,s,i){const a=NS(e,n,s,i);let o;try{o=await t(r,Object.assign({},a))}catch(u){throw console.error(u),new mp(So(u),0)}if(o.ok||await Y2(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(u){await Y2(u)}}function Zs(t){var e;let r=null;jS(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=iS(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function J2(t){const e=Zs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Da(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function SS(t){return{data:t,error:null}}function kS(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=bS(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},a);return{data:{properties:o,user:u},error:null}}function K2(t){return t}function jS(t){return t.access_token&&t.refresh_token&&t.expires_in}const Hm=["global","local","others"];var CS=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class AS{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=T5(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Hm[0]){if(Hm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hm.join(", ")}`);try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Da})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=CS(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:kS,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(st(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Da})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,o,u;try{const d={nextPage:null,lastPage:0,total:0},f=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:K2});if(f.error)throw f.error;const g=await f.json(),y=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(u=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return p.length>0&&(p.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);d[`${C}Page`]=N}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(st(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Pl(e);try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Da})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Pl(e);try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Da})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Pl(e);try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Da})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Pl(e.userId);try{const{data:r,error:n}=await yt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(st(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Pl(e.userId),Pl(e.id);try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,a,o,u;try{const d={nextPage:null,lastPage:0,total:0},f=await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:K2});if(f.error)throw f.error;const g=await f.json(),y=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(u=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&u!==void 0?u:[];return p.length>0&&(p.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);d[`${C}Page`]=N}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(st(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}}function Z2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const El={debug:!!(globalThis&&L5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class O5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PS extends O5{}async function ES(t,e,r){El.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),El.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){El.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{El.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw El.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(El.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function LS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function I5(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function TS(t){return parseInt(t,16)}function OS(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function IS(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:u,resources:d,scheme:f,uri:g,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=I5(t.address),k=f?`${f}://${n}`:n,N=t.statement?`${t.statement}
`:"",C=`${k} wants you to sign in with your Ethereum account:
${p}

${N}`;let x=`URI: ${g}
Version: ${y}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),u&&(x+=`
Request ID: ${u}`),d){let b=`
Resources:`;for(const _ of d){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);b+=`
- ${_}`}x+=b}return`${C}
${x}`}class Rr extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class df extends Rr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function DS({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Rr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Rr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Rr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Rr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(F5(a)){if(i.rp.id!==a)return new Rr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Rr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function FS({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(F5(n)){if(r.rpId!==n)return new Rr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var D5=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class MS{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const RS=new MS;function US(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=D5(t,["challenge","user","excludeCredentials"]),i=ou(e).buffer,a=Object.assign(Object.assign({},r),{id:ou(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];o.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:ou(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function BS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=D5(t,["challenge","allowCredentials"]),s=ou(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:ou(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function $S(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:To(new Uint8Array(t.response.attestationObject)),clientDataJSON:To(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:To(new Uint8Array(s.authenticatorData)),clientDataJSON:To(new Uint8Array(s.clientDataJSON)),signature:To(new Uint8Array(s.signature)),userHandle:s.userHandle?To(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function F5(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function X2(){var t,e;return!!(os()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function qS(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new df("Browser returned unexpected credential type",e)}:{data:null,error:new df("Empty credential response",e)}}catch(e){return{data:null,error:DS({error:e,options:t})}}}async function WS(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new df("Browser returned unexpected credential type",e)}:{data:null,error:new df("Empty credential response",e)}}catch(e){return{data:null,error:FS({error:e,options:t})}}}const VS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},HS={userVerification:"preferred",hints:["security-key"]};function hf(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(e(a)){const o=n[i];e(o)?n[i]=hf(o,a):n[i]=hf(a)}else n[i]=a}return n}function GS(t,e){return hf(VS,t,e||{})}function YS(t,e){return hf(HS,t,e||{})}class JS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:o};const u=s??RS.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=GS(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:g}=await qS({publicKey:d,signal:u});return f?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:g}}case"request":{const d=YS(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:g}=await WS(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:g}}}}catch(a){return st(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new rd("rpId is required for WebAuthn authentication")};try{if(!X2())return{data:null,error:new Co("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return st(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new rd("rpId is required for WebAuthn registration")};try{if(!X2())return{data:null,error:new Co("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(f=>{var g;return(g=f.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:o};const{data:u,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(a){return st(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in register",a)}}}}LS();const KS={url:V4,storageKey:H4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:G4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Q2(t,e,r){return await r()}const Ll={};class nd{get jwks(){var e,r;return(r=(e=Ll[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ll[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nd.nextInstanceID,nd.nextInstanceID+=1,this.instanceID>0&&os()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},KS),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new AS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=T5(s.fetch),this.lock=s.lock||Q2,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:os()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ES:this.lock=Q2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new JS(this)},this.persistSession?(s.storage?this.storage=s.storage:L5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Z2(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Z2(this.memoryStorage)),os()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${A5}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=oS(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),os()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Q4(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return st(r)?{error:r}:{error:new Co("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Zs}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(st(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:f,password:g,options:y}=e;let p=null,k=null;this.flowType==="pkce"&&([p,k]=await Al(this.storage,this.storageKey)),i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:p,code_challenge_method:k},xform:Zs})}else if("phone"in e){const{phone:f,password:g,options:y}=e;i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Zs})}else throw new ah("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(st(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:o}=e;r=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:J2})}else if("phone"in e){const{phone:i,password:a,options:o}=e;r=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:J2})}else throw new ah("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Cl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(st(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,a,o,u,d,f,g,y;let p,k;if("message"in e)p=e.message,k=e.signature;else{const{chain:N,wallet:C,statement:x,options:b}=e;let _;if(os())if(typeof C=="object")_=C;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")_=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=C}const R=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),W=await _.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=I5(W[0]);let j=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const F=await _.request({method:"eth_chainId"});j=TS(F)}const P={domain:R.host,address:K,statement:x,uri:R.href,version:"1",chainId:j,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=b==null?void 0:b.signInWithEthereum)===null||f===void 0?void 0:f.resources};p=IS(P),k=await _.request({method:"personal_sign",params:[OS(p),K]})}try{const{data:N,error:C}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:k},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Zs});if(C)throw C;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Cl}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:C})}catch(N){if(st(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithSolana(e){var r,n,s,i,a,o,u,d,f,g,y,p;let k,N;if("message"in e)k=e.message,N=e.signature;else{const{chain:C,wallet:x,statement:b,options:_}=e;let R;if(os())if(typeof x=="object")R=x;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))R=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const W=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in R&&R.signIn){const K=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),b?{statement:b}:null));let j;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")j=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)j=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)k=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),N=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${W.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(s=(n=_==null?void 0:_.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((d=_==null?void 0:_.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((g=(f=_==null?void 0:_.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||g===void 0)&&g.length?["Resources",..._.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const K=await R.signMessage(new TextEncoder().encode(k),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=K}}try{const{data:C,error:x}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:To(N)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Zs});if(x)throw x;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Cl}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:x})}catch(C){if(st(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const r=await xo(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Zs});if(await Sa(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Cl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(st(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,o=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Zs}),{data:u,error:d}=o;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Cl}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(r){if(st(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:o,options:u}=e;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Al(this.storage,this.storageKey));const{error:g}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:o,options:u}=e,{data:d,error:f}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new ah("You must provide either an email or phone number.")}catch(o){if(st(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Zs});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,d=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(st(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Al(this.storage,this.storageKey)),await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:SS})}catch(i){if(st(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pa;const{error:s}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(st(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await yt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await yt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new ah("You must provide either an email or phone number and a type")}catch(r){if(st(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<zm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await xo(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Vm()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,d,f)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,d,f))})}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Da}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pa}:await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Da})})}catch(r){if(st(r))return X4(r)&&(await this._removeSession(),await Sa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Pa;const a=s.session;let o=null,u=null;this.flowType==="pkce"&&e.email!=null&&([o,u]=await Al(this.storage,this.storageKey));const{data:d,error:f}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:u}),jwt:a.access_token,xform:Da});if(f)throw f;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pa;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Wm(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:o,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(st(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pa;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(st(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!os())throw new oh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new oh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new z2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new z2("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:u,token_type:d}=e;if(!i||!o||!a||!d)throw new oh("No session defined in URL");const f=Math.round(Date.now()/1e3),g=parseInt(o);let y=f+g;u&&(y=parseInt(u));const p=y-f;p*1e3<=Ml&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${g}s`);const k=y-g;f-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,f):f-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,f);const{data:N,error:C}=await this._getUser(i);if(C)throw C;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:y,refresh_token:a,token_type:d,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(st(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await xo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Z4(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Sa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=aS(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Al(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(st(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,u,d,f;const{data:g,error:y}=i;if(y)throw y;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return os()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(st(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:o,token:u,access_token:d,nonce:f}=e,g=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:u,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zs}),{data:y,error:p}=g;return p?{data:{user:null,session:null},error:p}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Cl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:p})}catch(s){if(st(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await cS(async s=>(s>0&&await uS(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zs})),(s,i)=>{const a=200*Math.pow(2,s);return i&&qm(i)&&Date.now()+a-n<Ml})}catch(n){if(this._debug(r,"error",n),st(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),os()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await xo(this.storage,this.storageKey);if(s&&this.userStorage){let a=await xo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Rl(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Vm()}else if(s&&!s.user&&!s.user){const a=await xo(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Sa(this.storage,this.storageKey+"-user"),await Rl(this.storage,this.storageKey,s)):s.user=Vm()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<zm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${zm}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),qm(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Bf;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Pa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),st(i)){const a={data:null,error:i};return qm(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(u){i.push(u)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Rl(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=G2(s);await Rl(this.storage,this.storageKey,i)}else{const s=G2(r);await Rl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Sa(this.storage,this.storageKey),await Sa(this.storage,this.storageKey+"-code-verifier"),await Sa(this.storage,this.storageKey+"-user"),this.userStorage&&await Sa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&os()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ml);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ml);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ml}ms, refresh threshold is ${hp} ticks`),s<=hp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof O5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!os()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Al(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await yt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:d}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$S(e.webauthn.credential_response):zS(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:u}=await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:u})})}catch(r){if(st(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=await yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:US(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:BS(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(st(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wm(s.access_token);let o=null;a.aal&&(o=a.aal);let u=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=a.amr||[];return{data:{currentLevel:o,nextLevel:u,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+J4>s)return n;const{data:i,error:a}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:k}=await this.getSession();if(k||!p.session)return{data:null,error:k};n=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:u}}=Wm(n);r!=null&&r.allowExpired||vS(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const f=yS(s.alg),g=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,g,a,sS(`${o}.${u}`)))throw new pp("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}}}nd.nextInstanceID=0;const ZS=nd;class XS extends ZS{constructor(e){super(e)}}var QS=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(f){try{d(n.next(f))}catch(g){a(g)}}function u(f){try{d(n.throw(f))}catch(g){a(g)}}function d(f){f.done?i(f.value):s(f.value).then(o,u)}d((n=n.apply(t,e||[])).next())})};class ek{constructor(e,r,n){var s,i,a;this.supabaseUrl=e,this.supabaseKey=r;const o=W4(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:I4,realtime:F4,auth:Object.assign(Object.assign({},D4),{storageKey:u}),global:O4},f=q4(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=B4(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new K_(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new E4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new A_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return QS(this,void 0,void 0,function*(){var e,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:a,flowType:o,lock:u,debug:d},f,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XS({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:o,lock:u,debug:d,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new f4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tk=(t,e,r)=>new ek(t,e,r);function rk(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}rk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Eh="https://hyrgqrgeshkgvsfwnzzu.supabase.co",Gi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5cmdxcmdlc2hrZ3ZzZnduenp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTU3NTEsImV4cCI6MjA3NjczMTc1MX0.PpQa22hWN7OAl8LP_h9mhxfogUaV1qmSuOiaBeaLDh4";try{console.log("[supabase] initializing client",{urlPresent:!!Eh,keyPresent:!!Gi,urlPreview:Eh?`${Eh.slice(0,20)}...`:null,keyLength:(Gi==null?void 0:Gi.length)||0,keyFirst50:Gi?`${Gi.slice(0,50)}...`:null,keyLast20:Gi?`...${Gi.slice(-20)}`:null})}catch{}const nk=typeof window<"u"?window.localStorage:void 0,it=tk(Eh,Gi,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:nk,storageKey:"pch.auth"}});async function ev(t){var e;try{const{data:r,error:n}=await it.auth.getUser();if(n||!((e=r==null?void 0:r.user)!=null&&e.id))return{ok:!1,updated:!1,error:(n==null?void 0:n.message)||"No authenticated user"};const s=r.user.id,{data:i,error:a}=await it.from("profiles").select("timezone").eq("id",s).single();if(a)return{ok:!1,updated:!1,error:a.message};const o=String((i==null?void 0:i.timezone)||"").trim();if(o)return{ok:!0,updated:!1,timezone:o};const u=String(t||"").trim();if(!u)return{ok:!1,updated:!1,error:"Empty timezone provided"};const{error:d}=await it.from("profiles").update({timezone:u}).eq("id",s);return d?{ok:!1,updated:!1,error:d.message}:{ok:!0,updated:!0,timezone:u}}catch(r){return{ok:!1,updated:!1,error:(r==null?void 0:r.message)||String(r)}}}async function lh(t){try{console.log("[dbLoadPets] START - userId=",t);const{data:e,error:r}=await it.from("pets").select("id, name, species, color, photo_url, insurance_company, policy_number, owner_name, owner_phone, filing_deadline_days, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",t).order("created_at",{ascending:!0});if(console.log("[dbLoadPets] QUERY RESULT - data:",e,"error:",r),r)throw console.error("[dbLoadPets] ERROR:",r),r;const n=(e||[]).map(s=>({id:s.id,name:s.name,species:s.species,color:s.color||(s.species==="dog"?"#3B82F6":s.species==="cat"?"#F97316":"#6B7280"),photo_url:s.photo_url||null,insuranceCompany:s.insurance_company,policyNumber:s.policy_number,ownerName:s.owner_name,ownerPhone:s.owner_phone,filing_deadline_days:s.filing_deadline_days,monthly_premium:s.monthly_premium??null,deductible_per_claim:s.deductible_per_claim??null,coverage_start_date:s.coverage_start_date||null,insurance_pays_percentage:s.insurance_pays_percentage??null,annual_coverage_limit:s.annual_coverage_limit??null}));return console.log("[dbLoadPets] SUCCESS - count=",n.length,"pets:",n),n}catch(e){throw console.error("[dbLoadPets] EXCEPTION:",e),e}}async function Gm(t,e){const r=e.color||(e.species==="dog"?"#3B82F6":e.species==="cat"?"#F97316":"#6B7280"),n={id:e.id,user_id:t,name:e.name,species:e.species,color:r,photo_url:e.photo_url||null,insurance_company:e.insuranceCompany,policy_number:e.policyNumber,owner_name:e.ownerName||"",owner_phone:e.ownerPhone||"",filing_deadline_days:e.filing_deadline_days||e.filingDeadlineDays||null,monthly_premium:e.monthly_premium??null,deductible_per_claim:e.deductible_per_claim??null,coverage_start_date:e.coverage_start_date||null,insurance_pays_percentage:e.insurance_pays_percentage??null,annual_coverage_limit:e.annual_coverage_limit??null};console.log("[dbUpsertPet] userId=",t,"payload=",n);const{error:s}=await it.from("pets").upsert(n,{onConflict:"id"}).select();if(s)throw s}async function sk(t,e){console.log("[dbDeletePet] userId=",t,"petId=",e);const{error:r}=await it.from("pets").delete().eq("user_id",t).eq("id",e);if(r)throw r}async function tv(t,e){const r={id:t,email:e??null};console.log("[dbEnsureProfile] upserting profile",r);const{error:n}=await it.from("profiles").upsert(r,{onConflict:"id"}).select();if(n)throw n}async function ik(t){console.log("[createPet] received payload:",t);const{data:e,error:r}=await it.from("pets").insert([{user_id:t.user_id,name:t.name,species:t.species,color:t.color??null,photo_url:t.photo_url??null,insurance_company:t.insurance_company??null,policy_number:t.policy_number??null,breed:t.breed??null,weight_lbs:t.weight_lbs??null,monthly_premium:t.monthly_premium??null,deductible_per_claim:t.deductible_per_claim??null,coverage_start_date:t.coverage_start_date??null,annual_coverage_limit:t.annual_coverage_limit??null,insurance_pays_percentage:t.insurance_pays_percentage??null}]).select("*").single();if(console.log("[createPet] insert result:",{data:e,error:r}),r)throw r;return e}function zt(t){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(t)}var xn=Uint8Array,cs=Uint16Array,Bg=Int32Array,$f=new xn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zf=new xn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gp=new xn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M5=function(t,e){for(var r=new cs(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new Bg(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},R5=M5($f,2),U5=R5.b,vp=R5.r;U5[28]=258,vp[258]=28;var B5=M5(zf,0),ak=B5.b,rv=B5.r,yp=new cs(32768);for(var ar=0;ar<32768;++ar){var ka=(ar&43690)>>1|(ar&21845)<<1;ka=(ka&52428)>>2|(ka&13107)<<2,ka=(ka&61680)>>4|(ka&3855)<<4,yp[ar]=((ka&65280)>>8|(ka&255)<<8)>>1}var ki=function(t,e,r){for(var n=t.length,s=0,i=new cs(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new cs(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new cs(1<<e);var u=15-e;for(s=0;s<n;++s)if(t[s])for(var d=s<<4|t[s],f=e-t[s],g=a[t[s]-1]++<<f,y=g|(1<<f)-1;g<=y;++g)o[yp[g]>>u]=d}else for(o=new cs(n),s=0;s<n;++s)t[s]&&(o[s]=yp[a[t[s]-1]++]>>15-t[s]);return o},Xa=new xn(288);for(var ar=0;ar<144;++ar)Xa[ar]=8;for(var ar=144;ar<256;++ar)Xa[ar]=9;for(var ar=256;ar<280;++ar)Xa[ar]=7;for(var ar=280;ar<288;++ar)Xa[ar]=8;var sd=new xn(32);for(var ar=0;ar<32;++ar)sd[ar]=5;var ok=ki(Xa,9,0),lk=ki(Xa,9,1),uk=ki(sd,5,0),ck=ki(sd,5,1),Ym=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Gs=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Jm=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},$g=function(t){return(t+7)/8|0},$5=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new xn(t.subarray(e,r))},dk=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Qs=function(t,e,r){var n=new Error(e||dk[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Qs),!r)throw n;return n},hk=function(t,e,r,n){var s=t.length,i=0;if(!s||e.f&&!e.l)return r||new xn(0);var a=!r,o=a||e.i!=2,u=e.i;a&&(r=new xn(s*3));var d=function(Pe){var Le=r.length;if(Pe>Le){var Fe=new xn(Math.max(Le*2,Pe));Fe.set(r),r=Fe}},f=e.f||0,g=e.p||0,y=e.b||0,p=e.l,k=e.d,N=e.m,C=e.n,x=s*8;do{if(!p){f=Gs(t,g,1);var b=Gs(t,g+1,3);if(g+=3,b)if(b==1)p=lk,k=ck,N=9,C=5;else if(b==2){var K=Gs(t,g,31)+257,j=Gs(t,g+10,15)+4,P=K+Gs(t,g+5,31)+1;g+=14;for(var F=new xn(P),B=new xn(19),A=0;A<j;++A)B[gp[A]]=Gs(t,g+A*3,7);g+=j*3;for(var O=Ym(B),z=(1<<O)-1,q=ki(B,O,1),A=0;A<P;){var ee=q[Gs(t,g,z)];g+=ee&15;var _=ee>>4;if(_<16)F[A++]=_;else{var Q=0,de=0;for(_==16?(de=3+Gs(t,g,3),g+=2,Q=F[A-1]):_==17?(de=3+Gs(t,g,7),g+=3):_==18&&(de=11+Gs(t,g,127),g+=7);de--;)F[A++]=Q}}var H=F.subarray(0,K),oe=F.subarray(K);N=Ym(H),C=Ym(oe),p=ki(H,N,1),k=ki(oe,C,1)}else Qs(1);else{var _=$g(g)+4,R=t[_-4]|t[_-3]<<8,W=_+R;if(W>s){u&&Qs(0);break}o&&d(y+R),r.set(t.subarray(_,W),y),e.b=y+=R,e.p=g=W*8,e.f=f;continue}if(g>x){u&&Qs(0);break}}o&&d(y+131072);for(var ne=(1<<N)-1,xe=(1<<C)-1,L=g;;L=g){var Q=p[Jm(t,g)&ne],$=Q>>4;if(g+=Q&15,g>x){u&&Qs(0);break}if(Q||Qs(2),$<256)r[y++]=$;else if($==256){L=g,p=null;break}else{var Y=$-254;if($>264){var A=$-257,X=$f[A];Y=Gs(t,g,(1<<X)-1)+U5[A],g+=X}var ae=k[Jm(t,g)&xe],pe=ae>>4;ae||Qs(3),g+=ae&15;var oe=ak[pe];if(pe>3){var X=zf[pe];oe+=Jm(t,g)&(1<<X)-1,g+=X}if(g>x){u&&Qs(0);break}o&&d(y+131072);var J=y+Y;if(y<oe){var ge=i-oe,Se=Math.min(oe,J);for(ge+y<0&&Qs(3);y<Se;++y)r[y]=n[ge+y]}for(;y<J;++y)r[y]=r[y-oe]}}e.l=p,e.p=L,e.b=y,e.f=f,p&&(f=1,e.m=N,e.d=k,e.n=C)}while(!f);return y!=r.length&&a?$5(r,0,y):r.subarray(0,y)},Vi=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},mc=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Km=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:q5,l:0};if(s==1){var a=new xn(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(W,K){return W.f-K.f}),r.push({s:-1,f:25001});var o=r[0],u=r[1],d=0,f=1,g=2;for(r[0]={s:-1,f:o.f+u.f,l:o,r:u};f!=s-1;)o=r[r[d].f<r[g].f?d++:g++],u=r[d!=f&&r[d].f<r[g].f?d++:g++],r[f++]={s:-1,f:o.f+u.f,l:o,r:u};for(var y=i[0].s,n=1;n<s;++n)i[n].s>y&&(y=i[n].s);var p=new cs(y+1),k=xp(r[f-1],p,0);if(k>e){var n=0,N=0,C=k-e,x=1<<C;for(i.sort(function(K,j){return p[j.s]-p[K.s]||K.f-j.f});n<s;++n){var b=i[n].s;if(p[b]>e)N+=x-(1<<k-p[b]),p[b]=e;else break}for(N>>=C;N>0;){var _=i[n].s;p[_]<e?N-=1<<e-p[_]++-1:++n}for(;n>=0&&N;--n){var R=i[n].s;p[R]==e&&(--p[R],++N)}k=e}return{t:new xn(p),l:k}},xp=function(t,e,r){return t.s==-1?Math.max(xp(t.l,e,r+1),xp(t.r,e,r+1)):e[t.s]=r},nv=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new cs(++e),n=0,s=t[0],i=1,a=function(u){r[n++]=u},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},pc=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},z5=function(t,e,r){var n=r.length,s=$g(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},sv=function(t,e,r,n,s,i,a,o,u,d,f){Vi(e,f++,r),++s[256];for(var g=Km(s,15),y=g.t,p=g.l,k=Km(i,15),N=k.t,C=k.l,x=nv(y),b=x.c,_=x.n,R=nv(N),W=R.c,K=R.n,j=new cs(19),P=0;P<b.length;++P)++j[b[P]&31];for(var P=0;P<W.length;++P)++j[W[P]&31];for(var F=Km(j,7),B=F.t,A=F.l,O=19;O>4&&!B[gp[O-1]];--O);var z=d+5<<3,q=pc(s,Xa)+pc(i,sd)+a,ee=pc(s,y)+pc(i,N)+a+14+3*O+pc(j,B)+2*j[16]+3*j[17]+7*j[18];if(u>=0&&z<=q&&z<=ee)return z5(e,f,t.subarray(u,u+d));var Q,de,H,oe;if(Vi(e,f,1+(ee<q)),f+=2,ee<q){Q=ki(y,p,0),de=y,H=ki(N,C,0),oe=N;var ne=ki(B,A,0);Vi(e,f,_-257),Vi(e,f+5,K-1),Vi(e,f+10,O-4),f+=14;for(var P=0;P<O;++P)Vi(e,f+3*P,B[gp[P]]);f+=3*O;for(var xe=[b,W],L=0;L<2;++L)for(var $=xe[L],P=0;P<$.length;++P){var Y=$[P]&31;Vi(e,f,ne[Y]),f+=B[Y],Y>15&&(Vi(e,f,$[P]>>5&127),f+=$[P]>>12)}}else Q=ok,de=Xa,H=uk,oe=sd;for(var P=0;P<o;++P){var X=n[P];if(X>255){var Y=X>>18&31;mc(e,f,Q[Y+257]),f+=de[Y+257],Y>7&&(Vi(e,f,X>>23&31),f+=$f[Y]);var ae=X&31;mc(e,f,H[ae]),f+=oe[ae],ae>3&&(mc(e,f,X>>5&8191),f+=zf[ae])}else mc(e,f,Q[X]),f+=de[X]}return mc(e,f,Q[256]),f+de[256]},fk=new Bg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q5=new xn(0),mk=function(t,e,r,n,s,i){var a=i.z||t.length,o=new xn(n+a+5*(1+Math.ceil(a/7e3))+s),u=o.subarray(n,o.length-s),d=i.l,f=(i.r||0)&7;if(e){f&&(u[0]=i.r>>3);for(var g=fk[e-1],y=g>>13,p=g&8191,k=(1<<r)-1,N=i.p||new cs(32768),C=i.h||new cs(k+1),x=Math.ceil(r/3),b=2*x,_=function(et){return(t[et]^t[et+1]<<x^t[et+2]<<b)&k},R=new Bg(25e3),W=new cs(288),K=new cs(32),j=0,P=0,F=i.i||0,B=0,A=i.w||0,O=0;F+2<a;++F){var z=_(F),q=F&32767,ee=C[z];if(N[q]=ee,C[z]=q,A<=F){var Q=a-F;if((j>7e3||B>24576)&&(Q>423||!d)){f=sv(t,u,0,R,W,K,P,B,O,F-O,f),B=j=P=0,O=F;for(var de=0;de<286;++de)W[de]=0;for(var de=0;de<30;++de)K[de]=0}var H=2,oe=0,ne=p,xe=q-ee&32767;if(Q>2&&z==_(F-xe))for(var L=Math.min(y,Q)-1,$=Math.min(32767,F),Y=Math.min(258,Q);xe<=$&&--ne&&q!=ee;){if(t[F+H]==t[F+H-xe]){for(var X=0;X<Y&&t[F+X]==t[F+X-xe];++X);if(X>H){if(H=X,oe=xe,X>L)break;for(var ae=Math.min(xe,X-2),pe=0,de=0;de<ae;++de){var J=F-xe+de&32767,ge=N[J],Se=J-ge&32767;Se>pe&&(pe=Se,ee=J)}}}q=ee,ee=N[q],xe+=q-ee&32767}if(oe){R[B++]=268435456|vp[H]<<18|rv[oe];var Pe=vp[H]&31,Le=rv[oe]&31;P+=$f[Pe]+zf[Le],++W[257+Pe],++K[Le],A=F+H,++j}else R[B++]=t[F],++W[t[F]]}}for(F=Math.max(F,A);F<a;++F)R[B++]=t[F],++W[t[F]];f=sv(t,u,d,R,W,K,P,B,O,F-O,f),d||(i.r=f&7|u[f/8|0]<<3,f-=7,i.h=C,i.p=N,i.i=F,i.w=A)}else{for(var F=i.w||0;F<a+d;F+=65535){var Fe=F+65535;Fe>=a&&(u[f/8|0]=d,Fe=a),f=z5(u,f+1,t.subarray(F,Fe))}i.i=a}return $5(o,0,n+$g(f)+s)},W5=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},pk=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new xn(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return mk(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},V5=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},gk=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=W5();s.p(e.dictionary),V5(t,2,s.d())}},vk=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Qs(6,"invalid zlib data"),(t[1]>>5&1)==1&&Qs(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function bp(t,e){e||(e={});var r=W5();r.p(t);var n=pk(t,e,e.dictionary?6:2,4);return gk(n,e),V5(n,n.length-4,r.d()),n}function yk(t,e){return hk(t.subarray(vk(t),-4),{i:2},e,e)}var xk=typeof TextDecoder<"u"&&new TextDecoder,bk=0;try{xk.decode(q5,{stream:!0}),bk=1}catch{}var lt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Zm(){lt.console&&typeof lt.console.log=="function"&&lt.console.log.apply(lt.console,arguments)}var Zt={log:Zm,warn:function(t){lt.console&&(typeof lt.console.warn=="function"?lt.console.warn.apply(lt.console,arguments):Zm.call(null,arguments))},error:function(t){lt.console&&(typeof lt.console.error=="function"?lt.console.error.apply(lt.console,arguments):Zm(t))}};function Xm(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ko(n.response,e,r)},n.onerror=function(){Zt.error("could not download file")},n.send()}function iv(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function uh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Mc,wp,ko=lt.saveAs||((typeof window>"u"?"undefined":zt(window))!=="object"||window!==lt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=lt.URL||lt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?iv(s.href)?Xm(t,e,r):uh(s,s.target="_blank"):uh(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){uh(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(iv(t))Xm(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){uh(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:zt(i)!=="object"&&(Zt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Xm(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(lt.HTMLElement)||lt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":zt(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(t)}else{var u=lt.URL||lt.webkitURL,d=u.createObjectURL(t);n?n.location=d:location.href=d,n=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function H5(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+o+u+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Qm(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=fn(r,n,s,i,e[0],7,-680876936),i=fn(i,r,n,s,e[1],12,-389564586),s=fn(s,i,r,n,e[2],17,606105819),n=fn(n,s,i,r,e[3],22,-1044525330),r=fn(r,n,s,i,e[4],7,-176418897),i=fn(i,r,n,s,e[5],12,1200080426),s=fn(s,i,r,n,e[6],17,-1473231341),n=fn(n,s,i,r,e[7],22,-45705983),r=fn(r,n,s,i,e[8],7,1770035416),i=fn(i,r,n,s,e[9],12,-1958414417),s=fn(s,i,r,n,e[10],17,-42063),n=fn(n,s,i,r,e[11],22,-1990404162),r=fn(r,n,s,i,e[12],7,1804603682),i=fn(i,r,n,s,e[13],12,-40341101),s=fn(s,i,r,n,e[14],17,-1502002290),r=mn(r,n=fn(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=mn(i,r,n,s,e[6],9,-1069501632),s=mn(s,i,r,n,e[11],14,643717713),n=mn(n,s,i,r,e[0],20,-373897302),r=mn(r,n,s,i,e[5],5,-701558691),i=mn(i,r,n,s,e[10],9,38016083),s=mn(s,i,r,n,e[15],14,-660478335),n=mn(n,s,i,r,e[4],20,-405537848),r=mn(r,n,s,i,e[9],5,568446438),i=mn(i,r,n,s,e[14],9,-1019803690),s=mn(s,i,r,n,e[3],14,-187363961),n=mn(n,s,i,r,e[8],20,1163531501),r=mn(r,n,s,i,e[13],5,-1444681467),i=mn(i,r,n,s,e[2],9,-51403784),s=mn(s,i,r,n,e[7],14,1735328473),r=pn(r,n=mn(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=pn(i,r,n,s,e[8],11,-2022574463),s=pn(s,i,r,n,e[11],16,1839030562),n=pn(n,s,i,r,e[14],23,-35309556),r=pn(r,n,s,i,e[1],4,-1530992060),i=pn(i,r,n,s,e[4],11,1272893353),s=pn(s,i,r,n,e[7],16,-155497632),n=pn(n,s,i,r,e[10],23,-1094730640),r=pn(r,n,s,i,e[13],4,681279174),i=pn(i,r,n,s,e[0],11,-358537222),s=pn(s,i,r,n,e[3],16,-722521979),n=pn(n,s,i,r,e[6],23,76029189),r=pn(r,n,s,i,e[9],4,-640364487),i=pn(i,r,n,s,e[12],11,-421815835),s=pn(s,i,r,n,e[15],16,530742520),r=gn(r,n=pn(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=gn(i,r,n,s,e[7],10,1126891415),s=gn(s,i,r,n,e[14],15,-1416354905),n=gn(n,s,i,r,e[5],21,-57434055),r=gn(r,n,s,i,e[12],6,1700485571),i=gn(i,r,n,s,e[3],10,-1894986606),s=gn(s,i,r,n,e[10],15,-1051523),n=gn(n,s,i,r,e[1],21,-2054922799),r=gn(r,n,s,i,e[8],6,1873313359),i=gn(i,r,n,s,e[15],10,-30611744),s=gn(s,i,r,n,e[6],15,-1560198380),n=gn(n,s,i,r,e[13],21,1309151649),r=gn(r,n,s,i,e[4],6,-145523070),i=gn(i,r,n,s,e[11],10,-1120210379),s=gn(s,i,r,n,e[2],15,718787259),n=gn(n,s,i,r,e[9],21,-343485551),t[0]=Ua(r,t[0]),t[1]=Ua(n,t[1]),t[2]=Ua(s,t[2]),t[3]=Ua(i,t[3])}function qf(t,e,r,n,s,i){return e=Ua(Ua(e,t),Ua(n,i)),Ua(e<<s|e>>>32-s,r)}function fn(t,e,r,n,s,i,a){return qf(e&r|~e&n,t,e,s,i,a)}function mn(t,e,r,n,s,i,a){return qf(e&n|r&~n,t,e,s,i,a)}function pn(t,e,r,n,s,i,a){return qf(e^r^n,t,e,s,i,a)}function gn(t,e,r,n,s,i,a){return qf(r^(e|~n),t,e,s,i,a)}function G5(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Qm(n,wk(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Qm(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,Qm(n,s),n}function wk(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Mc=lt.atob.bind(lt),wp=lt.btoa.bind(lt);var av="0123456789abcdef".split("");function Nk(t){for(var e="",r=0;r<4;r++)e+=av[t>>8*r+4&15]+av[t>>8*r&15];return e}function _k(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Np(t){return G5(t).map(_k).join("")}var Sk=function(t){for(var e=0;e<t.length;e++)t[e]=Nk(t[e]);return t.join("")}(G5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ua(t,e){if(Sk){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _p(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],u=0;u<256;u++)o[u]=u;var d=0;for(u=0;u<256;u++){var f=o[u];d=(d+f+a.charCodeAt(u))%256,o[u]=o[d],o[d]=f}r=t,n=o}else o=n;var g=e.length,y=0,p=0,k="";for(u=0;u<g;u++)p=(p+(f=o[y=(y+1)%256]))%256,o[y]=o[p],o[p]=f,a=o[(o[y]+o[p])%256],k+=String.fromCharCode(e.charCodeAt(u)^a);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ov={print:4,modify:8,copy:16,"annot-forms":32};function Ul(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(ov.perm!==void 0)throw new Error("Invalid permission: "+o);s+=ov[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=Np(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=_p(this.encryptionKey,this.padding)}function Bl(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function lv(t){if(zt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){lt.console&&Zt.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ff(t){if(!(this instanceof ff))return new ff(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Y5(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ao(t,e,r,n,s){if(!(this instanceof Ao))return new Ao(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Y5.call(this,n,s)}function Ql(t,e,r,n,s){if(!(this instanceof Ql))return new Ql(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Y5.call(this,n,s)}function ot(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,u=16,d="S",f=null;zt(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),d=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=lv;var k="1.3",N=p.__private__.getPdfVersion=function(){return k};p.__private__.setPdfVersion=function(m){k=m};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var x=p.__private__.getPageFormat=function(m){return C[m]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},_=b.COMPAT;function R(){this.saveGraphicsState(),Z(new rt(Re,0,0,-Re,0,cr()*Re).toString()+" cm"),this.setFontSize(this.getFontSize()/Re),d="n",_=b.ADVANCED}function W(){this.restoreGraphicsState(),d="S",_=b.COMPAT}var K=p.__private__.combineFontStyleAndFontWeight=function(m,E){if(m=="bold"&&E=="normal"||m=="bold"&&E==400||m=="normal"&&E=="italic"||m=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(m=E==400||E==="normal"?m==="italic"?"italic":"normal":E!=700&&E!=="bold"||m!=="normal"?(E==700?"bold":E)+""+m:"bold"),m};p.advancedAPI=function(m){var E=_===b.COMPAT;return E&&R.call(this),typeof m!="function"||(m(this),E&&W.call(this)),this},p.compatAPI=function(m){var E=_===b.ADVANCED;return E&&W.call(this),typeof m!="function"||(m(this),E&&R.call(this)),this},p.isAdvancedAPI=function(){return _===b.ADVANCED};var j,P=function(m){if(_!==b.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=p.roundToPrecision=p.__private__.roundToPrecision=function(m,E){var G=e||E;if(isNaN(m)||isNaN(G))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(G).replace(/0+$/,"")};j=p.hpf=p.__private__.hpf=typeof u=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return F(m,u)}:u==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return F(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return F(m,16)};var B=p.f2=p.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return F(m,2)},A=p.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return F(m,3)},O=p.scale=p.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return _===b.COMPAT?m*Re:_===b.ADVANCED?m:void 0},z=function(m){return _===b.COMPAT?cr()-m:_===b.ADVANCED?m:void 0},q=function(m){return O(z(m))};p.__private__.setPrecision=p.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var ee,Q="00000000000000000000000000000000",de=p.__private__.getFileId=function(){return Q},H=p.__private__.setFileId=function(m){return Q=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Gr=new Ul(f.userPermissions,f.userPassword,f.ownerPassword,Q)),Q};p.setFileId=function(m){return H(m),this},p.getFileId=function(){return de()};var oe=p.__private__.convertDateToPDFDate=function(m){var E=m.getTimezoneOffset(),G=E<0?"+":"-",ie=Math.floor(Math.abs(E/60)),me=Math.abs(E%60),Ne=[G,Y(ie),"'",Y(me),"'"].join("");return["D:",m.getFullYear(),Y(m.getMonth()+1),Y(m.getDate()),Y(m.getHours()),Y(m.getMinutes()),Y(m.getSeconds()),Ne].join("")},ne=p.__private__.convertPDFDateToDate=function(m){var E=parseInt(m.substr(2,4),10),G=parseInt(m.substr(6,2),10)-1,ie=parseInt(m.substr(8,2),10),me=parseInt(m.substr(10,2),10),Ne=parseInt(m.substr(12,2),10),Ee=parseInt(m.substr(14,2),10);return new Date(E,G,ie,me,Ne,Ee,0)},xe=p.__private__.setCreationDate=function(m){var E;if(m===void 0&&(m=new Date),m instanceof Date)E=oe(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=m}return ee=E},L=p.__private__.getCreationDate=function(m){var E=ee;return m==="jsDate"&&(E=ne(ee)),E};p.setCreationDate=function(m){return xe(m),this},p.getCreationDate=function(m){return L(m)};var $,Y=p.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},X=p.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},ae=0,pe=[],J=[],ge=0,Se=[],Pe=[],Le=!1,Fe=J,et=function(){ae=0,ge=0,J=[],pe=[],Se=[],Us=lr(),kn=lr()};p.__private__.setCustomOutputDestination=function(m){Le=!0,Fe=m};var we=function(m){Le||(Fe=m)};p.__private__.resetCustomOutputDestination=function(){Le=!1,Fe=J};var Z=p.__private__.out=function(m){return m=m.toString(),ge+=m.length+1,Fe.push(m),Fe},mt=p.__private__.write=function(m){return Z(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Xe=p.__private__.getArrayBuffer=function(m){for(var E=m.length,G=new ArrayBuffer(E),ie=new Uint8Array(G);E--;)ie[E]=m.charCodeAt(E);return G},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Te};var Me=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(m){return Me=_===b.ADVANCED?m/Re:m,this};var ze,Ie=p.__private__.getFontSize=p.getFontSize=function(){return _===b.COMPAT?Me:Me*Re},We=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(m){return We=m,this},p.__private__.getR2L=p.getR2L=function(){return We};var ht,xt=p.__private__.setZoomMode=function(m){var E=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))ze=m;else if(isNaN(m)){if(E.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');ze=m}else ze=parseInt(m,10)};p.__private__.getZoomMode=function(){return ze};var _t,Ct=p.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');ht=m};p.__private__.getPageMode=function(){return ht};var St=p.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');_t=m};p.__private__.getLayoutMode=function(){return _t},p.__private__.setDisplayMode=p.setDisplayMode=function(m,E,G){return xt(m),St(E),Ct(G),this};var at={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(m){if(Object.keys(at).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return at[m]},p.__private__.getDocumentProperties=function(){return at},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(m){for(var E in at)at.hasOwnProperty(E)&&m[E]&&(at[E]=m[E]);return this},p.__private__.setDocumentProperty=function(m,E){if(Object.keys(at).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return at[m]=E};var Nt,Re,zr,kt,Yt,Mt={},Jt={},Xn=[],Tt={},ci={},nr={},Dn={},vs=null,sr=0,ut=[],Ot=new lv(p),Fn=t.hotfixes||[],hr={},Nn={},_n=[],rt=function m(E,G,ie,me,Ne,Ee){if(!(this instanceof m))return new m(E,G,ie,me,Ne,Ee);isNaN(E)&&(E=1),isNaN(G)&&(G=0),isNaN(ie)&&(ie=0),isNaN(me)&&(me=1),isNaN(Ne)&&(Ne=0),isNaN(Ee)&&(Ee=0),this._matrix=[E,G,ie,me,Ne,Ee]};Object.defineProperty(rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(m)},rt.prototype.multiply=function(m){var E=m.sx*this.sx+m.shy*this.shx,G=m.sx*this.shy+m.shy*this.sy,ie=m.shx*this.sx+m.sy*this.shx,me=m.shx*this.shy+m.sy*this.sy,Ne=m.tx*this.sx+m.ty*this.shx+this.tx,Ee=m.tx*this.shy+m.ty*this.sy+this.ty;return new rt(E,G,ie,me,Ne,Ee)},rt.prototype.decompose=function(){var m=this.sx,E=this.shy,G=this.shx,ie=this.sy,me=this.tx,Ne=this.ty,Ee=Math.sqrt(m*m+E*E),He=(m/=Ee)*G+(E/=Ee)*ie;G-=m*He,ie-=E*He;var tt=Math.sqrt(G*G+ie*ie);return He/=tt,m*(ie/=tt)<E*(G/=tt)&&(m=-m,E=-E,He=-He,Ee=-Ee),{scale:new rt(Ee,0,0,tt,0,0),translate:new rt(1,0,0,1,me,Ne),rotate:new rt(m,E,-E,m,0,0),skew:new rt(1,0,He,1,0,0)}},rt.prototype.toString=function(m){return this.join(" ")},rt.prototype.inversed=function(){var m=this.sx,E=this.shy,G=this.shx,ie=this.sy,me=this.tx,Ne=this.ty,Ee=1/(m*ie-E*G),He=ie*Ee,tt=-E*Ee,bt=-G*Ee,gt=m*Ee;return new rt(He,tt,bt,gt,-He*me-bt*Ne,-tt*me-gt*Ne)},rt.prototype.applyToPoint=function(m){var E=m.x*this.sx+m.y*this.shx+this.tx,G=m.x*this.shy+m.y*this.sy+this.ty;return new Fi(E,G)},rt.prototype.applyToRectangle=function(m){var E=this.applyToPoint(m),G=this.applyToPoint(new Fi(m.x+m.w,m.y+m.h));return new Mi(E.x,E.y,G.x-E.x,G.y-E.y)},rt.prototype.clone=function(){var m=this.sx,E=this.shy,G=this.shx,ie=this.sy,me=this.tx,Ne=this.ty;return new rt(m,E,G,ie,me,Ne)},p.Matrix=rt;var Sn=p.matrixMult=function(m,E){return E.multiply(m)},Tr=new rt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Tr;var Or=function(m,E){if(!ci[m]){var G=(E instanceof Ao?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);E.id=G,ci[m]=G,Tt[G]=E,Ot.publish("addPattern",E)}};p.ShadingPattern=Ao,p.TilingPattern=Ql,p.addShadingPattern=function(m,E){return P("addShadingPattern()"),Or(m,E),this},p.beginTilingPattern=function(m){P("beginTilingPattern()"),zu(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},p.endTilingPattern=function(m,E){P("endTilingPattern()"),E.stream=Pe[$].join(`
`),Or(m,E),Ot.publish("endTilingPattern",E),_n.pop().restore()};var fr=p.__private__.newObject=function(){var m=lr();return en(m,!0),m},lr=p.__private__.newObjectDeferred=function(){return ae++,pe[ae]=function(){return ge},ae},en=function(m,E){return E=typeof E=="boolean"&&E,pe[m]=ge,E&&Z(m+" 0 obj"),m},di=p.__private__.newAdditionalObject=function(){var m={objId:lr(),content:""};return Se.push(m),m},Us=lr(),kn=lr(),Ir=p.__private__.decodeColorString=function(m){var E=m.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length===5&&(E[4]==="k"||E[4]==="K")&&(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var G=parseFloat(E[0]);E=[G,G,G,"r"]}for(var ie="#",me=0;me<3;me++)ie+=("0"+Math.floor(255*parseFloat(E[me])).toString(16)).slice(-2);return ie},jn=p.__private__.encodeColorString=function(m){var E;typeof m=="string"&&(m={ch1:m});var G=m.ch1,ie=m.ch2,me=m.ch3,Ne=m.ch4,Ee=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof G=="string"&&G.charAt(0)!=="#"){var He=new H5(G);if(He.ok)G=He.toHex();else if(!/^\d*\.?\d*$/.test(G))throw new Error('Invalid color "'+G+'" passed to jsPDF.encodeColorString.')}if(typeof G=="string"&&/^#[0-9A-Fa-f]{3}$/.test(G)&&(G="#"+G[1]+G[1]+G[2]+G[2]+G[3]+G[3]),typeof G=="string"&&/^#[0-9A-Fa-f]{6}$/.test(G)){var tt=parseInt(G.substr(1),16);G=tt>>16&255,ie=tt>>8&255,me=255&tt}if(ie===void 0||Ne===void 0&&G===ie&&ie===me)if(typeof G=="string")E=G+" "+Ee[0];else switch(m.precision){case 2:E=B(G/255)+" "+Ee[0];break;case 3:default:E=A(G/255)+" "+Ee[0]}else if(Ne===void 0||zt(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return E=["1.","1.","1.",Ee[1]].join(" ");if(typeof G=="string")E=[G,ie,me,Ee[1]].join(" ");else switch(m.precision){case 2:E=[B(G/255),B(ie/255),B(me/255),Ee[1]].join(" ");break;default:case 3:E=[A(G/255),A(ie/255),A(me/255),Ee[1]].join(" ")}}else if(typeof G=="string")E=[G,ie,me,Ne,Ee[2]].join(" ");else switch(m.precision){case 2:E=[B(G),B(ie),B(me),B(Ne),Ee[2]].join(" ");break;case 3:default:E=[A(G),A(ie),A(me),A(Ne),Ee[2]].join(" ")}return E},ys=p.__private__.getFilters=function(){return a},tn=p.__private__.putStream=function(m){var E=(m=m||{}).data||"",G=m.filters||ys(),ie=m.alreadyAppliedFilters||[],me=m.addLength1||!1,Ne=E.length,Ee=m.objectId,He=function(cn){return cn};if(f!==null&&Ee===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(He=Gr.encryptor(Ee,0));var tt={};G===!0&&(G=["FlateEncode"]);var bt=m.additionalKeyValues||[],gt=(tt=ot.API.processDataByFilters!==void 0?ot.API.processDataByFilters(E,G):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(tt.data.length!==0&&(bt.push({key:"Length",value:tt.data.length}),me===!0&&bt.push({key:"Length1",value:Ne})),gt.length!=0)if(gt.split("/").length-1==1)bt.push({key:"Filter",value:gt});else{bt.push({key:"Filter",value:"["+gt+"]"});for(var Lt=0;Lt<bt.length;Lt+=1)if(bt[Lt].key==="DecodeParms"){for(var pr=[],br=0;br<tt.reverseChain.split("/").length-1;br+=1)pr.push("null");pr.push(bt[Lt].value),bt[Lt].value="["+pr.join(" ")+"]"}}Z("<<");for(var Dr=0;Dr<bt.length;Dr++)Z("/"+bt[Dr].key+" "+bt[Dr].value);Z(">>"),tt.data.length!==0&&(Z("stream"),Z(He(tt.data)),Z("endstream"))},xs=p.__private__.putPage=function(m){var E=m.number,G=m.data,ie=m.objId,me=m.contentsObjId;en(ie,!0),Z("<</Type /Page"),Z("/Parent "+m.rootDictionaryObjId+" 0 R"),Z("/Resources "+m.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(j(m.mediaBox.bottomLeftX))+" "+parseFloat(j(m.mediaBox.bottomLeftY))+" "+j(m.mediaBox.topRightX)+" "+j(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&Z("/CropBox ["+j(m.cropBox.bottomLeftX)+" "+j(m.cropBox.bottomLeftY)+" "+j(m.cropBox.topRightX)+" "+j(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&Z("/BleedBox ["+j(m.bleedBox.bottomLeftX)+" "+j(m.bleedBox.bottomLeftY)+" "+j(m.bleedBox.topRightX)+" "+j(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&Z("/TrimBox ["+j(m.trimBox.bottomLeftX)+" "+j(m.trimBox.bottomLeftY)+" "+j(m.trimBox.topRightX)+" "+j(m.trimBox.topRightY)+"]"),m.artBox!==null&&Z("/ArtBox ["+j(m.artBox.bottomLeftX)+" "+j(m.artBox.bottomLeftY)+" "+j(m.artBox.topRightX)+" "+j(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&Z("/UserUnit "+m.userUnit),Ot.publish("putPage",{objId:ie,pageContext:ut[E],pageNumber:E,page:G}),Z("/Contents "+me+" 0 R"),Z(">>"),Z("endobj");var Ne=G.join(`
`);return _===b.ADVANCED&&(Ne+=`
Q`),en(me,!0),tn({data:Ne,filters:ys(),objectId:me}),Z("endobj"),ie},Mn=p.__private__.putPages=function(){var m,E,G=[];for(m=1;m<=sr;m++)ut[m].objId=lr(),ut[m].contentsObjId=lr();for(m=1;m<=sr;m++)G.push(xs({number:m,data:Pe[m],objId:ut[m].objId,contentsObjId:ut[m].contentsObjId,mediaBox:ut[m].mediaBox,cropBox:ut[m].cropBox,bleedBox:ut[m].bleedBox,trimBox:ut[m].trimBox,artBox:ut[m].artBox,userUnit:ut[m].userUnit,rootDictionaryObjId:Us,resourceDictionaryObjId:kn}));en(Us,!0),Z("<</Type /Pages");var ie="/Kids [";for(E=0;E<sr;E++)ie+=G[E]+" 0 R ";Z(ie+"]"),Z("/Count "+sr),Z(">>"),Z("endobj"),Ot.publish("postPutPages")},Ci=function(m){Ot.publish("putFont",{font:m,out:Z,newObject:fr,putStream:tn}),m.isAlreadyPutted!==!0&&(m.objectNumber=fr(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+Bl(m.postScriptName)),Z("/Subtype /Type1"),typeof m.encoding=="string"&&Z("/Encoding /"+m.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Bs=function(){for(var m in Mt)Mt.hasOwnProperty(m)&&(g===!1||g===!0&&y.hasOwnProperty(m))&&Ci(Mt[m])},hi=function(m){m.objectNumber=fr();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[j(m.x),j(m.y),j(m.x+m.width),j(m.y+m.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var G=m.pages[1].join(`
`);tn({data:G,additionalKeyValues:E,objectId:m.objectNumber}),Z("endobj")},Ai=function(){for(var m in hr)hr.hasOwnProperty(m)&&hi(hr[m])},bs=function(m,E){var G,ie=[],me=1/(E-1);for(G=0;G<1;G+=me)ie.push(G);if(ie.push(1),m[0].offset!=0){var Ne={offset:0,color:m[0].color};m.unshift(Ne)}if(m[m.length-1].offset!=1){var Ee={offset:1,color:m[m.length-1].color};m.push(Ee)}for(var He="",tt=0,bt=0;bt<ie.length;bt++){for(G=ie[bt];G>m[tt+1].offset;)tt++;var gt=m[tt].offset,Lt=(G-gt)/(m[tt+1].offset-gt),pr=m[tt].color,br=m[tt+1].color;He+=X(Math.round((1-Lt)*pr[0]+Lt*br[0]).toString(16))+X(Math.round((1-Lt)*pr[1]+Lt*br[1]).toString(16))+X(Math.round((1-Lt)*pr[2]+Lt*br[2]).toString(16))}return He.trim()},Yo=function(m,E){E||(E=21);var G=fr(),ie=bs(m.colors,E),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+E+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tn({data:ie,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:G}),Z("endobj"),m.objectNumber=fr(),Z("<< /ShadingType "+m.type),Z("/ColorSpace /DeviceRGB");var Ne="/Coords ["+j(parseFloat(m.coords[0]))+" "+j(parseFloat(m.coords[1]))+" ";m.type===2?Ne+=j(parseFloat(m.coords[2]))+" "+j(parseFloat(m.coords[3])):Ne+=j(parseFloat(m.coords[2]))+" "+j(parseFloat(m.coords[3]))+" "+j(parseFloat(m.coords[4]))+" "+j(parseFloat(m.coords[5])),Z(Ne+="]"),m.matrix&&Z("/Matrix ["+m.matrix.toString()+"]"),Z("/Function "+G+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Jo=function(m,E){var G=lr(),ie=fr();E.push({resourcesOid:G,objectOid:ie}),m.objectNumber=ie;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+m.boundingBox.map(j).join(" ")+"]"}),me.push({key:"XStep",value:j(m.xStep)}),me.push({key:"YStep",value:j(m.yStep)}),me.push({key:"Resources",value:G+" 0 R"}),m.matrix&&me.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),tn({data:m.stream,additionalKeyValues:me,objectId:m.objectNumber}),Z("endobj")},$s=function(m){var E;for(E in Tt)Tt.hasOwnProperty(E)&&(Tt[E]instanceof Ao?Yo(Tt[E]):Tt[E]instanceof Ql&&Jo(Tt[E],m))},so=function(m){for(var E in m.objectNumber=fr(),Z("<<"),m)switch(E){case"opacity":Z("/ca "+B(m[E]));break;case"stroke-opacity":Z("/CA "+B(m[E]))}Z(">>"),Z("endobj")},Ou=function(){var m;for(m in nr)nr.hasOwnProperty(m)&&so(nr[m])},aa=function(){for(var m in Z("/XObject <<"),hr)hr.hasOwnProperty(m)&&hr[m].objectNumber>=0&&Z("/"+m+" "+hr[m].objectNumber+" 0 R");Ot.publish("putXobjectDict"),Z(">>")},Iu=function(){Gr.oid=fr(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Gr.v),Z("/R "+Gr.r),Z("/U <"+Gr.toHexString(Gr.U)+">"),Z("/O <"+Gr.toHexString(Gr.O)+">"),Z("/P "+Gr.P),Z(">>"),Z("endobj")},io=function(){for(var m in Z("/Font <<"),Mt)Mt.hasOwnProperty(m)&&(g===!1||g===!0&&y.hasOwnProperty(m))&&Z("/"+m+" "+Mt[m].objectNumber+" 0 R");Z(">>")},Ko=function(){if(Object.keys(Tt).length>0){for(var m in Z("/Shading <<"),Tt)Tt.hasOwnProperty(m)&&Tt[m]instanceof Ao&&Tt[m].objectNumber>=0&&Z("/"+m+" "+Tt[m].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),Z(">>")}},Pi=function(m){if(Object.keys(Tt).length>0){for(var E in Z("/Pattern <<"),Tt)Tt.hasOwnProperty(E)&&Tt[E]instanceof p.TilingPattern&&Tt[E].objectNumber>=0&&Tt[E].objectNumber<m&&Z("/"+E+" "+Tt[E].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),Z(">>")}},Zo=function(){if(Object.keys(nr).length>0){var m;for(m in Z("/ExtGState <<"),nr)nr.hasOwnProperty(m)&&nr[m].objectNumber>=0&&Z("/"+m+" "+nr[m].objectNumber+" 0 R");Ot.publish("putGStateDict"),Z(">>")}},mr=function(m){en(m.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),io(),Ko(),Pi(m.objectOid),Zo(),aa(),Z(">>"),Z("endobj")},Xo=function(){var m=[];Bs(),Ou(),Ai(),$s(m),Ot.publish("putResources"),m.forEach(mr),mr({resourcesOid:kn,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources")},oa=function(){Ot.publish("putAdditionalObjects");for(var m=0;m<Se.length;m++){var E=Se[m];en(E.objId,!0),Z(E.content),Z("endobj")}Ot.publish("postPutAdditionalObjects")},la=function(m){Jt[m.fontName]=Jt[m.fontName]||{},Jt[m.fontName][m.fontStyle]=m.id},Ei=function(m,E,G,ie,me){var Ne={id:"F"+(Object.keys(Mt).length+1).toString(10),postScriptName:m,fontName:E,fontStyle:G,encoding:ie,isStandardFont:me||!1,metadata:{}};return Ot.publish("addFont",{font:Ne,instance:this}),Mt[Ne.id]=Ne,la(Ne),Ne.id},Qo=function(m){for(var E=0,G=Te.length;E<G;E++){var ie=Ei.call(this,m[E][0],m[E][1],m[E][2],Te[E][3],!0);g===!1&&(y[ie]=!0);var me=m[E][0].split("-");la({id:ie,fontName:me[0],fontStyle:me[1]||""})}Ot.publish("addFonts",{fonts:Mt,dictionary:Jt})},Rn=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(ie){var E=ie.stack||"";~E.indexOf(" at ")&&(E=E.split(" at ")[1]);var G="Error in function "+E.split(`
`)[0].split("<")[0]+": "+ie.message;if(!lt.console)throw new Error(G);lt.console.error(G,ie),lt.alert&&alert(G)}},m.foo.bar=m,m.foo},Qn=function(m,E){var G,ie,me,Ne,Ee,He,tt,bt,gt;if(me=(E=E||{}).sourceEncoding||"Unicode",Ee=E.outputEncoding,(E.autoencode||Ee)&&Mt[Nt].metadata&&Mt[Nt].metadata[me]&&Mt[Nt].metadata[me].encoding&&(Ne=Mt[Nt].metadata[me].encoding,!Ee&&Mt[Nt].encoding&&(Ee=Mt[Nt].encoding),!Ee&&Ne.codePages&&(Ee=Ne.codePages[0]),typeof Ee=="string"&&(Ee=Ne[Ee]),Ee)){for(tt=!1,He=[],G=0,ie=m.length;G<ie;G++)(bt=Ee[m.charCodeAt(G)])?He.push(String.fromCharCode(bt)):He.push(m[G]),He[G].charCodeAt(0)>>8&&(tt=!0);m=He.join("")}for(G=m.length;tt===void 0&&G!==0;)m.charCodeAt(G-1)>>8&&(tt=!0),G--;if(!tt)return m;for(He=E.noBOM?[]:[254,255],G=0,ie=m.length;G<ie;G++){if((gt=(bt=m.charCodeAt(G))>>8)>>8)throw new Error("Character at position "+G+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");He.push(gt),He.push(bt-(gt<<8))}return String.fromCharCode.apply(void 0,He)},ln=p.__private__.pdfEscape=p.pdfEscape=function(m,E){return Qn(m,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Li=p.__private__.beginPage=function(m){Pe[++sr]=[],ut[sr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},el(sr),we(Pe[$])},Ti=function(m,E){var G,ie,me;switch(r=E||r,typeof m=="string"&&(G=x(m.toLowerCase()),Array.isArray(G)&&(ie=G[0],me=G[1])),Array.isArray(m)&&(ie=m[0]*Re,me=m[1]*Re),isNaN(ie)&&(ie=s[0],me=s[1]),(ie>14400||me>14400)&&(Zt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),me=Math.min(14400,me)),s=[ie,me],r.substr(0,1)){case"l":me>ie&&(s=[me,ie]);break;case"p":ie>me&&(s=[me,ie])}Li(s),S(ws),Z(De),Ht!==0&&Z(Ht+" J"),un!==0&&Z(un+" j"),Ot.publish("addPage",{pageNumber:sr})},Du=function(m){m>0&&m<=sr&&(Pe.splice(m,1),ut.splice(m,1),sr--,$>sr&&($=sr),this.setPage($))},el=function(m){m>0&&m<=sr&&($=m)},Fu=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Pe.length-1},tl=function(m,E,G){var ie,me=void 0;return G=G||{},m=m!==void 0?m:Mt[Nt].fontName,E=E!==void 0?E:Mt[Nt].fontStyle,ie=m.toLowerCase(),Jt[ie]!==void 0&&Jt[ie][E]!==void 0?me=Jt[ie][E]:Jt[m]!==void 0&&Jt[m][E]!==void 0?me=Jt[m][E]:G.disableWarning===!1&&Zt.warn("Unable to look up font label for font '"+m+"', '"+E+"'. Refer to getFontList() for available fonts."),me||G.noFallback||(me=Jt.times[E])==null&&(me=Jt.times.normal),me},Mu=p.__private__.putInfo=function(){var m=fr(),E=function(ie){return ie};for(var G in f!==null&&(E=Gr.encryptor(m,0)),Z("<<"),Z("/Producer ("+ln(E("jsPDF "+ot.version))+")"),at)at.hasOwnProperty(G)&&at[G]&&Z("/"+G.substr(0,1).toUpperCase()+G.substr(1)+" ("+ln(E(at[G]))+")");Z("/CreationDate ("+ln(E(ee))+")"),Z(">>"),Z("endobj")},ao=p.__private__.putCatalog=function(m){var E=(m=m||{}).rootDictionaryObjId||Us;switch(fr(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+E+" 0 R"),ze||(ze="fullwidth"),ze){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var G=""+ze;G.substr(G.length-1)==="%"&&(ze=parseInt(ze)/100),typeof ze=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+B(ze)+"]")}switch(_t||(_t="continuous"),_t){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ht&&Z("/PageMode /"+ht),Ot.publish("putCatalog"),Z(">>"),Z("endobj")},Ru=p.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(ae+1)),Z("/Root "+ae+" 0 R"),Z("/Info "+(ae-1)+" 0 R"),f!==null&&Z("/Encrypt "+Gr.oid+" 0 R"),Z("/ID [ <"+Q+"> <"+Q+"> ]"),Z(">>")},Uu=p.__private__.putHeader=function(){Z("%PDF-"+k),Z("%")},rl=p.__private__.putXRef=function(){var m="0000000000";Z("xref"),Z("0 "+(ae+1)),Z("0000000000 65535 f ");for(var E=1;E<=ae;E++)typeof pe[E]=="function"?Z((m+pe[E]()).slice(-10)+" 00000 n "):pe[E]!==void 0?Z((m+pe[E]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},zs=p.__private__.buildDocument=function(){et(),we(J),Ot.publish("buildDocument"),Uu(),Mn(),oa(),Xo(),f!==null&&Iu(),Mu(),ao();var m=ge;return rl(),Ru(),Z("startxref"),Z(""+m),Z("%%EOF"),we(Pe[$]),J.join(`
`)},ua=p.__private__.getBlob=function(m){return new Blob([Xe(m)],{type:"application/pdf"})},ca=p.output=p.__private__.output=Rn(function(m,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",m){case void 0:return zs();case"save":p.save(E.filename);break;case"arraybuffer":return Xe(zs());case"blob":return ua(zs());case"bloburi":case"bloburl":if(lt.URL!==void 0&&typeof lt.URL.createObjectURL=="function")return lt.URL&&lt.URL.createObjectURL(ua(zs()))||void 0;Zt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var G="",ie=zs();try{G=wp(ie)}catch{G=wp(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+E.filename+";base64,"+G;case"pdfobjectnewwindow":if(Object.prototype.toString.call(lt)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(me=E.pdfObjectUrl,Ne="");var Ee='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",He=lt.open();return He!==null&&He.document.write(Ee),He}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(lt)==="[object Window]"){var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',bt=lt.open();if(bt!==null){bt.document.write(tt);var gt=this;bt.document.documentElement.querySelector("#pdfViewer").onload=function(){bt.document.title=E.filename,bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gt.output("bloburl"))}}return bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(lt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',pr=lt.open();if(pr!==null&&(pr.document.write(Lt),pr.document.title=E.filename),pr||typeof safari>"u")return pr;break;case"datauri":case"dataurl":return lt.document.location.href=this.output("datauristring",E);default:return null}}),nl=function(m){return Array.isArray(Fn)===!0&&Fn.indexOf(m)>-1};switch(n){case"pt":Re=1;break;case"mm":Re=72/25.4;break;case"cm":Re=72/2.54;break;case"in":Re=72;break;case"px":Re=nl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Re=12;break;case"ex":Re=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Re=n}var Gr=null;xe(),H();var Bu=function(m){return f!==null?Gr.encryptor(m,0):function(E){return E}},sl=p.__private__.getPageInfo=p.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[m].objId,pageNumber:m,pageContext:ut[m]}},ct=p.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in ut)if(ut[E].objId===m)break;return sl(E)},oo=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ut[$].objId,pageNumber:$,pageContext:ut[$]}};p.addPage=function(){return Ti.apply(this,arguments),this},p.setPage=function(){return el.apply(this,arguments),we.call(this,Pe[$]),this},p.insertPage=function(m){return this.addPage(),this.movePage($,m),this},p.movePage=function(m,E){var G,ie;if(m>E){G=Pe[m],ie=ut[m];for(var me=m;me>E;me--)Pe[me]=Pe[me-1],ut[me]=ut[me-1];Pe[E]=G,ut[E]=ie,this.setPage(E)}else if(m<E){G=Pe[m],ie=ut[m];for(var Ne=m;Ne<E;Ne++)Pe[Ne]=Pe[Ne+1],ut[Ne]=ut[Ne+1];Pe[E]=G,ut[E]=ie,this.setPage(E)}return this},p.deletePage=function(){return Du.apply(this,arguments),this},p.__private__.text=p.text=function(m,E,G,ie,me){var Ne,Ee,He,tt,bt,gt,Lt,pr,br,Dr=(ie=ie||{}).scope||this;if(typeof m=="number"&&typeof E=="number"&&(typeof G=="string"||Array.isArray(G))){var cn=G;G=E,E=m,m=cn}if(arguments[3]instanceof rt?(P("The transform parameter of text() with a Matrix value"),br=me):(He=arguments[4],tt=arguments[5],zt(Lt=arguments[3])==="object"&&Lt!==null||(typeof He=="string"&&(tt=He,He=null),typeof Lt=="string"&&(tt=Lt,Lt=null),typeof Lt=="number"&&(He=Lt,Lt=null),ie={flags:Lt,angle:He,align:tt})),isNaN(E)||isNaN(G)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return Dr;var Yr="",qs=!1,rs=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:mi,pi=Dr.internal.scaleFactor;function vd(Qt){return Qt=Qt.split("	").join(Array(ie.TabLen||9).join(" ")),ln(Qt,Lt)}function qu(Qt){for(var er,Cr=Qt.concat(),qr=[],$i=Cr.length;$i--;)typeof(er=Cr.shift())=="string"?qr.push(er):Array.isArray(Qt)&&(er.length===1||er[1]===void 0&&er[2]===void 0)?qr.push(er[0]):qr.push([er[0],er[1],er[2]]);return qr}function Wu(Qt,er){var Cr;if(typeof Qt=="string")Cr=er(Qt)[0];else if(Array.isArray(Qt)){for(var qr,$i,Xu=Qt.concat(),bl=[],Nd=Xu.length;Nd--;)typeof(qr=Xu.shift())=="string"?bl.push(er(qr)[0]):Array.isArray(qr)&&typeof qr[0]=="string"&&($i=er(qr[0],qr[1],qr[2]),bl.push([$i[0],$i[1],$i[2]]));Cr=bl}return Cr}var dl=!1,Vu=!0;if(typeof m=="string")dl=!0;else if(Array.isArray(m)){var Hu=m.concat();Ee=[];for(var hl,rn=Hu.length;rn--;)(typeof(hl=Hu.shift())!="string"||Array.isArray(hl)&&typeof hl[0]!="string")&&(Vu=!1);dl=Vu}if(dl===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var fl=Me/Dr.internal.scaleFactor,ml=fl*(rs-1);switch(ie.baseline){case"bottom":G-=ml;break;case"top":G+=fl-ml;break;case"hanging":G+=fl-2*ml;break;case"middle":G+=fl/2-ml}if((gt=ie.maxWidth||0)>0&&(typeof m=="string"?m=Dr.splitTextToSize(m,gt):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Qt,er){return Qt.concat(Dr.splitTextToSize(er,gt))},[]))),Ne={text:m,x:E,y:G,options:ie,mutex:{pdfEscape:ln,activeFontKey:Nt,fonts:Mt,activeFontSize:Me}},Ot.publish("preProcessText",Ne),m=Ne.text,He=(ie=Ne.options).angle,!(br instanceof rt)&&He&&typeof He=="number"){He*=Math.PI/180,ie.rotationDirection===0&&(He=-He),_===b.ADVANCED&&(He=-He);var pl=Math.cos(He),Gu=Math.sin(He);br=new rt(pl,Gu,-Gu,pl,0,0)}else He&&He instanceof rt&&(br=He);_!==b.ADVANCED||br||(br=Tr),(bt=ie.charSpace||Et)!==void 0&&(Yr+=j(O(bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pr=ie.horizontalScale)!==void 0&&(Yr+=j(100*pr)+` Tz
`),ie.lang;var Bn=-1,Jf=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,Yu=Dr.internal.getCurrentPageInfo().pageContext;switch(Jf){case 0:case!1:case"fill":Bn=0;break;case 1:case!0:case"stroke":Bn=1;break;case 2:case"fillThenStroke":Bn=2;break;case 3:case"invisible":Bn=3;break;case 4:case"fillAndAddForClipping":Bn=4;break;case 5:case"strokeAndAddPathForClipping":Bn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bn=6;break;case 7:case"addToPathForClipping":Bn=7}var yd=Yu.usedRenderingMode!==void 0?Yu.usedRenderingMode:-1;Bn!==-1?Yr+=Bn+` Tr
`:yd!==-1&&(Yr+=`0 Tr
`),Bn!==-1&&(Yu.usedRenderingMode=Bn),tt=ie.align||"left";var Ns,gl=Me*rs,xd=Dr.internal.pageSize.getWidth(),bd=Mt[Nt];bt=ie.charSpace||Et,gt=ie.maxWidth||0,Lt=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var ha=[],ho=function(Qt){return Dr.getStringUnitWidth(Qt,{font:bd,charSpace:bt,fontSize:Me,doKerning:!1})*Me/pi};if(Object.prototype.toString.call(m)==="[object Array]"){var $n;Ee=qu(m),tt!=="left"&&(Ns=Ee.map(ho));var Cn,fa=0;if(tt==="right"){E-=Ns[0],m=[],rn=Ee.length;for(var Ri=0;Ri<rn;Ri++)Ri===0?(Cn=_e(E),$n=Ve(G)):(Cn=O(fa-Ns[Ri]),$n=-gl),m.push([Ee[Ri],Cn,$n]),fa=Ns[Ri]}else if(tt==="center"){E-=Ns[0]/2,m=[],rn=Ee.length;for(var Ui=0;Ui<rn;Ui++)Ui===0?(Cn=_e(E),$n=Ve(G)):(Cn=O((fa-Ns[Ui])/2),$n=-gl),m.push([Ee[Ui],Cn,$n]),fa=Ns[Ui]}else if(tt==="left"){m=[],rn=Ee.length;for(var vl=0;vl<rn;vl++)m.push(Ee[vl])}else if(tt==="justify"&&bd.encoding==="Identity-H"){m=[],rn=Ee.length,gt=gt!==0?gt:xd;for(var Bi=0,jr=0;jr<rn;jr++)if($n=jr===0?Ve(G):-gl,Cn=jr===0?_e(E):Bi,jr<rn-1){var Ju=O((gt-Ns[jr])/(Ee[jr].split(" ").length-1)),An=Ee[jr].split(" ");m.push([An[0]+" ",Cn,$n]),Bi=0;for(var _s=1;_s<An.length;_s++){var yl=(ho(An[_s-1]+" "+An[_s])-ho(An[_s]))*pi+Ju;_s==An.length-1?m.push([An[_s],yl,0]):m.push([An[_s]+" ",yl,0]),Bi-=yl}}else m.push([Ee[jr],Cn,$n]);m.push(["",Bi,0])}else{if(tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],rn=Ee.length,gt=gt!==0?gt:xd,jr=0;jr<rn;jr++)$n=jr===0?Ve(G):-gl,Cn=jr===0?_e(E):0,jr<rn-1?ha.push(j(O((gt-Ns[jr])/(Ee[jr].split(" ").length-1)))):ha.push(0),m.push([Ee[jr],Cn,$n])}}var wd=typeof ie.R2L=="boolean"?ie.R2L:We;wd===!0&&(m=Wu(m,function(Qt,er,Cr){return[Qt.split("").reverse().join(""),er,Cr]})),Ne={text:m,x:E,y:G,options:ie,mutex:{pdfEscape:ln,activeFontKey:Nt,fonts:Mt,activeFontSize:Me}},Ot.publish("postProcessText",Ne),m=Ne.text,qs=Ne.mutex.isHex||!1;var Ku=Mt[Nt].encoding;Ku!=="WinAnsiEncoding"&&Ku!=="StandardEncoding"||(m=Wu(m,function(Qt,er,Cr){return[vd(Qt),er,Cr]})),Ee=qu(m),m=[];for(var fo,mo,ma,po=0,xl=1,go=Array.isArray(Ee[0])?xl:po,pa="",Zu=function(Qt,er,Cr){var qr="";return Cr instanceof rt?(Cr=typeof ie.angle=="number"?Sn(Cr,new rt(1,0,0,1,Qt,er)):Sn(new rt(1,0,0,1,Qt,er),Cr),_===b.ADVANCED&&(Cr=Sn(new rt(1,0,0,-1,0,0),Cr)),qr=Cr.join(" ")+` Tm
`):qr=j(Qt)+" "+j(er)+` Td
`,qr},Ss=0;Ss<Ee.length;Ss++){switch(pa="",go){case xl:ma=(qs?"<":"(")+Ee[Ss][0]+(qs?">":")"),fo=parseFloat(Ee[Ss][1]),mo=parseFloat(Ee[Ss][2]);break;case po:ma=(qs?"<":"(")+Ee[Ss]+(qs?">":")"),fo=_e(E),mo=Ve(G)}ha!==void 0&&ha[Ss]!==void 0&&(pa=ha[Ss]+` Tw
`),Ss===0?m.push(pa+Zu(fo,mo,br)+ma):go===po?m.push(pa+ma):go===xl&&m.push(pa+Zu(fo,mo,br)+ma)}m=go===po?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var ks=`BT
/`;return ks+=Nt+" "+Me+` Tf
`,ks+=j(Me*rs)+` TL
`,ks+=Je+`
`,ks+=Yr,ks+=m,Z(ks+="ET"),y[Nt]=!0,Dr};var il=p.__private__.clip=p.clip=function(m){return Z(m==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return il("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Z("n"),this};var es=p.__private__.isValidStyle=function(m){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(E=!0),E};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(m){return es(m)&&(d=m),this};var al=p.__private__.getStyle=p.getStyle=function(m){var E=d;switch(m){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=m}return E},ol=p.close=function(){return Z("h"),this};p.stroke=function(){return Z("S"),this},p.fill=function(m){return lo("f",m),this},p.fillEvenOdd=function(m){return lo("f*",m),this},p.fillStroke=function(m){return lo("B",m),this},p.fillStrokeEvenOdd=function(m){return lo("B*",m),this};var lo=function(m,E){zt(E)==="object"?ul(E,m):Z(m)},ll=function(m){m===null||_===b.ADVANCED&&m===void 0||(m=al(m),Z(m))};function $u(m,E,G,ie,me){var Ne=new Ql(E||this.boundingBox,G||this.xStep,ie||this.yStep,this.gState,me||this.matrix);Ne.stream=this.stream;var Ee=m+"$$"+this.cloneIndex+++"$$";return Or(Ee,Ne),Ne}var ul=function(m,E){var G=ci[m.key],ie=Tt[G];if(ie instanceof Ao)Z("q"),Z(da(E)),ie.gState&&p.setGState(ie.gState),Z(m.matrix.toString()+" cm"),Z("/"+G+" sh"),Z("Q");else if(ie instanceof Ql){var me=new rt(1,0,0,-1,0,cr());m.matrix&&(me=me.multiply(m.matrix||Tr),G=$u.call(ie,m.key,m.boundingBox,m.xStep,m.yStep,me).id),Z("q"),Z("/Pattern cs"),Z("/"+G+" scn"),ie.gState&&p.setGState(ie.gState),Z(E),Z("Q")}},da=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Oi=p.moveTo=function(m,E){return Z(j(O(m))+" "+j(q(E))+" m"),this},Ii=p.lineTo=function(m,E){return Z(j(O(m))+" "+j(q(E))+" l"),this},fi=p.curveTo=function(m,E,G,ie,me,Ne){return Z([j(O(m)),j(q(E)),j(O(G)),j(q(ie)),j(O(me)),j(q(Ne)),"c"].join(" ")),this};p.__private__.line=p.line=function(m,E,G,ie,me){if(isNaN(m)||isNaN(E)||isNaN(G)||isNaN(ie)||!es(me))throw new Error("Invalid arguments passed to jsPDF.line");return _===b.COMPAT?this.lines([[G-m,ie-E]],m,E,[1,1],me||"S"):this.lines([[G-m,ie-E]],m,E,[1,1]).stroke()},p.__private__.lines=p.lines=function(m,E,G,ie,me,Ne){var Ee,He,tt,bt,gt,Lt,pr,br,Dr,cn,Yr,qs;if(typeof m=="number"&&(qs=G,G=E,E=m,m=qs),ie=ie||[1,1],Ne=Ne||!1,isNaN(E)||isNaN(G)||!Array.isArray(m)||!Array.isArray(ie)||!es(me)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Oi(E,G),Ee=ie[0],He=ie[1],bt=m.length,cn=E,Yr=G,tt=0;tt<bt;tt++)(gt=m[tt]).length===2?(cn=gt[0]*Ee+cn,Yr=gt[1]*He+Yr,Ii(cn,Yr)):(Lt=gt[0]*Ee+cn,pr=gt[1]*He+Yr,br=gt[2]*Ee+cn,Dr=gt[3]*He+Yr,cn=gt[4]*Ee+cn,Yr=gt[5]*He+Yr,fi(Lt,pr,br,Dr,cn,Yr));return Ne&&ol(),ll(me),this},p.path=function(m){for(var E=0;E<m.length;E++){var G=m[E],ie=G.c;switch(G.op){case"m":Oi(ie[0],ie[1]);break;case"l":Ii(ie[0],ie[1]);break;case"c":fi.apply(this,ie);break;case"h":ol()}}return this},p.__private__.rect=p.rect=function(m,E,G,ie,me){if(isNaN(m)||isNaN(E)||isNaN(G)||isNaN(ie)||!es(me))throw new Error("Invalid arguments passed to jsPDF.rect");return _===b.COMPAT&&(ie=-ie),Z([j(O(m)),j(q(E)),j(O(G)),j(O(ie)),"re"].join(" ")),ll(me),this},p.__private__.triangle=p.triangle=function(m,E,G,ie,me,Ne,Ee){if(isNaN(m)||isNaN(E)||isNaN(G)||isNaN(ie)||isNaN(me)||isNaN(Ne)||!es(Ee))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[G-m,ie-E],[me-G,Ne-ie],[m-me,E-Ne]],m,E,[1,1],Ee,!0),this},p.__private__.roundedRect=p.roundedRect=function(m,E,G,ie,me,Ne,Ee){if(isNaN(m)||isNaN(E)||isNaN(G)||isNaN(ie)||isNaN(me)||isNaN(Ne)||!es(Ee))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var He=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*G),Ne=Math.min(Ne,.5*ie),this.lines([[G-2*me,0],[me*He,0,me,Ne-Ne*He,me,Ne],[0,ie-2*Ne],[0,Ne*He,-me*He,Ne,-me,Ne],[2*me-G,0],[-me*He,0,-me,-Ne*He,-me,-Ne],[0,2*Ne-ie],[0,-Ne*He,me*He,-Ne,me,-Ne]],m+me,E,[1,1],Ee,!0),this},p.__private__.ellipse=p.ellipse=function(m,E,G,ie,me){if(isNaN(m)||isNaN(E)||isNaN(G)||isNaN(ie)||!es(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*G,Ee=4/3*(Math.SQRT2-1)*ie;return Oi(m+G,E),fi(m+G,E-Ee,m+Ne,E-ie,m,E-ie),fi(m-Ne,E-ie,m-G,E-Ee,m-G,E),fi(m-G,E+Ee,m-Ne,E+ie,m,E+ie),fi(m+Ne,E+ie,m+G,E+Ee,m+G,E),ll(me),this},p.__private__.circle=p.circle=function(m,E,G,ie){if(isNaN(m)||isNaN(E)||isNaN(G)||!es(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,E,G,G,ie)},p.setFont=function(m,E,G){return G&&(E=K(E,G)),Nt=tl(m,E,{disableWarning:!1}),this};var ts=p.__private__.getFont=p.getFont=function(){return Mt[tl.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var m,E,G={};for(m in Jt)if(Jt.hasOwnProperty(m))for(E in G[m]=[],Jt[m])Jt[m].hasOwnProperty(E)&&G[m].push(E);return G},p.addFont=function(m,E,G,ie,me){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(G=K(G,ie)),me=me||"Identity-H",Ei.call(this,m,E,G,me)};var mi,ws=t.lineWidth||.200025,Di=p.__private__.getLineWidth=p.getLineWidth=function(){return ws},S=p.__private__.setLineWidth=p.setLineWidth=function(m){return ws=m,Z(j(O(m))+" w"),this};p.__private__.setLineDash=ot.API.setLineDash=ot.API.setLineDashPattern=function(m,E){if(m=m||[],E=E||0,isNaN(E)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(G){return j(O(G))}).join(" "),E=j(O(E)),Z("["+m+"] "+E+" d"),this};var te=p.__private__.getLineHeight=p.getLineHeight=function(){return Me*mi};p.__private__.getLineHeight=p.getLineHeight=function(){return Me*mi};var se=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(mi=m),this},fe=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return mi};se(t.lineHeight);var _e=p.__private__.getHorizontalCoordinate=function(m){return O(m)},Ve=p.__private__.getVerticalCoordinate=function(m){return _===b.ADVANCED?m:ut[$].mediaBox.topRightY-ut[$].mediaBox.bottomLeftY-O(m)},Ge=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(m){return j(_e(m))},Be=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(m){return j(Ve(m))},De=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ir(De)},p.__private__.setStrokeColor=p.setDrawColor=function(m,E,G,ie){return De=jn({ch1:m,ch2:E,ch3:G,ch4:ie,pdfColorType:"draw",precision:2}),Z(De),this};var Qe=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ir(Qe)},p.__private__.setFillColor=p.setFillColor=function(m,E,G,ie){return Qe=jn({ch1:m,ch2:E,ch3:G,ch4:ie,pdfColorType:"fill",precision:2}),Z(Qe),this};var Je=t.textColor||"0 g",Pt=p.__private__.getTextColor=p.getTextColor=function(){return Ir(Je)};p.__private__.setTextColor=p.setTextColor=function(m,E,G,ie){return Je=jn({ch1:m,ch2:E,ch3:G,ch4:ie,pdfColorType:"text",precision:3}),this};var Et=t.charSpace,xr=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Et||0)};p.__private__.setCharSpace=p.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Et=m,this};var Ht=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(m){var E=p.CapJoinStyles[m];if(E===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ht=E,Z(E+" J"),this};var un=0;p.__private__.setLineJoin=p.setLineJoin=function(m){var E=p.CapJoinStyles[m];if(E===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return un=E,Z(E+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(j(O(m))+" M"),this},p.GState=ff,p.setGState=function(m){(m=typeof m=="string"?nr[Dn[m]]:uo(null,m)).equals(vs)||(Z("/"+m.id+" gs"),vs=m)};var uo=function(m,E){if(!m||!Dn[m]){var G=!1;for(var ie in nr)if(nr.hasOwnProperty(ie)&&nr[ie].equals(E)){G=!0;break}if(G)E=nr[ie];else{var me="GS"+(Object.keys(nr).length+1).toString(10);nr[me]=E,E.id=me}return m&&(Dn[m]=E.id),Ot.publish("addGState",E),E}};p.addGState=function(m,E){return uo(m,E),this},p.saveGraphicsState=function(){return Z("q"),Xn.push({key:Nt,size:Me,color:Je}),this},p.restoreGraphicsState=function(){Z("Q");var m=Xn.pop();return Nt=m.key,Me=m.size,Je=m.color,vs=null,this},p.setCurrentTransformationMatrix=function(m){return Z(m.toString()+" cm"),this},p.comment=function(m){return Z("#"+m),this};var Fi=function(m,E){var G=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return G},set:function(Ne){isNaN(Ne)||(G=parseFloat(Ne))}});var ie=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(Ne){isNaN(Ne)||(ie=parseFloat(Ne))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(Ne){me=Ne.toString()}}),this},Mi=function(m,E,G,ie){Fi.call(this,m,E),this.type="rect";var me=G||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Ee){isNaN(Ee)||(me=parseFloat(Ee))}});var Ne=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Ee){isNaN(Ee)||(Ne=parseFloat(Ee))}}),this},co=function(){this.page=sr,this.currentPage=$,this.pages=Pe.slice(0),this.pagesContext=ut.slice(0),this.x=zr,this.y=kt,this.matrix=Yt,this.width=pt($),this.height=cr($),this.outputDestination=Fe,this.id="",this.objectNumber=-1};co.prototype.restore=function(){sr=this.page,$=this.currentPage,ut=this.pagesContext,Pe=this.pages,zr=this.x,kt=this.y,Yt=this.matrix,ur($,this.width),Un($,this.height),Fe=this.outputDestination};var zu=function(m,E,G,ie,me){_n.push(new co),sr=$=0,Pe=[],zr=m,kt=E,Yt=me,Li([G,ie])},cl=function(m){if(Nn[m])_n.pop().restore();else{var E=new co,G="Xo"+(Object.keys(hr).length+1).toString(10);E.id=G,Nn[m]=G,hr[G]=E,Ot.publish("addFormObject",E),_n.pop().restore()}};for(var Rt in p.beginFormObject=function(m,E,G,ie,me){return zu(m,E,G,ie,me),this},p.endFormObject=function(m){return cl(m),this},p.doFormObject=function(m,E){var G=hr[Nn[m]];return Z("q"),Z(E.toString()+" cm"),Z("/"+G.id+" Do"),Z("Q"),this},p.getFormObject=function(m){var E=hr[Nn[m]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},p.save=function(m,E){return m=m||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(ko(ua(zs()),m),typeof ko.unload=="function"&&lt.setTimeout&&setTimeout(ko.unload,911),this):new Promise(function(G,ie){try{var me=ko(ua(zs()),m);typeof ko.unload=="function"&&lt.setTimeout&&setTimeout(ko.unload,911),G(me)}catch(Ne){ie(Ne.message)}})},ot.API)ot.API.hasOwnProperty(Rt)&&(Rt==="events"&&ot.API.events.length?function(m,E){var G,ie,me;for(me=E.length-1;me!==-1;me--)G=E[me][0],ie=E[me][1],m.subscribe.apply(m,[G].concat(typeof ie=="function"?[ie]:ie))}(Ot,ot.API.events):p[Rt]=ot.API[Rt]);var pt=p.getPageWidth=function(m){return(ut[m=m||$].mediaBox.topRightX-ut[m].mediaBox.bottomLeftX)/Re},ur=p.setPageWidth=function(m,E){ut[m].mediaBox.topRightX=E*Re+ut[m].mediaBox.bottomLeftX},cr=p.getPageHeight=function(m){return(ut[m=m||$].mediaBox.topRightY-ut[m].mediaBox.bottomLeftY)/Re},Un=p.setPageHeight=function(m,E){ut[m].mediaBox.topRightY=E*Re+ut[m].mediaBox.bottomLeftY};return p.internal={pdfEscape:ln,getStyle:al,getFont:ts,getFontSize:Ie,getCharSpace:xr,getTextColor:Pt,getLineHeight:te,getLineHeightFactor:fe,getLineWidth:Di,write:mt,getHorizontalCoordinate:_e,getVerticalCoordinate:Ve,getCoordinateString:Ge,getVerticalCoordinateString:Be,collections:{},newObject:fr,newAdditionalObject:di,newObjectDeferred:lr,newObjectDeferredBegin:en,getFilters:ys,putStream:tn,events:Ot,scaleFactor:Re,pageSize:{getWidth:function(){return pt($)},setWidth:function(m){ur($,m)},getHeight:function(){return cr($)},setHeight:function(m){Un($,m)}},encryptionOptions:f,encryption:Gr,getEncryptor:Bu,output:ca,getNumberOfPages:Fu,pages:Pe,out:Z,f2:B,f3:A,getPageInfo:sl,getPageInfoByObjId:ct,getCurrentPageInfo:oo,getPDFVersion:N,Point:Fi,Rectangle:Mi,Matrix:rt,hasHotfix:nl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return pt($)},set:function(m){ur($,m)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return cr($)},set:function(m){Un($,m)},enumerable:!0,configurable:!0}),Qo.call(p,Te),Nt="F1",Ti(s,r),Ot.publish("initialized"),p}Ul.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ul.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ul.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ul.prototype.processOwnerPassword=function(t,e){return _p(Np(e).substr(0,5),t)},Ul.prototype.encryptor=function(t,e){var r=Np(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return _p(r,n)}},ff.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||zt(t)!==zt(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ot.API={events:[]},ot.version="2.5.2";var _r=ot.API,zg=1,Ho=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tl=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(t){return t.toFixed(2)},ja=function(t){return t.toFixed(5)};_r.__acroform__={};var Zn=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},uv=function(t){return t*zg},yi=function(t){var e=new K5,r=Ze.internal.getHeight(t)||0,n=Ze.internal.getWidth(t)||0;return e.BBox=[0,0,Number(vt(n)),Number(vt(r))],e},kk=_r.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},jk=_r.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Ck=_r.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Pr=_r.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ck(t,e-1)},Er=_r.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kk(t,e-1)},Lr=_r.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jk(t,e-1)},Ak=_r.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],u={};return u.lowerLeft_X=r(s)||0,u.lowerLeft_Y=n(i+o)||0,u.upperRight_X=r(s+a)||0,u.upperRight_Y=n(i)||0,[Number(vt(u.lowerLeft_X)),Number(vt(u.lowerLeft_Y)),Number(vt(u.upperRight_X)),Number(vt(u.upperRight_Y))]},Pk=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Sp(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+vt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=yi(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},Sp=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(A){return A.split(`
`)}):s.map(function(A){return[A]});var i=r,a=Ze.internal.getHeight(t)||0;a=a<0?-a:a;var o=Ze.internal.getWidth(t)||0;o=o<0?-o:o;var u=function(A,O,z){if(A+1<s.length){var q=O+" "+s[A+1][0];return ch(q,t,z).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var d,f,g=ch("3",t,i).height,y=t.multiline?a-i:(a-g)/2,p=y+=2,k=0,N=0,C=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+ch(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var x="",b=0,_=0;_<s.length;_++)if(s.hasOwnProperty(_)){var R=!1;if(s[_].length!==1&&C!==s[_].length-1){if((g+2)*(b+2)+2>a)continue e;x+=s[_][C],R=!0,N=_,_--}else{x=(x+=s[_][C]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var W=parseInt(_),K=u(W,x,i),j=_>=s.length-1;if(K&&!j){x+=" ",C=0;continue}if(K||j){if(j)N=W;else if(t.multiline&&(g+2)*(b+2)+2>a)continue e}else{if(!t.multiline||(g+2)*(b+2)+2>a)continue e;N=W}}for(var P="",F=k;F<=N;F++){var B=s[F];if(t.multiline){if(F===N){P+=B[C]+" ",C=(C+1)%B.length;continue}if(F===k){P+=B[B.length-1]+" ";continue}}P+=B[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,f=ch(P,t,i).width,t.textAlign){case"right":d=o-f-2;break;case"center":d=(o-f)/2;break;case"left":default:d=2}e+=vt(d)+" "+vt(p)+` Td
`,e+="("+Ho(P)+`) Tj
`,e+=-vt(d)+` 0 Td
`,p=-(i+2),f=0,k=R?N:N+1,b++,x=""}break}return n.text=e,n.fontSize=i,n},ch=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Ek={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lk=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Tk=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),zt(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Ok=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(li.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Ek)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zg=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Z5,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Lk(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],u=[],d=o.Rect;if(o.Rect&&(o.Rect=Ak(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ze.createDefaultAppearanceStream(o),zt(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(u=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=Pk(o);u.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var g="";for(var y in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(y)){var p=o.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var k=p[a];typeof k=="function"&&(k=k.call(s,o)),g+="/"+a+" "+k+" ",s.internal.acroformPlugin.xForms.indexOf(k)>=0||s.internal.acroformPlugin.xForms.push(k)}}else typeof(k=p)=="function"&&(k=k.call(s,o)),g+="/"+a+" "+k,s.internal.acroformPlugin.xForms.indexOf(k)>=0||s.internal.acroformPlugin.xForms.push(k);g+=">>"}u.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:u,objectId:o.objId}),s.internal.out("endobj")}i&&Tk(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},J5=_r.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),zt(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Ho(n(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},e0=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ho(n(t))+")"},Ni=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ni.prototype.toString=function(){return this.objId+" 0 R"},Ni.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ni.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:J5(s,this.objId,this.scope)}):s instanceof Ni?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var K5=function(){Ni.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Zn(K5,Ni);var Z5=function(){Ni.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ho(r(t))+")"}},set:function(r){t=r}})};Zn(Z5,Ni);var li=function t(){Ni.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pr(e,3)},set:function(x){x?this.F=Er(e,3):this.F=Lr(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof mf)return;i="FieldObject"+t.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Ho(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/zg:d},set:function(x){d=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof mf||this instanceof Fo))return e0(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=x}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Xr?y:e0(y,this.objId,this.scope)},set:function(x){x=x.toString(),y=this instanceof Xr?x:x.substr(0,1)==="("?Tl(x.substr(1,x.length-2)):Tl(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Tl(y.substr(1,y.length-1)):y},set:function(x){x=x.toString(),y=this instanceof Xr?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Xr?p:e0(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof Xr?x:x.substr(0,1)==="("?Tl(x.substr(1,x.length-2)):Tl(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Tl(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Xr?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(x){x=!!x,N=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(x){k=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,1)},set:function(x){x?this.Ff=Er(this.Ff,1):this.Ff=Lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,2)},set:function(x){x?this.Ff=Er(this.Ff,2):this.Ff=Lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,3)},set:function(x){x?this.Ff=Er(this.Ff,3):this.Ff=Lr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');C=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(C){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};Zn(li,Ni);var lu=function(){li.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return J5(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var u,d=[];u=a.exec(i);)d.push(u[o]);return d}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,18)},set:function(r){r?this.Ff=Er(this.Ff,18):this.Ff=Lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Er(this.Ff,19):this.Ff=Lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,20)},set:function(r){r?(this.Ff=Er(this.Ff,20),e.sort()):this.Ff=Lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,22)},set:function(r){r?this.Ff=Er(this.Ff,22):this.Ff=Lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,23)},set:function(r){r?this.Ff=Er(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,27)},set:function(r){r?this.Ff=Er(this.Ff,27):this.Ff=Lr(this.Ff,27)}}),this.hasAppearanceStream=!1};Zn(lu,li);var uu=function(){lu.call(this),this.fontName="helvetica",this.combo=!1};Zn(uu,lu);var cu=function(){uu.call(this),this.combo=!0};Zn(cu,uu);var Lh=function(){cu.call(this),this.edit=!0};Zn(Lh,cu);var Xr=function(){li.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,15)},set:function(r){r?this.Ff=Er(this.Ff,15):this.Ff=Lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,16)},set:function(r){r?this.Ff=Er(this.Ff,16):this.Ff=Lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,17)},set:function(r){r?this.Ff=Er(this.Ff,17):this.Ff=Lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,26)},set:function(r){r?this.Ff=Er(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Ho(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){zt(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Zn(Xr,li);var Th=function(){Xr.call(this),this.pushButton=!0};Zn(Th,Xr);var du=function(){Xr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Zn(du,Xr);var mf=function(){var t,e;li.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Ho(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){zt(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zn(mf,li),du.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},du.prototype.createOption=function(t){var e=new mf;return e.Parent=this,e.optionName=t,this.Kids.push(e),Ik.call(this.scope,e),e};var Oh=function(){Xr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ze.CheckBox.createAppearanceStream()};Zn(Oh,Xr);var Fo=function(){li.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,13)},set:function(e){e?this.Ff=Er(this.Ff,13):this.Ff=Lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,21)},set:function(e){e?this.Ff=Er(this.Ff,21):this.Ff=Lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,23)},set:function(e){e?this.Ff=Er(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,24)},set:function(e){e?this.Ff=Er(this.Ff,24):this.Ff=Lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,25)},set:function(e){e?this.Ff=Er(this.Ff,25):this.Ff=Lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,26)},set:function(e){e?this.Ff=Er(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zn(Fo,li);var Ih=function(){Fo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pr(this.Ff,14)},set:function(t){t?this.Ff=Er(this.Ff,14):this.Ff=Lr(this.Ff,14)}}),this.password=!0};Zn(Ih,Fo);var Ze={CheckBox:{createAppearanceStream:function(){return{N:{On:Ze.CheckBox.YesNormal},D:{On:Ze.CheckBox.YesPushDown,Off:Ze.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=yi(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=Sp(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+vt(Ze.internal.getWidth(t))+" "+vt(Ze.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=yi(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=Ze.internal.getHeight(t),a=Ze.internal.getWidth(t),o=Sp(t,t.caption);return s.push("1 g"),s.push("0 0 "+vt(a)+" "+vt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+vt(a-1)+" "+vt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+vt(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=yi(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(Ze.internal.getWidth(t))+" "+vt(Ze.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ze.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ze.RadioButton.Circle.YesNormal,e.D[t]=Ze.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=yi(t);e.scope=t.scope;var r=[],n=Ze.internal.getWidth(t)<=Ze.internal.getHeight(t)?Ze.internal.getWidth(t)/4:Ze.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Ze.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ja(Ze.internal.getWidth(t)/2)+" "+ja(Ze.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=yi(t);e.scope=t.scope;var r=[],n=Ze.internal.getWidth(t)<=Ze.internal.getHeight(t)?Ze.internal.getWidth(t)/4:Ze.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Ze.internal.Bezier_C).toFixed(5)),a=Number((n*Ze.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ja(Ze.internal.getWidth(t)/2)+" "+ja(Ze.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ja(Ze.internal.getWidth(t)/2)+" "+ja(Ze.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=yi(t);e.scope=t.scope;var r=[],n=Ze.internal.getWidth(t)<=Ze.internal.getHeight(t)?Ze.internal.getWidth(t)/4:Ze.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Ze.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ja(Ze.internal.getWidth(t)/2)+" "+ja(Ze.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ze.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ze.RadioButton.Cross.YesNormal,e.D[t]=Ze.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=yi(t);e.scope=t.scope;var r=[],n=Ze.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+vt(Ze.internal.getWidth(t)-2)+" "+vt(Ze.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(vt(n.x1.x)+" "+vt(n.x1.y)+" m"),r.push(vt(n.x2.x)+" "+vt(n.x2.y)+" l"),r.push(vt(n.x4.x)+" "+vt(n.x4.y)+" m"),r.push(vt(n.x3.x)+" "+vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=yi(t);e.scope=t.scope;var r=Ze.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(Ze.internal.getWidth(t))+" "+vt(Ze.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vt(Ze.internal.getWidth(t)-2)+" "+vt(Ze.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(vt(r.x1.x)+" "+vt(r.x1.y)+" m"),n.push(vt(r.x2.x)+" "+vt(r.x2.y)+" l"),n.push(vt(r.x4.x)+" "+vt(r.x4.y)+" m"),n.push(vt(r.x3.x)+" "+vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=yi(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(Ze.internal.getWidth(t))+" "+vt(Ze.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Ze.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ze.internal.getWidth(t),r=Ze.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Ze.internal.getWidth=function(t){var e=0;return zt(t)==="object"&&(e=uv(t.Rect[2])),e},Ze.internal.getHeight=function(t){var e=0;return zt(t)==="object"&&(e=uv(t.Rect[3])),e};var Ik=_r.addField=function(t){if(Ok(this,t),!(t instanceof li))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};_r.AcroFormChoiceField=lu,_r.AcroFormListBox=uu,_r.AcroFormComboBox=cu,_r.AcroFormEditBox=Lh,_r.AcroFormButton=Xr,_r.AcroFormPushButton=Th,_r.AcroFormRadioButton=du,_r.AcroFormCheckBox=Oh,_r.AcroFormTextField=Fo,_r.AcroFormPasswordField=Ih,_r.AcroFormAppearance=Ze,_r.AcroForm={ChoiceField:lu,ListBox:uu,ComboBox:cu,EditBox:Lh,Button:Xr,PushButton:Th,RadioButton:du,CheckBox:Oh,TextField:Fo,PasswordField:Ih,Appearance:Ze},ot.AcroForm={ChoiceField:lu,ListBox:uu,ComboBox:cu,EditBox:Lh,Button:Xr,PushButton:Th,RadioButton:du,CheckBox:Oh,TextField:Fo,PasswordField:Ih,Appearance:Ze};ot.AcroForm;function X5(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(A,O){var z,q,ee,Q,de,H=e;if((O=O||e)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(K(A))for(de in r)for(ee=r[de],z=0;z<ee.length;z+=1){for(Q=!0,q=0;q<ee[z].length;q+=1)if(ee[z][q]!==void 0&&ee[z][q]!==A[q]){Q=!1;break}if(Q===!0){H=de;break}}else for(de in r)for(ee=r[de],z=0;z<ee.length;z+=1){for(Q=!0,q=0;q<ee[z].length;q+=1)if(ee[z][q]!==void 0&&ee[z][q]!==A.charCodeAt(q)){Q=!1;break}if(Q===!0){H=de;break}}return H===e&&O!==e&&(H=O),H},s=function A(O){for(var z=this.internal.write,q=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:O.width}),Q.push({key:"Height",value:O.height}),O.colorSpace===C.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===C.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var de="",H=0,oe=O.transparency.length;H<oe;H++)de+=O.transparency[H]+" "+O.transparency[H]+" ";Q.push({key:"Mask",value:"["+de+"]"})}O.sMask!==void 0&&Q.push({key:"SMask",value:O.objectId+1+" 0 R"});var ne=O.filter!==void 0?["/"+O.filter]:void 0;if(q({data:O.data,additionalKeyValues:Q,alreadyAppliedFilters:ne,objectId:O.objectId}),z("endobj"),"sMask"in O&&O.sMask!==void 0){var xe="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,L={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:xe,data:O.sMask};"filter"in O&&(L.filter=O.filter),A.call(this,L)}if(O.colorSpace===C.INDEXED){var $=this.internal.newObject();q({data:P(new Uint8Array(O.palette)),objectId:$}),z("endobj")}},i=function(){var A=this.internal.collections.addImage_images;for(var O in A)s.call(this,A[O])},a=function(){var A,O=this.internal.collections.addImage_images,z=this.internal.write;for(var q in O)z("/I"+(A=O[q]).index,A.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var A=this.internal.collections.addImage_images;return o.call(this),A},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(A){return typeof t["process"+A.toUpperCase()]=="function"},g=function(A){return zt(A)==="object"&&A.nodeType===1},y=function(A,O){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var z=""+A.getAttribute("src");if(z.indexOf("data:image/")===0)return Mc(unescape(z).split("base64,").pop());var q=t.loadFile(z,!0);if(q!==void 0)return q}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var ee;switch(O){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return Mc(A.toDataURL(ee,1).split("base64,").pop())}},p=function(A){var O=this.internal.collections.addImage_images;if(O){for(var z in O)if(A===O[z].alias)return O[z]}},k=function(A,O,z){return A||O||(A=-96,O=-96),A<0&&(A=-1*z.width*72/A/this.internal.scaleFactor),O<0&&(O=-1*z.height*72/O/this.internal.scaleFactor),A===0&&(A=O*z.width/z.height),O===0&&(O=A*z.height/z.width),[A,O]},N=function(A,O,z,q,ee,Q){var de=k.call(this,z,q,ee),H=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,ne=u.call(this);if(z=de[0],q=de[1],ne[ee.index]=ee,Q){Q*=Math.PI/180;var xe=Math.cos(Q),L=Math.sin(Q),$=function(X){return X.toFixed(4)},Y=[$(xe),$(L),$(-1*L),$(xe),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,H(A),oe(O+q),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([H(z),"0","0",H(q),"0","0","cm"].join(" "))):this.internal.write([H(z),"0","0",H(q),H(A),oe(O+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(A){var O,z,q=0;if(typeof A=="string")for(z=A.length,O=0;O<z;O++)q=(q<<5)-q+A.charCodeAt(O),q|=0;else if(K(A))for(z=A.byteLength/2,O=0;O<z;O++)q=(q<<5)-q+A[O],q|=0;return q},_=t.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var O=!0;return A.length===0&&(O=!1),A.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(O=!1),O},R=t.__addimage__.extractImageFromDataUrl=function(A){var O=(A=A||"").split("base64,"),z=null;if(O.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(q)&&(z={mimeType:q[1],charset:q[2],data:O[1]})}return z},W=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(A){return W()&&A instanceof ArrayBuffer};var K=t.__addimage__.isArrayBufferView=function(A){return W()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},j=t.__addimage__.binaryStringToUint8Array=function(A){for(var O=A.length,z=new Uint8Array(O),q=0;q<O;q++)z[q]=A.charCodeAt(q);return z},P=t.__addimage__.arrayBufferToBinaryString=function(A){for(var O="",z=K(A)?A:new Uint8Array(A),q=0;q<z.length;q+=8192)O+=String.fromCharCode.apply(null,z.subarray(q,q+8192));return O};t.addImage=function(){var A,O,z,q,ee,Q,de,H,oe;if(typeof arguments[1]=="number"?(O=e,z=arguments[1],q=arguments[2],ee=arguments[3],Q=arguments[4],de=arguments[5],H=arguments[6],oe=arguments[7]):(O=arguments[1],z=arguments[2],q=arguments[3],ee=arguments[4],Q=arguments[5],de=arguments[6],H=arguments[7],oe=arguments[8]),zt(A=arguments[0])==="object"&&!g(A)&&"imageData"in A){var ne=A;A=ne.imageData,O=ne.format||O||e,z=ne.x||z||0,q=ne.y||q||0,ee=ne.w||ne.width||ee,Q=ne.h||ne.height||Q,de=ne.alias||de,H=ne.compression||H,oe=ne.rotation||ne.angle||oe}var xe=this.internal.getFilters();if(H===void 0&&xe.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(z)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var L=F.call(this,A,O,de,H);return N.call(this,z,q,ee,Q,L,oe),this};var F=function(A,O,z,q){var ee,Q,de;if(typeof A=="string"&&n(A)===e){A=unescape(A);var H=B(A,!1);(H!==""||(H=t.loadFile(A,!0))!==void 0)&&(A=H)}if(g(A)&&(A=y(A,O)),O=n(A,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((de=z)==null||de.length===0)&&(z=function(oe){return typeof oe=="string"||K(oe)?b(oe):K(oe.data)?b(oe.data):null}(A)),(ee=p.call(this,z))||(W()&&(A instanceof Uint8Array||O==="RGBA"||(Q=A,A=j(A))),ee=this["process"+O.toUpperCase()](A,d.call(this),z,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in t.image_compression?oe:x.NONE}(q),Q)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},B=t.__addimage__.convertBase64ToBinaryString=function(A,O){var z;O=typeof O!="boolean"||O;var q,ee="";if(typeof A=="string"){q=(z=R(A))!==null?z.data:A;try{ee=Mc(q)}catch(Q){if(O)throw _(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(A){var O,z,q="";if(g(A)&&(A=y(A)),typeof A=="string"&&n(A)===e&&((q=B(A,!1))===""&&(q=t.loadFile(A)||""),A=q),z=n(A),!f(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(!W()||A instanceof Uint8Array||(A=j(A)),!(O=this["process"+z.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=z,O}})(ot.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ot.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,g=0;g<d.length&&!f;g++)switch((n=d[g]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<d.length;y++){n=d[y];var p=this.internal.pdfEscape,k=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(N.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(x(n.contents))+")",i+=" /Popup "+C.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+p(x(b))+") >>",N.content=i;var _=N.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(i+=" /Open true"),i+=" >>",C.content=i,this.internal.write(N.objId,"0 R",C.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var R=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(k(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var W=this.annotations._nameMap[n.options.name];n.options.pageNumber=W.page,n.options.top=W.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(k(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var K=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+K+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:u(r),y:d(n),w:u(r+s),h:d(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,u=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var f=this.splitTextToSize(r,o).length;a=Math.ceil(d*f)}else o=u,a=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=u/2),i.align==="right"&&(n-=u),this.link(n,s-d,o,a,i),u},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ot.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},o=t.__arabicParser__.isArabicEndLetter=function(N){return a(N)&&i(N)&&e[N.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(N){return a(N)&&s.indexOf(N.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return a(N)&&i(N)&&e[N.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(N){return a(N)&&i(N)&&e[N.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(N){return a(N)&&i(N)&&e[N.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(N){return a(N)&&i(N)&&e[N.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(N){var C=0,x=r,b="",_=0;for(C=0;C<N.length;C+=1)x[N.charCodeAt(C)]!==void 0?(_++,typeof(x=x[N.charCodeAt(C)])=="number"&&(b+=String.fromCharCode(x),x=r,_=0),C===N.length-1&&(x=r,b+=N.charAt(C-(_-1)),C-=_-1,_=0)):(x=r,b+=N.charAt(C-_),C-=_,_=0);return b};t.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&n[N.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(N,C,x){return a(N)?i(N)===!1?-1:!d(N)||!a(C)&&!a(x)||!a(x)&&o(C)||o(N)&&!a(C)||o(N)&&u(C)||o(N)&&o(C)?0:f(N)&&a(C)&&!o(C)&&a(x)&&d(x)?3:o(N)||!a(x)?1:2:-1},p=function(N){var C=0,x=0,b=0,_="",R="",W="",K=(N=N||"").split("\\s+"),j=[];for(C=0;C<K.length;C+=1){for(j.push(""),x=0;x<K[C].length;x+=1)_=K[C][x],R=K[C][x-1],W=K[C][x+1],a(_)?(b=y(_,R,W),j[C]+=b!==-1?String.fromCharCode(e[_.charCodeAt(0)][b]):_):j[C]+=_;j[C]=g(j[C])}return j.join(" ")},k=t.__arabicParser__.processArabic=t.processArabic=function(){var N,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(C)){var b=0;for(x=[],b=0;b<C.length;b+=1)Array.isArray(C[b])?x.push([p(C[b][0]),C[b][1],C[b][2]]):x.push([p(C[b])]);N=x}else N=p(C);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};t.events.push(["preProcessText",k])}(ot.API),ot.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ot.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(N){u=N}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(N){d=N}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(N){k=N}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,d){n.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),g=d.font||this.getFont(),y=d.scaleFactor||this.internal.scaleFactor,p=0,k=0,N=0,C=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var x=d.maxWidth;x>0?typeof u=="string"?u=this.splitTextToSize(u,x):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(_,R){return _.concat(C.splitTextToSize(R,x))},[])):u=Array.isArray(u)?u:[u];for(var b=0;b<u.length;b++)p<(N=this.getStringUnitWidth(u[b],{font:g})*f)&&(p=N);return p!==0&&(k=u.length),{w:p/=y,h:Math.max((k*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=g.top,p&&y&&(this.printHeaderRow(u.lineNumber,!0),u.y+=y[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};t.table=function(u,d,f,g,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var p,k,N,C,x=[],b=[],_=[],R={},W={},K=[],j=[],P=(y=y||{}).autoSize||!1,F=y.printHeaders!==!1,B=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,A=y.margins||Object.assign({width:this.getPageWidth()},e),O=typeof y.padding=="number"?y.padding:3,z=y.headerBackgroundColor||"#c8c8c8",q=y.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=q,this.setFontSize(B),g==null)b=x=Object.keys(f[0]),_=x.map(function(){return"left"});else if(Array.isArray(g)&&zt(g[0])==="object")for(x=g.map(function(ne){return ne.name}),b=g.map(function(ne){return ne.prompt||ne.name||""}),_=g.map(function(ne){return ne.align||"left"}),p=0;p<g.length;p+=1)W[g[p].name]=g[p].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(b=x=g,_=x.map(function(){return"left"}));if(P||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<x.length;p+=1){for(R[C=x[p]]=f.map(function(ne){return ne[C]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=R[C],this.setFont(void 0,"normal"),N=0;N<k.length;N+=1)K.push(this.getTextDimensions(k[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[C]=Math.max.apply(null,K)+O+O,K=[]}if(F){var ee={};for(p=0;p<x.length;p+=1)ee[x[p]]={},ee[x[p]].text=b[p],ee[x[p]].align=_[p];var Q=o.call(this,ee,W);j=x.map(function(ne){return new i(u,d,W[ne],Q,ee[ne].text,void 0,ee[ne].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var de=g.reduce(function(ne,xe){return ne[xe.name]=xe.align,ne},{});for(p=0;p<f.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:f[p]},this);var H=o.call(this,f[p],W);for(N=0;N<x.length;N+=1){var oe=f[p][x[N]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:N,data:oe},this),a.call(this,new i(u,d,W[x[N]],H,oe,p+2,de[x[N]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var o=function(u,d){var f=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(u).map(function(p){var k=u[p];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,d[p]-f-f)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/y+f+f},this).reduce(function(p,k){return Math.max(p,k)},0)};t.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=u;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(k)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),r=!1}}(ot.API);var Q5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},eb=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kp=X5(eb),tb=[100,200,300,400,500,600,700,800,900],Dk=X5(tb);function jp(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return Q5[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof kp[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function cv(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Fk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},dv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hv(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Mk(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Fk,r.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=jp(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+hv(i)+"' and default family '"+n+"'.");if(a=function(u,d){if(d[u])return d[u];var f=kp[u],g=f<=kp.normal?-1:1,y=cv(d,eb,f,g);if(!y)throw new Error("Could not find a matching font-stretch value for "+u);return y}(i.stretch,a),a=function(u,d){if(d[u])return d[u];for(var f=Q5[u],g=0;g<f.length;++g)if(d[f[g]])return d[f[g]];throw new Error("Could not find a matching font-style for "+u)}(i.style,a),!(a=function(u,d){if(d[u])return d[u];if(u===400&&d[500])return d[500];if(u===500&&d[400])return d[400];var f=Dk[u],g=cv(d,tb,f,u<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+u);return g}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+hv(i)+"'.");return a}function fv(t){return t.trimLeft()}function Rk(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Uk(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var dh,mv,pv,t0=["times"];(function(t){var e,r,n,s,i,a,o,u,d,f=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new u,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new a,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new a,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,u=this.internal.Matrix,d=new f}]);var g=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=L;Object.defineProperty(this,"pdf",{get:function(){return $}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(we){Y=!!we}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(we){X=!!we}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(we){isNaN(we)||(ae=we)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(we){isNaN(we)||(pe=we)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(we){var Z;typeof we=="number"?Z=[we,we,we,we]:((Z=new Array(4))[0]=we[0],Z[1]=we.length>=2?we[1]:Z[0],Z[2]=we.length>=3?we[2]:Z[0],Z[3]=we.length>=4?we[3]:Z[1]),d.margin=Z}});var J=!1;Object.defineProperty(this,"autoPaging",{get:function(){return J},set:function(we){J=we}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(we){ge=we}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(we){Se=we}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(we){we instanceof f&&(d=we)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(we){d.path=we}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(we){Pe=we}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(we){var Z;Z=y(we),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(we){var Z=y(we);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(we){["butt","round","square"].indexOf(we)!==-1&&(this.ctx.lineCap=we,this.pdf.setLineCap(we))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(we){isNaN(we)||(this.ctx.lineWidth=we,this.pdf.setLineWidth(we))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(we){["bevel","round","miter"].indexOf(we)!==-1&&(this.ctx.lineJoin=we,this.pdf.setLineJoin(we))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(we){isNaN(we)||(this.ctx.miterLimit=we,this.pdf.setMiterLimit(we))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(we){this.ctx.textBaseline=we}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(we){["right","end","center","left","start"].indexOf(we)!==-1&&(this.ctx.textAlign=we)}});var Le=null;function Fe(we,Z){if(Le===null){var mt=function(Xe){var Te=[];return Object.keys(Xe).forEach(function(Me){Xe[Me].forEach(function(ze){var Ie=null;switch(ze){case"bold":Ie={family:Me,weight:"bold"};break;case"italic":Ie={family:Me,style:"italic"};break;case"bolditalic":Ie={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":Ie={family:Me}}Ie!==null&&(Ie.ref={name:Me,style:ze},Te.push(Ie))})}),Te}(we.getFontList());Le=function(Xe){for(var Te={},Me=0;Me<Xe.length;++Me){var ze=jp(Xe[Me]),Ie=ze.family,We=ze.stretch,ht=ze.style,xt=ze.weight;Te[Ie]=Te[Ie]||{},Te[Ie][We]=Te[Ie][We]||{},Te[Ie][We][ht]=Te[Ie][We][ht]||{},Te[Ie][We][ht][xt]=ze}return Te}(mt.concat(Z))}return Le}var et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(we){Le=null,et=we}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(we){var Z;if(this.ctx.font=we,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(we))!==null){var mt=Z[1],Xe=(Z[2],Z[3]),Te=Z[4],Me=(Z[5],Z[6]),ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(ze==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:ze==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var Ie=function(at){var Nt,Re,zr=[],kt=at.trim();if(kt==="")return t0;if(kt in dv)return[dv[kt]];for(;kt!=="";){switch(Re=null,Nt=(kt=fv(kt)).charAt(0)){case'"':case"'":Re=Rk(kt.substring(1),Nt);break;default:Re=Uk(kt)}if(Re===null||(zr.push(Re[0]),(kt=fv(Re[1]))!==""&&kt.charAt(0)!==","))return t0;kt=kt.replace(/^,/,"")}return zr}(Me);if(this.fontFaces){var We=Mk(Fe(this.pdf,this.fontFaces),Ie.map(function(at){return{family:at,stretch:"normal",weight:Xe,style:mt}}));this.pdf.setFont(We.ref.name,We.ref.style)}else{var ht="";(Xe==="bold"||parseInt(Xe,10)>=700||mt==="bold")&&(ht="bold"),mt==="italic"&&(ht+="italic"),ht.length===0&&(ht="normal");for(var xt="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<Ie.length;Ct++){if(this.pdf.internal.getFont(Ie[Ct],ht,{noFallback:!0,disableWarning:!0})!==void 0){xt=Ie[Ct];break}if(ht==="bolditalic"&&this.pdf.internal.getFont(Ie[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xt=Ie[Ct],ht="bold";else if(this.pdf.internal.getFont(Ie[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xt=Ie[Ct],ht="normal";break}}if(xt===""){for(var St=0;St<Ie.length;St++)if(_t[Ie[St]]){xt=_t[Ie[St]];break}}xt=xt===""?"Times":xt,this.pdf.setFont(xt,ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(we){this.ctx.globalCompositeOperation=we}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(we){this.ctx.globalAlpha=we}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(we){this.ctx.lineDashOffset=we,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(we){this.ctx.lineDash=we,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(we){this.ctx.ignoreClearRect=!!we}})};g.prototype.setLineDash=function(L){this.lineDash=L},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){R.call(this,"fill",!1)},g.prototype.stroke=function(){R.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(L,$){if(isNaN(L)||isNaN($))throw Zt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new a(L,$));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(L,$)},g.prototype.closePath=function(){var L=new a(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&zt(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){L=new a(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(L.x,L.y)},g.prototype.lineTo=function(L,$){if(isNaN(L)||isNaN($))throw Zt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new a(L,$));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(Y.x,Y.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},g.prototype.quadraticCurveTo=function(L,$,Y,X){if(isNaN(Y)||isNaN(X)||isNaN(L)||isNaN($))throw Zt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new a(Y,X)),pe=this.ctx.transform.applyToPoint(new a(L,$));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new a(ae.x,ae.y)},g.prototype.bezierCurveTo=function(L,$,Y,X,ae,pe){if(isNaN(ae)||isNaN(pe)||isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X))throw Zt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var J=this.ctx.transform.applyToPoint(new a(ae,pe)),ge=this.ctx.transform.applyToPoint(new a(L,$)),Se=this.ctx.transform.applyToPoint(new a(Y,X));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Se.x,y2:Se.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},g.prototype.arc=function(L,$,Y,X,ae,pe){if(isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X)||isNaN(ae))throw Zt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var J=this.ctx.transform.applyToPoint(new a(L,$));L=J.x,$=J.y;var ge=this.ctx.transform.applyToPoint(new a(0,Y)),Se=this.ctx.transform.applyToPoint(new a(0,0));Y=Math.sqrt(Math.pow(ge.x-Se.x,2)+Math.pow(ge.y-Se.y,2))}Math.abs(ae-X)>=2*Math.PI&&(X=0,ae=2*Math.PI),this.path.push({type:"arc",x:L,y:$,radius:Y,startAngle:X,endAngle:ae,counterclockwise:pe})},g.prototype.arcTo=function(L,$,Y,X,ae){throw new Error("arcTo not implemented.")},g.prototype.rect=function(L,$,Y,X){if(isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X))throw Zt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,$),this.lineTo(L+Y,$),this.lineTo(L+Y,$+X),this.lineTo(L,$+X),this.lineTo(L,$),this.lineTo(L+Y,$),this.lineTo(L,$)},g.prototype.fillRect=function(L,$,Y,X){if(isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X))throw Zt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,$,Y,X),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},g.prototype.strokeRect=function(L,$,Y,X){if(isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X))throw Zt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(L,$,Y,X),this.stroke())},g.prototype.clearRect=function(L,$,Y,X){if(isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X))throw Zt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,$,Y,X))},g.prototype.save=function(L){L=typeof L!="boolean"||L;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage($),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},g.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage($),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(L){var $,Y,X,ae;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))$=0,Y=0,X=0,ae=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(pe!==null)$=parseInt(pe[1]),Y=parseInt(pe[2]),X=parseInt(pe[3]),ae=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)$=parseInt(pe[1]),Y=parseInt(pe[2]),X=parseInt(pe[3]),ae=parseFloat(pe[4]);else{if(ae=1,typeof L=="string"&&L.charAt(0)!=="#"){var J=new H5(L);L=J.ok?J.toHex():"#000000"}L.length===4?($=L.substring(1,2),$+=$,Y=L.substring(2,3),Y+=Y,X=L.substring(3,4),X+=X):($=L.substring(1,3),Y=L.substring(3,5),X=L.substring(5,7)),$=parseInt($,16),Y=parseInt(Y,16),X=parseInt(X,16)}}return{r:$,g:Y,b:X,a:ae,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(L,$,Y,X){if(isNaN($)||isNaN(Y)||typeof L!="string")throw Zt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!p.call(this)){var ae=H(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;O.call(this,{text:L,x:$,y:Y,scale:pe,angle:ae,align:this.textAlign,maxWidth:X})}},g.prototype.strokeText=function(L,$,Y,X){if(isNaN($)||isNaN(Y)||typeof L!="string")throw Zt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){X=isNaN(X)?void 0:X;var ae=H(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;O.call(this,{text:L,x:$,y:Y,scale:pe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:X})}},g.prototype.measureText=function(L){if(typeof L!="string")throw Zt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,Y=this.pdf.internal.scaleFactor,X=$.internal.getFontSize(),ae=$.getStringUnitWidth(L)*X/$.internal.scaleFactor,pe=function(J){var ge=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new pe({width:ae*=Math.round(96*Y/72*1e4)/1e4})},g.prototype.scale=function(L,$){if(isNaN(L)||isNaN($))throw Zt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new u(L,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.rotate=function(L){if(isNaN(L))throw Zt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new u(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply($)},g.prototype.translate=function(L,$){if(isNaN(L)||isNaN($))throw Zt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new u(1,0,0,1,L,$);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.transform=function(L,$,Y,X,ae,pe){if(isNaN(L)||isNaN($)||isNaN(Y)||isNaN(X)||isNaN(ae)||isNaN(pe))throw Zt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var J=new u(L,$,Y,X,ae,pe);this.ctx.transform=this.ctx.transform.multiply(J)},g.prototype.setTransform=function(L,$,Y,X,ae,pe){L=isNaN(L)?1:L,$=isNaN($)?0:$,Y=isNaN(Y)?0:Y,X=isNaN(X)?1:X,ae=isNaN(ae)?0:ae,pe=isNaN(pe)?0:pe,this.ctx.transform=new u(L,$,Y,X,ae,pe)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(L,$,Y,X,ae,pe,J,ge,Se){var Pe=this.pdf.getImageProperties(L),Le=1,Fe=1,et=1,we=1;X!==void 0&&ge!==void 0&&(et=ge/X,we=Se/ae,Le=Pe.width/X*ge/X,Fe=Pe.height/ae*Se/ae),pe===void 0&&(pe=$,J=Y,$=0,Y=0),X!==void 0&&ge===void 0&&(ge=X,Se=ae),X===void 0&&ge===void 0&&(ge=Pe.width,Se=Pe.height);for(var Z,mt=this.ctx.transform.decompose(),Xe=H(mt.rotate.shx),Te=new u,Me=(Te=(Te=(Te=Te.multiply(mt.translate)).multiply(mt.skew)).multiply(mt.scale)).applyToRectangle(new o(pe-$*et,J-Y*we,X*Le,ae*Fe)),ze=C.call(this,Me),Ie=[],We=0;We<ze.length;We+=1)Ie.indexOf(ze[We])===-1&&Ie.push(ze[We]);if(_(Ie),this.autoPaging)for(var ht=Ie[0],xt=Ie[Ie.length-1],_t=ht;_t<xt+1;_t++){this.pdf.setPage(_t);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=_t===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Re=_t===1?0:at+(_t-2)*Nt;if(this.ctx.clip_path.length!==0){var zr=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Z,this.posX+this.margin[3],-Re+St+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=zr}var kt=JSON.parse(JSON.stringify(Me));kt=b([kt],this.posX+this.margin[3],-Re+St+this.ctx.prevPageLastElemOffset)[0];var Yt=(_t>ht||_t<xt)&&N.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,Nt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",kt.x,kt.y,kt.w,kt.h,null,null,Xe),Yt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Xe)};var C=function(L,$,Y){var X=[];$=$||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":X.push(Math.floor((L.y+ae)/Y)+1);break;case"arc":X.push(Math.floor((L.y+ae-L.radius)/Y)+1),X.push(Math.floor((L.y+ae+L.radius)/Y)+1);break;case"qct":var pe=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);X.push(Math.floor((pe.y+ae)/Y)+1),X.push(Math.floor((pe.y+pe.h+ae)/Y)+1);break;case"bct":var J=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);X.push(Math.floor((J.y+ae)/Y)+1),X.push(Math.floor((J.y+J.h+ae)/Y)+1);break;case"rect":X.push(Math.floor((L.y+ae)/Y)+1),X.push(Math.floor((L.y+L.h+ae)/Y)+1)}for(var ge=0;ge<X.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<X[ge];)x.call(this);return X},x=function(){var L=this.fillStyle,$=this.strokeStyle,Y=this.font,X=this.lineCap,ae=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=$,this.font=Y,this.lineCap=X,this.lineWidth=ae,this.lineJoin=pe},b=function(L,$,Y){for(var X=0;X<L.length;X++)switch(L[X].type){case"bct":L[X].x2+=$,L[X].y2+=Y;case"qct":L[X].x1+=$,L[X].y1+=Y;case"mt":case"lt":case"arc":default:L[X].x+=$,L[X].y+=Y}return L},_=function(L){return L.sort(function($,Y){return $-Y})},R=function(L,$){for(var Y,X,ae=this.fillStyle,pe=this.strokeStyle,J=this.lineCap,ge=this.lineWidth,Se=Math.abs(ge*this.ctx.transform.scaleX),Pe=this.lineJoin,Le=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),et=[],we=0;we<Fe.length;we++)if(Fe[we].x!==void 0)for(var Z=C.call(this,Fe[we]),mt=0;mt<Z.length;mt+=1)et.indexOf(Z[mt])===-1&&et.push(Z[mt]);for(var Xe=0;Xe<et.length;Xe++)for(;this.pdf.internal.getNumberOfPages()<et[Xe];)x.call(this);if(_(et),this.autoPaging)for(var Te=et[0],Me=et[et.length-1],ze=Te;ze<Me+1;ze++){this.pdf.setPage(ze),this.fillStyle=ae,this.strokeStyle=pe,this.lineCap=J,this.lineWidth=Se,this.lineJoin=Pe;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=ze===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=ze===1?0:ht+(ze-2)*xt;if(this.ctx.clip_path.length!==0){var Ct=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Y,this.posX+this.margin[3],-_t+We+this.ctx.prevPageLastElemOffset),W.call(this,L,!0),this.path=Ct}if(X=JSON.parse(JSON.stringify(Le)),this.path=b(X,this.posX+this.margin[3],-_t+We+this.ctx.prevPageLastElemOffset),$===!1||ze===0){var St=(ze>Te||ze<Me)&&N.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,xt,null).clip().discardPath()),W.call(this,L,$),St&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Se,W.call(this,L,$),this.lineWidth=ge;this.path=Le},W=function(L,$){if((L!=="stroke"||$||!k.call(this))&&(L==="stroke"||$||!p.call(this))){for(var Y,X,ae=[],pe=this.path,J=0;J<pe.length;J++){var ge=pe[J];switch(ge.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ge,deltas:[],abs:[]});break;case"lt":var Se=ae.length;if(pe[J-1]&&!isNaN(pe[J-1].x)&&(Y=[ge.x-pe[J-1].x,ge.y-pe[J-1].y],Se>0)){for(;Se>=0;Se--)if(ae[Se-1].close!==!0&&ae[Se-1].begin!==!0){ae[Se-1].deltas.push(Y),ae[Se-1].abs.push(ge);break}}break;case"bct":Y=[ge.x1-pe[J-1].x,ge.y1-pe[J-1].y,ge.x2-pe[J-1].x,ge.y2-pe[J-1].y,ge.x-pe[J-1].x,ge.y-pe[J-1].y],ae[ae.length-1].deltas.push(Y);break;case"qct":var Pe=pe[J-1].x+2/3*(ge.x1-pe[J-1].x),Le=pe[J-1].y+2/3*(ge.y1-pe[J-1].y),Fe=ge.x+2/3*(ge.x1-ge.x),et=ge.y+2/3*(ge.y1-ge.y),we=ge.x,Z=ge.y;Y=[Pe-pe[J-1].x,Le-pe[J-1].y,Fe-pe[J-1].x,et-pe[J-1].y,we-pe[J-1].x,Z-pe[J-1].y],ae[ae.length-1].deltas.push(Y);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ge)}}X=$?null:L==="stroke"?"stroke":"fill";for(var mt=!1,Xe=0;Xe<ae.length;Xe++)if(ae[Xe].arc)for(var Te=ae[Xe].abs,Me=0;Me<Te.length;Me++){var ze=Te[Me];ze.type==="arc"?P.call(this,ze.x,ze.y,ze.radius,ze.startAngle,ze.endAngle,ze.counterclockwise,void 0,$,!mt):z.call(this,ze.x,ze.y),mt=!0}else if(ae[Xe].close===!0)this.pdf.internal.out("h"),mt=!1;else if(ae[Xe].begin!==!0){var Ie=ae[Xe].start.x,We=ae[Xe].start.y;q.call(this,ae[Xe].deltas,Ie,We),mt=!0}X&&F.call(this,X),$&&B.call(this)}},K=function(L){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-Y;case"top":return L+$-Y;case"hanging":return L+$-2*Y;case"middle":return L+$/2-Y;case"ideographic":return L;case"alphabetic":default:return L}},j=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function($,Y){this.colorStops.push([$,Y])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(L,$,Y,X,ae,pe,J,ge,Se){for(var Pe=Q.call(this,Y,X,ae,pe),Le=0;Le<Pe.length;Le++){var Fe=Pe[Le];Le===0&&(Se?A.call(this,Fe.x1+L,Fe.y1+$):z.call(this,Fe.x1+L,Fe.y1+$)),ee.call(this,L,$,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}ge?B.call(this):F.call(this,J)},F=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(L,$){this.pdf.internal.out(r(L)+" "+n($)+" m")},O=function(L){var $;switch(L.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var Y=this.pdf.getTextDimensions(L.text),X=K.call(this,L.y),ae=j.call(this,X)-Y.h,pe=this.ctx.transform.applyToPoint(new a(L.x,X)),J=this.ctx.transform.decompose(),ge=new u;ge=(ge=(ge=ge.multiply(J.translate)).multiply(J.skew)).multiply(J.scale);for(var Se,Pe,Le,Fe=this.ctx.transform.applyToRectangle(new o(L.x,X,Y.w,Y.h)),et=ge.applyToRectangle(new o(L.x,ae,Y.w,Y.h)),we=C.call(this,et),Z=[],mt=0;mt<we.length;mt+=1)Z.indexOf(we[mt])===-1&&Z.push(we[mt]);if(_(Z),this.autoPaging)for(var Xe=Z[0],Te=Z[Z.length-1],Me=Xe;Me<Te+1;Me++){this.pdf.setPage(Me);var ze=Me===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[2],ht=We-this.margin[0],xt=this.pdf.internal.pageSize.width-this.margin[1],_t=xt-this.margin[3],Ct=Me===1?0:Ie+(Me-2)*ht;if(this.ctx.clip_path.length!==0){var St=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Se,this.posX+this.margin[3],-1*Ct+ze),W.call(this,"fill",!0),this.path=St}var at=b([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Ct+ze+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*L.scale),Le=this.lineWidth,this.lineWidth=Le*L.scale);var Nt=this.autoPaging!=="text";if(Nt||at.y+at.h<=We){if(Nt||at.y>=ze&&at.x<=xt){var Re=Nt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||xt-at.x)[0],zr=b([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Ct+ze+this.ctx.prevPageLastElemOffset)[0],kt=Nt&&(Me>Xe||Me<Te)&&N.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,ht,null).clip().discardPath()),this.pdf.text(Re,zr.x,zr.y,{angle:L.angle,align:$,renderingMode:L.renderingMode}),kt&&this.pdf.restoreGraphicsState()}}else at.y<We&&(this.ctx.prevPageLastElemOffset+=We-at.y);L.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Le)}else L.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*L.scale),Le=this.lineWidth,this.lineWidth=Le*L.scale),this.pdf.text(L.text,pe.x+this.posX,pe.y+this.posY,{angle:L.angle,align:$,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Le)},z=function(L,$,Y,X){Y=Y||0,X=X||0,this.pdf.internal.out(r(L+Y)+" "+n($+X)+" l")},q=function(L,$,Y){return this.pdf.lines(L,$,Y,null,null)},ee=function(L,$,Y,X,ae,pe,J,ge){this.pdf.internal.out([e(s(Y+L)),e(i(X+$)),e(s(ae+L)),e(i(pe+$)),e(s(J+L)),e(i(ge+$)),"c"].join(" "))},Q=function(L,$,Y,X){for(var ae=2*Math.PI,pe=Math.PI/2;$>Y;)$-=ae;var J=Math.abs(Y-$);J<ae&&X&&(J=ae-J);for(var ge=[],Se=X?-1:1,Pe=$;J>1e-5;){var Le=Pe+Se*Math.min(J,pe);ge.push(de.call(this,L,Pe,Le)),J-=Math.abs(Le-Pe),Pe=Le}return ge},de=function(L,$,Y){var X=(Y-$)/2,ae=L*Math.cos(X),pe=L*Math.sin(X),J=ae,ge=-pe,Se=J*J+ge*ge,Pe=Se+J*ae+ge*pe,Le=4/3*(Math.sqrt(2*Se*Pe)-Pe)/(J*pe-ge*ae),Fe=J-Le*ge,et=ge+Le*J,we=Fe,Z=-et,mt=X+$,Xe=Math.cos(mt),Te=Math.sin(mt);return{x1:L*Math.cos($),y1:L*Math.sin($),x2:Fe*Xe-et*Te,y2:Fe*Te+et*Xe,x3:we*Xe-Z*Te,y3:we*Te+Z*Xe,x4:L*Math.cos(Y),y4:L*Math.sin(Y)}},H=function(L){return 180*L/Math.PI},oe=function(L,$,Y,X,ae,pe){var J=L+.5*(Y-L),ge=$+.5*(X-$),Se=ae+.5*(Y-ae),Pe=pe+.5*(X-pe),Le=Math.min(L,ae,J,Se),Fe=Math.max(L,ae,J,Se),et=Math.min($,pe,ge,Pe),we=Math.max($,pe,ge,Pe);return new o(Le,et,Fe-Le,we-et)},ne=function(L,$,Y,X,ae,pe,J,ge){var Se,Pe,Le,Fe,et,we,Z,mt,Xe,Te,Me,ze,Ie,We,ht=Y-L,xt=X-$,_t=ae-Y,Ct=pe-X,St=J-ae,at=ge-pe;for(Pe=0;Pe<41;Pe++)Xe=(Z=(Le=L+(Se=Pe/40)*ht)+Se*((et=Y+Se*_t)-Le))+Se*(et+Se*(ae+Se*St-et)-Z),Te=(mt=(Fe=$+Se*xt)+Se*((we=X+Se*Ct)-Fe))+Se*(we+Se*(pe+Se*at-we)-mt),Pe==0?(Me=Xe,ze=Te,Ie=Xe,We=Te):(Me=Math.min(Me,Xe),ze=Math.min(ze,Te),Ie=Math.max(Ie,Xe),We=Math.max(We,Te));return new o(Math.round(Me),Math.round(ze),Math.round(Ie-Me),Math.round(We-ze))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,$,Y=(L=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:$}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(ot.API),function(t){var e=function(i){var a,o,u,d,f,g,y,p,k,N;for(o=[],u=0,d=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(f=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(g=(f=((f=((f=((f=(f-(N=f%85))/85)-(k=f%85))/85)-(p=f%85))/85)-(y=f%85))/85)%85,o.push(g+33,y+33,p+33,k+33,N+33)):o.push(122);return function(C,x){for(var b=x;b>0;b--)C.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var a,o,u,d,f,g=String,y="length",p=255,k="charCodeAt",N="slice",C="replace";for(i[N](-2),i=i[N](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),u=[],d=0,f=(i+=a="uuuuu"[N](i[y]%5||5))[y];f>d;d+=5)o=52200625*(i[k](d)-33)+614125*(i[k](d+1)-33)+7225*(i[k](d+2)-33)+85*(i[k](d+3)-33)+(i[k](d+4)-33),u.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(x,b){for(var _=b;_>0;_--)x.pop()}(u,a[y]),g.fromCharCode.apply(g,u)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",u=0;u<i.length;u+=2)o+=String.fromCharCode("0x"+(i[u]+i[u+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=bp(a)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,a){var o=0,u=i||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=n(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(ot.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(u,d,f){var g=new XMLHttpRequest,y=0,p=function(k){var N=k.length,C=[],x=String.fromCharCode;for(y=0;y<N;y+=1)C.push(x(255&k.charCodeAt(y)));return C.join("")};if(g.open("GET",u,!d),g.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(g.onload=function(){g.status===200?f(p(this.responseText)):f(void 0)}),g.send(null),d&&g.status===200)return p(g.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(ot.API),function(t){function e(){return(lt.html2canvas?Promise.resolve(lt.html2canvas):Za(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(lt.DOMPurify?Promise.resolve(lt.DOMPurify):Za(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=zt(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var u=document.createElement(a);for(var d in o.className&&(u.className=o.className),o.innerHTML&&o.dompurify&&(u.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)u.style[d]=o.style[d];return u},i=function a(o){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),u);return d=(d=d.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(u){return this.set({src:s("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function u(d,f){for(var g=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),y=d.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||g.appendChild(u(y,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(g.width=d.width,g.height=d.height,g.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(g.value=d.value),g.addEventListener("load",function(){g.scrollTop=d.scrollTop,g.scrollLeft=d.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,o(this.prop.container,u)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var y=0;y<d.length;++y){var p=d[y],k=p.src.find(function(N){return N.format==="truetype"});k&&u.addFont(k.url,p.ref.name,p.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,u.context2d.save(!0),o(this.prop.container,g)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var u=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(u):u})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(a=a||ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,u,d){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,u,d){return this.setProgress(a?this.progress.val+a:null,o||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(a,o){var u=this;return this.thenCore(a,o,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return u.updateProgress(null,d),g}).then(d,f).then(function(g){return u.updateProgress(1),g})})},i.prototype.thenCore=function(a,o,u){u=u||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=u.call(d,a,o);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(u){o=o.thenCore(u)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,ot.getPageSize=function(a,o,u){if(zt(a)==="object"){var d=a;a=d.orientation,o=d.unit||o,u=d.format||u}o=o||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var f,g=(""+u).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+o}var p,k=0,N=0;if(y.hasOwnProperty(g))k=y[g][1]/f,N=y[g][0]/f;else try{k=u[1],N=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",N>k&&(p=N,N=k,k=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",k>N&&(p=N,N=k,k=p)}return{width:N,height:k,unit:o,k:f,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(jp):null;var u=new i(o);return o.worker?u:u.from(a).doCallback()}}(ot.API),ot.API.addJS=function(t){return pv=t,this.internal.events.subscribe("postPutResources",function(){dh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+pv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dh!==void 0&&mv!==void 0&&this.internal.out("/Names <</JavaScript "+dh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var u=o[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var g=r.internal.newObject();f.push(g);var y=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var u=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(ot.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var u,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(u=function(g){for(var y,p=256*g.charCodeAt(4)+g.charCodeAt(5),k=g.length,N={width:0,height:0,numcomponents:1},C=4;C<k;C+=2){if(C+=p,e.indexOf(g.charCodeAt(C+1))!==-1){y=256*g.charCodeAt(C+5)+g.charCodeAt(C+6),N={width:256*g.charCodeAt(C+7)+g.charCodeAt(C+8),height:y,numcomponents:g.charCodeAt(C+9)};break}p=256*g.charCodeAt(C+2)+g.charCodeAt(C+3)}return N}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:u.width,height:u.height,colorSpace:o,bitsPerComponent:8,filter:d,index:n,alias:s}}return f}}(ot.API);var Ol,hh,gv,vv,yv,Bk=function(){var t,e,r;function n(i){var a,o,u,d,f,g,y,p,k,N,C,x,b,_;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(a=this.readUInt32(),k=(function(){var R,W;for(W=[],R=0;R<4;++R)W.push(String.fromCharCode(this.data[this.pos++]));return W}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,g.delay=1e3*f/d,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,a-=4),i=(g!=null?g.data:void 0)||this.imgData,x=0;0<=a?x<a:x>a;0<=a?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((N=u-this.transparency.indexed.length)>0)for(b=0;0<=N?b<N:b>N;0<=N?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":y=(C=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,C.slice(0,y)),this.text[p]=String.fromCharCode.apply(String,C.slice(y+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),u=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(g,y,p,k){var N,C,x,b,_,R,W,K,j,P,F,B,A,O,z,q,ee,Q,de,H,oe,ne=Math.ceil((d.width-g)/p),xe=Math.ceil((d.height-y)/k),L=d.width==ne&&d.height==xe;for(O=a*ne,B=L?o:new Uint8Array(O*xe),R=i.length,A=0,C=0;A<xe&&u<R;){switch(i[u++]){case 0:for(b=ee=0;ee<O;b=ee+=1)B[C++]=i[u++];break;case 1:for(b=Q=0;Q<O;b=Q+=1)N=i[u++],_=b<a?0:B[C-a],B[C++]=(N+_)%256;break;case 2:for(b=de=0;de<O;b=de+=1)N=i[u++],x=(b-b%a)/a,z=A&&B[(A-1)*O+x*a+b%a],B[C++]=(z+N)%256;break;case 3:for(b=H=0;H<O;b=H+=1)N=i[u++],x=(b-b%a)/a,_=b<a?0:B[C-a],z=A&&B[(A-1)*O+x*a+b%a],B[C++]=(N+Math.floor((_+z)/2))%256;break;case 4:for(b=oe=0;oe<O;b=oe+=1)N=i[u++],x=(b-b%a)/a,_=b<a?0:B[C-a],A===0?z=q=0:(z=B[(A-1)*O+x*a+b%a],q=x&&B[(A-1)*O+(x-1)*a+b%a]),W=_+z-q,K=Math.abs(W-_),P=Math.abs(W-z),F=Math.abs(W-q),j=K<=P&&K<=F?_:P<=F?z:q,B[C++]=(N+j)%256;break;default:throw new Error("Invalid filter algorithm: "+i[u-1])}if(!L){var $=((y+A*k)*d.width+g)*a,Y=A*O;for(b=0;b<ne;b+=1){for(var X=0;X<a;X+=1)o[$++]=B[Y++];$+=(p-1)*a}}A++}}return i=yk(i),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),o},n.prototype.decodePalette=function(){var i,a,o,u,d,f,g,y,p;for(o=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+o.length),u=0,i=0,a=g=0,y=o.length;g<y;a=g+=3)d[u++]=o[a],d[u++]=o[a+1],d[u++]=o[a+2],d[u++]=(p=f[i++])!=null?p:255;return d},n.prototype.copyToImageData=function(i,a){var o,u,d,f,g,y,p,k,N,C,x;if(u=this.colors,N=null,o=this.hasAlphaChannel,this.palette.length&&(N=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),u=4,o=!0),k=(d=i.data||i).length,g=N||a,f=y=0,u===1)for(;f<k;)p=N?4*a[f/4]:y,C=g[p++],d[f++]=C,d[f++]=C,d[f++]=C,d[f++]=o?g[p++]:255,y=p;else for(;f<k;)p=N?4*a[f/4]:y,d[f++]=g[p++],d[f++]=g[p++],d[f++]=g[p++],d[f++]=o?g[p++]:255,y=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(lt)==="[object Window]"){try{e=lt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,o,u,d,f,g,y,p;if(this.animation){for(p=[],o=f=0,g=(y=this.animation.frames).length;f<g;o=++f)a=y[o],u=i.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(u,d),a.imageData=u,p.push(a.image=t(u));return p}},n.prototype.renderFrame=function(i,a){var o,u,d;return o=(u=this.animation.frames)[a],d=u[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var a,o,u,d,f,g,y=this;return o=0,g=this.animation,d=g.numFrames,u=g.frames,f=g.numPlays,(a=function(){var p,k;if(p=o++%d,k=u[p],y.renderFrame(i,p),d>1&&o/d<f)return y.animation._timeout=setTimeout(a,k.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function $k(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,u=null;i&&(o=e,u=a,e+=3*a);var d=!0,f=[],g=0,y=null,p=0,k=null;for(this.width=r,this.height=n;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,k=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],!(1&N)&&(y=null),p=N>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,R=t[e++],W=R>>6&1,K=1<<(7&R)+1,j=o,P=u,F=!1;R>>7&&(F=!0,j=e,P=K,e+=3*K);var B=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(A===0)break;e+=A}f.push({x:C,y:x,width:b,height:_,has_local_palette:F,palette_offset:j,palette_size:P,data_offset:B,data_length:e-B,transparent_index:y,interlaced:!!W,delay:g,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return k},this.frameInfo=function(O){if(O<0||O>=f.length)throw new Error("Frame index out of range.");return f[O]},this.decodeAndBlitFrameBGRA=function(O,z){var q=this.frameInfo(O),ee=q.width*q.height,Q=new Uint8Array(ee);xv(t,q.data_offset,Q,ee);var de=q.palette_offset,H=q.transparent_index;H===null&&(H=256);var oe=q.width,ne=r-oe,xe=oe,L=4*(q.y*r+q.x),$=4*((q.y+q.height)*r+q.x),Y=L,X=4*ne;q.interlaced===!0&&(X+=4*r*7);for(var ae=8,pe=0,J=Q.length;pe<J;++pe){var ge=Q[pe];if(xe===0&&(xe=oe,(Y+=X)>=$&&(X=4*ne+4*r*(ae-1),Y=L+(oe+ne)*(ae<<1),ae>>=1)),ge===H)Y+=4;else{var Se=t[de+3*ge],Pe=t[de+3*ge+1],Le=t[de+3*ge+2];z[Y++]=Le,z[Y++]=Pe,z[Y++]=Se,z[Y++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(O,z){var q=this.frameInfo(O),ee=q.width*q.height,Q=new Uint8Array(ee);xv(t,q.data_offset,Q,ee);var de=q.palette_offset,H=q.transparent_index;H===null&&(H=256);var oe=q.width,ne=r-oe,xe=oe,L=4*(q.y*r+q.x),$=4*((q.y+q.height)*r+q.x),Y=L,X=4*ne;q.interlaced===!0&&(X+=4*r*7);for(var ae=8,pe=0,J=Q.length;pe<J;++pe){var ge=Q[pe];if(xe===0&&(xe=oe,(Y+=X)>=$&&(X=4*ne+4*r*(ae-1),Y=L+(oe+ne)*(ae<<1),ae>>=1)),ge===H)Y+=4;else{var Se=t[de+3*ge],Pe=t[de+3*ge+1],Le=t[de+3*ge+2];z[Y++]=Se,z[Y++]=Pe,z[Y++]=Le,z[Y++]=255}--xe}}}function xv(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,u=s+1,d=(1<<u)-1,f=0,g=0,y=0,p=t[e++],k=new Int32Array(4096),N=null;;){for(;f<16&&p!==0;)g|=t[e++]<<f,f+=8,p===1?p=t[e++]:--p;if(f<u)break;var C=g&d;if(g>>=u,f-=u,C!==i){if(C===a)break;for(var x=C<o?C:N,b=0,_=x;_>i;)_=k[_]>>8,++b;var R=_;if(y+b+(x!==C?1:0)>n)return void Zt.log("Warning, gif stream longer than expected.");r[y++]=R;var W=y+=b;for(x!==C&&(r[y++]=R),_=x;b--;)_=k[_],r[--W]=255&_,_>>=8;N!==null&&o<4096&&(k[o++]=N<<8|R,o>=d+1&&u<12&&(++u,d=d<<1|1)),N=C}else o=a+1,d=(1<<(u=s+1))-1,N=null}return y!==n&&Zt.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function r0(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),u=new Array(64),d=new Array(64),f=new Array(64),g=new Array(65535),y=new Array(65535),p=new Array(64),k=new Array(64),N=[],C=0,x=7,b=new Array(64),_=new Array(64),R=new Array(64),W=new Array(256),K=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(L,$){for(var Y=0,X=0,ae=new Array,pe=1;pe<=16;pe++){for(var J=1;J<=L[pe];J++)ae[$[X]]=[],ae[$[X]][0]=Y,ae[$[X]][1]=pe,X++,Y++;Y*=2}return ae}function de(L){for(var $=L[0],Y=L[1]-1;Y>=0;)$&1<<Y&&(C|=1<<x),Y--,--x<0&&(C==255?(H(255),H(0)):H(C),x=7,C=0)}function H(L){N.push(L)}function oe(L){H(L>>8&255),H(255&L)}function ne(L,$,Y,X,ae){for(var pe,J=ae[0],ge=ae[240],Se=function(Te,Me){var ze,Ie,We,ht,xt,_t,Ct,St,at,Nt,Re=0;for(at=0;at<8;++at){ze=Te[Re],Ie=Te[Re+1],We=Te[Re+2],ht=Te[Re+3],xt=Te[Re+4],_t=Te[Re+5],Ct=Te[Re+6];var zr=ze+(St=Te[Re+7]),kt=ze-St,Yt=Ie+Ct,Mt=Ie-Ct,Jt=We+_t,Xn=We-_t,Tt=ht+xt,ci=ht-xt,nr=zr+Tt,Dn=zr-Tt,vs=Yt+Jt,sr=Yt-Jt;Te[Re]=nr+vs,Te[Re+4]=nr-vs;var ut=.707106781*(sr+Dn);Te[Re+2]=Dn+ut,Te[Re+6]=Dn-ut;var Ot=.382683433*((nr=ci+Xn)-(sr=Mt+kt)),Fn=.5411961*nr+Ot,hr=1.306562965*sr+Ot,Nn=.707106781*(vs=Xn+Mt),_n=kt+Nn,rt=kt-Nn;Te[Re+5]=rt+Fn,Te[Re+3]=rt-Fn,Te[Re+1]=_n+hr,Te[Re+7]=_n-hr,Re+=8}for(Re=0,at=0;at<8;++at){ze=Te[Re],Ie=Te[Re+8],We=Te[Re+16],ht=Te[Re+24],xt=Te[Re+32],_t=Te[Re+40],Ct=Te[Re+48];var Sn=ze+(St=Te[Re+56]),Tr=ze-St,Or=Ie+Ct,fr=Ie-Ct,lr=We+_t,en=We-_t,di=ht+xt,Us=ht-xt,kn=Sn+di,Ir=Sn-di,jn=Or+lr,ys=Or-lr;Te[Re]=kn+jn,Te[Re+32]=kn-jn;var tn=.707106781*(ys+Ir);Te[Re+16]=Ir+tn,Te[Re+48]=Ir-tn;var xs=.382683433*((kn=Us+en)-(ys=fr+Tr)),Mn=.5411961*kn+xs,Ci=1.306562965*ys+xs,Bs=.707106781*(jn=en+fr),hi=Tr+Bs,Ai=Tr-Bs;Te[Re+40]=Ai+Mn,Te[Re+24]=Ai-Mn,Te[Re+8]=hi+Ci,Te[Re+56]=hi-Ci,Re++}for(at=0;at<64;++at)Nt=Te[at]*Me[at],p[at]=Nt>0?Nt+.5|0:Nt-.5|0;return p}(L,$),Pe=0;Pe<64;++Pe)k[j[Pe]]=Se[Pe];var Le=k[0]-Y;Y=k[0],Le==0?de(X[0]):(de(X[y[pe=32767+Le]]),de(g[pe]));for(var Fe=63;Fe>0&&k[Fe]==0;)Fe--;if(Fe==0)return de(J),Y;for(var et,we=1;we<=Fe;){for(var Z=we;k[we]==0&&we<=Fe;)++we;var mt=we-Z;if(mt>=16){et=mt>>4;for(var Xe=1;Xe<=et;++Xe)de(ge);mt&=15}pe=32767+k[we],de(ae[(mt<<4)+y[pe]]),de(g[pe]),we++}return Fe!=63&&de(J),Y}function xe(L){L=Math.min(Math.max(L,1),100),i!=L&&(function($){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var ae=a((Y[X]*$+50)/100);ae=Math.min(Math.max(ae,1),255),o[j[X]]=ae}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],J=0;J<64;J++){var ge=a((pe[J]*$+50)/100);ge=Math.min(Math.max(ge,1),255),u[j[J]]=ge}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,Le=0;Le<8;Le++)for(var Fe=0;Fe<8;Fe++)d[Pe]=1/(o[j[Pe]]*Se[Le]*Se[Fe]*8),f[Pe]=1/(u[j[Pe]]*Se[Le]*Se[Fe]*8),Pe++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,$){$&&xe($),N=new Array,C=0,x=7,oe(65496),oe(65504),oe(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),oe(1),oe(1),H(0),H(0),function(){oe(65499),oe(132),H(0);for(var Ie=0;Ie<64;Ie++)H(o[Ie]);H(1);for(var We=0;We<64;We++)H(u[We])}(),function(Ie,We){oe(65472),oe(17),H(8),oe(We),oe(Ie),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(L.width,L.height),function(){oe(65476),oe(418),H(0);for(var Ie=0;Ie<16;Ie++)H(P[Ie+1]);for(var We=0;We<=11;We++)H(F[We]);H(16);for(var ht=0;ht<16;ht++)H(B[ht+1]);for(var xt=0;xt<=161;xt++)H(A[xt]);H(1);for(var _t=0;_t<16;_t++)H(O[_t+1]);for(var Ct=0;Ct<=11;Ct++)H(z[Ct]);H(17);for(var St=0;St<16;St++)H(q[St+1]);for(var at=0;at<=161;at++)H(ee[at])}(),oe(65498),oe(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var Y=0,X=0,ae=0;C=0,x=7,this.encode.displayName="_encode_";for(var pe,J,ge,Se,Pe,Le,Fe,et,we,Z=L.data,mt=L.width,Xe=L.height,Te=4*mt,Me=0;Me<Xe;){for(pe=0;pe<Te;){for(Pe=Te*Me+pe,Fe=-1,et=0,we=0;we<64;we++)Le=Pe+(et=we>>3)*Te+(Fe=4*(7&we)),Me+et>=Xe&&(Le-=Te*(Me+1+et-Xe)),pe+Fe>=Te&&(Le-=pe+Fe-Te+4),J=Z[Le++],ge=Z[Le++],Se=Z[Le++],b[we]=(K[J]+K[ge+256>>0]+K[Se+512>>0]>>16)-128,_[we]=(K[J+768>>0]+K[ge+1024>>0]+K[Se+1280>>0]>>16)-128,R[we]=(K[J+1280>>0]+K[ge+1536>>0]+K[Se+1792>>0]>>16)-128;Y=ne(b,d,Y,e,n),X=ne(_,f,X,r,s),ae=ne(R,f,ae,r,s),pe+=32}Me+=8}if(x>=0){var ze=[];ze[1]=x+1,ze[0]=(1<<x+1)-1,de(ze)}return oe(65497),new Uint8Array(N)},t=t||50,function(){for(var L=String.fromCharCode,$=0;$<256;$++)W[$]=L($)}(),e=Q(P,F),r=Q(O,z),n=Q(B,A),s=Q(q,ee),function(){for(var L=1,$=2,Y=1;Y<=15;Y++){for(var X=L;X<$;X++)y[32767+X]=Y,g[32767+X]=[],g[32767+X][1]=Y,g[32767+X][0]=X;for(var ae=-($-1);ae<=-L;ae++)y[32767+ae]=Y,g[32767+ae]=[],g[32767+ae][1]=Y,g[32767+ae][0]=$-1+ae;L<<=1,$<<=1}}(),function(){for(var L=0;L<256;L++)K[L]=19595*L,K[L+256>>0]=38470*L,K[L+512>>0]=7471*L+32768,K[L+768>>0]=-11059*L,K[L+1024>>0]=-21709*L,K[L+1280>>0]=32768*L+8421375,K[L+1536>>0]=-27439*L,K[L+1792>>0]=-5329*L}(),xe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ys(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bv(t){function e(P){if(!P)throw Error("assert :P")}function r(P,F,B){for(var A=0;4>A;A++)if(P[F+A]!=B.charCodeAt(A))return!0;return!1}function n(P,F,B,A,O){for(var z=0;z<O;z++)P[F+z]=B[A+z]}function s(P,F,B,A){for(var O=0;O<A;O++)P[F+O]=B}function i(P){return new Int32Array(P)}function a(P,F){for(var B=[],A=0;A<P;A++)B.push(new F);return B}function o(P,F){var B=[];return function A(O,z,q){for(var ee=q[z],Q=0;Q<ee&&(O.push(q.length>z+1?[]:new F),!(q.length<z+1));Q++)A(O[Q],z+1,q)}(B,0,P),B}var u=function(){var P=this;function F(c,h){for(var v=1<<h-1>>>0;c&v;)v>>>=1;return v?(c&v-1)+v:c}function B(c,h,v,w,T){e(!(w%v));do c[h+(w-=v)]=T;while(0<w)}function A(c,h,v,w,T){if(e(2328>=T),512>=T)var I=i(512);else if((I=i(T))==null)return 0;return function(D,M,U,V,le,ve){var ye,he,Ce=M,be=1<<U,ue=i(16),ce=i(16);for(e(le!=0),e(V!=null),e(D!=null),e(0<U),he=0;he<le;++he){if(15<V[he])return 0;++ue[V[he]]}if(ue[0]==le)return 0;for(ce[1]=0,ye=1;15>ye;++ye){if(ue[ye]>1<<ye)return 0;ce[ye+1]=ce[ye]+ue[ye]}for(he=0;he<le;++he)ye=V[he],0<V[he]&&(ve[ce[ye]++]=he);if(ce[15]==1)return(V=new O).g=0,V.value=ve[0],B(D,Ce,1,be,V),be;var ke,Ae=-1,je=be-1,Ye=0,Ue=1,nt=1,$e=1<<U;for(he=0,ye=1,le=2;ye<=U;++ye,le<<=1){if(Ue+=nt<<=1,0>(nt-=ue[ye]))return 0;for(;0<ue[ye];--ue[ye])(V=new O).g=ye,V.value=ve[he++],B(D,Ce+Ye,le,$e,V),Ye=F(Ye,ye)}for(ye=U+1,le=2;15>=ye;++ye,le<<=1){if(Ue+=nt<<=1,0>(nt-=ue[ye]))return 0;for(;0<ue[ye];--ue[ye]){if(V=new O,(Ye&je)!=Ae){for(Ce+=$e,ke=1<<(Ae=ye)-U;15>Ae&&!(0>=(ke-=ue[Ae]));)++Ae,ke<<=1;be+=$e=1<<(ke=Ae-U),D[M+(Ae=Ye&je)].g=ke+U,D[M+Ae].value=Ce-M-Ae}V.g=ye-U,V.value=ve[he++],B(D,Ce+(Ye>>U),le,$e,V),Ye=F(Ye,ye)}}return Ue!=2*ce[15]-1?0:be}(c,h,v,w,T,I)}function O(){this.value=this.g=0}function z(){this.value=this.g=0}function q(){this.G=a(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(rn,z)}function ee(c,h,v,w){e(c!=null),e(h!=null),e(2147483648>w),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=h,c.pa=v,c.Jd=h,c.Yc=v+w,c.Zc=4<=w?v+w-4+1:v,pe(c)}function Q(c,h){for(var v=0;0<h--;)v|=ge(c,128)<<h;return v}function de(c,h){var v=Q(c,h);return J(c)?-v:v}function H(c,h,v,w){var T,I=0;for(e(c!=null),e(h!=null),e(4294967288>w),c.Sb=w,c.Ra=0,c.u=0,c.h=0,4<w&&(w=4),T=0;T<w;++T)I+=h[v+T]<<8*T;c.Ra=I,c.bb=w,c.oa=h,c.pa=v}function oe(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<pl-8>>>0,++c.bb,c.u-=8;Y(c)&&(c.h=1,c.u=0)}function ne(c,h){if(e(0<=h),!c.h&&h<=ml){var v=$(c)&fl[h];return c.u+=h,oe(c),v}return c.h=1,c.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(c){return c.Ra>>>(c.u&pl-1)>>>0}function Y(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>pl}function X(c,h){c.u=h,c.h=Y(c)}function ae(c){c.u>=Gu&&(e(c.u>=Gu),oe(c))}function pe(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function J(c){return Q(c,1)}function ge(c,h){var v=c.Ca;0>c.b&&pe(c);var w=c.b,T=v*h>>>8,I=(c.I>>>w>T)+0;for(I?(v-=T,c.I-=T+1<<w>>>0):v=T+1,w=v,T=0;256<=w;)T+=8,w>>=8;return w=7^T+Bn[w],c.b-=w,c.Ca=(v<<w)-1,I}function Se(c,h,v){c[h+0]=v>>24&255,c[h+1]=v>>16&255,c[h+2]=v>>8&255,c[h+3]=v>>0&255}function Pe(c,h){return c[h+0]<<0|c[h+1]<<8}function Le(c,h){return Pe(c,h)|c[h+2]<<16}function Fe(c,h){return Pe(c,h)|Pe(c,h+2)<<16}function et(c,h){var v=1<<h;return e(c!=null),e(0<h),c.X=i(v),c.X==null?0:(c.Mb=32-h,c.Xa=h,1)}function we(c,h){e(c!=null),e(h!=null),e(c.Xa==h.Xa),n(h.X,0,c.X,0,1<<h.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function mt(c,h,v,w){e(v!=null),e(w!=null);var T=v[0],I=w[0];return T==0&&(T=(c*I+h/2)/h),I==0&&(I=(h*T+c/2)/c),0>=T||0>=I?0:(v[0]=T,w[0]=I,1)}function Xe(c,h){return c+(1<<h)-1>>>h}function Te(c,h){return((4278255360&c)+(4278255360&h)>>>0&4278255360)+((16711935&c)+(16711935&h)>>>0&16711935)>>>0}function Me(c,h){P[h]=function(v,w,T,I,D,M,U){var V;for(V=0;V<D;++V){var le=P[c](M[U+V-1],T,I+V);M[U+V]=Te(v[w+V],le)}}}function ze(){this.ud=this.hd=this.jd=0}function Ie(c,h){return((4278124286&(c^h))>>>1)+(c&h)>>>0}function We(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function ht(c,h){return We(c+(c-h+.5>>1))}function xt(c,h,v){return Math.abs(h-v)-Math.abs(c-v)}function _t(c,h,v,w,T,I,D){for(w=I[D-1],v=0;v<T;++v)I[D+v]=w=Te(c[h+v],w)}function Ct(c,h,v,w,T){var I;for(I=0;I<v;++I){var D=c[h+I],M=D>>8&255,U=16711935&(U=(U=16711935&D)+((M<<16)+M));w[T+I]=(4278255360&D)+U>>>0}}function St(c,h){h.jd=c>>0&255,h.hd=c>>8&255,h.ud=c>>16&255}function at(c,h,v,w,T,I){var D;for(D=0;D<w;++D){var M=h[v+D],U=M>>>8,V=M,le=255&(le=(le=M>>>16)+((c.jd<<24>>24)*(U<<24>>24)>>>5));V=255&(V=(V=V+((c.hd<<24>>24)*(U<<24>>24)>>>5))+((c.ud<<24>>24)*(le<<24>>24)>>>5)),T[I+D]=(4278255360&M)+(le<<16)+V}}function Nt(c,h,v,w,T){P[h]=function(I,D,M,U,V,le,ve,ye,he){for(U=ve;U<ye;++U)for(ve=0;ve<he;++ve)V[le++]=T(M[w(I[D++])])},P[c]=function(I,D,M,U,V,le,ve){var ye=8>>I.b,he=I.Ea,Ce=I.K[0],be=I.w;if(8>ye)for(I=(1<<I.b)-1,be=(1<<ye)-1;D<M;++D){var ue,ce=0;for(ue=0;ue<he;++ue)ue&I||(ce=w(U[V++])),le[ve++]=T(Ce[ce&be]),ce>>=ye}else P["VP8LMapColor"+v](U,V,Ce,be,le,ve,D,M,he)}}function Re(c,h,v,w,T){for(v=h+v;h<v;){var I=c[h++];w[T++]=I>>16&255,w[T++]=I>>8&255,w[T++]=I>>0&255}}function zr(c,h,v,w,T){for(v=h+v;h<v;){var I=c[h++];w[T++]=I>>16&255,w[T++]=I>>8&255,w[T++]=I>>0&255,w[T++]=I>>24&255}}function kt(c,h,v,w,T){for(v=h+v;h<v;){var I=(D=c[h++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;w[T++]=I,w[T++]=D}}function Yt(c,h,v,w,T){for(v=h+v;h<v;){var I=(D=c[h++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;w[T++]=I,w[T++]=D}}function Mt(c,h,v,w,T){for(v=h+v;h<v;){var I=c[h++];w[T++]=I>>0&255,w[T++]=I>>8&255,w[T++]=I>>16&255}}function Jt(c,h,v,w,T,I){if(I==0)for(v=h+v;h<v;)Se(w,((I=c[h++])[0]>>24|I[1]>>8&65280|I[2]<<8&16711680|I[3]<<24)>>>0),T+=32;else n(w,T,c,h,v)}function Xn(c,h){P[h][0]=P[c+"0"],P[h][1]=P[c+"1"],P[h][2]=P[c+"2"],P[h][3]=P[c+"3"],P[h][4]=P[c+"4"],P[h][5]=P[c+"5"],P[h][6]=P[c+"6"],P[h][7]=P[c+"7"],P[h][8]=P[c+"8"],P[h][9]=P[c+"9"],P[h][10]=P[c+"10"],P[h][11]=P[c+"11"],P[h][12]=P[c+"12"],P[h][13]=P[c+"13"],P[h][14]=P[c+"0"],P[h][15]=P[c+"0"]}function Tt(c){return c==Xf||c==Qf||c==Ad||c==em}function ci(){this.eb=[],this.size=this.A=this.fb=0}function nr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Dn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ci,this.f.kb=new nr,this.sd=null}function vs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function sr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Ot(c,h){var v=c.T,w=h.ba.f.RGBA,T=w.eb,I=w.fb+c.ka*w.A,D=Cs[h.ba.S],M=c.y,U=c.O,V=c.f,le=c.N,ve=c.ea,ye=c.W,he=h.cc,Ce=h.dc,be=h.Mc,ue=h.Nc,ce=c.ka,ke=c.ka+c.T,Ae=c.U,je=Ae+1>>1;for(ce==0?D(M,U,null,null,V,le,ve,ye,V,le,ve,ye,T,I,null,null,Ae):(D(h.ec,h.fc,M,U,he,Ce,be,ue,V,le,ve,ye,T,I-w.A,T,I,Ae),++v);ce+2<ke;ce+=2)he=V,Ce=le,be=ve,ue=ye,le+=c.Rc,ye+=c.Rc,I+=2*w.A,D(M,(U+=2*c.fa)-c.fa,M,U,he,Ce,be,ue,V,le,ve,ye,T,I-w.A,T,I,Ae);return U+=c.fa,c.j+ke<c.o?(n(h.ec,h.fc,M,U,Ae),n(h.cc,h.dc,V,le,je),n(h.Mc,h.Nc,ve,ye,je),v--):1&ke||D(M,U,null,null,V,le,ve,ye,V,le,ve,ye,T,I+w.A,null,null,Ae),v}function Fn(c,h,v){var w=c.F,T=[c.J];if(w!=null){var I=c.U,D=h.ba.S,M=D==Cd||D==Ad;h=h.ba.f.RGBA;var U=[0],V=c.ka;U[0]=c.T,c.Kb&&(V==0?--U[0]:(--V,T[0]-=c.width),c.j+c.ka+c.T==c.o&&(U[0]=c.o-c.j-V));var le=h.eb;V=h.fb+V*h.A,c=er(w,T[0],c.width,I,U,le,V+(M?0:3),h.A),e(v==U),c&&Tt(D)&&ks(le,V,M,I,U,h.A)}return 0}function hr(c){var h=c.ma,v=h.ba.S,w=11>v,T=v==kd||v==jd||v==Cd||v==Zf||v==12||Tt(v);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Vu(h.Oa,c,T?11:12))return 0;if(T&&Tt(v)&&Ee(),c.da)alert("todo:use_scaling");else{if(w){if(h.Ib=ut,c.Kb){if(v=c.U+1>>1,h.memory=i(c.U+2*v),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+c.U,h.Mc=h.cc,h.Nc=h.dc+v,h.Ib=Ot,Ee()}}else alert("todo:EmitYUV");T&&(h.Jb=Fn,w&&me())}if(w&&!o1){for(c=0;256>c;++c)Tw[c]=89858*(c-128)+Ed>>Pd,Dw[c]=-22014*(c-128)+Ed,Iw[c]=-45773*(c-128),Ow[c]=113618*(c-128)+Ed>>Pd;for(c=ec;c<nm;++c)h=76283*(c-16)+Ed>>Pd,Fw[c-ec]=rs(h,255),Mw[c-ec]=rs(h+8>>4,15);o1=1}return 1}function Nn(c){var h=c.ma,v=c.U,w=c.T;return e(!(1&c.ka)),0>=v||0>=w?0:(v=h.Ib(c,h),h.Jb!=null&&h.Jb(c,h,v),h.Dc+=v,1)}function _n(c){c.ma.memory=null}function rt(c,h,v,w){return ne(c,8)!=47?0:(h[0]=ne(c,14)+1,v[0]=ne(c,14)+1,w[0]=ne(c,1),ne(c,3)!=0?0:!c.h)}function Sn(c,h){if(4>c)return c+1;var v=c-2>>1;return(2+(1&c)<<v)+ne(h,v)+1}function Tr(c,h){return 120<h?h-120:1<=(v=((v=yw[h-1])>>4)*c+(8-(15&v)))?v:1;var v}function Or(c,h,v){var w=$(v),T=c[h+=255&w].g-8;return 0<T&&(X(v,v.u+8),w=$(v),h+=c[h].value,h+=w&(1<<T)-1),X(v,v.u+c[h].g),c[h].value}function fr(c,h,v){return v.g+=c.g,v.value+=c.value<<h>>>0,e(8>=v.g),c.g}function lr(c,h,v){var w=c.xc;return e((h=w==0?0:c.vc[c.md*(v>>w)+(h>>w)])<c.Wb),c.Ya[h]}function en(c,h,v,w){var T=c.ab,I=c.c*h,D=c.C;h=D+h;var M=v,U=w;for(w=c.Ta,v=c.Ua;0<T--;){var V=c.gc[T],le=D,ve=h,ye=M,he=U,Ce=(U=w,M=v,V.Ea);switch(e(le<ve),e(ve<=V.nc),V.hc){case 2:yd(ye,he,(ve-le)*Ce,U,M);break;case 0:var be=le,ue=ve,ce=U,ke=M,Ae=($e=V).Ea;be==0&&(Jf(ye,he,null,null,1,ce,ke),_t(ye,he+1,0,0,Ae-1,ce,ke+1),he+=Ae,ke+=Ae,++be);for(var je=1<<$e.b,Ye=je-1,Ue=Xe(Ae,$e.b),nt=$e.K,$e=$e.w+(be>>$e.b)*Ue;be<ue;){var Ut=nt,qt=$e,It=1;for(Yu(ye,he,ce,ke-Ae,1,ce,ke);It<Ae;){var At=(It&~Ye)+je;At>Ae&&(At=Ae),(0,ha[Ut[qt++]>>8&15])(ye,he+ +It,ce,ke+It-Ae,At-It,ce,ke+It),It=At}he+=Ae,ke+=Ae,++be&Ye||($e+=Ue)}ve!=V.nc&&n(U,M-Ce,U,M+(ve-le-1)*Ce,Ce);break;case 1:for(Ce=ye,ue=he,Ae=(ye=V.Ea)-(ke=ye&~(ce=(he=1<<V.b)-1)),be=Xe(ye,V.b),je=V.K,V=V.w+(le>>V.b)*be;le<ve;){for(Ye=je,Ue=V,nt=new ze,$e=ue+ke,Ut=ue+ye;ue<$e;)St(Ye[Ue++],nt),ho(nt,Ce,ue,he,U,M),ue+=he,M+=he;ue<Ut&&(St(Ye[Ue++],nt),ho(nt,Ce,ue,Ae,U,M),ue+=Ae,M+=Ae),++le&ce||(V+=be)}break;case 3:if(ye==U&&he==M&&0<V.b){for(ue=U,ye=Ce=M+(ve-le)*Ce-(ke=(ve-le)*Xe(V.Ea,V.b)),he=U,ce=M,be=[],ke=(Ae=ke)-1;0<=ke;--ke)be[ke]=he[ce+ke];for(ke=Ae-1;0<=ke;--ke)ue[ye+ke]=be[ke];Ns(V,le,ve,U,Ce,U,M)}else Ns(V,le,ve,ye,he,U,M)}M=w,U=v}U!=v&&n(w,v,M,U,I)}function di(c,h){var v=c.V,w=c.Ba+c.c*c.C,T=h-c.C;if(e(h<=c.l.o),e(16>=T),0<T){var I=c.l,D=c.Ta,M=c.Ua,U=I.width;if(en(c,T,v,w),T=M=[M],e((v=c.C)<(w=h)),e(I.v<I.va),w>I.o&&(w=I.o),v<I.j){var V=I.j-v;v=I.j,T[0]+=V*U}if(v>=w?v=0:(T[0]+=4*I.v,I.ka=v-I.j,I.U=I.va-I.v,I.T=w-v,v=1),v){if(M=M[0],11>(v=c.ca).S){var le=v.f.RGBA,ve=(w=v.S,T=I.U,I=I.T,V=le.eb,le.A),ye=I;for(le=le.fb+c.Ma*le.A;0<ye--;){var he=D,Ce=M,be=T,ue=V,ce=le;switch(w){case Sd:$n(he,Ce,be,ue,ce);break;case kd:Cn(he,Ce,be,ue,ce);break;case Xf:Cn(he,Ce,be,ue,ce),ks(ue,ce,0,be,1,0);break;case Xg:Ui(he,Ce,be,ue,ce);break;case jd:Jt(he,Ce,be,ue,ce,1);break;case Qf:Jt(he,Ce,be,ue,ce,1),ks(ue,ce,0,be,1,0);break;case Cd:Jt(he,Ce,be,ue,ce,0);break;case Ad:Jt(he,Ce,be,ue,ce,0),ks(ue,ce,1,be,1,0);break;case Zf:fa(he,Ce,be,ue,ce);break;case em:fa(he,Ce,be,ue,ce),Qt(ue,ce,be,1,0);break;case Qg:Ri(he,Ce,be,ue,ce);break;default:e(0)}M+=U,le+=ve}c.Ma+=I}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=v.height)}}c.C=h,e(c.C<=c.i)}function Us(c){var h;if(0<c.ua)return 0;for(h=0;h<c.Wb;++h){var v=c.Ya[h].G,w=c.Ya[h].H;if(0<v[1][w[1]+0].g||0<v[2][w[2]+0].g||0<v[3][w[3]+0].g)return 0}return 1}function kn(c,h,v,w,T,I){if(c.Z!=0){var D=c.qd,M=c.rd;for(e(va[c.Z]!=null);h<v;++h)va[c.Z](D,M,w,T,w,T,I),D=w,M=T,T+=I;c.qd=D,c.rd=M}}function Ir(c,h){var v=c.l.ma,w=v.Z==0||v.Z==1?c.l.j:c.C;if(w=c.C<w?w:c.C,e(h<=c.l.o),h>w){var T=c.l.width,I=v.ca,D=v.tb+T*w,M=c.V,U=c.Ba+c.c*w,V=c.gc;e(c.ab==1),e(V[0].hc==3),xd(V[0],w,h,M,U,I,D),kn(v,w,h,I,D,T)}c.C=c.Ma=h}function jn(c,h,v,w,T,I,D){var M=c.$/w,U=c.$%w,V=c.m,le=c.s,ve=v+c.$,ye=ve;T=v+w*T;var he=v+w*I,Ce=280+le.ua,be=c.Pb?M:16777216,ue=0<le.ua?le.Wa:null,ce=le.wc,ke=ve<he?lr(le,U,M):null;e(c.C<I),e(he<=T);var Ae=!1;e:for(;;){for(;Ae||ve<he;){var je=0;if(M>=be){var Ye=ve-v;e((be=c).Pb),be.wd=be.m,be.xd=Ye,0<be.s.ua&&we(be.s.Wa,be.s.vb),be=M+bw}if(U&ce||(ke=lr(le,U,M)),e(ke!=null),ke.Qb&&(h[ve]=ke.qb,Ae=!0),!Ae)if(ae(V),ke.jc){je=V,Ye=h;var Ue=ve,nt=ke.pd[$(je)&rn-1];e(ke.jc),256>nt.g?(X(je,je.u+nt.g),Ye[Ue]=nt.value,je=0):(X(je,je.u+nt.g-256),e(256<=nt.value),je=nt.value),je==0&&(Ae=!0)}else je=Or(ke.G[0],ke.H[0],V);if(V.h)break;if(Ae||256>je){if(!Ae)if(ke.nd)h[ve]=(ke.qb|je<<8)>>>0;else{if(ae(V),Ae=Or(ke.G[1],ke.H[1],V),ae(V),Ye=Or(ke.G[2],ke.H[2],V),Ue=Or(ke.G[3],ke.H[3],V),V.h)break;h[ve]=(Ue<<24|Ae<<16|je<<8|Ye)>>>0}if(Ae=!1,++ve,++U>=w&&(U=0,++M,D!=null&&M<=I&&!(M%16)&&D(c,M),ue!=null))for(;ye<ve;)je=h[ye++],ue.X[(506832829*je&4294967295)>>>ue.Mb]=je}else if(280>je){if(je=Sn(je-256,V),Ye=Or(ke.G[4],ke.H[4],V),ae(V),Ye=Tr(w,Ye=Sn(Ye,V)),V.h)break;if(ve-v<Ye||T-ve<je)break e;for(Ue=0;Ue<je;++Ue)h[ve+Ue]=h[ve+Ue-Ye];for(ve+=je,U+=je;U>=w;)U-=w,++M,D!=null&&M<=I&&!(M%16)&&D(c,M);if(e(ve<=T),U&ce&&(ke=lr(le,U,M)),ue!=null)for(;ye<ve;)je=h[ye++],ue.X[(506832829*je&4294967295)>>>ue.Mb]=je}else{if(!(je<Ce))break e;for(Ae=je-280,e(ue!=null);ye<ve;)je=h[ye++],ue.X[(506832829*je&4294967295)>>>ue.Mb]=je;je=ve,e(!(Ae>>>(Ye=ue).Xa)),h[je]=Ye.X[Ae],Ae=!0}Ae||e(V.h==Y(V))}if(c.Pb&&V.h&&ve<T)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&we(c.s.vb,c.s.Wa);else{if(V.h)break e;D!=null&&D(c,M>I?I:M),c.a=0,c.$=ve-v}return 1}return c.a=3,0}function ys(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var h=c.Wa;h!=null&&(h.X=null),c.vb=null,e(c!=null)}function tn(){var c=new cl;return c==null?null:(c.a=0,c.xb=r1,Xn("Predictor","VP8LPredictors"),Xn("Predictor","VP8LPredictors_C"),Xn("PredictorAdd","VP8LPredictorsAdd"),Xn("PredictorAdd","VP8LPredictorsAdd_C"),yd=Ct,ho=at,$n=Re,Cn=zr,fa=kt,Ri=Yt,Ui=Mt,P.VP8LMapColor32b=gl,P.VP8LMapColor8b=bd,c)}function xs(c,h,v,w,T){var I=1,D=[c],M=[h],U=w.m,V=w.s,le=null,ve=0;e:for(;;){if(v)for(;I&&ne(U,1);){var ye=D,he=M,Ce=w,be=1,ue=Ce.m,ce=Ce.gc[Ce.ab],ke=ne(ue,2);if(Ce.Oc&1<<ke)I=0;else{switch(Ce.Oc|=1<<ke,ce.hc=ke,ce.Ea=ye[0],ce.nc=he[0],ce.K=[null],++Ce.ab,e(4>=Ce.ab),ke){case 0:case 1:ce.b=ne(ue,3)+2,be=xs(Xe(ce.Ea,ce.b),Xe(ce.nc,ce.b),0,Ce,ce.K),ce.K=ce.K[0];break;case 3:var Ae,je=ne(ue,8)+1,Ye=16<je?0:4<je?1:2<je?2:3;if(ye[0]=Xe(ce.Ea,Ye),ce.b=Ye,Ae=be=xs(je,1,0,Ce,ce.K)){var Ue,nt=je,$e=ce,Ut=1<<(8>>$e.b),qt=i(Ut);if(qt==null)Ae=0;else{var It=$e.K[0],At=$e.w;for(qt[0]=$e.K[0][0],Ue=1;Ue<1*nt;++Ue)qt[Ue]=Te(It[At+Ue],qt[Ue-1]);for(;Ue<4*Ut;++Ue)qt[Ue]=0;$e.K[0]=null,$e.K[0]=qt,Ae=1}}be=Ae;break;case 2:break;default:e(0)}I=be}}if(D=D[0],M=M[0],I&&ne(U,1)&&!(I=1<=(ve=ne(U,4))&&11>=ve)){w.a=3;break e}var Kt;if(Kt=I)t:{var Gt,wt,Fr,zn=w,Mr=D,qn=M,Wt=ve,ss=v,is=zn.m,Jr=zn.s,nn=[null],Pn=1,As=0,gi=xw[Wt];r:for(;;){if(ss&&ne(is,1)){var Kr=ne(is,3)+2,qi=Xe(Mr,Kr),vo=Xe(qn,Kr),wl=qi*vo;if(!xs(qi,vo,0,zn,nn))break r;for(nn=nn[0],Jr.xc=Kr,Gt=0;Gt<wl;++Gt){var ya=nn[Gt]>>8&65535;nn[Gt]=ya,ya>=Pn&&(Pn=ya+1)}}if(is.h)break r;for(wt=0;5>wt;++wt){var wr=e1[wt];!wt&&0<Wt&&(wr+=1<<Wt),As<wr&&(As=wr)}var sm=a(Pn*gi,O),c1=Pn,d1=a(c1,q);if(d1==null)var Td=null;else e(65536>=c1),Td=d1;var tc=i(As);if(Td==null||tc==null||sm==null){zn.a=1;break r}var Od=sm;for(Gt=Fr=0;Gt<Pn;++Gt){var Vs=Td[Gt],Nl=Vs.G,_l=Vs.H,h1=0,Id=1,f1=0;for(wt=0;5>wt;++wt){wr=e1[wt],Nl[wt]=Od,_l[wt]=Fr,!wt&&0<Wt&&(wr+=1<<Wt);s:{var Dd,im=wr,Fd=zn,rc=tc,Bw=Od,$w=Fr,am=0,xa=Fd.m,zw=ne(xa,1);if(s(rc,0,0,im),zw){var qw=ne(xa,1)+1,Ww=ne(xa,1),m1=ne(xa,Ww==0?1:8);rc[m1]=1,qw==2&&(rc[m1=ne(xa,8)]=1);var Md=1}else{var p1=i(19),g1=ne(xa,4)+4;if(19<g1){Fd.a=3;var Rd=0;break s}for(Dd=0;Dd<g1;++Dd)p1[vw[Dd]]=ne(xa,3);var om=void 0,nc=void 0,v1=Fd,Vw=p1,Ud=im,y1=rc,lm=0,ba=v1.m,x1=8,b1=a(128,O);n:for(;A(b1,0,7,Vw,19);){if(ne(ba,1)){var Hw=2+2*ne(ba,3);if((om=2+ne(ba,Hw))>Ud)break n}else om=Ud;for(nc=0;nc<Ud&&om--;){ae(ba);var w1=b1[0+(127&$(ba))];X(ba,ba.u+w1.g);var Sl=w1.value;if(16>Sl)y1[nc++]=Sl,Sl!=0&&(x1=Sl);else{var Gw=Sl==16,N1=Sl-16,Yw=pw[N1],_1=ne(ba,mw[N1])+Yw;if(nc+_1>Ud)break n;for(var Jw=Gw?x1:0;0<_1--;)y1[nc++]=Jw}}lm=1;break n}lm||(v1.a=3),Md=lm}(Md=Md&&!xa.h)&&(am=A(Bw,$w,8,rc,im)),Md&&am!=0?Rd=am:(Fd.a=3,Rd=0)}if(Rd==0)break r;if(Id&&gw[wt]==1&&(Id=Od[Fr].g==0),h1+=Od[Fr].g,Fr+=Rd,3>=wt){var sc,um=tc[0];for(sc=1;sc<wr;++sc)tc[sc]>um&&(um=tc[sc]);f1+=um}}if(Vs.nd=Id,Vs.Qb=0,Id&&(Vs.qb=(Nl[3][_l[3]+0].value<<24|Nl[1][_l[1]+0].value<<16|Nl[2][_l[2]+0].value)>>>0,h1==0&&256>Nl[0][_l[0]+0].value&&(Vs.Qb=1,Vs.qb+=Nl[0][_l[0]+0].value<<8)),Vs.jc=!Vs.Qb&&6>f1,Vs.jc){var Bd,Wi=Vs;for(Bd=0;Bd<rn;++Bd){var wa=Bd,Na=Wi.pd[wa],$d=Wi.G[0][Wi.H[0]+wa];256<=$d.value?(Na.g=$d.g+256,Na.value=$d.value):(Na.g=0,Na.value=0,wa>>=fr($d,8,Na),wa>>=fr(Wi.G[1][Wi.H[1]+wa],16,Na),wa>>=fr(Wi.G[2][Wi.H[2]+wa],0,Na),fr(Wi.G[3][Wi.H[3]+wa],24,Na))}}}Jr.vc=nn,Jr.Wb=Pn,Jr.Ya=Td,Jr.yc=sm,Kt=1;break t}Kt=0}if(!(I=Kt)){w.a=3;break e}if(0<ve){if(V.ua=1<<ve,!et(V.Wa,ve)){w.a=1,I=0;break e}}else V.ua=0;var cm=w,S1=D,Kw=M,dm=cm.s,hm=dm.xc;if(cm.c=S1,cm.i=Kw,dm.md=Xe(S1,hm),dm.wc=hm==0?-1:(1<<hm)-1,v){w.xb=Cw;break e}if((le=i(D*M))==null){w.a=1,I=0;break e}I=(I=jn(w,le,0,D,M,M,null))&&!U.h;break e}return I?(T!=null?T[0]=le:(e(le==null),e(v)),w.$=0,v||ys(V)):ys(V),I}function Mn(c,h){var v=c.c*c.i,w=v+h+16*h;return e(c.c<=h),c.V=i(w),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+v+h,1)}function Ci(c,h){var v=c.C,w=h-v,T=c.V,I=c.Ba+c.c*v;for(e(h<=c.l.o);0<w;){var D=16<w?16:w,M=c.l.ma,U=c.l.width,V=U*D,le=M.ca,ve=M.tb+U*v,ye=c.Ta,he=c.Ua;en(c,D,T,I),Cr(ye,he,le,ve,V),kn(M,v,v+D,le,ve,U),w-=D,T+=D*c.c,v+=D}e(v==h),c.C=c.Ma=h}function Bs(){this.ub=this.yd=this.td=this.Rb=0}function hi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ai(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function bs(){this.Yb=function(){var c=[];return function h(v,w,T){for(var I=T[w],D=0;D<I&&(v.push(T.length>w+1?[]:0),!(T.length<w+1));D++)h(v[D],w+1,T)}(c,0,[3,11]),c}()}function Yo(){this.jb=i(3),this.Wc=o([4,8],bs),this.Xc=o([4,17],bs)}function Jo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function $s(){this.ld=this.La=this.dd=this.tc=0}function so(){this.Na=this.la=0}function Ou(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function aa(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Iu(){this.uc=this.M=this.Nb=0,this.wa=Array(new $s),this.Y=0,this.ya=Array(new aa),this.aa=0,this.l=new Pi}function io(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ko(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new Bs,this.Kc=new hi,this.ed=new Jo,this.Qa=new Ai,this.Ic=this.$c=this.Aa=0,this.D=new Iu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,xe),this.ia=0,this.pb=a(4,Ou),this.Pa=new Yo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new io),this.Hd=0,this.rb=Array(new so),this.sb=0,this.wa=Array(new $s),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new aa),this.L=this.aa=0,this.gd=o([4,2],$s),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zo(){var c=new Ko;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Qu||(Qu=la)),c}function mr(c,h,v){return c.a==0&&(c.a=h,c.sc=v,c.cb=0),0}function Xo(c,h,v){return 3<=v&&c[h+0]==157&&c[h+1]==1&&c[h+2]==42}function oa(c,h){if(c==null)return 0;if(c.a=0,c.sc="OK",h==null)return mr(c,2,"null VP8Io passed to VP8GetHeaders()");var v=h.data,w=h.w,T=h.ha;if(4>T)return mr(c,7,"Truncated header.");var I=v[w+0]|v[w+1]<<8|v[w+2]<<16,D=c.Od;if(D.Rb=!(1&I),D.td=I>>1&7,D.yd=I>>4&1,D.ub=I>>5,3<D.td)return mr(c,3,"Incorrect keyframe parameters.");if(!D.yd)return mr(c,4,"Frame not displayable.");w+=3,T-=3;var M=c.Kc;if(D.Rb){if(7>T)return mr(c,7,"cannot parse picture header");if(!Xo(v,w,T))return mr(c,3,"Bad code word");M.c=16383&(v[w+4]<<8|v[w+3]),M.Td=v[w+4]>>6,M.i=16383&(v[w+6]<<8|v[w+5]),M.Ud=v[w+6]>>6,w+=7,T-=7,c.za=M.c+15>>4,c.Ub=M.i+15>>4,h.width=M.c,h.height=M.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,s((I=c.Pa).jb,0,255,I.jb.length),e((I=c.Qa)!=null),I.Cb=0,I.Bb=0,I.Fb=1,s(I.Zb,0,0,I.Zb.length),s(I.Lb,0,0,I.Lb)}if(D.ub>T)return mr(c,7,"bad partition length");ee(I=c.m,v,w,D.ub),w+=D.ub,T-=D.ub,D.Rb&&(M.Ld=J(I),M.Kd=J(I)),M=c.Qa;var U,V=c.Pa;if(e(I!=null),e(M!=null),M.Cb=J(I),M.Cb){if(M.Bb=J(I),J(I)){for(M.Fb=J(I),U=0;4>U;++U)M.Zb[U]=J(I)?de(I,7):0;for(U=0;4>U;++U)M.Lb[U]=J(I)?de(I,6):0}if(M.Bb)for(U=0;3>U;++U)V.jb[U]=J(I)?Q(I,8):255}else M.Bb=0;if(I.Ka)return mr(c,3,"cannot parse segment header");if((M=c.ed).zd=J(I),M.Tb=Q(I,6),M.wb=Q(I,3),M.Pc=J(I),M.Pc&&J(I)){for(V=0;4>V;++V)J(I)&&(M.vd[V]=de(I,6));for(V=0;4>V;++V)J(I)&&(M.od[V]=de(I,6))}if(c.L=M.Tb==0?0:M.zd?1:2,I.Ka)return mr(c,3,"cannot parse filter header");var le=T;if(T=U=w,w=U+le,M=le,c.Xb=(1<<Q(c.m,2))-1,le<3*(V=c.Xb))v=7;else{for(U+=3*V,M-=3*V,le=0;le<V;++le){var ve=v[T+0]|v[T+1]<<8|v[T+2]<<16;ve>M&&(ve=M),ee(c.Jc[+le],v,U,ve),U+=ve,M-=ve,T+=3}ee(c.Jc[+V],v,U,M),v=U<w?0:5}if(v!=0)return mr(c,v,"cannot parse partitions");for(v=Q(U=c.m,7),T=J(U)?de(U,4):0,w=J(U)?de(U,4):0,M=J(U)?de(U,4):0,V=J(U)?de(U,4):0,U=J(U)?de(U,4):0,le=c.Qa,ve=0;4>ve;++ve){if(le.Cb){var ye=le.Zb[ve];le.Fb||(ye+=v)}else{if(0<ve){c.pb[ve]=c.pb[0];continue}ye=v}var he=c.pb[ve];he.Sc[0]=tm[rs(ye+T,127)],he.Sc[1]=rm[rs(ye+0,127)],he.Eb[0]=2*tm[rs(ye+w,127)],he.Eb[1]=101581*rm[rs(ye+M,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=tm[rs(ye+V,117)],he.Qc[1]=rm[rs(ye+U,127)],he.lc=ye+U}if(!D.Rb)return mr(c,4,"Not a key frame.");for(J(I),D=c.Pa,v=0;4>v;++v){for(T=0;8>T;++T)for(w=0;3>w;++w)for(M=0;11>M;++M)V=ge(I,kw[v][T][w][M])?Q(I,8):_w[v][T][w][M],D.Wc[v][T].Yb[w][M]=V;for(T=0;17>T;++T)D.Xc[v][T]=D.Wc[v][jw[T]]}return c.kc=J(I),c.kc&&(c.Bd=Q(I,8)),c.cb=1}function la(c,h,v,w,T,I,D){var M=h[T].Yb[v];for(v=0;16>T;++T){if(!ge(c,M[v+0]))return T;for(;!ge(c,M[v+1]);)if(M=h[++T].Yb[0],v=0,T==16)return 16;var U=h[T+1].Yb;if(ge(c,M[v+2])){var V=c,le=0;if(ge(V,(ye=M)[(ve=v)+3]))if(ge(V,ye[ve+6])){for(M=0,ve=2*(le=ge(V,ye[ve+8]))+(ye=ge(V,ye[ve+9+le])),le=0,ye=ww[ve];ye[M];++M)le+=le+ge(V,ye[M]);le+=3+(8<<ve)}else ge(V,ye[ve+7])?(le=7+2*ge(V,165),le+=ge(V,145)):le=5+ge(V,159);else le=ge(V,ye[ve+4])?3+ge(V,ye[ve+5]):2;M=U[2]}else le=1,M=U[1];U=D+Nw[T],0>(V=c).b&&pe(V);var ve,ye=V.b,he=(ve=V.Ca>>1)-(V.I>>ye)>>31;--V.b,V.Ca+=he,V.Ca|=1,V.I-=(ve+1&he)<<ye,I[U]=((le^he)-he)*w[(0<T)+0]}return 16}function Ei(c){var h=c.rb[c.sb-1];h.la=0,h.Na=0,s(c.zc,0,0,c.zc.length),c.ja=0}function Qo(c,h){if(c==null)return 0;if(h==null)return mr(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!oa(c,h))return 0;if(e(c.cb),h.ac==null||h.ac(h)){h.ob&&(c.L=0);var v=Ld[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=h.v-v>>4,c.zb=h.j-v>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=h.o+15+v>>4,c.Hb=h.va+15+v>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var w=c.ed;for(v=0;4>v;++v){var T;if(c.Qa.Cb){var I=c.Qa.Lb[v];c.Qa.Fb||(I+=w.Tb)}else I=w.Tb;for(T=0;1>=T;++T){var D=c.gd[v][T],M=I;if(w.Pc&&(M+=w.vd[0],T&&(M+=w.od[0])),0<(M=0>M?0:63<M?63:M)){var U=M;0<w.wb&&(U=4<w.wb?U>>2:U>>1)>9-w.wb&&(U=9-w.wb),1>U&&(U=1),D.dd=U,D.tc=2*M+U,D.ld=40<=M?2:15<=M?1:0}else D.tc=0;D.La=T}}}v=0}else mr(c,6,"Frame setup failed"),v=c.a;if(v=v==0){if(v){c.$c=0,0<c.Aa||(c.Ic=Uw);e:{v=c.Ic,w=4*(U=c.za);var V=32*U,le=U+1,ve=0<c.L?U*(0<c.Aa?2:1):0,ye=(c.Aa==2?2:1)*U;if((D=w+832+(T=3*(16*v+Ld[c.L])/2*V)+(I=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=D)v=0;else{if(D>c.Vb){if(c.Vb=0,c.Ec=i(D),c.Fc=0,c.Ec==null){v=mr(c,1,"no memory during frame initialization.");break e}c.Vb=D}D=c.Ec,M=c.Fc,c.Ac=D,c.Bc=M,M+=w,c.Gd=a(V,io),c.Hd=0,c.rb=a(le+1,so),c.sb=1,c.wa=ve?a(ve,$s):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=U),e(!0),c.oc=D,c.pc=M,M+=832,c.ya=a(ye,aa),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=U),c.R=16*U,c.B=8*U,U=(V=Ld[c.L])*c.R,V=V/2*c.B,c.sa=D,c.ta=M+U,c.qa=c.sa,c.ra=c.ta+16*v*c.R+V,c.Ha=c.qa,c.Ia=c.ra+8*v*c.B+V,c.$c=0,M+=T,c.mb=I?D:null,c.nb=I?M:null,e(M+I<=c.Fc+c.Vb),Ei(c),s(c.Ac,c.Bc,0,w),v=1}}if(v){if(h.ka=0,h.y=c.sa,h.O=c.ta,h.f=c.qa,h.N=c.ra,h.ea=c.Ha,h.Vd=c.Ia,h.fa=c.R,h.Rc=c.B,h.F=null,h.J=0,!Nd){for(v=-255;255>=v;++v)qr[255+v]=0>v?-v:v;for(v=-1020;1020>=v;++v)$i[1020+v]=-128>v?-128:127<v?127:v;for(v=-112;112>=v;++v)Xu[112+v]=-16>v?-16:15<v?15:v;for(v=-255;510>=v;++v)bl[255+v]=0>v?0:255<v?255:v;Nd=1}vl=Mu,Bi=Du,Ju=el,An=Fu,_s=tl,jr=Ti,yl=Qe,wd=Je,Ku=xr,fo=Ht,mo=Pt,ma=Et,po=un,xl=uo,go=fe,pa=_e,Zu=Ve,Ss=Ge,Ws[0]=es,Ws[1]=Ru,Ws[2]=oo,Ws[3]=il,Ws[4]=al,Ws[5]=lo,Ws[6]=ol,Ws[7]=ll,Ws[8]=ul,Ws[9]=$u,ga[0]=nl,ga[1]=rl,ga[2]=zs,ga[3]=ua,ga[4]=Gr,ga[5]=Bu,ga[6]=sl,zi[0]=fi,zi[1]=Uu,zi[2]=da,zi[3]=Oi,zi[4]=mi,zi[5]=ts,zi[6]=ws,v=1}else v=0}v&&(v=function(he,Ce){for(he.M=0;he.M<he.Va;++he.M){var be,ue=he.Jc[he.M&he.Xb],ce=he.m,ke=he;for(be=0;be<ke.za;++be){var Ae=ce,je=ke,Ye=je.Ac,Ue=je.Bc+4*be,nt=je.zc,$e=je.ya[je.aa+be];if(je.Qa.Bb?$e.$b=ge(Ae,je.Pa.jb[0])?2+ge(Ae,je.Pa.jb[2]):ge(Ae,je.Pa.jb[1]):$e.$b=0,je.kc&&($e.Ad=ge(Ae,je.Bd)),$e.Za=!ge(Ae,145)+0,$e.Za){var Ut=$e.Ob,qt=0;for(je=0;4>je;++je){var It,At=nt[0+je];for(It=0;4>It;++It){At=Sw[Ye[Ue+It]][At];for(var Kt=t1[ge(Ae,At[0])];0<Kt;)Kt=t1[2*Kt+ge(Ae,At[Kt])];At=-Kt,Ye[Ue+It]=At}n(Ut,qt,Ye,Ue,4),qt+=4,nt[0+je]=At}}else At=ge(Ae,156)?ge(Ae,128)?1:3:ge(Ae,163)?2:0,$e.Ob[0]=At,s(Ye,Ue,At,4),s(nt,0,At,4);$e.Dd=ge(Ae,142)?ge(Ae,114)?ge(Ae,183)?1:3:2:0}if(ke.m.Ka)return mr(he,7,"Premature end-of-partition0 encountered.");for(;he.ja<he.za;++he.ja){if(ke=ue,Ae=(ce=he).rb[ce.sb-1],Ye=ce.rb[ce.sb+ce.ja],be=ce.ya[ce.aa+ce.ja],Ue=ce.kc?be.Ad:0)Ae.la=Ye.la=0,be.Za||(Ae.Na=Ye.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var Gt,wt;if(Ae=Ye,Ye=ke,Ue=ce.Pa.Xc,nt=ce.ya[ce.aa+ce.ja],$e=ce.pb[nt.$b],je=nt.ad,Ut=0,qt=ce.rb[ce.sb-1],At=It=0,s(je,Ut,0,384),nt.Za)var Fr=0,zn=Ue[3];else{Kt=i(16);var Mr=Ae.Na+qt.Na;if(Mr=Qu(Ye,Ue[1],Mr,$e.Eb,0,Kt,0),Ae.Na=qt.Na=(0<Mr)+0,1<Mr)vl(Kt,0,je,Ut);else{var qn=Kt[0]+3>>3;for(Kt=0;256>Kt;Kt+=16)je[Ut+Kt]=qn}Fr=1,zn=Ue[0]}var Wt=15&Ae.la,ss=15&qt.la;for(Kt=0;4>Kt;++Kt){var is=1&ss;for(qn=wt=0;4>qn;++qn)Wt=Wt>>1|(is=(Mr=Qu(Ye,zn,Mr=is+(1&Wt),$e.Sc,Fr,je,Ut))>Fr)<<7,wt=wt<<2|(3<Mr?3:1<Mr?2:je[Ut+0]!=0),Ut+=16;Wt>>=4,ss=ss>>1|is<<7,It=(It<<8|wt)>>>0}for(zn=Wt,Fr=ss>>4,Gt=0;4>Gt;Gt+=2){for(wt=0,Wt=Ae.la>>4+Gt,ss=qt.la>>4+Gt,Kt=0;2>Kt;++Kt){for(is=1&ss,qn=0;2>qn;++qn)Mr=is+(1&Wt),Wt=Wt>>1|(is=0<(Mr=Qu(Ye,Ue[2],Mr,$e.Qc,0,je,Ut)))<<3,wt=wt<<2|(3<Mr?3:1<Mr?2:je[Ut+0]!=0),Ut+=16;Wt>>=2,ss=ss>>1|is<<5}At|=wt<<4*Gt,zn|=Wt<<4<<Gt,Fr|=(240&ss)<<Gt}Ae.la=zn,qt.la=Fr,nt.Hc=It,nt.Gc=At,nt.ia=43690&At?0:$e.ia,Ue=!(It|At)}if(0<ce.L&&(ce.wa[ce.Y+ce.ja]=ce.gd[be.$b][be.Za],ce.wa[ce.Y+ce.ja].La|=!Ue),ke.Ka)return mr(he,7,"Premature end-of-file encountered.")}if(Ei(he),ce=Ce,ke=1,be=(ue=he).D,Ae=0<ue.L&&ue.M>=ue.zb&&ue.M<=ue.Va,ue.Aa==0)e:{if(be.M=ue.M,be.uc=Ae,Wu(ue,be),ke=1,be=(wt=ue.D).Nb,Ae=(At=Ld[ue.L])*ue.R,Ye=At/2*ue.B,Kt=16*be*ue.R,qn=8*be*ue.B,Ue=ue.sa,nt=ue.ta-Ae+Kt,$e=ue.qa,je=ue.ra-Ye+qn,Ut=ue.Ha,qt=ue.Ia-Ye+qn,ss=(Wt=wt.M)==0,It=Wt>=ue.Va-1,ue.Aa==2&&Wu(ue,wt),wt.uc)for(is=(Mr=ue).D.M,e(Mr.D.uc),wt=Mr.yb;wt<Mr.Hb;++wt){Fr=wt,zn=is;var Jr=(nn=(wr=Mr).D).Nb;Gt=wr.R;var nn=nn.wa[nn.Y+Fr],Pn=wr.sa,As=wr.ta+16*Jr*Gt+16*Fr,gi=nn.dd,Kr=nn.tc;if(Kr!=0)if(e(3<=Kr),wr.L==1)0<Fr&&pa(Pn,As,Gt,Kr+4),nn.La&&Ss(Pn,As,Gt,Kr),0<zn&&go(Pn,As,Gt,Kr+4),nn.La&&Zu(Pn,As,Gt,Kr);else{var qi=wr.B,vo=wr.qa,wl=wr.ra+8*Jr*qi+8*Fr,ya=wr.Ha,wr=wr.Ia+8*Jr*qi+8*Fr;Jr=nn.ld,0<Fr&&(wd(Pn,As,Gt,Kr+4,gi,Jr),fo(vo,wl,ya,wr,qi,Kr+4,gi,Jr)),nn.La&&(ma(Pn,As,Gt,Kr,gi,Jr),xl(vo,wl,ya,wr,qi,Kr,gi,Jr)),0<zn&&(yl(Pn,As,Gt,Kr+4,gi,Jr),Ku(vo,wl,ya,wr,qi,Kr+4,gi,Jr)),nn.La&&(mo(Pn,As,Gt,Kr,gi,Jr),po(vo,wl,ya,wr,qi,Kr,gi,Jr))}}if(ue.ia&&alert("todo:DitherRow"),ce.put!=null){if(wt=16*Wt,Wt=16*(Wt+1),ss?(ce.y=ue.sa,ce.O=ue.ta+Kt,ce.f=ue.qa,ce.N=ue.ra+qn,ce.ea=ue.Ha,ce.W=ue.Ia+qn):(wt-=At,ce.y=Ue,ce.O=nt,ce.f=$e,ce.N=je,ce.ea=Ut,ce.W=qt),It||(Wt-=At),Wt>ce.o&&(Wt=ce.o),ce.F=null,ce.J=null,ue.Fa!=null&&0<ue.Fa.length&&wt<Wt&&(ce.J=Un(ue,ce,wt,Wt-wt),ce.F=ue.mb,ce.F==null&&ce.F.length==0)){ke=mr(ue,3,"Could not decode alpha data.");break e}wt<ce.j&&(At=ce.j-wt,wt=ce.j,e(!(1&At)),ce.O+=ue.R*At,ce.N+=ue.B*(At>>1),ce.W+=ue.B*(At>>1),ce.F!=null&&(ce.J+=ce.width*At)),wt<Wt&&(ce.O+=ce.v,ce.N+=ce.v>>1,ce.W+=ce.v>>1,ce.F!=null&&(ce.J+=ce.v),ce.ka=wt-ce.j,ce.U=ce.va-ce.v,ce.T=Wt-wt,ke=ce.put(ce))}be+1!=ue.Ic||It||(n(ue.sa,ue.ta-Ae,Ue,nt+16*ue.R,Ae),n(ue.qa,ue.ra-Ye,$e,je+8*ue.B,Ye),n(ue.Ha,ue.Ia-Ye,Ut,qt+8*ue.B,Ye))}if(!ke)return mr(he,6,"Output aborted.")}return 1}(c,h)),h.bc!=null&&h.bc(h),v&=1}return v?(c.cb=0,v):0}function Rn(c,h,v,w,T){T=c[h+v+32*w]+(T>>3),c[h+v+32*w]=-256&T?0>T?0:255:T}function Qn(c,h,v,w,T,I){Rn(c,h,0,v,w+T),Rn(c,h,1,v,w+I),Rn(c,h,2,v,w-I),Rn(c,h,3,v,w-T)}function ln(c){return(20091*c>>16)+c}function Li(c,h,v,w){var T,I=0,D=i(16);for(T=0;4>T;++T){var M=c[h+0]+c[h+8],U=c[h+0]-c[h+8],V=(35468*c[h+4]>>16)-ln(c[h+12]),le=ln(c[h+4])+(35468*c[h+12]>>16);D[I+0]=M+le,D[I+1]=U+V,D[I+2]=U-V,D[I+3]=M-le,I+=4,h++}for(T=I=0;4>T;++T)M=(c=D[I+0]+4)+D[I+8],U=c-D[I+8],V=(35468*D[I+4]>>16)-ln(D[I+12]),Rn(v,w,0,0,M+(le=ln(D[I+4])+(35468*D[I+12]>>16))),Rn(v,w,1,0,U+V),Rn(v,w,2,0,U-V),Rn(v,w,3,0,M-le),I++,w+=32}function Ti(c,h,v,w){var T=c[h+0]+4,I=35468*c[h+4]>>16,D=ln(c[h+4]),M=35468*c[h+1]>>16;Qn(v,w,0,T+D,c=ln(c[h+1]),M),Qn(v,w,1,T+I,c,M),Qn(v,w,2,T-I,c,M),Qn(v,w,3,T-D,c,M)}function Du(c,h,v,w,T){Li(c,h,v,w),T&&Li(c,h+16,v,w+4)}function el(c,h,v,w){Bi(c,h+0,v,w,1),Bi(c,h+32,v,w+128,1)}function Fu(c,h,v,w){var T;for(c=c[h+0]+4,T=0;4>T;++T)for(h=0;4>h;++h)Rn(v,w,h,T,c)}function tl(c,h,v,w){c[h+0]&&An(c,h+0,v,w),c[h+16]&&An(c,h+16,v,w+4),c[h+32]&&An(c,h+32,v,w+128),c[h+48]&&An(c,h+48,v,w+128+4)}function Mu(c,h,v,w){var T,I=i(16);for(T=0;4>T;++T){var D=c[h+0+T]+c[h+12+T],M=c[h+4+T]+c[h+8+T],U=c[h+4+T]-c[h+8+T],V=c[h+0+T]-c[h+12+T];I[0+T]=D+M,I[8+T]=D-M,I[4+T]=V+U,I[12+T]=V-U}for(T=0;4>T;++T)D=(c=I[0+4*T]+3)+I[3+4*T],M=I[1+4*T]+I[2+4*T],U=I[1+4*T]-I[2+4*T],V=c-I[3+4*T],v[w+0]=D+M>>3,v[w+16]=V+U>>3,v[w+32]=D-M>>3,v[w+48]=V-U>>3,w+=64}function ao(c,h,v){var w,T=h-32,I=ns,D=255-c[T-1];for(w=0;w<v;++w){var M,U=I,V=D+c[h-1];for(M=0;M<v;++M)c[h+M]=U[V+c[T+M]];h+=32}}function Ru(c,h){ao(c,h,4)}function Uu(c,h){ao(c,h,8)}function rl(c,h){ao(c,h,16)}function zs(c,h){var v;for(v=0;16>v;++v)n(c,h+32*v,c,h-32,16)}function ua(c,h){var v;for(v=16;0<v;--v)s(c,h,c[h-1],16),h+=32}function ca(c,h,v){var w;for(w=0;16>w;++w)s(h,v+32*w,c,16)}function nl(c,h){var v,w=16;for(v=0;16>v;++v)w+=c[h-1+32*v]+c[h+v-32];ca(w>>5,c,h)}function Gr(c,h){var v,w=8;for(v=0;16>v;++v)w+=c[h-1+32*v];ca(w>>4,c,h)}function Bu(c,h){var v,w=8;for(v=0;16>v;++v)w+=c[h+v-32];ca(w>>4,c,h)}function sl(c,h){ca(128,c,h)}function ct(c,h,v){return c+2*h+v+2>>2}function oo(c,h){var v,w=h-32;for(w=new Uint8Array([ct(c[w-1],c[w+0],c[w+1]),ct(c[w+0],c[w+1],c[w+2]),ct(c[w+1],c[w+2],c[w+3]),ct(c[w+2],c[w+3],c[w+4])]),v=0;4>v;++v)n(c,h+32*v,w,0,w.length)}function il(c,h){var v=c[h-1],w=c[h-1+32],T=c[h-1+64],I=c[h-1+96];Se(c,h+0,16843009*ct(c[h-1-32],v,w)),Se(c,h+32,16843009*ct(v,w,T)),Se(c,h+64,16843009*ct(w,T,I)),Se(c,h+96,16843009*ct(T,I,I))}function es(c,h){var v,w=4;for(v=0;4>v;++v)w+=c[h+v-32]+c[h-1+32*v];for(w>>=3,v=0;4>v;++v)s(c,h+32*v,w,4)}function al(c,h){var v=c[h-1+0],w=c[h-1+32],T=c[h-1+64],I=c[h-1-32],D=c[h+0-32],M=c[h+1-32],U=c[h+2-32],V=c[h+3-32];c[h+0+96]=ct(w,T,c[h-1+96]),c[h+1+96]=c[h+0+64]=ct(v,w,T),c[h+2+96]=c[h+1+64]=c[h+0+32]=ct(I,v,w),c[h+3+96]=c[h+2+64]=c[h+1+32]=c[h+0+0]=ct(D,I,v),c[h+3+64]=c[h+2+32]=c[h+1+0]=ct(M,D,I),c[h+3+32]=c[h+2+0]=ct(U,M,D),c[h+3+0]=ct(V,U,M)}function ol(c,h){var v=c[h+1-32],w=c[h+2-32],T=c[h+3-32],I=c[h+4-32],D=c[h+5-32],M=c[h+6-32],U=c[h+7-32];c[h+0+0]=ct(c[h+0-32],v,w),c[h+1+0]=c[h+0+32]=ct(v,w,T),c[h+2+0]=c[h+1+32]=c[h+0+64]=ct(w,T,I),c[h+3+0]=c[h+2+32]=c[h+1+64]=c[h+0+96]=ct(T,I,D),c[h+3+32]=c[h+2+64]=c[h+1+96]=ct(I,D,M),c[h+3+64]=c[h+2+96]=ct(D,M,U),c[h+3+96]=ct(M,U,U)}function lo(c,h){var v=c[h-1+0],w=c[h-1+32],T=c[h-1+64],I=c[h-1-32],D=c[h+0-32],M=c[h+1-32],U=c[h+2-32],V=c[h+3-32];c[h+0+0]=c[h+1+64]=I+D+1>>1,c[h+1+0]=c[h+2+64]=D+M+1>>1,c[h+2+0]=c[h+3+64]=M+U+1>>1,c[h+3+0]=U+V+1>>1,c[h+0+96]=ct(T,w,v),c[h+0+64]=ct(w,v,I),c[h+0+32]=c[h+1+96]=ct(v,I,D),c[h+1+32]=c[h+2+96]=ct(I,D,M),c[h+2+32]=c[h+3+96]=ct(D,M,U),c[h+3+32]=ct(M,U,V)}function ll(c,h){var v=c[h+0-32],w=c[h+1-32],T=c[h+2-32],I=c[h+3-32],D=c[h+4-32],M=c[h+5-32],U=c[h+6-32],V=c[h+7-32];c[h+0+0]=v+w+1>>1,c[h+1+0]=c[h+0+64]=w+T+1>>1,c[h+2+0]=c[h+1+64]=T+I+1>>1,c[h+3+0]=c[h+2+64]=I+D+1>>1,c[h+0+32]=ct(v,w,T),c[h+1+32]=c[h+0+96]=ct(w,T,I),c[h+2+32]=c[h+1+96]=ct(T,I,D),c[h+3+32]=c[h+2+96]=ct(I,D,M),c[h+3+64]=ct(D,M,U),c[h+3+96]=ct(M,U,V)}function $u(c,h){var v=c[h-1+0],w=c[h-1+32],T=c[h-1+64],I=c[h-1+96];c[h+0+0]=v+w+1>>1,c[h+2+0]=c[h+0+32]=w+T+1>>1,c[h+2+32]=c[h+0+64]=T+I+1>>1,c[h+1+0]=ct(v,w,T),c[h+3+0]=c[h+1+32]=ct(w,T,I),c[h+3+32]=c[h+1+64]=ct(T,I,I),c[h+3+64]=c[h+2+64]=c[h+0+96]=c[h+1+96]=c[h+2+96]=c[h+3+96]=I}function ul(c,h){var v=c[h-1+0],w=c[h-1+32],T=c[h-1+64],I=c[h-1+96],D=c[h-1-32],M=c[h+0-32],U=c[h+1-32],V=c[h+2-32];c[h+0+0]=c[h+2+32]=v+D+1>>1,c[h+0+32]=c[h+2+64]=w+v+1>>1,c[h+0+64]=c[h+2+96]=T+w+1>>1,c[h+0+96]=I+T+1>>1,c[h+3+0]=ct(M,U,V),c[h+2+0]=ct(D,M,U),c[h+1+0]=c[h+3+32]=ct(v,D,M),c[h+1+32]=c[h+3+64]=ct(w,v,D),c[h+1+64]=c[h+3+96]=ct(T,w,v),c[h+1+96]=ct(I,T,w)}function da(c,h){var v;for(v=0;8>v;++v)n(c,h+32*v,c,h-32,8)}function Oi(c,h){var v;for(v=0;8>v;++v)s(c,h,c[h-1],8),h+=32}function Ii(c,h,v){var w;for(w=0;8>w;++w)s(h,v+32*w,c,8)}function fi(c,h){var v,w=8;for(v=0;8>v;++v)w+=c[h+v-32]+c[h-1+32*v];Ii(w>>4,c,h)}function ts(c,h){var v,w=4;for(v=0;8>v;++v)w+=c[h+v-32];Ii(w>>3,c,h)}function mi(c,h){var v,w=4;for(v=0;8>v;++v)w+=c[h-1+32*v];Ii(w>>3,c,h)}function ws(c,h){Ii(128,c,h)}function Di(c,h,v){var w=c[h-v],T=c[h+0],I=3*(T-w)+Kf[1020+c[h-2*v]-c[h+v]],D=_d[112+(I+4>>3)];c[h-v]=ns[255+w+_d[112+(I+3>>3)]],c[h+0]=ns[255+T-D]}function S(c,h,v,w){var T=c[h+0],I=c[h+v];return js[255+c[h-2*v]-c[h-v]]>w||js[255+I-T]>w}function te(c,h,v,w){return 4*js[255+c[h-v]-c[h+0]]+js[255+c[h-2*v]-c[h+v]]<=w}function se(c,h,v,w,T){var I=c[h-3*v],D=c[h-2*v],M=c[h-v],U=c[h+0],V=c[h+v],le=c[h+2*v],ve=c[h+3*v];return 4*js[255+M-U]+js[255+D-V]>w?0:js[255+c[h-4*v]-I]<=T&&js[255+I-D]<=T&&js[255+D-M]<=T&&js[255+ve-le]<=T&&js[255+le-V]<=T&&js[255+V-U]<=T}function fe(c,h,v,w){var T=2*w+1;for(w=0;16>w;++w)te(c,h+w,v,T)&&Di(c,h+w,v)}function _e(c,h,v,w){var T=2*w+1;for(w=0;16>w;++w)te(c,h+w*v,1,T)&&Di(c,h+w*v,1)}function Ve(c,h,v,w){var T;for(T=3;0<T;--T)fe(c,h+=4*v,v,w)}function Ge(c,h,v,w){var T;for(T=3;0<T;--T)_e(c,h+=4,v,w)}function Be(c,h,v,w,T,I,D,M){for(I=2*I+1;0<T--;){if(se(c,h,v,I,D))if(S(c,h,v,M))Di(c,h,v);else{var U=c,V=h,le=v,ve=U[V-2*le],ye=U[V-le],he=U[V+0],Ce=U[V+le],be=U[V+2*le],ue=27*(ke=Kf[1020+3*(he-ye)+Kf[1020+ve-Ce]])+63>>7,ce=18*ke+63>>7,ke=9*ke+63>>7;U[V-3*le]=ns[255+U[V-3*le]+ke],U[V-2*le]=ns[255+ve+ce],U[V-le]=ns[255+ye+ue],U[V+0]=ns[255+he-ue],U[V+le]=ns[255+Ce-ce],U[V+2*le]=ns[255+be-ke]}h+=w}}function De(c,h,v,w,T,I,D,M){for(I=2*I+1;0<T--;){if(se(c,h,v,I,D))if(S(c,h,v,M))Di(c,h,v);else{var U=c,V=h,le=v,ve=U[V-le],ye=U[V+0],he=U[V+le],Ce=_d[112+((be=3*(ye-ve))+4>>3)],be=_d[112+(be+3>>3)],ue=Ce+1>>1;U[V-2*le]=ns[255+U[V-2*le]+ue],U[V-le]=ns[255+ve+be],U[V+0]=ns[255+ye-Ce],U[V+le]=ns[255+he-ue]}h+=w}}function Qe(c,h,v,w,T,I){Be(c,h,v,1,16,w,T,I)}function Je(c,h,v,w,T,I){Be(c,h,1,v,16,w,T,I)}function Pt(c,h,v,w,T,I){var D;for(D=3;0<D;--D)De(c,h+=4*v,v,1,16,w,T,I)}function Et(c,h,v,w,T,I){var D;for(D=3;0<D;--D)De(c,h+=4,1,v,16,w,T,I)}function xr(c,h,v,w,T,I,D,M){Be(c,h,T,1,8,I,D,M),Be(v,w,T,1,8,I,D,M)}function Ht(c,h,v,w,T,I,D,M){Be(c,h,1,T,8,I,D,M),Be(v,w,1,T,8,I,D,M)}function un(c,h,v,w,T,I,D,M){De(c,h+4*T,T,1,8,I,D,M),De(v,w+4*T,T,1,8,I,D,M)}function uo(c,h,v,w,T,I,D,M){De(c,h+4,1,T,8,I,D,M),De(v,w+4,1,T,8,I,D,M)}function Fi(){this.ba=new Dn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new sr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Mi(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function co(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zu(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new O}function cl(){this.xb=this.a=0,this.l=new Pi,this.ca=new Dn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zu,this.ab=0,this.gc=a(4,co),this.Oc=0}function Rt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pt(c,h,v,w,T,I,D){for(c=c==null?0:c[h+0],h=0;h<D;++h)T[I+h]=c+v[w+h]&255,c=T[I+h]}function ur(c,h,v,w,T,I,D){var M;if(c==null)pt(null,null,v,w,T,I,D);else for(M=0;M<D;++M)T[I+M]=c[h+M]+v[w+M]&255}function cr(c,h,v,w,T,I,D){if(c==null)pt(null,null,v,w,T,I,D);else{var M,U=c[h+0],V=U,le=U;for(M=0;M<D;++M)V=le+(U=c[h+M])-V,le=v[w+M]+(-256&V?0>V?0:255:V)&255,V=U,T[I+M]=le}}function Un(c,h,v,w){var T=h.width,I=h.o;if(e(c!=null&&h!=null),0>v||0>=w||v+w>I)return null;if(!c.Cc){if(c.ga==null){var D;if(c.ga=new Rt,(D=c.ga==null)||(D=h.width*h.o,e(c.Gb.length==0),c.Gb=i(D),c.Uc=0,c.Gb==null?D=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,D=1),D=!D),!D){D=c.ga;var M=c.Fa,U=c.P,V=c.qc,le=c.mb,ve=c.nb,ye=U+1,he=V-1,Ce=D.l;if(e(M!=null&&le!=null&&h!=null),va[0]=null,va[1]=pt,va[2]=ur,va[3]=cr,D.ca=le,D.tb=ve,D.c=h.width,D.i=h.height,e(0<D.c&&0<D.i),1>=V)h=0;else if(D.$a=M[U+0]>>0&3,D.Z=M[U+0]>>2&3,D.Lc=M[U+0]>>4&3,U=M[U+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||U)h=0;else if(Ce.put=Nn,Ce.ac=hr,Ce.bc=_n,Ce.ma=D,Ce.width=h.width,Ce.height=h.height,Ce.Da=h.Da,Ce.v=h.v,Ce.va=h.va,Ce.j=h.j,Ce.o=h.o,D.$a)e:{e(D.$a==1),h=tn();t:for(;;){if(h==null){h=0;break e}if(e(D!=null),D.mc=h,h.c=D.c,h.i=D.i,h.l=D.l,h.l.ma=D,h.l.width=D.c,h.l.height=D.i,h.a=0,H(h.m,M,ye,he),!xs(D.c,D.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Us(h.s)?(D.ic=1,M=h.c*h.i,h.Ta=null,h.Ua=0,h.V=i(M),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(D.ic=0,h=Mn(h,D.c)),!h))break t;h=1;break e}D.mc=null,h=0}else h=he>=D.c*D.i;D=!h}if(D)return null;c.ga.Lc!=1?c.Ga=0:w=I-v}e(c.ga!=null),e(v+w<=I);e:{if(h=(M=c.ga).c,I=M.l.o,M.$a==0){if(ye=c.rc,he=c.Vc,Ce=c.Fa,U=c.P+1+v*h,V=c.mb,le=c.nb+v*h,e(U<=c.P+c.qc),M.Z!=0)for(e(va[M.Z]!=null),D=0;D<w;++D)va[M.Z](ye,he,Ce,U,V,le,h),ye=V,he=le,le+=h,U+=h;else for(D=0;D<w;++D)n(V,le,Ce,U,h),ye=V,he=le,le+=h,U+=h;c.rc=ye,c.Vc=he}else{if(e(M.mc!=null),h=v+w,e((D=M.mc)!=null),e(h<=D.i),D.C>=h)h=1;else if(M.ic||me(),M.ic){M=D.V,ye=D.Ba,he=D.c;var be=D.i,ue=(Ce=1,U=D.$/he,V=D.$%he,le=D.m,ve=D.s,D.$),ce=he*be,ke=he*h,Ae=ve.wc,je=ue<ke?lr(ve,V,U):null;e(ue<=ce),e(h<=be),e(Us(ve));t:for(;;){for(;!le.h&&ue<ke;){if(V&Ae||(je=lr(ve,V,U)),e(je!=null),ae(le),256>(be=Or(je.G[0],je.H[0],le)))M[ye+ue]=be,++ue,++V>=he&&(V=0,++U<=h&&!(U%16)&&Ir(D,U));else{if(!(280>be)){Ce=0;break t}be=Sn(be-256,le);var Ye,Ue=Or(je.G[4],je.H[4],le);if(ae(le),!(ue>=(Ue=Tr(he,Ue=Sn(Ue,le)))&&ce-ue>=be)){Ce=0;break t}for(Ye=0;Ye<be;++Ye)M[ye+ue+Ye]=M[ye+ue+Ye-Ue];for(ue+=be,V+=be;V>=he;)V-=he,++U<=h&&!(U%16)&&Ir(D,U);ue<ke&&V&Ae&&(je=lr(ve,V,U))}e(le.h==Y(le))}Ir(D,U>h?h:U);break t}!Ce||le.h&&ue<ce?(Ce=0,D.a=le.h?5:3):D.$=ue,h=Ce}else h=jn(D,D.V,D.Ba,D.c,D.i,h,Ci);if(!h){w=0;break e}}v+w>=I&&(c.Cc=1),w=1}if(!w)return null;if(c.Cc&&((w=c.ga)!=null&&(w.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+v*T}function m(c,h,v,w,T,I){for(;0<T--;){var D,M=c,U=h+(v?1:0),V=c,le=h+(v?0:3);for(D=0;D<w;++D){var ve=V[le+4*D];ve!=255&&(ve*=32897,M[U+4*D+0]=M[U+4*D+0]*ve>>23,M[U+4*D+1]=M[U+4*D+1]*ve>>23,M[U+4*D+2]=M[U+4*D+2]*ve>>23)}h+=I}}function E(c,h,v,w,T){for(;0<w--;){var I;for(I=0;I<v;++I){var D=c[h+2*I+0],M=15&(V=c[h+2*I+1]),U=4369*M,V=(240&V|V>>4)*U>>16;c[h+2*I+0]=(240&D|D>>4)*U>>16&240|(15&D|D<<4)*U>>16>>4&15,c[h+2*I+1]=240&V|M}h+=T}}function G(c,h,v,w,T,I,D,M){var U,V,le=255;for(V=0;V<T;++V){for(U=0;U<w;++U){var ve=c[h+U];I[D+4*U]=ve,le&=ve}h+=v,D+=M}return le!=255}function ie(c,h,v,w,T){var I;for(I=0;I<T;++I)v[w+I]=c[h+I]>>8}function me(){ks=m,Qt=E,er=G,Cr=ie}function Ne(c,h,v){P[c]=function(w,T,I,D,M,U,V,le,ve,ye,he,Ce,be,ue,ce,ke,Ae){var je,Ye=Ae-1>>1,Ue=M[U+0]|V[le+0]<<16,nt=ve[ye+0]|he[Ce+0]<<16;e(w!=null);var $e=3*Ue+nt+131074>>2;for(h(w[T+0],255&$e,$e>>16,be,ue),I!=null&&($e=3*nt+Ue+131074>>2,h(I[D+0],255&$e,$e>>16,ce,ke)),je=1;je<=Ye;++je){var Ut=M[U+je]|V[le+je]<<16,qt=ve[ye+je]|he[Ce+je]<<16,It=Ue+Ut+nt+qt+524296,At=It+2*(Ut+nt)>>3;$e=At+Ue>>1,Ue=(It=It+2*(Ue+qt)>>3)+Ut>>1,h(w[T+2*je-1],255&$e,$e>>16,be,ue+(2*je-1)*v),h(w[T+2*je-0],255&Ue,Ue>>16,be,ue+(2*je-0)*v),I!=null&&($e=It+nt>>1,Ue=At+qt>>1,h(I[D+2*je-1],255&$e,$e>>16,ce,ke+(2*je-1)*v),h(I[D+2*je+0],255&Ue,Ue>>16,ce,ke+(2*je+0)*v)),Ue=Ut,nt=qt}1&Ae||($e=3*Ue+nt+131074>>2,h(w[T+Ae-1],255&$e,$e>>16,be,ue+(Ae-1)*v),I!=null&&($e=3*nt+Ue+131074>>2,h(I[D+Ae-1],255&$e,$e>>16,ce,ke+(Ae-1)*v)))}}function Ee(){Cs[Sd]=Aw,Cs[kd]=n1,Cs[Xg]=Pw,Cs[jd]=s1,Cs[Cd]=i1,Cs[Zf]=a1,Cs[Qg]=Ew,Cs[Xf]=n1,Cs[Qf]=s1,Cs[Ad]=i1,Cs[em]=a1}function He(c){return c&-16384?0>c?0:255:c>>Lw}function tt(c,h){return He((19077*c>>8)+(26149*h>>8)-14234)}function bt(c,h,v){return He((19077*c>>8)-(6419*h>>8)-(13320*v>>8)+8708)}function gt(c,h){return He((19077*c>>8)+(33050*h>>8)-17685)}function Lt(c,h,v,w,T){w[T+0]=tt(c,v),w[T+1]=bt(c,h,v),w[T+2]=gt(c,h)}function pr(c,h,v,w,T){w[T+0]=gt(c,h),w[T+1]=bt(c,h,v),w[T+2]=tt(c,v)}function br(c,h,v,w,T){var I=bt(c,h,v);h=I<<3&224|gt(c,h)>>3,w[T+0]=248&tt(c,v)|I>>5,w[T+1]=h}function Dr(c,h,v,w,T){var I=240&gt(c,h)|15;w[T+0]=240&tt(c,v)|bt(c,h,v)>>4,w[T+1]=I}function cn(c,h,v,w,T){w[T+0]=255,Lt(c,h,v,w,T+1)}function Yr(c,h,v,w,T){pr(c,h,v,w,T),w[T+3]=255}function qs(c,h,v,w,T){Lt(c,h,v,w,T),w[T+3]=255}function rs(c,h){return 0>c?0:c>h?h:c}function pi(c,h,v){P[c]=function(w,T,I,D,M,U,V,le,ve){for(var ye=le+(-2&ve)*v;le!=ye;)h(w[T+0],I[D+0],M[U+0],V,le),h(w[T+1],I[D+0],M[U+0],V,le+v),T+=2,++D,++U,le+=2*v;1&ve&&h(w[T+0],I[D+0],M[U+0],V,le)}}function vd(c,h,v){return v==0?c==0?h==0?6:5:h==0?4:0:v}function qu(c,h,v,w,T){switch(c>>>30){case 3:Bi(h,v,w,T,0);break;case 2:jr(h,v,w,T);break;case 1:An(h,v,w,T)}}function Wu(c,h){var v,w,T=h.M,I=h.Nb,D=c.oc,M=c.pc+40,U=c.oc,V=c.pc+584,le=c.oc,ve=c.pc+600;for(v=0;16>v;++v)D[M+32*v-1]=129;for(v=0;8>v;++v)U[V+32*v-1]=129,le[ve+32*v-1]=129;for(0<T?D[M-1-32]=U[V-1-32]=le[ve-1-32]=129:(s(D,M-32-1,127,21),s(U,V-32-1,127,9),s(le,ve-32-1,127,9)),w=0;w<c.za;++w){var ye=h.ya[h.aa+w];if(0<w){for(v=-1;16>v;++v)n(D,M+32*v-4,D,M+32*v+12,4);for(v=-1;8>v;++v)n(U,V+32*v-4,U,V+32*v+4,4),n(le,ve+32*v-4,le,ve+32*v+4,4)}var he=c.Gd,Ce=c.Hd+w,be=ye.ad,ue=ye.Hc;if(0<T&&(n(D,M-32,he[Ce].y,0,16),n(U,V-32,he[Ce].f,0,8),n(le,ve-32,he[Ce].ea,0,8)),ye.Za){var ce=D,ke=M-32+16;for(0<T&&(w>=c.za-1?s(ce,ke,he[Ce].y[15],4):n(ce,ke,he[Ce+1].y,0,4)),v=0;4>v;v++)ce[ke+128+v]=ce[ke+256+v]=ce[ke+384+v]=ce[ke+0+v];for(v=0;16>v;++v,ue<<=2)ce=D,ke=M+l1[v],Ws[ye.Ob[v]](ce,ke),qu(ue,be,16*+v,ce,ke)}else if(ce=vd(w,T,ye.Ob[0]),ga[ce](D,M),ue!=0)for(v=0;16>v;++v,ue<<=2)qu(ue,be,16*+v,D,M+l1[v]);for(v=ye.Gc,ce=vd(w,T,ye.Dd),zi[ce](U,V),zi[ce](le,ve),ue=be,ce=U,ke=V,255&(ye=v>>0)&&(170&ye?Ju(ue,256,ce,ke):_s(ue,256,ce,ke)),ye=le,ue=ve,255&(v>>=8)&&(170&v?Ju(be,320,ye,ue):_s(be,320,ye,ue)),T<c.Ub-1&&(n(he[Ce].y,0,D,M+480,16),n(he[Ce].f,0,U,V+224,8),n(he[Ce].ea,0,le,ve+224,8)),v=8*I*c.B,he=c.sa,Ce=c.ta+16*w+16*I*c.R,be=c.qa,ye=c.ra+8*w+v,ue=c.Ha,ce=c.Ia+8*w+v,v=0;16>v;++v)n(he,Ce+v*c.R,D,M+32*v,16);for(v=0;8>v;++v)n(be,ye+v*c.B,U,V+32*v,8),n(ue,ce+v*c.B,le,ve+32*v,8)}}function dl(c,h,v,w,T,I,D,M,U){var V=[0],le=[0],ve=0,ye=U!=null?U.kd:0,he=U??new Mi;if(c==null||12>v)return 7;he.data=c,he.w=h,he.ha=v,h=[h],v=[v],he.gb=[he.gb];e:{var Ce=h,be=v,ue=he.gb;if(e(c!=null),e(be!=null),e(ue!=null),ue[0]=0,12<=be[0]&&!r(c,Ce[0],"RIFF")){if(r(c,Ce[0]+8,"WEBP")){ue=3;break e}var ce=Fe(c,Ce[0]+4);if(12>ce||4294967286<ce){ue=3;break e}if(ye&&ce>be[0]-8){ue=7;break e}ue[0]=ce,Ce[0]+=12,be[0]-=12}ue=0}if(ue!=0)return ue;for(ce=0<he.gb[0],v=v[0];;){e:{var ke=c;be=h,ue=v;var Ae=V,je=le,Ye=Ce=[0];if(($e=ve=[ve])[0]=0,8>ue[0])ue=7;else{if(!r(ke,be[0],"VP8X")){if(Fe(ke,be[0]+4)!=10){ue=3;break e}if(18>ue[0]){ue=7;break e}var Ue=Fe(ke,be[0]+8),nt=1+Le(ke,be[0]+12);if(2147483648<=nt*(ke=1+Le(ke,be[0]+15))){ue=3;break e}Ye!=null&&(Ye[0]=Ue),Ae!=null&&(Ae[0]=nt),je!=null&&(je[0]=ke),be[0]+=18,ue[0]-=18,$e[0]=1}ue=0}}if(ve=ve[0],Ce=Ce[0],ue!=0)return ue;if(be=!!(2&Ce),!ce&&ve)return 3;if(I!=null&&(I[0]=!!(16&Ce)),D!=null&&(D[0]=be),M!=null&&(M[0]=0),D=V[0],Ce=le[0],ve&&be&&U==null){ue=0;break}if(4>v){ue=7;break}if(ce&&ve||!ce&&!ve&&!r(c,h[0],"ALPH")){v=[v],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{Ue=c,ue=h,ce=v;var $e=he.gb;Ae=he.na,je=he.P,Ye=he.Sa,nt=22,e(Ue!=null),e(ce!=null),ke=ue[0];var Ut=ce[0];for(e(Ae!=null),e(Ye!=null),Ae[0]=null,je[0]=null,Ye[0]=0;;){if(ue[0]=ke,ce[0]=Ut,8>Ut){ue=7;break e}var qt=Fe(Ue,ke+4);if(4294967286<qt){ue=3;break e}var It=8+qt+1&-2;if(nt+=It,0<$e&&nt>$e){ue=3;break e}if(!r(Ue,ke,"VP8 ")||!r(Ue,ke,"VP8L")){ue=0;break e}if(Ut[0]<It){ue=7;break e}r(Ue,ke,"ALPH")||(Ae[0]=Ue,je[0]=ke+8,Ye[0]=qt),ke+=It,Ut-=It}}if(v=v[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],ue!=0)break}v=[v],he.Ja=[he.Ja],he.xa=[he.xa];e:if($e=c,ue=h,ce=v,Ae=he.gb[0],je=he.Ja,Ye=he.xa,Ue=ue[0],ke=!r($e,Ue,"VP8 "),nt=!r($e,Ue,"VP8L"),e($e!=null),e(ce!=null),e(je!=null),e(Ye!=null),8>ce[0])ue=7;else{if(ke||nt){if($e=Fe($e,Ue+4),12<=Ae&&$e>Ae-12){ue=3;break e}if(ye&&$e>ce[0]-8){ue=7;break e}je[0]=$e,ue[0]+=8,ce[0]-=8,Ye[0]=nt}else Ye[0]=5<=ce[0]&&$e[Ue+0]==47&&!($e[Ue+4]>>5),je[0]=ce[0];ue=0}if(v=v[0],he.Ja=he.Ja[0],he.xa=he.xa[0],h=h[0],ue!=0)break;if(4294967286<he.Ja)return 3;if(M==null||be||(M[0]=he.xa?2:1),D=[D],Ce=[Ce],he.xa){if(5>v){ue=7;break}M=D,ye=Ce,be=I,c==null||5>v?c=0:5<=v&&c[h+0]==47&&!(c[h+4]>>5)?(ce=[0],$e=[0],Ae=[0],H(je=new L,c,h,v),rt(je,ce,$e,Ae)?(M!=null&&(M[0]=ce[0]),ye!=null&&(ye[0]=$e[0]),be!=null&&(be[0]=Ae[0]),c=1):c=0):c=0}else{if(10>v){ue=7;break}M=Ce,c==null||10>v||!Xo(c,h+3,v-3)?c=0:(ye=c[h+0]|c[h+1]<<8|c[h+2]<<16,be=16383&(c[h+7]<<8|c[h+6]),c=16383&(c[h+9]<<8|c[h+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=he.Ja||!be||!c?c=0:(D&&(D[0]=be),M&&(M[0]=c),c=1))}if(!c||(D=D[0],Ce=Ce[0],ve&&(V[0]!=D||le[0]!=Ce)))return 3;U!=null&&(U[0]=he,U.offset=h-U.w,e(4294967286>h-U.w),e(U.offset==U.ha-v));break}return ue==0||ue==7&&ve&&U==null?(I!=null&&(I[0]|=he.na!=null&&0<he.na.length),w!=null&&(w[0]=D),T!=null&&(T[0]=Ce),0):ue}function Vu(c,h,v){var w=h.width,T=h.height,I=0,D=0,M=w,U=T;if(h.Da=c!=null&&0<c.Da,h.Da&&(M=c.cd,U=c.bd,I=c.v,D=c.j,11>v||(I&=-2,D&=-2),0>I||0>D||0>=M||0>=U||I+M>w||D+U>T))return 0;if(h.v=I,h.j=D,h.va=I+M,h.o=D+U,h.U=M,h.T=U,h.da=c!=null&&0<c.da,h.da){if(!mt(M,U,v=[c.ib],I=[c.hb]))return 0;h.ib=v[0],h.hb=I[0]}return h.ob=c!=null&&c.ob,h.Kb=c==null||!c.Sd,h.da&&(h.ob=h.ib<3*w/4&&h.hb<3*T/4,h.Kb=0),1}function Hu(c){if(c==null)return 2;if(11>c.S){var h=c.f.RGBA;h.fb+=(c.height-1)*h.A,h.A=-h.A}else h=c.f.kb,c=c.height,h.O+=(c-1)*h.fa,h.fa=-h.fa,h.N+=(c-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(c-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(c-1)*h.lb,h.lb=-h.lb);return 0}function hl(c,h,v,w){if(w==null||0>=c||0>=h)return 2;if(v!=null){if(v.Da){var T=v.cd,I=v.bd,D=-2&v.v,M=-2&v.j;if(0>D||0>M||0>=T||0>=I||D+T>c||M+I>h)return 2;c=T,h=I}if(v.da){if(!mt(c,h,T=[v.ib],I=[v.hb]))return 2;c=T[0],h=I[0]}}w.width=c,w.height=h;e:{var U=w.width,V=w.height;if(c=w.S,0>=U||0>=V||!(c>=Sd&&13>c))c=2;else{if(0>=w.Rd&&w.sd==null){D=I=T=h=0;var le=(M=U*u1[c])*V;if(11>c||(I=(V+1)/2*(h=(U+1)/2),c==12&&(D=(T=U)*V)),(V=i(le+2*I+D))==null){c=1;break e}w.sd=V,11>c?((U=w.f.RGBA).eb=V,U.fb=0,U.A=M,U.size=le):((U=w.f.kb).y=V,U.O=0,U.fa=M,U.Fd=le,U.f=V,U.N=0+le,U.Ab=h,U.Cd=I,U.ea=V,U.W=0+le+I,U.Db=h,U.Ed=I,c==12&&(U.F=V,U.J=0+le+2*I),U.Tc=D,U.lb=T)}if(h=1,T=w.S,I=w.width,D=w.height,T>=Sd&&13>T)if(11>T)c=w.f.RGBA,h&=(M=Math.abs(c.A))*(D-1)+I<=c.size,h&=M>=I*u1[T],h&=c.eb!=null;else{c=w.f.kb,M=(I+1)/2,le=(D+1)/2,U=Math.abs(c.fa),V=Math.abs(c.Ab);var ve=Math.abs(c.Db),ye=Math.abs(c.lb),he=ye*(D-1)+I;h&=U*(D-1)+I<=c.Fd,h&=V*(le-1)+M<=c.Cd,h=(h&=ve*(le-1)+M<=c.Ed)&U>=I&V>=M&ve>=M,h&=c.y!=null,h&=c.f!=null,h&=c.ea!=null,T==12&&(h&=ye>=I,h&=he<=c.Tc,h&=c.F!=null)}else h=0;c=h?0:2}}return c!=0||v!=null&&v.fd&&(c=Hu(w)),c}var rn=64,fl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ml=24,pl=32,Gu=8,Bn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(c){return c},P.Predictor2=function(c,h,v){return h[v+0]},P.Predictor3=function(c,h,v){return h[v+1]},P.Predictor4=function(c,h,v){return h[v-1]},P.Predictor5=function(c,h,v){return Ie(Ie(c,h[v+1]),h[v+0])},P.Predictor6=function(c,h,v){return Ie(c,h[v-1])},P.Predictor7=function(c,h,v){return Ie(c,h[v+0])},P.Predictor8=function(c,h,v){return Ie(h[v-1],h[v+0])},P.Predictor9=function(c,h,v){return Ie(h[v+0],h[v+1])},P.Predictor10=function(c,h,v){return Ie(Ie(c,h[v-1]),Ie(h[v+0],h[v+1]))},P.Predictor11=function(c,h,v){var w=h[v+0];return 0>=xt(w>>24&255,c>>24&255,(h=h[v-1])>>24&255)+xt(w>>16&255,c>>16&255,h>>16&255)+xt(w>>8&255,c>>8&255,h>>8&255)+xt(255&w,255&c,255&h)?w:c},P.Predictor12=function(c,h,v){var w=h[v+0];return(We((c>>24&255)+(w>>24&255)-((h=h[v-1])>>24&255))<<24|We((c>>16&255)+(w>>16&255)-(h>>16&255))<<16|We((c>>8&255)+(w>>8&255)-(h>>8&255))<<8|We((255&c)+(255&w)-(255&h)))>>>0},P.Predictor13=function(c,h,v){var w=h[v-1];return(ht((c=Ie(c,h[v+0]))>>24&255,w>>24&255)<<24|ht(c>>16&255,w>>16&255)<<16|ht(c>>8&255,w>>8&255)<<8|ht(c>>0&255,w>>0&255))>>>0};var Jf=P.PredictorAdd0;P.PredictorAdd1=_t,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var Yu=P.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var yd,Ns=P.ColorIndexInverseTransform,gl=P.MapARGB,xd=P.VP8LColorIndexInverseTransformAlpha,bd=P.MapAlpha,ha=P.VP8LPredictorsAdd=[];ha.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var ho,$n,Cn,fa,Ri,Ui,vl,Bi,jr,Ju,An,_s,yl,wd,Ku,fo,mo,ma,po,xl,go,pa,Zu,Ss,ks,Qt,er,Cr,qr=i(511),$i=i(2041),Xu=i(225),bl=i(767),Nd=0,Kf=$i,_d=Xu,ns=bl,js=qr,Sd=0,kd=1,Xg=2,jd=3,Cd=4,Zf=5,Qg=6,Xf=7,Qf=8,Ad=9,em=10,mw=[2,3,7],pw=[3,3,11],e1=[280,256,256,256,40],gw=[0,1,1,1,0],vw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],yw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bw=8,tm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qu=null,ww=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Nw=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],t1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_w=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Sw=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],kw=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ga=[],Ws=[],zi=[],Cw=1,r1=2,va=[],Cs=[];Ne("UpsampleRgbLinePair",Lt,3),Ne("UpsampleBgrLinePair",pr,3),Ne("UpsampleRgbaLinePair",qs,4),Ne("UpsampleBgraLinePair",Yr,4),Ne("UpsampleArgbLinePair",cn,4),Ne("UpsampleRgba4444LinePair",Dr,2),Ne("UpsampleRgb565LinePair",br,2);var Aw=P.UpsampleRgbLinePair,Pw=P.UpsampleBgrLinePair,n1=P.UpsampleRgbaLinePair,s1=P.UpsampleBgraLinePair,i1=P.UpsampleArgbLinePair,a1=P.UpsampleRgba4444LinePair,Ew=P.UpsampleRgb565LinePair,Pd=16,Ed=1<<Pd-1,ec=-227,nm=482,Lw=6,o1=0,Tw=i(256),Ow=i(256),Iw=i(256),Dw=i(256),Fw=i(nm-ec),Mw=i(nm-ec);pi("YuvToRgbRow",Lt,3),pi("YuvToBgrRow",pr,3),pi("YuvToRgbaRow",qs,4),pi("YuvToBgraRow",Yr,4),pi("YuvToArgbRow",cn,4),pi("YuvToRgba4444Row",Dr,2),pi("YuvToRgb565Row",br,2);var l1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ld=[0,2,8],Rw=[8,7,6,4,4,2,2,2,1,1,1,1],Uw=1;this.WebPDecodeRGBA=function(c,h,v,w,T){var I=kd,D=new Fi,M=new Dn;D.ba=M,M.S=I,M.width=[M.width],M.height=[M.height];var U=M.width,V=M.height,le=new vs;if(le==null||c==null)var ve=2;else e(le!=null),ve=dl(c,h,v,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ve!=0?U=0:(U!=null&&(U[0]=le.width[0]),V!=null&&(V[0]=le.height[0]),U=1),U){M.width=M.width[0],M.height=M.height[0],w!=null&&(w[0]=M.width),T!=null&&(T[0]=M.height);e:{if(w=new Pi,(T=new Mi).data=c,T.w=h,T.ha=v,T.kd=1,h=[0],e(T!=null),((c=dl(T.data,T.w,T.ha,null,null,null,h,null,T))==0||c==7)&&h[0]&&(c=4),(h=c)==0){if(e(D!=null),w.data=T.data,w.w=T.w+T.offset,w.ha=T.ha-T.offset,w.put=Nn,w.ac=hr,w.bc=_n,w.ma=D,T.xa){if((c=tn())==null){D=1;break e}if(function(ye,he){var Ce=[0],be=[0],ue=[0];t:for(;;){if(ye==null)return 0;if(he==null)return ye.a=2,0;if(ye.l=he,ye.a=0,H(ye.m,he.data,he.w,he.ha),!rt(ye.m,Ce,be,ue)){ye.a=3;break t}if(ye.xb=r1,he.width=Ce[0],he.height=be[0],!xs(Ce[0],be[0],1,ye,null))break t;return 1}return e(ye.a!=0),0}(c,w)){if(w=(h=hl(w.width,w.height,D.Oa,D.ba))==0){t:{w=c;r:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((v=w.l)!=null),e((T=v.ma)!=null),w.xb!=0){if(w.ca=T.ba,w.tb=T.tb,e(w.ca!=null),!Vu(T.Oa,v,jd)){w.a=2;break r}if(!Mn(w,v.width)||v.da)break r;if((v.da||Tt(w.ca.S))&&me(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&me()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!et(w.s.vb,w.s.Wa.Xa)){w.a=1;break r}w.xb=0}if(!jn(w,w.V,w.Ba,w.c,w.i,v.o,di))break r;T.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(h=c.a)}else h=c.a}else{if((c=new Zo)==null){D=1;break e}if(c.Fa=T.na,c.P=T.P,c.qc=T.Sa,oa(c,w)){if((h=hl(w.width,w.height,D.Oa,D.ba))==0){if(c.Aa=0,v=D.Oa,e((T=c)!=null),v!=null){if(0<(U=0>(U=v.Md)?0:100<U?255:255*U/100)){for(V=le=0;4>V;++V)12>(ve=T.pb[V]).lc&&(ve.ia=U*Rw[0>ve.lc?0:ve.lc]>>3),le|=ve.ia;le&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=v.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}Qo(c,w)||(h=c.a)}}else h=c.a}h==0&&D.Oa!=null&&D.Oa.fd&&(h=Hu(D.ba))}D=h}I=D!=0?null:11>I?M.f.RGBA.eb:M.f.kb.y}else I=null;return I};var u1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,F){for(var B="",A=0;A<4;A++)B+=String.fromCharCode(P[F++]);return B}function f(P,F){return(P[F+0]<<0|P[F+1]<<8|P[F+2]<<16)>>>0}function g(P,F){return(P[F+0]<<0|P[F+1]<<8|P[F+2]<<16|P[F+3]<<24)>>>0}new u;var y=[0],p=[0],k=[],N=new u,C=t,x=function(P,F){var B={},A=0,O=!1,z=0,q=0;if(B.frames=[],!function($,Y,X,ae){for(var pe=0;pe<ae;pe++)if($[Y+pe]!=X.charCodeAt(pe))return!0;return!1}(P,F,"RIFF",4)){var ee,Q;for(g(P,F+=4),F+=8;F<P.length;){var de=d(P,F),H=g(P,F+=4);F+=4;var oe=H+(1&H);switch(de){case"VP8 ":case"VP8L":B.frames[A]===void 0&&(B.frames[A]={}),(L=B.frames[A]).src_off=O?q:F-8,L.src_size=z+H+8,A++,O&&(O=!1,z=0,q=0);break;case"VP8X":(L=B.header={}).feature_flags=P[F];var ne=F+4;L.canvas_width=1+f(P,ne),ne+=3,L.canvas_height=1+f(P,ne),ne+=3;break;case"ALPH":O=!0,z=oe+8,q=F-8;break;case"ANIM":(L=B.header).bgcolor=g(P,F),ne=F+4,L.loop_count=(ee=P)[(Q=ne)+0]<<0|ee[Q+1]<<8,ne+=2;break;case"ANMF":var xe,L;(L=B.frames[A]={}).offset_x=2*f(P,F),F+=3,L.offset_y=2*f(P,F),F+=3,L.width=1+f(P,F),F+=3,L.height=1+f(P,F),F+=3,L.duration=f(P,F),F+=3,xe=P[F++],L.dispose=1&xe,L.blend=xe>>1&1}de!="ANMF"&&(F+=oe)}return B}}(C,0);x.response=C,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,_=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,y=[b.canvas_height],p=[b.canvas_width];for(var R=0;R<_.length&&_[R].blend!=0;R++);}var W=_[0],K=N.WebPDecodeRGBA(C,W.src_off,W.src_size,p,y);W.rgba=K,W.imgwidth=p[0],W.imgheight=y[0];for(var j=0;j<p[0]*y[0]*4;j++)k[j]=K[j];return this.width=p,this.height=y,this.data=k,this}(function(t){var e=function(){return typeof bp=="function"},r=function(y,p,k,N){var C=4,x=a;switch(N){case t.image_compression.FAST:C=1,x=i;break;case t.image_compression.MEDIUM:C=6,x=o;break;case t.image_compression.SLOW:C=9,x=u}y=n(y,p,k,x);var b=bp(y,{level:C});return t.__addimage__.arrayBufferToBinaryString(b)},n=function(y,p,k,N){for(var C,x,b,_=y.length/p,R=new Uint8Array(y.length+_),W=f(),K=0;K<_;K+=1){if(b=K*p,C=y.subarray(b,b+p),N)R.set(N(C,k,x),b+K);else{for(var j,P=W.length,F=[];j<P;j+=1)F[j]=W[j](C,k,x);var B=g(F.concat());R.set(F[B],b+K)}x=C}return R},s=function(y){var p=Array.apply([],y);return p.unshift(0),p},i=function(y,p){var k,N=[],C=y.length;N[0]=1;for(var x=0;x<C;x+=1)k=y[x-p]||0,N[x+1]=y[x]-k+256&255;return N},a=function(y,p,k){var N,C=[],x=y.length;C[0]=2;for(var b=0;b<x;b+=1)N=k&&k[b]||0,C[b+1]=y[b]-N+256&255;return C},o=function(y,p,k){var N,C,x=[],b=y.length;x[0]=3;for(var _=0;_<b;_+=1)N=y[_-p]||0,C=k&&k[_]||0,x[_+1]=y[_]+256-(N+C>>>1)&255;return x},u=function(y,p,k){var N,C,x,b,_=[],R=y.length;_[0]=4;for(var W=0;W<R;W+=1)N=y[W-p]||0,C=k&&k[W]||0,x=k&&k[W-p]||0,b=d(N,C,x),_[W+1]=y[W]-b+256&255;return _},d=function(y,p,k){if(y===p&&p===k)return y;var N=Math.abs(p-k),C=Math.abs(y-k),x=Math.abs(y+p-k-k);return N<=C&&N<=x?y:C<=x?p:k},f=function(){return[s,i,a,o,u]},g=function(y){var p=y.map(function(k){return k.reduce(function(N,C){return N+Math.abs(C)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(y,p,k,N){var C,x,b,_,R,W,K,j,P,F,B,A,O,z,q,ee=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(b=new Bk(y)).imgData,x=b.bits,C=b.colorSpace,R=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){P=(j=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,B=new Uint8Array(P*b.colors),F=new Uint8Array(P);var de,H=b.pixelBitlength-b.bits;for(z=0,q=0;z<P;z++){for(O=j[z],de=0;de<H;)B[q++]=O>>>de&255,de+=b.bits;F[z]=O>>>de&255}}if(b.bits===16){P=(j=new Uint32Array(b.decodePixels().buffer)).length,B=new Uint8Array(P*(32/b.pixelBitlength)*b.colors),F=new Uint8Array(P*(32/b.pixelBitlength)),A=b.colors>1,z=0,q=0;for(var oe=0;z<P;)O=j[z++],B[q++]=O>>>0&255,A&&(B[q++]=O>>>16&255,O=j[z++],B[q++]=O>>>0&255),F[oe++]=O>>>16&255;x=8}N!==t.image_compression.NONE&&e()?(y=r(B,b.width*b.colors,b.colors,N),K=r(F,b.width,1,N)):(y=B,K=F,ee=void 0)}if(b.colorType===3&&(C=this.color_spaces.INDEXED,W=b.palette,b.transparency.indexed)){var ne=b.transparency.indexed,xe=0;for(z=0,P=ne.length;z<P;++z)xe+=ne[z];if((xe/=255)===P-1&&ne.indexOf(0)!==-1)_=[ne.indexOf(0)];else if(xe!==P){for(j=b.decodePixels(),F=new Uint8Array(j.length),z=0,P=j.length;z<P;z++)F[z]=ne[j[z]];K=r(F,b.width,1)}}var L=function($){var Y;switch($){case t.image_compression.FAST:Y=11;break;case t.image_compression.MEDIUM:Y=13;break;case t.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(N);return ee===this.decode.FLATE_DECODE&&(Q="/Predictor "+L+" "),Q+="/Colors "+R+" /BitsPerComponent "+x+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(K&&this.__addimage__.isArrayBuffer(K)||this.__addimage__.isArrayBufferView(K))&&(K=this.__addimage__.arrayBufferToBinaryString(K)),{alias:k,data:y,index:p,filter:ee,decodeParameters:Q,transparency:_,palette:W,sMask:K,predictor:L,width:b.width,height:b.height,bitsPerComponent:x,colorSpace:C}}}})(ot.API),function(t){t.processGIF89A=function(e,r,n,s){var i=new $k(e),a=i.width,o=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:a,height:o},f=new r0(100).encode(d,100);return t.processJPEG.call(this,f,r,n,s)},t.processGIF87A=t.processGIF89A}(ot.API),Ys.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ys.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Zt.log("bit decode error:"+r)}},Ys.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var u=this.palette[i>>7-o&1];this.data[a+4*o]=u.blue,this.data[a+4*o+1]=u.green,this.data[a+4*o+2]=u.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ys.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,u=15&i,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*s+1>=this.width)break;d=this.palette[u],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ys.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Ys.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,u=(i>>10&e)/e*255|0,d=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=u,this.data[f+1]=o,this.data[f+2]=a,this.data[f+3]=d}this.pos+=t}},Ys.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,u=(a>>5&r)/r*255|0,d=(a>>11)/e*255|0,f=s*this.width*4+4*i;this.data[f]=d,this.data[f+1]=u,this.data[f+2]=o,this.data[f+3]=255}this.pos+=t}},Ys.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ys.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},Ys.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Ys(e,!1),a=i.width,o=i.height,u={data:i.getData(),width:a,height:o},d=new r0(100).encode(u,100);return t.processJPEG.call(this,d,r,n,s)}}(ot.API),bv.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new bv(e),a=i.width,o=i.height,u={data:i.getData(),width:a,height:o},d=new r0(100).encode(u,100);return t.processJPEG.call(this,d,r,n,s)}}(ot.API),ot.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,u=0,d=0;d<s;d+=4){var f=n[d],g=n[d+1],y=n[d+2],p=n[d+3];i[o++]=f,i[o++]=g,i[o++]=y,a[u++]=p}var k=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:k,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ot.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ol=ot.API,hh=Ol.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,u=o.fof?o.fof:1,d=e.kerning?e.kerning:s.metadata.Unicode.kerning,f=d.fof?d.fof:1,g=e.doKerning!==!1,y=0,p=t.length,k=0,N=o[0]||u,C=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?C.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(y=g&&zt(d[n])==="object"&&!isNaN(parseInt(d[n][k],10))?d[n][k]/f:0,C.push((o[n]||N)/u+y)),k=n;return C},gv=Ol.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Ol.processArabic&&(t=Ol.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:hh.apply(this,arguments).reduce(function(i,a){return i+a},0)},vv=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var u=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(u,i)),o=0,u=i),o+=e[i],i++;return u!==i&&s.push(t.slice(u,i)),s},yv=function(t,e,r){r||(r={});var n,s,i,a,o,u,d,f=[],g=[f],y=r.textIndent||0,p=0,k=0,N=t.split(" "),C=hh.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?N[0].length+2:r.lineIndent||0){var x=Array(u).join(" "),b=[];N.map(function(R){(R=R.split(/\s*\n/)).length>1?b=b.concat(R.map(function(W,K){return(K&&W.length?`
`:"")+W})):b.push(R[0])}),N=b,u=gv.apply(this,[x,r])}for(i=0,a=N.length;i<a;i++){var _=0;if(n=N[i],u&&n[0]==`
`&&(n=n.substr(1),_=1),y+p+(k=(s=hh.apply(this,[n,r])).reduce(function(R,W){return R+W},0))>e||_){if(k>e){for(o=vv.apply(this,[n,s,e-(y+p),e]),f.push(o.shift()),f=[o.pop()];o.length;)g.push([o.shift()]);k=s.slice(n.length-(f[0]?f[0].length:0)).reduce(function(R,W){return R+W},0)}else f=[n];g.push(f),y=k+u,p=C}else f.push(n),y+=p+k,p=C}return d=u?function(R,W){return(W?x:"")+R.join(" ")}:function(R){return R.join(" ")},g.map(d)},Ol.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var g=this.internal.getFont(f.fontName,f.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,u,d=[];for(o=0,u=n.length;o<u;o++)d=d.concat(yv.apply(this,[n[o],a,i]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var i=function(g){return"0x"+parseInt(g,10).toString(16)},a=t.__fontmetrics__.compress=function(g){var y,p,k,N,C=["{"];for(var x in g){if(y=g[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=i(x).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof y=="number")y<0?(k=i(y).slice(3),N="-"):(k=i(y).slice(2),N=""),k=N+k.slice(0,-1)+n[k.slice(-1)];else{if(zt(y)!=="object")throw new Error("Don't know what to do with value type "+zt(y)+".");k=a(y)}C.push(p+k)}return C.push("}"),C.join("")},o=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,p,k,N,C={},x=1,b=C,_=[],R="",W="",K=g.length-1,j=1;j<K;j+=1)(N=g[j])=="'"?y?(k=y.join(""),y=void 0):y=[]:y?y.push(N):N=="{"?(_.push([b,k]),b={},k=void 0):N=="}"?((p=_.pop())[0][p[1]]=b,k=void 0,b=p[0]):N=="-"?x=-1:k===void 0?r.hasOwnProperty(N)?(R+=r[N],k=parseInt(R,16)*x,x=1,R=""):R+=N:r.hasOwnProperty(N)?(W+=r[N],b[k]=parseInt(W,16)*x,x=1,k=void 0,W=""):W+=N;return C},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var y=g.font,p=f.Unicode[y.postScriptName];p&&(y.metadata.Unicode={},y.metadata.Unicode.widths=p.widths,y.metadata.Unicode.kerning=p.kerning);var k=d.Unicode[y.postScriptName];k&&(y.metadata.Unicode.encoding=k,y.encoding=k.codePages[0])}])}(ot.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Mc(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(ot),function(t){function e(){return(lt.canvg?Promise.resolve(lt.canvg):Za(()=>import("./index.es-DkZ2yK1z.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ot.API.addSvgAsImage=function(r,n,s,i,a,o,u,d){if(isNaN(n)||isNaN(s))throw Zt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Zt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=a;var g=f.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(k){return k.fromString(g,r,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(y)}).then(function(){p.addImage(f.toDataURL("image/jpeg",1),n,s,i,a,u,d)})}}(),ot.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},ot.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),u=[],d=0,f=0,g=0;function y(k,N){var C,x=!1;for(C=0;C<k.length;C+=1)k[C]===N&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(g=0;g<p;g+=1)r[o[g]].value=r[o[g]].defaultValue,r[o[g]].explicitSet=!1}if(zt(t)==="object"){for(s in t)if(i=t[s],y(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&y(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")u.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(n=!1);n===!0&&u.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+u.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,N=[];for(k in r)r[k].explicitSet===!0&&(r[k].type==="name"?N.push("/"+k+" /"+r[k].value):N.push("/"+k+" "+r[k].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+a.length+o.length+s.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ot.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,u=a.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],g=0,y=i.length;g<y;++g){if(o=a.metadata.characterToGlyph(i.charCodeAt(g)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(g),u.indexOf(o)==-1&&(u.push(o),u.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(d[4-o.length],o)}return f.join("")},n=function(i){var a,o,u,d,f,g,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],g=0,y=(o=Object.keys(i).sort(function(p,k){return p-k})).length;g<y;g++)a=o[g],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(d=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+d+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,u=a.out,d=a.newObject,f=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var g=o.metadata.Unicode.widths,y=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",k=0;k<y.length;k++)p+=String.fromCharCode(y[k]);var N=d();f({data:p,addLength1:!0,objectId:N}),u("endobj");var C=d();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:C}),u("endobj");var x=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Bl(o.fontName)),u("/FontFile2 "+N+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),u("/Flags "+o.metadata.flags),u("/StemV "+o.metadata.stemV),u("/ItalicAngle "+o.metadata.italicAngle),u("/Ascent "+o.metadata.ascender),u("/Descent "+o.metadata.decender),u("/CapHeight "+o.metadata.capHeight),u(">>"),u("endobj");var b=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+Bl(o.fontName)),u("/FontDescriptor "+x+" 0 R"),u("/W "+t.API.PDFObject.convert(g)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+o.encoding+")"),u(">>"),u(">>"),u("endobj"),o.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+C+" 0 R"),u("/BaseFont /"+Bl(o.fontName)),u("/Encoding /"+o.encoding),u("/DescendantFonts ["+b+" 0 R]"),u(">>"),u("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,u=a.out,d=a.newObject,f=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var g=o.metadata.rawData,y="",p=0;p<g.length;p++)y+=String.fromCharCode(g[p]);var k=d();f({data:y,addLength1:!0,objectId:k}),u("endobj");var N=d();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var C=d();u("<<"),u("/Descent "+o.metadata.decender),u("/CapHeight "+o.metadata.capHeight),u("/StemV "+o.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+k+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),u("/FontName /"+Bl(o.fontName)),u("/ItalicAngle "+o.metadata.italicAngle),u("/Ascent "+o.metadata.ascender),u(">>"),u("endobj"),o.objectNumber=d();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Bl(o.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),u("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",u=i.x,d=i.y,f=i.options||{},g=i.mutex||{},y=g.pdfEscape,p=g.activeFontKey,k=g.fonts,N=p,C="",x=0,b="",_=k[N].encoding;if(k[N].encoding!=="Identity-H")return{text:o,x:u,y:d,options:f,mutex:g};for(b=o,N=p,Array.isArray(o)&&(b=o[0]),x=0;x<b.length;x+=1)k[N].metadata.hasOwnProperty("cmap")&&(a=k[N].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),a||b[x].charCodeAt(0)<256&&k[N].metadata.hasOwnProperty("Unicode")?C+=b[x]:C+="";var R="";return parseInt(N.slice(1))<14||_==="WinAnsiEncoding"?R=y(C,N).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(R=r(C,k[N])),g.isHex=!0,{text:R,x:u,y:d,options:f,mutex:g}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],u={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([s(Object.assign({},u,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(s(Object.assign({},u,{text:a[d]})).text);i.text=o}else i.text=s(Object.assign({},u,{text:a})).text}])}(ot),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ot.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,u,d,f,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,_=0;this.__bidiEngine__={};var R=function(A){var O=A.charCodeAt(),z=O>>8,q=N[z];return q!==void 0?g[256*q+(255&O)]:z===252||z===253?"AL":x.test(z)?"L":z===8?"R":"N"},W=function(A){for(var O,z=0;z<A.length;z++){if((O=R(A.charAt(z)))==="L")return!1;if(O==="R")return!0}return!1},K=function(A,O,z,q){var ee,Q,de,H,oe=O[q];switch(oe){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(oe="AN");break;case"AL":b=!0,oe="R";break;case"WS":oe="N";break;case"CS":q<1||q+1>=O.length||(ee=z[q-1])!=="EN"&&ee!=="AN"||(Q=O[q+1])!=="EN"&&Q!=="AN"?oe="N":b&&(Q="AN"),oe=Q===ee?Q:"N";break;case"ES":oe=(ee=q>0?z[q-1]:"B")==="EN"&&q+1<O.length&&O[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&z[q-1]==="EN"){oe="EN";break}if(b){oe="N";break}for(de=q+1,H=O.length;de<H&&O[de]==="ET";)de++;oe=de<H&&O[de]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(H=O.length,de=q+1;de<H&&O[de]==="NSM";)de++;if(de<H){var ne=A[q],xe=ne>=1425&&ne<=2303||ne===64286;if(ee=O[de],xe&&(ee==="R"||ee==="AL")){oe="R";break}}}oe=q<1||(ee=O[q-1])==="B"?"N":z[q-1];break;case"B":b=!1,s=!0,oe=_;break;case"S":i=!0,oe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":oe="N"}return oe},j=function(A,O,z){var q=A.split("");return z&&P(q,z,{hiLevel:_}),q.reverse(),O&&O.reverse(),q.join("")},P=function(A,O,z){var q,ee,Q,de,H,oe=-1,ne=A.length,xe=0,L=[],$=_?p:y,Y=[];for(b=!1,s=!1,i=!1,ee=0;ee<ne;ee++)Y[ee]=R(A[ee]);for(Q=0;Q<ne;Q++){if(H=xe,L[Q]=K(A,Y,L,Q),q=240&(xe=$[H][k[L[Q]]]),xe&=15,O[Q]=de=$[xe][5],q>0)if(q===16){for(ee=oe;ee<Q;ee++)O[ee]=1;oe=-1}else oe=-1;if($[xe][6])oe===-1&&(oe=Q);else if(oe>-1){for(ee=oe;ee<Q;ee++)O[ee]=de;oe=-1}Y[Q]==="B"&&(O[Q]=0),z.hiLevel|=de}i&&function(X,ae,pe){for(var J=0;J<pe;J++)if(X[J]==="S"){ae[J]=_;for(var ge=J-1;ge>=0&&X[ge]==="WS";ge--)ae[ge]=_}}(Y,O,ne)},F=function(A,O,z,q,ee){if(!(ee.hiLevel<A)){if(A===1&&_===1&&!s)return O.reverse(),void(z&&z.reverse());for(var Q,de,H,oe,ne=O.length,xe=0;xe<ne;){if(q[xe]>=A){for(H=xe+1;H<ne&&q[H]>=A;)H++;for(oe=xe,de=H-1;oe<de;oe++,de--)Q=O[oe],O[oe]=O[de],O[de]=Q,z&&(Q=z[oe],z[oe]=z[de],z[de]=Q);xe=H}xe++}}},B=function(A,O,z){var q=A.split(""),ee={hiLevel:_};return z||(z=[]),P(q,z,ee),function(Q,de,H){if(H.hiLevel!==0&&f)for(var oe,ne=0;ne<Q.length;ne++)de[ne]===1&&(oe=C.indexOf(Q[ne]))>=0&&(Q[ne]=C[oe+1])}(q,z,ee),F(2,q,O,z,ee),F(1,q,O,z,ee),q.join("")};return this.__bidiEngine__.doBidiReorder=function(A,O,z){if(function(ee,Q){if(Q)for(var de=0;de<ee.length;de++)Q[de]=de;o===void 0&&(o=W(ee)),d===void 0&&(d=W(ee))}(A,O),a||!u||d)if(a&&u&&o^d)_=o?1:0,A=j(A,O,z);else if(!a&&u&&d)_=o?1:0,A=B(A,O,z),A=j(A,O);else if(!a||o||u||d){if(a&&!u&&o^d)A=j(A,O),o?(_=0,A=B(A,O,z)):(_=1,A=B(A,O,z),A=j(A,O));else if(a&&o&&!u&&d)_=1,A=B(A,O,z),A=j(A,O);else if(!a&&!u&&o^d){var q=f;o?(_=1,A=B(A,O,z),_=0,f=!1,A=B(A,O,z),f=q):(_=0,A=B(A,O,z),A=j(A,O),_=1,f=!1,A=B(A,O,z),f=q,A=j(A,O))}}else _=0,A=B(A,O,z);else _=o?1:0,A=B(A,O,z);return A},this.__bidiEngine__.setOptions=function(A){A&&(a=A.isInputVisual,u=A.isOutputVisual,o=A.isInputRtl,d=A.isOutputRtl,f=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text,i=(n.x,n.y,n.options||{}),a=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(ot),ot.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Qa(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new r6(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new zk(this.contents),this.head=new Wk(this),this.name=new Jk(this),this.cmap=new rb(this),this.toUnicode={},this.hhea=new Vk(this),this.maxp=new Kk(this),this.hmtx=new Zk(this),this.post=new Gk(this),this.os2=new Hk(this),this.loca=new t6(this),this.glyf=new Xk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,u,d;for(d=[],a=0,o=(u=this.bbox).length;a<o;a++)e=u[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var ui,Qa=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,u;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^u)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+u},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),zk=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,u,d,f,g,y,p,k,N;for(N in p=Object.keys(r).length,u=Math.log(2),g=16*Math.floor(Math.log(p)/u),a=Math.floor(g/u),f=16*p-g,(s=new Qa).writeInt(this.scalarType),s.writeShort(p),s.writeShort(g),s.writeShort(a),s.writeShort(f),i=16*p,d=s.pos+i,o=null,k=[],r)for(y=r[N],s.writeString(N),s.writeInt(t(y)),s.writeInt(d),s.writeInt(y.length),k=k.concat(y),N==="head"&&(o=d),d+=y.length;d%4;)k.push(0),d++;return s.write(k),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=nb.call(r);r.length%4;)r.push(0);for(i=new Qa(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),qk={}.hasOwnProperty,ji=function(t,e){for(var r in e)qk.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ui=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Wk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Qa).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),wv=function(){function t(e,r){var n,s,i,a,o,u,d,f,g,y,p,k,N,C,x,b,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(p=e.readUInt16(),y=p/2,e.pos+=6,i=function(){var R,W;for(W=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)W.push(e.readUInt16());return W}(),e.pos+=2,N=function(){var R,W;for(W=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)W.push(e.readUInt16());return W}(),d=function(){var R,W;for(W=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)W.push(e.readUInt16());return W}(),f=function(){var R,W;for(W=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)W.push(e.readUInt16());return W}(),s=(this.length-e.pos+this.offset)/2,o=function(){var R,W;for(W=[],u=R=0;0<=s?R<s:R>s;u=0<=s?++R:--R)W.push(e.readUInt16());return W}(),u=x=0,_=i.length;x<_;u=++x)for(C=i[u],n=b=k=N[u];k<=C?b<=C:b>=C;n=k<=C?++b:--b)f[u]===0?a=n+d[u]:(a=o[f[u]/2+(n-k)-(y-u)]||0)!==0&&(a+=d[u]),this.codeMap[n]=65535&a}e.pos=g}return t.encode=function(e,r){var n,s,i,a,o,u,d,f,g,y,p,k,N,C,x,b,_,R,W,K,j,P,F,B,A,O,z,q,ee,Q,de,H,oe,ne,xe,L,$,Y,X,ae,pe,J,ge,Se,Pe,Le;switch(q=new Qa,a=Object.keys(e).sort(function(Fe,et){return Fe-et}),r){case"macroman":for(N=0,C=function(){var Fe=[];for(k=0;k<256;++k)Fe.push(0);return Fe}(),b={0:0},i={},ee=0,oe=a.length;ee<oe;ee++)b[ge=e[s=a[ee]]]==null&&(b[ge]=++N),i[s]={old:e[s],new:b[e[s]]},C[s]=b[e[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(C),{charMap:i,subtable:q.data,maxGlyphID:N+1};case"unicode":for(O=[],g=[],_=0,b={},n={},x=d=null,Q=0,ne=a.length;Q<ne;Q++)b[W=e[s=a[Q]]]==null&&(b[W]=++_),n[s]={old:W,new:b[W]},o=b[W]-s,x!=null&&o===d||(x&&g.push(x),O.push(s),d=o),x=s;for(x&&g.push(x),g.push(65535),O.push(65535),B=2*(F=O.length),P=2*Math.pow(Math.log(F)/Math.LN2,2),y=Math.log(P/2)/Math.LN2,j=2*F-P,u=[],K=[],p=[],k=de=0,xe=O.length;de<xe;k=++de){if(A=O[k],f=g[k],A===65535){u.push(0),K.push(0);break}if(A-(z=n[A].new)>=32768)for(u.push(0),K.push(2*(p.length+F-k)),s=H=A;A<=f?H<=f:H>=f;s=A<=f?++H:--H)p.push(n[s].new);else u.push(z-A),K.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*F+2*p.length),q.writeUInt16(0),q.writeUInt16(B),q.writeUInt16(P),q.writeUInt16(y),q.writeUInt16(j),pe=0,L=g.length;pe<L;pe++)s=g[pe],q.writeUInt16(s);for(q.writeUInt16(0),J=0,$=O.length;J<$;J++)s=O[J],q.writeUInt16(s);for(Se=0,Y=u.length;Se<Y;Se++)o=u[Se],q.writeUInt16(o);for(Pe=0,X=K.length;Pe<X;Pe++)R=K[Pe],q.writeUInt16(R);for(Le=0,ae=p.length;Le<ae;Le++)N=p[Le],q.writeUInt16(N);return{charMap:n,subtable:q.data,maxGlyphID:_+1}}},t}(),rb=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new wv(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=wv.encode(r,n),(i=new Qa).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Vk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Hk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Gk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(s=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,u,d;for(d=[],a=o=0,u=this.file.maxp.numGlyphs;0<=u?o<u:o>u;a=0<=u?++o:--o)d.push(r.readUInt32());return d}).call(this)}},e}(),Yk=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Jk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,i,a,o,u,d,f,g,y,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),u=r.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(d={},a=g=0,y=s.length;g<y;a=++g)i=s[a],r.pos=i.offset,f=r.readString(i.length),o=new Yk(f,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),Kk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Zk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,i,a,o,u,d;for(r.pos=this.offset,this.metrics=[],n=0,u=this.file.hhea.numberOfMetrics;0<=u?n<u:n>u;n=0<=u?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,g;for(g=[],n=f=0;0<=i?f<i:f>i;n=0<=i?++f:--f)g.push(r.readInt16());return g}(),this.widths=(function(){var f,g,y,p;for(p=[],f=0,g=(y=this.metrics).length;f<g;f++)a=y[f],p.push(a.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)d.push(this.widths.push(s));return d},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),nb=[].slice,Xk=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,i,a,o,u,d,f,g,y;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(r),(i=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(u=new Qa(n.read(i))).readShort(),f=u.readShort(),y=u.readShort(),d=u.readShort(),g=u.readShort(),this.cache[r]=o===-1?new e6(u,f,y,d,g):new Qk(u,o,f,y,d,g),this.cache[r]))},e.prototype.encode=function(r,n,s){var i,a,o,u,d;for(o=[],a=[],u=0,d=n.length;u<d;u++)i=r[n[u]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),Qk=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),e6=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Qa(nb.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),t6=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ji(e,ui),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<n.length&&n[a]==o){++a,s[o]=i;var u=this.offsets[o],d=this.offsets[o+1]-u;d>0&&(i+=d)}for(var f=new Array(4*s.length),g=0;g<s.length;++g)f[4*g+3]=255&s[g],f[4*g+2]=(65280&s[g])>>8,f[4*g+1]=(16711680&s[g])>>16,f[4*g]=(4278190080&s[g])>>24;return f},e}(),r6=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,u;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in u=this.glyphsFor(r))n=u[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,u,d,f,g,y,p,k,N,C,x;for(s in n=rb.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},x=n.charMap)p[(u=x[s]).old]=u.new;for(k in y=n.maxGlyphID,a)k in p||(p[k]=y++);return f=function(b){var _,R;for(_ in R={},b)R[b[_]]=_;return R}(p),g=Object.keys(f).sort(function(b,_){return b-_}),N=function(){var b,_,R;for(R=[],b=0,_=g.length;b<_;b++)o=g[b],R.push(f[o]);return R}(),i=this.font.glyf.encode(a,N,p),d=this.font.loca.encode(i.offsets,N),C={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();ot.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,u,d;for(d=[],o=0,u=r.length;o<u;o++)n=r[o],d.push(e.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();function Nv(t){const e=new Date(t);return Number.isNaN(e.getTime())?new Date().toISOString().slice(0,10):e.toISOString().slice(0,10)}function n6(t){if(!t)return"N/A";const e=t.toLowerCase();return e==="dog"?"Dog":e==="cat"?"Cat":t}function sb(t){const e=parseFloat(String(t||"").replace(/[^0-9.\-]/g,""));return Number.isFinite(e)?e:0}function s6(t){return`$${sb(t).toFixed(2)}`}function i6(t){return`$${(Number.isFinite(t)?t:0).toFixed(2)}`}function a6(t,e){const r=new ot({unit:"pt",format:"letter"}),n=56,s=556,i=s-n;let a=64;const o=K=>{r.setFont("helvetica","bold"),r.setFontSize(18),r.text(K,n,a),a+=18,r.setDrawColor(64),r.setLineWidth(1),r.line(n,a+10,s,a+10),a+=24},u=(K,j)=>{r.setFont("helvetica","bold"),r.setFontSize(11),r.text(K,n,a),r.setFont("helvetica","normal"),r.setFontSize(11),r.text(j||"",n+160,a),a+=18},d=K=>{r.setFont("helvetica","bold"),r.setFontSize(13),r.text(K,n,a),a+=14};o("Pet Insurance Claim Form"),d("Insurance Information"),u("Company",(e==null?void 0:e.insuranceCompany)||"N/A"),u("Policy Number",(e==null?void 0:e.policyNumber)||"N/A"),u("Invoice Number",t.invoiceNumber||"N/A"),a+=8,d("Pet Owner Information"),u("Owner Name",(e==null?void 0:e.ownerName)||"N/A"),u("Phone",(e==null?void 0:e.ownerPhone)||"N/A"),a+=8,d("Pet Information"),u("Pet Name",t.petName||(e==null?void 0:e.name)||"N/A"),u("Species",n6(e==null?void 0:e.species)),a+=8,d("Veterinary Clinic"),u("Clinic Name",t.clinicName||"N/A"),u("Clinic Address",t.clinicAddress||"N/A"),a+=8,d("Service Details"),u("Date of Service",t.dateOfService||Nv(new Date().toISOString())),u("Diagnosis / Reason",t.diagnosis||"N/A"),a+=8,d("Itemized Charges");const f=Math.floor(i*.7),g=n,y=s,p=14;r.setFont("helvetica","bold"),r.text("Description",g,a),r.text("Amount",y,a,{align:"right"}),a+=14,r.setDrawColor(200),r.line(n,a,s,a),a+=10,t.lineItems.forEach(K=>{const j=K.description||"",P=s6(K.amount);r.setFont("helvetica","normal"),r.setFontSize(11);const F=r.splitTextToSize(j,f);r.setFont("courier","normal"),r.text(P,y,a,{align:"right"}),r.setFont("helvetica","normal"),F.forEach((B,A)=>{r.text(B,g,a+A*p)}),a+=Math.max(p,F.length*p),a+=2}),t.lineItems.length===0&&(r.setFont("helvetica","normal"),r.text("No items",g,a),a+=16),a+=6,r.setDrawColor(64),r.line(n,a,s,a),a+=14,r.setFont("helvetica","bold"),r.text("Total",g,a),r.setFont("courier","bold"),r.text(i6(sb(t.totalAmount)),y,a,{align:"right"}),a+=24,r.setFont("helvetica","normal"),r.setFontSize(9),r.setTextColor(120);const k=742;r.setTextColor(40),r.setFont("helvetica","bold"),r.text("Filing Deadline Reminder",n,k),r.setFont("helvetica","normal"),r.setTextColor(80),r.setFontSize(9);const C=r.splitTextToSize("Most pet insurance requires claims to be filed within 60180 days of service. This is a general reminder only. Always verify your specific deadline with your insurance provider.",s-n);r.text(C,n,k+14),r.setTextColor(120),r.text("Generated by Pet Claim Helper - petclaimhelper.com",n,760);const x=Nv(t.dateOfService||new Date().toISOString()),b=(t.petName||(e==null?void 0:e.name)||"Pet").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),_=((e==null?void 0:e.insuranceCompany)||"Insurance").replace(/[^a-z0-9_\- ]/gi,"").replace(/\s+/g,"_"),R=`${b}_${_}_claim_${x}.pdf`,W=new Blob([r.output("arraybuffer")],{type:"application/pdf"});return{filename:R,blob:W}}function o6(t,e){const r={clinicName:t.clinicName,clinicAddress:t.clinicAddress,petName:t.petName,dateOfService:t.dateOfService,totalAmount:t.subtotal,diagnosis:t.diagnosis,lineItems:t.lineItems,invoiceNumber:t.invoiceNumber};return a6(r,e)}function ib({open:t,onClose:e,onSaved:r,userId:n,pets:s,defaultPetId:i}){const[a,o]=re.useState(""),[u,d]=re.useState(""),[f,g]=re.useState(""),[y,p]=re.useState("1x daily"),[k,N]=re.useState(["07:00"]),[C,x]=re.useState("7"),[b,_]=re.useState(7),[R,W]=re.useState(!1),[K,j]=re.useState(null),[P,F]=re.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),B=re.useRef(!1);re.useEffect(()=>{var ee;if(t&&!B.current){o(i||(((ee=s[0])==null?void 0:ee.id)??"")),d(""),g(""),p("1x daily"),N(["07:00"]),x("7"),_(7),W(!1),j(null);try{console.log("[AddMedicationForm] Form opened. Initial timezone (from Intl):",P)}catch{}n&&it.from("profiles").select("timezone").eq("id",n).single().then(({data:Q})=>{const de=Q&&Q.timezone?String(Q.timezone):"";try{console.log("[AddMedicationForm] Profile timezone loaded:",de||"(empty)")}catch{}de&&F(de)}).catch(()=>{})}B.current=t},[t,i,s,n,P]),re.useEffect(()=>{if(!t)return;const ee=document.body.style.overflow;document.body.style.overflow="hidden";const Q=de=>{de.key==="Escape"&&e()};return window.addEventListener("keydown",Q),()=>{document.body.style.overflow=ee,window.removeEventListener("keydown",Q)}},[t,e]),re.useEffect(()=>{y==="1x daily"&&N(["07:00"]),y==="2x daily"&&N(["07:00","19:00"]),y==="3x daily"&&N(["08:00","14:00","20:00"])},[y]);const A=re.useMemo(()=>y==="1x daily"?1:y==="2x daily"?2:3,[y]),O=(ee,Q)=>{const de=(Q||"").slice(0,5),H=[...k];H[ee]=de,N(H)},z=()=>{const ee=new Date,Q=ee.getFullYear(),de=String(ee.getMonth()+1).padStart(2,"0"),H=String(ee.getDate()).padStart(2,"0"),oe=`${Q}-${de}-${H}`;let ne=C==="custom"?Math.max(1,Number(b||1)):Number(C);(!Number.isFinite(ne)||ne<1)&&(ne=1);const xe=new Date(ee.getTime());xe.setDate(xe.getDate()+(ne-1));const L=xe.getFullYear(),$=String(xe.getMonth()+1).padStart(2,"0"),Y=String(xe.getDate()).padStart(2,"0"),X=`${L}-${$}-${Y}`;return{start:oe,end:X}},q=async ee=>{if(ee.preventDefault(),!n){j("You must be logged in.");return}if(!a){j("Please select a pet.");return}if(!u.trim()){j("Enter medication name.");return}if(k.some(Q=>!/^\d{2}:\d{2}$/.test(Q))){j("Please select valid reminder times.");return}if(k.length!==A){j("Reminder times do not match selected frequency.");return}W(!0),j(null);try{const{start:Q,end:de}=z(),H=P||Intl.DateTimeFormat().resolvedOptions().timeZone;try{console.log("[AddMedicationForm] Submitting. Detected timezone:",H),console.log("[AddMedicationForm] Times selected (will store as PST, no UTC conversion):",k)}catch{}const oe=k.filter(Boolean);try{console.log("[AddMedicationForm] Times to store in PST:",oe)}catch{}const ne={user_id:n,pet_id:a,claim_id:null,medication_name:u.trim(),dosage:f.trim()||null,frequency:y,reminder_times:oe,start_date:Q,end_date:de};try{console.log("[AddMedicationForm] Payload.reminder_times (storing in PST):",ne.reminder_times)}catch{}const{error:xe}=await it.from("medications").insert(ne);try{console.log("[AddMedicationForm] Supabase insert completed. Error:",xe||null)}catch{}if(xe)throw xe;r&&r(),e()}catch(Q){j((Q==null?void 0:Q.message)||"Failed to save medication")}finally{W(!1)}};return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Add Medication"}),l.jsx("button",{type:"button",className:"text-sm",onClick:e,children:"Close"})]}),K&&l.jsx("div",{className:"mt-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:K}),l.jsxs("form",{className:"mt-4 space-y-4",onSubmit:q,children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pet"}),l.jsxs("select",{value:a,onChange:ee=>o(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),s.map(ee=>l.jsxs("option",{value:ee.id,children:[ee.name," (",ee.species,")"]},ee.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Medication name"}),l.jsx("input",{value:u,onChange:ee=>d(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"Amoxicillin"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Dosage"}),l.jsx("input",{value:f,onChange:ee=>g(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",placeholder:"1 pill"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Frequency"}),l.jsxs("select",{value:y,onChange:ee=>p(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{children:"1x daily"}),l.jsx("option",{children:"2x daily"}),l.jsx("option",{children:"3x daily"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Duration"}),l.jsxs("select",{value:C,onChange:ee=>x(ee.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"7",children:"7 days"}),l.jsx("option",{value:"10",children:"10 days"}),l.jsx("option",{value:"14",children:"14 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"custom",children:"Custom"})]})]})]}),C==="custom"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Custom days"}),l.jsx("input",{type:"number",min:1,value:b,onChange:ee=>_(Number(ee.target.value)),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Reminder times"}),l.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:Array.from({length:A}).map((ee,Q)=>l.jsx("input",{type:"time",value:k[Q]||"",onChange:de=>O(Q,de.target.value),className:"w-full min-w-[140px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"},Q))})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",onClick:e,className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:R,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:R?"Saving":"Save Medication"})]})]})]})}):null}function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cp.apply(null,arguments)}function l6(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function u6(t,e){if(t==null)return{};var r,n,s=l6(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function c6(t,e,r){return Object.defineProperty(t,"prototype",{writable:!1}),t}function d6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ap(t,e){return Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ap(t,e)}function h6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ap(t,e)}function pf(t){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pf(t)}function ab(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ab=function(){return!!t})()}function f6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m6(t,e){if(e&&(zt(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f6(t)}function p6(t){var e=ab();return function(){var r,n=pf(t);if(e){var s=pf(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return m6(this,r)}}var ob={exports:{}},g6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v6=g6,y6=v6;function lb(){}function ub(){}ub.resetWarningCache=lb;var x6=function(){function t(n,s,i,a,o,u){if(u!==y6){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ub,resetWarningCache:lb};return r.PropTypes=r,r};ob.exports=x6();var b6=ob.exports;const as=Bp(b6);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function zo(t,e,r){this.x=t,this.y=e,this.time=r||new Date().getTime()}zo.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};zo.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};zo.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function qg(t,e,r,n){this.startPoint=t,this.control1=e,this.control2=r,this.endPoint=n}qg.prototype.length=function(){for(var t=10,e=0,r=void 0,n=void 0,s=0;s<=t;s+=1){var i=s/t,a=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(s>0){var u=a-r,d=o-n;e+=Math.sqrt(u*u+d*d)}r=a,n=o}return e};qg.prototype._point=function(t,e,r,n,s){return e*(1-t)*(1-t)*(1-t)+3*r*(1-t)*(1-t)*t+3*n*(1-t)*t*t+s*t*t*t};function w6(t,e,r){var n,s,i,a=null,o=0;r||(r={});var u=function(){o=r.leading===!1?0:Date.now(),a=null,i=t.apply(n,s),a||(n=s=null)};return function(){var d=Date.now();!o&&r.leading===!1&&(o=d);var f=e-(d-o);return n=this,s=arguments,f<=0||f>e?(a&&(clearTimeout(a),a=null),o=d,i=t.apply(n,s),a||(n=s=null)):!a&&r.trailing!==!1&&(a=setTimeout(u,f)),i}}function Xt(t,e){var r=this,n=e||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=w6(Xt.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Xt.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(s){s.which===1&&(r._mouseButtonDown=!0,r._strokeBegin(s))},this._handleMouseMove=function(s){r._mouseButtonDown&&r._strokeMoveUpdate(s)},this._handleMouseUp=function(s){s.which===1&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(s))},this._handleTouchStart=function(s){if(s.targetTouches.length===1){var i=s.changedTouches[0];r._strokeBegin(i)}},this._handleTouchMove=function(s){s.preventDefault();var i=s.targetTouches[0];r._strokeMoveUpdate(i)},this._handleTouchEnd=function(s){var i=s.target===r._canvas;i&&(s.preventDefault(),r._strokeEnd(s))},this.on()}Xt.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Xt.prototype.fromDataURL=function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,s=r.ratio||window.devicePixelRatio||1,i=r.width||this._canvas.width/s,a=r.height||this._canvas.height/s;this._reset(),n.src=t,n.onload=function(){e._ctx.drawImage(n,0,0,i,a)},this._isEmpty=!1};Xt.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return(e=this._canvas).toDataURL.apply(e,[t].concat(n))}};Xt.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Xt.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Xt.prototype.isEmpty=function(){return this._isEmpty};Xt.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};Xt.prototype._strokeUpdate=function(t){var e=t.clientX,r=t.clientY,n=this._createPoint(e,r),s=this._data[this._data.length-1],i=s&&s[s.length-1],a=i&&n.distanceTo(i)<this.minDistance;if(!(i&&a)){var o=this._addPoint(n),u=o.curve,d=o.widths;u&&d&&this._drawCurve(u,d.start,d.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};Xt.prototype._strokeEnd=function(t){var e=this.points.length>2,r=this.points[0];if(!e&&r&&this._drawDot(r),r){var n=this._data[this._data.length-1],s=n[n.length-1];r.equals(s)||n.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};Xt.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Xt.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Xt.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Xt.prototype._createPoint=function(t,e,r){var n=this._canvas.getBoundingClientRect();return new zo(t-n.left,e-n.top,r||new Date().getTime())};Xt.prototype._addPoint=function(t){var e=this.points,r=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),r=this._calculateCurveControlPoints(e[0],e[1],e[2]);var n=r.c2;r=this._calculateCurveControlPoints(e[1],e[2],e[3]);var s=r.c1,i=new qg(e[1],n,s,e[2]),a=this._calculateCurveWidths(i);return e.shift(),{curve:i,widths:a}}return{}};Xt.prototype._calculateCurveControlPoints=function(t,e,r){var n=t.x-e.x,s=t.y-e.y,i=e.x-r.x,a=e.y-r.y,o={x:(t.x+e.x)/2,y:(t.y+e.y)/2},u={x:(e.x+r.x)/2,y:(e.y+r.y)/2},d=Math.sqrt(n*n+s*s),f=Math.sqrt(i*i+a*a),g=o.x-u.x,y=o.y-u.y,p=f/(d+f),k={x:u.x+g*p,y:u.y+y*p},N=e.x-k.x,C=e.y-k.y;return{c1:new zo(o.x+N,o.y+C),c2:new zo(u.x+N,u.y+C)}};Xt.prototype._calculateCurveWidths=function(t){var e=t.startPoint,r=t.endPoint,n={start:null,end:null},s=this.velocityFilterWeight*r.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(s);return n.start=this._lastWidth,n.end=i,this._lastVelocity=s,this._lastWidth=i,n};Xt.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};Xt.prototype._drawPoint=function(t,e,r){var n=this._ctx;n.moveTo(t,e),n.arc(t,e,r,0,2*Math.PI,!1),this._isEmpty=!1};Xt.prototype._drawCurve=function(t,e,r){var n=this._ctx,s=r-e,i=Math.floor(t.length());n.beginPath();for(var a=0;a<i;a+=1){var o=a/i,u=o*o,d=u*o,f=1-o,g=f*f,y=g*f,p=y*t.startPoint.x;p+=3*g*o*t.control1.x,p+=3*f*u*t.control2.x,p+=d*t.endPoint.x;var k=y*t.startPoint.y;k+=3*g*o*t.control1.y,k+=3*f*u*t.control2.y,k+=d*t.endPoint.y;var N=e+d*s;this._drawPoint(p,k,N)}n.closePath(),n.fill()};Xt.prototype._drawDot=function(t){var e=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,r),e.closePath(),e.fill()};Xt.prototype._fromData=function(t,e,r){for(var n=0;n<t.length;n+=1){var s=t[n];if(s.length>1)for(var i=0;i<s.length;i+=1){var a=s[i],o=new zo(a.x,a.y,a.time),u=a.color;if(i===0)this.penColor=u,this._reset(),this._addPoint(o);else if(i!==s.length-1){var d=this._addPoint(o),f=d.curve,g=d.widths;f&&g&&e(f,g,u)}}else{this._reset();var y=s[0];r(y)}}};Xt.prototype._toSVG=function(){var t=this,e=this._data,r=this._canvas,n=Math.max(window.devicePixelRatio||1,1),s=0,i=0,a=r.width/n,o=r.height/n,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",r.width),u.setAttributeNS(null,"height",r.height),this._fromData(e,function(x,b,_){var R=document.createElement("path");if(!isNaN(x.control1.x)&&!isNaN(x.control1.y)&&!isNaN(x.control2.x)&&!isNaN(x.control2.y)){var W="M "+x.startPoint.x.toFixed(3)+","+x.startPoint.y.toFixed(3)+" "+("C "+x.control1.x.toFixed(3)+","+x.control1.y.toFixed(3)+" ")+(x.control2.x.toFixed(3)+","+x.control2.y.toFixed(3)+" ")+(x.endPoint.x.toFixed(3)+","+x.endPoint.y.toFixed(3));R.setAttribute("d",W),R.setAttribute("stroke-width",(b.end*2.25).toFixed(3)),R.setAttribute("stroke",_),R.setAttribute("fill","none"),R.setAttribute("stroke-linecap","round"),u.appendChild(R)}},function(x){var b=document.createElement("circle"),_=typeof t.dotSize=="function"?t.dotSize():t.dotSize;b.setAttribute("r",_),b.setAttribute("cx",x.x),b.setAttribute("cy",x.y),b.setAttribute("fill",x.color),u.appendChild(b)});var d="data:image/svg+xml;base64,",f='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+s+" "+i+" "+a+" "+o+'"')+(' width="'+a+'"')+(' height="'+o+'"')+">",g=u.innerHTML;if(g===void 0){var y=document.createElement("dummy"),p=u.childNodes;y.innerHTML="";for(var k=0;k<p.length;k+=1)y.appendChild(p[k].cloneNode(!0));g=y.innerHTML}var N="</svg>",C=f+g+N;return d+btoa(C)};Xt.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(r,n){return e._drawCurve(r,n.start,n.end)},function(r){return e._drawDot(r)}),this._data=t};Xt.prototype.toData=function(){return this._data};var cb={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(fs,function(){return function(r){function n(i){if(s[i])return s[i].exports;var a=s[i]={exports:{},id:i,loaded:!1};return r[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var s={};return n.m=r,n.c=s,n.p="",n(0)}([function(r,n){function s(d){var f=d.getContext("2d"),g=d.width,y=d.height,p=f.getImageData(0,0,g,y).data,k=o(!0,g,y,p),N=o(!1,g,y,p),C=u(!0,g,y,p),x=u(!1,g,y,p),b=x-C+1,_=N-k+1,R=f.getImageData(C,k,b,_);return d.width=b,d.height=_,f.clearRect(0,0,b,_),f.putImageData(R,0,0),d}function i(d,f,g,y){return{red:y[4*(g*f+d)],green:y[4*(g*f+d)+1],blue:y[4*(g*f+d)+2],alpha:y[4*(g*f+d)+3]}}function a(d,f,g,y){return i(d,f,g,y).alpha}function o(d,f,g,y){for(var p=d?1:-1,k=d?0:g-1,N=k;d?N<g:N>-1;N+=p)for(var C=0;C<f;C++)if(a(C,N,f,y))return N;return null}function u(d,f,g,y){for(var p=d?1:-1,k=d?0:f-1,N=k;d?N<f:N>-1;N+=p)for(var C=0;C<g;C++)if(a(N,C,f,y))return N;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=s}])})})(cb);var N6=cb.exports;const _6=Bp(N6);var S6=["canvasProps","clearOnResize"],Au=function(t){h6(r,t);var e=p6(r);function r(){var n;d6(this,r);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i)),n.staticThis=n.constructor,n._sigPad=null,n._canvas=null,n.setRef=function(o){n._canvas=o,n._canvas===null&&(n._sigPad=null)},n._excludeOurProps=function(){var o=n.props;o.canvasProps,o.clearOnResize;var u=u6(o,S6);return u},n.componentDidMount=function(){var o=n.getCanvas();n._sigPad=new Xt(o,n._excludeOurProps()),n._resizeCanvas(),n.on()},n.componentWillUnmount=function(){n.off()},n.componentDidUpdate=function(){Object.assign(n._sigPad,n._excludeOurProps())},n.getCanvas=function(){if(n._canvas===null)throw n.staticThis.refNullError;return n._canvas},n.getTrimmedCanvas=function(){var o=n.getCanvas(),u=document.createElement("canvas");return u.width=o.width,u.height=o.height,u.getContext("2d").drawImage(o,0,0),_6(u)},n.getSignaturePad=function(){if(n._sigPad===null)throw n.staticThis.refNullError;return n._sigPad},n._checkClearOnResize=function(){n.props.clearOnResize&&n._resizeCanvas()},n._resizeCanvas=function(){var o,u,d=(o=n.props.canvasProps)!==null&&o!==void 0?o:{},f=d.width,g=d.height;if(!(typeof f<"u"&&typeof g<"u")){var y=n.getCanvas(),p=Math.max((u=window.devicePixelRatio)!==null&&u!==void 0?u:1,1);typeof f>"u"&&(y.width=y.offsetWidth*p),typeof g>"u"&&(y.height=y.offsetHeight*p),y.getContext("2d").scale(p,p),n.clear()}},n.render=function(){var o=n.props.canvasProps;return Vp.createElement("canvas",Cp({ref:n.setRef},o))},n.on=function(){return window.addEventListener("resize",n._checkClearOnResize),n.getSignaturePad().on()},n.off=function(){return window.removeEventListener("resize",n._checkClearOnResize),n.getSignaturePad().off()},n.clear=function(){return n.getSignaturePad().clear()},n.isEmpty=function(){return n.getSignaturePad().isEmpty()},n.fromDataURL=function(o,u){return n.getSignaturePad().fromDataURL(o,u)},n.toDataURL=function(o,u){return n.getSignaturePad().toDataURL(o,u)},n.fromData=function(o){return n.getSignaturePad().fromData(o)},n.toData=function(){return n.getSignaturePad().toData()},n}return c6(r)}(re.Component);Au.propTypes={velocityFilterWeight:as.number,minWidth:as.number,maxWidth:as.number,minDistance:as.number,dotSize:as.oneOfType([as.number,as.func]),penColor:as.string,throttle:as.number,onEnd:as.func,onBegin:as.func,canvasProps:as.object,clearOnResize:as.bool};Au.defaultProps={clearOnResize:!0};Au.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");function k6({open:t,onClose:e,userId:r}){const[n,s]=re.useState(1),[i,a]=re.useState(!1),[o,u]=re.useState(null),[d,f]=re.useState(""),[g,y]=re.useState(""),[p,k]=re.useState(""),[N,C]=re.useState(""),[x,b]=re.useState(""),[_,R]=re.useState(""),[W,K]=re.useState(""),[j,P]=re.useState(""),[F,B]=re.useState(""),[A,O]=re.useState(""),[z,q]=re.useState(""),[ee,Q]=re.useState(""),[de,H]=re.useState(""),[oe,ne]=re.useState(null),[xe,L]=re.useState(!1),$=re.useRef(null);re.useEffect(()=>{t&&(s(1),a(!1),u(null),f(""),y(""),k(""),C(""),b(""),R(""),K(""),P(""),B(""),O(""),q(""),Q(""),H(""),ne(null),L(!1))},[t]);const Y=re.useMemo(()=>d.trim().length>0,[d]),X=re.useMemo(()=>N.trim().length>0&&!!x&&_.trim().length>0,[N,x,_]);re.useEffect(()=>{if(!t)return;const J=document.body.style.overflow;document.body.style.overflow="hidden";const ge=Se=>{Se.key==="Escape"&&n!==5&&e()};return window.addEventListener("keydown",ge),()=>{document.body.style.overflow=J,window.removeEventListener("keydown",ge)}},[t,n,e]);const ae=async()=>{a(!0),u(null);try{let J=null;if(ee){const et=new Date(ee);if(Number.isNaN(et.getTime()))throw new Error("Please select a valid Coverage Start Date.");J=et.toISOString().slice(0,10)}let ge=null;$.current&&!$.current.isEmpty()&&(ge=$.current.toDataURL("image/png"));const Se={full_name:d.trim()};g.trim()&&(Se.phone=g.trim()),p.trim()&&(Se.address=p.trim()),j&&(Se.insurance_company=j),F.trim()&&(Se.policy_number=F.trim()),ge&&(Se.signature=ge);const{error:Pe}=await it.from("profiles").update(Se).eq("id",r);if(Pe)throw Pe;const Le={user_id:r,name:N.trim(),species:x||"other",breed:_.trim()||null,date_of_birth:W||null,insurance_company:j||null,policy_number:F.trim()||null,monthly_premium:A===""?null:parseFloat(A),deductible_per_claim:z===""?null:parseFloat(z),coverage_start_date:J,insurance_pays_percentage:de===""?null:Math.max(50,Math.min(100,Number(de)))};console.log("[OnboardingModal] petPayload about to send:",{monthlyPremium:A,deductiblePerClaim:z,coverageStartDate:ee,fullPayload:Le});const Fe=await ik(Le);s(5)}catch(J){u((J==null?void 0:J.message)||"Failed to save your info. Please try again.")}finally{a(!1)}};if(!t)return null;const pe=n===1?"Step 1 of 4":n===2?"Step 2 of 4":n===3?"Step 3 of 4":n===4?"Step 4 of 4":"";return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-6 shadow-2xl max-h-[calc(100vh-40px)] overflow-y-auto",onClick:J=>J.stopPropagation(),children:[n!==5&&l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:pe}),o&&l.jsx("div",{className:"mb-3 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:o}),n===1&&l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Welcome to Pet Claim Helper!"}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:d,onChange:J=>f(J.target.value),placeholder:"John Smith",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Phone Number ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("input",{type:"tel",value:g,onChange:J=>y(J.target.value),placeholder:"(555) 123-4567",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Required for some insurance forms"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Mailing Address ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("textarea",{value:p,onChange:J=>k(J.target.value),placeholder:"123 Main St, City, State 12345",rows:2,className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Required for Nationwide and Healthy Paws claim forms"})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!Y,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",onClick:()=>s(2),children:"Next"})]})]}),n===2&&l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Let's add your first pet"}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Pet Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:N,onChange:J=>C(J.target.value),placeholder:"Max",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Species ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:x,onChange:J=>b(J.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Breed ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:_,onChange:J=>R(J.target.value),placeholder:"Golden Retriever",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Required for insurance claim forms"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Date of Birth ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional but recommended)"})]}),l.jsx("input",{type:"date",value:W,onChange:J=>K(J.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Required for some insurance forms"})]})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:e,children:"Cancel"}),l.jsx("button",{type:"button",disabled:!X,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",onClick:()=>s(3),children:"Next"})]})]}),n===3&&l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Insurance Information"}),l.jsx("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400",children:"Pet Claim Helper will automatically submit your insurance claims using the official forms from your insurance company."}),l.jsx("div",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"No more filling out paperwork. No more missed deadlines. Just upload your vet bill and we'll handle the rest."}),l.jsxs("div",{className:"mt-5 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Insurance Company"}),l.jsxs("select",{value:j,onChange:J=>P(J.target.value),className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"NO_INSURANCE",children:"Not Insured"}),l.jsx("option",{value:"Nationwide",children:"Nationwide"}),l.jsx("option",{value:"Trupanion",children:"Trupanion"}),l.jsx("option",{value:"Fetch",children:"Fetch"}),l.jsx("option",{value:"Healthy Paws",children:"Healthy Paws"}),l.jsx("option",{value:"Pets Best",children:"Pets Best"}),l.jsx("option",{value:"ASPCA",children:"ASPCA"}),l.jsx("option",{value:"Embrace",children:"Embrace"}),l.jsx("option",{value:"Figo",children:"Figo"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),j==="NO_INSURANCE"&&l.jsx("div",{className:"p-3 bg-blue-50/50 dark:bg-blue-900/10 rounded-md border border-blue-200 dark:border-blue-800 text-sm text-slate-600 dark:text-slate-300",children:" No insurance selected. You can still track vet bills and file claims manually."}),j&&j!=="NO_INSURANCE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Policy Number ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("input",{value:F,onChange:J=>B(J.target.value),placeholder:"e.g., NW12345 or TP123456",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Monthly Premium (USD) ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("input",{type:"number",min:0,value:A,onChange:J=>O(J.target.value),placeholder:"50",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Deductible per Claim (USD) ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("input",{type:"number",min:0,value:z,onChange:J=>q(J.target.value),placeholder:"250",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Insurance Reimbursement % ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("input",{type:"number",min:50,max:100,value:de,onChange:J=>H(J.target.value),placeholder:"80",className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:["Coverage Start Date ",l.jsx("span",{className:"text-xs text-slate-500",children:"(optional)"})]}),l.jsx("input",{type:"date",value:ee,onChange:J=>Q(J.target.value),onClick:J=>{var ge,Se;return(Se=(ge=J.currentTarget).showPicker)==null?void 0:Se.call(ge)},className:"mt-2 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/90 dark:bg-slate-900 px-3 py-3"})]})]})]}),l.jsx("div",{className:"mt-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:"We'll use this to fill out official claim forms on your behalf"})}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 text-slate-700 dark:text-slate-300",onClick:()=>s(4),children:"Skip for now"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:()=>s(4),children:"Continue"})]})]}),n===4&&l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Authorize Claim Submissions"}),l.jsx("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400",children:"By providing your signature, you authorize Pet Claim Helper to:"}),l.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-2",children:""}),l.jsx("span",{children:"Submit insurance claims on your behalf"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-2",children:""}),l.jsx("span",{children:"Include this signature on all claim forms"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-2",children:""}),l.jsx("span",{children:"Send claims directly to your insurance company"})]})]}),l.jsx("div",{className:"mt-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Your signature will ONLY be used on claim forms that YOU approve before submission."}),l.jsxs("div",{className:"mt-5 border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!xe&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Au,{ref:$,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onBegin:()=>L(!0)})]}),xe&&l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsx("button",{type:"button",onClick:()=>{var J;(J=$.current)==null||J.clear(),L(!1)},className:"text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})}),l.jsx("div",{className:"mt-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-green-800 dark:text-green-300 font-medium",children:"Your signature is encrypted and stored securely. We never submit claims without showing you a preview first."})}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4 text-slate-700 dark:text-slate-300",onClick:ae,disabled:i,children:"Skip for now"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",onClick:ae,disabled:i,children:i?"Saving":"Finish Setup"})]})]}),n===5&&l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"You're all set!"}),l.jsxs("div",{className:"text-left bg-slate-50 dark:bg-slate-800/50 rounded-lg p-5 mb-6",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Here's how Pet Claim Helper works:"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-xl",children:"1."}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload your vet bill"})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-xl",children:"2."}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"We fill out the official claim form"})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-xl",children:"3."}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 font-semibold",children:"YOU review and approve"})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-xl",children:"4."}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"We submit to your insurance"})]})]})]}),l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-200",children:[l.jsx("div",{className:"font-semibold mb-1",children:"Time savings:"}),l.jsx("div",{className:"text-xs",children:"Traditional way: 20-30 minutes of paperwork per claim"}),l.jsx("div",{className:"text-xs font-semibold",children:"With Pet Claim Helper: Less than 2 minutes"})]})}),l.jsx("button",{type:"button",className:"w-full h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium",onClick:()=>{localStorage.setItem("justCompletedOnboarding","true"),e()},children:"Get Started"})]})]})})}function j6({userId:t,refreshToken:e,period:r}){const[n,s]=re.useState(!1),[i,a]=re.useState(null),[o,u]=re.useState([]),[d,f]=re.useState([]);re.useEffect(()=>{t&&(s(!0),a(null),Promise.all([it.from("claims").select("id, pet_id, total_amount, reimbursed_amount, filing_status, expense_category, service_date, created_at, deductible_applied, user_coinsurance_payment, insurance_reimbursement").eq("user_id",t),it.from("pets").select("id, name, species, monthly_premium, deductible_per_claim, coverage_start_date, insurance_pays_percentage, annual_coverage_limit").eq("user_id",t)]).then(([C,x])=>{if(C.error)throw C.error;if(x.error)throw x.error;console.log("[FinancialSummary] claims fetched:",C.data),console.log("[FinancialSummary] pets fetched:",x.data),u(C.data||[]),f(x.data||[])}).catch(C=>a((C==null?void 0:C.message)||"Failed to load financial data")).finally(()=>s(!1)))},[t,e]);const g=re.useMemo(()=>{const C={};for(const x of d)C[x.id]=x;return C},[d]),y=C=>{if(!C)return null;const x=String(C).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!x)return null;const b=Number(x[1]),_=Number(x[2])-1,R=Number(x[3]),W=new Date(b,_,R);return isNaN(W.getTime())?null:W},p=(C,x)=>{const b=Number(C.monthly_premium)||0;if(b===0)return{total:0,monthsCount:0,context:"No insurance"};const _=y(C.coverage_start_date||null);if(!_)return{total:0,monthsCount:0,context:"No coverage start date"};const R=new Date,W=R.getFullYear(),K=R.getMonth(),j=x!==null?x:null;if(j!==null){if(_.getFullYear()>j)return{total:0,monthsCount:0,context:`coverage started ${_.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`};if(j>W)return{total:0,monthsCount:0,context:"future year"};const O=new Date(j,0,1),z=new Date(j,11,31),q=_>O?_:O,ee=j===W?new Date(W,K,R.getDate()):z,Q=(ee.getFullYear()-q.getFullYear())*12+(ee.getMonth()-q.getMonth())+1,de=Math.max(0,Q),H=b*de;let oe="";if(_.getFullYear()===j&&_.getMonth()>0){const ne=_.toLocaleDateString("en-US",{month:"short"}),xe=ee.toLocaleDateString("en-US",{month:"short",year:"numeric"});oe=`${ne} - ${xe}`}else j===W&&de<12?oe=`Jan - ${ee.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`:oe=`${j}`;return{total:H,monthsCount:de,context:oe}}const P=(R.getFullYear()-_.getFullYear())*12+(R.getMonth()-_.getMonth())+1,F=Math.max(0,P),B=b*F,A=`since ${_.toLocaleDateString("en-US",{month:"short",year:"numeric"})}`;return{total:B,monthsCount:F,context:A}},k=re.useMemo(()=>{const C=new Date().getFullYear(),x=(()=>{const B=String(r||"").toLowerCase();return B==="2024"||B==="2025"?Number(B):B==="all"?null:C})(),b=new Date,_=d.reduce((B,A)=>{const O=p(A,x);return B+O.total},0);let R=0,W=0,K=0,j=0,P=0;for(const B of o){const A=B.service_date?y(B.service_date)||new Date(B.service_date):null;if(!A||isNaN(A.getTime())||x!==null&&A.getFullYear()!==x||A>b)continue;const O=String(B.expense_category||"").toLowerCase(),z=String(B.filing_status||"").toLowerCase(),q=Number(B.total_amount)||0,ee=Math.max(0,Number(B.reimbursed_amount)||0);O==="not_insured"||O==="not insured"?R+=q:O==="insured"&&z==="paid"?(W+=ee,j+=q,K+=Math.max(0,q-ee)):O==="insured"&&(j+=q,K+=Math.max(0,q-ee)),z==="submitted"&&(P+=q)}const F=_+R+K;return{premiumsYTD:_,nonInsuredTotal:R,insurancePaidBack:W,userShareCoveredClaims:K,insuredBillsTotal:j,definiteTotal:F,pendingTotal:P}},[o,d,r]),N=re.useMemo(()=>{const C=new Date().getFullYear(),x=(()=>{const W=String(r||"").toLowerCase();return W==="2024"||W==="2025"?Number(W):W==="all"?null:C})(),b=new Date,_={};for(const W of d){const K=p(W,x);_[W.id]={claimed:0,reimbursed:0,premiums:K.total,nonInsured:0,pendingBills:0,filedClaims:0}}const R=[...o].sort((W,K)=>{var F,B;const j=W.service_date&&(((F=y(W.service_date))==null?void 0:F.getTime())||new Date(W.service_date).getTime())||0,P=K.service_date&&(((B=y(K.service_date))==null?void 0:B.getTime())||new Date(K.service_date).getTime())||0;return j-P});for(const W of R){const K=String(W.expense_category||"").toLowerCase(),j=W.pet_id||"";if(!_[j])continue;const P=Number(W.total_amount)||0;if(P<=0)continue;const F=W.service_date?y(W.service_date)||new Date(W.service_date):null;if(!(!F||isNaN(F.getTime()))&&!(x!==null&&F.getFullYear()!==x)){if(K==="insured"){const B=String(W.filing_status||"not_submitted").toLowerCase(),A=B==="filed"?"submitted":B;A==="not_submitted"||A==="not_filed"?_[j].pendingBills+=1:(A==="submitted"||A==="paid"||A==="denied"||A==="approved")&&(_[j].filedClaims+=1)}if(K==="not_insured"||K==="not insured")F<=b&&(_[j].nonInsured+=P);else{_[j].claimed+=P;const B=Math.max(0,Number(W.reimbursed_amount)||0);_[j].reimbursed+=B}}}return console.log("[FinancialSummary] perPet calc (premiums + bills - reimbursed)",_),_},[o,d,g,r]);return t?l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Financial Summary"}),n&&l.jsx("div",{className:"mt-2 text-sm text-slate-500",children:"Loading"}),i&&l.jsx("div",{className:"mt-2 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:i}),!n&&!i&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:` ${String(r||"").toLowerCase()==="all"?"ALL TIME":String(r||new Date().getFullYear())} TOTAL`}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Spent on all pets (including premiums)"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",(k.premiumsYTD+k.nonInsuredTotal+k.insuredBillsTotal).toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"- Insurance Reimbursed"}),l.jsxs("div",{className:"text-xl font-bold",children:["$",k.insurancePaidBack.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"= Your Net Cost"}),l.jsxs("div",{className:"text-2xl font-bold",children:["$",k.definiteTotal.toFixed(2)]})]})]})]})})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:"YOUR OUT-OF-POCKET BREAKDOWN"}),l.jsxs("div",{className:"mt-3 text-sm space-y-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Insurance Premiums ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Monthly insurance cost)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",k.premiumsYTD.toFixed(2)]})]}),(()=>{const C=new Date().getFullYear(),x=(()=>{const _=String(r||"").toLowerCase();return _==="2024"||_==="2025"?Number(_):_==="all"?null:C})(),b=d.map(_=>{const R=p(_,x);return{pet:_,...R}}).filter(_=>_.total>0||Number(_.pet.monthly_premium)>0);return b.length===0?null:l.jsx("div",{className:"ml-4 mt-2 space-y-1 text-xs text-slate-500",children:b.map(({pet:_,total:R,monthsCount:W,context:K})=>{const j=Number(_.monthly_premium)||0;return j===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",_.name,": No insurance"]}),l.jsx("div",{})]},_.id):R===0?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",_.name,": $0 (",K,")"]}),l.jsx("div",{})]},_.id):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[" ",_.name,": $",j.toFixed(2),"/mo  ",W," = $",R.toFixed(2)," (",K,")"]}),l.jsx("div",{})]},_.id)})})})()]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-slate-600",children:["Non-Insured Vet Visits ",l.jsx("span",{className:"text-xs text-slate-500",children:"(Not covered by insurance)"})]}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",k.nonInsuredTotal.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-600",children:"Amount You Paid (for covered claims)"}),l.jsxs("div",{className:"font-mono font-semibold",children:["$",k.userShareCoveredClaims.toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 font-semibold",children:"Total You Paid"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold font-mono",children:["$",k.definiteTotal.toFixed(2)]})]})]})]}),l.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 sm:p-5",children:[l.jsx("div",{className:"text-sm sm:text-base font-semibold",children:` PER-PET BREAKDOWN (${String(r||"").toLowerCase()==="all"?"All Time":String(r||new Date().getFullYear())})`}),d.length===0&&l.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No pets yet. Add a pet to see per-pet costs."}),l.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(C=>{const x=N[C.id]||{claimed:0,reimbursed:0,premiums:0,nonInsured:0,pendingBills:0,filedClaims:0};C.species==="cat"||C.species;const b=C.species==="cat"?"":C.species==="dog"?"":"",_=x.premiums+(x.nonInsured||0)+x.claimed-x.reimbursed,R=(x.nonInsured||0)+x.reimbursed+x.claimed>0;return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-100 min-w-0",children:[l.jsx("span",{children:b}),l.jsxs("span",{className:"font-semibold truncate",title:`${C.name} (${C.species})`,children:[C.name," (",C.species,")"]})]}),l.jsx("div",{className:"mt-3 text-sm",children:R?l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"YOUR COSTS"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Premiums (attributed)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",x.premiums.toFixed(2)]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Vet Bills (insured + non-insured)"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(x.claimed+(x.nonInsured||0)).toFixed(2)]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Subtotal Paid"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",(x.premiums+x.claimed+(x.nonInsured||0)).toFixed(2)]})]}),l.jsx("div",{className:"pt-3 text-xs font-semibold text-slate-500",children:"INSURANCE COVERAGE"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-600",children:"Reimbursements Received"}),l.jsxs("span",{className:"font-mono font-semibold",children:["$",x.reimbursed.toFixed(2)]})]}),l.jsxs("div",{className:"pt-3 border-t-2 border-slate-300 dark:border-slate-700 flex items-center justify-between",children:[l.jsx("span",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("span",{className:"font-mono font-bold text-lg",children:["$",_.toFixed(2)]})]}),l.jsx("div",{className:"text-xs text-slate-500",children:x.pendingBills>0?`(${x.pendingBills} bill${x.pendingBills===1?"":"s"} pending submission)`:x.filedClaims>0?`(${x.filedClaims} claim${x.filedClaims===1?"":"s"} filed)`:""})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-800 dark:text-slate-100 font-bold",children:"YOUR OUT-OF-POCKET COST"}),l.jsxs("div",{className:"font-mono font-bold text-lg",children:["$",_.toFixed(2)]})]}),l.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"(No vet bills this year)"})]})})]},C.id)})})]})]}):null}class Go extends Error{}class C6 extends Go{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class A6 extends Go{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class P6 extends Go{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class eu extends Go{}class db extends Go{constructor(e){super(`Invalid unit ${e}`)}}class vn extends Go{}class Ca extends Go{constructor(){super("Zone is an abstract class")}}const qe="numeric",oi="short",hs="long",gf={year:qe,month:qe,day:qe},hb={year:qe,month:oi,day:qe},E6={year:qe,month:oi,day:qe,weekday:oi},fb={year:qe,month:hs,day:qe},mb={year:qe,month:hs,day:qe,weekday:hs},pb={hour:qe,minute:qe},gb={hour:qe,minute:qe,second:qe},vb={hour:qe,minute:qe,second:qe,timeZoneName:oi},yb={hour:qe,minute:qe,second:qe,timeZoneName:hs},xb={hour:qe,minute:qe,hourCycle:"h23"},bb={hour:qe,minute:qe,second:qe,hourCycle:"h23"},wb={hour:qe,minute:qe,second:qe,hourCycle:"h23",timeZoneName:oi},Nb={hour:qe,minute:qe,second:qe,hourCycle:"h23",timeZoneName:hs},_b={year:qe,month:qe,day:qe,hour:qe,minute:qe},Sb={year:qe,month:qe,day:qe,hour:qe,minute:qe,second:qe},kb={year:qe,month:oi,day:qe,hour:qe,minute:qe},jb={year:qe,month:oi,day:qe,hour:qe,minute:qe,second:qe},L6={year:qe,month:oi,day:qe,weekday:oi,hour:qe,minute:qe},Cb={year:qe,month:hs,day:qe,hour:qe,minute:qe,timeZoneName:oi},Ab={year:qe,month:hs,day:qe,hour:qe,minute:qe,second:qe,timeZoneName:oi},Pb={year:qe,month:hs,day:qe,weekday:hs,hour:qe,minute:qe,timeZoneName:hs},Eb={year:qe,month:hs,day:qe,weekday:hs,hour:qe,minute:qe,second:qe,timeZoneName:hs};class fd{get type(){throw new Ca}get name(){throw new Ca}get ianaName(){return this.name}get isUniversal(){throw new Ca}offsetName(e,r){throw new Ca}formatOffset(e,r){throw new Ca}offset(e){throw new Ca}equals(e){throw new Ca}get isValid(){throw new Ca}}let n0=null;class Wf extends fd{static get instance(){return n0===null&&(n0=new Wf),n0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return $b(e,r,n)}formatOffset(e,r){return Rc(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Pp=new Map;function T6(t){let e=Pp.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Pp.set(t,e)),e}const O6={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function I6(t,e){const r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,i,a,o,u,d,f]=n;return[a,s,i,o,u,d,f]}function D6(t,e){const r=t.formatToParts(e),n=[];for(let s=0;s<r.length;s++){const{type:i,value:a}=r[s],o=O6[i];i==="era"?n[o]=a:dt(o)||(n[o]=parseInt(a,10))}return n}const s0=new Map;class sa extends fd{static create(e){let r=s0.get(e);return r===void 0&&s0.set(e,r=new sa(e)),r}static resetCache(){s0.clear(),Pp.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=sa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return $b(e,r,n,this.name)}formatOffset(e,r){return Rc(this.offset(e),r)}offset(e){if(!this.valid)return NaN;const r=new Date(e);if(isNaN(r))return NaN;const n=T6(this.name);let[s,i,a,o,u,d,f]=n.formatToParts?D6(n,r):I6(n,r);o==="BC"&&(s=-Math.abs(s)+1);const y=Hf({year:s,month:i,day:a,hour:u===24?0:u,minute:d,second:f,millisecond:0});let p=+r;const k=p%1e3;return p-=k>=0?k:1e3+k,(y-p)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let _v={};function F6(t,e={}){const r=JSON.stringify([t,e]);let n=_v[r];return n||(n=new Intl.ListFormat(t,e),_v[r]=n),n}const Ep=new Map;function Lp(t,e={}){const r=JSON.stringify([t,e]);let n=Ep.get(r);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),Ep.set(r,n)),n}const Tp=new Map;function M6(t,e={}){const r=JSON.stringify([t,e]);let n=Tp.get(r);return n===void 0&&(n=new Intl.NumberFormat(t,e),Tp.set(r,n)),n}const Op=new Map;function R6(t,e={}){const{base:r,...n}=e,s=JSON.stringify([t,n]);let i=Op.get(s);return i===void 0&&(i=new Intl.RelativeTimeFormat(t,e),Op.set(s,i)),i}let Nc=null;function U6(){return Nc||(Nc=new Intl.DateTimeFormat().resolvedOptions().locale,Nc)}const Ip=new Map;function Lb(t){let e=Ip.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),Ip.set(t,e)),e}const Dp=new Map;function B6(t){let e=Dp.get(t);if(!e){const r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in e||(e={...Tb,...e}),Dp.set(t,e)}return e}function $6(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const r=t.indexOf("-u-");if(r===-1)return[t];{let n,s;try{n=Lp(t).resolvedOptions(),s=t}catch{const u=t.substring(0,r);n=Lp(u).resolvedOptions(),s=u}const{numberingSystem:i,calendar:a}=n;return[s,i,a]}}function z6(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function q6(t){const e=[];for(let r=1;r<=12;r++){const n=ft.utc(2009,r,1);e.push(t(n))}return e}function W6(t){const e=[];for(let r=1;r<=7;r++){const n=ft.utc(2016,11,13+r);e.push(t(n))}return e}function fh(t,e,r,n){const s=t.listingMode();return s==="error"?null:s==="en"?r(e):n(e)}function V6(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Lb(t.locale).numberingSystem==="latn"}class H6{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:i,...a}=n;if(!r||Object.keys(a).length>0){const o={useGrouping:!1,...n};n.padTo>0&&(o.minimumIntegerDigits=n.padTo),this.inf=M6(e,o)}}format(e){if(this.inf){const r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{const r=this.floor?Math.floor(e):Yg(e,3);return Br(r,this.padTo)}}}class G6{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),o=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&sa.create(o).valid?(s=o,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||s,this.dtf=Lp(r,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Y6{constructor(e,r,n){this.opts={style:"long",...n},!r&&Ub()&&(this.rtf=R6(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):gj(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}}const Tb={firstDay:1,minimalDays:4,weekend:[6,7]};class $t{static fromOpts(e){return $t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,s,i=!1){const a=e||Sr.defaultLocale,o=a||(i?"en-US":U6()),u=r||Sr.defaultNumberingSystem,d=n||Sr.defaultOutputCalendar,f=Mp(s)||Sr.defaultWeekSettings;return new $t(o,u,d,f,a)}static resetCache(){Nc=null,Ep.clear(),Tp.clear(),Op.clear(),Ip.clear(),Dp.clear()}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:s}={}){return $t.create(e,r,n,s)}constructor(e,r,n,s,i){const[a,o,u]=$6(e);this.locale=a,this.numberingSystem=r||o||null,this.outputCalendar=n||u||null,this.weekSettings=s,this.intl=z6(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=V6(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:$t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Mp(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return fh(this,e,Wb,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");r&=!n;const s=r?{month:e,day:"numeric"}:{month:e},i=r?"format":"standalone";if(!this.monthsCache[i][e]){const a=n?o=>this.dtFormatter(o,s).format():o=>this.extract(o,s,"month");this.monthsCache[i][e]=q6(a)}return this.monthsCache[i][e]})}weekdays(e,r=!1){return fh(this,e,Gb,()=>{const n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=r?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=W6(i=>this.extract(i,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return fh(this,void 0,()=>Yb,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ft.utc(2016,11,13,9),ft.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return fh(this,e,Jb,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[ft.utc(-40,1,1),ft.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){const s=this.dtFormatter(e,r),i=s.formatToParts(),a=i.find(o=>o.type.toLowerCase()===n);return a?a.value:null}numberFormatter(e={}){return new H6(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new G6(e,this.intl,r)}relFormatter(e={}){return new Y6(this.intl,this.isEnglish(),e)}listFormatter(e={}){return F6(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Lb(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Bb()?B6(this.locale):Tb}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let i0=null;class Ln extends fd{static get utcInstance(){return i0===null&&(i0=new Ln(0)),i0}static instance(e){return e===0?Ln.utcInstance:new Ln(e)}static parseSpecifier(e){if(e){const r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Ln(Gf(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Rc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Rc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return Rc(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class J6 extends fd{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Fa(t,e){if(dt(t)||t===null)return e;if(t instanceof fd)return t;if(tj(t)){const r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?Wf.instance:r==="utc"||r==="gmt"?Ln.utcInstance:Ln.parseSpecifier(r)||sa.create(t)}else return Ya(t)?Ln.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new J6(t)}const Wg={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Sv={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},K6=Wg.hanidec.replace(/[\[|\]]/g,"").split("");function Z6(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);if(t[r].search(Wg.hanidec)!==-1)e+=K6.indexOf(t[r]);else for(const s in Sv){const[i,a]=Sv[s];n>=i&&n<=a&&(e+=n-i)}}return parseInt(e,10)}else return e}const Fp=new Map;function X6(){Fp.clear()}function Js({numberingSystem:t},e=""){const r=t||"latn";let n=Fp.get(r);n===void 0&&(n=new Map,Fp.set(r,n));let s=n.get(e);return s===void 0&&(s=new RegExp(`${Wg[r]}${e}`),n.set(e,s)),s}let kv=()=>Date.now(),jv="system",Cv=null,Av=null,Pv=null,Ev=60,Lv,Tv=null;class Sr{static get now(){return kv}static set now(e){kv=e}static set defaultZone(e){jv=e}static get defaultZone(){return Fa(jv,Wf.instance)}static get defaultLocale(){return Cv}static set defaultLocale(e){Cv=e}static get defaultNumberingSystem(){return Av}static set defaultNumberingSystem(e){Av=e}static get defaultOutputCalendar(){return Pv}static set defaultOutputCalendar(e){Pv=e}static get defaultWeekSettings(){return Tv}static set defaultWeekSettings(e){Tv=Mp(e)}static get twoDigitCutoffYear(){return Ev}static set twoDigitCutoffYear(e){Ev=e%100}static get throwOnInvalid(){return Lv}static set throwOnInvalid(e){Lv=e}static resetCaches(){$t.resetCache(),sa.resetCache(),ft.resetCache(),X6()}}class ni{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ob=[0,31,59,90,120,151,181,212,243,273,304,334],Ib=[0,31,60,91,121,152,182,213,244,274,305,335];function Is(t,e){return new ni("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Vg(t,e,r){const n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function Db(t,e,r){return r+(md(t)?Ib:Ob)[e-1]}function Fb(t,e){const r=md(t)?Ib:Ob,n=r.findIndex(i=>i<e),s=e-r[n];return{month:n+1,day:s}}function Hg(t,e){return(t-e+7)%7+1}function vf(t,e=4,r=1){const{year:n,month:s,day:i}=t,a=Db(n,s,i),o=Hg(Vg(n,s,i),r);let u=Math.floor((a-o+14-e)/7),d;return u<1?(d=n-1,u=id(d,e,r)):u>id(n,e,r)?(d=n+1,u=1):d=n,{weekYear:d,weekNumber:u,weekday:o,...Yf(t)}}function Ov(t,e=4,r=1){const{weekYear:n,weekNumber:s,weekday:i}=t,a=Hg(Vg(n,1,e),r),o=hu(n);let u=s*7+i-a-7+e,d;u<1?(d=n-1,u+=hu(d)):u>o?(d=n+1,u-=hu(n)):d=n;const{month:f,day:g}=Fb(d,u);return{year:d,month:f,day:g,...Yf(t)}}function a0(t){const{year:e,month:r,day:n}=t,s=Db(e,r,n);return{year:e,ordinal:s,...Yf(t)}}function Iv(t){const{year:e,ordinal:r}=t,{month:n,day:s}=Fb(e,r);return{year:e,month:n,day:s,...Yf(t)}}function Dv(t,e){if(!dt(t.localWeekday)||!dt(t.localWeekNumber)||!dt(t.localWeekYear)){if(!dt(t.weekday)||!dt(t.weekNumber)||!dt(t.weekYear))throw new eu("Cannot mix locale-based week fields with ISO-based week fields");return dt(t.localWeekday)||(t.weekday=t.localWeekday),dt(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),dt(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Q6(t,e=4,r=1){const n=Vf(t.weekYear),s=Ds(t.weekNumber,1,id(t.weekYear,e,r)),i=Ds(t.weekday,1,7);return n?s?i?!1:Is("weekday",t.weekday):Is("week",t.weekNumber):Is("weekYear",t.weekYear)}function ej(t){const e=Vf(t.year),r=Ds(t.ordinal,1,hu(t.year));return e?r?!1:Is("ordinal",t.ordinal):Is("year",t.year)}function Mb(t){const e=Vf(t.year),r=Ds(t.month,1,12),n=Ds(t.day,1,yf(t.year,t.month));return e?r?n?!1:Is("day",t.day):Is("month",t.month):Is("year",t.year)}function Rb(t){const{hour:e,minute:r,second:n,millisecond:s}=t,i=Ds(e,0,23)||e===24&&r===0&&n===0&&s===0,a=Ds(r,0,59),o=Ds(n,0,59),u=Ds(s,0,999);return i?a?o?u?!1:Is("millisecond",s):Is("second",n):Is("minute",r):Is("hour",e)}function dt(t){return typeof t>"u"}function Ya(t){return typeof t=="number"}function Vf(t){return typeof t=="number"&&t%1===0}function tj(t){return typeof t=="string"}function rj(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ub(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Bb(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function nj(t){return Array.isArray(t)?t:[t]}function Fv(t,e,r){if(t.length!==0)return t.reduce((n,s)=>{const i=[e(s),s];return n&&r(n[0],i[0])===n[0]?n:i},null)[1]}function sj(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function Nu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mp(t){if(t==null)return null;if(typeof t!="object")throw new vn("Week settings must be an object");if(!Ds(t.firstDay,1,7)||!Ds(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Ds(e,1,7)))throw new vn("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Ds(t,e,r){return Vf(t)&&t>=e&&t<=r}function ij(t,e){return t-e*Math.floor(t/e)}function Br(t,e=2){const r=t<0;let n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Ta(t){if(!(dt(t)||t===null||t===""))return parseInt(t,10)}function bo(t){if(!(dt(t)||t===null||t===""))return parseFloat(t)}function Gg(t){if(!(dt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Yg(t,e,r="round"){const n=10**e;switch(r){case"expand":return t>0?Math.ceil(t*n)/n:Math.floor(t*n)/n;case"trunc":return Math.trunc(t*n)/n;case"round":return Math.round(t*n)/n;case"floor":return Math.floor(t*n)/n;case"ceil":return Math.ceil(t*n)/n;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function md(t){return t%4===0&&(t%100!==0||t%400===0)}function hu(t){return md(t)?366:365}function yf(t,e){const r=ij(e-1,12)+1,n=t+(e-r)/12;return r===2?md(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Hf(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Mv(t,e,r){return-Hg(Vg(t,1,e),r)+e-1}function id(t,e=4,r=1){const n=Mv(t,e,r),s=Mv(t+1,e,r);return(hu(t)-n+s)/7}function Rp(t){return t>99?t:t>Sr.twoDigitCutoffYear?1900+t:2e3+t}function $b(t,e,r,n=null){const s=new Date(t),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(i.timeZone=n);const a={timeZoneName:e,...i},o=new Intl.DateTimeFormat(r,a).formatToParts(s).find(u=>u.type.toLowerCase()==="timezonename");return o?o.value:null}function Gf(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);const n=parseInt(e,10)||0,s=r<0||Object.is(r,-0)?-n:n;return r*60+s}function zb(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new vn(`Invalid unit value ${t}`);return e}function xf(t,e){const r={};for(const n in t)if(Nu(t,n)){const s=t[n];if(s==null)continue;r[e(n)]=zb(s)}return r}function Rc(t,e){const r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Br(r,2)}:${Br(n,2)}`;case"narrow":return`${s}${r}${n>0?`:${n}`:""}`;case"techie":return`${s}${Br(r,2)}${Br(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Yf(t){return sj(t,["hour","minute","second","millisecond"])}const aj=["January","February","March","April","May","June","July","August","September","October","November","December"],qb=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],oj=["J","F","M","A","M","J","J","A","S","O","N","D"];function Wb(t){switch(t){case"narrow":return[...oj];case"short":return[...qb];case"long":return[...aj];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Vb=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Hb=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],lj=["M","T","W","T","F","S","S"];function Gb(t){switch(t){case"narrow":return[...lj];case"short":return[...Hb];case"long":return[...Vb];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Yb=["AM","PM"],uj=["Before Christ","Anno Domini"],cj=["BC","AD"],dj=["B","A"];function Jb(t){switch(t){case"narrow":return[...dj];case"short":return[...cj];case"long":return[...uj];default:return null}}function hj(t){return Yb[t.hour<12?0:1]}function fj(t,e){return Gb(e)[t.weekday-1]}function mj(t,e){return Wb(e)[t.month-1]}function pj(t,e){return Jb(e)[t.year<0?0:1]}function gj(t,e,r="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&i){const g=t==="days";switch(e){case 1:return g?"tomorrow":`next ${s[t][0]}`;case-1:return g?"yesterday":`last ${s[t][0]}`;case 0:return g?"today":`this ${s[t][0]}`}}const a=Object.is(e,-0)||e<0,o=Math.abs(e),u=o===1,d=s[t],f=n?u?d[1]:d[2]||d[1]:u?s[t][0]:t;return a?`${o} ${f} ago`:`in ${o} ${f}`}function Rv(t,e){let r="";for(const n of t)n.literal?r+=n.val:r+=e(n.val);return r}const vj={D:gf,DD:hb,DDD:fb,DDDD:mb,t:pb,tt:gb,ttt:vb,tttt:yb,T:xb,TT:bb,TTT:wb,TTTT:Nb,f:_b,ff:kb,fff:Cb,ffff:Pb,F:Sb,FF:jb,FFF:Ab,FFFF:Eb};class bn{static create(e,r={}){return new bn(e,r)}static parseFormat(e){let r=null,n="",s=!1;const i=[];for(let a=0;a<e.length;a++){const o=e.charAt(a);o==="'"?((n.length>0||s)&&i.push({literal:s||/^\s+$/.test(n),val:n===""?"'":n}),r=null,n="",s=!s):s||o===r?n+=o:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=o,r=o)}return n.length>0&&i.push({literal:s||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return vj[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0,n=void 0){if(this.opts.forceSimple)return Br(e,r);const s={...this.opts};return r>0&&(s.padTo=r),n&&(s.signDisplay=n),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,r){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",i=(p,k)=>this.loc.extract(e,p,k),a=p=>e.isOffsetFixed&&e.offset===0&&p.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,p.format):"",o=()=>n?hj(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(p,k)=>n?mj(e,p):i(k?{month:p}:{month:p,day:"numeric"},"month"),d=(p,k)=>n?fj(e,p):i(k?{weekday:p}:{weekday:p,month:"long",day:"numeric"},"weekday"),f=p=>{const k=bn.macroTokenToFormatOpts(p);return k?this.formatWithSystemDefault(e,k):p},g=p=>n?pj(e,p):i({era:p},"era"),y=p=>{switch(p){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return s?i({day:"numeric"},"day"):this.num(e.day);case"dd":return s?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return s?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return s?i({month:"numeric"},"month"):this.num(e.month);case"MM":return s?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return s?i({year:"numeric"},"year"):this.num(e.year);case"yy":return s?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return g("short");case"GG":return g("long");case"GGGGG":return g("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return f(p)}};return Rv(bn.parseFormat(r),y)}formatDurationFromString(e,r){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,s=f=>{switch(f[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},i=(f,g)=>y=>{const p=s(y);if(p){const k=g.isNegativeDuration&&p!==g.largestUnit?n:1;let N;return this.opts.signMode==="negativeLargestOnly"&&p!==g.largestUnit?N="never":this.opts.signMode==="all"?N="always":N="auto",this.num(f.get(p)*k,y.length,N)}else return y},a=bn.parseFormat(r),o=a.reduce((f,{literal:g,val:y})=>g?f:f.concat(y),[]),u=e.shiftTo(...o.map(s).filter(f=>f)),d={isNegativeDuration:u<0,largestUnit:Object.keys(u.values)[0]};return Rv(a,i(u,d))}}const Kb=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Pu(...t){const e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function Eu(...t){return e=>t.reduce(([r,n,s],i)=>{const[a,o,u]=i(e,s);return[{...r,...a},o||n,u]},[{},null,1]).slice(0,2)}function Lu(t,...e){if(t==null)return[null,null];for(const[r,n]of e){const s=r.exec(t);if(s)return n(s)}return[null,null]}function Zb(...t){return(e,r)=>{const n={};let s;for(s=0;s<t.length;s++)n[t[s]]=Ta(e[r+s]);return[n,null,r+s]}}const Xb=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,yj=`(?:${Xb.source}?(?:\\[(${Kb.source})\\])?)?`,Jg=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Qb=RegExp(`${Jg.source}${yj}`),Kg=RegExp(`(?:[Tt]${Qb.source})?`),xj=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,bj=/(\d{4})-?W(\d\d)(?:-?(\d))?/,wj=/(\d{4})-?(\d{3})/,Nj=Zb("weekYear","weekNumber","weekDay"),_j=Zb("year","ordinal"),Sj=/(\d{4})-(\d\d)-(\d\d)/,ew=RegExp(`${Jg.source} ?(?:${Xb.source}|(${Kb.source}))?`),kj=RegExp(`(?: ${ew.source})?`);function fu(t,e,r){const n=t[e];return dt(n)?r:Ta(n)}function jj(t,e){return[{year:fu(t,e),month:fu(t,e+1,1),day:fu(t,e+2,1)},null,e+3]}function Tu(t,e){return[{hours:fu(t,e,0),minutes:fu(t,e+1,0),seconds:fu(t,e+2,0),milliseconds:Gg(t[e+3])},null,e+4]}function pd(t,e){const r=!t[e]&&!t[e+1],n=Gf(t[e+1],t[e+2]),s=r?null:Ln.instance(n);return[{},s,e+3]}function gd(t,e){const r=t[e]?sa.create(t[e]):null;return[{},r,e+1]}const Cj=RegExp(`^T?${Jg.source}$`),Aj=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Pj(t){const[e,r,n,s,i,a,o,u,d]=t,f=e[0]==="-",g=u&&u[0]==="-",y=(p,k=!1)=>p!==void 0&&(k||p&&f)?-p:p;return[{years:y(bo(r)),months:y(bo(n)),weeks:y(bo(s)),days:y(bo(i)),hours:y(bo(a)),minutes:y(bo(o)),seconds:y(bo(u),u==="-0"),milliseconds:y(Gg(d),g)}]}const Ej={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Zg(t,e,r,n,s,i,a){const o={year:e.length===2?Rp(Ta(e)):Ta(e),month:qb.indexOf(r)+1,day:Ta(n),hour:Ta(s),minute:Ta(i)};return a&&(o.second=Ta(a)),t&&(o.weekday=t.length>3?Vb.indexOf(t)+1:Hb.indexOf(t)+1),o}const Lj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Tj(t){const[,e,r,n,s,i,a,o,u,d,f,g]=t,y=Zg(e,s,n,r,i,a,o);let p;return u?p=Ej[u]:d?p=0:p=Gf(f,g),[y,new Ln(p)]}function Oj(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Ij=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Dj=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Fj=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Uv(t){const[,e,r,n,s,i,a,o]=t;return[Zg(e,s,n,r,i,a,o),Ln.utcInstance]}function Mj(t){const[,e,r,n,s,i,a,o]=t;return[Zg(e,o,r,n,s,i,a),Ln.utcInstance]}const Rj=Pu(xj,Kg),Uj=Pu(bj,Kg),Bj=Pu(wj,Kg),$j=Pu(Qb),tw=Eu(jj,Tu,pd,gd),zj=Eu(Nj,Tu,pd,gd),qj=Eu(_j,Tu,pd,gd),Wj=Eu(Tu,pd,gd);function Vj(t){return Lu(t,[Rj,tw],[Uj,zj],[Bj,qj],[$j,Wj])}function Hj(t){return Lu(Oj(t),[Lj,Tj])}function Gj(t){return Lu(t,[Ij,Uv],[Dj,Uv],[Fj,Mj])}function Yj(t){return Lu(t,[Aj,Pj])}const Jj=Eu(Tu);function Kj(t){return Lu(t,[Cj,Jj])}const Zj=Pu(Sj,kj),Xj=Pu(ew),Qj=Eu(Tu,pd,gd);function e8(t){return Lu(t,[Zj,tw],[Xj,Qj])}const Bv="Invalid Duration",rw={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},t8={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...rw},Ps=146097/400,Il=146097/4800,r8={years:{quarters:4,months:12,weeks:Ps/7,days:Ps,hours:Ps*24,minutes:Ps*24*60,seconds:Ps*24*60*60,milliseconds:Ps*24*60*60*1e3},quarters:{months:3,weeks:Ps/28,days:Ps/4,hours:Ps*24/4,minutes:Ps*24*60/4,seconds:Ps*24*60*60/4,milliseconds:Ps*24*60*60*1e3/4},months:{weeks:Il/7,days:Il,hours:Il*24,minutes:Il*24*60,seconds:Il*24*60*60,milliseconds:Il*24*60*60*1e3},...rw},Oo=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],n8=Oo.slice(0).reverse();function Hi(t,e,r=!1){const n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Dt(n)}function nw(t,e){let r=e.milliseconds??0;for(const n of n8.slice(1))e[n]&&(r+=e[n]*t[n].milliseconds);return r}function $v(t,e){const r=nw(t,e)<0?-1:1;Oo.reduceRight((n,s)=>{if(dt(e[s]))return n;if(n){const i=e[n]*r,a=t[s][n],o=Math.floor(i/a);e[s]+=o*r,e[n]-=o*a*r}return s},null),Oo.reduce((n,s)=>{if(dt(e[s]))return n;if(n){const i=e[n]%1;e[n]-=i,e[s]+=i*t[n][s]}return s},null)}function zv(t){const e={};for(const[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}class Dt{constructor(e){const r=e.conversionAccuracy==="longterm"||!1;let n=r?r8:t8;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||$t.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return Dt.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new vn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Dt({values:xf(e,Dt.normalizeUnit),loc:$t.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(Ya(e))return Dt.fromMillis(e);if(Dt.isDuration(e))return e;if(typeof e=="object")return Dt.fromObject(e);throw new vn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){const[n]=Yj(e);return n?Dt.fromObject(n,r):Dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){const[n]=Kj(e);return n?Dt.fromObject(n,r):Dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new vn("need to specify a reason the Duration is invalid");const n=e instanceof ni?e:new ni(e,r);if(Sr.throwOnInvalid)throw new P6(n);return new Dt({invalid:n})}static normalizeUnit(e){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new db(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){const n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?bn.create(this.loc,n).formatDurationFromString(this,e):Bv}toHuman(e={}){if(!this.isValid)return Bv;const r=e.showZeros!==!1,n=Oo.map(s=>{const i=this.values[s];return dt(i)||i===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(i)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Yg(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ft.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?nw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const r=Dt.fromDurationLike(e),n={};for(const s of Oo)(Nu(r.values,s)||Nu(this.values,s))&&(n[s]=r.get(s)+this.get(s));return Hi(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const r=Dt.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;const r={};for(const n of Object.keys(this.values))r[n]=zb(e(this.values[n],n));return Hi(this,{values:r},!0)}get(e){return this[Dt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const r={...this.values,...xf(e,Dt.normalizeUnit)};return Hi(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:s}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:s,conversionAccuracy:n};return Hi(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return $v(this.matrix,e),Hi(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=zv(this.normalize().shiftToAll().toObject());return Hi(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>Dt.normalizeUnit(a));const r={},n={},s=this.toObject();let i;for(const a of Oo)if(e.indexOf(a)>=0){i=a;let o=0;for(const d in n)o+=this.matrix[d][a]*n[d],n[d]=0;Ya(s[a])&&(o+=s[a]);const u=Math.trunc(o);r[a]=u,n[a]=(o*1e3-u*1e3)/1e3}else Ya(s[a])&&(n[a]=s[a]);for(const a in n)n[a]!==0&&(r[i]+=a===i?n[a]:n[a]/this.matrix[i][a]);return $v(this.matrix,r),Hi(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return Hi(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=zv(this.values);return Hi(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of Oo)if(!r(this.values[n],e.values[n]))return!1;return!0}}const Dl="Invalid Interval";function s8(t,e){return!t||!t.isValid?Nr.invalid("missing or invalid start"):!e||!e.isValid?Nr.invalid("missing or invalid end"):e<t?Nr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Nr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new vn("need to specify a reason the Interval is invalid");const n=e instanceof ni?e:new ni(e,r);if(Sr.throwOnInvalid)throw new A6(n);return new Nr({invalid:n})}static fromDateTimes(e,r){const n=gc(e),s=gc(r),i=s8(n,s);return i??new Nr({start:n,end:s})}static after(e,r){const n=Dt.fromDurationLike(r),s=gc(e);return Nr.fromDateTimes(s,s.plus(n))}static before(e,r){const n=Dt.fromDurationLike(r),s=gc(e);return Nr.fromDateTimes(s.minus(n),s)}static fromISO(e,r){const[n,s]=(e||"").split("/",2);if(n&&s){let i,a;try{i=ft.fromISO(n,r),a=i.isValid}catch{a=!1}let o,u;try{o=ft.fromISO(s,r),u=o.isValid}catch{u=!1}if(a&&u)return Nr.fromDateTimes(i,o);if(a){const d=Dt.fromISO(s,r);if(d.isValid)return Nr.after(i,d)}else if(u){const d=Dt.fromISO(n,r);if(d.isValid)return Nr.before(o,d)}}return Nr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;const n=this.start.startOf(e,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,r),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?Nr.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];const r=e.map(gc).filter(a=>this.contains(a)).sort((a,o)=>a.toMillis()-o.toMillis()),n=[];let{s}=this,i=0;for(;s<this.e;){const a=r[i]||this.e,o=+a>+this.e?this.e:a;n.push(Nr.fromDateTimes(s,o)),s=o,i+=1}return n}splitBy(e){const r=Dt.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,s=1,i;const a=[];for(;n<this.e;){const o=this.start.plus(r.mapUnits(u=>u*s));i=+o>+this.e?this.e:o,a.push(Nr.fromDateTimes(n,i)),n=i,s+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:Nr.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;const r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Nr.fromDateTimes(r,n)}static merge(e){const[r,n]=e.sort((s,i)=>s.s-i.s).reduce(([s,i],a)=>i?i.overlaps(a)||i.abutsStart(a)?[s,i.union(a)]:[s.concat([i]),a]:[s,a],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0;const s=[],i=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),a=Array.prototype.concat(...i),o=a.sort((u,d)=>u.time-d.time);for(const u of o)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&s.push(Nr.fromDateTimes(r,u.time)),r=null);return Nr.merge(s)}difference(...e){return Nr.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Dl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=gf,r={}){return this.isValid?bn.create(this.s.loc.clone(r),e).formatInterval(this):Dl}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Dl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Dl}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Dl}toFormat(e,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:Dl}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Dt.invalid(this.invalidReason)}mapEndpoints(e){return Nr.fromDateTimes(e(this.s),e(this.e))}}class mh{static hasDST(e=Sr.defaultZone){const r=ft.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return sa.isValidZone(e)}static normalizeZone(e){return Fa(e,Sr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||$t.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||$t.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||$t.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||$t.create(r,n,i)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||$t.create(r,n,i)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:s=null}={}){return(s||$t.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:s=null}={}){return(s||$t.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return $t.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return $t.create(r,null,"gregory").eras(e)}static features(){return{relative:Ub(),localeWeek:Bb()}}}function qv(t,e){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(Dt.fromMillis(n).as("days"))}function i8(t,e,r){const n=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const f=qv(u,d);return(f-f%7)/7}],["days",qv]],s={},i=t;let a,o;for(const[u,d]of n)r.indexOf(u)>=0&&(a=u,s[u]=d(t,e),o=i.plus(s),o>e?(s[u]--,t=i.plus(s),t>e&&(o=t,s[u]--,t=i.plus(s))):t=o);return[t,s,o,a]}function a8(t,e,r,n){let[s,i,a,o]=i8(t,e,r);const u=e-s,d=r.filter(g=>["hours","minutes","seconds","milliseconds"].indexOf(g)>=0);d.length===0&&(a<e&&(a=s.plus({[o]:1})),a!==s&&(i[o]=(i[o]||0)+u/(a-s)));const f=Dt.fromObject(i,n);return d.length>0?Dt.fromMillis(u,n).shiftTo(...d).plus(f):f}const o8="missing Intl.DateTimeFormat.formatToParts support";function Bt(t,e=r=>r){return{regex:t,deser:([r])=>e(Z6(r))}}const l8="",sw=`[ ${l8}]`,iw=new RegExp(sw,"g");function u8(t){return t.replace(/\./g,"\\.?").replace(iw,sw)}function Wv(t){return t.replace(/\./g,"").replace(iw," ").toLowerCase()}function Ks(t,e){return t===null?null:{regex:RegExp(t.map(u8).join("|")),deser:([r])=>t.findIndex(n=>Wv(r)===Wv(n))+e}}function Vv(t,e){return{regex:t,deser:([,r,n])=>Gf(r,n),groups:e}}function ph(t){return{regex:t,deser:([e])=>e}}function c8(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d8(t,e){const r=Js(e),n=Js(e,"{2}"),s=Js(e,"{3}"),i=Js(e,"{4}"),a=Js(e,"{6}"),o=Js(e,"{1,2}"),u=Js(e,"{1,3}"),d=Js(e,"{1,6}"),f=Js(e,"{1,9}"),g=Js(e,"{2,4}"),y=Js(e,"{4,6}"),p=C=>({regex:RegExp(c8(C.val)),deser:([x])=>x,literal:!0}),N=(C=>{if(t.literal)return p(C);switch(C.val){case"G":return Ks(e.eras("short"),0);case"GG":return Ks(e.eras("long"),0);case"y":return Bt(d);case"yy":return Bt(g,Rp);case"yyyy":return Bt(i);case"yyyyy":return Bt(y);case"yyyyyy":return Bt(a);case"M":return Bt(o);case"MM":return Bt(n);case"MMM":return Ks(e.months("short",!0),1);case"MMMM":return Ks(e.months("long",!0),1);case"L":return Bt(o);case"LL":return Bt(n);case"LLL":return Ks(e.months("short",!1),1);case"LLLL":return Ks(e.months("long",!1),1);case"d":return Bt(o);case"dd":return Bt(n);case"o":return Bt(u);case"ooo":return Bt(s);case"HH":return Bt(n);case"H":return Bt(o);case"hh":return Bt(n);case"h":return Bt(o);case"mm":return Bt(n);case"m":return Bt(o);case"q":return Bt(o);case"qq":return Bt(n);case"s":return Bt(o);case"ss":return Bt(n);case"S":return Bt(u);case"SSS":return Bt(s);case"u":return ph(f);case"uu":return ph(o);case"uuu":return Bt(r);case"a":return Ks(e.meridiems(),0);case"kkkk":return Bt(i);case"kk":return Bt(g,Rp);case"W":return Bt(o);case"WW":return Bt(n);case"E":case"c":return Bt(r);case"EEE":return Ks(e.weekdays("short",!1),1);case"EEEE":return Ks(e.weekdays("long",!1),1);case"ccc":return Ks(e.weekdays("short",!0),1);case"cccc":return Ks(e.weekdays("long",!0),1);case"Z":case"ZZ":return Vv(new RegExp(`([+-]${o.source})(?::(${n.source}))?`),2);case"ZZZ":return Vv(new RegExp(`([+-]${o.source})(${n.source})?`),2);case"z":return ph(/[a-z_+-/]{1,256}?/i);case" ":return ph(/[^\S\n\r]/);default:return p(C)}})(t)||{invalidReason:o8};return N.token=t,N}const h8={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function f8(t,e,r){const{type:n,value:s}=t;if(n==="literal"){const u=/^\s+$/.test(s);return{literal:!u,val:u?" ":s}}const i=e[n];let a=n;n==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=r.hour12?"hour12":"hour24");let o=h8[a];if(typeof o=="object"&&(o=o[i]),o)return{literal:!1,val:o}}function m8(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function p8(t,e,r){const n=t.match(e);if(n){const s={};let i=1;for(const a in r)if(Nu(r,a)){const o=r[a],u=o.groups?o.groups+1:1;!o.literal&&o.token&&(s[o.token.val[0]]=o.deser(n.slice(i,i+u))),i+=u}return[n,s]}else return[n,{}]}function g8(t){const e=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,n;return dt(t.z)||(r=sa.create(t.z)),dt(t.Z)||(r||(r=new Ln(t.Z)),n=t.Z),dt(t.q)||(t.M=(t.q-1)*3+1),dt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),dt(t.u)||(t.S=Gg(t.u)),[Object.keys(t).reduce((i,a)=>{const o=e(a);return o&&(i[o]=t[a]),i},{}),r,n]}let o0=null;function v8(){return o0||(o0=ft.fromMillis(1555555555555)),o0}function y8(t,e){if(t.literal)return t;const r=bn.macroTokenToFormatOpts(t.val),n=uw(r,e);return n==null||n.includes(void 0)?t:n}function aw(t,e){return Array.prototype.concat(...t.map(r=>y8(r,e)))}class ow{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=aw(bn.parseFormat(r),e),this.units=this.tokens.map(n=>d8(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,s]=m8(this.units);this.regex=RegExp(n,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[r,n]=p8(e,this.regex,this.handlers),[s,i,a]=n?g8(n):[null,null,void 0];if(Nu(n,"a")&&Nu(n,"H"))throw new eu("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:s,zone:i,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function lw(t,e,r){return new ow(t,r).explainFromTokens(e)}function x8(t,e,r){const{result:n,zone:s,specificOffset:i,invalidReason:a}=lw(t,e,r);return[n,s,i,a]}function uw(t,e){if(!t)return null;const n=bn.create(e,t).dtFormatter(v8()),s=n.formatToParts(),i=n.resolvedOptions();return s.map(a=>f8(a,t,i))}const l0="Invalid DateTime",Hv=864e13;function _c(t){return new ni("unsupported zone",`the zone "${t.name}" is not supported`)}function u0(t){return t.weekData===null&&(t.weekData=vf(t.c)),t.weekData}function c0(t){return t.localWeekData===null&&(t.localWeekData=vf(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function wo(t,e){const r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ft({...r,...e,old:r})}function cw(t,e,r){let n=t-e*60*1e3;const s=r.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const i=r.offset(n);return s===i?[n,s]:[t-Math.min(s,i)*60*1e3,Math.max(s,i)]}function gh(t,e){t+=e*60*1e3;const r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Dh(t,e,r){return cw(Hf(t),e,r)}function Gv(t,e){const r=t.o,n=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,i={...t.c,year:n,month:s,day:Math.min(t.c.day,yf(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=Dt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=Hf(i);let[u,d]=cw(o,r,t.zone);return a!==0&&(u+=a,d=t.zone.offset(u)),{ts:u,o:d}}function Fl(t,e,r,n,s,i){const{setZone:a,zone:o}=r;if(t&&Object.keys(t).length!==0||e){const u=e||o,d=ft.fromObject(t,{...r,zone:u,specificOffset:i});return a?d:d.setZone(o)}else return ft.invalid(new ni("unparsable",`the input "${s}" can't be parsed as ${n}`))}function vh(t,e,r=!0){return t.isValid?bn.create($t.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function d0(t,e,r){const n=t.c.year>9999||t.c.year<0;let s="";if(n&&t.c.year>=0&&(s+="+"),s+=Br(t.c.year,n?6:4),r==="year")return s;if(e){if(s+="-",s+=Br(t.c.month),r==="month")return s;s+="-"}else if(s+=Br(t.c.month),r==="month")return s;return s+=Br(t.c.day),s}function Yv(t,e,r,n,s,i,a){let o=!r||t.c.millisecond!==0||t.c.second!==0,u="";switch(a){case"day":case"month":case"year":break;default:if(u+=Br(t.c.hour),a==="hour")break;if(e){if(u+=":",u+=Br(t.c.minute),a==="minute")break;o&&(u+=":",u+=Br(t.c.second))}else{if(u+=Br(t.c.minute),a==="minute")break;o&&(u+=Br(t.c.second))}if(a==="second")break;o&&(!n||t.c.millisecond!==0)&&(u+=".",u+=Br(t.c.millisecond,3))}return s&&(t.isOffsetFixed&&t.offset===0&&!i?u+="Z":t.o<0?(u+="-",u+=Br(Math.trunc(-t.o/60)),u+=":",u+=Br(Math.trunc(-t.o%60))):(u+="+",u+=Br(Math.trunc(t.o/60)),u+=":",u+=Br(Math.trunc(t.o%60)))),i&&(u+="["+t.zone.ianaName+"]"),u}const dw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},b8={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},w8={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Fh=["year","month","day","hour","minute","second","millisecond"],N8=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],_8=["year","ordinal","hour","minute","second","millisecond"];function Mh(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new db(t);return e}function Jv(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Mh(t)}}function S8(t){if(Sc===void 0&&(Sc=Sr.now()),t.type!=="iana")return t.offset(Sc);const e=t.name;let r=Up.get(e);return r===void 0&&(r=t.offset(Sc),Up.set(e,r)),r}function Kv(t,e){const r=Fa(e.zone,Sr.defaultZone);if(!r.isValid)return ft.invalid(_c(r));const n=$t.fromObject(e);let s,i;if(dt(t.year))s=Sr.now();else{for(const u of Fh)dt(t[u])&&(t[u]=dw[u]);const a=Mb(t)||Rb(t);if(a)return ft.invalid(a);const o=S8(r);[s,i]=Dh(t,o,r)}return new ft({ts:s,zone:r,loc:n,o:i})}function Zv(t,e,r){const n=dt(r.round)?!0:r.round,s=dt(r.rounding)?"trunc":r.rounding,i=(o,u)=>(o=Yg(o,n||r.calendary?0:2,r.calendary?"round":s),e.loc.clone(r).relFormatter(r).format(o,u)),a=o=>r.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(r.unit)return i(a(r.unit),r.unit);for(const o of r.units){const u=a(o);if(Math.abs(u)>=1)return i(u,o)}return i(t>e?-0:0,r.units[r.units.length-1])}function Xv(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}let Sc;const Up=new Map;class ft{constructor(e){const r=e.zone||Sr.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ni("invalid input"):null)||(r.isValid?null:_c(r));this.ts=dt(e.ts)?Sr.now():e.ts;let s=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[s,i]=[e.old.c,e.old.o];else{const o=Ya(e.o)&&!e.old?e.o:r.offset(this.ts);s=gh(this.ts,o),n=Number.isNaN(s.year)?new ni("invalid input"):null,s=n?null:s,i=n?null:o}this._zone=r,this.loc=e.loc||$t.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=i,this.isLuxonDateTime=!0}static now(){return new ft({})}static local(){const[e,r]=Xv(arguments),[n,s,i,a,o,u,d]=r;return Kv({year:n,month:s,day:i,hour:a,minute:o,second:u,millisecond:d},e)}static utc(){const[e,r]=Xv(arguments),[n,s,i,a,o,u,d]=r;return e.zone=Ln.utcInstance,Kv({year:n,month:s,day:i,hour:a,minute:o,second:u,millisecond:d},e)}static fromJSDate(e,r={}){const n=rj(e)?e.valueOf():NaN;if(Number.isNaN(n))return ft.invalid("invalid input");const s=Fa(r.zone,Sr.defaultZone);return s.isValid?new ft({ts:n,zone:s,loc:$t.fromObject(r)}):ft.invalid(_c(s))}static fromMillis(e,r={}){if(Ya(e))return e<-Hv||e>Hv?ft.invalid("Timestamp out of range"):new ft({ts:e,zone:Fa(r.zone,Sr.defaultZone),loc:$t.fromObject(r)});throw new vn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Ya(e))return new ft({ts:e*1e3,zone:Fa(r.zone,Sr.defaultZone),loc:$t.fromObject(r)});throw new vn("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};const n=Fa(r.zone,Sr.defaultZone);if(!n.isValid)return ft.invalid(_c(n));const s=$t.fromObject(r),i=xf(e,Jv),{minDaysInFirstWeek:a,startOfWeek:o}=Dv(i,s),u=Sr.now(),d=dt(r.specificOffset)?n.offset(u):r.specificOffset,f=!dt(i.ordinal),g=!dt(i.year),y=!dt(i.month)||!dt(i.day),p=g||y,k=i.weekYear||i.weekNumber;if((p||f)&&k)throw new eu("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&f)throw new eu("Can't mix ordinal dates with month/day");const N=k||i.weekday&&!p;let C,x,b=gh(u,d);N?(C=N8,x=b8,b=vf(b,a,o)):f?(C=_8,x=w8,b=a0(b)):(C=Fh,x=dw);let _=!1;for(const B of C){const A=i[B];dt(A)?_?i[B]=x[B]:i[B]=b[B]:_=!0}const R=N?Q6(i,a,o):f?ej(i):Mb(i),W=R||Rb(i);if(W)return ft.invalid(W);const K=N?Ov(i,a,o):f?Iv(i):i,[j,P]=Dh(K,d,n),F=new ft({ts:j,zone:n,o:P,loc:s});return i.weekday&&p&&e.weekday!==F.weekday?ft.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${F.toISO()}`):F.isValid?F:ft.invalid(F.invalid)}static fromISO(e,r={}){const[n,s]=Vj(e);return Fl(n,s,r,"ISO 8601",e)}static fromRFC2822(e,r={}){const[n,s]=Hj(e);return Fl(n,s,r,"RFC 2822",e)}static fromHTTP(e,r={}){const[n,s]=Gj(e);return Fl(n,s,r,"HTTP",r)}static fromFormat(e,r,n={}){if(dt(e)||dt(r))throw new vn("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:i=null}=n,a=$t.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0}),[o,u,d,f]=x8(a,e,r);return f?ft.invalid(f):Fl(o,u,n,`format ${r}`,e,d)}static fromString(e,r,n={}){return ft.fromFormat(e,r,n)}static fromSQL(e,r={}){const[n,s]=e8(e);return Fl(n,s,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new vn("need to specify a reason the DateTime is invalid");const n=e instanceof ni?e:new ni(e,r);if(Sr.throwOnInvalid)throw new C6(n);return new ft({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){const n=uw(e,$t.fromObject(r));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,r={}){return aw(bn.parseFormat(e),$t.fromObject(r)).map(s=>s.val).join("")}static resetCache(){Sc=void 0,Up.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?u0(this).weekYear:NaN}get weekNumber(){return this.isValid?u0(this).weekNumber:NaN}get weekday(){return this.isValid?u0(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?c0(this).weekday:NaN}get localWeekNumber(){return this.isValid?c0(this).weekNumber:NaN}get localWeekYear(){return this.isValid?c0(this).weekYear:NaN}get ordinal(){return this.isValid?a0(this.c).ordinal:NaN}get monthShort(){return this.isValid?mh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?mh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?mh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?mh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,r=6e4,n=Hf(this.c),s=this.zone.offset(n-e),i=this.zone.offset(n+e),a=this.zone.offset(n-s*r),o=this.zone.offset(n-i*r);if(a===o)return[this];const u=n-a*r,d=n-o*r,f=gh(u,a),g=gh(d,o);return f.hour===g.hour&&f.minute===g.minute&&f.second===g.second&&f.millisecond===g.millisecond?[wo(this,{ts:u}),wo(this,{ts:d})]:[this]}get isInLeapYear(){return md(this.year)}get daysInMonth(){return yf(this.year,this.month)}get daysInYear(){return this.isValid?hu(this.year):NaN}get weeksInWeekYear(){return this.isValid?id(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?id(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:r,numberingSystem:n,calendar:s}=bn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:s}}toUTC(e=0,r={}){return this.setZone(Ln.instance(e),r)}toLocal(){return this.setZone(Sr.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=Fa(e,Sr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(r||n){const i=e.offset(this.ts),a=this.toObject();[s]=Dh(a,i,e)}return wo(this,{ts:s,zone:e})}else return ft.invalid(_c(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return wo(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const r=xf(e,Jv),{minDaysInFirstWeek:n,startOfWeek:s}=Dv(r,this.loc),i=!dt(r.weekYear)||!dt(r.weekNumber)||!dt(r.weekday),a=!dt(r.ordinal),o=!dt(r.year),u=!dt(r.month)||!dt(r.day),d=o||u,f=r.weekYear||r.weekNumber;if((d||a)&&f)throw new eu("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new eu("Can't mix ordinal dates with month/day");let g;i?g=Ov({...vf(this.c,n,s),...r},n,s):dt(r.ordinal)?(g={...this.toObject(),...r},dt(r.day)&&(g.day=Math.min(yf(g.year,g.month),g.day))):g=Iv({...a0(this.c),...r});const[y,p]=Dh(g,this.o,this.zone);return wo(this,{ts:y,o:p})}plus(e){if(!this.isValid)return this;const r=Dt.fromDurationLike(e);return wo(this,Gv(this,r))}minus(e){if(!this.isValid)return this;const r=Dt.fromDurationLike(e).negate();return wo(this,Gv(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const n={},s=Dt.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(r){const i=this.loc.getStartOfWeek(),{weekday:a}=this;a<i&&(n.weekNumber=this.weekNumber-1),n.weekday=i}else n.weekday=1;if(s==="quarters"){const i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?bn.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):l0}toLocaleString(e=gf,r={}){return this.isValid?bn.create(this.loc.clone(r),e).formatDateTime(this):l0}toLocaleParts(e={}){return this.isValid?bn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:i=!1,precision:a="milliseconds"}={}){if(!this.isValid)return null;a=Mh(a);const o=e==="extended";let u=d0(this,o,a);return Fh.indexOf(a)>=3&&(u+="T"),u+=Yv(this,o,r,n,s,i,a),u}toISODate({format:e="extended",precision:r="day"}={}){return this.isValid?d0(this,e==="extended",Mh(r)):null}toISOWeekDate(){return vh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:i=!1,format:a="extended",precision:o="milliseconds"}={}){return this.isValid?(o=Mh(o),(s&&Fh.indexOf(o)>=3?"T":"")+Yv(this,a==="extended",r,e,n,i,o)):null}toRFC2822(){return vh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return vh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?d0(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(r||e)&&(n&&(s+=" "),r?s+="z":e&&(s+="ZZ")),vh(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():l0}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return Dt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=nj(r).map(Dt.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,u=a?e:this,d=a8(o,u,i,s);return a?d.negate():d}diffNow(e="milliseconds",r={}){return this.diff(ft.now(),e,r)}until(e){return this.isValid?Nr.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;const s=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(r,n)<=s&&s<=i.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const r=e.base||ft.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(s=e.unit,i=void 0),Zv(r,this.plus(n),{...e,numeric:"always",units:s,unit:i})}toRelativeCalendar(e={}){return this.isValid?Zv(e.base||ft.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ft.isDateTime))throw new vn("min requires all arguments be DateTimes");return Fv(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(ft.isDateTime))throw new vn("max requires all arguments be DateTimes");return Fv(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){const{locale:s=null,numberingSystem:i=null}=n,a=$t.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});return lw(a,e,r)}static fromStringExplain(e,r,n={}){return ft.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){const{locale:n=null,numberingSystem:s=null}=r,i=$t.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new ow(i,e)}static fromFormatParser(e,r,n={}){if(dt(e)||dt(r))throw new vn("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:i=null}=n,a=$t.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});if(!a.equals(r.locale))throw new vn(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${r.locale}`);const{result:o,zone:u,specificOffset:d,invalidReason:f}=r.explainFromTokens(e);return f?ft.invalid(f):Fl(o,u,n,`format ${r.format}`,e,d)}static get DATE_SHORT(){return gf}static get DATE_MED(){return hb}static get DATE_MED_WITH_WEEKDAY(){return E6}static get DATE_FULL(){return fb}static get DATE_HUGE(){return mb}static get TIME_SIMPLE(){return pb}static get TIME_WITH_SECONDS(){return gb}static get TIME_WITH_SHORT_OFFSET(){return vb}static get TIME_WITH_LONG_OFFSET(){return yb}static get TIME_24_SIMPLE(){return xb}static get TIME_24_WITH_SECONDS(){return bb}static get TIME_24_WITH_SHORT_OFFSET(){return wb}static get TIME_24_WITH_LONG_OFFSET(){return Nb}static get DATETIME_SHORT(){return _b}static get DATETIME_SHORT_WITH_SECONDS(){return Sb}static get DATETIME_MED(){return kb}static get DATETIME_MED_WITH_SECONDS(){return jb}static get DATETIME_MED_WITH_WEEKDAY(){return L6}static get DATETIME_FULL(){return Cb}static get DATETIME_FULL_WITH_SECONDS(){return Ab}static get DATETIME_HUGE(){return Pb}static get DATETIME_HUGE_WITH_SECONDS(){return Eb}}function gc(t){if(ft.isDateTime(t))return t;if(t&&t.valueOf&&Ya(t.valueOf()))return ft.fromJSDate(t);if(t&&typeof t=="object")return ft.fromObject(t);throw new vn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function k8(t,e){const[r,n]=String(t||"").split(":").map(a=>Number(a));return!Number.isFinite(r)||!Number.isFinite(n)?"":ft.fromObject({year:2020,month:1,day:1,hour:r,minute:n},{zone:"UTC"}).setZone(e||"local").toFormat("h:mm a")}function j8({medicationId:t,userId:e,onClose:r,onDoseRecorded:n}){const[s,i]=re.useState(!0),[a,o]=re.useState(!1),[u,d]=re.useState(null),[f,g]=re.useState(null),[y,p]=re.useState(null),[k,N]=re.useState(""),[C,x]=re.useState(0),[b,_]=re.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),R=re.useMemo(()=>y?Array.isArray(y.reminder_times)&&y.reminder_times.length>0?y.reminder_times.length:y.frequency==="1x daily"?1:y.frequency==="2x daily"?2:3:0,[y]),W=re.useMemo(()=>{if(!y)return 0;const B=new Date(y.start_date),A=y.end_date?new Date(y.end_date):null,O=new Date(B.getFullYear(),B.getMonth(),B.getDate()),z=A?new Date(A.getFullYear(),A.getMonth(),A.getDate()):null;return(z?Math.max(1,Math.round((z.getTime()-O.getTime())/(1e3*60*60*24))+1):1)*R},[y,R]),K=re.useMemo(()=>W>0?Math.round(C/W*100):0,[C,W]),j=async()=>{i(!0),d(null);try{const{data:B,error:A}=await it.from("medications").select("*").eq("id",t).single();if(A)throw A;const O={id:B.id,user_id:B.user_id,pet_id:B.pet_id,medication_name:B.medication_name,dosage:B.dosage??null,frequency:B.frequency,reminder_times:Array.isArray(B.reminder_times)?B.reminder_times:[],start_date:B.start_date,end_date:B.end_date??null};if(p(O),B.pet_id){const{data:ee,error:Q}=await it.from("pets").select("name").eq("id",B.pet_id).single();!Q&&(ee!=null&&ee.name)&&N(ee.name)}const{count:z,error:q}=await it.from("medication_doses").select("*",{count:"exact",head:!0}).eq("medication_id",t).eq("status","given");if(q)throw q;if(x(z||0),e)try{const{data:ee}=await it.from("profiles").select("timezone").eq("id",e).single(),Q=ee&&ee.timezone?String(ee.timezone):"";Q&&_(Q)}catch{}}catch(B){d((B==null?void 0:B.message)||"Failed to load medication")}finally{i(!1)}};re.useEffect(()=>{j()},[t]),re.useEffect(()=>{const B=document.body.style.overflow;document.body.style.overflow="hidden";const A=O=>{O.key==="Escape"&&r()};return window.addEventListener("keydown",A),()=>{document.body.style.overflow=B,window.removeEventListener("keydown",A)}},[r]);const P=B=>k8(B,b),F=async()=>{if(!e){d("You must be logged in to record a dose.");return}o(!0),d(null);try{const A=new Date().toISOString(),{error:O}=await it.from("medication_doses").insert({medication_id:t,user_id:e,scheduled_time:A,given_time:A,status:"given"});if(O)throw O;x(z=>z+1),g("Dose recorded "),n&&n(),setTimeout(()=>{r()},4e3)}catch(B){d((B==null?void 0:B.message)||"Failed to record dose")}finally{o(!1)}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:r,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:B=>B.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Track Dose"}),l.jsx("button",{type:"button",className:"text-sm",onClick:r,children:"Close"})]}),s&&l.jsx("div",{className:"mt-4 text-sm text-slate-600",children:"Loading"}),u&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:u}),!s&&y&&l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsxs("div",{className:"text-sm text-slate-600",children:["Pet: ",l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-100",children:k||""})]}),l.jsx("div",{className:"text-lg font-semibold",children:y.medication_name}),y.dosage&&l.jsx("div",{className:"text-sm text-slate-600",children:y.dosage}),l.jsxs("div",{className:"mt-2 rounded-lg border border-slate-200 dark:border-slate-800 p-3 text-sm space-y-1.5",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${C}/${W} doses (${K}%)`]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Reminder times:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(y.reminder_times)?y.reminder_times:[]).map((B,A)=>l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs text-slate-700",children:P(B)},A))})]})]}),f&&l.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:f}),l.jsx("div",{className:"pt-2 flex flex-col sm:flex-row gap-3 sm:justify-end",children:l.jsx("button",{type:"button",disabled:a||!e,onClick:F,className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 disabled:opacity-60",children:a?"Saving":" MARK AS GIVEN"})})]})]})})}function C8({userId:t,pets:e,refreshKey:r}){const[n,s]=re.useState(!1),[i,a]=re.useState(null),[o,u]=re.useState([]),[d,f]=re.useState({}),[g,y]=re.useState(!1),[p,k]=re.useState(null),[N,C]=re.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),x=re.useMemo(()=>{const j={};for(const P of e)j[P.id]=P;return j},[e]),b=async()=>{if(t){s(!0),a(null);try{try{const{data:A}=await it.from("profiles").select("timezone").eq("id",t).single(),O=A&&A.timezone?String(A.timezone):"";O&&C(O)}catch{}const{data:j,error:P}=await it.from("medications").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(P)throw P;const F=(j||[]).map(A=>({...A,reminder_times:Array.isArray(A.reminder_times)?A.reminder_times:[]}));u(F);const B=F.map(A=>A.id);if(B.length>0){const{data:A,error:O}=await it.from("medication_doses").select("id, medication_id, user_id, scheduled_time, given_time, status").in("medication_id",B).eq("user_id",t).eq("status","given");if(O)throw O;const z={};for(const q of A||[])z[q.medication_id]=(z[q.medication_id]||0)+1;f(z)}else f({})}catch(j){a((j==null?void 0:j.message)||"Failed to load medications")}finally{s(!1)}}};re.useEffect(()=>{b()},[t,r]);const _=re.useMemo(()=>{const j=new Date,P=new Date(j.getFullYear(),j.getMonth(),j.getDate()),F={};for(const B of o){const[A,O,z]=B.start_date.split("-").map(Number),q=new Date(A,O-1,z),ee=B.end_date?(()=>{const[de,H,oe]=B.end_date.split("-").map(Number);return new Date(de,H-1,oe)})():null;P>=q&&(!ee||P<=ee)&&(F[B.pet_id]||(F[B.pet_id]=[]),F[B.pet_id].push(B))}return F},[o]),R=j=>Array.isArray(j.reminder_times)&&j.reminder_times.length>0?j.reminder_times.length:j.frequency==="1x daily"?1:j.frequency==="2x daily"?2:3,W=(j,P)=>{const F=new Date(j.getFullYear(),j.getMonth(),j.getDate()),B=new Date(P.getFullYear(),P.getMonth(),P.getDate()),A=Math.round((F.getTime()-B.getTime())/(1e3*60*60*24));let O;A===0?j.getTime()<=P.getTime()?O="Tomorrow":O="Today":A===1?O="Tomorrow":O=j.toLocaleDateString("en-US",{month:"short",day:"numeric"});const z=j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return`${O} ${z}`},K=j=>{const P=new Date(j.start_date),F=j.end_date?new Date(j.end_date):null,B=new Date,A=new Date(P.getFullYear(),P.getMonth(),P.getDate()),O=F?new Date(F.getFullYear(),F.getMonth(),F.getDate()):null,z=new Date(B.getFullYear(),B.getMonth(),B.getDate()),q=O?Math.max(1,Math.round((O.getTime()-A.getTime())/(1e3*60*60*24))+1):1,ee=R(j),Q=q*ee,de=d[j.id]||0,H=Q>0?Math.round(de/Q*100):0,oe=O?Math.max(0,Math.round((O.getTime()-z.getTime())/(1e3*60*60*24))+1):0,ne=j.reminder_times&&j.reminder_times.length>0?j.reminder_times.filter(Boolean):j.frequency==="1x daily"?["07:00"]:j.frequency==="2x daily"?["07:00","19:00"]:["08:00","14:00","20:00"];let xe=null;const L=new Date;let $=new Date(L.getFullYear(),L.getMonth(),L.getDate());for(let Y=0;Y<7;Y++){if($<A){$.setDate($.getDate()+1);continue}if(O&&$>O)break;for(const X of ne){const[ae,pe]=X.split(":").map(ge=>Number(ge)),J=new Date($.getFullYear(),$.getMonth(),$.getDate(),ae,pe,0);if(J.getTime()>L.getTime()){xe=J;break}}if(xe)break;$.setDate($.getDate()+1)}return{totalDoses:Q,given:de,pct:H,daysRemaining:oe,nextDoseLabel:xe?W(xe,L):O&&z>O?"Completed":"",endLabel:O?O.toISOString().slice(0,10):""}};return l.jsxs("section",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Medications"}),l.jsx("button",{type:"button",onClick:()=>y(!0),className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm",disabled:!t,children:"+ ADD MEDICATION"})]}),n&&l.jsx("div",{className:"mt-4 text-sm text-slate-500",children:"Loading medications"}),i&&l.jsx("div",{className:"mt-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-800 text-sm",children:i}),!n&&o.length===0&&l.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 text-sm text-slate-600",children:'No medications yet. Click "+ ADD MEDICATION" to create one.'}),l.jsx("div",{className:"mt-4 space-y-6",children:Object.entries(_).map(([j,P])=>{const F=x[j];return l.jsxs("div",{children:[l.jsxs("div",{className:"text-base font-semibold mb-2 flex items-center gap-3 h-12 px-4",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:(F==null?void 0:F.color)||((F==null?void 0:F.species)==="dog"?"#3B82F6":(F==null?void 0:F.species)==="cat"?"#F97316":"#6B7280")}}),l.jsx("span",{className:"font-semibold",children:F?`${F.name} (${F.species})`:"Unknown Pet"})]}),P.length===0?l.jsx("div",{className:"ml-4 text-sm text-slate-500 dark:text-slate-400",children:"No active medications"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(B=>{const A=K(B);return l.jsxs("div",{className:"relative rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 shadow-sm cursor-pointer hover:shadow-md",onClick:()=>k(B.id),children:[l.jsx("div",{className:"flex items-start justify-between gap-2",children:l.jsx("div",{className:"text-lg font-semibold",children:B.medication_name})}),l.jsx("button",{type:"button",className:"absolute top-2 right-2 text-xs text-red-600 hover:text-red-700 cursor-pointer",onClick:async O=>{if(O.stopPropagation(),!!confirm(`Are you sure you want to delete ${B.medication_name}?`))try{let z=!1;try{z=(await fetch(`/api/medications/${B.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok}catch{}if(!z){const{error:q}=await it.from("medications").delete().eq("id",B.id).eq("user_id",t);if(q)throw q}u(q=>q.filter(ee=>ee.id!==B.id));try{alert("Medication deleted successfully")}catch{}}catch(z){console.error("[medications] delete error",z);try{alert("Failed to delete medication")}catch{}}},title:"Delete medication","aria-label":"Delete medication",children:"Delete"}),B.dosage&&l.jsx("div",{className:"text-sm text-slate-600 mt-0.5",children:B.dosage}),l.jsxs("div",{className:"mt-3 space-y-1.5 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Progress:"})," ",`${A.given}/${A.totalDoses} doses (${A.pct}%)`]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Next dose:"})," ",A.nextDoseLabel]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"Days remaining:"})," ",A.daysRemaining]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500",children:"End date:"})," ",A.endLabel]})]})]},B.id)})})]},j)})}),l.jsx(ib,{open:g,onClose:()=>y(!1),onSaved:()=>{y(!1),b()},userId:t,pets:e}),p&&l.jsx(j8,{medicationId:p,userId:t,onClose:()=>k(null),onDoseRecorded:()=>b()})]})}function A8({medicationId:t,userId:e,onClose:r}){const[n,s]=re.useState(null),[i,a]=re.useState(null),[o,u]=re.useState(!0),[d,f]=re.useState(!1),[g,y]=re.useState(!1),[p,k]=re.useState(null),[N,C]=re.useState(null),[x,b]=re.useState(null);re.useEffect(()=>{const P=new URLSearchParams(window.location.search).get("token");P&&(C(P),console.log("[DoseMarkingPage] Magic link token detected:",P.slice(0,8)+"...")),_(P)},[t,e]);async function _(j=null){var P,F,B,A,O;try{const z=j||N;if(z){console.log("[DoseMarkingPage] Loading via magic token:",z.slice(0,8)+"...");const{data:Q,error:de}=await it.from("medication_doses").select("*, medications(*, pets(name, species))").eq("one_time_token",z).eq("status","pending").single();if(de||!Q){console.error("[DoseMarkingPage] Token validation failed:",de==null?void 0:de.message,de==null?void 0:de.code),console.error("[DoseMarkingPage] Full error:",JSON.stringify(de)),k("This link is invalid or has expired. Please check for a newer SMS."),u(!1);return}console.log("[DoseMarkingPage]  Dose found via token:",Q.id),console.log("[DoseMarkingPage] Full dose data:",JSON.stringify(Q,null,2)),console.log("[DoseMarkingPage] Medications object:",Q.medications),console.log("[DoseMarkingPage] Pets object:",(P=Q.medications)==null?void 0:P.pets),s(Q.medications),a((F=Q.medications)==null?void 0:F.pets),u(!1),console.log("[DoseMarkingPage]  Medication name:",((B=Q.medications)==null?void 0:B.medication_name)||"MISSING"),console.log("[DoseMarkingPage]  Pet name:",((O=(A=Q.medications)==null?void 0:A.pets)==null?void 0:O.name)||"MISSING");return}if(!e){k("Please log in to mark medication as given"),u(!1);return}const{data:q,error:ee}=await it.from("medications").select("*, pets(name, species)").eq("id",t).eq("user_id",e).single();if(ee||!q){k("Medication not found"),u(!1);return}s(q),a(q.pets),u(!1)}catch(z){console.error("Error loading medication:",z),k("Failed to load medication details"),u(!1)}}async function R(){try{const{data:j,error:P}=await it.from("medication_doses").select("*").eq("medication_id",t).order("scheduled_time",{ascending:!0});if(P||!j){console.error("[DoseMarkingPage] Failed to fetch doses for stats:",P);return}let F=0;if(n!=null&&n.start_date&&(n!=null&&n.end_date)){const[Q,de,H]=n.start_date.split("-").map(Number),oe=new Date(Q,de-1,H),[ne,xe,L]=n.end_date.split("-").map(Number),$=new Date(ne,xe-1,L),Y=Math.floor(($.getTime()-oe.getTime())/(1e3*60*60*24))+1,X=n.reminder_times&&Array.isArray(n.reminder_times)?n.reminder_times.length:1;F=Y*X,console.log("[DoseMarkingPage] Progress calculation:",{startDate:n.start_date,endDate:n.end_date,totalDays:Y,dosesPerDay:X,totalCount:F,dosesInDB:j.length})}else F=j.length,console.warn("[DoseMarkingPage] Missing medication dates, falling back to DB count");const B=j.filter(Q=>Q.status==="given").length,A=F>0?Math.round(B/F*100):0,O=B===F&&F>0,z=j.find(Q=>Q.status==="pending");let q=null;if(z&&!O){const Q=new Date(z.scheduled_time),de=new Date,H=new Date(de);H.setDate(H.getDate()+1);const oe=Q.toDateString()===de.toDateString(),ne=Q.toDateString()===H.toDateString(),xe=Q.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});oe?q=`Today ${xe}`:ne?q=`Tomorrow ${xe}`:q=`${Q.toLocaleDateString("en-US",{weekday:"short"})} ${xe}`}let ee=null;if(n!=null&&n.end_date&&!O){const Q=new Date(n.end_date),de=new Date;de.setHours(0,0,0,0),Q.setHours(0,0,0,0);const H=Q.getTime()-de.getTime(),oe=Math.ceil(H/(1e3*60*60*24));ee=oe>=0?oe:0}b({givenCount:B,totalCount:F,percentage:A,nextDoseTime:q,daysRemaining:ee,isComplete:O})}catch(j){console.error("[DoseMarkingPage] Error calculating progress stats:",j)}}async function W(){if(!N&&!e){k("Please log in to mark medication as given");return}f(!0),k(null);try{const j=N?{token:N}:{userId:e};console.log("[DoseMarkingPage] Marking as given with:",N?"magic link token":"session auth");const P=await fetch(`http://localhost:8787/api/medications/${t}/mark-given`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),F=await P.json();if(!P.ok||!F.ok){k(F.error||"Failed to mark dose as given"),f(!1);return}console.log("[DoseMarkingPage]  Successfully marked as given"),await R(),y(!0),f(!1)}catch(j){console.error("Error marking dose:",j),k("Failed to mark dose as given"),f(!1)}}function K(){r()}return o?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading medication details..."})]})})}):p&&!n?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:p}),l.jsx("button",{onClick:r,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})}):g?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Medication Marked!"}),l.jsx("p",{className:"text-gray-700 mb-2 text-lg",children:l.jsx("strong",{children:(n==null?void 0:n.medication_name)||"Medication"})}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["has been marked as given for ",l.jsx("strong",{children:(i==null?void 0:i.name)||"your pet"})]}),x&&l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-5 mb-6 text-left",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 text-center",children:"Treatment Progress"}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[x.givenCount," of ",x.totalCount," doses"]}),l.jsxs("span",{className:"text-sm font-bold text-indigo-600",children:[x.percentage,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500 ease-out shadow-sm",style:{width:`${x.percentage}%`}})})]}),x.isComplete?l.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4 text-center",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("p",{className:"text-green-800 font-semibold",children:"All doses complete!"}),l.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Treatment finished"})]}):l.jsxs("div",{className:"space-y-3",children:[x.nextDoseTime&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Next dose:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:x.nextDoseTime})]}),x.daysRemaining!==null&&x.daysRemaining>=0&&l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white/60 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Days remaining:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800",children:x.daysRemaining===0?"Last day":x.daysRemaining===1?"1 day":`${x.daysRemaining} days`})]})]})]}),l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:l.jsx("p",{className:"text-green-800 text-sm",children:" Your pet's medication has been recorded. You're all set!"})}),l.jsx("button",{onClick:()=>{!e&&!N?window.location.href="/":r(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold",children:e?"View Dashboard":"Done"})]})})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Mark Medication as Given?"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pet:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:i==null?void 0:i.name}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medication:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-3",children:n==null?void 0:n.medication_name}),(n==null?void 0:n.dosage)&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dosage:"}),l.jsx("p",{className:"text-lg font-semibold text-gray-800",children:n.dosage})]})]}),p&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:p})}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:W,disabled:d,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Marking..."]}):l.jsx(l.Fragment,{children:" Yes, I gave it"})}),l.jsx("button",{onClick:K,disabled:d,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip this dose"})]})]})})})}function P8({open:t,onClose:e,insurerName:r,petId:n,petName:s,claimId:i,missingFields:a,existingData:o={},suggestedValues:u={},onComplete:d}){console.log("[MissingFieldsModal] Component rendered with petName:",s);const[f,g]=re.useState({}),[y,p]=re.useState(null),[k,N]=re.useState(!1),C=re.useRef({});re.useEffect(()=>{const j={};a.forEach(P=>{u[P.field]?j[P.field]=u[P.field]:o[P.field]&&(j[P.field]=o[P.field])}),g(j)},[a,o,u]);const x=(j,P)=>{g(F=>({...F,[j]:P})),p(null)},b=j=>j.conditional?f[j.conditional.field]===j.conditional.value:!0,_=re.useMemo(()=>(console.log("[MissingFieldsModal] Filtering fields, formData:",f),a.filter(j=>{const P=b(j);return console.log(`[MissingFieldsModal] Field ${j.field}: ${P?"VISIBLE":"HIDDEN"}`,j.conditional?`(conditional: ${j.conditional.field} === "${j.conditional.value}")`:""),P})),[a,f]),R=j=>{console.log("[MissingFieldsModal] replacePlaceholders called with:",j,"petName:",s);const P=j.replace(/{petName}/g,s||"your pet");return console.log("[MissingFieldsModal] replacePlaceholders result:",P),P},W=j=>j.type==="signature"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[R(j.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),j.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:R(j.description)}),l.jsxs("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50 relative",children:[!f[j.field]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Au,{ref:P=>{C.current[j.field]=P},canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(248, 250, 252)",penColor:"rgb(0, 0, 0)",onEnd:()=>{const P=C.current[j.field];P&&!P.isEmpty()&&x(j.field,P.toDataURL("image/png"))}})]}),f[j.field]&&l.jsx("button",{type:"button",onClick:()=>{var P;(P=C.current[j.field])==null||P.clear(),x(j.field,null)},className:"mt-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Clear signature"})]},j.field):j.type==="text"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[R(j.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),j.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:R(j.description)}),l.jsx("input",{type:"text",placeholder:j.placeholder,value:f[j.field]||"",onChange:P=>x(j.field,P.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"}),j.aiExtract&&u[j.field]&&l.jsxs("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[" Suggested from diagnosis: ",u[j.field]]})]},j.field):j.type==="textarea"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[R(j.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),j.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:R(j.description)}),l.jsx("textarea",{rows:j.rows||3,placeholder:j.placeholder,value:f[j.field]||"",onChange:P=>x(j.field,P.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},j.field):j.type==="date"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[R(j.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),j.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:R(j.description)}),l.jsx("input",{type:"date",value:f[j.field]||"",onChange:P=>x(j.field,P.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},j.field):j.type==="phone"?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[R(j.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),j.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:R(j.description)}),l.jsx("input",{type:"tel",placeholder:j.placeholder||"(555) 123-4567",value:f[j.field]||"",onChange:P=>x(j.field,P.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm"})]},j.field):j.type==="radio"&&j.options?l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[R(j.prompt)," ",l.jsx("span",{className:"text-red-500",children:"*"})]}),j.description&&l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:R(j.description)}),l.jsx("div",{className:"space-y-2",children:j.options.map(P=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:j.field,value:P,checked:f[j.field]===P,onChange:F=>x(j.field,F.target.value),className:"text-emerald-600"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:P})]},P))})]},j.field):null,K=async j=>{if(j.preventDefault(),p(null),!_.every(F=>{if(!F.required)return!0;const B=f[F.field];return!(!B||typeof B=="string"&&B.trim()==="")})){p("Please fill out all required fields");return}N(!0);try{await d(f)}catch{p("Failed to save data. Please try again."),N(!1)}};return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-lg rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl max-h-[calc(100vh-80px)] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Quick Questions for ",r]}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:[" We need a few details to submit your claim. These fields are required by ",r,"."]})]}),y&&l.jsx("div",{className:"mb-4 rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-800",children:y}),l.jsxs("form",{onSubmit:K,children:[_.map(j=>W(j)),l.jsx("div",{className:"mt-6 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 px-4 py-3",children:l.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:" This information will be saved for future claims"})}),l.jsxs("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,disabled:k,className:"flex-1 h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:k,className:"flex-1 h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium disabled:opacity-50",children:k?"Saving...":"Continue to Submit"})]})]})]})}):null}function E8({claim:t,pet:e,userId:r,onClose:n,onSuccess:s}){const[i,a]=re.useState("validating"),[o,u]=re.useState(null),[d,f]=re.useState(null),[g,y]=re.useState(!1),[p,k]=re.useState(null),[N,C]=re.useState(null),x=(e==null?void 0:e.insurance_company)||"Nationwide",b=t.total_amount?`$${parseFloat(t.total_amount).toFixed(2)}`:"$0.00";re.useEffect(()=>{async function j(){var P;try{a("validating"),console.log("[ClaimSubmissionModal] Starting validation..."),console.log("[ClaimSubmissionModal] claim:",t),console.log("[ClaimSubmissionModal] pet:",e),console.log("[ClaimSubmissionModal] pet.insurance_company:",e==null?void 0:e.insurance_company);const{data:F,error:B}=await it.from("profiles").select("*").eq("id",r).single();if(B)throw B;k(F);const A=((P=e==null?void 0:e.insurance_company)==null?void 0:P.toLowerCase())||"";if(console.log("[ClaimSubmissionModal] insurerName:",A),!A||A==="not insured"||A==="none"){console.log("[ClaimSubmissionModal] No insurance company found"),f("Pet does not have an insurance company set. Please update pet information in Settings."),a("missing-data");return}const O="http://localhost:8787";console.log("[ClaimSubmissionModal] Calling validation API:",`${O}/api/claims/validate-fields`),console.log("[ClaimSubmissionModal] Request body:",{claimId:t.id,userId:r,insurer:A});const z=await fetch(`${O}/api/claims/validate-fields`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({claimId:t.id,userId:r,insurer:A})});console.log("[ClaimSubmissionModal] Response status:",z.status),console.log("[ClaimSubmissionModal] Response ok:",z.ok),console.log("[ClaimSubmissionModal] Response headers:",{"content-type":z.headers.get("content-type"),"content-length":z.headers.get("content-length")});const q=await z.text();console.log("[ClaimSubmissionModal] Response text (first 500 chars):",q.substring(0,500));let ee;try{ee=JSON.parse(q),console.log("[ClaimSubmissionModal] Validation response:",ee)}catch(Q){throw console.error("[ClaimSubmissionModal] Failed to parse JSON response:",Q),console.error("[ClaimSubmissionModal] Full response text:",q),new Error(`API returned non-JSON response (status ${z.status}): ${q.substring(0,200)}`)}if(!ee.ok){console.error("[ClaimSubmissionModal] Validation failed:",ee.error),f(`Error validating claim requirements: ${ee.error}`),a("error");return}if(console.log("[Validation] Result:",ee),ee.missingFields&&ee.missingFields.length>0){console.log("[ClaimSubmissionModal] Missing fields detected:",ee.missingFields),C({insurerName:e.insurance_company,missingFields:ee.missingFields,existingData:ee.existingData||{},suggestedValues:ee.suggestedValues||{}}),a("collect-missing-fields");return}console.log("[ClaimSubmissionModal] All fields present, proceeding to confirm"),a("confirm")}catch(F){console.error("[Validation] Error:",F),f(`Failed to validate claim: ${F.message}`),a("error")}}j()},[r,e,t]);const _=[];async function R(){try{y(!0);const j="http://localhost:8787",{data:{session:P}}=await it.auth.getSession();if(!(P!=null&&P.access_token))throw new Error("Not authenticated");const F=t.pdf_path?"?merged=true":"",B=await fetch(`${j}/api/claims/${t.id}/preview-pdf${F}`,{headers:{Authorization:`Bearer ${P.access_token}`}});if(!B.ok){const z=await B.json();throw new Error(z.error||"Failed to generate preview")}const A=await B.blob(),O=URL.createObjectURL(A);window.open(O,"_blank","noopener,noreferrer"),t.pdf_path?console.log("[Preview] Opened merged PDF (claim form + vet invoice)"):console.log("[Preview] Opened claim form PDF (no vet invoice attached)")}catch(j){console.error("[Preview PDF] Error:",j),alert(`Could not generate preview: ${j.message}`)}finally{y(!1)}}async function W(){a("submitting"),f(null);try{const P=await fetch("http://localhost:8787/api/claims/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({claimId:t.id,userId:r})}),F=await P.json();if(!P.ok||!F.ok)throw new Error(F.error||"Failed to submit claim");console.log("[ClaimSubmission] Success:",F),u(F.messageId),a("success")}catch(j){console.error("[ClaimSubmission] Error:",j),f(j.message||"Failed to submit claim"),a("error")}}async function K(j){try{a("validating");const B=await(await fetch(`http://localhost:8787/api/claims/${t.id}/save-collected-fields`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectedData:j})})).json();if(!B.ok){f("Failed to save claim information"),a("error");return}console.log("[Save Fields] Success:",B),a("confirm")}catch(P){console.error("[Save Fields] Error:",P),f("Failed to save claim information"),a("error")}}if(i==="validating")return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Validating Requirements..."}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Checking if all required information is complete"})]})});if(i==="collect-missing-fields"&&N)return l.jsx(P8,{open:!0,onClose:n,insurerName:N.insurerName,petId:e.id,petName:e.name,claimId:t.id,missingFields:N.missingFields,existingData:N.existingData,suggestedValues:N.suggestedValues,onComplete:K});if(i==="missing-data"){const j=()=>{n(),window.location.hash="#settings"};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full",children:[l.jsx("div",{className:"text-orange-500 text-6xl mb-4 text-center",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center",children:"Missing Required Information"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 text-center",children:"Please complete your profile and pet information before submitting claims."}),l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-3",children:"Missing:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 space-y-1.5",children:d==null?void 0:d.split(`
`).slice(1).map((P,F)=>l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),l.jsx("span",{children:P.replace("- ","")})]},F))})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"How to complete:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:"1. Go to Settings (click button below)"}),l.jsx("li",{children:"2. Fill in your signature, insurance info, and address"}),l.jsx("li",{children:"3. Update your pet's breed and date of birth"}),l.jsx("li",{children:"4. Return here and submit your claim"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:j,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Go to Settings"})]})]})})}return i==="submitting"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Submitting Claim..."}),l.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Generating PDF and sending to ",x]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Creating claim form PDF..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Sending email to insurance company..."})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"h-2 w-2 bg-purple-500 rounded-full animate-pulse"}),l.jsx("span",{children:"Updating claim status..."})]})]})]})}):i==="success"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-green-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Claim Submitted!"}),l.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Your claim for ",l.jsx("strong",{children:(e==null?void 0:e.name)||"your pet"})," has been automatically submitted to ",l.jsx("strong",{children:x}),"."]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"What happens next:"}),l.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-400 space-y-1",children:[l.jsxs("li",{children:[" Claim form PDF sent to ",x]}),l.jsx("li",{children:" Copy sent to your email (BCC)"}),l.jsx("li",{children:' Claim status updated to "Submitted"'}),l.jsx("li",{children:" Insurance company will review (typically 5-10 business days)"})]})]}),o&&l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-6",children:l.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-400 font-mono break-all",children:["Tracking ID: ",o.slice(0,20),"..."]})}),l.jsx("button",{onClick:()=>{s(o),n()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-semibold w-full",children:"Done"})]})}):i==="error"?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Submission Failed"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"We couldn't submit your claim automatically."}),l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6 text-left",children:l.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[l.jsx("strong",{children:"Error:"})," ",d]})}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Next steps:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[l.jsx("li",{children:" Try again in a few minutes"}),l.jsx("li",{children:" Or manually mark as submitted after filing yourself"}),l.jsx("li",{children:" Contact support if the problem persists"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>a("confirm"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"}),l.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-blue-600 text-5xl mb-4",children:""}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["Auto-Submit Claim to ",x,"?"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Review the claim details before submitting"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:"Claim Summary"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pet:"}),l.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(e==null?void 0:e.name)||"Unknown"," (",(e==null?void 0:e.species)||"Pet",")"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Clinic:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.clinic_name||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Service Date:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.service_date||"N/A"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagnosis:"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-right max-w-xs line-clamp-2",children:t.visit_title||t.diagnosis||"N/A"})]}),l.jsxs("div",{className:"pt-3 border-t border-blue-200 dark:border-blue-700 flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-800 dark:text-gray-200 font-semibold",children:"Total Amount:"}),l.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:b})]})]})]}),_.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-1",children:"Missing Information"}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"The following information is missing from your claim:"}),l.jsx("ul",{className:"text-sm text-orange-700 dark:text-orange-400 list-disc list-inside",children:_.map((j,P)=>l.jsx("li",{children:j},P))}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-2",children:"You can still submit, but the insurance company may request additional information."})]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("button",{onClick:R,disabled:g,className:"w-full py-3 px-4 border-2 border-blue-500 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center justify-center gap-2 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Generating Preview..."]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),"Preview Claim Form PDF"]})}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Opens in new tab  Review before submitting"})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"What will happen:"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"1."}),l.jsx("span",{children:"Generate professional claim form PDF with all details"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"2."}),l.jsxs("span",{children:["Email claim form to ",l.jsx("strong",{children:x})," at their claims processing address"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"3."}),l.jsx("span",{children:"Send you a copy (BCC) so you have a record"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"4."}),l.jsx("span",{children:'Update claim status to "Submitted" in your dashboard'})]})]})]}),l.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-1",children:"Test Mode Active"}),l.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:["This submission will be sent to ",l.jsx("strong",{children:"larry@uglydogadventures.com"})," for testing, not to the actual insurance company. Perfect for testing!"]})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:W,className:"flex-1 bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 font-semibold text-lg shadow-lg hover:shadow-xl transition-all",children:[" Submit to ",x]}),l.jsx("button",{onClick:n,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"Cancel"})]})]})})}function L8({userId:t,initialSignature:e,onSave:r}){const n=re.useRef(null),[s,i]=re.useState(e||null),[a,o]=re.useState(!1),[u,d]=re.useState(null),[f,g]=re.useState(!1);re.useEffect(()=>{e&&i(e)},[e]);const y=()=>{var C;(C=n.current)==null||C.clear(),g(!1),d(null)},p=async()=>{if(!n.current||n.current.isEmpty()){d({type:"error",text:"Please draw your signature first"});return}o(!0),d(null);try{const C=n.current.toDataURL("image/png"),{error:x}=await it.from("profiles").update({signature:C}).eq("id",t);if(x)throw x;i(C),d({type:"success",text:"Signature saved successfully!"}),r&&r(C),setTimeout(()=>d(null),3e3)}catch(C){console.error("Error saving signature:",C),d({type:"error",text:"Failed to save signature. Please try again."})}finally{o(!1)}},k=()=>{i(null),g(!1),setTimeout(()=>{var C;(C=n.current)==null||C.clear()},0)},N=()=>{g(!0),d(null)};return l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Signature"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This will be used on your insurance claim forms"})]}),s?l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-green-800",children:"Signature Saved"}),l.jsx("button",{onClick:k,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),l.jsx("div",{className:"bg-white rounded border border-green-300 p-4",children:l.jsx("img",{src:s,alt:"Your signature",className:"max-w-full h-auto",style:{maxHeight:"120px"}})})]})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[!f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("span",{className:"text-gray-400 text-sm italic",children:"Sign here with your mouse or finger"})}),l.jsx(Au,{ref:n,canvasProps:{className:"signature-canvas w-full rounded-lg cursor-crosshair",style:{height:"150px",touchAction:"none"}},backgroundColor:"rgb(249, 250, 251)",penColor:"rgb(0, 0, 0)",onBegin:N})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:y,disabled:!f||a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear"}),l.jsx("button",{onClick:p,disabled:!f||a,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:a?"Saving...":"Save Signature"})]}),u&&l.jsx("div",{className:`p-3 rounded-lg text-sm ${u.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:u.text})]}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-800",children:[l.jsx("strong",{children:"Note:"})," Your signature will be included on all insurance claim submissions. Make sure it matches the signature on file with your insurance company."]})})]})}function T8(){const[t,e]=re.useState([]),[r,n]=re.useState([]),[s,i]=re.useState(!0),[a,o]=re.useState(null),[u,d]=re.useState("all"),[f,g]=re.useState("all"),[y,p]=re.useState("email"),[k,N]=re.useState("asc"),[C,x]=re.useState(null);re.useEffect(()=>{b()},[]);async function b(){try{i(!0),o(null);const{data:F,error:B}=await it.from("profiles").select("*").order("created_at",{ascending:!1});if(B)throw B;const A=F.filter(xe=>{const L=(xe.email||"").toLowerCase();return!L.includes("larry")&&!L.includes("uglydogadventures")&&!L.includes("dogstrainedright")}),O=new Set(A.map(xe=>xe.id)),{data:z,error:q}=await it.from("pets").select("*");if(q)throw q;const ee=z.filter(xe=>O.has(xe.user_id)),{data:Q,error:de}=await it.from("claims").select("*");if(de)throw de;const H=Q.filter(xe=>O.has(xe.user_id)),oe=A.map(xe=>{const L=ee.filter(ae=>ae.user_id===xe.id),$=H.filter(ae=>ae.user_id===xe.id),Y=$.reduce((ae,pe)=>ae+(pe.total_amount||0),0);let X="inactive";return $.length>0?X="active":L.length>0&&(X="pet-only"),{profile:xe,pets:L,claims:$,petsCount:L.length,claimsCount:$.length,totalClaimAmount:Y,lastActive:xe.updated_at||xe.created_at,status:X}}),ne=H.map(xe=>{const L=A.find(Y=>Y.id===xe.user_id),$=ee.find(Y=>Y.id===xe.pet_id);return{...xe,userEmail:(L==null?void 0:L.email)||"Unknown",userName:(L==null?void 0:L.full_name)||"Unknown",petName:($==null?void 0:$.name)||"Unknown",insuranceCompany:($==null?void 0:$.insurance_company)||"Unknown"}});e(oe),n(ne)}catch(F){console.error("Error loading admin data:",F),o(F.message)}finally{i(!1)}}const _=re.useMemo(()=>{const F=t.filter(H=>H.status==="active").length,B=t.filter(H=>H.status==="inactive").length,A=t.reduce((H,oe)=>H+oe.petsCount,0),O=r.length,z=r.reduce((H,oe)=>H+(oe.total_amount||0),0),q=r.filter(H=>H.filing_status==="draft").length,ee=r.filter(H=>H.filing_status==="submitted").length,Q=r.filter(H=>H.filing_status==="paid").length,de={};return r.forEach(H=>{const oe=H.insuranceCompany||"Unknown";de[oe]=(de[oe]||0)+1}),{totalUsers:t.length,activeUsers:F,inactiveUsers:B,totalPets:A,totalClaims:O,totalAmount:z,draftClaims:q,submittedClaims:ee,paidClaims:Q,insuranceBreakdown:de}},[t,r]),R=re.useMemo(()=>[...t].sort((B,A)=>{let O,z;switch(y){case"email":O=B.profile.email,z=A.profile.email;break;case"name":O=B.profile.full_name||"",z=A.profile.full_name||"";break;case"petsCount":O=B.petsCount,z=A.petsCount;break;case"claimsCount":O=B.claimsCount,z=A.claimsCount;break;case"lastActive":O=new Date(B.lastActive).getTime(),z=new Date(A.lastActive).getTime();break;default:return 0}return O<z?k==="asc"?-1:1:O>z?k==="asc"?1:-1:0}),[t,y,k]),W=re.useMemo(()=>r.filter(F=>!(u!=="all"&&F.filing_status!==u||f!=="all"&&F.insuranceCompany!==f)),[r,u,f]);function K(F){y===F?N(k==="asc"?"desc":"asc"):(p(F),N("asc"))}function j(F){switch(F){case"active":return"bg-green-100 text-green-800";case"pet-only":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function P(F){switch(F){case"submitted":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800"}}return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):a?l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h2",{className:"text-red-800 font-semibold",children:"Error loading admin data"}),l.jsx("p",{className:"text-red-600 mt-2",children:a})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"System overview and user management"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Users"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:_.totalUsers}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-green-600",children:["Active: ",_.activeUsers]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-red-600",children:["Inactive: ",_.inactiveUsers]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Pets"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:_.totalPets}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Across all users"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Claims"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:_.totalClaims}),l.jsxs("div",{className:"mt-2 text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Draft: ",_.draftClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-blue-600",children:["Submitted: ",_.submittedClaims]}),l.jsx("span",{className:"text-gray-400 mx-2",children:""}),l.jsxs("span",{className:"text-green-600",children:["Paid: ",_.paidClaims]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase",children:"Total Amount"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",_.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"All claims combined"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims by Insurance Company"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(_.insuranceBreakdown).map(([F,B])=>l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:F}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:B})]},F))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Users"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>K("email"),children:["Email ",y==="email"&&(k==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>K("name"),children:["Name ",y==="name"&&(k==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>K("petsCount"),children:["Pets ",y==="petsCount"&&(k==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>K("claimsCount"),children:["Claims ",y==="claimsCount"&&(k==="asc"?"":"")]}),l.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>K("lastActive"),children:["Last Active ",y==="lastActive"&&(k==="asc"?"":"")]}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(F=>l.jsxs(Vp.Fragment,{children:[l.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>x(C===F.profile.id?null:F.profile.id),children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.profile.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.profile.full_name||"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:F.petsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:F.claimsCount}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(F.lastActive).toLocaleDateString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j(F.status)}`,children:F.status})})]}),C===F.profile.id&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"User Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",F.profile.phone_number||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Timezone:"})," ",F.profile.timezone||"Not set"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"SMS Opt-in:"})," ",F.profile.sms_opt_in?"Yes":"No"]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Email Reminders:"})," ",F.profile.email_reminders?"Yes":"No"]})]})]}),F.pets.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Pets (",F.pets.length,")"]}),l.jsx("div",{className:"space-y-2",children:F.pets.map(B=>l.jsxs("div",{className:"bg-white border rounded p-3 text-sm",children:[l.jsxs("div",{className:"font-medium",children:[B.name," - ",B.species]}),l.jsxs("div",{className:"text-gray-600",children:[B.insurance_company,"  Policy: ",B.policy_number||"Not set"]})]},B.id))})]}),F.claims.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["Recent Claims (",F.claims.length,") - Total: $",F.totalClaimAmount.toFixed(2)]}),l.jsxs("div",{className:"space-y-2",children:[F.claims.slice(0,5).map(B=>{var A;return l.jsx("div",{className:"bg-white border rounded p-3 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:B.clinic_name||"Unknown Clinic"}),l.jsxs("div",{className:"text-gray-600",children:[B.service_date?new Date(B.service_date).toLocaleDateString():"No date","  $",((A=B.total_amount)==null?void 0:A.toFixed(2))||"0.00"]})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${P(B.filing_status||"draft")}`,children:B.filing_status||"draft"})]})},B.id)}),F.claims.length>5&&l.jsxs("div",{className:"text-sm text-gray-600",children:["+ ",F.claims.length-5," more claims"]})]})]})]})})})]},F.profile.id))})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"All Claims"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("select",{value:u,onChange:F=>d(F.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"paid",children:"Paid"})]}),l.jsxs("select",{value:f,onChange:F=>g(F.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[l.jsx("option",{value:"all",children:"All Insurance"}),Object.keys(_.insuranceBreakdown).map(F=>l.jsx("option",{value:F,children:F},F))]})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pet"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Date"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Insurance"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PDF"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(F=>{var B;return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm text-gray-900",children:F.userName}),l.jsx("div",{className:"text-sm text-gray-500",children:F.userEmail})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.petName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.service_date?new Date(F.service_date).toLocaleDateString():"-"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:["$",((B=F.total_amount)==null?void 0:B.toFixed(2))||"0.00"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P(F.filing_status||"draft")}`,children:F.filing_status||"draft"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.insuranceCompany}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:F.pdf_path?l.jsx("span",{className:"text-green-600",children:""}):l.jsx("span",{className:"text-gray-400",children:"-"})})]},F.id)})})]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-600",children:["Showing ",W.length," of ",r.length," claims"]}),l.jsxs("span",{className:"font-semibold text-gray-900",children:["Total: $",W.reduce((F,B)=>F+(B.total_amount||0),0).toFixed(2)]})]})})]})]})}async function Qv(t){console.log("[createClaim] inserting",t);const{data:e,error:r}=await it.from("claims").insert(t).select("*").single();if(r)throw r;return e}async function Es(t){try{console.log("[listClaims] START - userId=",t);const{data:e,error:r}=await it.from("claims").select("*, pets(id, name, species, insurance_company)").eq("user_id",t).order("service_date",{ascending:!1});if(console.log("[listClaims] QUERY RESULT - data:",e,"error:",r),r)throw console.error("[listClaims] ERROR:",r),r;return console.log("[listClaims] SUCCESS - count=",(e==null?void 0:e.length)||0),e}catch(e){throw console.error("[listClaims] EXCEPTION:",e),e}}async function Aa(t,e){const{error:r}=await it.from("claims").update(e).eq("id",t);if(r)throw r}async function O8(t){const{error:e}=await it.from("claims").delete().eq("id",t);if(e)throw e}function I8(t){const e=t.replace(/\D/g,"");return e.length!==10?t:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}function hw(t){const e=t.replace(/\D/g,"");return e.length!==10?"":`+1${e}`}function fw(t,e=""){const n=t.replace(/\D/g,"").slice(0,10);return n.length===0?"":n.length<=3?`(${n}`:n.length<=6?`(${n.slice(0,3)}) ${n.slice(3)}`:`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6)}`}const D8=["test-automation@petclaimhelper.com","larry@uglydogadventures.com"];function F8(){const t=re.useRef(null),[e,r]=re.useState(null),[n,s]=re.useState(!1),[i,a]=re.useState(!1),[o,u]=re.useState(null),[d,f]=re.useState(null),[g,y]=re.useState([]),[p,k]=re.useState(null),N=re.useMemo(()=>g.find(S=>S.id===p)??null,[g,p]),[C,x]=re.useState(""),[b,_]=re.useState(""),[R,W]=re.useState("insured"),[K,j]=re.useState(!1),[P,F]=re.useState({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:""}),[B,A]=re.useState(null),[O,z]=re.useState(null),[q,ee]=re.useState(""),[Q,de]=re.useState(""),[H,oe]=re.useState(""),[ne,xe]=re.useState(""),[L,$]=re.useState(""),[Y,X]=re.useState(""),[ae,pe]=re.useState(null),[J,ge]=re.useState(null),[Se,Pe]=re.useState("signup"),[Le,Fe]=re.useState(null),[et,we]=re.useState([]),[Z,mt]=re.useState(!1),[Xe,Te]=re.useState(null),Me=re.useRef(null),ze=re.useRef(null),[Ie,We]=re.useState([]),[ht,xt]=re.useState(0),[_t,Ct]=re.useState(!1),[St,at]=re.useState("all"),[Nt,Re]=re.useState("app"),[zr,kt]=re.useState(!1),[Yt,Mt]=re.useState(null),[Jt,Xn]=re.useState(null),[Tt,ci]=re.useState(""),[nr,Dn]=re.useState(""),[vs,sr]=re.useState(""),[ut,Ot]=re.useState(""),[Fn,hr]=re.useState([]),[Nn,_n]=re.useState("insured"),[rt,Sn]=re.useState(!1),[Tr,Or]=re.useState(null),[fr,lr]=re.useState(""),[en,di]=re.useState(bs()),[Us,kn]=re.useState(!1),[Ir,jn]=re.useState(null),[ys,tn]=re.useState(!1),[xs,Mn]=re.useState(!1),[Ci,Bs]=re.useState([]),[hi,Ai]=re.useState([]);function bs(){const S=new Date,te=S.getFullYear(),se=String(S.getMonth()+1).padStart(2,"0"),fe=String(S.getDate()).padStart(2,"0");return`${te}-${se}-${fe}`}const[Yo,Jo]=re.useState(null),$s=S=>{Jo({message:S}),setTimeout(()=>Jo(null),2500)},[so,Ou]=re.useState(null),[aa,Iu]=re.useState(null),[io,Ko]=re.useState(!1),[Pi,Zo]=re.useState(null),[mr,Xo]=re.useState(0),[oa,la]=re.useState(null),[Ei,Qo]=re.useState(null),[Rn,Qn]=re.useState(null);re.useEffect(()=>{d&&requestAnimationFrame(()=>{document.body.offsetHeight})},[d]);const[ln,Li]=re.useState(!1),Ti=S=>S.trim().toLowerCase(),Du=(S,te)=>{const se=Ti(S),fe=Ti(te),_e=se.length,Ve=fe.length;if(_e===0)return Ve;if(Ve===0)return _e;const Ge=Array.from({length:_e+1},()=>Array(Ve+1).fill(0));for(let Be=0;Be<=_e;Be++)Ge[Be][0]=Be;for(let Be=0;Be<=Ve;Be++)Ge[0][Be]=Be;for(let Be=1;Be<=_e;Be++)for(let De=1;De<=Ve;De++){const Qe=se[Be-1]===fe[De-1]?0:1;Ge[Be][De]=Math.min(Ge[Be-1][De]+1,Ge[Be][De-1]+1,Ge[Be-1][De-1]+Qe)}return Ge[_e][Ve]},el=(S,te)=>{const se=Ti(S),fe=Ti(te);if(!se||!fe)return 0;if(se===fe)return 1;if(se.includes(fe)||fe.includes(se))return .92;const _e=Du(se,fe),Ve=Math.max(se.length,fe.length);return 1-_e/(Ve||1)},Fu=(S,te)=>{const se=Array(S.length).fill(null),fe=new Set;return S.forEach((_e,Ve)=>{const Be=te.map(De=>({id:De.id,score:el(_e.petName||"",De.name||"")})).sort((De,Qe)=>Qe.score-De.score).find(De=>De.score>=.8&&!fe.has(De.id));Be&&(se[Ve]=Be.id,fe.add(Be.id))}),se};re.useEffect(()=>{try{console.log("[auth] calling getSession()")}catch{}it.auth.getSession().then(async({data:te})=>{var fe,_e;try{console.log("[auth] getSession() result:",{hasSession:!!(te!=null&&te.session),userId:((_e=(fe=te==null?void 0:te.session)==null?void 0:fe.user)==null?void 0:_e.id)||null})}catch{}const se=te.session;if(se!=null&&se.user){pe(se.user.email??null),ge(se.user.id),Pe("app"),tv(se.user.id,se.user.email??null).catch(()=>{});try{const Ve=Intl.DateTimeFormat().resolvedOptions().timeZone;ev(Ve).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",se.user.id)}catch{}lh(se.user.id).then(Ve=>{y(Ve),(Ve||[]).length===0&&kn(!0)}).catch(Ve=>{console.error("[auth] dbLoadPets failed:",Ve),y([])}),Es(se.user.id).then(We).catch(Ve=>{console.error("[auth] listClaims failed:",Ve),We([])})}else{try{console.log("[auth] getSession() no session found - showing signup")}catch{}Pe("signup")}}).catch(te=>{try{console.error("[auth] getSession() error:",te)}catch{}Pe("signup")});const{data:S}=it.auth.onAuthStateChange(async(te,se)=>{var fe;try{console.log("[auth] onAuthStateChange:",{event:te,hasSession:!!se,userId:((fe=se==null?void 0:se.user)==null?void 0:fe.id)||null})}catch{}if(se!=null&&se.user){pe(se.user.email??null),ge(se.user.id),Pe("app"),tv(se.user.id,se.user.email??null).catch(()=>{});try{const _e=localStorage.getItem("pending_sms_consent");if(_e){console.log("[auth] Found pending SMS consent, saving to database...");const Ve=JSON.parse(_e);let Ge=null;try{Ge=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,console.log("[auth] IP address fetched:",Ge)}catch(Je){console.log("[auth] Could not fetch IP address:",Je)}const Be={user_id:se.user.id,phone_number:Ve.phone_number,consented:Ve.consented,consent_text:Ve.consent_text,ip_address:Ge};console.log("[auth] Inserting SMS consent data:",Be);const{data:De,error:Qe}=await it.from("sms_consent").insert(Be).select();Qe?(console.error("[auth] Failed to save SMS consent:",Qe),console.error("[auth] Consent error details:",JSON.stringify(Qe,null,2))):(console.log("[auth] SMS consent saved successfully!",De),localStorage.removeItem("pending_sms_consent"),console.log("[auth] Cleared pending SMS consent from localStorage"))}}catch(_e){console.error("[auth] Error processing pending SMS consent:",_e)}try{const _e=Intl.DateTimeFormat().resolvedOptions().timeZone;ev(_e).catch(()=>{})}catch{}try{console.log("[auth] calling dbLoadPets for user:",se.user.id)}catch{}lh(se.user.id).then(_e=>{y(_e),(_e||[]).length===0&&kn(!0)}).catch(_e=>{console.error("[auth] dbLoadPets failed:",_e),y([])}),Es(se.user.id).then(We).catch(_e=>{console.error("[auth] listClaims failed:",_e),We([])})}else{pe(null),ge(null),y([]);try{console.log("[auth] onAuthStateChange - signed out, clearing state")}catch{}Pe("signup")}});return()=>{S.subscription.unsubscribe()}},[]),re.useEffect(()=>{if(!J){kt(!1);return}it.from("profiles").select("is_admin").eq("id",J).single().then(({data:S,error:te})=>{if(te){console.error("[admin] Failed to load admin status:",te),kt(!1);return}kt((S==null?void 0:S.is_admin)===!0)}).catch(()=>kt(!1))},[J]),re.useEffect(()=>{g&&g.length===1&&k(S=>S||g[0].id)},[g]),re.useEffect(()=>{if(localStorage.getItem("justCompletedOnboarding")==="true"&&g&&g.length>0)if(g.some(se=>!se.photo_url)){Li(!0);const se=setTimeout(()=>{Li(!1),localStorage.removeItem("justCompletedOnboarding")},5e3),fe=()=>{Li(!1),localStorage.removeItem("justCompletedOnboarding"),document.removeEventListener("click",fe)};return document.addEventListener("click",fe),()=>{clearTimeout(se),document.removeEventListener("click",fe)}}else localStorage.removeItem("justCompletedOnboarding")},[g]),re.useEffect(()=>{const S=window.location.pathname,te=new URLSearchParams(window.location.search),se=S.match(/^\/dose\/([a-f0-9-]+)$/i);if(se&&(te.get("token")||te.get("action")==="mark")){const fe=se[1];Zo(fe),Re("medications")}},[]),re.useEffect(()=>{try{localStorage.removeItem("pch.finPeriod")}catch{}},[]),re.useEffect(()=>{xt(S=>S+1)},[Ie,g,St]),re.useEffect(()=>{Yt&&(Xn(Yt.pet_id||null),ci(Yt.service_date||""),sr(Yt.visit_title||""),Dn(Yt.diagnosis||""),Ot(Yt.visit_notes||""),hr(Array.isArray(Yt.line_items)?Yt.line_items:[]),_n(Yt.expense_category||"insured"))},[Yt]);const tl=()=>{var _e,Ve;const S=P.name.trim();if(!S)return;if(!q){alert("Please select an insurance company");return}if(q==="NO_INSURANCE")P.insuranceCompany="",P.filing_deadline_days="",P.policyNumber="";else if(q==="Custom Insurance"){const Ge=H.trim(),Be=Number(ne);if(!Ge){alert("Enter custom insurance company name");return}if(!Number.isFinite(Be)||Be<1||Be>365){alert("Deadline must be 1-365 days");return}P.insuranceCompany=Ge,P.filing_deadline_days=Be}else P.insuranceCompany=q,P.filing_deadline_days=90;const te=((Ve=(_e=globalThis.crypto)==null?void 0:_e.randomUUID)==null?void 0:Ve.call(_e))??String(Date.now()),se={id:te,name:S,species:P.species,insuranceCompany:P.insuranceCompany||"",policyNumber:(P.policyNumber||"").trim(),ownerName:"",ownerPhone:"",filing_deadline_days:P.filing_deadline_days,monthly_premium:P.monthly_premium===""?null:Number(P.monthly_premium),deductible_per_claim:P.deductible_per_claim===""?null:Number(P.deductible_per_claim),insurance_pays_percentage:P.insurance_pays_percentage===""?null:Number(P.insurance_pays_percentage)/100,annual_coverage_limit:null,coverage_start_date:P.coverage_start_date||null},fe=[...g,se];if(y(fe),J&&Gm(J,se).catch(Ge=>{console.error("[addPet] upsert error",Ge)}),Xe!==null){const Ge=[...et];Ge[Xe]=te,we(Ge),Te(null)}else k(te);j(!1),F({name:"",species:"dog",insuranceCompany:"",filing_deadline_days:"",monthly_premium:"",deductible_per_claim:"",insurance_pays_percentage:"",coverage_start_date:"",policyNumber:""}),ee(""),oe(""),xe("")},Mu=S=>{A(S.id),z({name:S.name,species:S.species,insuranceCompany:S.insuranceCompany,filing_deadline_days:S.filing_deadline_days||"",monthly_premium:S.monthly_premium??"",deductible_per_claim:S.deductible_per_claim??"",coverage_start_date:S.coverage_start_date||"",insurance_pays_percentage:S.insurance_pays_percentage!=null?Math.round(Number(S.insurance_pays_percentage)*100):"",policyNumber:S.policyNumber||""});const te=["Trupanion","Nationwide","Healthy Paws","Fetch"];!S.insuranceCompany||S.insuranceCompany===""?(de("NO_INSURANCE"),$(""),X("")):te.includes(S.insuranceCompany)?(de(S.insuranceCompany),$(""),X(String(S.filing_deadline_days||""))):(de("Custom Insurance"),$(S.insuranceCompany),X(String(S.filing_deadline_days||"")))},ao=()=>{if(!B||!O)return;if(!Q){alert("Please select an insurance company");return}let S="",te="";if(Q==="NO_INSURANCE")S="",te="";else if(Q==="Custom Insurance"){const fe=L.trim(),_e=Number(Y);if(!fe){alert("Enter custom insurance company name");return}if(!Number.isFinite(_e)||_e<1||_e>365){alert("Deadline must be 1-365 days");return}S=fe,te=_e}else S=Q,te=90;const se=g.map(fe=>fe.id===B?{...fe,name:O.name.trim(),species:O.species,insuranceCompany:S,policyNumber:(O.policyNumber||"").trim(),ownerName:fe.ownerName||"",ownerPhone:fe.ownerPhone||"",filing_deadline_days:te,monthly_premium:O.monthly_premium===""?null:Number(O.monthly_premium),deductible_per_claim:O.deductible_per_claim===""?null:Number(O.deductible_per_claim),coverage_start_date:O.coverage_start_date||null,insurance_pays_percentage:O.insurance_pays_percentage===""?null:Number(O.insurance_pays_percentage)/100,annual_coverage_limit:fe.annual_coverage_limit??null}:fe);if(y(se),J){const fe=se.find(_e=>_e.id===B);fe&&Gm(J,fe).catch(_e=>{console.error("[saveEdit] upsert error",_e)})}A(null),z(null)},Ru=()=>{var S;return(S=t.current)==null?void 0:S.click()},Uu=async()=>{try{console.log("[auth] signOut() called")}catch{}const{error:S}=await it.auth.signOut();try{console.log("[auth] signOut() result:",S||null)}catch{}try{const{data:te}=await it.auth.getSession();console.log("[auth] post-signOut getSession():",{hasSession:!!(te!=null&&te.session)})}catch{}},rl=S=>{if(console.log("[MOBILE DEBUG] ========== processFile CALLED =========="),console.log("[MOBILE DEBUG] file:",S),console.log("[MOBILE DEBUG] file type:",S==null?void 0:S.type),console.log("[MOBILE DEBUG] file size:",S==null?void 0:S.size),!S){console.log("[MOBILE DEBUG] No file provided, setting selectedFile to null"),r(null);return}if(!(S.type.startsWith("image/")||S.type==="application/pdf")){console.log("[MOBILE DEBUG] File type not allowed:",S.type),r(null);return}const se=S.type.startsWith("image/"),fe=se?URL.createObjectURL(S):void 0;console.log("[MOBILE DEBUG] Setting selectedFile:",{fileName:S.name,fileType:S.type,isImage:se,objectUrl:fe}),r({file:S,objectUrl:fe}),f(null),u(null)},zs=S=>{var te,se;console.log("[MOBILE DEBUG] ========== handleChange CALLED =========="),console.log("[MOBILE DEBUG] e.target.files:",S.target.files),console.log("[MOBILE DEBUG] e.target.files?.[0]:",(te=S.target.files)==null?void 0:te[0]),rl((se=S.target.files)==null?void 0:se[0])},ua=S=>{S.preventDefault(),S.stopPropagation(),s(!0)},ca=S=>{S.preventDefault(),S.stopPropagation(),s(!0)},nl=S=>{S.preventDefault(),S.stopPropagation(),s(!1)},Gr=S=>{var fe;S.preventDefault(),S.stopPropagation(),s(!1);const te=S.dataTransfer;if(!te)return;const se=((fe=te.files)==null?void 0:fe[0])??null;rl(se)},Bu=re.useMemo(()=>{if(!e)return"";const{size:S}=e.file,te=1024,se=te*1024;return S<te?`${S} B`:S<se?`${(S/te).toFixed(1)} KB`:`${(S/se).toFixed(2)} MB`},[e]),sl=S=>{const te=typeof(S==null?void 0:S.clinicName)=="string"?S.clinicName:typeof(S==null?void 0:S.clinic_name)=="string"?S.clinic_name:"",se=typeof(S==null?void 0:S.clinicAddress)=="string"?S.clinicAddress:typeof(S==null?void 0:S.clinic_address)=="string"?S.clinic_address:"",fe=typeof(S==null?void 0:S.clinicPhone)=="string"?S.clinicPhone:typeof(S==null?void 0:S.clinic_phone)=="string"?S.clinic_phone:void 0,_e=typeof(S==null?void 0:S.petName)=="string"?S.petName:typeof(S==null?void 0:S.pet_name)=="string"?S.pet_name:"",Ve=typeof(S==null?void 0:S.dateOfService)=="string"?S.dateOfService:typeof(S==null?void 0:S.service_date)=="string"?S.service_date:"",Ge=typeof(S==null?void 0:S.totalAmount)=="string"?S.totalAmount:(S==null?void 0:S.total_amount)!=null?String(S.total_amount):"",Be=typeof(S==null?void 0:S.invoiceNumber)=="string"?S.invoiceNumber:typeof(S==null?void 0:S.invoice_number)=="string"?S.invoice_number:void 0,Qe=(Array.isArray(S==null?void 0:S.lineItems)?S.lineItems:Array.isArray(S==null?void 0:S.line_items)?S.line_items:[]).map(Je=>({description:typeof(Je==null?void 0:Je.description)=="string"?Je.description:"",amount:typeof(Je==null?void 0:Je.amount)=="string"?Je.amount:(Je==null?void 0:Je.amount)!=null?String(Je.amount):""}));return{clinicName:te,clinicAddress:se,clinicPhone:fe,petName:_e,dateOfService:Ve,totalAmount:Ge,diagnosis:typeof(S==null?void 0:S.diagnosis)=="string"?S.diagnosis:"",lineItems:Qe,invoiceNumber:Be}},ct=S=>{if(!S||!Array.isArray(S.pets))return null;const te=S.pets.map(se=>({petName:typeof(se==null?void 0:se.petName)=="string"?se.petName:"",petSpecies:typeof(se==null?void 0:se.petSpecies)=="string"?se.petSpecies:void 0,lineItems:Array.isArray(se==null?void 0:se.lineItems)?se.lineItems.map(fe=>({description:typeof(fe==null?void 0:fe.description)=="string"?fe.description:"",amount:typeof(fe==null?void 0:fe.amount)=="string"?fe.amount:String((fe==null?void 0:fe.amount)??"")})):[],subtotal:typeof(se==null?void 0:se.subtotal)=="string"?se.subtotal:void 0}));return{clinicName:typeof(S==null?void 0:S.clinicName)=="string"?S.clinicName:"",clinicAddress:typeof(S==null?void 0:S.clinicAddress)=="string"?S.clinicAddress:"",clinicPhone:typeof(S==null?void 0:S.clinicPhone)=="string"?S.clinicPhone:typeof(S==null?void 0:S.clinic_phone)=="string"?S.clinic_phone:void 0,dateOfService:typeof(S==null?void 0:S.dateOfService)=="string"?S.dateOfService:"",diagnosis:typeof(S==null?void 0:S.diagnosis)=="string"?S.diagnosis:"",pets:te,invoiceNumber:typeof(S==null?void 0:S.invoiceNumber)=="string"?S.invoiceNumber:void 0}},oo=S=>{const te=(S||"").replace(/[^0-9.\-]/g,""),se=parseFloat(te);return Number.isFinite(se)?se:0},il=S=>`$${S.reduce((se,fe)=>se+oo(fe.amount),0).toFixed(2)}`,es=async(S,te,se)=>{try{console.log("[uploadClaimPdf] Starting upload...",{uid:S,claimId:te,blobSize:se.size,blobType:se.type});const fe=`${S}/${te}.pdf`,{error:_e}=await it.storage.from("claim-pdfs").upload(fe,se,{upsert:!0,contentType:"application/pdf"});if(_e)throw _e;return console.log("[uploadClaimPdf]  Storage upload successful, updating claim record..."),await Aa(te,{pdf_path:fe}),console.log("[uploadClaimPdf]  Claim record updated with pdf_path:",fe),fe}catch(fe){return console.error("[uploadClaimPdf]  ERROR:",fe),null}},al=async(S,te)=>{if(!J){Qn("Please log in to upload photos");return}const se=5*1024*1024;if(te.size>se){Qn("Photo must be smaller than 5MB");return}if(!["image/png","image/jpeg","image/jpg"].includes(te.type)){Qn("Please upload a PNG or JPEG image");return}Qo(S),Qn(null);try{const _e=te.name.split(".").pop()||"jpg",Ve=Date.now(),Ge=`${J}/${S}-${Ve}.${_e}`,{error:Be}=await it.storage.from("pet-photos").upload(Ge,te,{upsert:!0,contentType:te.type});if(Be)throw Be;const{data:De}=it.storage.from("pet-photos").getPublicUrl(Ge);if(!(De!=null&&De.publicUrl))throw new Error("Failed to get public URL");const Qe=g.find(Et=>Et.id===S);if(!Qe)throw new Error("Pet not found");const Je={...Qe,photo_url:De.publicUrl};await Gm(J,Je);const Pt=await lh(J);y(Pt),$s("Photo uploaded successfully!")}catch(_e){console.error("[uploadPetPhoto] error",_e),Qn((_e==null?void 0:_e.message)||"Failed to upload photo. Please try again.")}finally{Qo(null)}},ol=async(S,te)=>{var fe;const se=(fe=te.target.files)==null?void 0:fe[0];se&&(await al(S,se),te.target.value="")},[lo,ll]=re.useState(!1),$u=async()=>{var S,te;if(console.log("[MOBILE DEBUG] ========== handleProcess CALLED =========="),console.log("[MOBILE DEBUG] selectedFile:",e),console.log("[MOBILE DEBUG] typeof selectedFile:",typeof e),console.log("[MOBILE DEBUG] selectedFile?.file:",e==null?void 0:e.file),!e){console.log("[MOBILE DEBUG]  EARLY RETURN - No selectedFile!");return}a(!0),u(null);try{console.log("[extract] starting server-side extraction, file type:",e.file.type),console.log("[extract] file size:",e.file.size),console.log("[extract] file name:",e.file.name);const se="https://pet-claim-helper.onrender.com",fe=new FormData;fe.append("file",e.file);const _e=new AbortController,Ge=setTimeout(()=>{try{_e.abort()}catch{}},9e4),Be=await fetch(`${se}/api/extract-pdf`,{method:"POST",body:fe,signal:_e.signal});if(clearTimeout(Ge),!Be.ok){const Et=await Be.text().catch(()=>"");throw new Error(Et||`Server error (${Be.status})`)}const De=await Be.json();if(console.log("[MOBILE DEBUG] Full JSON response:",JSON.stringify(De,null,2)),!De||De.ok!==!0||!De.data)throw console.error("[extract] bad response shape",De),new Error("Invalid extraction response");const Qe=De.data;if(console.log("[MOBILE DEBUG] Parsed data from server:",JSON.stringify(Qe,null,2)),!Qe)throw console.error("[extract] empty parsed data from server response"),new Error("Could not parse JSON from server response.");const Je=ct(Qe);if(Je&&Je.pets.length>1){console.log("[MOBILE DEBUG] Multi-pet extraction detected:",Je),Fe(Je),f(null);const Et=Fu(Je.pets,g);we(Et);return}const Pt=sl(Qe);console.log("[MOBILE DEBUG] Normalized extraction result:",JSON.stringify(Pt,null,2)),N&&(Pt.petName=N.name),console.log("[MOBILE DEBUG] Final extraction being set to state:",JSON.stringify(Pt,null,2)),f(Pt),Fe(null)}catch(se){const fe=String((se==null?void 0:se.message)||""),Ve=String((se==null?void 0:se.name)||"")==="AbortError"||/aborted|timeout/i.test(fe),Ge=/NetworkError|Failed to fetch|TypeError: Failed to fetch/i.test(fe),Be=(se==null?void 0:se.error)&&(se.error.message||((te=(S=se.error)==null?void 0:S.error)==null?void 0:te.message))||fe;u(Ve?"Extraction timed out. Mobile networks can be slow  please try again. We now wait up to 90 seconds.":Ge?"Network error during extraction. Please check your connection and try again.":Be||"AI extraction failed. Please try again."),console.error("[extract] error:",{name:se==null?void 0:se.name,message:se==null?void 0:se.message,cause:se==null?void 0:se.cause});const De={clinicName:"",clinicAddress:"",clinicPhone:"",petName:N?N.name:"",dateOfService:"",totalAmount:"",diagnosis:"",lineItems:[]};f(De),Fe(null)}finally{a(!1)}},ul=S=>typeof S.filing_deadline_days=="number"&&S.filing_deadline_days>0?S.filing_deadline_days:90,da=S=>{if(!S.service_date)return null;const te=new Date(S.service_date);return Number.isNaN(te.getTime())?null:te},Oi=S=>{const te=da(S);if(!te)return null;const se=new Date(te.getTime());se.setDate(se.getDate()+ul(S));const fe=new Date,_e=se.getTime()-fe.getTime();return Math.ceil(_e/(1e3*60*60*24))},Ii=S=>{switch((S||"not_submitted").toLowerCase()){case"filed":case"submitted":return{text:"Claim - Filed",cls:"bg-emerald-50 text-emerald-700"};case"approved":return{text:"Approved",cls:"bg-emerald-50 text-emerald-700"};case"paid":return{text:"Paid",cls:"bg-emerald-50 text-emerald-700"};case"denied":return{text:"Denied",cls:"bg-rose-50 text-rose-700"};case"not_filed":default:return{text:"Bill - Pending Submission",cls:"bg-blue-50 text-blue-700"}}},fi=S=>{const te=Oi(S),se=(S.filing_status||"not_submitted").toLowerCase(),fe=se==="filed"?"submitted":se;return fe==="submitted"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:fe==="approved"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:fe==="paid"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:fe==="denied"?{text:" Deadline met",cls:"bg-green-100 text-green-800 border border-green-200"}:te===null?{text:"No date",cls:"bg-slate-100 text-slate-600"}:te<0?{text:" DEADLINE PASSED - Submit now!",cls:"bg-red-100 text-red-800 border border-red-300 font-bold"}:te<5?{text:` URGENT - ${te} days`,cls:"bg-red-100 text-red-800 border border-red-300 font-bold animate-pulse"}:te<=14?{text:` Due soon - ${te} days`,cls:"bg-orange-100 text-orange-800 border border-orange-300 font-semibold"}:te<=29?{text:` Due soon - ${te} days`,cls:"bg-yellow-100 text-yellow-800 border border-yellow-300 font-semibold"}:{text:` Plenty of time - ${te} days`,cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}},ts=S=>`$${(typeof S=="number"&&Number.isFinite(S)?S:0).toFixed(2)}`,mi=re.useMemo(()=>{const S=[...Ie];return S.sort((te,se)=>{var Ve,Ge;const fe=((Ve=da(te))==null?void 0:Ve.getTime())||0;return(((Ge=da(se))==null?void 0:Ge.getTime())||0)-fe}),S},[Ie]),ws=re.useMemo(()=>{const S=Ie.length,te=Ie.filter(Ge=>String(Ge.expense_category||"insured").toLowerCase()==="insured"),se=te.filter(Ge=>["not_filed","not_submitted"].includes(String(Ge.filing_status||"not_submitted").toLowerCase())),fe=se.reduce((Ge,Be)=>Ge+(Number(Be.total_amount)||0),0),_e=te.filter(Ge=>["filed","submitted"].includes(String(Ge.filing_status||"").toLowerCase())).length,Ve=se.filter(Ge=>{const Be=Oi(Ge);return Be!==null&&Be>=1&&Be<=14}).length;return{total:S,notFiledCount:se.length,notFiledSum:fe,filedPending:_e,expiringSoon:Ve}},[Ie]),Di=re.useMemo(()=>{var cl;const S=Rt=>{if(!Rt)return null;const pt=String(Rt).match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!pt)return null;const ur=Number(pt[1]),cr=Number(pt[2])-1,Un=Number(pt[3]),m=new Date(ur,cr,Un);return Number.isNaN(m.getTime())?null:m},te=Rt=>{const pt=S(Rt);if(!pt)return 0;const ur=new Date;if(St==="2025"){if(pt.getFullYear()>2025)return 0;const E=pt.getFullYear()<2025?0:pt.getMonth(),G=ur.getFullYear()===2025?ur.getMonth():11;return Math.max(0,G-E+1)}if(St==="2024"){if(pt.getFullYear()>2024)return 0;const E=pt.getFullYear()<2024?0:pt.getMonth();return Math.max(0,11-E+1)}const cr=ur,Un=(cr.getFullYear()-pt.getFullYear())*12+(cr.getMonth()-pt.getMonth())+1;return Math.max(0,Un)},se=Ie.filter(Rt=>{const pt=Rt.service_date?new Date(Rt.service_date):null;if(!pt||Number.isNaN(pt.getTime()))return!1;if(St==="all")return!0;if(St==="2025")return pt.getFullYear()===2025;if(St==="2024")return pt.getFullYear()===2024;if(St==="last12"){const ur=new Date,cr=new Date(ur.getTime());return cr.setDate(cr.getDate()-365),pt>=cr&&pt<=ur}return!0}),fe={insured:{sum:0,count:0},not_insured:{sum:0,count:0},maybe_insured:{sum:0,count:0}};let _e=0,Ve=0,Ge=0,Be=0;const De={};let Qe=0,Je=0;const Pt=new Date;let Et=0,xr=0,Ht=0,un=0,uo=0,Fi=0;for(const Rt of se){const pt=Number(Rt.total_amount||0),ur=String(Rt.filing_status||"not_filed").toLowerCase(),cr=Rt.expense_category||"insured",Un=S(Rt.service_date);if(Be+=pt,fe[cr].sum+=pt,fe[cr].count+=1,ur==="paid"){const E=Number(Rt.reimbursed_amount||0);_e+=E,cr==="insured"&&(Fi+=Math.max(0,pt-E))}else(ur==="filed"||ur==="approved")&&(Ve+=pt);if((ur==="denied"||cr==="not_insured")&&(Ge+=pt),cr!=="insured"&&(un+=pt),ur==="approved"&&(Qe+=pt),Un&&!Number.isNaN(Un.getTime())){if(Un<=Pt&&(Et+=pt,ur==="paid")){const E=Number(Rt.reimbursed_amount||0);Je+=E,xr+=E}Un<=Pt&&ur==="submitted"&&cr==="insured"&&(uo+=pt)}const m=((cl=Rt.pets)==null?void 0:cl.name)||"Unknown Pet";De[m]||(De[m]={sum:0,count:0}),De[m].sum+=pt,De[m].count+=1}for(const Rt of g){const pt=Number(Rt.monthly_premium||0);pt>0&&(Ht+=pt*te(Rt.coverage_start_date||null))}for(const Rt of se){const pt=String(Rt.filing_status||"").toLowerCase(),ur=String(Rt.expense_category||"").toLowerCase();pt==="paid"&&ur==="insured"&&(Number(Rt.total_amount||0),Math.max(0,Number(Rt.deductible_applied)||0),Math.max(0,Number(Rt.reimbursed_amount)||0))}const Mi=Ht+un+Fi,co=Math.max(0,Et-xr);return{byCategory:fe,reimbursed:_e,awaiting:Ve,outOfPocket:Ge,grandTotal:Be,perPet:De,awaitingInsured:Qe,periodSpent:Mi,periodReimbursed:Je,periodNet:Mi,definiteTotal:Mi,pendingTotal:uo,spentOnAllPets:Et,reimbursedPaidPeriod:xr,netCostPeriod:co}},[Ie,St]);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100",children:[Yo&&l.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:l.jsx("div",{className:"px-4 py-2 rounded-lg bg-slate-900 text-white text-sm shadow-lg border border-slate-700",children:Yo.message})}),l.jsx("header",{className:"px-4 pt-2 pb-3 md:py-8 bg-gradient-to-b from-white/50 to-transparent dark:from-slate-900/50",children:l.jsxs("div",{className:"mx-auto max-w-6xl",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center mb-1 md:mb-6",children:[l.jsx("img",{src:"/pch-logo.png",alt:"Pet Claim Helper",className:"w-[70vw] max-w-[320px] md:w-[90vw] md:max-w-[500px] h-auto object-contain mt-1 mb-0 md:mt-0 md:mb-0"}),l.jsx("div",{className:"w-full px-4 mt-4 mb-3 md:mt-6 md:mb-4 animate-fade-in",children:l.jsx("div",{className:"max-w-3xl mx-auto",children:l.jsx("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-[2px] shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02]",children:l.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl px-6 py-4 md:px-8 md:py-5",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 md:gap-4",children:[l.jsx("span",{className:"text-3xl md:text-4xl animate-pulse",children:""}),l.jsxs("div",{className:"text-center md:text-left",children:[l.jsx("div",{className:"font-bold text-lg md:text-xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Coming Soon: Auto-Submit Claims"}),l.jsx("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mt-1",children:"One-click submission. Track payments. Never miss deadlines."})]})]})})})})}),l.jsxs("div",{className:"text-base md:text-lg font-bold text-gray-500 dark:text-gray-400 text-center max-w-xl px-4 leading-snug mt-1 mb-3 md:mt-0 md:mb-0",children:[l.jsx("div",{children:"Track Vet Bills. File Pet Insurance Instantly."}),l.jsx("div",{children:"Get Paid Faster."})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 flex-wrap mt-2 md:mt-0",children:[Se==="app"&&l.jsxs("button",{type:"button",onClick:()=>{var S;return(S=ze.current)==null?void 0:S.scrollIntoView({behavior:"smooth"})},className:"relative inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:["Bills (",Ie.length,")",ws.expiringSoon>0&&l.jsx("span",{className:"ml-2 inline-block h-2 w-2 rounded-full bg-rose-500","aria-hidden":!0})]}),Se==="app"&&l.jsx("button",{type:"button",onClick:()=>Re(S=>S==="app"?"settings":"app"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Settings"}),Se==="app"&&l.jsx("button",{type:"button",onClick:()=>Re(S=>S==="medications"?"app":"medications"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Medications"}),Se==="app"&&zr&&l.jsx("button",{type:"button",onClick:()=>Re(S=>S==="admin"?"app":"admin"),className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:" Admin Dashboard"}),Se==="app"&&l.jsx("a",{href:`mailto:support@petclaimhelper.com?subject=Pet Claim Helper Support Request&body=Hi Pet Claim Helper Team,%0D%0A%0D%0AI need help with:%0D%0A%0D%0A----%0D%0AUser: ${ae||"Not logged in"}%0D%0AUser ID: ${J||"N/A"}`,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",title:"Need help? Contact support",children:" Contact Support"}),ae&&l.jsxs("span",{className:"hidden sm:inline text-xs text-slate-600 dark:text-slate-300",children:["Logged in as: ",ae]}),ae&&l.jsx("button",{onClick:Uu,className:"inline-flex items-center rounded-lg border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-white/5 px-2 md:px-3 py-1.5 text-xs hover:shadow",children:"Logout"})]})]})}),l.jsxs("main",{className:"px-6",children:[Se==="app"&&Nt==="settings"&&l.jsx(U8,{userId:J,userEmail:ae,onClose:()=>Re("app"),onDefaultExpenseChange:S=>W(S),onDefaultPeriodChange:S=>at(S)}),Se==="app"&&Nt==="medications"&&l.jsx("section",{className:"mx-auto mt-8 max-w-6xl px-2",children:l.jsx(C8,{userId:J,pets:g,refreshKey:mr})}),Se==="app"&&Nt==="admin"&&l.jsx(l.Fragment,{children:zr?l.jsx(T8,{}):l.jsx("section",{className:"mx-auto max-w-2xl mt-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[l.jsx("h2",{className:"text-red-800 font-semibold text-lg",children:"Access Denied"}),l.jsx("p",{className:"text-red-600 mt-2",children:"You do not have admin privileges to access this page."}),l.jsx("button",{onClick:()=>Re("app"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Return to Dashboard"})]})})}),Se!=="app"&&l.jsx("section",{className:"mx-auto max-w-md mt-8",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm",children:[l.jsx("div",{className:"px-6 pt-4",children:l.jsxs("div",{className:"flex items-center gap-6 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("button",{type:"button",onClick:()=>Pe("signup"),className:["pb-3 text-sm font-medium transition-colors",Se==="signup"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"].join(" "),children:"Create Account"}),l.jsx("button",{type:"button",onClick:()=>Pe("login"),className:["pb-3 text-sm font-medium transition-colors",Se==="login"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"].join(" "),children:"Sign In"})]})}),l.jsx("div",{className:"p-6",children:l.jsx(M8,{mode:Se,onSwitch:S=>Pe(S)})})]})}),Se==="app"&&l.jsxs("section",{className:"mx-auto max-w-4xl",ref:Me,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Your Pets"}),l.jsx("button",{type:"button",onClick:()=>j(S=>!S),className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-1.5 text-sm hover:shadow",children:"+ Add Pet"})]}),Rn&&l.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-800 dark:text-red-200 flex items-start justify-between",children:[l.jsx("span",{children:Rn}),l.jsx("button",{onClick:()=>Qn(null),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:""})]}),K&&l.jsxs("div",{className:"mt-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 p-4 max-w-3xl mx-auto overflow-x-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{htmlFor:"pet-name",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),l.jsx("input",{id:"pet-name",value:P.name,onChange:S=>F({...P,name:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{htmlFor:"pet-species",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Species"}),l.jsxs("select",{id:"pet-species",value:P.species,onChange:S=>F({...P,species:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsxs("select",{id:"pet-insurance",value:q,onChange:S=>{const te=S.target.value;ee(te),te==="NO_INSURANCE"?F({...P,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):te==="Custom Insurance"?F({...P,insuranceCompany:"",filing_deadline_days:""}):te&&F({...P,insuranceCompany:te,filing_deadline_days:90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"NO_INSURANCE",children:"Not Insured"}),l.jsx("option",{value:"Trupanion",children:"Trupanion (90 days)"}),l.jsx("option",{value:"Nationwide",children:"Nationwide (90 days)"}),l.jsx("option",{value:"Healthy Paws",children:"Healthy Paws (90 days)"}),l.jsx("option",{value:"Fetch",children:"Fetch (90 days)"}),l.jsx("option",{value:"Custom Insurance",children:"Custom Insurance"})]})]}),q==="NO_INSURANCE"?l.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:l.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}):q==="Custom Insurance"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-custom-name",className:"block text-xs text-slate-500",children:"Insurance Company Name"}),l.jsx("input",{id:"pet-insurance-custom-name",value:H,onChange:S=>oe(S.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-custom-deadline",className:"block text-xs text-slate-500",children:"Filing Deadline (days)"}),l.jsx("input",{id:"pet-insurance-custom-deadline",type:"number",min:1,max:365,value:ne,onChange:S=>xe(S.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}):l.jsx("div",{className:"sm:col-span-1 flex items-end text-xs text-slate-600",children:q?"Filing Deadline: 90 days":""}),q&&q!=="NO_INSURANCE"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),l.jsx("input",{id:"pet-policy-number",value:P.policyNumber||"",onChange:S=>F({...P,policyNumber:S.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),q!=="NO_INSURANCE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"pet-premium",type:"number",step:"0.01",value:String(P.monthly_premium??""),onChange:S=>F({...P,monthly_premium:S.target.value===""?"":Number(S.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Your monthly insurance payment"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"pet-deductible",type:"number",step:"0.01",value:String(P.deductible_per_claim??""),onChange:S=>F({...P,deductible_per_claim:S.target.value===""?"":Number(S.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),l.jsx("input",{id:"pet-insurance-pays",type:"number",min:0,max:100,value:String(P.insurance_pays_percentage??""),onChange:S=>F({...P,insurance_pays_percentage:S.target.value===""?"":Number(S.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("label",{htmlFor:"pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),l.jsx("input",{id:"pet-coverage-start",type:"date",value:P.coverage_start_date||"",onChange:S=>F({...P,coverage_start_date:S.target.value}),className:"mt-1 w-full max-w-xs rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When your insurance policy began (used to calculate deductible reset)"})]})]})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:tl,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save Pet"}),l.jsx("button",{type:"button",onClick:()=>j(!1),className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.length===0&&l.jsx("div",{className:"col-span-full text-sm text-slate-500 dark:text-slate-400",children:'No pets saved yet. Click "+ Add Pet" to create one.'}),g.map(S=>l.jsxs("div",{className:["rounded-xl border p-6 text-left bg-white dark:bg-slate-900/60 shadow-sm relative",p===S.id?"border-emerald-400":"border-slate-200 dark:border-slate-800"].join(" "),style:{border:`2px solid ${S.color||(S.species==="dog"?"#3B82F6":S.species==="cat"?"#F97316":"#6B7280")}`},children:[l.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[l.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:te=>ol(S.id,te),className:"sr-only",id:`photo-upload-${S.id}`,disabled:Ei===S.id}),l.jsx("label",{htmlFor:`photo-upload-${S.id}`,className:["inline-flex items-center justify-center w-8 h-8 rounded-full cursor-pointer transition-all",S.species==="dog"?"bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",Ei===S.id?"opacity-50 cursor-not-allowed":""].join(" "),title:S.photo_url?"Change Photo":"Add Photo",children:Ei===S.id?l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):l.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),ln&&!S.photo_url&&g.indexOf(S)===0&&l.jsxs("div",{className:"absolute -top-16 -right-2 pointer-events-none animate-bounce",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg shadow-xl whitespace-nowrap text-sm font-medium",children:["Upload the cutest picture of ",S.name,"! "]}),l.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-pink-500"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-center mb-4",children:S.photo_url?l.jsx("img",{src:S.photo_url,alt:`${S.name}'s photo`,className:"w-32 h-32 rounded-full object-cover border-4 shadow-lg transition-transform hover:scale-105",style:{borderColor:S.color||(S.species==="dog"?"#3B82F6":S.species==="cat"?"#F97316":"#6B7280")}}):l.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center text-6xl border-4 shadow-lg",style:{borderColor:S.color||(S.species==="dog"?"#3B82F6":S.species==="cat"?"#F97316":"#6B7280"),backgroundColor:S.species==="dog"?"#EFF6FF":S.species==="cat"?"#FFF7ED":"#F3F4F6"},children:S.species==="dog"?"":S.species==="cat"?"":""})}),l.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:l.jsxs("div",{className:"flex-1 text-center",children:[l.jsxs("div",{className:"text-base font-semibold flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:S.color||(S.species==="dog"?"#3B82F6":S.species==="cat"?"#F97316":"#6B7280")}}),S.name]}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 capitalize",children:S.species})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-3",children:[l.jsx("button",{type:"button",onClick:()=>k(S.id),className:["inline-flex items-center justify-center rounded-lg px-3 py-1.5 h-12 text-sm hover:shadow w-full sm:w-auto whitespace-nowrap",p===S.id?S.species==="dog"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white":"border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900"].join(" "),children:p===S.id?"Selected":"Use This Pet"}),l.jsx("button",{type:"button",onClick:()=>Mu(S),className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 text-sm text-slate-700 dark:text-slate-200 w-full sm:w-auto px-3 whitespace-nowrap",children:"Edit"})]})]}),l.jsx("div",{className:"mt-4 text-sm text-slate-700 dark:text-slate-300 space-y-1.5",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-slate-500",children:"Insurance:"}),(()=>{const te=S.insuranceCompany||"Not Insured",se=te.toLowerCase().includes("nationwide"),fe=te.toLowerCase().includes("healthy paws"),_e=te.toLowerCase().includes("trupanion"),Ve=te.toLowerCase().includes("fetch"),Ge=te.toLowerCase().includes("not insured")||te.toLowerCase().includes("none");let Be="bg-slate-100 dark:bg-slate-800",De="text-slate-700 dark:text-slate-300",Qe="border-slate-200 dark:border-slate-700";return se?(Be="bg-blue-50 dark:bg-blue-950",De="text-blue-700 dark:text-blue-300",Qe="border-blue-200 dark:border-blue-800"):fe?(Be="bg-green-50 dark:bg-green-950",De="text-green-700 dark:text-green-300",Qe="border-green-200 dark:border-green-800"):_e?(Be="bg-purple-50 dark:bg-purple-950",De="text-purple-700 dark:text-purple-300",Qe="border-purple-200 dark:border-purple-800"):Ve?(Be="bg-amber-50 dark:bg-amber-950",De="text-amber-700 dark:text-amber-300",Qe="border-amber-200 dark:border-amber-800"):Ge&&(Be="bg-slate-100 dark:bg-slate-800",De="text-slate-600 dark:text-slate-400",Qe="border-slate-300 dark:border-slate-700"),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${Be} ${De} ${Qe}`,children:[se&&"",fe&&"",_e&&"",Ve&&"",Ge&&"",te]})})()]})}),B===S.id&&O&&l.jsxs("div",{className:"mt-4 rounded-lg border border-slate-200 dark:border-slate-800 p-3 max-w-3xl mx-auto overflow-x-hidden",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-name",className:"block text-xs",children:"Pet Name"}),l.jsx("input",{id:"edit-pet-name",value:O.name,onChange:te=>z({...O,name:te.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-species",className:"block text-xs",children:"Species"}),l.jsxs("select",{id:"edit-pet-species",value:O.species,onChange:te=>z({...O,species:te.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"dog",children:"Dog"}),l.jsx("option",{value:"cat",children:"Cat"})]})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:[l.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Insurance Information"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance",className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsxs("select",{id:"edit-pet-insurance",value:Q,onChange:te=>{const se=te.target.value;de(se),se==="NO_INSURANCE"?z({...O,insuranceCompany:"",filing_deadline_days:"",policyNumber:""}):se==="Custom Insurance"?z({...O,insuranceCompany:"",filing_deadline_days:""}):se&&z({...O,insuranceCompany:se,filing_deadline_days:90})},className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"NO_INSURANCE",children:"Not Insured"}),l.jsx("option",{value:"Trupanion",children:"Trupanion (90 days)"}),l.jsx("option",{value:"Nationwide",children:"Nationwide (90 days)"}),l.jsx("option",{value:"Healthy Paws",children:"Healthy Paws (90 days)"}),l.jsx("option",{value:"Fetch",children:"Fetch (90 days)"}),l.jsx("option",{value:"Custom Insurance",children:"Custom Insurance"})]})]}),Q==="NO_INSURANCE"?l.jsx("div",{className:"sm:col-span-1 flex items-center text-xs text-slate-500 bg-blue-50/50 dark:bg-blue-900/10 px-3 py-2 rounded-md border border-blue-200 dark:border-blue-800",children:l.jsx("span",{children:" No insurance selected. You can still track vet bills and file claims manually."})}):Q==="Custom Insurance"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-custom-name",className:"block text-xs text-slate-500",children:"Insurance Company Name"}),l.jsx("input",{id:"edit-pet-insurance-custom-name",value:L,onChange:te=>$(te.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-custom-deadline",className:"block text-xs text-slate-500",children:"Filing Deadline (days)"}),l.jsx("input",{id:"edit-pet-insurance-custom-deadline",type:"number",min:1,max:365,value:Y,onChange:te=>X(te.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]}):l.jsx("div",{className:"sm:col-span-1 flex items-end text-xs text-slate-600",children:Q?"Filing Deadline: 90 days":""}),Q&&Q!=="NO_INSURANCE"&&l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("label",{htmlFor:"edit-pet-policy-number",className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-slate-400",children:"(optional)"})]}),l.jsx("input",{id:"edit-pet-policy-number",value:O.policyNumber||"",onChange:te=>z({...O,policyNumber:te.target.value}),placeholder:"e.g., NW12345 or TP123456",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]})}),Q!=="NO_INSURANCE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-premium",className:"block text-xs",children:"Monthly Premium (USD)"}),l.jsx("input",{id:"edit-pet-premium",type:"number",step:"0.01",placeholder:"e.g., 38.00",value:String(O.monthly_premium??""),onChange:te=>z({...O,monthly_premium:te.target.value===""?"":Number(te.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Monthly insurance premium cost"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-deductible",className:"block text-xs",children:"Deductible (Annual) (USD)"}),l.jsx("input",{id:"edit-pet-deductible",type:"number",step:"0.01",placeholder:"e.g., 250.00",value:String(O.deductible_per_claim??""),onChange:te=>z({...O,deductible_per_claim:te.target.value===""?"":Number(te.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Amount you pay before insurance kicks in (resets yearly)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-insurance-pays",className:"block text-xs",children:"Insurance Pays (%)"}),l.jsx("input",{id:"edit-pet-insurance-pays",type:"number",min:0,max:100,placeholder:"80",value:String(O.insurance_pays_percentage??""),onChange:te=>z({...O,insurance_pays_percentage:te.target.value===""?"":Number(te.target.value)}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"What percentage your insurance covers (e.g., 80% means you pay 20%)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-pet-coverage-start",className:"block text-xs",children:"Coverage Start Date"}),l.jsx("input",{id:"edit-pet-coverage-start",type:"date",value:O.coverage_start_date||"",onChange:te=>z({...O,coverage_start_date:te.target.value}),className:"mt-1 w-full min-w-[220px] rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"When did your coverage start?"})]})]})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("button",{type:"button",onClick:ao,className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",children:"Save"}),l.jsx("button",{type:"button",onClick:()=>{if(!B)return;const te=g.find(_e=>_e.id===B),se=(te==null?void 0:te.name)||"this pet";if(!confirm(` Delete ${se}?

This will NOT delete bills for this pet, but you won't be able to file new bills.

This cannot be undone!`))return;const fe=g.filter(_e=>_e.id!==B);y(fe),J&&sk(J,B).catch(_e=>{console.error("[deletePet] error",_e)}),A(null),z(null)},className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",children:"Delete"}),l.jsx("button",{type:"button",onClick:()=>{A(null),z(null)},className:"text-sm text-slate-600 dark:text-slate-300",children:"Cancel"})]})]})]},S.id))]})]}),Se==="app"&&l.jsxs("section",{className:"mx-auto max-w-3xl text-center mt-8 px-2",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Upload Vet Bill"}),l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:["rounded-2xl border bg-white dark:bg-slate-900/60 shadow-sm p-6 sm:p-8 transition-colors",n?"border-emerald-400 ring-2 ring-emerald-400/60 dark:ring-emerald-400/50 bg-emerald-50/40 dark:bg-emerald-900/10":"border-slate-200 dark:border-slate-800"].join(" "),onDragEnter:ca,onDragOver:ua,onDragLeave:nl,onDrop:Gr,children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",onClick:Ru,className:"group relative w-full sm:w-auto h-16 rounded-xl border border-slate-300/70 dark:border-slate-700 bg-gradient-to-br from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 hover:from-white hover:to-white px-5 text-base sm:text-sm text-slate-800 dark:text-slate-100 shadow hover:shadow-lg transition",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("svg",{className:"h-6 w-6 text-emerald-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),l.jsx("span",{className:"font-medium",children:"Upload Vet Bill (PDF or Photo)"})]})}),l.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"or drag & drop here"}),l.jsx("input",{ref:t,type:"file",accept:"image/*,application/pdf",onChange:zs,className:"sr-only"}),e&&l.jsxs("div",{className:"mt-6 w-full text-left",children:[l.jsx("div",{className:"flex items-start justify-between gap-4",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:e.file.name}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Bu})]})}),e.objectUrl&&l.jsx("div",{className:"mt-4",children:l.jsx("img",{src:e.objectUrl,alt:"Selected preview",className:"max-h-80 w-full object-contain rounded-lg border border-slate-200 dark:border-slate-800",onLoad:()=>{e.objectUrl&&URL.revokeObjectURL(e.objectUrl)}})}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("button",{type:"button",onClick:S=>{console.log("[MOBILE DEBUG] ========== PROCESS BILL BUTTON CLICKED =========="),console.log("[MOBILE DEBUG] Event:",S),console.log("[MOBILE DEBUG] isProcessing:",i),$u()},disabled:i,className:"inline-flex items-center justify-center w-full h-14 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 text-base sm:text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:[i&&l.jsxs("svg",{className:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),"Process Bill"]}),i&&l.jsxs("div",{className:"mt-4 flex flex-col items-center text-sm text-slate-700 dark:text-slate-300",children:[l.jsxs("svg",{className:"h-6 w-6 animate-spin mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),l.jsx("path",{d:"M4 12a8 8 0 018-8",className:"opacity-75"})]}),l.jsx("div",{children:" Extracting bill data..."})]})]})]})]})})})]}),Se==="app"&&Le&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Multiple Pets Detected"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We found charges for multiple pets on this bill:"}),l.jsx("ul",{className:"mt-2 text-sm list-disc pl-6 text-slate-700 dark:text-slate-200",children:Le.pets.map((S,te)=>l.jsxs("li",{children:[S.petName||`Pet ${te+1}`," (",S.petSpecies||"Pet",")  ",S.subtotal||il(S.lineItems)]},te))}),l.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"We'll create a separate bill for each pet."}),l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx("p",{className:"text-sm font-medium",children:"Match each pet to your saved profiles (or add new ones):"}),Le.pets.map((S,te)=>l.jsx("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 justify-between",children:[l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-sm font-medium",children:S.petName||`Pet ${te+1}`}),l.jsx("div",{className:"text-xs text-slate-500",children:S.petSpecies||"Pet"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",value:et[te]||"",onChange:se=>{const fe=[...et];fe[te]=se.target.value||null,we(fe)},children:[l.jsx("option",{value:"",children:"Select saved pet"}),g.map(se=>l.jsxs("option",{value:se.id,children:[se.name," (",se.species,")"]},se.id))]}),!et[te]&&l.jsx("button",{type:"button",className:"inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-xs hover:shadow",onClick:()=>{var _e;Te(te),j(!0);const se=(S.petSpecies||"").toLowerCase(),fe=se.includes("cat")?"cat":se.includes("dog")?"dog":P.species;F(Ve=>({...Ve,name:S.petName||"",species:fe})),(_e=Me.current)==null||_e.scrollIntoView({behavior:"smooth"})},children:"+ Add New Pet"})]})]})},te))]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",disabled:et.some(S=>!S),onClick:async()=>{const S=[];for(let te=0;te<Le.pets.length;te++){const se=Le.pets[te],fe=et[te],_e=g.find(Je=>Je.id===fe)||null,Ve=se.subtotal||il(se.lineItems),{filename:Ge,blob:Be}=o6({clinicName:Le.clinicName,clinicAddress:Le.clinicAddress,dateOfService:Le.dateOfService,diagnosis:Le.diagnosis,petName:se.petName,lineItems:se.lineItems,subtotal:Ve,invoiceNumber:Le.invoiceNumber},_e);if(J)try{const Je=parseFloat(String(Ve).replace(/[^0-9.\-]/g,""))||null,Pt=Number(_e==null?void 0:_e.filing_deadline_days)||90,Et=Le.dateOfService?new Date(Le.dateOfService):null,xr=Et?new Date(Et.getTime()):null;xr&&xr.setDate(xr.getDate()+Pt);const Ht=await Qv({user_id:J,pet_id:_e?_e.id:null,service_date:Le.dateOfService||null,invoice_number:Le.invoiceNumber||null,clinic_name:Le.clinicName||null,clinic_address:Le.clinicAddress||null,clinic_phone:Le.clinicPhone||null,diagnosis:Le.diagnosis||null,total_amount:Je,line_items:se.lineItems,filing_status:"not_filed",filing_deadline_days:Pt});Ht!=null&&Ht.id&&await es(J,Ht.id,Be)}catch(Je){console.error("[createClaim multi] error",Je)}const De=URL.createObjectURL(Be),Qe=document.createElement("a");Qe.href=De,Qe.download=Ge,document.body.appendChild(Qe),Qe.click(),Qe.remove(),URL.revokeObjectURL(De),S.push({name:Ge,amount:Ve})}J&&Es(J).then(We).catch(()=>{}),Ct(!0),alert(` ${S.length} bills generated and downloaded!
`+S.map(te=>`- ${te.name} (${te.amount})`).join(`
`)+`

Email each bill to your insurance company.`)},children:"Generate Bills"})})]})}),d&&l.jsx("section",{className:"mx-auto mt-8 max-w-3xl",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/60 shadow-sm p-5 sm:p-8",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{f(null),Fe(null),r(null),u(null),x(""),_(""),W("insured")},children:" Cancel"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Extracted Details"})]}),l.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"What was this visit for? (Visit Title)"}),l.jsx("input",{value:b,onChange:S=>_(S.target.value),placeholder:"e.g., Annual checkup, Emergency visit, Teeth cleaning",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),(()=>{if(!d||!Array.isArray(d.lineItems))return null;const S=d.lineItems.map(fe=>oo(fe.amount));return d.lineItems.length>0&&S.every(fe=>!Number.isFinite(fe)||fe===0)?l.jsxs("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:[l.jsx("div",{className:"font-semibold",children:" NO PRICES FOUND"}),l.jsx("div",{className:"mt-1",children:"This appears to be a vaccination certificate or record, not an invoice."}),l.jsx("div",{className:"mt-1",children:"Please upload the actual bill/receipt with itemized charges and prices."}),l.jsx("div",{className:"mt-1 text-amber-800/80",children:"Insurance companies require invoices showing what you paid."})]}):null})(),l.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Review and edit any field if needed."}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Name"}),l.jsx("input",{value:d.clinicName,onChange:S=>f({...d,clinicName:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Address"}),l.jsx("input",{value:d.clinicAddress,onChange:S=>f({...d,clinicAddress:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Clinic Phone"}),l.jsx("input",{value:d.clinicPhone||"",onChange:S=>f({...d,clinicPhone:S.target.value}),placeholder:"(XXX) XXX-XXXX",type:"tel",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Pet Name"}),l.jsx("input",{value:d.petName,onChange:S=>f({...d,petName:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Date of Service"}),l.jsx("input",{type:"date",value:d.dateOfService,onChange:S=>f({...d,dateOfService:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Invoice Number"}),l.jsx("input",{value:d.invoiceNumber||"",onChange:S=>f({...d,invoiceNumber:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Total Amount"}),l.jsx("input",{value:d.totalAmount,onChange:S=>f({...d,totalAmount:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Diagnosis / Reason"}),l.jsx("textarea",{value:d.diagnosis,onChange:S=>f({...d,diagnosis:S.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",rows:3})]})]}),N&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Pet Insurance"}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Insurance Company"}),l.jsx("input",{value:N.insuranceCompany,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Policy Number"}),l.jsx("input",{value:N.policyNumber,readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-semibold",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-sm text-emerald-700 dark:text-emerald-300 hover:underline",onClick:()=>f({...d,lineItems:[...d.lineItems,{description:"",amount:""}]}),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-3 space-y-3",children:d.lineItems.map((S,te)=>l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3",children:[l.jsx("div",{className:"sm:col-span-8",children:l.jsx("input",{placeholder:"Description",value:S.description,onChange:se=>{const fe=[...d.lineItems];fe[te]={...fe[te],description:se.target.value},f({...d,lineItems:fe})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-3",children:l.jsx("input",{placeholder:"Amount",value:S.amount,onChange:se=>{const fe=[...d.lineItems];fe[te]={...fe[te],amount:se.target.value},f({...d,lineItems:fe})},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})}),l.jsx("div",{className:"sm:col-span-1 flex items-center",children:l.jsx("button",{type:"button",className:"text-slate-500 hover:text-rose-600 text-sm",onClick:()=>{const se=d.lineItems.filter((fe,_e)=>_e!==te);f({...d,lineItems:se})},"aria-label":"Remove item",children:""})})]},te))})]}),l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-blue-50/60 dark:bg-blue-900/10 p-4",children:[l.jsxs("label",{htmlFor:"visit-notes",className:"block text-sm font-semibold mb-2",children:[" Visit Notes ",l.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(Optional but recommended)"})]}),l.jsx("textarea",{id:"visit-notes",value:C,onChange:S=>x(S.target.value),placeholder:"What was discussed at this vet visit? (e.g., 'Annual checkup - vet noted minor eye redness from outdoor play, cleared up in 2 days')",rows:3,className:"w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),l.jsxs("p",{className:"mt-2 text-xs text-slate-600 dark:text-slate-400",children:[" ",l.jsx("strong",{children:"Why this matters:"})," Documenting what was discussed protects you from casual comments being misinterpreted later as pre-existing conditions."]})]}),R!=="not_insured"&&(()=>{const S=Number(N==null?void 0:N.filing_deadline_days)||90,te=d.dateOfService?new Date(d.dateOfService):null,se=te?new Date(te.getTime()):null;se&&se.setDate(se.getDate()+S);const fe=new Date,_e=se?Math.ceil((se.getTime()-fe.getTime())/(1e3*60*60*24)):null,Ve=_e===null?{wrap:"bg-slate-50 border-slate-200",title:"text-slate-900"}:_e>=60?{wrap:"bg-emerald-50 border-emerald-200",title:"text-emerald-900"}:_e>=30?{wrap:"bg-yellow-50 border-yellow-200",title:"text-yellow-900"}:_e>=15?{wrap:"bg-orange-50 border-orange-200",title:"text-orange-900"}:{wrap:"bg-rose-50 border-rose-200",title:"text-rose-900"};if(_e!==null&&_e<0){const Ge=te?Math.floor((fe.getTime()-te.getTime())/864e5):0,Be=Math.floor(Ge/365),De=Math.max(1,Math.floor(Ge%365/30)),Qe=Be>=1?Be===1?"over 1 year ago":`over ${Be} years ago`:`over ${De} months ago`;return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm bg-rose-50 border-rose-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold text-rose-900",children:" DEADLINE PASSED"}),l.jsxs("div",{className:"mt-2 text-sm text-rose-900",children:["This bill is from ",d.dateOfService||""," (",Qe,")."]}),l.jsx("div",{className:"mt-2 text-sm text-rose-900",children:"Most insurers won't accept bills this old."}),l.jsx("div",{className:"mt-1 text-xs text-rose-900/80",children:"Contact your insurance company to verify if you can still file."})]})}return l.jsxs("div",{className:["mt-8 rounded-2xl border p-5 shadow-sm",Ve.wrap].join(" "),children:[l.jsx("div",{className:["text-sm font-semibold flex items-center gap-2",Ve.title].join(" "),children:l.jsx("span",{children:" FILING DEADLINE REMINDER"})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Service Date"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:d.dateOfService?new Date(d.dateOfService).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Insurance"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:N?N.insuranceCompany:""})]})]}),l.jsx("div",{className:"mt-3 text-sm",children:l.jsx("div",{className:"text-slate-700",children:" Most insurers require filing within 60180 days of service."})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Estimated Deadline"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:se?se.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Days Remaining"}),l.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base",children:_e===null?"":`${_e} days`})]})]}),l.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"This is a general reminder. Always verify your specific policy deadline."})]})})(),l.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-4",children:[l.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Expense Category"}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"insured",checked:R==="insured",onChange:()=>W("insured")}),l.jsx("span",{children:"Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"not_insured",checked:R==="not_insured",onChange:()=>W("not_insured")}),l.jsx("span",{children:"Not Insured"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"exp-cat",value:"maybe_insured",checked:R==="maybe_insured",onChange:()=>W("maybe_insured")}),l.jsx("span",{children:"Maybe Insured"})]})]})]}),l.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[l.jsx("button",{type:"button",className:"h-11 inline-flex items-center rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-4 text-sm",onClick:()=>{f(null),Fe(null),r(null),u(null),x(""),_(""),W("insured")},children:" Cancel"}),!i&&l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 text-sm font-medium",onClick:async()=>{var Ve;if(!N){Sn(!0);return}const S=Number(N==null?void 0:N.filing_deadline_days)||90,te=d.dateOfService?new Date(d.dateOfService):null,se=te?new Date(te.getTime()):null;se&&se.setDate(se.getDate()+S);let fe=null;if(J)try{const Ge=parseFloat(String(d.totalAmount).replace(/[^0-9.\-]/g,""))||null;fe=await Qv({user_id:J,pet_id:N?N.id:null,service_date:d.dateOfService||null,invoice_number:d.invoiceNumber||null,clinic_name:d.clinicName||null,clinic_address:d.clinicAddress||null,clinic_phone:d.clinicPhone||null,visit_title:b||null,diagnosis:d.diagnosis||null,total_amount:Ge,line_items:d.lineItems,filing_status:"not_submitted",filing_deadline_days:S,visit_notes:C||null,expense_category:R}),console.log("[createClaim single] Checking for vet bill upload...",{hasClaimId:!!(fe!=null&&fe.id),hasSelectedFile:!!e,hasFile:!!(e!=null&&e.file),selectedFileType:(Ve=e==null?void 0:e.file)==null?void 0:Ve.type}),fe!=null&&fe.id&&(e!=null&&e.file)?(console.log("[createClaim single] Uploading vet bill PDF to storage..."),await es(J,fe.id,e.file),console.log("[createClaim single]  Uploaded vet bill PDF for claim:",fe.id)):console.warn("[createClaim single]   No vet bill PDF to upload - selectedFile or file is missing")}catch(Ge){console.error("[createClaim single] error",Ge)}const _e={claimId:(fe==null?void 0:fe.id)||null,petName:(N==null?void 0:N.name)||"Unknown",species:(N==null?void 0:N.species)||"",amount:oo(String(d.totalAmount||"")),serviceDate:d.dateOfService||null,insurance:(N==null?void 0:N.insuranceCompany)||"",deadlineDate:se?se.toISOString().slice(0,10):null,deadlineDays:S};Iu(_e),Ou((fe==null?void 0:fe.id)||null),console.log("[LOOKS GOOD CLICKED] About to show medication modal",{claimId:fe==null?void 0:fe.id}),tn(!0)},children:"Looks Good"})]})]})},JSON.stringify(d)),Se==="app"&&Ie.length>0&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Financial Summary"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("label",{className:"mr-2 text-slate-600",children:"Show expenses for:"}),l.jsxs("select",{value:St,onChange:S=>at(S.target.value),className:"rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm",children:[l.jsx("option",{value:"all",children:"All Time"}),l.jsx("option",{value:"2025",children:"2025"}),l.jsx("option",{value:"2024",children:"2024"}),l.jsx("option",{value:"last12",children:"Last 12 Months"})]})]})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-emerald-200 bg-emerald-50 p-5 dark:border-emerald-900/50 dark:bg-emerald-900/10",children:[l.jsx("div",{className:"text-sm font-semibold",children:" TOTAL REIMBURSED"}),l.jsx("div",{className:"mt-2 text-3xl font-bold text-emerald-700",children:ts(Di.reimbursed)}),l.jsx("div",{className:"mt-1 text-xs text-emerald-800/80 dark:text-emerald-300",children:"Paid by insurance"})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-5 dark:border-slate-800 dark:bg-slate-900",children:[l.jsx("div",{className:"text-sm font-semibold",children:" TOTAL VET BILLS"}),l.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"All veterinary expenses (whether insured or not)"}),l.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(Di.perPet).map(([S,te])=>{const se=g.find(_e=>_e.name===S),fe=(se==null?void 0:se.color)||((se==null?void 0:se.species)==="cat"?"#F97316":(se==null?void 0:se.species)==="dog"?"#3B82F6":"#6B7280");return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"truncate flex items-center gap-2",children:[l.jsx("span",{className:"inline-block h-2 w-2 rounded-full",style:{backgroundColor:fe}}),S]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-semibold",children:ts(te.sum)}),l.jsxs("div",{className:"text-xs text-slate-500",children:[te.count," visits"]})]})]},S)})})]})]}),Se==="app"&&l.jsx("section",{className:"mx-auto mt-10 max-w-5xl",children:l.jsx(j6,{userId:J,refreshToken:ht,period:St})}),Se==="app"&&Ie.length>0&&l.jsxs("section",{className:"mx-auto mt-10 max-w-5xl",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl font-semibold",children:"Vet Bills"})}),l.jsx("div",{className:"mt-4 mb-4 p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-md",children:l.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[l.jsx("span",{className:"text-3xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:"Auto-Submit Coming Soon!"}),l.jsx("p",{className:"text-sm text-blue-100",children:"Soon we'll file claims directly with your insurance company. No more manual work!"})]})]})}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Total bills"}),l.jsx("div",{className:"text-lg font-semibold",children:ws.total})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Bills pending submission"}),l.jsxs("div",{className:"text-lg font-semibold",children:[ws.notFiledCount," ",l.jsxs("span",{className:"text-sm text-slate-500",children:["(",ts(ws.notFiledSum),")"]})]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims filed"}),l.jsx("div",{className:"text-lg font-semibold",children:ws.filedPending})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900",children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Claims expiring soon (< 15 days)"}),l.jsx("div",{className:"text-lg font-semibold",children:ws.expiringSoon})]})]}),l.jsx("div",{ref:ze,className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full overflow-x-hidden",style:{overscrollBehaviorX:"none"},children:mi.map(S=>{const te=S.pets||{},se=(te==null?void 0:te.color)||((te==null?void 0:te.species)==="cat"?"#F97316":(te==null?void 0:te.species)==="dog"?"#3B82F6":"#6B7280");Oi(S);const fe=(()=>{const De=da(S);if(!De)return null;const Qe=new Date(De.getTime());return Qe.setDate(Qe.getDate()+ul(S)),Qe})(),_e=fi(S),Ve=Ii(S.filing_status),Ge=String(S.expense_category||"insured")==="not_insured",Be=(()=>{const De=S.expense_category||"insured";return De==="insured"?{text:"Insured",cls:"bg-emerald-50 text-emerald-700 border border-emerald-200"}:De==="not_insured"?{text:"Not Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}:{text:"Maybe Insured",cls:"bg-amber-50 text-amber-700 border border-amber-200"}})();return l.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-900 shadow-sm min-h-[180px] w-full",style:{border:`2px solid ${se}`,touchAction:"pan-y",overscrollBehaviorX:"none"},children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center",style:{backgroundColor:se+"20"},children:l.jsx("span",{className:"text-slate-700",children:te.species==="cat"?"":""})}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 break-words line-clamp-2",children:`${te.name||"Pet"}  ${S.visit_title&&String(S.visit_title)||S.diagnosis&&String(S.diagnosis)||""}`})})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:[l.jsx("span",{className:"mr-1",children:""}),S.clinic_name||""]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${Be.cls}`,children:Be.text}),!Ge&&l.jsx("div",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${Ve.cls}`,children:Ve.text})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Service Date"}),l.jsx("div",{className:"font-medium",children:S.service_date||""})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-slate-500",children:"Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:ts(S.total_amount)}),String(S.filing_status||"").toLowerCase()==="paid"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:(()=>{const De=Number(S.total_amount||0),Qe=Number(S.reimbursed_amount||0),Je=De>0?Math.round(Qe/De*100):0;return`Claimed: ${ts(De)}  Received: ${ts(Qe)} (${Je}%)`})()})}),S.paid_date&&l.jsx("div",{className:"mt-1 text-[11px]",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",children:`Date Paid: ${new Date(S.paid_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}`})})]})]}),(()=>{const De=String(S.filing_status||"").toLowerCase();if(!(!!S.filed_date&&(De==="filed"||De==="paid")))return null;const Je=(()=>{const Et=String(S.filed_date||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);if(Et)return new Date(Number(Et[1]),Number(Et[2])-1,Number(Et[3])).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const xr=S.filed_date?new Date(S.filed_date):null;return xr?xr.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})();return l.jsxs("div",{className:"col-span-2 mt-1 text-[11px] text-slate-700 dark:text-slate-300 flex items-center gap-1",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Filed: ",Je]})]})})(),Ge?l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Info"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:" Self-paid vet bill"})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Filing Deadline"}),l.jsx("div",{className:"font-medium whitespace-nowrap overflow-hidden",children:fe?fe.toISOString().slice(0,10):""})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${_e.cls}`,children:_e.text})})]})]}),l.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800 flex flex-wrap items-start sm:items-center justify-between gap-2",children:[(()=>{const De=String(S.filing_status||"not_submitted").toLowerCase(),Qe=De==="filed"?"submitted":De==="not_filed"?"not_submitted":De;if(Ge)return l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-600",children:" Not insured - No filing required"})});if(Qe==="not_submitted"){const Je=ae&&D8.includes(ae);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[Je&&l.jsxs("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white font-semibold whitespace-nowrap flex items-center gap-1.5",onClick:()=>la(S),title:"Automatically generate PDF and email to insurance company",children:[l.jsx("span",{children:""}),"Auto-Submit"]}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded bg-emerald-600 hover:bg-emerald-700 text-white whitespace-nowrap",onClick:async()=>{try{const Pt=bs(),xr=prompt("Enter filed date (YYYY-MM-DD):",Pt)||Pt;await Aa(S.id,{filing_status:"filed",filed_date:xr}),We(Ht=>Ht.map(un=>un.id===S.id?{...un,filing_status:"filed",filed_date:xr}:un));try{alert(" Claim marked as submitted")}catch{}if(await new Promise(Ht=>setTimeout(Ht,500)),J){const Ht=await Es(J);We(Ht)}}catch(Pt){console.error("[mark filed] error",Pt)}},title:"Manually mark as submitted (if you filed yourself)",children:"Mark Submitted"})]}),["insured","maybe"].includes(String(S.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"not_submitted",onChange:async Pt=>{try{const Et=Pt.target.value,xr=Et==="submitted"?"filed":Et==="not_submitted"?"not_filed":Et;await Aa(S.id,{filing_status:xr}),We(Ht=>Ht.map(un=>un.id===S.id?{...un,filing_status:xr}:un));try{alert(" Status updated")}catch{}await new Promise(Ht=>setTimeout(Ht,400)),J&&Es(J).then(We)}catch(Et){console.error("[edit status] error",Et)}},children:[l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]}),l.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-950/30 border-l-4 border-blue-400 rounded",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"text-2xl mr-2",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300",children:"Coming Soon: Auto-Submit"}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"We'll file claims directly with your insurance company - no more manual work!"})]})]})})]})}return Qe==="submitted"?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-xs text-slate-600",children:"What happened with this claim?"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{Or(S);const Je=S.total_amount&&Number.isFinite(Number(S.total_amount))?String(Number(S.total_amount).toFixed(2)):"";lr(Je),di(bs())},children:"Payment Received? Mark as Paid"}),l.jsx("button",{type:"button",className:"text-xs px-3 py-1.5 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800",onClick:async()=>{try{await Aa(S.id,{filing_status:"denied"}),We(Je=>Je.map(Pt=>Pt.id===S.id?{...Pt,filing_status:"denied"}:Pt));try{alert(" Claim marked as denied")}catch{}J&&Es(J).then(We)}catch(Je){console.error("[deny claim] error",Je)}},children:"Deny Claim"})]}),["insured","maybe"].includes(String(S.expense_category||"insured").toLowerCase())&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:"Change Status:"}),l.jsxs("select",{className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:"submitted",onChange:async Je=>{try{const Pt=Je.target.value,Et=Pt==="submitted"?"filed":Pt==="not_submitted"?"not_filed":Pt;await Aa(S.id,{filing_status:Et}),We(xr=>xr.map(Ht=>Ht.id===S.id?{...Ht,filing_status:Et}:Ht));try{alert(" Status updated")}catch{}J&&Es(J).then(We)}catch(Pt){console.error("[edit status] error",Pt)}},children:[l.jsx("option",{value:"submitted",children:"Submitted"}),l.jsx("option",{value:"not_submitted",children:"Not Submitted"}),l.jsx("option",{value:"denied",children:"Denied"})]})]})]}):null})(),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[S.pdf_path&&l.jsx("a",{href:"#",onClick:async De=>{De.preventDefault();try{const{data:Qe}=await it.storage.from("claim-pdfs").createSignedUrl(S.pdf_path,60);Qe!=null&&Qe.signedUrl&&window.open(Qe.signedUrl,"_blank")}catch(Qe){console.error("[view pdf] error",Qe)}},className:"text-xs px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 shrink-0 whitespace-nowrap",children:"View PDF"}),l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-rose-200 text-rose-700 hover:bg-rose-50 dark:border-rose-800 shrink-0 whitespace-nowrap",onClick:async()=>{if(confirm("Delete this bill?"))try{await O8(S.id),J&&Es(J).then(We)}catch(De){console.error("[delete claim] error",De)}},children:"Delete"})]})]})]},S.id)})}),mi.length===0&&l.jsx("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-800 p-6 text-center text-sm text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-900",children:"No vet bills yet. Upload your first bill to get started!"})]}),Se==="app"&&l.jsxs("footer",{className:"mx-auto max-w-3xl text-center py-10 text-xs text-slate-500 dark:text-slate-400",children:[" ",new Date().getFullYear()," Pet Claim Helper"]})]}),Z&&l.jsx(R8,{userId:J,userEmail:ae,onClose:()=>mt(!1)}),rt&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Sn(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-rose-200 bg-white p-6",onClick:S=>S.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold text-rose-700",children:" Please Select a Pet"}),l.jsx("div",{className:"mt-2 text-sm text-rose-800",children:"You haven't selected a pet for this bill yet."}),l.jsx("div",{className:"mt-1 text-sm text-rose-800",children:"Please go back and click 'Use This Pet' for the pet you want to add this bill for."}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{className:"inline-flex items-center rounded-lg bg-rose-600 hover:bg-rose-700 text-white px-3 py-1.5 text-sm",onClick:()=>Sn(!1),children:"Go Back"})})]})}),Yt&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Mt(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-2xl rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 flex flex-col max-h-[85vh]",onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-800",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Edit Bill"}),l.jsx("button",{className:"text-sm",onClick:()=>Mt(null),children:"Close"})]}),["filed","paid"].includes(String(Yt.filing_status||"").toLowerCase())&&l.jsx("div",{className:"mx-5 mt-3 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:" This claim has been filed. Changes may require resubmitting to insurance."}),l.jsx("div",{className:"p-5 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Pet"}),l.jsxs("select",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Jt||"",onChange:S=>Xn(S.target.value),children:[l.jsx("option",{value:"",children:""}),g.map(S=>l.jsx("option",{value:S.id,children:S.name},S.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Service Date"}),l.jsx("input",{type:"date",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:Tt,onChange:S=>ci(S.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Title"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:vs,onChange:S=>sr(S.target.value),placeholder:"e.g., Annual checkup, Teeth cleaning"})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Diagnosis / Reason"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:nr,onChange:S=>Dn(S.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Visit Notes"}),l.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",value:ut,onChange:S=>Ot(S.target.value)})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Line Items"}),l.jsx("button",{type:"button",className:"text-xs text-emerald-700",onClick:()=>hr([...Fn,{description:"",amount:""}]),children:"+ Add Item"})]}),l.jsx("div",{className:"mt-2 space-y-2",children:Fn.map((S,te)=>l.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[l.jsx("input",{className:"col-span-8 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Description",value:S.description,onChange:se=>{const fe=[...Fn];fe[te]={...fe[te],description:se.target.value},hr(fe)}}),l.jsx("input",{className:"col-span-3 rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-2 py-1",placeholder:"Amount",value:S.amount,onChange:se=>{const fe=[...Fn];fe[te]={...fe[te],amount:se.target.value},hr(fe)}}),l.jsx("button",{className:"col-span-1 text-xs",onClick:()=>{const se=Fn.filter((fe,_e)=>_e!==te);hr(se)},children:""})]},te))})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Expense Category"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Nn==="insured",onChange:()=>_n("insured")})," Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Nn==="not_insured",onChange:()=>_n("not_insured")})," Not Insured"]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",name:"edit-exp",checked:Nn==="maybe_insured",onChange:()=>_n("maybe_insured")})," Maybe"]})]})]})]})}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Mt(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{if(Yt)try{if(await Aa(Yt.id,{pet_id:Jt||Yt.pet_id,service_date:Tt||null,visit_title:vs||null,diagnosis:nr||null,visit_notes:ut||null,line_items:Fn,expense_category:Nn}),J){const S=await Es(J);We(S)}Mt(null),alert("Bill updated")}catch(S){console.error("[update claim] error",S),alert("Error updating bill")}},children:"Save Changes"})]})]})}),Tr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Or(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0",onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Mark as Paid"}),l.jsx("button",{className:"text-sm",onClick:()=>Or(null),children:"Close"})]}),l.jsxs("div",{className:"p-5 text-sm space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500",children:"Claimed Amount"}),l.jsx("div",{className:"font-mono font-semibold",children:ts(Tr.total_amount)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Reimbursed Amount"}),l.jsx("input",{className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2",placeholder:"0.00",value:fr,onChange:S=>lr(S.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-slate-500",children:"Date Received"}),l.jsx("input",{type:"date",value:en,onChange:S=>di(S.target.value),max:bs(),placeholder:"YYYY-MM-DD",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2"})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[l.jsx("div",{className:"text-slate-500",children:"Difference"}),l.jsx("div",{className:"font-mono font-semibold",children:(()=>{const S=Number(Tr.total_amount||0),te=Number(fr||0),se=S-te;return ts(se)})()})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-800 flex items-center justify-end gap-3",children:[l.jsx("button",{className:"text-sm",onClick:()=>Or(null),children:"Cancel"}),l.jsx("button",{className:"inline-flex items-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 text-sm",onClick:async()=>{try{const S=Number(fr);if(!Number.isFinite(S)||S<0){alert("Please enter a valid reimbursed amount");return}if(!en){alert("Please select the date received");return}const te=new Date(en).toISOString().slice(0,10),se=Number(Tr.total_amount||0),fe=Tr.pet_id||null,_e=Tr.service_date?Number(String(Tr.service_date).slice(0,4)):null,Ve=_e&&fe?Ie.some(Je=>Je.id!==Tr.id&&Je.pet_id===fe&&String(Je.expense_category||"").toLowerCase()==="insured"&&String(Je.filing_status||"").toLowerCase()==="paid"&&Je.service_date&&String(Je.service_date).slice(0,4)===String(_e)&&Number(Je.deductible_applied||0)>0):!1,Ge=fe?g.find(Je=>Je.id===fe):null,Be=Math.max(0,Number((Ge==null?void 0:Ge.deductible_per_claim)||0)),De=Math.min(se,Ve?0:Be),Qe=Math.max(0,se-De-S);if(await Aa(Tr.id,{filing_status:"paid",reimbursed_amount:S,paid_date:te,deductible_applied:De,user_coinsurance_payment:Qe}),J){const Je=await Es(J);We(Je)}Or(null),lr(""),di(bs()),alert("Claim marked as paid")}catch(S){console.error("[mark paid] error",S),alert("Error saving paid status")}},children:"Save"})]})]})}),ys&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>tn(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:S=>S.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Medications Prescribed?"}),l.jsx("div",{className:"mt-2 text-sm text-slate-700 dark:text-slate-300",children:"Were any medications prescribed during this vet visit?"}),l.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>{tn(!1),aa&&jn(aa)},children:"No"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{if(tn(!1),J&&N){const S=bs(),{data:te,error:se}=await it.from("medications").select("*").eq("user_id",J).eq("pet_id",N.id).lte("start_date",S).or(`end_date.is.null,end_date.gte.${S}`);if(se)throw se;Bs(Array.isArray(te)?te:[])}else Bs([]);Ai([]),Mn(!0)}catch(S){console.error("[med question -> load meds] error",S),Bs([]),Mn(!0)}},children:"Yes"})]})]})}),xs&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>Mn(!1),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:S=>S.stopPropagation(),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Select Medications Prescribed"}),l.jsxs("div",{className:"mt-3 space-y-2 max-h-[50vh] overflow-y-auto",children:[Ci.length===0&&l.jsx("div",{className:"text-sm text-slate-600",children:"No active medications found"}),Ci.map(S=>l.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg border border-slate-200 dark:border-slate-800",children:[l.jsx("input",{type:"checkbox",checked:hi.includes(S.id),onChange:te=>{const se=te.target.checked;Ai(fe=>se?[...fe,S.id]:fe.filter(_e=>_e!==S.id))}}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-sm font-medium",children:S.medication_name}),S.dosage&&l.jsx("div",{className:"text-xs text-slate-500",children:S.dosage})]})]},S.id))]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",className:"w-full h-12 rounded-lg border border-slate-300 dark:border-slate-700",onClick:()=>Ko(!0),children:"+ Add New Medication"})}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[l.jsx("button",{type:"button",className:"h-12 rounded-lg border border-slate-300 dark:border-slate-700 px-4",onClick:()=>Mn(!1),children:"Cancel"}),l.jsx("button",{type:"button",className:"h-12 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4",onClick:async()=>{try{so&&hi.length>0&&await Aa(so,{medication_ids:hi}),Mn(!1),$s("Medications saved ")}catch(S){console.error("[med select -> link meds] error",S),Mn(!1),$s("Medications saved ")}},children:"Confirm"})]})]})}),io&&l.jsx(ib,{open:io,onClose:()=>Ko(!1),onSaved:async()=>{try{if(J&&N){const S=bs(),{data:te}=await it.from("medications").select("*").eq("user_id",J).eq("pet_id",N.id).lte("start_date",S).or(`end_date.is.null,end_date.gte.${S}`);Bs(Array.isArray(te)?te:[])}}catch{}},userId:J,pets:g,defaultPetId:(N==null?void 0:N.id)||null}),Pi&&l.jsx(A8,{medicationId:Pi,userId:J,onClose:S=>{Zo(null),window.history.pushState({},"","/"),S&&Xo(te=>te+1)}}),oa&&J&&l.jsx(E8,{claim:oa,pet:oa.pets||{},userId:J,onClose:()=>la(null),onSuccess:async S=>{if(console.log("[Auto-Submit] Success! Message ID:",S),la(null),J){const te=await Es(J);We(te)}$s(" Claim submitted to insurance!")}}),l.jsx(k6,{open:Us,onClose:()=>{kn(!1),J&&lh(J).then(y).catch(()=>{})},userId:J||""}),Ir&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>jn(null),children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-emerald-200 bg-white p-0 overflow-hidden",onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"p-6 bg-emerald-50 dark:bg-emerald-900/20 border-b border-emerald-200 dark:border-emerald-800 flex flex-col items-center text-center",children:[l.jsx("div",{className:"h-14 w-14 rounded-full bg-emerald-600 text-white flex items-center justify-center text-2xl shadow animate-pulse",children:""}),l.jsx("div",{className:"mt-3 text-lg font-semibold text-emerald-800 dark:text-emerald-200",children:"Vet Bill Saved Successfully!"}),l.jsx("div",{className:"mt-1 text-xs text-emerald-900/80 dark:text-emerald-300/80",children:"Your vet bill was saved. You can submit it to insurance when ready."})]}),l.jsxs("div",{className:"p-6 text-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Pet:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100 font-semibold",children:[Ir.petName," (",Ir.species,")"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Amount:"})," ",l.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-slate-100",children:ts(Ir.amount||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Date:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Ir.serviceDate||""})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Insurance:"})," ",l.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:Ir.insurance||""})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Filing Deadline:"})," ",l.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[Ir.deadlineDate||""," (",Ir.deadlineDays," days)"]})]})]}),l.jsx("div",{className:"mt-5 flex justify-center",children:l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 text-sm font-medium w-full sm:w-auto",onClick:async()=>{jn(null),f(null),Fe(null),r(null),u(null),x(""),_(""),W("insured");try{if(J){const S=await Es(J);We(S)}}catch{}Ct(!1)},children:"Done"})})]})]})})]})}function M8({mode:t,onSwitch:e}){const[r,n]=re.useState(""),[s,i]=re.useState(""),[a,o]=re.useState(!1),[u,d]=re.useState(null),[f,g]=re.useState(!1),[y,p]=re.useState(null),[k,N]=re.useState(""),[C,x]=re.useState(!1),[b,_]=re.useState(null),[R,W]=re.useState(null),K=async j=>{var P,F,B;j.preventDefault(),o(!0),d(null),_(null),W(null);try{try{console.log("[auth] handleSubmit start:",{mode:t,emailPreview:r.replace(/(.).+(@.+)/,"$1***$2")})}catch{}if(t==="signup"){if(!k||k.trim().length===0){_("Phone number is required for SMS medication reminders"),o(!1);return}if(!C){W("You must consent to receive SMS reminders to use this feature"),o(!1);return}const{data:A,error:O}=await it.auth.signUp({email:r,password:s});try{console.log("[auth] signUp result:",{hasUser:!!(A!=null&&A.user),hasSession:!!(A!=null&&A.session),error:O||null})}catch{}if(O)throw O;if(console.log("[auth] Checking SMS consent:",{smsConsent:C,hasPhoneNumber:!!k,phoneNumber:k}),C&&k){console.log("[auth] Storing SMS consent in localStorage for after email verification");try{const z=hw(k);z&&(localStorage.setItem("pending_sms_consent",JSON.stringify({phone_number:z,consented:!0,consent_text:"By checking this box, you consent to receive up to 3 SMS reminders per medication prescription. Message and data rates may apply. Reply STOP to opt out, HELP for support. Privacy Policy: https://pawpals.ai/pet-claim-helper-privacy-policy | Terms of Service: https://pawpals.ai/pet-claim-helper-terms-of-servcie",timestamp:new Date().toISOString()})),console.log("[auth] SMS consent stored in localStorage (E.164 format), will be saved after email verification and login"))}catch(z){console.error("[auth] Failed to store SMS consent in localStorage:",z)}}p(r)}else{const{data:A,error:O}=await it.auth.signInWithPassword({email:r,password:s});try{console.log("[auth] signInWithPassword result:",{hasUser:!!(A!=null&&A.user),hasSession:!!(A!=null&&A.session),error:O||null})}catch{}if(O)throw O;try{const{data:z}=await it.auth.getSession();console.log("[auth] post-login getSession():",{hasSession:!!(z!=null&&z.session),userId:((F=(P=z==null?void 0:z.session)==null?void 0:P.user)==null?void 0:F.id)||null});const q=typeof window<"u"?(B=window.localStorage)==null?void 0:B.getItem("pch.auth"):null;console.log("[auth] localStorage pch.auth present:",!!q)}catch{}}}catch(A){d((A==null?void 0:A.message)||"Authentication failed")}finally{o(!1)}};return l.jsxs("form",{onSubmit:K,className:"mt-2 space-y-3",children:[y&&l.jsxs("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-800 text-sm",children:[l.jsx("div",{className:"font-medium",children:"Account created!"}),l.jsxs("div",{className:"text-[13px] mt-1",children:["Please check your email at ",l.jsx("span",{className:"font-mono",children:y})," to verify your account. You won't be able to log in until you confirm your email address."]})]}),t==="signup"?l.jsxs("div",{className:"text-center text-sm text-slate-700 dark:text-slate-200 mb-2",children:[l.jsx("div",{className:"font-medium",children:"Welcome! Create your account"}),l.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:" Save pets  Auto-fill bills  Access anywhere"})]}):l.jsx("div",{className:"text-center text-sm text-slate-700 dark:text-slate-200 mb-2",children:l.jsx("div",{className:"font-medium",children:"Welcome back!"})}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-email",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Email"}),l.jsx("input",{id:"auth-email",type:"email",value:r,onChange:j=>n(j.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"auth-password",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{id:"auth-password",type:f?"text":"password",value:s,onChange:j=>i(j.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 pr-10 text-sm",required:!0}),l.jsx("button",{type:"button",onClick:()=>g(j=>!j),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700 dark:text-slate-400","aria-label":f?"Hide password":"Show password",title:f?"Hide password":"Show password",children:f?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20C7 20 2.73 16.11 1 12a21.87 21.87 0 0 1 5.06-7.94"}),l.jsx("path",{d:"M10.58 10.58a2 2 0 1 0 2.83 2.83"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 4.12A10.94 10.94 0 0 1 12 4c5 0 9.27 3.89 11 8a21.87 21.87 0 0 1-2.16 3.19"})]}):l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),t==="signup"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"auth-phone",className:"block text-xs font-medium text-slate-600 dark:text-slate-300",children:["Phone Number (for medication reminders) ",l.jsx("span",{className:"text-rose-600",children:"*"})]}),l.jsx("input",{id:"auth-phone",type:"tel",value:k,onChange:j=>{N(fw(j.target.value,k)),_(null)},placeholder:"(123) 456-7890",className:["mt-1 w-full rounded-md border px-3 py-2 text-sm bg-white/80 dark:bg-slate-900",b?"border-rose-500":"border-slate-300 dark:border-slate-700"].join(" "),required:!0}),b&&l.jsx("p",{className:"mt-1 text-xs text-rose-600",children:b})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:j=>{x(j.target.checked),W(null)},className:["mt-0.5 w-4 h-4 rounded border-2",R?"border-rose-500":"border-slate-400 dark:border-slate-500","checked:bg-emerald-600 checked:border-emerald-600"].join(" "),required:!0}),l.jsxs("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:["I agree to receive SMS medication reminders from Pet Claim Helper ",l.jsx("span",{className:"text-rose-600",children:"*"})]})]}),R&&l.jsx("p",{className:"ml-6 text-xs text-rose-600",children:R}),C&&l.jsxs("div",{className:"ml-6 text-[11px] text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsx("p",{children:"By checking this box, you consent to receive up to 3 SMS reminders per medication prescription. Message and data rates may apply. Reply STOP to opt out, HELP for support."}),l.jsxs("p",{children:[l.jsx("a",{href:"https://pawpals.ai/pet-claim-helper-privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 dark:text-emerald-400 hover:underline",children:"Privacy Policy"})," | ",l.jsx("a",{href:"https://pawpals.ai/pet-claim-helper-terms-of-servcie",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 dark:text-emerald-400 hover:underline",children:"Terms of Service"})]})]})]})]}),u&&l.jsx("p",{className:"text-xs text-rose-600",children:u}),l.jsx("button",{type:"submit",disabled:a,className:["w-full inline-flex items-center justify-center rounded-lg text-white px-4 py-2 text-sm font-medium disabled:opacity-60",t==="signup"?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-700 hover:bg-emerald-800"].join(" "),children:a?"Please wait":t==="login"?"Log In":"Sign Up"})]})}function R8({userId:t,userEmail:e,onClose:r}){const[n,s]=re.useState(e||"");return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:r,children:l.jsxs("div",{className:"relative mx-4 w-full max-w-md rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6 shadow-2xl",onClick:i=>i.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-userid",className:"block text-sm font-medium mb-1",children:"User ID"}),l.jsx("input",{id:"settings-userid",type:"text",value:t||"",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settings-email",className:"block text-sm font-medium mb-1",children:"Email"}),l.jsx("input",{id:"settings-email",type:"email",value:n,onChange:i=>s(i.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]}),l.jsx("button",{onClick:r,className:"mt-6 w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium",children:"Close"})]})})}function U8({userId:t,userEmail:e,onClose:r,onDefaultExpenseChange:n,onDefaultPeriodChange:s}){const[i,a]=re.useState(!1),[o,u]=re.useState(""),[d,f]=re.useState(""),[g,y]=re.useState(""),[p,k]=re.useState(""),[N,C]=re.useState(""),[x,b]=re.useState(null),[_,R]=re.useState(!1),[W,K]=re.useState(!1),[j,P]=re.useState(!1),[F,B]=re.useState("insured"),[A,O]=re.useState("all"),[z,q]=re.useState(""),[ee,Q]=re.useState(""),[de,H]=re.useState(90);re.useEffect(()=>{t&&(async()=>{a(!0);try{const{data:ne,error:xe}=await it.from("profiles").select("*").eq("id",t).single();if(xe)throw xe;ne&&(u(ne.full_name||""),f(ne.phone?I8(ne.phone):""),y(ne.address||""),k(ne.insurance_company||""),C(ne.policy_number||""),b(ne.signature||null),R(!!ne.email_reminders),K(!!ne.weekly_summaries),P(!!ne.deadline_alerts),B(ne.default_expense_category||"insured"),O(ne.default_time_period||"all"),ne.insurance_company&&(["Trupanion","Nationwide","Healthy Paws","Fetch"].includes(ne.insurance_company)?(q(ne.insurance_company),H(Number(ne.filing_deadline_days||90))):(q("Custom Insurance"),Q(ne.insurance_company),H(Number(ne.filing_deadline_days||90)))))}catch(ne){console.error("[settings load] error",ne)}finally{a(!1)}})()},[t]);const oe=async()=>{if(t){a(!0);try{const ne=hw(d),{error:xe}=await it.from("profiles").upsert({id:t,email:e||"",full_name:o,phone:ne||null,address:g||null,insurance_company:p||null,policy_number:N||null});if(xe)throw xe;alert("Profile saved successfully!"),r()}catch(ne){console.error("[save profile] error",ne),alert("Error saving profile")}finally{a(!1)}}};return l.jsxs("section",{className:"mx-auto max-w-3xl mt-6 pb-12",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),l.jsx("button",{type:"button",onClick:r,className:"text-sm text-slate-600 dark:text-slate-300",children:"Close"})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Profile Information"}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Email"}),l.jsx("input",{value:e||"",readOnly:!0,className:"mt-1 w-full rounded-md border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/40 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Full Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:o,onChange:ne=>u(ne.target.value),placeholder:"John Smith",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-slate-500",children:"Address"}),l.jsx("input",{value:g,onChange:ne=>y(ne.target.value),placeholder:"123 Main St, City, ST 12345",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Optional - will be requested when submitting to insurance if not provided"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Phone Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:d,onChange:ne=>f(fw(ne.target.value,d)),placeholder:"(123) 456-7890",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),l.jsxs("div",{className:"mt-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-5",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Insurance Information"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Required for automatic claim submission"}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Insurance Company ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:p,onChange:ne=>k(ne.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm",children:[l.jsx("option",{value:"",children:"Select your insurance company..."}),l.jsx("option",{value:"Nationwide",children:"Nationwide"}),l.jsx("option",{value:"Healthy Paws",children:"Healthy Paws"}),l.jsx("option",{value:"Trupanion",children:"Trupanion"}),l.jsx("option",{value:"Fetch",children:"Fetch"}),l.jsx("option",{value:"Embrace",children:"Embrace"}),l.jsx("option",{value:"ASPCA",children:"ASPCA Pet Health Insurance"}),l.jsx("option",{value:"Lemonade",children:"Lemonade"}),l.jsx("option",{value:"Figo",children:"Figo"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-slate-500",children:["Policy Number ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:N,onChange:ne=>C(ne.target.value),placeholder:"Enter your policy number",className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900 px-3 py-2 text-sm"})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(L8,{userId:t,initialSignature:x,onSave:ne=>b(ne)})}),l.jsxs("div",{className:"mt-4 sticky bottom-4 bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800 shadow-lg",children:[l.jsx("button",{type:"button",onClick:oe,disabled:i,className:"w-full inline-flex items-center justify-center rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2.5 text-sm font-medium disabled:opacity-60 transition-colors",children:i?"Saving...":"Save Profile"}),l.jsxs("p",{className:"mt-2 text-xs text-center text-slate-500",children:[l.jsx("span",{className:"text-red-500",children:"*"})," Required fields for claim submission"]})]})]})}h0.createRoot(document.getElementById("root")).render(l.jsx(Vp.StrictMode,{children:l.jsx(F8,{})}));export{zt as _,fs as c,Bp as g};
